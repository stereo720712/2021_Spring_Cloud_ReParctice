(window.webpackJsonp=window.webpackJsonp||[]).push([[41],Array(836).concat([function(e,t,n){e.exports=function(){"use strict";var e=Array.prototype.slice;function t(e,t){t&&(e.prototype=Object.create(t.prototype)),e.prototype.constructor=e}function n(e){return a(e)?e:q(e)}function r(e){return c(e)?e:V(e)}function o(e){return s(e)?e:H(e)}function i(e){return a(e)&&!u(e)?e:K(e)}function a(e){return!(!e||!e[d])}function c(e){return!(!e||!e[f])}function s(e){return!(!e||!e[p])}function u(e){return c(e)||s(e)}function l(e){return!(!e||!e[h])}t(r,n),t(o,n),t(i,n),n.isIterable=a,n.isKeyed=c,n.isIndexed=s,n.isAssociative=u,n.isOrdered=l,n.Keyed=r,n.Indexed=o,n.Set=i;var d="@@__IMMUTABLE_ITERABLE__@@",f="@@__IMMUTABLE_KEYED__@@",p="@@__IMMUTABLE_INDEXED__@@",h="@@__IMMUTABLE_ORDERED__@@",b={},v={value:!1},m={value:!1};function g(e){return e.value=!1,e}function y(e){e&&(e.value=!0)}function O(){}function j(e,t){t=t||0;for(var n=Math.max(0,e.length-t),r=new Array(n),o=0;o<n;o++)r[o]=e[o+t];return r}function w(e){return void 0===e.size&&(e.size=e.__iterate(k)),e.size}function C(e,t){if("number"!=typeof t){var n=t>>>0;if(""+n!==t||4294967295===n)return NaN;t=n}return t<0?w(e)+t:t}function k(){return!0}function S(e,t,n){return(0===e||void 0!==n&&e<=-n)&&(void 0===t||void 0!==n&&t>=n)}function x(e,t){return E(e,t,0)}function R(e,t){return E(e,t,t)}function E(e,t,n){return void 0===e?n:e<0?Math.max(0,t+e):void 0===t?e:Math.min(t,e)}var _,A,T,N="function"==typeof Symbol&&Symbol.iterator,I=N||"@@iterator";function M(e){this.next=e}function D(e,t,n,r){var o=0===e?t:1===e?n:[t,n];return r?r.value=o:r={value:o,done:!1},r}function L(){return{value:void 0,done:!0}}function P(e){return!!F(e)}function z(e){return e&&"function"==typeof e.next}function B(e){var t=F(e);return t&&t.call(e)}function F(e){var t=e&&(N&&e[N]||e["@@iterator"]);if("function"==typeof t)return t}function U(e){return e&&"number"==typeof e.length}function q(e){return null==e?J():a(e)?e.toSeq():function(e){var t=ee(e)||"object"==typeof e&&new W(e);if(!t)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+e);return t}(e)}function V(e){return null==e?J().toKeyedSeq():a(e)?c(e)?e.toSeq():e.fromEntrySeq():$(e)}function H(e){return null==e?J():a(e)?c(e)?e.entrySeq():e.toIndexedSeq():X(e)}function K(e){return(null==e?J():a(e)?c(e)?e.entrySeq():e:X(e)).toSetSeq()}function Q(e){this._array=e,this.size=e.length}function W(e){var t=Object.keys(e);this._object=e,this._keys=t,this.size=t.length}function G(e){this._iterable=e,this.size=e.length||e.size}function Z(e){this._iterator=e,this._iteratorCache=[]}function Y(e){return!(!e||!e["@@__IMMUTABLE_SEQ__@@"])}function J(){return _||(_=new Q([]))}function $(e){var t=Array.isArray(e)?new Q(e).fromEntrySeq():z(e)?new Z(e).fromEntrySeq():P(e)?new G(e).fromEntrySeq():"object"==typeof e?new W(e):void 0;if(!t)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+e);return t}function X(e){var t=ee(e);if(!t)throw new TypeError("Expected Array or iterable object of values: "+e);return t}function ee(e){return U(e)?new Q(e):z(e)?new Z(e):P(e)?new G(e):void 0}function te(e,t,n,r){var o=e._cache;if(o){for(var i=o.length-1,a=0;a<=i;a++){var c=o[n?i-a:a];if(!1===t(c[1],r?c[0]:a,e))return a+1}return a}return e.__iterateUncached(t,n)}function ne(e,t,n,r){var o=e._cache;if(o){var i=o.length-1,a=0;return new M((function(){var e=o[n?i-a:a];return a++>i?{value:void 0,done:!0}:D(t,r?e[0]:a-1,e[1])}))}return e.__iteratorUncached(t,n)}function re(e,t){return t?function e(t,n,r,o){return Array.isArray(n)?t.call(o,r,H(n).map((function(r,o){return e(t,r,o,n)}))):ie(n)?t.call(o,r,V(n).map((function(r,o){return e(t,r,o,n)}))):n}(t,e,"",{"":e}):oe(e)}function oe(e){return Array.isArray(e)?H(e).map(oe).toList():ie(e)?V(e).map(oe).toMap():e}function ie(e){return e&&(e.constructor===Object||void 0===e.constructor)}function ae(e,t){if(e===t||e!=e&&t!=t)return!0;if(!e||!t)return!1;if("function"==typeof e.valueOf&&"function"==typeof t.valueOf){if((e=e.valueOf())===(t=t.valueOf())||e!=e&&t!=t)return!0;if(!e||!t)return!1}return!("function"!=typeof e.equals||"function"!=typeof t.equals||!e.equals(t))}function ce(e,t){if(e===t)return!0;if(!a(t)||void 0!==e.size&&void 0!==t.size&&e.size!==t.size||void 0!==e.__hash&&void 0!==t.__hash&&e.__hash!==t.__hash||c(e)!==c(t)||s(e)!==s(t)||l(e)!==l(t))return!1;if(0===e.size&&0===t.size)return!0;var n=!u(e);if(l(e)){var r=e.entries();return t.every((function(e,t){var o=r.next().value;return o&&ae(o[1],e)&&(n||ae(o[0],t))}))&&r.next().done}var o=!1;if(void 0===e.size)if(void 0===t.size)"function"==typeof e.cacheResult&&e.cacheResult();else{o=!0;var i=e;e=t,t=i}var d=!0,f=t.__iterate((function(t,r){if(n?!e.has(t):o?!ae(t,e.get(r,b)):!ae(e.get(r,b),t))return d=!1,!1}));return d&&e.size===f}function se(e,t){if(!(this instanceof se))return new se(e,t);if(this._value=e,this.size=void 0===t?1/0:Math.max(0,t),0===this.size){if(A)return A;A=this}}function ue(e,t){if(!e)throw new Error(t)}function le(e,t,n){if(!(this instanceof le))return new le(e,t,n);if(ue(0!==n,"Cannot step a Range by 0"),e=e||0,void 0===t&&(t=1/0),n=void 0===n?1:Math.abs(n),t<e&&(n=-n),this._start=e,this._end=t,this._step=n,this.size=Math.max(0,Math.ceil((t-e)/n-1)+1),0===this.size){if(T)return T;T=this}}function de(){throw TypeError("Abstract")}function fe(){}function pe(){}function he(){}M.prototype.toString=function(){return"[Iterator]"},M.KEYS=0,M.VALUES=1,M.ENTRIES=2,M.prototype.inspect=M.prototype.toSource=function(){return this.toString()},M.prototype[I]=function(){return this},t(q,n),q.of=function(){return q(arguments)},q.prototype.toSeq=function(){return this},q.prototype.toString=function(){return this.__toString("Seq {","}")},q.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},q.prototype.__iterate=function(e,t){return te(this,e,t,!0)},q.prototype.__iterator=function(e,t){return ne(this,e,t,!0)},t(V,q),V.prototype.toKeyedSeq=function(){return this},t(H,q),H.of=function(){return H(arguments)},H.prototype.toIndexedSeq=function(){return this},H.prototype.toString=function(){return this.__toString("Seq [","]")},H.prototype.__iterate=function(e,t){return te(this,e,t,!1)},H.prototype.__iterator=function(e,t){return ne(this,e,t,!1)},t(K,q),K.of=function(){return K(arguments)},K.prototype.toSetSeq=function(){return this},q.isSeq=Y,q.Keyed=V,q.Set=K,q.Indexed=H,q.prototype["@@__IMMUTABLE_SEQ__@@"]=!0,t(Q,H),Q.prototype.get=function(e,t){return this.has(e)?this._array[C(this,e)]:t},Q.prototype.__iterate=function(e,t){for(var n=this._array,r=n.length-1,o=0;o<=r;o++)if(!1===e(n[t?r-o:o],o,this))return o+1;return o},Q.prototype.__iterator=function(e,t){var n=this._array,r=n.length-1,o=0;return new M((function(){return o>r?{value:void 0,done:!0}:D(e,o,n[t?r-o++:o++])}))},t(W,V),W.prototype.get=function(e,t){return void 0===t||this.has(e)?this._object[e]:t},W.prototype.has=function(e){return this._object.hasOwnProperty(e)},W.prototype.__iterate=function(e,t){for(var n=this._object,r=this._keys,o=r.length-1,i=0;i<=o;i++){var a=r[t?o-i:i];if(!1===e(n[a],a,this))return i+1}return i},W.prototype.__iterator=function(e,t){var n=this._object,r=this._keys,o=r.length-1,i=0;return new M((function(){var a=r[t?o-i:i];return i++>o?{value:void 0,done:!0}:D(e,a,n[a])}))},W.prototype[h]=!0,t(G,H),G.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);var n=B(this._iterable),r=0;if(z(n))for(var o;!(o=n.next()).done&&!1!==e(o.value,r++,this););return r},G.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var n=B(this._iterable);if(!z(n))return new M(L);var r=0;return new M((function(){var t=n.next();return t.done?t:D(e,r++,t.value)}))},t(Z,H),Z.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);for(var n,r=this._iterator,o=this._iteratorCache,i=0;i<o.length;)if(!1===e(o[i],i++,this))return i;for(;!(n=r.next()).done;){var a=n.value;if(o[i]=a,!1===e(a,i++,this))break}return i},Z.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var n=this._iterator,r=this._iteratorCache,o=0;return new M((function(){if(o>=r.length){var t=n.next();if(t.done)return t;r[o]=t.value}return D(e,o,r[o++])}))},t(se,H),se.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},se.prototype.get=function(e,t){return this.has(e)?this._value:t},se.prototype.includes=function(e){return ae(this._value,e)},se.prototype.slice=function(e,t){var n=this.size;return S(e,t,n)?this:new se(this._value,R(t,n)-x(e,n))},se.prototype.reverse=function(){return this},se.prototype.indexOf=function(e){return ae(this._value,e)?0:-1},se.prototype.lastIndexOf=function(e){return ae(this._value,e)?this.size:-1},se.prototype.__iterate=function(e,t){for(var n=0;n<this.size;n++)if(!1===e(this._value,n,this))return n+1;return n},se.prototype.__iterator=function(e,t){var n=this,r=0;return new M((function(){return r<n.size?D(e,r++,n._value):{value:void 0,done:!0}}))},se.prototype.equals=function(e){return e instanceof se?ae(this._value,e._value):ce(e)},t(le,H),le.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(this._step>1?" by "+this._step:"")+" ]"},le.prototype.get=function(e,t){return this.has(e)?this._start+C(this,e)*this._step:t},le.prototype.includes=function(e){var t=(e-this._start)/this._step;return t>=0&&t<this.size&&t===Math.floor(t)},le.prototype.slice=function(e,t){return S(e,t,this.size)?this:(e=x(e,this.size),(t=R(t,this.size))<=e?new le(0,0):new le(this.get(e,this._end),this.get(t,this._end),this._step))},le.prototype.indexOf=function(e){var t=e-this._start;if(t%this._step==0){var n=t/this._step;if(n>=0&&n<this.size)return n}return-1},le.prototype.lastIndexOf=function(e){return this.indexOf(e)},le.prototype.__iterate=function(e,t){for(var n=this.size-1,r=this._step,o=t?this._start+n*r:this._start,i=0;i<=n;i++){if(!1===e(o,i,this))return i+1;o+=t?-r:r}return i},le.prototype.__iterator=function(e,t){var n=this.size-1,r=this._step,o=t?this._start+n*r:this._start,i=0;return new M((function(){var a=o;return o+=t?-r:r,i>n?{value:void 0,done:!0}:D(e,i++,a)}))},le.prototype.equals=function(e){return e instanceof le?this._start===e._start&&this._end===e._end&&this._step===e._step:ce(this,e)},t(de,n),t(fe,de),t(pe,de),t(he,de),de.Keyed=fe,de.Indexed=pe,de.Set=he;var be="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(e,t){var n=65535&(e|=0),r=65535&(t|=0);return n*r+((e>>>16)*r+n*(t>>>16)<<16>>>0)|0};function ve(e){return e>>>1&1073741824|3221225471&e}function me(e){if(!1===e||null==e)return 0;if("function"==typeof e.valueOf&&(!1===(e=e.valueOf())||null==e))return 0;if(!0===e)return 1;var t=typeof e;if("number"===t){var n=0|e;for(n!==e&&(n^=4294967295*e);e>4294967295;)n^=e/=4294967295;return ve(n)}if("string"===t)return e.length>Se?function(e){var t=Ee[e];return void 0===t&&(t=ge(e),Re===xe&&(Re=0,Ee={}),Re++,Ee[e]=t),t}(e):ge(e);if("function"==typeof e.hashCode)return e.hashCode();if("object"===t)return function(e){var t;if(we&&void 0!==(t=ye.get(e)))return t;if(void 0!==(t=e[ke]))return t;if(!je){if(void 0!==(t=e.propertyIsEnumerable&&e.propertyIsEnumerable[ke]))return t;if(void 0!==(t=function(e){if(e&&e.nodeType>0)switch(e.nodeType){case 1:return e.uniqueID;case 9:return e.documentElement&&e.documentElement.uniqueID}}(e)))return t}if(t=++Ce,1073741824&Ce&&(Ce=0),we)ye.set(e,t);else{if(void 0!==Oe&&!1===Oe(e))throw new Error("Non-extensible objects are not allowed as keys.");if(je)Object.defineProperty(e,ke,{enumerable:!1,configurable:!1,writable:!1,value:t});else if(void 0!==e.propertyIsEnumerable&&e.propertyIsEnumerable===e.constructor.prototype.propertyIsEnumerable)e.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},e.propertyIsEnumerable[ke]=t;else{if(void 0===e.nodeType)throw new Error("Unable to set a non-enumerable property on object.");e[ke]=t}}return t}(e);if("function"==typeof e.toString)return ge(e.toString());throw new Error("Value type "+t+" cannot be hashed.")}function ge(e){for(var t=0,n=0;n<e.length;n++)t=31*t+e.charCodeAt(n)|0;return ve(t)}var ye,Oe=Object.isExtensible,je=function(){try{return Object.defineProperty({},"@",{}),!0}catch(e){return!1}}(),we="function"==typeof WeakMap;we&&(ye=new WeakMap);var Ce=0,ke="__immutablehash__";"function"==typeof Symbol&&(ke=Symbol(ke));var Se=16,xe=255,Re=0,Ee={};function _e(e){ue(e!==1/0,"Cannot perform this action with an infinite size.")}function Ae(e){return null==e?He():Te(e)&&!l(e)?e:He().withMutations((function(t){var n=r(e);_e(n.size),n.forEach((function(e,n){return t.set(n,e)}))}))}function Te(e){return!(!e||!e[Ie])}t(Ae,fe),Ae.prototype.toString=function(){return this.__toString("Map {","}")},Ae.prototype.get=function(e,t){return this._root?this._root.get(0,void 0,e,t):t},Ae.prototype.set=function(e,t){return Ke(this,e,t)},Ae.prototype.setIn=function(e,t){return this.updateIn(e,b,(function(){return t}))},Ae.prototype.remove=function(e){return Ke(this,e,b)},Ae.prototype.deleteIn=function(e){return this.updateIn(e,(function(){return b}))},Ae.prototype.update=function(e,t,n){return 1===arguments.length?e(this):this.updateIn([e],t,n)},Ae.prototype.updateIn=function(e,t,n){n||(n=t,t=void 0);var r=function e(t,n,r,o){var i=t===b,a=n.next();if(a.done){var c=i?r:t,s=o(c);return s===c?t:s}ue(i||t&&t.set,"invalid keyPath");var u=a.value,l=i?b:t.get(u,b),d=e(l,n,r,o);return d===l?t:d===b?t.remove(u):(i?He():t).set(u,d)}(this,Zt(e),t,n);return r===b?void 0:r},Ae.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):He()},Ae.prototype.merge=function(){return Ze(this,void 0,arguments)},Ae.prototype.mergeWith=function(t){var n=e.call(arguments,1);return Ze(this,t,n)},Ae.prototype.mergeIn=function(t){var n=e.call(arguments,1);return this.updateIn(t,He(),(function(e){return"function"==typeof e.merge?e.merge.apply(e,n):n[n.length-1]}))},Ae.prototype.mergeDeep=function(){return Ze(this,Ye,arguments)},Ae.prototype.mergeDeepWith=function(t){var n=e.call(arguments,1);return Ze(this,Je(t),n)},Ae.prototype.mergeDeepIn=function(t){var n=e.call(arguments,1);return this.updateIn(t,He(),(function(e){return"function"==typeof e.mergeDeep?e.mergeDeep.apply(e,n):n[n.length-1]}))},Ae.prototype.sort=function(e){return jt(zt(this,e))},Ae.prototype.sortBy=function(e,t){return jt(zt(this,t,e))},Ae.prototype.withMutations=function(e){var t=this.asMutable();return e(t),t.wasAltered()?t.__ensureOwner(this.__ownerID):this},Ae.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new O)},Ae.prototype.asImmutable=function(){return this.__ensureOwner()},Ae.prototype.wasAltered=function(){return this.__altered},Ae.prototype.__iterator=function(e,t){return new Fe(this,e,t)},Ae.prototype.__iterate=function(e,t){var n=this,r=0;return this._root&&this._root.iterate((function(t){return r++,e(t[1],t[0],n)}),t),r},Ae.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?Ve(this.size,this._root,e,this.__hash):(this.__ownerID=e,this.__altered=!1,this)},Ae.isMap=Te;var Ne,Ie="@@__IMMUTABLE_MAP__@@",Me=Ae.prototype;function De(e,t){this.ownerID=e,this.entries=t}function Le(e,t,n){this.ownerID=e,this.bitmap=t,this.nodes=n}function Pe(e,t,n){this.ownerID=e,this.count=t,this.nodes=n}function ze(e,t,n){this.ownerID=e,this.keyHash=t,this.entries=n}function Be(e,t,n){this.ownerID=e,this.keyHash=t,this.entry=n}function Fe(e,t,n){this._type=t,this._reverse=n,this._stack=e._root&&qe(e._root)}function Ue(e,t){return D(e,t[0],t[1])}function qe(e,t){return{node:e,index:0,__prev:t}}function Ve(e,t,n,r){var o=Object.create(Me);return o.size=e,o._root=t,o.__ownerID=n,o.__hash=r,o.__altered=!1,o}function He(){return Ne||(Ne=Ve(0))}function Ke(e,t,n){var r,o;if(e._root){var i=g(v),a=g(m);if(r=Qe(e._root,e.__ownerID,0,void 0,t,n,i,a),!a.value)return e;o=e.size+(i.value?n===b?-1:1:0)}else{if(n===b)return e;o=1,r=new De(e.__ownerID,[[t,n]])}return e.__ownerID?(e.size=o,e._root=r,e.__hash=void 0,e.__altered=!0,e):r?Ve(o,r):He()}function Qe(e,t,n,r,o,i,a,c){return e?e.update(t,n,r,o,i,a,c):i===b?e:(y(c),y(a),new Be(t,r,[o,i]))}function We(e){return e.constructor===Be||e.constructor===ze}function Ge(e,t,n,r,o){if(e.keyHash===r)return new ze(t,r,[e.entry,o]);var i,a=31&(0===n?e.keyHash:e.keyHash>>>n),c=31&(0===n?r:r>>>n);return new Le(t,1<<a|1<<c,a===c?[Ge(e,t,n+5,r,o)]:(i=new Be(t,r,o),a<c?[e,i]:[i,e]))}function Ze(e,t,n){for(var o=[],i=0;i<n.length;i++){var c=n[i],s=r(c);a(c)||(s=s.map((function(e){return re(e)}))),o.push(s)}return $e(e,t,o)}function Ye(e,t,n){return e&&e.mergeDeep&&a(t)?e.mergeDeep(t):ae(e,t)?e:t}function Je(e){return function(t,n,r){if(t&&t.mergeDeepWith&&a(n))return t.mergeDeepWith(e,n);var o=e(t,n,r);return ae(t,o)?t:o}}function $e(e,t,n){return 0===(n=n.filter((function(e){return 0!==e.size}))).length?e:0!==e.size||e.__ownerID||1!==n.length?e.withMutations((function(e){for(var r=t?function(n,r){e.update(r,b,(function(e){return e===b?n:t(e,n,r)}))}:function(t,n){e.set(n,t)},o=0;o<n.length;o++)n[o].forEach(r)})):e.constructor(n[0])}function Xe(e){return e=(e=(858993459&(e-=e>>1&1431655765))+(e>>2&858993459))+(e>>4)&252645135,e+=e>>8,127&(e+=e>>16)}function et(e,t,n,r){var o=r?e:j(e);return o[t]=n,o}Me[Ie]=!0,Me.delete=Me.remove,Me.removeIn=Me.deleteIn,De.prototype.get=function(e,t,n,r){for(var o=this.entries,i=0,a=o.length;i<a;i++)if(ae(n,o[i][0]))return o[i][1];return r},De.prototype.update=function(e,t,n,r,o,i,a){for(var c=o===b,s=this.entries,u=0,l=s.length;u<l&&!ae(r,s[u][0]);u++);var d=u<l;if(d?s[u][1]===o:c)return this;if(y(a),(c||!d)&&y(i),!c||1!==s.length){if(!d&&!c&&s.length>=tt)return function(e,t,n,r){e||(e=new O);for(var o=new Be(e,me(n),[n,r]),i=0;i<t.length;i++){var a=t[i];o=o.update(e,0,void 0,a[0],a[1])}return o}(e,s,r,o);var f=e&&e===this.ownerID,p=f?s:j(s);return d?c?u===l-1?p.pop():p[u]=p.pop():p[u]=[r,o]:p.push([r,o]),f?(this.entries=p,this):new De(e,p)}},Le.prototype.get=function(e,t,n,r){void 0===t&&(t=me(n));var o=1<<(31&(0===e?t:t>>>e)),i=this.bitmap;return 0==(i&o)?r:this.nodes[Xe(i&o-1)].get(e+5,t,n,r)},Le.prototype.update=function(e,t,n,r,o,i,a){void 0===n&&(n=me(r));var c=31&(0===t?n:n>>>t),s=1<<c,u=this.bitmap,l=0!=(u&s);if(!l&&o===b)return this;var d=Xe(u&s-1),f=this.nodes,p=l?f[d]:void 0,h=Qe(p,e,t+5,n,r,o,i,a);if(h===p)return this;if(!l&&h&&f.length>=nt)return function(e,t,n,r,o){for(var i=0,a=new Array(32),c=0;0!==n;c++,n>>>=1)a[c]=1&n?t[i++]:void 0;return a[r]=o,new Pe(e,i+1,a)}(e,f,u,c,h);if(l&&!h&&2===f.length&&We(f[1^d]))return f[1^d];if(l&&h&&1===f.length&&We(h))return h;var v=e&&e===this.ownerID,m=l?h?u:u^s:u|s,g=l?h?et(f,d,h,v):function(e,t,n){var r=e.length-1;if(n&&t===r)return e.pop(),e;for(var o=new Array(r),i=0,a=0;a<r;a++)a===t&&(i=1),o[a]=e[a+i];return o}(f,d,v):function(e,t,n,r){var o=e.length+1;if(r&&t+1===o)return e[t]=n,e;for(var i=new Array(o),a=0,c=0;c<o;c++)c===t?(i[c]=n,a=-1):i[c]=e[c+a];return i}(f,d,h,v);return v?(this.bitmap=m,this.nodes=g,this):new Le(e,m,g)},Pe.prototype.get=function(e,t,n,r){void 0===t&&(t=me(n));var o=31&(0===e?t:t>>>e),i=this.nodes[o];return i?i.get(e+5,t,n,r):r},Pe.prototype.update=function(e,t,n,r,o,i,a){void 0===n&&(n=me(r));var c=31&(0===t?n:n>>>t),s=o===b,u=this.nodes,l=u[c];if(s&&!l)return this;var d=Qe(l,e,t+5,n,r,o,i,a);if(d===l)return this;var f=this.count;if(l){if(!d&&--f<rt)return function(e,t,n,r){for(var o=0,i=0,a=new Array(n),c=0,s=1,u=t.length;c<u;c++,s<<=1){var l=t[c];void 0!==l&&c!==r&&(o|=s,a[i++]=l)}return new Le(e,o,a)}(e,u,f,c)}else f++;var p=e&&e===this.ownerID,h=et(u,c,d,p);return p?(this.count=f,this.nodes=h,this):new Pe(e,f,h)},ze.prototype.get=function(e,t,n,r){for(var o=this.entries,i=0,a=o.length;i<a;i++)if(ae(n,o[i][0]))return o[i][1];return r},ze.prototype.update=function(e,t,n,r,o,i,a){void 0===n&&(n=me(r));var c=o===b;if(n!==this.keyHash)return c?this:(y(a),y(i),Ge(this,e,t,n,[r,o]));for(var s=this.entries,u=0,l=s.length;u<l&&!ae(r,s[u][0]);u++);var d=u<l;if(d?s[u][1]===o:c)return this;if(y(a),(c||!d)&&y(i),c&&2===l)return new Be(e,this.keyHash,s[1^u]);var f=e&&e===this.ownerID,p=f?s:j(s);return d?c?u===l-1?p.pop():p[u]=p.pop():p[u]=[r,o]:p.push([r,o]),f?(this.entries=p,this):new ze(e,this.keyHash,p)},Be.prototype.get=function(e,t,n,r){return ae(n,this.entry[0])?this.entry[1]:r},Be.prototype.update=function(e,t,n,r,o,i,a){var c=o===b,s=ae(r,this.entry[0]);return(s?o===this.entry[1]:c)?this:(y(a),c?void y(i):s?e&&e===this.ownerID?(this.entry[1]=o,this):new Be(e,this.keyHash,[r,o]):(y(i),Ge(this,e,t,me(r),[r,o])))},De.prototype.iterate=ze.prototype.iterate=function(e,t){for(var n=this.entries,r=0,o=n.length-1;r<=o;r++)if(!1===e(n[t?o-r:r]))return!1},Le.prototype.iterate=Pe.prototype.iterate=function(e,t){for(var n=this.nodes,r=0,o=n.length-1;r<=o;r++){var i=n[t?o-r:r];if(i&&!1===i.iterate(e,t))return!1}},Be.prototype.iterate=function(e,t){return e(this.entry)},t(Fe,M),Fe.prototype.next=function(){for(var e=this._type,t=this._stack;t;){var n,r=t.node,o=t.index++;if(r.entry){if(0===o)return Ue(e,r.entry)}else if(r.entries){if(o<=(n=r.entries.length-1))return Ue(e,r.entries[this._reverse?n-o:o])}else if(o<=(n=r.nodes.length-1)){var i=r.nodes[this._reverse?n-o:o];if(i){if(i.entry)return Ue(e,i.entry);t=this._stack=qe(i,t)}continue}t=this._stack=this._stack.__prev}return{value:void 0,done:!0}};var tt=8,nt=16,rt=8;function ot(e){var t=ht();if(null==e)return t;if(it(e))return e;var n=o(e),r=n.size;return 0===r?t:(_e(r),r>0&&r<32?pt(0,r,5,null,new st(n.toArray())):t.withMutations((function(e){e.setSize(r),n.forEach((function(t,n){return e.set(n,t)}))})))}function it(e){return!(!e||!e[at])}t(ot,pe),ot.of=function(){return this(arguments)},ot.prototype.toString=function(){return this.__toString("List [","]")},ot.prototype.get=function(e,t){if((e=C(this,e))>=0&&e<this.size){var n=mt(this,e+=this._origin);return n&&n.array[31&e]}return t},ot.prototype.set=function(e,t){return function(e,t,n){if((t=C(e,t))!=t)return e;if(t>=e.size||t<0)return e.withMutations((function(e){t<0?gt(e,t).set(0,n):gt(e,0,t+1).set(t,n)}));t+=e._origin;var r=e._tail,o=e._root,i=g(m);return t>=Ot(e._capacity)?r=bt(r,e.__ownerID,0,t,n,i):o=bt(o,e.__ownerID,e._level,t,n,i),i.value?e.__ownerID?(e._root=o,e._tail=r,e.__hash=void 0,e.__altered=!0,e):pt(e._origin,e._capacity,e._level,o,r):e}(this,e,t)},ot.prototype.remove=function(e){return this.has(e)?0===e?this.shift():e===this.size-1?this.pop():this.splice(e,1):this},ot.prototype.insert=function(e,t){return this.splice(e,0,t)},ot.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=5,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):ht()},ot.prototype.push=function(){var e=arguments,t=this.size;return this.withMutations((function(n){gt(n,0,t+e.length);for(var r=0;r<e.length;r++)n.set(t+r,e[r])}))},ot.prototype.pop=function(){return gt(this,0,-1)},ot.prototype.unshift=function(){var e=arguments;return this.withMutations((function(t){gt(t,-e.length);for(var n=0;n<e.length;n++)t.set(n,e[n])}))},ot.prototype.shift=function(){return gt(this,1)},ot.prototype.merge=function(){return yt(this,void 0,arguments)},ot.prototype.mergeWith=function(t){var n=e.call(arguments,1);return yt(this,t,n)},ot.prototype.mergeDeep=function(){return yt(this,Ye,arguments)},ot.prototype.mergeDeepWith=function(t){var n=e.call(arguments,1);return yt(this,Je(t),n)},ot.prototype.setSize=function(e){return gt(this,0,e)},ot.prototype.slice=function(e,t){var n=this.size;return S(e,t,n)?this:gt(this,x(e,n),R(t,n))},ot.prototype.__iterator=function(e,t){var n=0,r=ft(this,t);return new M((function(){var t=r();return t===dt?{value:void 0,done:!0}:D(e,n++,t)}))},ot.prototype.__iterate=function(e,t){for(var n,r=0,o=ft(this,t);(n=o())!==dt&&!1!==e(n,r++,this););return r},ot.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?pt(this._origin,this._capacity,this._level,this._root,this._tail,e,this.__hash):(this.__ownerID=e,this)},ot.isList=it;var at="@@__IMMUTABLE_LIST__@@",ct=ot.prototype;function st(e,t){this.array=e,this.ownerID=t}ct[at]=!0,ct.delete=ct.remove,ct.setIn=Me.setIn,ct.deleteIn=ct.removeIn=Me.removeIn,ct.update=Me.update,ct.updateIn=Me.updateIn,ct.mergeIn=Me.mergeIn,ct.mergeDeepIn=Me.mergeDeepIn,ct.withMutations=Me.withMutations,ct.asMutable=Me.asMutable,ct.asImmutable=Me.asImmutable,ct.wasAltered=Me.wasAltered,st.prototype.removeBefore=function(e,t,n){if(n===t?1<<t:0===this.array.length)return this;var r=n>>>t&31;if(r>=this.array.length)return new st([],e);var o,i=0===r;if(t>0){var a=this.array[r];if((o=a&&a.removeBefore(e,t-5,n))===a&&i)return this}if(i&&!o)return this;var c=vt(this,e);if(!i)for(var s=0;s<r;s++)c.array[s]=void 0;return o&&(c.array[r]=o),c},st.prototype.removeAfter=function(e,t,n){if(n===(t?1<<t:0)||0===this.array.length)return this;var r,o=n-1>>>t&31;if(o>=this.array.length)return this;if(t>0){var i=this.array[o];if((r=i&&i.removeAfter(e,t-5,n))===i&&o===this.array.length-1)return this}var a=vt(this,e);return a.array.splice(o+1),r&&(a.array[o]=r),a};var ut,lt,dt={};function ft(e,t){var n=e._origin,r=e._capacity,o=Ot(r),i=e._tail;return a(e._root,e._level,0);function a(e,c,s){return 0===c?function(e,a){var c=a===o?i&&i.array:e&&e.array,s=a>n?0:n-a,u=r-a;return u>32&&(u=32),function(){if(s===u)return dt;var e=t?--u:s++;return c&&c[e]}}(e,s):function(e,o,i){var c,s=e&&e.array,u=i>n?0:n-i>>o,l=1+(r-i>>o);return l>32&&(l=32),function(){for(;;){if(c){var e=c();if(e!==dt)return e;c=null}if(u===l)return dt;var n=t?--l:u++;c=a(s&&s[n],o-5,i+(n<<o))}}}(e,c,s)}}function pt(e,t,n,r,o,i,a){var c=Object.create(ct);return c.size=t-e,c._origin=e,c._capacity=t,c._level=n,c._root=r,c._tail=o,c.__ownerID=i,c.__hash=a,c.__altered=!1,c}function ht(){return ut||(ut=pt(0,0,5))}function bt(e,t,n,r,o,i){var a,c=r>>>n&31,s=e&&c<e.array.length;if(!s&&void 0===o)return e;if(n>0){var u=e&&e.array[c],l=bt(u,t,n-5,r,o,i);return l===u?e:((a=vt(e,t)).array[c]=l,a)}return s&&e.array[c]===o?e:(y(i),a=vt(e,t),void 0===o&&c===a.array.length-1?a.array.pop():a.array[c]=o,a)}function vt(e,t){return t&&e&&t===e.ownerID?e:new st(e?e.array.slice():[],t)}function mt(e,t){if(t>=Ot(e._capacity))return e._tail;if(t<1<<e._level+5){for(var n=e._root,r=e._level;n&&r>0;)n=n.array[t>>>r&31],r-=5;return n}}function gt(e,t,n){void 0!==t&&(t|=0),void 0!==n&&(n|=0);var r=e.__ownerID||new O,o=e._origin,i=e._capacity,a=o+t,c=void 0===n?i:n<0?i+n:o+n;if(a===o&&c===i)return e;if(a>=c)return e.clear();for(var s=e._level,u=e._root,l=0;a+l<0;)u=new st(u&&u.array.length?[void 0,u]:[],r),l+=1<<(s+=5);l&&(a+=l,o+=l,c+=l,i+=l);for(var d=Ot(i),f=Ot(c);f>=1<<s+5;)u=new st(u&&u.array.length?[u]:[],r),s+=5;var p=e._tail,h=f<d?mt(e,c-1):f>d?new st([],r):p;if(p&&f>d&&a<i&&p.array.length){for(var b=u=vt(u,r),v=s;v>5;v-=5){var m=d>>>v&31;b=b.array[m]=vt(b.array[m],r)}b.array[d>>>5&31]=p}if(c<i&&(h=h&&h.removeAfter(r,0,c)),a>=f)a-=f,c-=f,s=5,u=null,h=h&&h.removeBefore(r,0,a);else if(a>o||f<d){for(l=0;u;){var g=a>>>s&31;if(g!==f>>>s&31)break;g&&(l+=(1<<s)*g),s-=5,u=u.array[g]}u&&a>o&&(u=u.removeBefore(r,s,a-l)),u&&f<d&&(u=u.removeAfter(r,s,f-l)),l&&(a-=l,c-=l)}return e.__ownerID?(e.size=c-a,e._origin=a,e._capacity=c,e._level=s,e._root=u,e._tail=h,e.__hash=void 0,e.__altered=!0,e):pt(a,c,s,u,h)}function yt(e,t,n){for(var r=[],i=0,c=0;c<n.length;c++){var s=n[c],u=o(s);u.size>i&&(i=u.size),a(s)||(u=u.map((function(e){return re(e)}))),r.push(u)}return i>e.size&&(e=e.setSize(i)),$e(e,t,r)}function Ot(e){return e<32?0:e-1>>>5<<5}function jt(e){return null==e?kt():wt(e)?e:kt().withMutations((function(t){var n=r(e);_e(n.size),n.forEach((function(e,n){return t.set(n,e)}))}))}function wt(e){return Te(e)&&l(e)}function Ct(e,t,n,r){var o=Object.create(jt.prototype);return o.size=e?e.size:0,o._map=e,o._list=t,o.__ownerID=n,o.__hash=r,o}function kt(){return lt||(lt=Ct(He(),ht()))}function St(e,t,n){var r,o,i=e._map,a=e._list,c=i.get(t),s=void 0!==c;if(n===b){if(!s)return e;a.size>=32&&a.size>=2*i.size?(r=(o=a.filter((function(e,t){return void 0!==e&&c!==t}))).toKeyedSeq().map((function(e){return e[0]})).flip().toMap(),e.__ownerID&&(r.__ownerID=o.__ownerID=e.__ownerID)):(r=i.remove(t),o=c===a.size-1?a.pop():a.set(c,void 0))}else if(s){if(n===a.get(c)[1])return e;r=i,o=a.set(c,[t,n])}else r=i.set(t,a.size),o=a.set(a.size,[t,n]);return e.__ownerID?(e.size=r.size,e._map=r,e._list=o,e.__hash=void 0,e):Ct(r,o)}function xt(e,t){this._iter=e,this._useKeys=t,this.size=e.size}function Rt(e){this._iter=e,this.size=e.size}function Et(e){this._iter=e,this.size=e.size}function _t(e){this._iter=e,this.size=e.size}function At(e){var t=Qt(e);return t._iter=e,t.size=e.size,t.flip=function(){return e},t.reverse=function(){var t=e.reverse.apply(this);return t.flip=function(){return e.reverse()},t},t.has=function(t){return e.includes(t)},t.includes=function(t){return e.has(t)},t.cacheResult=Wt,t.__iterateUncached=function(t,n){var r=this;return e.__iterate((function(e,n){return!1!==t(n,e,r)}),n)},t.__iteratorUncached=function(t,n){if(2===t){var r=e.__iterator(t,n);return new M((function(){var e=r.next();if(!e.done){var t=e.value[0];e.value[0]=e.value[1],e.value[1]=t}return e}))}return e.__iterator(1===t?0:1,n)},t}function Tt(e,t,n){var r=Qt(e);return r.size=e.size,r.has=function(t){return e.has(t)},r.get=function(r,o){var i=e.get(r,b);return i===b?o:t.call(n,i,r,e)},r.__iterateUncached=function(r,o){var i=this;return e.__iterate((function(e,o,a){return!1!==r(t.call(n,e,o,a),o,i)}),o)},r.__iteratorUncached=function(r,o){var i=e.__iterator(2,o);return new M((function(){var o=i.next();if(o.done)return o;var a=o.value,c=a[0];return D(r,c,t.call(n,a[1],c,e),o)}))},r}function Nt(e,t){var n=Qt(e);return n._iter=e,n.size=e.size,n.reverse=function(){return e},e.flip&&(n.flip=function(){var t=At(e);return t.reverse=function(){return e.flip()},t}),n.get=function(n,r){return e.get(t?n:-1-n,r)},n.has=function(n){return e.has(t?n:-1-n)},n.includes=function(t){return e.includes(t)},n.cacheResult=Wt,n.__iterate=function(t,n){var r=this;return e.__iterate((function(e,n){return t(e,n,r)}),!n)},n.__iterator=function(t,n){return e.__iterator(t,!n)},n}function It(e,t,n,r){var o=Qt(e);return r&&(o.has=function(r){var o=e.get(r,b);return o!==b&&!!t.call(n,o,r,e)},o.get=function(r,o){var i=e.get(r,b);return i!==b&&t.call(n,i,r,e)?i:o}),o.__iterateUncached=function(o,i){var a=this,c=0;return e.__iterate((function(e,i,s){if(t.call(n,e,i,s))return c++,o(e,r?i:c-1,a)}),i),c},o.__iteratorUncached=function(o,i){var a=e.__iterator(2,i),c=0;return new M((function(){for(;;){var i=a.next();if(i.done)return i;var s=i.value,u=s[0],l=s[1];if(t.call(n,l,u,e))return D(o,r?u:c++,l,i)}}))},o}function Mt(e,t,n,r){var o=e.size;if(void 0!==t&&(t|=0),void 0!==n&&(n|=0),S(t,n,o))return e;var i=x(t,o),a=R(n,o);if(i!=i||a!=a)return Mt(e.toSeq().cacheResult(),t,n,r);var c,s=a-i;s==s&&(c=s<0?0:s);var u=Qt(e);return u.size=0===c?c:e.size&&c||void 0,!r&&Y(e)&&c>=0&&(u.get=function(t,n){return(t=C(this,t))>=0&&t<c?e.get(t+i,n):n}),u.__iterateUncached=function(t,n){var o=this;if(0===c)return 0;if(n)return this.cacheResult().__iterate(t,n);var a=0,s=!0,u=0;return e.__iterate((function(e,n){if(!s||!(s=a++<i))return u++,!1!==t(e,r?n:u-1,o)&&u!==c})),u},u.__iteratorUncached=function(t,n){if(0!==c&&n)return this.cacheResult().__iterator(t,n);var o=0!==c&&e.__iterator(t,n),a=0,s=0;return new M((function(){for(;a++<i;)o.next();if(++s>c)return{value:void 0,done:!0};var e=o.next();return r||1===t?e:D(t,s-1,0===t?void 0:e.value[1],e)}))},u}function Dt(e,t,n,r){var o=Qt(e);return o.__iterateUncached=function(o,i){var a=this;if(i)return this.cacheResult().__iterate(o,i);var c=!0,s=0;return e.__iterate((function(e,i,u){if(!c||!(c=t.call(n,e,i,u)))return s++,o(e,r?i:s-1,a)})),s},o.__iteratorUncached=function(o,i){var a=this;if(i)return this.cacheResult().__iterator(o,i);var c=e.__iterator(2,i),s=!0,u=0;return new M((function(){var e,i,l;do{if((e=c.next()).done)return r||1===o?e:D(o,u++,0===o?void 0:e.value[1],e);var d=e.value;i=d[0],l=d[1],s&&(s=t.call(n,l,i,a))}while(s);return 2===o?e:D(o,i,l,e)}))},o}function Lt(e,t){var n=c(e),o=[e].concat(t).map((function(e){return a(e)?n&&(e=r(e)):e=n?$(e):X(Array.isArray(e)?e:[e]),e})).filter((function(e){return 0!==e.size}));if(0===o.length)return e;if(1===o.length){var i=o[0];if(i===e||n&&c(i)||s(e)&&s(i))return i}var u=new Q(o);return n?u=u.toKeyedSeq():s(e)||(u=u.toSetSeq()),(u=u.flatten(!0)).size=o.reduce((function(e,t){if(void 0!==e){var n=t.size;if(void 0!==n)return e+n}}),0),u}function Pt(e,t,n){var r=Qt(e);return r.__iterateUncached=function(r,o){var i=0,c=!1;return function e(s,u){var l=this;s.__iterate((function(o,s){return(!t||u<t)&&a(o)?e(o,u+1):!1===r(o,n?s:i++,l)&&(c=!0),!c}),o)}(e,0),i},r.__iteratorUncached=function(r,o){var i=e.__iterator(r,o),c=[],s=0;return new M((function(){for(;i;){var e=i.next();if(!1===e.done){var u=e.value;if(2===r&&(u=u[1]),t&&!(c.length<t)||!a(u))return n?e:D(r,s++,u,e);c.push(i),i=u.__iterator(r,o)}else i=c.pop()}return{value:void 0,done:!0}}))},r}function zt(e,t,n){t||(t=Gt);var r=c(e),o=0,i=e.toSeq().map((function(t,r){return[r,t,o++,n?n(t,r,e):t]})).toArray();return i.sort((function(e,n){return t(e[3],n[3])||e[2]-n[2]})).forEach(r?function(e,t){i[t].length=2}:function(e,t){i[t]=e[1]}),r?V(i):s(e)?H(i):K(i)}function Bt(e,t,n){if(t||(t=Gt),n){var r=e.toSeq().map((function(t,r){return[t,n(t,r,e)]})).reduce((function(e,n){return Ft(t,e[1],n[1])?n:e}));return r&&r[0]}return e.reduce((function(e,n){return Ft(t,e,n)?n:e}))}function Ft(e,t,n){var r=e(n,t);return 0===r&&n!==t&&(null==n||n!=n)||r>0}function Ut(e,t,r){var o=Qt(e);return o.size=new Q(r).map((function(e){return e.size})).min(),o.__iterate=function(e,t){for(var n,r=this.__iterator(1,t),o=0;!(n=r.next()).done&&!1!==e(n.value,o++,this););return o},o.__iteratorUncached=function(e,o){var i=r.map((function(e){return e=n(e),B(o?e.reverse():e)})),a=0,c=!1;return new M((function(){var n;return c||(n=i.map((function(e){return e.next()})),c=n.some((function(e){return e.done}))),c?{value:void 0,done:!0}:D(e,a++,t.apply(null,n.map((function(e){return e.value}))))}))},o}function qt(e,t){return Y(e)?t:e.constructor(t)}function Vt(e){if(e!==Object(e))throw new TypeError("Expected [K, V] tuple: "+e)}function Ht(e){return _e(e.size),w(e)}function Kt(e){return c(e)?r:s(e)?o:i}function Qt(e){return Object.create((c(e)?V:s(e)?H:K).prototype)}function Wt(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):q.prototype.cacheResult.call(this)}function Gt(e,t){return e>t?1:e<t?-1:0}function Zt(e){var t=B(e);if(!t){if(!U(e))throw new TypeError("Expected iterable or array-like: "+e);t=B(n(e))}return t}function Yt(e,t){var n,r=function(i){if(i instanceof r)return i;if(!(this instanceof r))return new r(i);if(!n){n=!0;var a=Object.keys(e);!function(e,t){try{t.forEach(en.bind(void 0,e))}catch(e){}}(o,a),o.size=a.length,o._name=t,o._keys=a,o._defaultValues=e}this._map=Ae(i)},o=r.prototype=Object.create(Jt);return o.constructor=r,r}t(jt,Ae),jt.of=function(){return this(arguments)},jt.prototype.toString=function(){return this.__toString("OrderedMap {","}")},jt.prototype.get=function(e,t){var n=this._map.get(e);return void 0!==n?this._list.get(n)[1]:t},jt.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):kt()},jt.prototype.set=function(e,t){return St(this,e,t)},jt.prototype.remove=function(e){return St(this,e,b)},jt.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},jt.prototype.__iterate=function(e,t){var n=this;return this._list.__iterate((function(t){return t&&e(t[1],t[0],n)}),t)},jt.prototype.__iterator=function(e,t){return this._list.fromEntrySeq().__iterator(e,t)},jt.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e),n=this._list.__ensureOwner(e);return e?Ct(t,n,e,this.__hash):(this.__ownerID=e,this._map=t,this._list=n,this)},jt.isOrderedMap=wt,jt.prototype[h]=!0,jt.prototype.delete=jt.prototype.remove,t(xt,V),xt.prototype.get=function(e,t){return this._iter.get(e,t)},xt.prototype.has=function(e){return this._iter.has(e)},xt.prototype.valueSeq=function(){return this._iter.valueSeq()},xt.prototype.reverse=function(){var e=this,t=Nt(this,!0);return this._useKeys||(t.valueSeq=function(){return e._iter.toSeq().reverse()}),t},xt.prototype.map=function(e,t){var n=this,r=Tt(this,e,t);return this._useKeys||(r.valueSeq=function(){return n._iter.toSeq().map(e,t)}),r},xt.prototype.__iterate=function(e,t){var n,r=this;return this._iter.__iterate(this._useKeys?function(t,n){return e(t,n,r)}:(n=t?Ht(this):0,function(o){return e(o,t?--n:n++,r)}),t)},xt.prototype.__iterator=function(e,t){if(this._useKeys)return this._iter.__iterator(e,t);var n=this._iter.__iterator(1,t),r=t?Ht(this):0;return new M((function(){var o=n.next();return o.done?o:D(e,t?--r:r++,o.value,o)}))},xt.prototype[h]=!0,t(Rt,H),Rt.prototype.includes=function(e){return this._iter.includes(e)},Rt.prototype.__iterate=function(e,t){var n=this,r=0;return this._iter.__iterate((function(t){return e(t,r++,n)}),t)},Rt.prototype.__iterator=function(e,t){var n=this._iter.__iterator(1,t),r=0;return new M((function(){var t=n.next();return t.done?t:D(e,r++,t.value,t)}))},t(Et,K),Et.prototype.has=function(e){return this._iter.includes(e)},Et.prototype.__iterate=function(e,t){var n=this;return this._iter.__iterate((function(t){return e(t,t,n)}),t)},Et.prototype.__iterator=function(e,t){var n=this._iter.__iterator(1,t);return new M((function(){var t=n.next();return t.done?t:D(e,t.value,t.value,t)}))},t(_t,V),_t.prototype.entrySeq=function(){return this._iter.toSeq()},_t.prototype.__iterate=function(e,t){var n=this;return this._iter.__iterate((function(t){if(t){Vt(t);var r=a(t);return e(r?t.get(1):t[1],r?t.get(0):t[0],n)}}),t)},_t.prototype.__iterator=function(e,t){var n=this._iter.__iterator(1,t);return new M((function(){for(;;){var t=n.next();if(t.done)return t;var r=t.value;if(r){Vt(r);var o=a(r);return D(e,o?r.get(0):r[0],o?r.get(1):r[1],t)}}}))},Rt.prototype.cacheResult=xt.prototype.cacheResult=Et.prototype.cacheResult=_t.prototype.cacheResult=Wt,t(Yt,fe),Yt.prototype.toString=function(){return this.__toString(Xt(this)+" {","}")},Yt.prototype.has=function(e){return this._defaultValues.hasOwnProperty(e)},Yt.prototype.get=function(e,t){if(!this.has(e))return t;var n=this._defaultValues[e];return this._map?this._map.get(e,n):n},Yt.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var e=this.constructor;return e._empty||(e._empty=$t(this,He()))},Yt.prototype.set=function(e,t){if(!this.has(e))throw new Error('Cannot set unknown key "'+e+'" on '+Xt(this));var n=this._map&&this._map.set(e,t);return this.__ownerID||n===this._map?this:$t(this,n)},Yt.prototype.remove=function(e){if(!this.has(e))return this;var t=this._map&&this._map.remove(e);return this.__ownerID||t===this._map?this:$t(this,t)},Yt.prototype.wasAltered=function(){return this._map.wasAltered()},Yt.prototype.__iterator=function(e,t){var n=this;return r(this._defaultValues).map((function(e,t){return n.get(t)})).__iterator(e,t)},Yt.prototype.__iterate=function(e,t){var n=this;return r(this._defaultValues).map((function(e,t){return n.get(t)})).__iterate(e,t)},Yt.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map&&this._map.__ensureOwner(e);return e?$t(this,t,e):(this.__ownerID=e,this._map=t,this)};var Jt=Yt.prototype;function $t(e,t,n){var r=Object.create(Object.getPrototypeOf(e));return r._map=t,r.__ownerID=n,r}function Xt(e){return e._name||e.constructor.name||"Record"}function en(e,t){Object.defineProperty(e,t,{get:function(){return this.get(t)},set:function(e){ue(this.__ownerID,"Cannot set on an immutable record."),this.set(t,e)}})}function tn(e){return null==e?un():nn(e)&&!l(e)?e:un().withMutations((function(t){var n=i(e);_e(n.size),n.forEach((function(e){return t.add(e)}))}))}function nn(e){return!(!e||!e[on])}Jt.delete=Jt.remove,Jt.deleteIn=Jt.removeIn=Me.removeIn,Jt.merge=Me.merge,Jt.mergeWith=Me.mergeWith,Jt.mergeIn=Me.mergeIn,Jt.mergeDeep=Me.mergeDeep,Jt.mergeDeepWith=Me.mergeDeepWith,Jt.mergeDeepIn=Me.mergeDeepIn,Jt.setIn=Me.setIn,Jt.update=Me.update,Jt.updateIn=Me.updateIn,Jt.withMutations=Me.withMutations,Jt.asMutable=Me.asMutable,Jt.asImmutable=Me.asImmutable,t(tn,he),tn.of=function(){return this(arguments)},tn.fromKeys=function(e){return this(r(e).keySeq())},tn.prototype.toString=function(){return this.__toString("Set {","}")},tn.prototype.has=function(e){return this._map.has(e)},tn.prototype.add=function(e){return cn(this,this._map.set(e,!0))},tn.prototype.remove=function(e){return cn(this,this._map.remove(e))},tn.prototype.clear=function(){return cn(this,this._map.clear())},tn.prototype.union=function(){var t=e.call(arguments,0);return 0===(t=t.filter((function(e){return 0!==e.size}))).length?this:0!==this.size||this.__ownerID||1!==t.length?this.withMutations((function(e){for(var n=0;n<t.length;n++)i(t[n]).forEach((function(t){return e.add(t)}))})):this.constructor(t[0])},tn.prototype.intersect=function(){var t=e.call(arguments,0);if(0===t.length)return this;t=t.map((function(e){return i(e)}));var n=this;return this.withMutations((function(e){n.forEach((function(n){t.every((function(e){return e.includes(n)}))||e.remove(n)}))}))},tn.prototype.subtract=function(){var t=e.call(arguments,0);if(0===t.length)return this;t=t.map((function(e){return i(e)}));var n=this;return this.withMutations((function(e){n.forEach((function(n){t.some((function(e){return e.includes(n)}))&&e.remove(n)}))}))},tn.prototype.merge=function(){return this.union.apply(this,arguments)},tn.prototype.mergeWith=function(t){var n=e.call(arguments,1);return this.union.apply(this,n)},tn.prototype.sort=function(e){return ln(zt(this,e))},tn.prototype.sortBy=function(e,t){return ln(zt(this,t,e))},tn.prototype.wasAltered=function(){return this._map.wasAltered()},tn.prototype.__iterate=function(e,t){var n=this;return this._map.__iterate((function(t,r){return e(r,r,n)}),t)},tn.prototype.__iterator=function(e,t){return this._map.map((function(e,t){return t})).__iterator(e,t)},tn.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e);return e?this.__make(t,e):(this.__ownerID=e,this._map=t,this)},tn.isSet=nn;var rn,on="@@__IMMUTABLE_SET__@@",an=tn.prototype;function cn(e,t){return e.__ownerID?(e.size=t.size,e._map=t,e):t===e._map?e:0===t.size?e.__empty():e.__make(t)}function sn(e,t){var n=Object.create(an);return n.size=e?e.size:0,n._map=e,n.__ownerID=t,n}function un(){return rn||(rn=sn(He()))}function ln(e){return null==e?bn():dn(e)?e:bn().withMutations((function(t){var n=i(e);_e(n.size),n.forEach((function(e){return t.add(e)}))}))}function dn(e){return nn(e)&&l(e)}an[on]=!0,an.delete=an.remove,an.mergeDeep=an.merge,an.mergeDeepWith=an.mergeWith,an.withMutations=Me.withMutations,an.asMutable=Me.asMutable,an.asImmutable=Me.asImmutable,an.__empty=un,an.__make=sn,t(ln,tn),ln.of=function(){return this(arguments)},ln.fromKeys=function(e){return this(r(e).keySeq())},ln.prototype.toString=function(){return this.__toString("OrderedSet {","}")},ln.isOrderedSet=dn;var fn,pn=ln.prototype;function hn(e,t){var n=Object.create(pn);return n.size=e?e.size:0,n._map=e,n.__ownerID=t,n}function bn(){return fn||(fn=hn(kt()))}function vn(e){return null==e?wn():mn(e)?e:wn().unshiftAll(e)}function mn(e){return!(!e||!e[yn])}pn[h]=!0,pn.__empty=bn,pn.__make=hn,t(vn,pe),vn.of=function(){return this(arguments)},vn.prototype.toString=function(){return this.__toString("Stack [","]")},vn.prototype.get=function(e,t){var n=this._head;for(e=C(this,e);n&&e--;)n=n.next;return n?n.value:t},vn.prototype.peek=function(){return this._head&&this._head.value},vn.prototype.push=function(){if(0===arguments.length)return this;for(var e=this.size+arguments.length,t=this._head,n=arguments.length-1;n>=0;n--)t={value:arguments[n],next:t};return this.__ownerID?(this.size=e,this._head=t,this.__hash=void 0,this.__altered=!0,this):jn(e,t)},vn.prototype.pushAll=function(e){if(0===(e=o(e)).size)return this;_e(e.size);var t=this.size,n=this._head;return e.reverse().forEach((function(e){t++,n={value:e,next:n}})),this.__ownerID?(this.size=t,this._head=n,this.__hash=void 0,this.__altered=!0,this):jn(t,n)},vn.prototype.pop=function(){return this.slice(1)},vn.prototype.unshift=function(){return this.push.apply(this,arguments)},vn.prototype.unshiftAll=function(e){return this.pushAll(e)},vn.prototype.shift=function(){return this.pop.apply(this,arguments)},vn.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):wn()},vn.prototype.slice=function(e,t){if(S(e,t,this.size))return this;var n=x(e,this.size);if(R(t,this.size)!==this.size)return pe.prototype.slice.call(this,e,t);for(var r=this.size-n,o=this._head;n--;)o=o.next;return this.__ownerID?(this.size=r,this._head=o,this.__hash=void 0,this.__altered=!0,this):jn(r,o)},vn.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?jn(this.size,this._head,e,this.__hash):(this.__ownerID=e,this.__altered=!1,this)},vn.prototype.__iterate=function(e,t){if(t)return this.reverse().__iterate(e);for(var n=0,r=this._head;r&&!1!==e(r.value,n++,this);)r=r.next;return n},vn.prototype.__iterator=function(e,t){if(t)return this.reverse().__iterator(e);var n=0,r=this._head;return new M((function(){if(r){var t=r.value;return r=r.next,D(e,n++,t)}return{value:void 0,done:!0}}))},vn.isStack=mn;var gn,yn="@@__IMMUTABLE_STACK__@@",On=vn.prototype;function jn(e,t,n,r){var o=Object.create(On);return o.size=e,o._head=t,o.__ownerID=n,o.__hash=r,o.__altered=!1,o}function wn(){return gn||(gn=jn(0))}function Cn(e,t){var n=function(n){e.prototype[n]=t[n]};return Object.keys(t).forEach(n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach(n),e}On[yn]=!0,On.withMutations=Me.withMutations,On.asMutable=Me.asMutable,On.asImmutable=Me.asImmutable,On.wasAltered=Me.wasAltered,n.Iterator=M,Cn(n,{toArray:function(){_e(this.size);var e=new Array(this.size||0);return this.valueSeq().__iterate((function(t,n){e[n]=t})),e},toIndexedSeq:function(){return new Rt(this)},toJS:function(){return this.toSeq().map((function(e){return e&&"function"==typeof e.toJS?e.toJS():e})).__toJS()},toJSON:function(){return this.toSeq().map((function(e){return e&&"function"==typeof e.toJSON?e.toJSON():e})).__toJS()},toKeyedSeq:function(){return new xt(this,!0)},toMap:function(){return Ae(this.toKeyedSeq())},toObject:function(){_e(this.size);var e={};return this.__iterate((function(t,n){e[n]=t})),e},toOrderedMap:function(){return jt(this.toKeyedSeq())},toOrderedSet:function(){return ln(c(this)?this.valueSeq():this)},toSet:function(){return tn(c(this)?this.valueSeq():this)},toSetSeq:function(){return new Et(this)},toSeq:function(){return s(this)?this.toIndexedSeq():c(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return vn(c(this)?this.valueSeq():this)},toList:function(){return ot(c(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(e,t){return 0===this.size?e+t:e+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+t},concat:function(){var t=e.call(arguments,0);return qt(this,Lt(this,t))},includes:function(e){return this.some((function(t){return ae(t,e)}))},entries:function(){return this.__iterator(2)},every:function(e,t){_e(this.size);var n=!0;return this.__iterate((function(r,o,i){if(!e.call(t,r,o,i))return n=!1,!1})),n},filter:function(e,t){return qt(this,It(this,e,t,!0))},find:function(e,t,n){var r=this.findEntry(e,t);return r?r[1]:n},findEntry:function(e,t){var n;return this.__iterate((function(r,o,i){if(e.call(t,r,o,i))return n=[o,r],!1})),n},findLastEntry:function(e,t){return this.toSeq().reverse().findEntry(e,t)},forEach:function(e,t){return _e(this.size),this.__iterate(t?e.bind(t):e)},join:function(e){_e(this.size),e=void 0!==e?""+e:",";var t="",n=!0;return this.__iterate((function(r){n?n=!1:t+=e,t+=null!=r?r.toString():""})),t},keys:function(){return this.__iterator(0)},map:function(e,t){return qt(this,Tt(this,e,t))},reduce:function(e,t,n){var r,o;return _e(this.size),arguments.length<2?o=!0:r=t,this.__iterate((function(t,i,a){o?(o=!1,r=t):r=e.call(n,r,t,i,a)})),r},reduceRight:function(e,t,n){var r=this.toKeyedSeq().reverse();return r.reduce.apply(r,arguments)},reverse:function(){return qt(this,Nt(this,!0))},slice:function(e,t){return qt(this,Mt(this,e,t,!0))},some:function(e,t){return!this.every(En(e),t)},sort:function(e){return qt(this,zt(this,e))},values:function(){return this.__iterator(1)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some((function(){return!0}))},count:function(e,t){return w(e?this.toSeq().filter(e,t):this)},countBy:function(e,t){return function(e,t,n){var r=Ae().asMutable();return e.__iterate((function(o,i){r.update(t.call(n,o,i,e),0,(function(e){return e+1}))})),r.asImmutable()}(this,e,t)},equals:function(e){return ce(this,e)},entrySeq:function(){var e=this;if(e._cache)return new Q(e._cache);var t=e.toSeq().map(Rn).toIndexedSeq();return t.fromEntrySeq=function(){return e.toSeq()},t},filterNot:function(e,t){return this.filter(En(e),t)},findLast:function(e,t,n){return this.toKeyedSeq().reverse().find(e,t,n)},first:function(){return this.find(k)},flatMap:function(e,t){return qt(this,function(e,t,n){var r=Kt(e);return e.toSeq().map((function(o,i){return r(t.call(n,o,i,e))})).flatten(!0)}(this,e,t))},flatten:function(e){return qt(this,Pt(this,e,!0))},fromEntrySeq:function(){return new _t(this)},get:function(e,t){return this.find((function(t,n){return ae(n,e)}),void 0,t)},getIn:function(e,t){for(var n,r=this,o=Zt(e);!(n=o.next()).done;){var i=n.value;if((r=r&&r.get?r.get(i,b):b)===b)return t}return r},groupBy:function(e,t){return function(e,t,n){var r=c(e),o=(l(e)?jt():Ae()).asMutable();e.__iterate((function(i,a){o.update(t.call(n,i,a,e),(function(e){return(e=e||[]).push(r?[a,i]:i),e}))}));var i=Kt(e);return o.map((function(t){return qt(e,i(t))}))}(this,e,t)},has:function(e){return this.get(e,b)!==b},hasIn:function(e){return this.getIn(e,b)!==b},isSubset:function(e){return e="function"==typeof e.includes?e:n(e),this.every((function(t){return e.includes(t)}))},isSuperset:function(e){return(e="function"==typeof e.isSubset?e:n(e)).isSubset(this)},keySeq:function(){return this.toSeq().map(xn).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},max:function(e){return Bt(this,e)},maxBy:function(e,t){return Bt(this,t,e)},min:function(e){return Bt(this,e?_n(e):Nn)},minBy:function(e,t){return Bt(this,t?_n(t):Nn,e)},rest:function(){return this.slice(1)},skip:function(e){return this.slice(Math.max(0,e))},skipLast:function(e){return qt(this,this.toSeq().reverse().skip(e).reverse())},skipWhile:function(e,t){return qt(this,Dt(this,e,t,!0))},skipUntil:function(e,t){return this.skipWhile(En(e),t)},sortBy:function(e,t){return qt(this,zt(this,t,e))},take:function(e){return this.slice(0,Math.max(0,e))},takeLast:function(e){return qt(this,this.toSeq().reverse().take(e).reverse())},takeWhile:function(e,t){return qt(this,function(e,t,n){var r=Qt(e);return r.__iterateUncached=function(r,o){var i=this;if(o)return this.cacheResult().__iterate(r,o);var a=0;return e.__iterate((function(e,o,c){return t.call(n,e,o,c)&&++a&&r(e,o,i)})),a},r.__iteratorUncached=function(r,o){var i=this;if(o)return this.cacheResult().__iterator(r,o);var a=e.__iterator(2,o),c=!0;return new M((function(){if(!c)return{value:void 0,done:!0};var e=a.next();if(e.done)return e;var o=e.value,s=o[0],u=o[1];return t.call(n,u,s,i)?2===r?e:D(r,s,u,e):(c=!1,{value:void 0,done:!0})}))},r}(this,e,t))},takeUntil:function(e,t){return this.takeWhile(En(e),t)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=function(e){if(e.size===1/0)return 0;var t=l(e),n=c(e),r=t?1:0;return function(e,t){return t=be(t,3432918353),t=be(t<<15|t>>>-15,461845907),t=be(t<<13|t>>>-13,5),t=be((t=(t+3864292196|0)^e)^t>>>16,2246822507),t=ve((t=be(t^t>>>13,3266489909))^t>>>16)}(e.__iterate(n?t?function(e,t){r=31*r+In(me(e),me(t))|0}:function(e,t){r=r+In(me(e),me(t))|0}:t?function(e){r=31*r+me(e)|0}:function(e){r=r+me(e)|0}),r)}(this))}});var kn=n.prototype;kn[d]=!0,kn[I]=kn.values,kn.__toJS=kn.toArray,kn.__toStringMapper=An,kn.inspect=kn.toSource=function(){return this.toString()},kn.chain=kn.flatMap,kn.contains=kn.includes,function(){try{Object.defineProperty(kn,"length",{get:function(){if(!n.noLengthWarning){var e;try{throw new Error}catch(t){e=t.stack}if(-1===e.indexOf("_wrapObject"))return console&&console.warn&&console.warn("iterable.length has been deprecated, use iterable.size or iterable.count(). This warning will become a silent error in a future version. "+e),this.size}}})}catch(e){}}(),Cn(r,{flip:function(){return qt(this,At(this))},findKey:function(e,t){var n=this.findEntry(e,t);return n&&n[0]},findLastKey:function(e,t){return this.toSeq().reverse().findKey(e,t)},keyOf:function(e){return this.findKey((function(t){return ae(t,e)}))},lastKeyOf:function(e){return this.findLastKey((function(t){return ae(t,e)}))},mapEntries:function(e,t){var n=this,r=0;return qt(this,this.toSeq().map((function(o,i){return e.call(t,[i,o],r++,n)})).fromEntrySeq())},mapKeys:function(e,t){var n=this;return qt(this,this.toSeq().flip().map((function(r,o){return e.call(t,r,o,n)})).flip())}});var Sn=r.prototype;function xn(e,t){return t}function Rn(e,t){return[t,e]}function En(e){return function(){return!e.apply(this,arguments)}}function _n(e){return function(){return-e.apply(this,arguments)}}function An(e){return"string"==typeof e?JSON.stringify(e):e}function Tn(){return j(arguments)}function Nn(e,t){return e<t?1:e>t?-1:0}function In(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}return Sn[f]=!0,Sn[I]=kn.entries,Sn.__toJS=kn.toObject,Sn.__toStringMapper=function(e,t){return JSON.stringify(t)+": "+An(e)},Cn(o,{toKeyedSeq:function(){return new xt(this,!1)},filter:function(e,t){return qt(this,It(this,e,t,!1))},findIndex:function(e,t){var n=this.findEntry(e,t);return n?n[0]:-1},indexOf:function(e){var t=this.toKeyedSeq().keyOf(e);return void 0===t?-1:t},lastIndexOf:function(e){var t=this.toKeyedSeq().reverse().keyOf(e);return void 0===t?-1:t},reverse:function(){return qt(this,Nt(this,!1))},slice:function(e,t){return qt(this,Mt(this,e,t,!1))},splice:function(e,t){var n=arguments.length;if(t=Math.max(0|t,0),0===n||2===n&&!t)return this;e=x(e,e<0?this.count():this.size);var r=this.slice(0,e);return qt(this,1===n?r:r.concat(j(arguments,2),this.slice(e+t)))},findLastIndex:function(e,t){var n=this.toKeyedSeq().findLastKey(e,t);return void 0===n?-1:n},first:function(){return this.get(0)},flatten:function(e){return qt(this,Pt(this,e,!1))},get:function(e,t){return(e=C(this,e))<0||this.size===1/0||void 0!==this.size&&e>this.size?t:this.find((function(t,n){return n===e}),void 0,t)},has:function(e){return(e=C(this,e))>=0&&(void 0!==this.size?this.size===1/0||e<this.size:-1!==this.indexOf(e))},interpose:function(e){return qt(this,function(e,t){var n=Qt(e);return n.size=e.size&&2*e.size-1,n.__iterateUncached=function(n,r){var o=this,i=0;return e.__iterate((function(e,r){return(!i||!1!==n(t,i++,o))&&!1!==n(e,i++,o)}),r),i},n.__iteratorUncached=function(n,r){var o,i=e.__iterator(1,r),a=0;return new M((function(){return(!o||a%2)&&(o=i.next()).done?o:a%2?D(n,a++,t):D(n,a++,o.value,o)}))},n}(this,e))},interleave:function(){var e=[this].concat(j(arguments)),t=Ut(this.toSeq(),H.of,e),n=t.flatten(!0);return t.size&&(n.size=t.size*e.length),qt(this,n)},last:function(){return this.get(-1)},skipWhile:function(e,t){return qt(this,Dt(this,e,t,!1))},zip:function(){var e=[this].concat(j(arguments));return qt(this,Ut(this,Tn,e))},zipWith:function(e){var t=j(arguments);return t[0]=this,qt(this,Ut(this,e,t))}}),o.prototype[p]=!0,o.prototype[h]=!0,Cn(i,{get:function(e,t){return this.has(e)?e:t},includes:function(e){return this.has(e)},keySeq:function(){return this.valueSeq()}}),i.prototype.has=kn.includes,Cn(V,r.prototype),Cn(H,o.prototype),Cn(K,i.prototype),Cn(fe,r.prototype),Cn(pe,o.prototype),Cn(he,i.prototype),{Iterable:n,Seq:q,Collection:de,Map:Ae,OrderedMap:jt,List:ot,Stack:vn,Set:tn,OrderedSet:ln,Record:Yt,Range:le,Repeat:se,is:ae,fromJS:re}}()},function(e,t,n){"use strict";e.exports=function(e,t,n,r,o,i,a,c){if(!e){var s;if(void 0===t)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,o,i,a,c],l=0;(s=new Error(t.replace(/%s/g,(function(){return u[l++]})))).name="Invariant Violation"}throw s.framesToPop=1,s}}},function(e,t,n){"use strict";var r=n(91)||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var o=n(1031),i=n(961),a=n(1187),c=n(836),s=n(870),u=c.OrderedSet,l=c.Record,d=c.Stack,f=l({allowUndo:!0,currentContent:null,decorator:null,directionMap:null,forceSelection:!1,inCompositionMode:!1,inlineStyleOverride:null,lastChangeType:null,nativelyRenderedContent:null,redoStack:d(),selection:null,treeMap:null,undoStack:d()}),p=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._immutable=t}return e.createEmpty=function(t){return e.createWithContent(i.createFromText(""),t)},e.createWithContent=function(t,n){var r=t.getBlockMap().first().getKey();return e.create({currentContent:t,undoStack:d(),redoStack:d(),decorator:n||null,selection:s.createEmpty(r)})},e.create=function(t){var n=t.currentContent,o=t.decorator,i=r({},t,{treeMap:b(n,o),directionMap:a.getDirectionMap(n)});return new e(new f(i))},e.set=function(t,n){return new e(t.getImmutable().withMutations((function(e){var r=e.get("decorator"),i=r;null===n.decorator?i=null:n.decorator&&(i=n.decorator);var a=n.currentContent||t.getCurrentContent();if(i!==r){var c,s=e.get("treeMap");return c=i&&r?function(e,t,n,r,i){return n.merge(t.toSeq().filter((function(t){return r.getDecorations(t,e)!==i.getDecorations(t,e)})).map((function(t){return o.generate(e,t,r)})))}(a,a.getBlockMap(),s,i,r):b(a,i),void e.merge({decorator:i,treeMap:c,nativelyRenderedContent:null})}a!==t.getCurrentContent()&&e.set("treeMap",function(e,t,n,r){var i=e.getCurrentContent().set("entityMap",n),a=i.getBlockMap();return e.getImmutable().get("treeMap").merge(t.toSeq().filter((function(e,t){return e!==a.get(t)})).map((function(e){return o.generate(i,e,r)})))}(t,a.getBlockMap(),a.getEntityMap(),i)),e.merge(n)})))},e.prototype.toJS=function(){return this.getImmutable().toJS()},e.prototype.getAllowUndo=function(){return this.getImmutable().get("allowUndo")},e.prototype.getCurrentContent=function(){return this.getImmutable().get("currentContent")},e.prototype.getUndoStack=function(){return this.getImmutable().get("undoStack")},e.prototype.getRedoStack=function(){return this.getImmutable().get("redoStack")},e.prototype.getSelection=function(){return this.getImmutable().get("selection")},e.prototype.getDecorator=function(){return this.getImmutable().get("decorator")},e.prototype.isInCompositionMode=function(){return this.getImmutable().get("inCompositionMode")},e.prototype.mustForceSelection=function(){return this.getImmutable().get("forceSelection")},e.prototype.getNativelyRenderedContent=function(){return this.getImmutable().get("nativelyRenderedContent")},e.prototype.getLastChangeType=function(){return this.getImmutable().get("lastChangeType")},e.prototype.getInlineStyleOverride=function(){return this.getImmutable().get("inlineStyleOverride")},e.setInlineStyleOverride=function(t,n){return e.set(t,{inlineStyleOverride:n})},e.prototype.getCurrentInlineStyle=function(){var e=this.getInlineStyleOverride();if(null!=e)return e;var t=this.getCurrentContent(),n=this.getSelection();return n.isCollapsed()?function(e,t){var n=t.getStartKey(),r=t.getStartOffset(),o=e.getBlockForKey(n);if(r>0)return o.getInlineStyleAt(r-1);if(o.getLength())return o.getInlineStyleAt(0);return v(e,n)}(t,n):function(e,t){var n=t.getStartKey(),r=t.getStartOffset(),o=e.getBlockForKey(n);if(r<o.getLength())return o.getInlineStyleAt(r);if(r>0)return o.getInlineStyleAt(r-1);return v(e,n)}(t,n)},e.prototype.getBlockTree=function(e){return this.getImmutable().getIn(["treeMap",e])},e.prototype.isSelectionAtStartOfContent=function(){var e=this.getCurrentContent().getBlockMap().first().getKey();return this.getSelection().hasEdgeWithin(e,0,0)},e.prototype.isSelectionAtEndOfContent=function(){var e=this.getCurrentContent().getBlockMap().last(),t=e.getLength();return this.getSelection().hasEdgeWithin(e.getKey(),t,t)},e.prototype.getDirectionMap=function(){return this.getImmutable().get("directionMap")},e.acceptSelection=function(e,t){return h(e,t,!1)},e.forceSelection=function(e,t){return t.getHasFocus()||(t=t.set("hasFocus",!0)),h(e,t,!0)},e.moveSelectionToEnd=function(t){var n=t.getCurrentContent().getLastBlock(),r=n.getKey(),o=n.getLength();return e.acceptSelection(t,new s({anchorKey:r,anchorOffset:o,focusKey:r,focusOffset:o,isBackward:!1}))},e.moveFocusToEnd=function(t){var n=e.moveSelectionToEnd(t);return e.forceSelection(n,n.getSelection())},e.push=function(t,n,r){if(t.getCurrentContent()===n)return t;var o="insert-characters"!==r,i=a.getDirectionMap(n,t.getDirectionMap());if(!t.getAllowUndo())return e.set(t,{currentContent:n,directionMap:i,lastChangeType:r,selection:n.getSelectionAfter(),forceSelection:o,inlineStyleOverride:null});var c=t.getSelection(),s=t.getCurrentContent(),u=t.getUndoStack(),l=n;c!==s.getSelectionAfter()||function(e,t){var n=e.getLastChangeType();return t!==n||"insert-characters"!==t&&"backspace-character"!==t&&"delete-character"!==t}(t,r)?(u=u.push(s),l=l.set("selectionBefore",c)):"insert-characters"!==r&&"backspace-character"!==r&&"delete-character"!==r||(l=l.set("selectionBefore",s.getSelectionBefore()));var f=t.getInlineStyleOverride();-1===["adjust-depth","change-block-type","split-block"].indexOf(r)&&(f=null);var p={currentContent:l,directionMap:i,undoStack:u,redoStack:d(),lastChangeType:r,selection:n.getSelectionAfter(),forceSelection:o,inlineStyleOverride:f};return e.set(t,p)},e.undo=function(t){if(!t.getAllowUndo())return t;var n=t.getUndoStack(),r=n.peek();if(!r)return t;var o=t.getCurrentContent(),i=a.getDirectionMap(r,t.getDirectionMap());return e.set(t,{currentContent:r,directionMap:i,undoStack:n.shift(),redoStack:t.getRedoStack().push(o),forceSelection:!0,inlineStyleOverride:null,lastChangeType:"undo",nativelyRenderedContent:null,selection:o.getSelectionBefore()})},e.redo=function(t){if(!t.getAllowUndo())return t;var n=t.getRedoStack(),r=n.peek();if(!r)return t;var o=t.getCurrentContent(),i=a.getDirectionMap(r,t.getDirectionMap());return e.set(t,{currentContent:r,directionMap:i,undoStack:t.getUndoStack().push(o),redoStack:n.shift(),forceSelection:!0,inlineStyleOverride:null,lastChangeType:"redo",nativelyRenderedContent:null,selection:r.getSelectionAfter()})},e.prototype.getImmutable=function(){return this._immutable},e}();function h(e,t,n){return p.set(e,{selection:t,forceSelection:n,nativelyRenderedContent:null,inlineStyleOverride:null})}function b(e,t){return e.getBlockMap().map((function(n){return o.generate(e,n,t)})).toOrderedMap()}function v(e,t){var n=e.getBlockMap().reverse().skipUntil((function(e,n){return n===t})).skip(1).skipUntil((function(e,t){return e.getLength()})).first();return n?n.getInlineStyleAt(n.getLength()-1):u()}e.exports=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onFullyViewedOnce=t.isFullyViewed=t.onViewedOnce=t.isViewed=void 0;var r=n(914);Object.defineProperty(t,"isViewed",{enumerable:!0,get:function(){return r.isViewed}}),Object.defineProperty(t,"onViewedOnce",{enumerable:!0,get:function(){return r.onViewedOnce}});var o=n(915);Object.defineProperty(t,"isFullyViewed",{enumerable:!0,get:function(){return o.isFullyViewed}}),Object.defineProperty(t,"onFullyViewedOnce",{enumerable:!0,get:function(){return o.onFullyViewedOnce}})},function(e,t,n){"use strict";n.d(t,"d",(function(){return r.a})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return f}));var r=n(866),o=(n(1),n(11)),i=n.n(o),a=(n(902),n(5)),c=function(e){var t=e.className,n=e.options,r=e.children;return Object(a.g)("div",{className:i()("Card-header",t)},Object(a.g)("div",{className:"Card-headerText"},r),n&&Object(a.g)("div",{className:"Card-headerOptions"},n))},s=n(33),u=n.n(s),l=n(43),d=n.n(l),f=function(e){var t=e.className,n=d()(e,["className"]);return Object(a.g)("div",u()({className:i()("Card-section",t)},n))}},function(e,t,n){"use strict";var r=n(1174),o=n(890),i=n(844),a=n(1190),c=n(860),s=n(961),u=n(964),l=n(1034),d=n(1191),f=n(1036),p=n(926),h=n(843),b=n(1032),v=n(838),m=n(971),g=n(1050),y=n(870),O=n(1251),j={Editor:d,EditorBlock:f,EditorState:v,CompositeDecorator:a,Entity:p,EntityInstance:b,BlockMapBuilder:o,CharacterMetadata:i,ContentBlock:c,ContentState:s,SelectionState:y,AtomicBlockUtils:r,KeyBindingUtil:m,Modifier:h,RichUtils:g,DefaultDraftBlockRenderMap:u,DefaultDraftInlineStyle:l,convertFromHTML:n(1048),convertFromRaw:n(1254),convertToRaw:O,genKey:n(855),getDefaultKeyBinding:n(1051),getVisibleSelectionRect:n(1259)};e.exports=j},function(e,t,n){"use strict";n.d(t,"g",(function(){return k})),n.d(t,"p",(function(){return N})),n.d(t,"o",(function(){return M})),n.d(t,"u",(function(){return z})),n.d(t,"l",(function(){return F})),n.d(t,"m",(function(){return U})),n.d(t,"d",(function(){return q})),n.d(t,"j",(function(){return Y})),n.d(t,"t",(function(){return Q})),n.d(t,"r",(function(){return D})),n.d(t,"i",(function(){return W})),n.d(t,"c",(function(){return K})),n.d(t,"b",(function(){return H})),n.d(t,"s",(function(){return x})),n.d(t,"k",(function(){return R})),n.d(t,"n",(function(){return G})),n.d(t,"q",(function(){return A})),n.d(t,"f",(function(){return te})),n.d(t,"a",(function(){return ne})),n.d(t,"e",(function(){return Z})),n.d(t,"h",(function(){return $})),n.d(t,"v",(function(){return B}));var r=n(57),o=n.n(r),i=n(583),a=n.n(i),c=n(39),s=n.n(c),u=n(858),l=n.n(u),d=n(7),f=n(41),p=n.n(f),h=n(142),b=(n(35),n(367)),v=n(69),m=n.n(v),g=n(63),y=n(392),O=n.n(y);n(1009),n(214),n(574),n(75),n(58);n(1065),n(585);var j,w,C=n(950),k=(j={os:"",pc:"",platform:0},function(){if(j.os||"undefined"==typeof window)return j;var e=navigator.userAgent;return/iPhone|iPod|iPad/i.test(e)?(j.os="ios",j.platform=1):/android/i.test(e)?(j.os="android",j.platform=2):(j.os="pc",/Macintosh|OS X 10/i.test(e)?(j.pc="mac",j.platform=3):/Windows/i.test(e)&&(j.pc="windows",j.platform=4)),j}),S=function(){return"undefined"!=typeof window?window.location.href:""},x=function(e){var t,n,r=e.url,o=e.params;return r?fetch(r,{method:"post",headers:{"X-Requested-With":"fetch"},body:(t=Object(d.decamelizeKeys)(o),Object.keys(t).reduce((function(e,n){var r=t[n];return null!=r&&e.append(n,r),e}),n||new FormData))}).catch((function(){})):Promise.reject(new Error("request but no url"))},R=function(e){var t=e.query,n=e.url;return fetch("".concat(n,"?").concat(p.a.stringify(t))).then((function(e){if(e.status>=400)throw new Error("Bad response from server");return e.json()})).then((function(e){return e.banner})).catch((function(e){console.error(e)}))},E=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(n){return t?e||n:e}},_=function(e,t){var n=t.sessionId,r=void 0===n?"":n,o=t.os,i=void 0===o?"":o,a=t.aPageId,c=void 0===a?"":a,s=t.aToken,u=void 0===s?"":s,l=t.xSuger,d=void 0===l?"{}":l,f=t.cardType,p=t.ua,h=void 0===p?"":p,b=t.appendParams,v=t.et,m=void 0===v?"":v,g=t.callback,y=void 0===g?"":g,j=t.isHybrid,w=void 0===j?"":j,C=t.version,k=void 0===C?"":C,x=t.platform,R=t.isKeepMacro,_=void 0!==R&&R,A=X(S()),T=A.plugcb,N=void 0===T?"":T,I=A.adplug,M=void 0===I?"":I,D=y||N;/[&/?]/.test(D)&&(D=encodeURIComponent(D));var L=ee(),P=L.cid,z=void 0===P?"":P,B=L.zoneid,F=void 0===B?"":B,U=e.slice(0,e.indexOf("?")),q="string"==typeof d?JSON.parse(d):d,V=q.IDFA,H=void 0===V?"":V,K=q.IMEI,Q=void 0===K?"":K,W=q.ANDROID_ID,G=void 0===W?"":W,Z=q.OAID,Y=void 0===Z?"":Z;return U.includes("zhihu.com")||(H=H?O()(H):"",Q=Q?O()(Q):"",G=G?O()(G):"",Y=Y||""),f&&(e="".concat(e,"&ev=").concat(f)),b&&(e="".concat(e,"&").concat(b)),M&&(e="".concat(e,"&").concat(M)),e.replace("__SESSIONID__",r).replace("__REQUESTID__",r).replace("__OS__",i).replace("__ET__",E(m,_)).replace("__PAGEID__",E(c,_)).replace("__ATOKEN__",E(u,_)).replace("__IDFA__",E(H,_)).replace("__IMEI__",E(Q,_)).replace("__ANDROIDID__",E(G,_)).replace("__OAID__",E(Y,_)).replace("__CREATIVEID__",E(z,_)).replace("__UA__",encodeURI(h)).replace("__CALLBACK__",D).replace("__ZONEID__",E(F,_)).replace("__ISHYBRID__",w).replace("__VERSION__",k).replace("__PLATFORM__",x)},A=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};return e?Object.keys(e).reduce((function(r,o){var i=e[o].map((function(e){return n(_(e,t))}));return l()({},r,s()({},o,i))}),{}):{}},T=function(e){if(!document.body.contains(e))return!1;var t=e.getBoundingClientRect(),n=document.documentElement;return t.top<(window.innerHeight||n.clientHeight)},N=function(e,t,n){if(T(e))t.call(n);else var r=Object(h.subscribe)("scroll",(function(){T(e)&&(t.call(n),r.unsubscribe())}))},I=function(e){return function(t){if(!document.body.contains(t))return!1;var n=t.getBoundingClientRect();return e(n)}},M=(w=function(e){var t=document.documentElement;return e.top+parseInt(.3*e.height)<(window.innerHeight||t.clientHeight)},function(e,t,n){if(I(w)(e))t.call(n);else var r=Object(h.subscribe)("scroll",(function(){I(w)(e)&&(t.call(n),r.unsubscribe())}))}),D=function(e){try{g.a.supportsAction("ad/sendTrack").then((function(t){if(!t)return new Promise((function(t,n){var r=new Image;r.onload=t,r.addEventListener("error",n),r.src=e})).catch((function(e){console.warn("zhihu-advert request error: ",e)}));g.a.dispatch("ad/sendTrack",{tracks:[e]})}))}catch(t){return console.warn("zhihu-advert request error: ",t),new Promise((function(t,n){var r=new Image;r.onload=t,r.addEventListener("error",n),r.src=e}))}};function L(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.keys(e).reduce((function(t,n){return t[Object(d.decamelize)(n)]=e[n],t}),{});return p.a.stringify(t)}var P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=L(t);return n&&(e.indexOf("?")>-1?e+="&".concat(n):e+="?".concat(n)),e};function z(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;return e=P(e,t),Promise.race([D(e),new Promise((function(e){return setTimeout(e,n)}))])}var B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ad/sendContentTracks",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:z;return"pc"!==k().os?function(r,o){return Object(C.b)(t,"function"==typeof e?e(P(r,o)):e).catch((function(e){return n(r,o)}))}:n}((function(e){return{tracks:[e]}}),"ad/sendContentPluginTracks");function F(e){var t=e;return e>999&&(t="".concat((e/1e3).toFixed(1),"K")),e>999999&&(t="".concat((e/1e6).toFixed(1),"M")),t}function U(e){return Object(b.cnNiceNumber)(e)}function q(e,t,n){return(Array.isArray(t)?t:t.replace(/\[/g,".").replace(/\]/g,"").split(".")).reduce((function(e,t){return(e||{})[t]}),e)||n}function V(e){return["[object Array]","[object Object]"].includes(Object.prototype.toString.call(e))}function H(e){if(!V(e))throw new Error("obj 不是一个对象！");var t=Array.isArray(e)?[]:{};return Object.keys(e).forEach((function(n){"object"!==a()(e[n])?t[n]=e[n]:null===e[n]?t[n]="":t[n]=H(e[n])})),t}function K(e){if(!V(e))throw new Error("obj 不是一个对象！");var t=Array.isArray(e)?[]:{};return Object.keys(e).forEach((function(n){"object"!==a()(e[n])?t[n]=e[n]:t[n]=K(e[n])})),t}var Q=function(e){try{return JSON.parse(e)}catch(e){return{}}};function W(){var e=document.createElement("div");e.className="adsbox",document.body.appendChild(e);var t="none"===getComputedStyle(e).display;return document.body.removeChild(e),t}function G(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n="".concat(e).split("."),r=o()(n,2),i=r[0],a=r[1],c=void 0===a?1:a,s=[],u=1;u<=i;u+=1)s.push(1);parseInt(c,10)&&s.push(Number("0.".concat(c)).toFixed(1));for(var l=t-i-1,d=0;d<l;d++){l[d];s.push(0)}return s}var Z=function(){return e=J(),t=e.iOS,n=e.Android,r=e.ZhihuIOSVersionName,o=e.ZhihuAndroidVersionName,t?{OS:"IOS",version:r||""}:n?{OS:"ANDROID",version:o||""}:{OS:"",version:""};var e,t,n,r,o};var Y=function(e){return["google_pc_js","baidu_pc_js","qihoo_pc_js","maozhua_pc_js","ruoying_pc_js"].includes(e)},J=function(){return navigator&&m()(navigator.userAgent)||{}},$=function(){return Boolean(J().ZhihuHybrid)},X=function(e){if("string"!=typeof e||0===e.length)return{};var t=e.substr(e.indexOf("?")+1);return p.a.parse(t)},ee=function(){var e=X(S()).plugcb;return e?X(e):{}},te=function(){return ee().cid||""};function ne(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return e;var n=Object.keys(t).map((function(e){return"".concat(e,"=").concat(t[e])})).join("&");if(!n)return e;var r=e.split("#"),i=o()(r,2),a=i[0],c=i[1],s=/\?/g.test(a)?"&":"?",u="".concat(a).concat(s).concat(n);return c?"".concat(u,"#").concat(c):u}},function(e,t,n){"use strict";var r=n(844),o=n(1176),i=n(856),a=n(836),c=n(1177),s=n(1179),u=n(925),l=n(1182),d=n(1183),f=n(837),p=n(1184),h=n(1028),b=n(1185),v=n(1186),m=a.OrderedSet,g={replaceText:function(e,t,n,o,i){var a=h(e,t),c=b(a,t),s=r.create({style:o||m(),entity:i||null});return d(c,c.getSelectionAfter(),n,s)},insertText:function(e,t,n,r,o){return t.isCollapsed()||f(!1),g.replaceText(e,t,n,r,o)},moveText:function(e,t,n){var r=u(e,t),o=g.removeRange(e,t,"backward");return g.replaceWithFragment(o,n,r)},replaceWithFragment:function(e,t,n){var r=h(e,t),o=b(r,t);return l(o,o.getSelectionAfter(),n)},removeRange:function(e,t,n){var r,o,a=void 0,c=void 0;t.getIsBackward()&&(t=t.merge({anchorKey:t.getFocusKey(),anchorOffset:t.getFocusOffset(),focusKey:t.getAnchorKey(),focusOffset:t.getAnchorOffset(),isBackward:!1})),r=t.getAnchorKey(),o=t.getFocusKey(),a=e.getBlockForKey(r),c=e.getBlockForKey(o);var u=t.getStartOffset(),l=t.getEndOffset(),d=a.getEntityAt(u),f=c.getEntityAt(l-1);if(r===o&&d&&d===f){var p=s(e.getEntityMap(),a,c,t,n);return b(e,p)}var v=t;i.draft_segmented_entities_behavior&&(v=s(e.getEntityMap(),a,c,t,n));var m=h(e,v);return b(m,v)},splitBlock:function(e,t){var n=h(e,t),r=b(n,t);return v(r,r.getSelectionAfter())},applyInlineStyle:function(e,t,n){return o.add(e,t,n)},removeInlineStyle:function(e,t,n){return o.remove(e,t,n)},setBlockType:function(e,t,n){return p(e,t,(function(e){return e.merge({type:n,depth:0})}))},setBlockData:function(e,t,n){return p(e,t,(function(e){return e.merge({data:n})}))},mergeBlockData:function(e,t,n){return p(e,t,(function(e){return e.merge({data:e.getData().merge(n)})}))},applyEntity:function(e,t,n){var r=h(e,t);return c(r,t,n)}};e.exports=g},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var i=n(836),a=i.Map,c=i.OrderedSet,s=i.Record,u=c(),l={style:u,entity:null},d=function(e){function t(){return r(this,t),o(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getStyle=function(){return this.get("style")},t.prototype.getEntity=function(){return this.get("entity")},t.prototype.hasStyle=function(e){return this.getStyle().includes(e)},t.applyStyle=function(e,n){var r=e.set("style",e.getStyle().add(n));return t.create(r)},t.removeStyle=function(e,n){var r=e.set("style",e.getStyle().remove(n));return t.create(r)},t.applyEntity=function(e,n){var r=e.getEntity()===n?e:e.set("entity",n);return t.create(r)},t.create=function(e){if(!e)return f;var n=a({style:u,entity:null}).merge(e),r=p.get(n);if(r)return r;var o=new t(n);return p=p.set(n,o),o},t}(s(l)),f=new d,p=a([[a(l),f]]);d.EMPTY=f,e.exports=d},function(e,t,n){"use strict";function r(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n(32),o=n(40),i=n(2),a=n(1),c=n(63),s=n(90),u=n(234),l=n(71),d=n.n(l),f=n(369),p=function(e){return/^\w+:\/\//.test(e)?e:location.origin+e},h=function(e,t){var n=t.params,r=t.onRequestOpen,i=Object(f.b)();return function(t){var a=e.href,s=e.onClick;if(s&&s(t),!t.defaultPrevented){var u=function(e,t){if(!t)return e;var n=e.split("#"),r=Object(o.a)(n,2),i=r[0],a=r[1],c=i+(i.includes("?")?"&":"?")+t;return a?c+"#"+a:c}(p(a),n);return i.ZhihuHybrid?(t.preventDefault(),void c.a.dispatch("base/openURL",{url:u})):i.isMiniProgram?(t.preventDefault(),void function(e,t){var n,r=function(){var n,r,o,i=null,a=null;if(t.WxMiniProgram)i=null===(r=window.wx)||void 0===r||null===(o=r.miniProgram)||void 0===o?void 0:o.navigateTo;else if(t.JDMiniProgram){var c,s;i=null===(c=window.jd)||void 0===c||null===(s=c.miniProgram)||void 0===s?void 0:s.navigateTo}var u,l=null===(n=/\/topic\/(\d+)/.exec(e))||void 0===n?void 0:n[1];(l&&(t.WxMiniProgram?a="/pages/topic?id=".concat(l):t.JDMiniProgram&&(a="/pages/topic/index?id=".concat(l))),a)?null===(u=i)||void 0===u||u({url:a}):/^http(s)?:/.test(e)&&(location.href=e)};!t.WxMiniProgram||(null===(n=window.WeixinJSBridge)||void 0===n?void 0:n.invoke)?r():document.addEventListener("WeixinJSBridgeReady",r,!1)}(u,i)):void((null==r?void 0:r({ua:i,url:u}))&&t.preventDefault())}}},b=function(e,t){var n=t.extra;return{zaType:"Button",zaAction:"OpenUrl",zaEventType:"Click",shouldTrackClick:!0,extra:d()({link:{get url(){return p(e)}}},n)}},v=Object(a.forwardRef)((function(e,t){var n=e.params,o=e.onRequestOpen,a=e.extra,c=Object(r.a)(e,["params","onRequestOpen","extra"]);return Object(i.b)(u.c,Object.assign({as:s.Link},b(c.href,{extra:a}),c,{ref:t,onClick:h(c,{params:n,onRequestOpen:o})}))}));t.b=function(e){var t=e.params,n=e.onRequestOpen,o=e.children,i=e.extra,c=Object(r.a)(e,["params","onRequestOpen","children","extra"]);return Object(a.cloneElement)(o,Object(u.j)(Object.assign({},b(o.props.href,{extra:i}),c,{ref:o.ref,onClick:h(o.props,{params:t,onRequestOpen:n})})))}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var i=n(844),a=n(836),c=n(891),s=a.List,u=a.Map,l=a.OrderedSet,d=a.Record,f=a.Repeat,p=l(),h={parent:null,characterList:s(),data:u(),depth:0,key:"",text:"",type:"unstyled",children:s(),prevSibling:null,nextSibling:null},b=function(e,t){return e.getStyle()===t.getStyle()},v=function(e,t){return e.getEntity()===t.getEntity()},m=function(e){if(!e)return e;var t=e.characterList,n=e.text;return n&&!t&&(e.characterList=s(f(i.EMPTY,n.length))),e},g=function(e){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h;return r(this,t),o(this,e.call(this,m(n)))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getKey=function(){return this.get("key")},t.prototype.getType=function(){return this.get("type")},t.prototype.getText=function(){return this.get("text")},t.prototype.getCharacterList=function(){return this.get("characterList")},t.prototype.getLength=function(){return this.getText().length},t.prototype.getDepth=function(){return this.get("depth")},t.prototype.getData=function(){return this.get("data")},t.prototype.getInlineStyleAt=function(e){var t=this.getCharacterList().get(e);return t?t.getStyle():p},t.prototype.getEntityAt=function(e){var t=this.getCharacterList().get(e);return t?t.getEntity():null},t.prototype.getChildKeys=function(){return this.get("children")},t.prototype.getParentKey=function(){return this.get("parent")},t.prototype.getPrevSiblingKey=function(){return this.get("prevSibling")},t.prototype.getNextSiblingKey=function(){return this.get("nextSibling")},t.prototype.findStyleRanges=function(e,t){c(this.getCharacterList(),b,e,t)},t.prototype.findEntityRanges=function(e,t){c(this.getCharacterList(),v,e,t)},t}(d(h));e.exports=g},function(e,t,n){"use strict";n.d(t,"e",(function(){return o})),n.d(t,"f",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return u}));var r=/([-\w]+)(="([^"]+)"|='([^']+)')?/g,o=function(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.decodeValue,i=void 0!==o&&o,c={};t=r.exec(e);){var s=t[1],u=t[3]||t[4];c[s]=(i?a(u):u)||""}return c},i=function(e){if(!e)return null;try{return JSON.parse(e)}catch(e){return null}};function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(/&amp;/g,"&").replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#34;/g,'"').replace(/&#13;/g,"\r")}function c(){return Math.max(window.innerHeight/10,100)}var s=function(e){for(var t=e;t&&"HTML"!==t.tagName&&"BODY"!==t.tagName&&1===t.nodeType;){var n=document.defaultView.getComputedStyle(t);if([n.overflow,n.overflowY,n.overflowX].some((function(e){return"scroll"===e||"auto"===e})))return t;t=t.parentNode||t.parentElement}return window};function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=s(e),o=e.getBoundingClientRect().top+(r.pageYOffset||r.scrollTop||0)-(n?c():0)-t;r.scrollTo({top:o,behavior:"smooth"})}},function(e,t,n){"use strict";e.exports=function(e){if(null!=e)return e;throw new Error("Got unexpected null or undefined")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return k})),n.d(t,"b",(function(){return C})),n.d(t,"d",(function(){return S})),n.d(t,"c",(function(){return R}));var r=n(13),o=n(14),i=n(15),a=n(16),c=n(9),s=n(32),u=n(2),l=n(3),d=n.n(l),f=n(1),p=n(11),h=n.n(p),b=n(76),v=n.n(b),m=n(839),g=n(206),y=n(981);function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}function j(e){return!!e&&!(Array.isArray(e)&&!e.some(Boolean))}function w(e){var t=e.onRef,n=e.listClassName,r=e.itemClassName,o=e.className,i=e.children,a=Object(s.a)(e,["onRef","listClassName","itemClassName","className","children"]);return Object(u.b)("div",Object.assign({ref:t,className:h()(n,o)},a,{children:f.Children.map(i,(function(e){return"string"==typeof e?Object(u.b)("span",{className:r,children:e}):e?Object(f.cloneElement)(e,{className:h()(r,e.props.className)}):e}))}))}var C=function(e){return Object(u.b)(w,Object.assign({listClassName:"ContentItem-cells",itemClassName:"ContentItem-cell"},e))},k=function(e){return Object(u.b)(w,Object.assign({listClassName:"ContentItem-actions",itemClassName:"ContentItem-action"},e))},S=function(e){return Object(u.b)(w,Object.assign({listClassName:"ContentItem-status",itemClassName:"ContentItem-statusItem"},e))},x=function(e){Object(i.a)(n,e);var t=O(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).onRef=function(t){e.domNode=t,e.props.onRef&&e.props.onRef(t)},e.onAccessContent=function(t,n){n===document.activeElement&&window.open(e.props.link)},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;Object(m.onViewedOnce)(this.domNode,(function(){var t=e.props,n=t.data,r=(n=void 0===n?{}:n).type,o=n.id,i=t.lastreadTouchable;e.context.currentUser&&i&&r&&o&&Object(y.c)("article"===r?"post":r,o,y.b)}))}},{key:"render",value:function(){var e=v()(this.props,["noTrackCardShow","lastreadTouchable","data","onRef"]),t=e.className,n=e.title,r=e.meta,o=e.children,i=e.extra,a=e.image,c=e.link,l=Object(s.a)(e,["className","title","meta","children","extra","image","link"]),d=Object(u.c)(f.Fragment,{children:[n&&Object(u.b)("h2",{className:"ContentItem-title",children:n}),j(r)&&Object(u.b)("div",{className:"ContentItem-meta",children:r})]});return Object(u.c)("div",Object.assign({ref:this.onRef,className:h()("ContentItem",t)},l,{children:[c&&Object(u.b)(g.c,{keyMap:{ACCESS:"enter"},handlers:{ACCESS:this.onAccessContent}}),a||i?Object(u.c)("div",{className:"ContentItem-main",children:[a&&Object(u.b)("div",{className:"ContentItem-image",children:a}),Object(u.b)("div",{className:"ContentItem-head",children:d}),i&&Object(u.b)("div",{className:"ContentItem-extra",children:i})]}):d,o]}))}}]),n}(f.Component);x.contextTypes={currentUser:d.a.object};var R={plain:"plain",default:"default",interactive:"interactive"};t.e=x},function(e,t,n){"use strict";var r=n(1197),o=n(1199),i=n(1200),a=n(1201);function c(e,t,n,r){if(e===n)return!0;if(!n.startsWith(e))return!1;var i=n.slice(e.length);return!!t&&(i=r?r(i):i,o.contains(i,t))}function s(e){return"Windows"===r.platformName?e.replace(/^\s*NT/,""):e}var u={isBrowser:function(e){return c(r.browserName,r.browserFullVersion,e)},isBrowserArchitecture:function(e){return c(r.browserArchitecture,null,e)},isDevice:function(e){return c(r.deviceName,null,e)},isEngine:function(e){return c(r.engineName,r.engineVersion,e)},isPlatform:function(e){return c(r.platformName,r.platformFullVersion,e,s)},isPlatformArchitecture:function(e){return c(r.platformArchitecture,null,e)}};e.exports=i(u,a)},function(e,t,n){"use strict";e.exports=n(1007)},function(e,t,n){"use strict";n.d(t,"b",(function(){return z})),n.d(t,"a",(function(){return T}));var r=n(20),o=n.n(r),i=n(21),a=n.n(i),c=n(22),s=n.n(c),u=n(23),l=n.n(u),d=n(17),f=n.n(d),p=n(3),h=n.n(p),b=n(1),v=n(11),m=n.n(v),g=n(69),y=n.n(g),O=n(896),j=n(324),w=n(1261),C=n(917),k=n(5);function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var o=f()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l()(this,n)}}var x=function(e){s()(n,e);var t=S(n);function n(){var e;o()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={isInputing:!1,value:e.props.value||""},e.handleChange=function(t){e.setState({value:Object(j.cutStringWidth)(t.target.value,30)})},e}return a()(n,[{key:"componentWillReceiveProps",value:function(e){e.value&&e.value!==this.state.value&&this.setState({value:e.value})}},{key:"render",value:function(){var e=this,t=this.state,n=t.isInputing,r=t.value,o=this.props.onChange,i=!n&&!r,a=!n&&r;return Object(k.g)("div",{className:"Editable-VideoTitleInput-container"},Object(k.g)(C.a,null,Object(k.g)("div",{className:m()("Editable-VideoTitleInput-innerContainer",{"Editable-VideoTitleInput-innerContainer--isBeforeIconShown":i}),onClick:function(){return e.setState({isInputing:!0})}},i&&Object(k.g)(w.a,{className:"Editable-VideoTitleInput-beforeIcon",center:!0}),!n&&Object(k.g)("div",{className:m()("Editable-VideoTitleInput-value",{"Editable-VideoTitleInput-value--noContent":!r})},r||"好的标题可以获得更多的推荐及关注者"),n&&Object(k.g)("input",{className:"Editable-VideoTitleInput",value:r,ref:function(e){e&&e.focus()},placeholder:"标题长度不超过 15 个字",onChange:this.handleChange,onBlur:function(t){e.setState({isInputing:!1}),o(t.target.value)}}),a&&Object(k.g)(w.a,{className:"Editable-VideoTitleInput-afterIcon",center:!0}))))}}]),n}(b.Component),R=n(910),E=n(1281),_=n(992),A=n.n(_),T=function(e){var t=e.className;return Object(k.g)("svg",{viewBox:"0 0 72 72",className:t},Object(k.g)("circle",{cx:"36",cy:"36",fill:"#fff",fillOpacity:".95",r:"36"}),Object(k.g)("path",{d:"M50.835 37.06L29.477 49.97a1.203 1.203 0 0 1-1.664-.43 1.25 1.25 0 0 1-.17-.631V23.091c0-.682.543-1.234 1.213-1.234.219 0 .433.06.62.173l21.359 12.91a1.245 1.245 0 0 1 0 2.12z",fill:"#444",fillRule:"nonzero"}))},N=function(){return Object(k.g)("div",{className:"VideoCardPlayButton"},Object(k.g)(T,{className:"VideoCardPlayButton-icon"}))},I=function(e){var t=e.fileSize;return Object(k.g)("div",{className:"VideoCardPlayButton-withFileSize--outer"},Object(k.g)("span",{className:"VideoCardPlayButton-withFileSize"},Object(k.g)(E.a,{center:!0,size:14}),t?A()(t,{decimalPlaces:1,unit:"MB"}):"流量播放"))};var M={name:"u03n1e",styles:"position:relative;height:100%;&::after{content:'';position:absolute;top:0;bottom:0;left:0;right:0;background-color:rgba(0, 0, 0, 0.05);}"};function D(e){var t=e.thumbnail,n=e.isLens,r=e.canPlay;return n||r?t&&"string"==typeof t?Object(k.g)("div",{css:M},Object(k.g)("img",{src:t,alt:"视频封面"})):t||null:Object(k.g)(T,{className:"VideoCard-playIcon VideoCard-playIcon--nonLens"})}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var o=f()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l()(this,n)}}var P=function(e){s()(n,e);var t=L(n);function n(){var e;o()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={isMobile:!1,playerShown:!1,playerLoading:!1},e.handlePlay=function(t){t.preventDefault();var n=e.props,r=n.interactive,o=n.isConverting,i=n.isLens,a=n.playerUrl,c=n.onPlayFailed,s=n.onLensPlay,u=n.onBeforePlay;r&&!o&&(a||!c?u?Promise.resolve(u()).then((function(t){!1!==t&&e.play()})):i&&s&&s()||e.play():c())},e.handlePlayerLoad=function(){e.loadingCount--,0===e.loadingCount&&e.setState({playerLoading:!1})},e}return a()(n,[{key:"componentDidMount",value:function(){this.setState({isMobile:y()(navigator.userAgent).Mobile})}},{key:"canPlay",value:function(){return this.props.isLens}},{key:"inlinePlayer",value:function(){var e=this.props,t=e.interactive,n=e.isLens,r=e.onLensPlay,o=e.onBeforePlay;return t&&n&&!(r||o)}},{key:"showContent",value:function(){var e=this.props,t=e.content,n=e.isLens,r=e.title;return!e.isVideoTitleEditable&&(!n||Boolean(t||r))}},{key:"showDescription",value:function(){var e=this.props.isLens;return this.showContent()&&!e}},{key:"play",value:function(){var e=this.props.onPlay;this.loadingCount=2,this.setState({playerShown:!0,playerLoading:!0}),setTimeout(this.handlePlayerLoad,1e3),e&&e()}},{key:"renderContent",value:function(){var e=this.props,t=e.interactive,n=e.isLens,r=e.title,o=e.thumbnail,i=e.source,a=e.url,c=e.showPlayButton,s=e.usePlayButtonWithFileSize,u=e.fileSize,l=e.rightBottomButton,d=e.leftBottomButton,f=e.isVideoTitleEditable,p=e.onVideoTitleChange,h=e.isConverting,b=e.content,v=this.canPlay(),g=this.inlinePlayer(),y=Object(k.g)(D,{thumbnail:o,isLens:n,canPlay:v}),O=c&&!h&&(s?Object(k.g)(I,{fileSize:u}):Object(k.g)(N,null)),j=Object(k.g)("div",{className:"VideoCard-layout"},v?Object(k.g)("div",{className:"VideoCard-video"},Object(k.g)("div",{className:"VideoCard-video-content"},g?this.renderPlayer():Object(k.g)("div",{className:m()("VideoCard-thumbnail",{"VideoCard-thumbnail--placeholder":!o}),onClick:this.handlePlay},y,O,l,d))):Object(k.g)("div",{className:"VideoCard-poster"},y),this.showContent()&&(b||Object(k.g)("div",{className:"VideoCard-content"},Object(k.g)("div",{className:"VideoCard-title"},r),this.showDescription()&&Object(k.g)("div",{className:"VideoCard-description"},i&&Object(k.g)("span",{className:"VideoCard-source"},i),Object(k.g)("span",{className:"VideoCard-badge"},"视频")))),f&&Object(k.g)(x,{value:r,onChange:p}));return n?j:t?Object(k.g)("a",{className:"VideoCard-link",href:a,target:"_blank",rel:"noopener noreferrer"},j):Object(k.g)("div",{className:"VideoCard-link"},j)}},{key:"renderPlayer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.props,n=t.source,r=t.playerUrl,o=t.onIframeRef,i=t.useMSE;return Object(k.g)(R.a,{placeholder:Object(k.g)("div",{className:"VideoCard-player"})},Object(k.g)("div",{className:"VideoCard-player"},Object(k.g)(O.a,{type:"video",ref:o,src:"".concat(r),iframeProps:{onLoad:this.handlePlayerLoad,allowFullScreen:!0,autoplay:e&&"lens"===n,useMSE:i}})))}},{key:"render",value:function(){var e=this.props,t=e.interactive,n=e.isConverting,r=e.isVideoAnswer,o=this.state,i=o.isMobile,a=o.playerShown,c=o.playerLoading;return Object(k.g)("div",{className:m()("VideoCard",{"VideoCard--converting":n,"VideoCard--interactive":t,"VideoCard--mobile":i,"is-videoAnswer":r})},this.renderContent(),a&&Object(k.g)("div",{className:m()("VideoCard-overlay",{"is-loading":c})},this.renderPlayer(!0)),Object(k.g)("div",{className:m()("VideoCard-mask",{"is-shown":c})}))}}]),n}(b.Component);P.propTypes={interactive:h.a.bool,showPlayButton:h.a.bool,usePlayButtonWithFileSize:h.a.bool,isVideoAnswer:h.a.bool,fileSize:h.a.number,onPlay:h.a.func,onPlayFailed:h.a.func,onLensPlay:h.a.func,onBeforePlay:h.a.func,rightBottomButton:h.a.oneOfType([h.a.element,h.a.string]),leftBottomButton:h.a.oneOfType([h.a.element,h.a.string]),thumbnail:h.a.oneOfType([h.a.element,h.a.string]),content:h.a.object},P.defaultProps={interactive:!0,showPlayButton:!0};var z=P},function(e,t,n){"use strict";var r=n(32),o=n(2),i=n(3),a=n.n(i),c=n(25),s=n(34),u=n(66),l=n(11),d=n.n(l),f=n(177),p=n(63),h=n(76),b=n.n(h),v=n(49),m=n(372),g=n(884),y=n(28);n(885);var O=function(e){var t,i=e.isPinProfile,a=e.onClick,l=e.isPinDaily,h=e.user,O=e.avatar,j=e.avatarProps,w=e.showVipIcon,C=e.vipIconZaViewName,k=e.badgeProps,S=e.noBadge,x=e.noLink,R=e.noHoverCard,E=e.style,_=e.className,A=e.children,T=Object(r.a)(e,["isPinProfile","onClick","isPinDaily","user","avatar","avatarProps","showVipIcon","vipIconZaViewName","badgeProps","noBadge","noLink","noHoverCard","style","className","children"]),N=Object(c.useSelector)((function(e){return Object(v.d)(e,{includeTablet:!0})})),I=h.id,M=h.name,D=h.avatarUrl,L=h.urlToken,P=h.isOrg,z=h.vipInfo,B=h.url,F=h.maskLevel,U=void 0===R?N:R,q=Object(u.d)((function(){return n.e(53).then(n.bind(null,1144))}),!U&&!N);t=O?Object(o.b)(f.a,Object.assign({className:"UserLink-avatar",url:D,alt:M},j)):A||M;var V=Boolean(function(e){var t=e.id,n=e.name,r=e.urlToken;return"0"===t||"知乎用户"===n?null:r||t}(h)),H="//www.zhihu.com/".concat(P?"org":"people","/").concat(L||I),K="zhihu://pin".concat(B,"/moments");return V&&!x&&(t=Object(o.b)(s.Link,Object.assign({className:"UserLink-link","data-za-detail-view-element_name":"User",to:H,target:"_blank",onClick:function(e){return function(t){l&&"A"===t.target.nodeName&&y.a.trackEvent(t.target,{id:2065}),i&&(t.preventDefault(),p.a.dispatch("base/openURL",{url:e})),F&&t.preventDefault(),a&&"function"==typeof a&&a(t)}}(K)},b()(T,["isPinProfile","trackEvent","onClick","dispatch","isPinDaily"]),{children:t})),!U&&q&&(t=Object(o.b)(q,{toggler:t,id:I,urlToken:L,user:h}))),Object(o.c)("span",{style:E,className:d()("UserLink",_),children:[t,V&&!S&&!O&&Object(o.b)(m.c,Object.assign({css:{marginLeft:".3em"},isOrg:P,badge:h.badgeV2||h.badge,linkify:!0,enableTooltip:!0},k)),V&&w&&!O&&z&&z.vipIcon&&Object(o.b)(g.a,{vipIcon:z.vipIcon,zaViewName:C})]})};O.propTypes={user:a.a.object.isRequired,avatar:a.a.bool,avatarProps:a.a.object,noBadge:a.a.bool,noHoverCard:a.a.bool,showVipIcon:a.a.bool,style:a.a.object,className:a.a.string,children:a.a.node,isPinProfile:a.a.bool,isPinDaily:a.a.bool},O.defaultProps={avatar:!1,noBadge:!1,showVipIcon:!1},t.a=O},function(e,t,n){"use strict";var r={},o=Math.pow(2,24);e.exports=function(){for(var e=void 0;void 0===e||r.hasOwnProperty(e)||!isNaN(+e);)e=Math.floor(Math.random()*o).toString(32);return r[e]=!0,e}},function(e,t,n){"use strict";var r=n(1175);e.exports=r},function(e,t,n){"use strict";var r=n(13),o=n(14),i=n(15),a=n(16),c=n(9),s=n(2),u=n(3),l=n.n(u),d=n(1),f=n(19),p=n(25),h=n(34),b=n(11),v=n.n(b),m=(n(208),n(28)),g=n(49),y=n(947),O=n(854),j=(n(869),n(899)),w=n(886);function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var k=function(e){Object(i.a)(n,e);var t=C(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).handleClick=function(t){var n=e.props,r=n.zaId,o=n.zaExtra,i=n.author.urlToken,a=n.isSpecialQuestionOrAnswer;if(n.preventOpenUrl)t.preventDefault();else if(r&&m.a.trackEvent(null,{id:r,action:"OpenUrl",element_name:"User"},o),a)return location.href="zhihu://people/".concat(i,"?utm_app_name=zhihu_check"),t.preventDefault(),void t.stopPropagation()},e}return Object(o.a)(n,[{key:"render",value:function(){var e="plain"===this.props.preset,t=this.props,n=t.author,r=t.noLink,o=t.avatarSize,i=void 0===o?e?24:38:o,a=t.children,c=t.className,u=t.extra,l=t.itemProp,d=t.roundAvatar,f=t.isMobile,p=t.target,h=t.noDetail,b=t.noHoverCard,m=t.noHeadline,g=e&&u||Object(s.b)("div",{className:"AuthorInfo-badge",children:a||Object(s.b)(y.a,{className:"AuthorInfo-badgeText",user:n,noHeadline:m})}),C=this.props.userLinkV2;return Object(s.c)("div",{className:v()("AuthorInfo",c,{"AuthorInfo--plain":e}),itemProp:l,itemScope:!0,itemType:"http://schema.org/Person",children:[Object(s.b)("meta",{itemProp:"name",content:n.name}),Object(s.b)("meta",{itemProp:"image",content:n.avatarUrl}),Object(s.b)("meta",{itemProp:"url",content:"https://www.zhihu.com/people/".concat(n.urlToken)}),Object(s.b)("meta",{itemProp:"zhihu:followerCount",content:n.followerCount}),C&&Object(s.c)(s.a,{children:[Object(s.b)(j.a,Object.assign({onClick:this.handleClick,noHoverCard:f||b,noLink:r,user:n,className:"AuthorInfo-avatarWrapper",avatarProps:{className:"AuthorInfo-avatar",size:i,round:d}},p&&{target:p})),Object(s.c)("div",{className:"AuthorInfo-content",children:[Object(s.c)("div",{className:"AuthorInfo-head",children:[Object(s.b)(w.a,Object.assign({noHoverCard:f||b,onClick:this.handleClick,noLink:r,user:n,className:"AuthorInfo-name"},p&&{target:p})),!e&&u]}),!h&&Object(s.b)("div",{className:"AuthorInfo-detail",children:g})]})]}),!C&&Object(s.c)(s.a,{children:[Object(s.b)(O.a,Object.assign({onClick:this.handleClick,noHoverCard:f||b,noLink:r,className:"AuthorInfo-avatarWrapper",user:n,avatar:!0,avatarProps:{className:"AuthorInfo-avatar",size:i,round:d}},p&&{target:p})),Object(s.c)("div",{className:"AuthorInfo-content",children:[Object(s.c)("div",{className:"AuthorInfo-head",children:[Object(s.b)(O.a,Object.assign({noHoverCard:f||b,onClick:this.handleClick,className:"AuthorInfo-name",noLink:r,user:n},p&&{target:p})),!e&&u]}),!h&&Object(s.b)("div",{className:"AuthorInfo-detail",children:g})]})]})]})}}]),n}(d.Component);k.propTypes={author:l.a.object.isRequired,noLink:l.a.bool,avatarSize:l.a.number,preset:l.a.oneOf(["plain","default"]),className:l.a.string,itemProp:l.a.string,roundAvatar:l.a.bool,isMobile:l.a.bool,noDetail:l.a.bool,relatedTo:l.a.string,zaId:l.a.number,zaExtra:l.a.object,noHoverCard:l.a.bool,noHeadline:l.a.bool,preventOpenUrl:l.a.bool},k.defaultProps={noLink:!1,roundAvatar:!1,itemProp:"author",noHoverCard:!1,noHeadline:!1,preventOpenUrl:!1};t.a=Object(f.compose)(h.withRouter,Object(p.connect)((function(e,t){var n=t.relatedTo,r=t.params,o=["question","answer"].includes(n);return{isHuman:Object(g.c)(e),shouldOia:Object(g.h)(e)&&o,isMobile:Object(g.d)(e,{includeTablet:!0}),isSpecialQuestionOrAnswer:Object(g.j)(e,{type:o&&n,id:o?"question"===n?null==r?void 0:r.id:null==r?void 0:r.answerId:""})}})))(k)},function(e,t,n){var r=n(39);e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),o.forEach((function(t){r(e,t,n[t])}))}return e}},function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return s})),n.d(t,"f",(function(){return u}));var r={general:"general",live:"live",publication:"publication",album:"album",special:"special",manga:"manga"},o=(Object.assign({},r,{album_chapter:r.album,album_video_chapter:r.album,album_paid_column:r.album,paid_column_chapter:r.album,training:r.album,training_bundle:r.album,training_chapter:r.album,web_literature:r.publication,instabook:r.publication,ebook_audio:r.publication,publication_chapter:r.publication,publication_paid_magazine:r.publication,magazine_section:r.publication,paid_answer:r.album,assessment:r.album}),{live:"Live 讲座",album:"盐选专栏",album_paid_column:"盐选专栏",album_chapter:"盐选专栏",album_video_chapter:"盐选专栏",paid_column_chapter:"盐选专栏",publication:"电子书",publication_chapter:"电子书章节",instabook:"讲书",ebook_audio:"有声书",publication_paid_magazine:"盐选杂志",special:"专题",training:"训练营",training_bundle:"训练营",training_chapter:"训练营",web_literature:"网络文学",magazine_section:"杂志文章",manga:"漫画"}),i={live:"Live 讲座",album:"盐选专栏",album_chapter:"盐选专栏",album_video_chapter:"盐选专栏",album_paid_column:"盐选专栏",paid_column_chapter:"盐选专栏",assessment:"盐选专栏",training:"盐选专栏",training_bundle:"盐选专栏",training_chapter:"盐选专栏",publication:"电子书",publication_chapter:"电子书",instabook:"电子书",ebook_audio:"电子书",publication_paid_magazine:"电子书",special:"电子书",web_literature:"电子书",magazine_section:"电子书",manga:"电子书"},a={live:r.live,album:r.album,album_chapter:r.album,album_paid_column:r.album,album_video_chapter:r.album,training:r.album,training_bundle:r.album,training_chapter:r.album,paid_column_chapter:r.album,assessment:r.album,publication:r.publication,publication_chapter:r.publication,instabook:r.publication,ebook_audio:r.publication,publication_paid_magazine:r.publication,special:r.publication,web_literature:r.publication,magazine_section:r.publication,manga:r.publication},c=["live","album","album_chapter","album_video_chapter","paid_column_chapter","publication_chapter","magazine_section","album_paid_column","assessment","special"],s={paidAnswer:"PaidAnswer",paidPost:"PaidPost"},u={paid_magazine:"PaidMagazine",paid_column:"PaidColumn",album:"RemixAlbum",ebook:"EBook",instabook:"InstaBook",literature:"Literature",training:"Training",training_bundle:"TrainingBundle",special:"Special",ebook_audio:"AudioBook",live:"Live",publication:"EBook",web_literature:"EBook",album_chapter:"RemixAlbum",album_paid_column:"RemixAlbum",album_video_chapter:"RemixAlbum",manga:"Manga",free_conversation:"FreeConversation",event:"Event",Onebox:"OneBox"}},function(e,t,n){"use strict";var r=n(844),o=n(836),i=n(891),a=o.List,c=o.Map,s=o.OrderedSet,u=o.Record,l=o.Repeat,d=s(),f=u({key:"",type:"unstyled",text:"",characterList:a(),depth:0,data:c()}),p=function(e){function t(n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,function(e){if(!e)return e;var t=e.characterList,n=e.text;return n&&!t&&(e.characterList=a(l(r.EMPTY,n.length))),e}(n)))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getKey=function(){return this.get("key")},t.prototype.getType=function(){return this.get("type")},t.prototype.getText=function(){return this.get("text")},t.prototype.getCharacterList=function(){return this.get("characterList")},t.prototype.getLength=function(){return this.getText().length},t.prototype.getDepth=function(){return this.get("depth")},t.prototype.getData=function(){return this.get("data")},t.prototype.getInlineStyleAt=function(e){var t=this.getCharacterList().get(e);return t?t.getStyle():d},t.prototype.getEntityAt=function(e){var t=this.getCharacterList().get(e);return t?t.getEntity():null},t.prototype.findStyleRanges=function(e,t){i(this.getCharacterList(),h,e,t)},t.prototype.findEntityRanges=function(e,t){i(this.getCharacterList(),b,e,t)},t}(f);function h(e,t){return e.getStyle()===t.getStyle()}function b(e,t){return e.getEntity()===t.getEntity()}e.exports=p},function(e,t,n){"use strict";var r=n(837),o=/[\uD800-\uDFFF]/;function i(e){return 55296<=e&&e<=57343}function a(e){return o.test(e)}function c(e,t){return 1+i(e.charCodeAt(t))}function s(e,t,n){if(t=t||0,n=void 0===n?1/0:n||0,!a(e))return e.substr(t,n);var r=e.length;if(r<=0||t>r||n<=0)return"";var o=0;if(t>0){for(;t>0&&o<r;t--)o+=c(e,o);if(o>=r)return""}else if(t<0){for(o=r;t<0&&0<o;t++)o-=c(e,o-1);o<0&&(o=0)}var i=r;if(n<r)for(i=o;n>0&&i<r;n--)i+=c(e,i);return e.substring(o,i)}var u={getCodePoints:function(e){for(var t=[],n=0;n<e.length;n+=c(e,n))t.push(e.codePointAt(n));return t},getUTF16Length:c,hasSurrogateUnit:a,isCodeUnitInSurrogateRange:i,isSurrogatePair:function(e,t){if(0<=t&&t<e.length||r(!1),t+1===e.length)return!1;var n=e.charCodeAt(t),o=e.charCodeAt(t+1);return 55296<=n&&n<=56319&&56320<=o&&o<=57343},strlen:function(e){if(!a(e))return e.length;for(var t=0,n=0;n<e.length;n+=c(e,n))t++;return t},substring:function(e,t,n){(t=t||0)<0&&(t=0),(n=void 0===n?1/0:n||0)<0&&(n=0);var r=Math.abs(n-t);return s(e,t=t<n?t:n,r)},substr:s};e.exports=u},,function(e,t,n){"use strict";var r=n(32),o=n(2),i=n(1),a=n(90),c=function(e,t){var n=e.ratio,i=void 0===n?1:n,c=e.children,s=Object(r.a)(e,["ratio","children"]);return Object(o.b)(a.Box,Object.assign({css:{position:"relative",paddingBottom:"".concat(1/i*100,"%"),height:"0",borderRadius:"inherit"}},s,{ref:t,children:Object(o.b)("div",{css:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",borderRadius:"inherit"},children:c})}))};t.a=Object(i.forwardRef)(c)},function(e,t,n){"use strict";n.r(t),n.d(t,"dispatch",(function(){return a})),n.d(t,"HYBRID_ACTION_EVENT",(function(){return o})),n.d(t,"getTrackMacroOptions",(function(){return s})),n.d(t,"removeBIZParameter",(function(){return u})),n.d(t,"sendRaven",(function(){return l})),n.d(t,"base64Decode",(function(){return d.a})),n.d(t,"base64Encode",(function(){return d.b}));var r=n(63),o={commonAd:"ad/open",preloadAd:"ad/preload",answerAd:"answer/openAd",adOpenForm:"ad/openForm",openWithoutDeepLink:"ad/openWithoutDeepLink",baseOpenURL:"base/openURL",baseOpenInbox:"base/openInbox",adOpenWechat:"ad/openWechat",adECommerceOpen:"ad/eCommerceOpen",adDownloadApk:"ad/downloadApk",openWechatShare:"ad/openWechatShare",fetchAdLinkCardInfo:"editor/fetchADLinkCardInfo",adOpenContent:"ad/openContent",adSendContentPluginTracks:"ad/sendContentPluginTracks",adWxPushOnceMsgAuth:"ad/wxPushOnceMsgAuth"};function i(e){var t=e.type,n=e.payload;return new Promise((function(e){r.a.ready().then((function(){r.a.supportsAction(t).then((function(o){o?r.a.dispatch(t,n).then((function(t){var n=!t||!1!==t.status;e({status:n,type:2,data:t})}),(function(t){return e({status:!1,type:2,data:t})})):e({status:!1,type:1})}))})).catch((function(t){return e({status:!1,type:0,data:t})}))}))}function a(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Promise((function(e,n){i.apply(void 0,t).then((function(t){return t.status?e(t):n(t)}))}))}var c=n(842);function s(){var e=Object(c.g)(),t=e.os,n=e.platform,r=Object(c.h)(),o=(navigator&&Object(c.e)(navigator.userAgent)).version;return{os:t,ua:navigator.userAgent,platform:n,isHybrid:r?"1":"0",version:o}}function u(e){return e.replace("&BIZ=ECOMMERCE","").replace("?BIZ=ECOMMERCE","?").replace("&BIZFROM=ORG","").replace("?BIZFROM=ORG","?")}var l=function(e){void 0!==Object(c.d)(window,"Raven.captureException")&&window.Raven.captureException(new Error("Error in ad data."),{extra:e})},d=n(979)},function(e,t,n){"use strict";var r=n(13),o=n(14),i=n(15),a=n(16),c=n(9),s=n(2),u=n(3),l=n.n(u),d=n(1),f=n(19),p=n(25),h=n(11),b=n.n(h),v=n(941),m=n.n(v),g=n(810),y=n(30),O=n(28),j=n(234),w=n(380),C=n(49),k=n(1021),S=n(97),x=n(101),R=n(185),E=n(325),_=n(385),A=n(151),T=n(381),N=n(24);function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var M={default:"default",primary:"primary"},D=function(e){Object(i.a)(n,e);var t=I(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).zaRef=Object(d.createRef)(),e.state={hovered:!1,isFetching:!1},e.handleMouseEnter=function(){e.setState({hovered:!0})},e.handleMouseLeave=function(){e.setState({hovered:!1})},e.toggleFollow=function(t){var n=e.props,r=n.isFollowing,o=n.type,i=n.id,a=n.zaId,c=n.useCustomZa,s=n.onFollowButtonClick,u=!r;c||(O.a.trackEvent(t.target,Object.assign({action:u?"Follow":"UnFollow",element:"Button",element_name:N.Z[o]},a&&{id:a})),e.zaRef.current.trackEvent({action:u?"Follow":"UnFollow",eventType:"Click",elementLocation:{type:"Button"}}));var l="toggleFollow".concat(o.slice(0,1).toUpperCase()).concat(o.slice(1)),d=e.props[l](i,u);m()(d)&&(e.setState({isFetching:!0}),d.then((function(){e.setState({isFetching:!1}),s&&s()})).catch((function(){return e.setState({isFetching:!1})})))},e.handleToggleFollow=function(t){e.props.authRequired?e.props.authRequired(e.toggleFollow,N.V.follow,!0)(t):e.props.ua.Zhihu?e.toggleFollow(t):e.context.authRequired(e.toggleFollow,N.V.follow)(t)},e.handleClick=function(t){var n=e.props.onClick;n&&!n(t)||(e.handleToggleFollow(t),t.stopPropagation())},e}return Object(o.a)(n,[{key:"render",value:function(){var e,t,n,r=this.state.hovered,o=this.props,i=o.onRef,a=o.preset,c=o.entityHidden,u=o.type,l=o.isFollowing,d=o.gender,f=o.className,p=o.children,h=o.isMobile,v=o.disabled;l?(e="primary",n=r?"取消关注":"已关注",t={color:"grey"}):(e=a,t={color:"blue"},n=p||("people"===u||"rewardPeople"===u?[Object(s.b)(g.a,{className:"FollowButton-icon",text:!0,center:!0},"icon"),"关注".concat("number"==typeof d&&-1!==d?N.N[d]:"")]:"关注".concat(c?"":w.b[u])));var m=this.state.isFetching;return Object(s.c)(y.c,Object.assign({onRef:i,preset:e,onClick:this.handleClick,className:b()("FollowButton",f)},t,!h&&{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},{disabled:v||m,children:[Object(s.b)(j.d,{ref:this.zaRef}),n]}))}}]),n}(d.Component);D.contextTypes={authRequired:l.a.func},D.propTypes={preset:l.a.oneOf(Object.values(M)),type:l.a.oneOf(w.a).isRequired,id:l.a.oneOfType([l.a.number,l.a.string]).isRequired,zaId:l.a.number,useCustomZa:l.a.bool},D.defaultTypes={preset:M.default},D.PRESETS=M;t.a=Object(f.compose)(Object(p.connect)((function(e){return{ua:e.env.userAgent,isMobile:Object(C.d)(e,{includeTablet:!0})}}),{toggleFollowQuestion:x.nb,toggleFollowCollection:R.d,toggleFollowColumn:E.e,toggleFollowRoundtable:_.m,toggleFollowTopic:A.M,toggleFollowPeople:S.a,toggleFollowRewardPeople:T.o,toggleFollowClub_mask:k.a}))(D)},function(e,t,n){"use strict";var r=n(33),o=n.n(r),i=n(43),a=n.n(i),c=(n(1),n(11)),s=n.n(c),u=(n(902),n(5));t.a=function(e){var t=e.className,n=e.onRef,r=a()(e,["className","onRef"]);return Object(u.g)("div",o()({ref:n,className:s()("Card",t)},r))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(57),o=n.n(r),i=n(1),a=n(11),c=n.n(a),s=n(1347),u=n(1348),l=n(5);var d=function(e){var t=e.style,n=e.className,r=e.id,a=e.name,d=e.size,f=void 0===d?20:d,p=e.checked,h=e.onChange,b=e.disabled,v=Object(i.useState)(!1),m=o()(v,2),g=m[0],y=m[1];return Object(l.g)("label",{style:t,className:c()("Checkbox",n,{"Checkbox--focused":g,"Checkbox--disabled":b})},p?Object(l.g)(s.a,{size:f,className:"Checkbox-iconOn"}):Object(l.g)(u.a,{size:f,className:"Checkbox-iconOff"}),Object(l.g)("input",{className:"Checkbox-input",id:r,name:a,type:"checkbox",checked:p,onFocus:function(){return y(!0)},onBlur:function(){return y(!1)},onChange:h,disabled:b}))}},function(e,t,n){"use strict";t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch(e,Object.assign({credentials:"include",headers:{"X-Requested-With":"Fetch"}},t)).then((function(e){return e.json()}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n(40);var r=n(41),o=n.n(r),i=function(e){var t=e||{},n=t.type,r=t.id,i=t.urlToken,a=t.q;switch(n){case"question":return"/questions/".concat(r);case"answer":return"/answers/".concat(r);case"article":case"p":return"/articles/".concat(r);case"column":return"/columns/".concat(r);case"live":return"/lives/".concat(r);case"ebook":case"book":return"/pub/book/".concat(r);case"feed":return"/feed";case"topic":return"/topics/".concat(r);case"people":return"/people/".concat(i||r);case"search":return"/search?".concat(o.a.stringify({q:a}));case"video":return"video_topic/".concat(r);case"zvideo":return"/zvideo/".concat(r);case"zvideo_answer":case"zvideo_article":var c=n.replace("zvideo_","");return"/".concat(c,"s/").concat(r);case"liveplus":return"/liveplus/".concat(r);default:return null}},a=function(e,t){var n=t?"?".concat(o.a.stringify(t)):"",r="string"==typeof e?e:i(e);if(r){var a=r.startsWith("/")?r.slice(1):r;return"zhihu://".concat(a).concat(n)}return"zhihu://".concat(n)}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var i=function(e){function t(){return r(this,t),o(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.serialize=function(){return"Anchor: "+this.getAnchorKey()+":"+this.getAnchorOffset()+", Focus: "+this.getFocusKey()+":"+this.getFocusOffset()+", Is Backward: "+String(this.getIsBackward())+", Has Focus: "+String(this.getHasFocus())},t.prototype.getAnchorKey=function(){return this.get("anchorKey")},t.prototype.getAnchorOffset=function(){return this.get("anchorOffset")},t.prototype.getFocusKey=function(){return this.get("focusKey")},t.prototype.getFocusOffset=function(){return this.get("focusOffset")},t.prototype.getIsBackward=function(){return this.get("isBackward")},t.prototype.getHasFocus=function(){return this.get("hasFocus")},t.prototype.hasEdgeWithin=function(e,t,n){var r=this.getAnchorKey(),o=this.getFocusKey();if(r===o&&r===e){var i=this.getStartOffset();return t<=this.getEndOffset()&&i<=n}if(e!==r&&e!==o)return!1;var a=e===r?this.getAnchorOffset():this.getFocusOffset();return t<=a&&n>=a},t.prototype.isCollapsed=function(){return this.getAnchorKey()===this.getFocusKey()&&this.getAnchorOffset()===this.getFocusOffset()},t.prototype.getStartKey=function(){return this.getIsBackward()?this.getFocusKey():this.getAnchorKey()},t.prototype.getStartOffset=function(){return this.getIsBackward()?this.getFocusOffset():this.getAnchorOffset()},t.prototype.getEndKey=function(){return this.getIsBackward()?this.getAnchorKey():this.getFocusKey()},t.prototype.getEndOffset=function(){return this.getIsBackward()?this.getAnchorOffset():this.getFocusOffset()},t.createEmpty=function(e){return new t({anchorKey:e,anchorOffset:0,focusKey:e,focusOffset:0,isBackward:!1,hasFocus:!1})},t}((0,n(836).Record)({anchorKey:"",anchorOffset:0,focusKey:"",focusOffset:0,isBackward:!1,hasFocus:!1}));e.exports=i},function(e,t,n){"use strict";function r(e){return e.replace(/\//g,"-")}e.exports=function(e){return"object"==typeof e?Object.keys(e).filter((function(t){return e[t]})).map(r).join(" "):Array.prototype.map.call(arguments,r).join(" ")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var r=n(39),o=n.n(r),i=n(20),a=n.n(i),c=n(21),s=n.n(c),u=n(22),l=n.n(u),d=n(23),f=n.n(d),p=n(17),h=n.n(p),b=n(1),v=n.n(b),m=n(11),g=n.n(m),y=n(5);function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var o=h()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f()(this,n)}}var j=function(e){l()(n,e);var t=O(n);function n(e){var r;a()(this,n),(r=t.call(this,e)).handleChange=function(e){r.setState({checked:e.target.checked});var t=r.props.onChange;"function"==typeof t&&t(e)},r.handleFocus=function(){r.setState({focused:!0})},r.handleBlur=function(){r.setState({focused:!1})};var o=e.checked;return r.state={checked:Boolean(o),focused:!1},r}return s()(n,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.checked,r=t.forceControlled;if(!r){var o=e.forceControlled,i=e.checked;if(!o||r){if(void 0!==n){var a=this.state.checked;i!==n&&n!==a&&this.setState({checked:n})}}else this.setState({checked:Boolean(n)})}}},{key:"render",value:function(){var e,t=this.props,n=t.id,r=t.style,i=t.className,a=t.preset,c=t.onClick,s=t.onChange,u=t.name,l=t.value,d=t.checked,f=t.disabled,p=t.forceControlled,h=this.state,b=h.focused,v=h.checked,m=p?d:v,O=p?s:this.handleChange;return Object(y.g)("label",{className:g()("Switch",i,(e={},o()(e,"Switch--".concat(a),"normal"!==a),o()(e,"Switch--focused",b),o()(e,"Switch--disabled",f),o()(e,"Switch--checked",Boolean(m)),e)),style:r},Object(y.g)("input",{id:n,className:"Switch-input",type:"checkbox",onClick:c,onChange:O,onFocus:this.handleFocus,onBlur:this.handleBlur,name:u,value:l,checked:Boolean(m),disabled:f}))}}]),n}(v.a.Component);j.defaultProps={preset:"normal"}},function(e,t,n){"use strict";var r=n(20),o=n.n(r),i=n(21),a=n.n(i),c=n(22),s=n.n(c),u=n(23),l=n.n(u),d=n(17),f=n.n(d),p=n(3),h=n.n(p),b=n(1),v=n.n(b),m=n(11),g=n.n(m),y=n(938),O=n(150),j=n(69),w=n.n(j),C=n(140),k=n(5);function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var o=f()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l()(this,n)}}var x={top:10,left:20},R={top:0,left:0};var E=function(e){s()(n,e);var t=S(n);function n(){var e;o()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).scrollerRef=v.a.createRef(),e.state={transEnded:!1,rect:null,translate:null,scale:null},e.getBoundingClientRect=function(){var t=e.props,n=t.img,r=t.data,o=n.getBoundingClientRect(),i=o.left,a=o.top,c=o.width,s=o.height,u=r.width,l=r.height,d={left:i,top:a,width:c,height:s},f=1;return u>l?(d.height=s,f=s/l,d.width=u*f,d.left=i+(c-d.width)/2,d.top=a+(s-d.height)/2):u<l&&(d.width=c,f=c/u,d.height=l*f,d.left=i+(c-d.width)/2,d.top=a+(s-d.height)/2),d},e.handleClick=function(t){t.stopPropagation(),e.setState({translate:null,scale:null})},e.handleTransitionEnd=function(){var t=e.state,n=t.translate,r=t.scale,o=e.props.onClose;n&&r?(e.setState({transEnded:!0}),e.scrollerRef.current.style.overflow="auto"):o()},e}return a()(n,[{key:"componentWillMount",value:function(){var e=this.props,t=e.img,n=e.isOriginalUrl;this.originalSrc!==this.currentSrc&&((new Image).src=this.originalSrc);this.setState({rect:!1===n?this.getBoundingClientRect():t.getBoundingClientRect()})}},{key:"componentDidMount",value:function(){var e=this;Object(y.disableBodyScroll)(this.scrollerRef.current);var t=this.props.img;setTimeout((function(){return e.setState(Object.assign({},e.computeTransition(e.state.rect,{width:t.dataset.rawwidth||t.naturalWidth})))}))}},{key:"componentWillUnmount",value:function(){Object(y.enableBodyScroll)(this.scrollerRef.current)}},{key:"computeTransition",value:function(e,t){var n,r=this.props,o=r.transitionType,i=r.data,a=w()(navigator.userAgent).Mobile?R:x,c=a.top,s=a.left,u=window,l={left:0,top:0,width:u.innerWidth,height:u.innerHeight},d=function(e){return{x:e.left+e.width/2,y:e.top+e.height/2}}(l),f={width:l.width-2*s,height:l.height-2*c},p={},h={};return 1===o?(p.width=f.width>i.width?i.width:f.width,n=p.width/i.width,p.height=i.height*n,h={x:(f.width-p.width)/2+s,y:p.height<f.height?(f.height-p.height)/2+c:x.top}):(p.width=f.width>t.width?t.width:f.width,n=p.width/e.width,p.height=e.height*n,h={x:d.x-e.width/2,y:(p.height<f.height?d.y:x.top+p.height/2)-e.height/2}),{translate:h,scale:n}}},{key:"render",value:function(){var e,t=this,n=this.props,r=n.img,o=n.isOriginalUrl,i=n.data,a=n.transitionType,c=n.className,s=this.state,u=s.translate,l=s.scale,d=s.rect,f=s.transEnded,p=u&&l,h=1,b="";if(1===a){var v=(w()(navigator.userAgent).Mobile?R:x).left;e=Math.min(window.innerWidth-2*v,i.width);var m=d.width/e;b=p?"translate(".concat(u.x,"px, ").concat(u.y,"px) scale(1) "):"translate(".concat(d.left,"px, ").concat(d.top,"px) scale(").concat(m,") "),h=p?1:0}else b=p?"translate(".concat(u.x,"px ,").concat(u.y,"px) scale(").concat(l,") "):"translate(".concat(d.left,"px,").concat(d.top,"px)");return Object(k.g)(C.a,null,Object(k.g)("div",{className:g()("ImageView",c,{"is-active":p}),style:{paddingBottom:x.top},onClick:this.handleClick},Object(k.g)("div",{className:"ImageView-inner",ref:this.scrollerRef},Object(k.g)("img",{ref:function(e){t.imgEl=e},src:!1===o?Object(O.imgUrl)(r.dataset.original,"r"):f&&this.originalSrc||this.currentSrc,className:g()("ImageView-img",{"ImageView-transformOrigin":1===a}),style:{width:e||d.width,transform:b,opacity:h},onTransitionEnd:this.handleTransitionEnd,alt:"preview"}))))}},{key:"originalSrc",get:function(){return this.props.img.dataset.original}},{key:"currentSrc",get:function(){var e=this.props.img;return e.currentSrc||e.src}}]),n}(b.Component);E.propTypes={img:h.a.object.isRequired,onClose:h.a.func.isRequired};t.a=E},function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(57),o=n.n(r),i=n(1),a=n.n(i),c=n(11),s=n.n(c),u=n(18),l=function(e){return a.a.createElement(u.a,e,a.a.createElement("path",{d:"M12 2c5.43 0 9.848 4.325 9.996 9.72L22 12c0 5.43-4.325 9.848-9.72 9.996L12 22C6.477 22 2 17.524 2 12c0-5.43 4.325-9.848 9.72-9.996L12 2zm0 3.333l-.234.004A6.672 6.672 0 0 0 5.333 12 6.671 6.671 0 0 0 12 18.667l.234-.004A6.672 6.672 0 0 0 18.667 12l-.004-.234A6.672 6.672 0 0 0 12 5.333zm0 3.334a3.333 3.333 0 1 1 0 6.666 3.333 3.333 0 0 1 0-6.666z",fillRule:"evenodd"}))};l.defaultProps={name:"RadioButtonOn"};var d=l,f=function(e){return a.a.createElement(u.a,e,a.a.createElement("path",{d:"M12 2c5.43 0 9.848 4.325 9.996 9.72L22 12c0 5.43-4.325 9.848-9.72 9.996L12 22C6.477 22 2 17.524 2 12c0-5.43 4.325-9.848 9.72-9.996L12 2zm0 3.333l-.234.004A6.672 6.672 0 0 0 5.333 12a6.672 6.672 0 0 0 6.433 6.663l.234.004.234-.004a6.672 6.672 0 0 0 6.429-6.429l.004-.234-.004-.234a6.672 6.672 0 0 0-6.429-6.429L12 5.333z",fillRule:"evenodd"}))};f.defaultProps={name:"RadioButtonOff"};var p=f,h=n(5);var b=function(e){var t=e.style,n=e.className,r=e.id,a=e.name,c=e.value,u=e.size,l=void 0===u?20:u,f=e.checked,b=e.onChange,v=e.disabled,m=Object(i.useState)(!1),g=o()(m,2),y=g[0],O=g[1];return Object(h.g)("label",{style:t,className:s()("RadioButton",n,{"RadioButton--focused":y,"RadioButton--disabled":v})},f?Object(h.g)(d,{size:l,className:"RadioButton-iconOn"}):Object(h.g)(p,{size:l,className:"RadioButton-iconOff"}),Object(h.g)("input",{className:"RadioButton-input",id:r,name:a,value:c,type:"radio",checked:f,onFocus:function(){return O(!0)},onBlur:function(){return O(!1)},onChange:b,disabled:v}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(1),o=n.n(r),i=n(131),a=Object.assign;var c=function(e){return o.a.createElement(i.a,a({width:"150",height:"120",viewBox:"0 0 150 120"},e),o.a.createElement("g",{fill:"none",fillRule:"evenodd"},o.a.createElement("path",{fill:"#EBEEF5",d:"M44 31.005v55.99A3.003 3.003 0 0047.003 90h53.994A3.005 3.005 0 00104 86.995v-55.99A3.003 3.003 0 00100.997 28H47.003A3.005 3.005 0 0044 31.005zm-3 0A6.005 6.005 0 0147.003 25h53.994A6.003 6.003 0 01107 31.005v55.99A6.005 6.005 0 01100.997 93H47.003A6.003 6.003 0 0141 86.995v-55.99z",fillRule:"nonzero"}),o.a.createElement("path",{fill:"#F7F8FA",d:"M59 50a6 6 0 110-12 6 6 0 010 12zm12-9.5c0-.828.68-1.5 1.496-1.5h9.008c.826 0 1.496.666 1.496 1.5 0 .828-.68 1.5-1.496 1.5h-9.008A1.495 1.495 0 0171 40.5zm0 7c0-.828.667-1.5 1.5-1.5h21c.828 0 1.5.666 1.5 1.5 0 .828-.667 1.5-1.5 1.5h-21c-.828 0-1.5-.666-1.5-1.5zM59 73a6 6 0 110-12 6 6 0 010 12zm12-9.5c0-.828.68-1.5 1.496-1.5h9.008c.826 0 1.496.666 1.496 1.5 0 .828-.68 1.5-1.496 1.5h-9.008A1.495 1.495 0 0171 63.5zm0 7c0-.828.667-1.5 1.5-1.5h21c.828 0 1.5.666 1.5 1.5 0 .828-.667 1.5-1.5 1.5h-21c-.828 0-1.5-.666-1.5-1.5z"})))}},function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return p}));n(1);var r=n(152),o=n(852),i=n(882),a=n(904),c=n(5),s=/<(h2|h3)[^>]*>(.*?)<\/\1>/g,u={h2:1,h3:2},l=function(e,t){return"h_".concat(e||"editor","_").concat(t)},d=function(e){return e.replace(i.b,"").replace(/<[^>]*>/g,"")},f=function(e){return u[e]},p=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!e)return{catalog:[],html:e};var r=[];return t=t||"editor",n="function"==typeof n?n:function(){return String(n)},e=e.replace(s,(function(e,o){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=d(i),c=f(o),s=l(t,r.length);return r.push({text:a,titleLevel:c,Tag:o,targetId:s}),n({text:a,titleLevel:c,targetId:s,Tag:o,originText:i})})),{catalog:r,html:e}},h=function(e){var t=e.originText,n=e.targetId,r=e.Tag;return Object(o.renderToStaticMarkup)(Object(c.g)(r,{id:n,dangerouslySetInnerHTML:{__html:t}}))};t.a=function(e,t){var n=t.sourceId,i=t.theme,s=t.shouldShowCatalog,u=t.shouldFoldCatalog;if(!e)return e;if(!s)return e;var l=p(e,n,h),d=l.catalog,f=l.html;return d.length?Object(o.renderToStaticMarkup)(Object(c.g)(r.a,{theme:i},Object(c.g)(a.b,{catalog:d,canFold:u}))).concat(f):f}},function(e,t,n){"use strict";n.d(t,"b",(function(){return p}));var r=n(33),o=n.n(r),i=n(43),a=n.n(i),c=(n(1),n(76)),s=n.n(c),u=n(11),l=n.n(u),d=n(41),f=n(5),p=function(e){var t;return"ECOMMERCE"===Object(d.parse)(null===(t=e.split("?"))||void 0===t?void 0:t[1]).BIZ},h=function(e){return Object(f.g)("div",e,Object(f.g)("span",null),Object(f.g)("span",null))},b=function(e){var t=s()(e,["entityType","entityData","newLinkCardAb"]),n=t.target,r=t.url,i=t.image,c=t.imageWidth,u=t.imageHeight,d=t.component,p=t.size,b=t.className,v=a()(t,["target","url","image","imageWidth","imageHeight","component","size","className"]);return Object(f.g)(d,o()({target:n,href:r,"data-draft-node":"block","data-draft-type":"link-card","data-is-ecommerce":"1","data-image":i},c&&{"data-image-width":c},u&&{"data-image-height":u},p&&{"data-size":p},{className:l()("LinkCard",b)},v),Object(f.g)("span",{className:"LinkCard-content LinkCard-ecommerceLoadingCard"},Object(f.g)("div",{className:"LinkCard-ecommerceLoadingCardAvatarWrapper"},Object(f.g)("img",{src:"https://pic2.zhimg.com/v2-1b0bbef27f0496a58468f92d94c8a80e_l.png",className:"LinkCard-ecommerceLoadingCardNetwork"})),Object(f.g)(h,{className:"LinkCard-ecommerceLoadingCardLoadingbar"})))};b.defaultProps={component:"a",target:"_blank"};t.a=b},function(e,t,n){"use strict";n.d(t,"a",(function(){return ue}));var r=n(57),o=n.n(r),i=n(33),a=n.n(i),c=n(43),s=n.n(c),u=n(1),l=n.n(u),d=n(42),f=n(577),p=n.n(f),h=n(28),b=n(235),v=n.n(b),m=n(66),g=n(48),y=n.n(g),O=n(839),j=n(41),w=n.n(j),C=n(20),k=n.n(C),S=n(21),x=n.n(S),R=n(22),E=n.n(R),_=n(23),A=n.n(_),T=n(17),N=n.n(T),I=n(150),M=n(11),D=n.n(M),L=n(39),P=n.n(L),z=n(918),B=n.n(z),F=n(111),U=n.n(F),q=n(5);function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=N()(e);if(t){var o=N()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return A()(this,n)}}var H,K=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:U.a;return function(n){return B()(function(r){E()(i,r);var o=V(i);function i(){var e;k()(this,i);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=o.call.apply(o,[this].concat(r))).key=t(),e}return x()(i,[{key:"render",value:function(){return Object(q.g)(n,a()({},this.props,P()({},e,this.key)))}}]),i}(l.a.Component),n)}},Q=n(993),W=n(211),G=n.n(W),Z=function(e,t){return function(n){var r,o=(r=[],{value:{},listen:function(e){r.push(e)},unlisten:function(e){r=r.filter((function(t){return t!==e}))},emit:function(e){this.value=e,r.forEach((function(t){return t(e)}))}}),i=Object(Q.createSubscription)({getCurrentValue:function(e){return e.value},subscribe:function(e,t){return e.listen(t),function(){return e.unlisten(t)}}}),c=function(e,t){return e?G()(e,(function(e){return function(){return t(e.apply(void 0,arguments))}})):{dispatch:t}}(t,(function(e){return o.emit(e(o.value))})),s=Object.assign((function(t){return Object(q.g)(i,{source:o},(function(r){return Object(q.g)(n,a()({},t,e({value:r,source:o},t),c))}))}),{source:o});return B()(s,n)}};!function(e){e[e.Initial=0]="Initial",e[e.Loading=1]="Loading",e[e.Ok=2]="Ok",e[e.Failed=3]="Failed"}(H||(H={}));var Y=function(e){return Object(q.g)("svg",a()({width:60,height:60,viewBox:"0 0 60 60"},e),Object(q.g)("g",{fill:"none",fillRule:"evenodd"},Object(q.g)("ellipse",{fill:"#000",opacity:.45,cx:30,cy:30,rx:30,ry:30}),Object(q.g)("ellipse",{stroke:"#FFF",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"4,1,4",cx:30,cy:30,rx:26,ry:26}),Object(q.g)("svg",a()({x:16,y:18.5},e),Object(q.g)("path",{d:"M12.842 12.981V11.4H7.64v1.653h3.27v.272c-.018 1.881-1.442 3.147-3.516 3.147-2.382 0-3.876-1.846-3.876-4.834 0-2.936 1.485-4.79 3.832-4.79 1.732 0 2.936.835 3.428 2.364h1.977c-.43-2.566-2.522-4.201-5.405-4.201-3.55 0-5.845 2.601-5.845 6.644 0 4.096 2.268 6.654 5.863 6.654 3.322 0 5.475-2.083 5.475-5.327zM17.518 18V5.317H15.55V18h1.97zm5.142 0v-5.256h5.449v-1.74h-5.45V7.11h5.95V5.317h-7.918V18h1.969z",fill:"#fff"}))))},J=function(e){return Object(q.g)("svg",a()({width:"60px",height:"60px",viewBox:"0 0 60 60",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},e),Object(q.g)("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},Object(q.g)("ellipse",{fill:"#000000",opacity:"0.45",cx:"30",cy:"30",rx:"30",ry:"30"}),Object(q.g)("ellipse",{stroke:"#ffffff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0.5",cx:"30",cy:"30",rx:"26",ry:"26"}),Object(q.g)("ellipse",{stroke:"#ffffff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"4,1,4",cx:"30",cy:"30",rx:"26",ry:"26"},Object(q.g)("animateTransform",{attributeType:"xml",attributeName:"transform",type:"rotate",from:"0 30 30",to:"90 30 30",dur:"0.3s"}),Object(q.g)("animate",{attributeName:"opacity",from:"1",to:"0",dur:"0.3",fill:"freeze"}))),Object(q.g)("svg",{x:"16",y:"18.5"},Object(q.g)("g",{fill:"#ffffff"},Object(q.g)("path",{x:"100",y:"100",d:"M12.8422852,12.9814453 L12.8422852,11.3994141 L7.63916016,11.3994141 L7.63916016,13.0517578 L10.9086914,13.0517578 L10.9086914,13.3242188 C10.8911133,15.2050781 9.46728516,16.4707031 7.39306641,16.4707031 C5.01123047,16.4707031 3.51708984,14.625 3.51708984,11.6367188 C3.51708984,8.70117188 5.00244141,6.84667969 7.34912109,6.84667969 C9.08056641,6.84667969 10.284668,7.68164062 10.7768555,9.2109375 L12.7543945,9.2109375 C12.3237305,6.64453125 10.2319336,5.00976562 7.34912109,5.00976562 C3.79833984,5.00976562 1.50439453,7.61132812 1.50439453,11.6542969 C1.50439453,15.75 3.77197266,18.3076172 7.36669922,18.3076172 C10.6889648,18.3076172 12.8422852,16.2246094 12.8422852,12.9814453 Z M17.5180664,18 L17.5180664,5.31738281 L15.5493164,5.31738281 L15.5493164,18 L17.5180664,18 Z M22.659668,18 L22.659668,12.7441406 L28.1088867,12.7441406 L28.1088867,11.0039062 L22.659668,11.0039062 L22.659668,7.11035156 L28.6098633,7.11035156 L28.6098633,5.31738281 L20.690918,5.31738281 L20.690918,18 L22.659668,18 Z"}))),Object(q.g)("path",{d:"M56,30 C56,15.6405965 44.3594035,4 30,4",stroke:"#FFFFFF",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0",fill:"none"},Object(q.g)("animate",{attributeName:"opacity",from:"0",to:"1",dur:".6",fill:"freeze"}),Object(q.g)("animateTransform",{attributeType:"xml",attributeName:"transform",type:"rotate",from:"0 30 30",to:"360 30 30",dur:"1.625s",repeatCount:"indefinite"})))},$=function(e){return Object(q.g)("svg",a()({width:60,height:60,viewBox:"0 0 60 60"},e),Object(q.g)("g",{fill:"none",fillRule:"evenodd"},Object(q.g)("ellipse",{fill:"#282828",opacity:.45,cx:30,cy:30,rx:30,ry:30}),Object(q.g)("path",{d:"M41.552 18.93A15.954 15.954 0 0 0 30 14c-8.837 0-16 7.163-16 16s7.163 16 16 16c7.811 0 14.315-5.597 15.72-13",stroke:"#FFF",strokeWidth:2,strokeLinecap:"round"}),Object(q.g)("path",{d:"M45.108 16.236c.44-.33.797-.151.797.4v7.005c0 .55-.358.73-.797.4L40.7 20.736c-.44-.33-.439-.866 0-1.195l4.407-3.305z",fill:"#FFF"})))};function X(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=N()(e);if(t){var o=N()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return A()(this,n)}}var ee=function(){return new Promise(requestAnimationFrame)},te=function(e){E()(n,e);var t=X(n);function n(){var e;k()(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).videoEle=null,e.onPlay=function(){var t=e.props.onSuccess;t&&t()},e.onError=function(t){var n=e.props,r=n.onFailed,o=n.gifKey;r&&r(t.target.error),e.props.updateGif({gifKey:o,loadState:H.Failed})},e.handleClick=function(t){var n=e.props,r=n.gifKey,o=n.src,i=n.onLoadStart,a=n.onSuccess,c=n.onFailed,s=n.onClick,u=n.onPlayChange,l=n.loadState,d=n.isPlaying,f=n.videoUrl;if(s&&s(t),u&&u(d),f)return e.videoEle&&(d?e.videoEle.pause():(l===H.Failed&&(e.videoEle.src=e.videoEle.src),e.videoEle.play(),i&&i())),void e.props.updateGif({gifKey:r,isPlaying:!d});e.canPlay?e.props.updateGif({gifKey:r,isPlaying:!d}):l!==H.Loading&&(e.props.updateGif({gifKey:r,loadState:H.Loading}),i&&i(),Promise.all([Object(I.loadImage)(o),ee().then(ee)]).then((function(){a&&a(),e.props.updateGif({gifKey:r,isPlaying:!0,loadState:H.Ok})})).catch((function(t){c&&c(t),e.props.updateGif({gifKey:r,loadState:H.Failed})})))},e}return x()(n,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.isPlaying,r=t.videoUrl;this.videoEle&&n&&r!==e.videoUrl&&this.videoEle.play(),this.videoEle&&this.videoEle.duration&&!n&&(this.videoEle.currentTime=0,this.videoEle.controls=!1,this.videoEle.pause())}},{key:"componentWillUnmount",value:function(){this.props.removeGif({gifKey:this.props.gifKey})}},{key:"render",value:function(){var e,t=this,n=this.props,r=n.poster,o=n.src,i=n.size,a=n.loadState,c=n.isPlaying,s=n.onRef,u=n.videoUrl,l=this.canPlay&&c,d=a===H.Loading,f=a===H.Failed;return d?e=Object(q.g)(J,{className:"GifPlayer-icon"}):f?e=Object(q.g)($,{className:"GifPlayer-icon"}):c||(e=Object(q.g)(Y,{className:"GifPlayer-icon"})),e&&(this.lastIcon=e),Object(q.g)("div",{className:D()("GifPlayer",{isPlaying:c}),"data-size":i,onClick:this.handleClick,ref:s},u&&Object(q.g)("video",{ref:function(e){t.videoEle=e},className:"ztext-gif GifPlayer-gif2mp4",src:u,"data-thumbnail":r,poster:r,"data-size":i,controls:!1,preload:"metadata",loop:!0,muted:!0,onPlay:this.onPlay,onError:this.onError,playsInline:!0}),Object(q.g)("img",{className:D()("ztext-gif",{"GifPlayer-gif2mp4Image":u}),role:"presentation",src:l?o:r,"data-thumbnail":r,"data-size":i}),e||this.lastIcon)}},{key:"canPlay",get:function(){return this.props.loadState===H.Ok}}]),n}(l.a.Component);te.defaultProps={isPlaying:!1,loadState:H.Initial};var ne=K("gifKey")(Z((function(e,t){return e.value[t.gifKey]}),{updateGif:function(e){return function(t){var n=e.gifKey,r=e.isPlaying,o=s()(e,["gifKey","isPlaying"]),i=Object.assign({},t);if(r)for(var a=0,c=Object.keys(i);a<c.length;a++){var u=c[a],l=i[u];u!==n&&l.isPlaying&&(i[u]=Object.assign({},l,{isPlaying:!1}))}return Object.assign({},i,P()({},n,Object.assign({},t[n],{isPlaying:r},o)))}},removeGif:function(e){return function(t){var n=Object.assign({},t);return delete n[e.gifKey],n}}})(te)),re=n(239),oe=function(e){return fetch("https://api.zhihu.com/gif2mp4/".concat(e),{credentials:"include",headers:{"X-Requested-With":"Fetch"}}).then((function(e){return e.json()}))},ie=n(919),ae=n(922),ce=function(e,t){h.a.trackEvent(e,{action:"StatusReport",element:"Card"},{status:{result:t}})},se=function(e,t){var n,r,o;null===(n=window)||void 0===n||null===(r=n.Raven)||void 0===r||null===(o=r.captureException)||void 0===o||o.call(r,e,{fingerprint:["gif2mp4"],extra:t})},ue=function(e){var t=e.src,n=e.useWebP,r=void 0===n?"auto":n,i=e.useMp4,c=void 0!==i&&i,l=e.onRef,d=e.onLoadStateChange,b=s()(e,["src","useWebP","useMp4","onRef","onLoadStateChange"]),g=Object(u.useState)(""),j=o()(g,2),C=j[0],k=j[1],S=Object(u.useState)(null),x=o()(S,2),R=x[0],E=x[1],_=Object(u.useState)(Date.now()),A=o()(_,2),T=A[0],N=A[1],I=Object(u.useState)(!1),M=o()(I,2),D=M[0],L=M[1],P=Object(u.useState)(null),z=o()(P,2),B=z[0],F=z[1],U=Object(ae.a)("animation"),V=Object(u.useCallback)((function(){var e=(Object(f.imgPathParse)(t)||{}).hash;c&&Object(O.onViewedOnce)(R,(function(){oe(e).then((function(e){var t,n,r=e.playlist,o=(null==r||null===(t=r.SD)||void 0===t?void 0:t.play_url)||(null==r||null===(n=r.LD)||void 0===n?void 0:n.play_url);o&&y.a.increment("Gif2Mp4Player.mp4.fetch.success.count"),k(o)})).catch(v.a)}))}),[R,t,c]);Object(u.useEffect)(V,[t,c,R]),Object(u.useEffect)((function(){R&&h.a.setModule(R,{module:"GifItem"})}),[R]),Object(ie.a)(R,(function(){h.a.trackCardShow(R,{element:"Card"})})),Object(m.i)((function(){y.a.increment("Gif2Mp4Player.mp4.play.failure.count"),se(new Error("Gif2Mp4 play timeout"),{src:t,videoUrl:C}),L(!1)}),D?2e3:null),Object(m.i)((function(){y.a.increment("Gif2Mp4Player.mp4.play.success.count"),y.a.timing("Gif2Mp4Player.mp4.first_frame_time",Date.now()-T-100),L(!1),F(null)}),B);var H=p()(t,{extension:("auto"===r?U:r)?"webp":"gif"});return Object(q.g)(ne,a()({videoUrl:C,src:H,onRef:Object(u.useCallback)(Object(re.a)(l,E),[]),onPlayChange:function(e){e||(N(Date.now()),C&&(y.a.increment("Gif2Mp4Player.mp4.click.count"),L(!0)),h.a.trackEvent(R,{action:"Click",element:"Image"}))},onLoadStart:function(){if(C){var e=w.a.parse(C).expiration;e&&Number(e)<Date.now()/1e3+900&&V()}N(Date.now()),d&&d("loadstart",H)},onSuccess:function(){ce(R,"Success"),C?D&&F(100):y.a.timing("Gif2Mp4Player.gif.first_frame_time",Date.now()-T),d&&d("load",H)},onFailed:function(e){ce(R,"Fail"),C&&(D&&(y.a.increment("Gif2Mp4Player.mp4.play.failure.count"),L(!1),F(null)),se(e,{videoUrl:C,src:t})),d&&d("error",H)}},b))},le=function(e){var t=e.dataset,n=t.thumbnail,r={src:n,poster:n,size:t.size},o=document.createElement("div");return o.className="RichText-gifPlaceholder",e.parentNode.replaceChild(o,e),{data:r,target:o}};t.b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.Component,r=void 0===n?ue:n,i=Object(u.useState)(null),c=o()(i,2),s=c[0],l=c[1];return Object(u.useEffect)((function(){if(e){var t=Array.from(e.querySelectorAll("img.origin_image[data-thumbnail],img.content_image[data-thumbnail]"));if(t.length){var n=t.map((function(e){return le(e)})).map((function(e,t){var n=e.data,o=e.target;return Object(d.createPortal)(Object(q.g)(r,a()({key:t},n)),o)}));l(n)}}}),[e]),s}},function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(32),o=n(13),i=n(14),a=n(15),c=n(16),s=n(9),u=n(2),l=n(1),d=n(920),f=n(206);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var o=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var h=function(e){Object(a.a)(n,e);var t=p(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={ref:null},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.tabIndex,o=t.children,i=Object(r.a)(t,["tabIndex","children"]),a=this.state.ref;return Object(u.b)(d.a,Object.assign({tabIndex:n,onRef:function(t){return!e.state.ref&&e.setState({ref:t})}},i,{children:Object(u.b)(f.d.Provider,{value:a,children:o})}))}}]),n}(l.Component);h.defaultProps={tabIndex:0};var b=h},function(e,t,n){"use strict";var r=n(43),o=n.n(r),i=n(33),a=n.n(i),c=n(1),s=n.n(c),u=n(3),l=n.n(u),d=n(11),f=n.n(d),p=n(76),h=n.n(p),b=n(150),v=n(877),m=(n(930),n(5)),g=s.a.forwardRef((function(e,t){if(!e.notCommerce&&Object(v.b)(e.url))return Object(m.g)(v.a,a()({},e,{className:f()("old",e.className)}));var n=h()(e,["entityType","entityData","notCommerce"]),r=n.text,i=n.target,c=n.url,u=n.image,l=n.imageWidth,d=n.imageHeight,p=n.component,g=n.className,y=n.size,O=n.newLinkCardAb,j=n.children,w=o()(n,["text","target","url","image","imageWidth","imageHeight","component","className","size","newLinkCardAb","children"]),C=function(e,t){if(e>0&&t>0){var n=e/t;if(n>1.2)return"180x120";if(n<=.8)return"120x160"}return"ipico"}(l,d),k=Object(b.imgUrl)(u,C);return Object(m.g)(p,a()({ref:t,target:i,href:c,"data-draft-node":"block","data-draft-type":"link-card"},k&&{"data-image":k},l&&{"data-image-width":l},d&&{"data-image-height":d},y&&{"data-size":y},r!==c&&r&&{"data-text":r},{className:f()("LinkCard new",g)},w),j||("3"===O?Object(m.g)(s.a.Fragment,null,Object(m.g)("span",{className:"LinkCard-contents withTitle"},Object(m.g)("span",{className:"LinkCard-title loadingTitle"},r),Object(m.g)("span",{className:"LinkCard-title loading withTitle"}),Object(m.g)("span",{className:"LinkCard-desc loading"})),Object(m.g)("span",{className:"LinkCard-image LinkCard-image--default"})):Object(m.g)(s.a.Fragment,null,Object(m.g)("span",{className:"LinkCard-contents"},Object(m.g)("span",{className:"LinkCard-title loading","data-text":!0}),Object(m.g)("span",{className:"LinkCard-desc loading"})),Object(m.g)("span",{className:"LinkCard-image LinkCard-image--default"}))))}));g.propTypes={component:l.a.oneOfType([l.a.string,l.a.func]),target:l.a.string,url:l.a.string.isRequired,text:l.a.string,image:l.a.string,imageWidth:l.a.oneOfType([l.a.string,l.a.number]),imageHeight:l.a.oneOfType([l.a.string,l.a.number])},g.defaultProps={component:"a",target:"_blank"},t.a=g},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i}));var r=Object.freeze({DOM:{PLAY:"event/dom/play",PLAYING:"event/dom/playing",PAUSE:"event/dom/pause",ENDED:"event/dom/ended",TIMEUPDATE:"event/dom/timeupdate",ERROR:"event/dom/error",WAITING:"event/dom/waiting"},PLAYER:{QUALITY_CHANGE:"event/player/quality-change",REQUEST_PLAY:"event/player/request-play",PLAY_REJECTED:"event/player/play-rejected",REQUEST_PAUSE:"event/player/request-pause",PLAY_COUNT:"event/player/play-count",PLAY_FAILED:"event/player/play-failed",ENTER_FULLSCREEN:"event/player/enter-fullscreen",EXIT_FULLSCREEN:"event/player/exit-fullscreen",ENTER_PIP:"event/player/enter-pip",EXIT_PIP:"event/player/exit-pip"}}),o=Object.freeze({PLAYER:{PLAY:"action/player/play",PAUSE:"action/player/pause",SET_VOLUME:"action/player/set-volume",ENTER_FULLSCREEN:"action/player/enter-fullscreen",EXIT_FULLSCREEN:"action/player/exit-fullscreen",ENTER_PIP:"action/player/enter-pip",EXIT_PIP:"action/player/exit-pip",TIME_UPDATE:"action/player/time-update"}});function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"*",n=arguments.length>2?arguments[2]:void 0;function r(r){function o(o){var i=o.origin||o.originalEvent.origin,a="*"===t||t===i,c=o.data||{},s=c.from,u=c.id,l=c.payload;if(a&&"griffith"===s&&(!n||e===u)&&l){var d=l.messageName,f=l.data;d&&r(d,f,o.source)}}return window.addEventListener("message",o),{unsubscribe:function(){return window.removeEventListener("message",o)}}}function o(n,r,o){n&&n.postMessage&&n.postMessage({from:"griffith",id:e,payload:{messageName:r,data:o}},t||"*")}return{subscribeMessage:r,dispatchMessage:o}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return c}));n(1);var r=n(852),o=n(848),i=n(997),a=n(5),c=/<sup\b([^>]*data-draft-type="reference"[^>]*)>(.*?)<\/sup>/g;t.a=function(e){return function(t){return function(e,t){if(!e)return e;var n=e,s=[];return n=n.replace(c,(function(e,n){var i=Object(o.e)(n,{decodeValue:!0}),c=i["data-text"],u=void 0===c?"":c,l=i["data-url"],d=void 0===l?"":l,f=i["data-numero"],p=t?"ref_".concat(t,"_").concat(f):"ref_".concat(f),h=s.filter((function(e){return e.refKey===p})),b="".concat(p,"_").concat(h.length);s.push({refKey:p,text:u,url:d,numero:f});var v=[u,d].filter(Boolean).join(" ");return Object(r.renderToStaticMarkup)(Object(a.g)("sup",{"data-text":u,"data-url":d,"data-numero":f,"data-draft-node":"inline","data-draft-type":"reference","data-tooltip":v,"data-tooltip-preset":"white","data-tooltip-classname":"ztext-referene-tooltip"},Object(a.g)("a",{id:b,href:"#".concat(p),"data-reference-link":!0,"aria-labelledby":p},"[",f,"]")))})),s.length?n=n.concat(Object(r.renderToStaticMarkup)(Object(a.g)(i.a,{referenceList:s}))):n}(t,e)}}},function(e,t,n){"use strict";var r=n(13),o=n(14),i=n(15),a=n(16),c=n(9),s=n(2),u=n(3),l=n.n(u),d=n(1),f=n(25),p=n(11),h=n.n(p),b=n(1122),v=n.n(b),m=n(235),g=n.n(m),y=n(826),O=n(1321),j=n(1320),w=n(1435),C=n(83),k=n(30),S=n(28),x=n(234),R=n(126),E=n(380),_=n(206),A=n(436),T=n(26),N=n(24);function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}function M(e){return e&&e.startsWith("//")?"https:".concat(e):e}function D(e){return Object.keys(e).map((function(t){return"".concat(t,"=").concat(encodeURIComponent(e[t]))})).join("&")}var L=function(e){Object(i.a)(n,e);var t=I(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={qrCodeUrl:"",url:""},e.togglerRef=Object(d.createRef)(),e.shouldShowMenu=function(){var t=e.props,n=t.onTogglerClick,r=t.disabled;return!1!==n()&&!r},e.handleTogglerClick=function(t){e.shouldShowMenu()?(e.loadQrcodeImage(),e.onShare(t)):t.preventDefault()},e.handleMouseEnter=function(t){e.shouldShowMenu()?(e.loadQrcodeImage(),e.onShare(t)):t.preventDefault()},e.open=function(t){e.shouldShowMenu()&&(e.loadQrcodeImage(),e.menu.popover.open(),e.onShare(t))},e.onShare=function(){var t=e.props,n=t.id,r=t.type,o=t.getShareText,i=t.zaShareId;"live"!==r&&"club"!==r&&o(n,r),S.a.trackEvent(e.togglerRef.current,Object.assign({action:"Share",element:"Button",is_intent:!0,element_name:N.Z[r]},i&&{id:i}))},e.copyLink=function(){var t=e.props,n=t.type,r=t.title,o=t.authorName,i=t.href,a=t.showNotification,c=E.b[n]||"",s=r?"".concat(r," - "):"",u=o&&"匿名用户"!==o&&c?"".concat(o,"的").concat(c," - "):"",l=i?Object(R.toAbsoluteUrl)(i):e.url();v()("".concat(s).concat(u,"知乎\n").concat(M(l))),a("链接复制成功！")},e.url=function(){var t=e.props,n=t.id,r=t.type;return M(Object(R.toAbsoluteUrl)(e.props.url))||"".concat(location.origin,"/").concat(r,"/").concat(n)},e.loadQrcodeImage=function(){var t=e.state.qrCodeUrl;if(!t){var n="".concat(location.protocol,"//www.zhihu.com/"),r=e.url();t="".concat(n,"qrcode?").concat(D({url:"".concat(r).concat("#showWechatShareTip")})),e.setState({qrCodeUrl:t,url:r})}},e.shareToWeibo=function(){var t={appKey:"3063806388"},n=e.props.shareText;n&&(t.title=n);var r="http://service.weibo.com/share/share.php?".concat(D(t));window.open(r,"_blank","width=615,height=505")||(location.href=r)},e}return Object(o.a)(n,[{key:"componentDidUpdate",value:function(e){this.props.positionStatus!==e.positionStatus&&this.menu.popover.close()}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.togglerClassName,o=t.positionStatus,i=t.toggler,a=t.type,c=t.disabled,u=t.placement,l=t.toggleEvent,f=t.stickHover,p=t.children,b=this.state.qrCodeUrl,v=Object(s.c)("div",{className:h()("ShareMenu-toggler",r),children:[b&&Object(s.b)("img",{className:"ShareMenu-fakeQRCode",src:b,alt:"微信二维码"}),Object(d.cloneElement)(i,{onMouseEnter:this.loadQrcodeImage,disabled:c,ref:this.togglerRef})]}),m="hover"===l?{onMouseEnter:this.handleMouseEnter}:{onClick:this.handleTogglerClick};return Object(s.c)(d.Fragment,{children:[Object(s.b)(_.c,{keyMap:{SHARE:"f x"},handlers:{SHARE:this.open}}),Object(s.c)(C.c,Object.assign({className:h()("ShareMenu",n),positionStatus:o,ref:function(t){e.menu=t},toggler:v,placement:u,toggleEvent:l,stickHover:f},m,{children:[Object(s.c)(x.a,{as:C.b,zaType:"Button",zaAction:"Share",zaText:!0,className:"ShareMenu-button",onClick:this.copyLink,children:[Object(s.b)(y.a,{size:20,className:"ShareMenu-Icon--normal",color:"#9FADC7"}),"复制链接"]}),"live"===a||Object(s.c)(x.a,{as:C.b,zaType:"Button",zaAction:"Share",zaText:!0,className:"ShareMenu-button",onClick:this.shareToWeibo,children:[Object(s.b)(O.a,{size:17,className:"ShareMenu-Icon--small"}),"新浪微博"]}),Object(s.c)(C.b,{tag:"div",className:"ShareMenu-wechat",noActive:!0,children:[Object(s.c)(k.c,{className:"ShareMenu-button",preset:"plain",children:[Object(s.b)(j.a,{size:17,className:"ShareMenu-Icon--small",color:"#60C84D"}),"微信扫一扫"]}),Object(s.b)("img",{className:"ShareMenu-qrCode",src:b,alt:"微信二维码"})]}),p]}))]})}}]),n}(d.Component);L.propTypes={toggler:l.a.node,onTogglerClick:l.a.func,zaShareId:l.a.number},L.defaultProps={toggler:Object(s.b)(k.c,{preset:"plain",icon:w.a,label:"分享"}),onTogglerClick:g.a};t.a=Object(f.connect)((function(e,t){var n=t.id,r=t.type,o=e.shareTexts;return{shareText:(null==o?void 0:o["".concat(r).concat(n)])||t.shareText}}),{showNotification:T.h,getShareText:A.b})(L)},function(e,t,n){"use strict";var r=n(13),o=n(14),i=n(15),a=n(16),c=n(9),s=n(2),u=n(3),l=n.n(u),d=n(1),f=n(25),p=n(839),h=n(28);n(885);function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var v=function(e){Object(i.a)(n,e);var t=b(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.zaViewName;Object(p.onViewedOnce)(this.node,(function(){h.a.trackCardShow(null,{id:3613,name:e})}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.theme,r=t.zaViewName,o=t.vipIcon,i=o.nightModeUrl,a=o.url,c="light"===n?a:i;return Object(s.b)("a",{className:"UserLink-vipIcon",href:"https://www.zhihu.com/vip",target:"_blank",rel:"noopener noreferrer",ref:function(t){return e.node=t},"data-za-detail-view-id":3612,"data-za-detail-view-name":r,children:Object(s.b)("img",{src:c,alt:"zhihu vip"})})}}]),n}(d.Component);v.propTypes={vipIcon:l.a.shape({nightModeUrl:l.a.string,url:l.a.string}).isRequired,zaViewName:l.a.string},t.a=Object(f.connect)((function(e){return{theme:e.env.theme}}))(v)},function(e,t,n){},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(32),o=n(2),i=n(11),a=n.n(i),c=n(372),s=n(888),u=n(955),l=n(884),d=n(898);function f(e){var t,n,i=e.className,f=e.showVipIcon,p=e.vipIconZaViewName,h=e.user,b=void 0===h?{}:h,v=e.noBadge,m=e.children,g=e.badgeProps,y=void 0===g?{}:g,O=Object(r.a)(e,["className","showVipIcon","vipIconZaViewName","user","noBadge","children","badgeProps"]),j=Object(s.a)(b),w=j&&!v,C=null===(t=b.vipInfo)||void 0===t?void 0:t.isVip,k=j&&f&&(null===(n=b.vipInfo)||void 0===n?void 0:n.vipIcon);return Object(o.c)("span",{className:a()("UserLink",i),children:[Object(o.b)(d.a,Object.assign({},O,{user:b,children:m||b.name})),w&&Object(o.b)(c.c,Object.assign({css:{marginLeft:".3em"},isOrg:b.isOrg,badge:b.badgeV2||b.badge,linkify:!0,enableTooltip:!0},y)),C&&Object(o.b)(u.a,{css:{marginLeft:".3em"}}),k&&Object(o.b)(l.a,{vipIcon:b.vipInfo.vipIcon,zaViewName:p})]})}},function(e,t,n){"use strict";var r=n(40),o=n(32),i=n(2),a=n(1),c=n(90),s=n(74),u=n(30),l=n(111),d=n.n(l),f=n(369),p=n(405),h=function(e){var t=e.title,n=e.content,l=e.ok,d=e.cancel,p=e.onOk,h=e.onCancel,b=Object(o.a)(e,["title","content","ok","cancel","onOk","onCancel"]),v=Object(a.useState)(!0),m=Object(r.a)(v,2),g=m[0],y=m[1],O=function(e){return function(){y(!1),e()}},j=Object(f.b)();return Object(i.b)(s.b,Object.assign({closeButton:null,maskClosable:!1,hotKeyClosable:!1,css:[{overflow:"hidden",maxWidth:"96vw",".Modal-content":{margin:0,padding:0}},j.Mobile&&{width:320,borderRadius:12,boxShadow:""}]},b,{children:g&&Object(i.c)(c.Box,{px:"36px",py:"24px",children:[t&&Object(i.b)(c.Text,{fontSize:"18px",lineHeight:"28px",fontWeight:"bold",textAlign:"center",children:t}),n&&Object(i.b)(c.Text,{mt:t?"16px":"0",fontSize:"14px",lineHeight:"normal",color:"GBK03A",maxHeight:"calc(67vh - 100px)",css:{wordBreak:"break-all",overflowY:"auto",WebkitOverflowScrolling:"touch",marginRight:-10,paddingRight:10},children:n}),Object(i.c)(c.Flex,{mt:"16px",css:{button:{padding:0,flex:1,height:36,lineHeight:1,fontSize:15,borderRadius:4,":active":{opacity:.6}}},fontWeight:"bold",children:[d&&Object(i.b)(u.c,{css:{marginRight:4},onClick:O(h),children:d}),Object(i.b)(u.c,{preset:"primary",color:"blue",onClick:O(p),children:l})]})]})}))};t.a=function(){var e=Object(p.b)(),t=e.addInstance,n=e.removeInstance,r=function(e){return setTimeout((function(){return n(e)}),300)};return{alert:function(e){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=o.title,c=o.ok;return new Promise((function(r){n=Object(i.b)(h,{content:e,title:a,ok:c||"确定",onOk:r,css:{textAlign:"center"}},d()("modal")),t(n)})).finally((function(){return r(n)}))},confirm:function(e){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=o.title,c=o.ok,s=o.cancel;return new Promise((function(r,o){n=Object(i.b)(h,{content:e,title:a,ok:c||"确定",onOk:r,cancel:s||"取消",onCancel:o},d()("modal")),t(n)})).finally((function(){return r(n)}))}}}},function(e,t,n){"use strict";function r(e){var t=e.id,n=e.name,r=e.urlToken;return"0"===t||"知乎用户"===n?null:Boolean(r||t)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r=n(13),o=n(14),i=n(15),a=n(16),c=n(9),s=n(2),u=n(1),l=n(3),d=n.n(l),f=n(73),p=n.n(f),h=n(394);function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}t.a=function(e){var t=function(t){Object(i.a)(a,t);var n=b(a);function a(){return Object(r.a)(this,a),n.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var t=this.props.currentUser,n=this.context.authRequired,r=void 0===n?function(){}:n;return Object(s.b)(e,Object.assign({isLogin:t&&"guest"!==t.userType,authRequired:r},this.props))}}]),a}(u.Component);return t.contextTypes={authRequired:d.a.func},p()(Object(h.b)(t),e)}},function(e,t,n){"use strict";var r=n(836).OrderedMap,o={createFromArray:function(e){return r(e.map((function(e){return[e.getKey(),e]})))}};e.exports=o},function(e,t,n){"use strict";e.exports=function(e,t,n,r){if(e.size){var o=0;e.reduce((function(e,i,a){return t(e,i)||(n(e)&&r(o,a),o=a),i})),n(e.last())&&r(o,e.count())}}},function(e,t,n){"use strict";e.exports=function(e){return"handled"===e||!0===e}},function(e,t,n){"use strict";var r=n(843);e.exports=function(e,t,n){var o=e.getSelection(),i=e.getCurrentContent(),a=o;if(o.isCollapsed()){if("forward"===n){if(e.isSelectionAtEndOfContent())return i}else if(e.isSelectionAtStartOfContent())return i;if((a=t(e))===o)return i}return r.removeRange(i,a,n)}},function(e,t,n){"use strict";var r=n(13),o=n(14),i=n(15),a=n(16),c=n(9),s=n(2),u=n(3),l=n.n(u),d=n(1),f=n(132),p=n(1092);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var b=function(e){Object(i.a)(n,e);var t=h(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).handlePackup=function(){var t=e.props.onClose;window.scrollTo(0,e.originPageYOffset),t&&t()},e}return Object(o.a)(n,[{key:"componentWillReceiveProps",value:function(e){"bottom"===e.commentPattern&&e.shown&&!this.props.shown&&(this.originPageYOffset=window.pageYOffset)}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.containerClassName,r=e.shown,o=e.showPackupButton,i=e.parent,a=e.commentPattern,c=e.commentInputPosition,u=e.onClose,l=e.byComment,d=e.needLoadCommentPermission,h=e.isMobile,b=e.onOrderChange,v=e.onItemLike,m=e.onPaginationClick,g=e.autoFocus,y=e.onMount,O=e.zaInfo;return r?"bottom"===a?Object(s.b)(p.a,{className:t,containerClassName:n,autoFocus:g,parent:i,commentPattern:a,commentInputPosition:c,showPackupButton:o,handlePackupButton:this.handlePackup,needLoadCommentPermission:d,isMobile:h,onOrderChange:b,onItemLike:v,onPaginationClick:m,onMount:y,zaInfo:O}):Object(s.b)(f.b,{size:"fullPage",onClose:u,maskClosable:!1,children:r&&"fixed"===a&&Object(s.b)(p.a,{className:t,containerClassName:n,parent:i,commentPattern:a,byComment:l,needLoadCommentPermission:d,onOrderChange:b,onItemLike:v,onPaginationClick:m,onMount:y,zaInfo:O})}):null}}]),n}(d.Component);b.propTypes={className:l.a.string,containerClassName:l.a.string,byComment:l.a.oneOfType([l.a.number,l.a.string]),parent:l.a.object,shown:l.a.bool,showPackupButton:l.a.bool,commentPattern:l.a.string,commentInputPosition:l.a.oneOf(["top","bottom"]),onClose:l.a.func,needLoadCommentPermission:l.a.bool,isMobile:l.a.bool,onOrderChange:l.a.func,onItemLike:l.a.func,onPaginationClick:l.a.func,autoFocus:l.a.bool,onMount:l.a.func,zaInfo:l.a.object},b.defaultProps={commentPattern:"fixed",showPackupButton:!0,commentInputPosition:"bottom"},t.a=b},function(e,t,n){"use strict";n.d(t,"w",(function(){return s})),n.d(t,"a",(function(){return je})),n.d(t,"b",(function(){return F})),n.d(t,"c",(function(){return Ce})),n.d(t,"d",(function(){return Oe})),n.d(t,"e",(function(){return Y})),n.d(t,"f",(function(){return he})),n.d(t,"g",(function(){return Te})),n.d(t,"h",(function(){return R})),n.d(t,"i",(function(){return Pe})),n.d(t,"j",(function(){return De})),n.d(t,"k",(function(){return A})),n.d(t,"l",(function(){return T})),n.d(t,"m",(function(){return I})),n.d(t,"n",(function(){return L})),n.d(t,"o",(function(){return K})),n.d(t,"p",(function(){return ye})),n.d(t,"q",(function(){return ge})),n.d(t,"r",(function(){return me})),n.d(t,"s",(function(){return E})),n.d(t,"t",(function(){return ze})),n.d(t,"u",(function(){return _})),n.d(t,"v",(function(){return x})),n.d(t,"x",(function(){return ke})),n.d(t,"y",(function(){return N})),n.d(t,"z",(function(){return Ue})),n.d(t,"A",(function(){return Ke})),n.d(t,"B",(function(){return Ve})),n.d(t,"C",(function(){return Be})),n.d(t,"D",(function(){return He}));var r=n(57),o=n.n(r),i=n(20),a=n.n(i);let c=w();const s=e=>g(e,c);let u=w();s.write=e=>g(e,u);let l=w();s.onStart=e=>g(e,l);let d=w();s.onFrame=e=>g(e,d);let f=w();s.onFinish=e=>g(e,f);let p=[];s.setTimeout=(e,t)=>{let n=s.now()+t,r=()=>{let e=p.findIndex(e=>e.cancel==r);~e&&p.splice(e,1),k.count-=~e?1:0},o={time:n,handler:e,cancel:r};return p.splice(h(n),0,o),k.count+=1,y(),o};let h=e=>~(~p.findIndex(t=>t.time>e)||~p.length);s.cancel=e=>{c.delete(e),u.delete(e)},s.sync=e=>{m=!0,s.batchedUpdates(e),m=!1},s.throttle=e=>{let t;function n(){try{e(...t)}finally{t=null}}function r(...e){t=e,s.onStart(n)}return r.handler=e,r.cancel=()=>{l.delete(n),t=null},r};let b="undefined"!=typeof window?window.requestAnimationFrame:()=>{};s.use=e=>b=e,s.now="undefined"!=typeof performance?()=>performance.now():Date.now,s.batchedUpdates=e=>e(),s.catch=console.error;let v=-1,m=!1;function g(e,t){m?(t.delete(e),e(0)):(t.add(e),y())}function y(){v<0&&(v=0,b(O))}function O(){~v&&(b(O),s.batchedUpdates(j))}function j(){let e=v;v=s.now();let t=h(v);t&&(C(p.splice(0,t),e=>e.handler()),k.count-=t),l.flush(),c.flush(e?Math.min(64,v-e):16.667),d.flush(),u.flush(),f.flush()}function w(){let e=new Set,t=e;return{add(n){k.count+=t!=e||e.has(n)?0:1,e.add(n)},delete:n=>(k.count-=t==e&&e.has(n)?1:0,e.delete(n)),flush(n){t.size&&(e=new Set,k.count-=t.size,C(t,t=>t(n)&&e.add(t)),k.count+=e.size,t=e)}}}function C(e,t){e.forEach(e=>{try{t(e)}catch(e){s.catch(e)}})}const k={count:0,clear(){v=-1,p=[],l=w(),c=w(),d=w(),u=w(),f=w(),k.count=0}};var S=n(1);function x(){}var R=function(e,t,n){return Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})},E={arr:Array.isArray,obj:function(e){return!!e&&"Object"===e.constructor.name},fun:function(e){return"function"==typeof e},str:function(e){return"string"==typeof e},num:function(e){return"number"==typeof e},und:function(e){return void 0===e}};function _(e,t){if(E.arr(e)){if(!E.arr(t)||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return e===t}var A=function(e,t){return e.forEach(t)};function T(e,t,n){for(var r in e)t.call(n,e[r],r)}var N=function(e){return E.und(e)?[]:E.arr(e)?e:[e]};function I(e,t){if(e.size){var n=Array.from(e);e.clear(),A(n,t)}}var M,D,L=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return I(e,(function(e){return e.apply(void 0,n)}))},P=null,z=!1,B=x,F=Object.freeze({__proto__:null,get createStringInterpolator(){return M},get to(){return D},get colors(){return P},get skipAnimation(){return z},get willAdvance(){return B},assign:function(e){e.to&&(D=e.to),e.now&&(s.now=e.now),void 0!==e.colors&&(P=e.colors),null!=e.skipAnimation&&(z=e.skipAnimation),e.createStringInterpolator&&(M=e.createStringInterpolator),e.requestAnimationFrame&&s.use(e.requestAnimationFrame),e.batchedUpdates&&(s.batchedUpdates=e.batchedUpdates),e.willAdvance&&(B=e.willAdvance)}}),U=new Set,q=[],V=[],H=0,K={get idle(){return!U.size&&!q.length},start:function(e){H>e.priority?(U.add(e),s.onStart(Q)):(W(e),s(Z))},advance:Z,sort:function(e){if(H)s.onFrame((function(){return K.sort(e)}));else{var t=q.indexOf(e);~t&&(q.splice(t,1),G(e))}},clear:function(){q=[],U.clear()}};function Q(){U.forEach(W),U.clear(),s(Z)}function W(e){q.includes(e)||G(e)}function G(e){var t,n,r;q.splice((n=function(t){return t.priority>e.priority},(r=(t=q).findIndex(n))<0?t.length:r),0,e)}function Z(e){for(var t=V,n=0;n<q.length;n++){var r=q[n];H=r.priority,r.idle||(B(r),r.advance(e),r.idle||t.push(r))}return H=0,(V=q).length=0,(q=t).length>0}var Y={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},J="[-+]?\\d*\\.?\\d+";function $(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var X=new RegExp("rgb"+$(J,J,J)),ee=new RegExp("rgba"+$(J,J,J,J)),te=new RegExp("hsl"+$(J,"[-+]?\\d*\\.?\\d+%","[-+]?\\d*\\.?\\d+%")),ne=new RegExp("hsla"+$(J,"[-+]?\\d*\\.?\\d+%","[-+]?\\d*\\.?\\d+%",J)),re=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,oe=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,ie=/^#([0-9a-fA-F]{6})$/,ae=/^#([0-9a-fA-F]{8})$/;function ce(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function se(e,t,n){var r=n<.5?n*(1+t):n+t-n*t,o=2*n-r,i=ce(o,r,e+1/3),a=ce(o,r,e),c=ce(o,r,e-1/3);return Math.round(255*i)<<24|Math.round(255*a)<<16|Math.round(255*c)<<8}function ue(e){var t=parseInt(e,10);return t<0?0:t>255?255:t}function le(e){return(parseFloat(e)%360+360)%360/360}function de(e){var t=parseFloat(e);return t<0?0:t>1?255:Math.round(255*t)}function fe(e){var t=parseFloat(e);return t<0?0:t>100?1:t/100}function pe(e){var t,n,r="number"==typeof(t=e)?t>>>0===t&&t>=0&&t<=4294967295?t:null:(n=ie.exec(t))?parseInt(n[1]+"ff",16)>>>0:P&&void 0!==P[t]?P[t]:(n=X.exec(t))?(ue(n[1])<<24|ue(n[2])<<16|ue(n[3])<<8|255)>>>0:(n=ee.exec(t))?(ue(n[1])<<24|ue(n[2])<<16|ue(n[3])<<8|de(n[4]))>>>0:(n=re.exec(t))?parseInt(n[1]+n[1]+n[2]+n[2]+n[3]+n[3]+"ff",16)>>>0:(n=ae.exec(t))?parseInt(n[1],16)>>>0:(n=oe.exec(t))?parseInt(n[1]+n[1]+n[2]+n[2]+n[3]+n[3]+n[4]+n[4],16)>>>0:(n=te.exec(t))?(255|se(le(n[1]),fe(n[2]),fe(n[3])))>>>0:(n=ne.exec(t))?(se(le(n[1]),fe(n[2]),fe(n[3]))|de(n[4]))>>>0:null;if(null===r)return e;var o=(16711680&(r=r||0))>>>16,i=(65280&r)>>>8,a=(255&r)/255;return"rgba(".concat((4278190080&r)>>>24,", ").concat(o,", ").concat(i,", ").concat(a,")")}var he=function e(t,n,r){if(E.fun(t))return t;if(E.arr(t))return e({range:t,output:n,extrapolate:r});if(E.str(t.output[0]))return M(t);var o=t,i=o.output,a=o.range||[0,1],c=o.extrapolateLeft||o.extrapolate||"extend",s=o.extrapolateRight||o.extrapolate||"extend",u=o.easing||function(e){return e};return function(e){var t=function(e,t){for(var n=1;n<t.length-1&&!(t[n]>=e);++n);return n-1}(e,a);return function(e,t,n,r,o,i,a,c,s){var u=s?s(e):e;if(u<t){if("identity"===a)return u;"clamp"===a&&(u=t)}if(u>n){if("identity"===c)return u;"clamp"===c&&(u=n)}if(r===o)return r;if(t===n)return e<=t?r:o;t===-1/0?u=-u:n===1/0?u-=t:u=(u-t)/(n-t);u=i(u),r===-1/0?u=-u:o===1/0?u+=r:u=u*(o-r)+r;return u}(e,a[t],a[t+1],i[t],i[t+1],u,c,s,o.map)}};var be=Symbol.for("FluidValue.get"),ve=Symbol.for("FluidValue.observers"),me=function(e){return Boolean(e&&e[be])},ge=function(e){return e&&e[be]?e[be]():e},ye=function(e){return e[ve]||null};function Oe(e,t){var n=e[ve];n&&n.forEach((function(e){!function(e,t){e.eventObserved?e.eventObserved(t):e(t)}(e,t)}))}var je=function e(t){if(a()(this,e),!t&&!(t=this.get))throw Error("Unknown getter");we(this,t)},we=function(e,t){return xe(e,be,t)};function Ce(e,t){if(e[be]){var n=e[ve];n||xe(e,ve,n=new Set),n.has(t)||(n.add(t),e.observerAdded&&e.observerAdded(n.size,t))}return t}function ke(e,t){var n=e[ve];if(n&&n.has(t)){var r=n.size-1;r?n.delete(t):e[ve]=null,e.observerRemoved&&e.observerRemoved(r,t)}}var Se,xe=function(e,t,n){return Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})},Re=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Ee=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,_e=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,Ae=function(e,t,n,r,o){return"rgba(".concat(Math.round(t),", ").concat(Math.round(n),", ").concat(Math.round(r),", ").concat(o,")")},Te=function(e){Se||(Se=P?new RegExp("(".concat(Object.keys(P).join("|"),")"),"g"):/^\b$/);var t=e.output.map((function(e){return ge(e).replace(Ee,pe).replace(Se,pe)})),n=t.map((function(e){return e.match(Re).map(Number)})),r=n[0].map((function(e,t){return n.map((function(e){if(!(t in e))throw Error('The arity of each "output" value must be equal');return e[t]}))})).map((function(t){return he(Object.assign({},e,{output:t}))}));return function(e){var n=0;return t[0].replace(Re,(function(){return String(r[n++](e))})).replace(_e,Ae)}},Ne="react-spring: ",Ie=function(e){var t=e,n=!1;if("function"!=typeof t)throw new TypeError("".concat(Ne,"once requires a function parameter"));return function(){n||(t.apply(void 0,arguments),n=!0)}},Me=Ie(console.warn);function De(){Me("".concat(Ne,'The "interpolate" function is deprecated in v9 (use "to" instead)'))}var Le=Ie(console.warn);function Pe(){Le("".concat(Ne,'Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead)'))}function ze(e){return E.str(e)&&("#"==e[0]||/\d/.test(e)||e in(P||{}))}var Be=function(e){return Object(S.useEffect)(e,Fe)},Fe=[];function Ue(){var e=Object(S.useState)()[1],t=Object(S.useState)(qe)[0];return Be(t.unmount),function(){t.current&&e({})}}function qe(){var e={current:!0,unmount:function(){return function(){e.current=!1}}};return e}function Ve(e,t){var n=Object(S.useState)((function(){return{inputs:t,result:e()}})),r=o()(n,1)[0],i=Object(S.useRef)(),a=i.current,c=a;c?Boolean(t&&c.inputs&&function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(t,c.inputs))||(c={inputs:t,result:e()}):c=r;return Object(S.useEffect)((function(){i.current=c,a==r&&(r.inputs=r.result=void 0)}),[c]),c.result}function He(e){var t=Object(S.useRef)();return Object(S.useEffect)((function(){t.current=e})),t.current}var Ke="undefined"!=typeof window&&window.document&&window.document.createElement?S.useLayoutEffect:S.useEffect},function(e,t,n){"use strict";var r,o=n(110),i=n.n(o),a=n(1),c=n(3),s=n.n(c),u=n(881),l=n(28),d=new Uint8Array(16);function f(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(d)}var p=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var h=function(e){return"string"==typeof e&&p.test(e)},b=[],v=0;v<256;++v)b.push((v+256).toString(16).substr(1));var m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(b[e[t+0]]+b[e[t+1]]+b[e[t+2]]+b[e[t+3]]+"-"+b[e[t+4]]+b[e[t+5]]+"-"+b[e[t+6]]+b[e[t+7]]+"-"+b[e[t+8]]+b[e[t+9]]+"-"+b[e[t+10]]+b[e[t+11]]+b[e[t+12]]+b[e[t+13]]+b[e[t+14]]+b[e[t+15]]).toLowerCase();if(!h(n))throw TypeError("Stringified UUID is invalid");return n};var g=function(e,t,n){var r=(e=e||{}).random||(e.rng||f)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var o=0;o<16;++o)t[n+o]=r[o];return t}return m(r)},y=n(5);var O={id:10291,name:"开始播放"},j={id:10366,name:"播放暂停"},w={id:10367,name:"播放结束"},C={id:10364,name:"有效播放"},k={id:10365,name:"感兴趣播放"},S={onSixSecond:6,onThreeSecond:3};var x={name:"1mzat5w-VideoWrapper",styles:"width:100%;height:100%;;label:VideoWrapper;"},R=Object(a.forwardRef)((function(e,t){var n=e.src,r=e.className,o=e.iframeProps,c=o.autoplay,s=o.useMSE,d=i()(o,["autoplay","useMSE"]),f="?player=".concat(JSON.stringify({autoplay:c,useMSE:s})),p=function(e){if(!e)return null;var t=new URL(e).pathname.match(/^\/video\/(\d+)$/);return t&&t[1]?t[1]:null}(n),h=Object(a.useRef)(Object(u.c)(p,"*",!0)),b=Object(a.useRef)(null),v=Object(a.useRef)(g()),m=Object(a.useRef)(!1),R=Object(a.useRef)(!1),E=Object(a.useRef)(!1),_=Object(a.useCallback)((function(e,t,n){if("onThreeSecond"===e){if(R.current)return;R.current=!0}if("onSixSecond"===e){if(E.current)return;E.current=!0}if("onEnd"===e){if(m.current)return;m.current=!0}var r=n.currentTime,o=n.duration;l.a.trackEvent(b.current,{id:t.id,action:c?"AutoPlay":"Play",name:t.name},{play:{play_event_identifier:v.current,elapsed:1e3*r,duration:1e3*o},module:[{card:{content:{video_id:p}}}]})}),[c,p]),A=Object(a.useCallback)((function(e,t,n){var r=n.currentTime;Math.floor(r)===S[e]&&_(e,t,n)}),[_]);return Object(a.useEffect)((function(){var e=h.current.subscribeMessage((function(e,t){e===u.b.DOM.PLAY&&_("onPlay",O,t),e===u.b.DOM.PAUSE&&_("onPause",j,t),e===u.b.DOM.ENDED&&_("onEnded",w,t),e===u.b.DOM.TIMEUPDATE&&A("onThreeSecond",C,t),e===u.b.DOM.TIMEUPDATE&&A("onSixSecond",k,t)}));return function(){return e&&e.unsubscribe()}}),[_,A]),Object(y.g)("div",{ref:b,className:r},Object(y.g)("iframe",Object.assign({ref:t,src:"".concat(n).concat(f)},d,{frameBorder:"0",css:x})))}));R.propTypes={className:s.a.string,src:s.a.string.isRequired,iframeProps:s.a.object},R.defaultProps={src:"",iframeProps:{autoplay:!1,useMSE:!1}};var E={video:R},_=Object(a.forwardRef)((function(e,t){var n=e.type,r=void 0===n?"video":n,o=i()(e,["type"]),a=E[r];return Object(y.g)(a,Object.assign({ref:t},o))}));_.propTypes={type:s.a.oneOf(["video"])};t.a=_},function(e,t,n){"use strict";var r=n(13),o=n(14),i=n(15),a=n(16),c=n(9),s=n(2),u=n(3),l=n.n(u),d=n(1),f=n(1397),p=n(30),h=n(28),b=n(367),v=n(206);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var g=function(e){Object(i.a)(n,e);var t=m(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).buttonRef=Object(d.createRef)(),e.handleClick=function(t){var n=e.props,r=n.zaInfos,o=r.toggleComment,i=r.getCommentAction,a=n.positionStatus,c=n.onClick,s=n.commentsShown;if(h.a.trackEvent(e.buttonRef.current,Object.assign({action:i?i(!s):"Comment",element:"Button",is_intent:!0},o&&{id:o})),c){var u="fixed"===a?"fixed":"bottom",l={commentsShown:!e.props.commentsShown,commentsAutoFocus:!(t instanceof KeyboardEvent),commentPattern:u};t instanceof KeyboardEvent&&"bottom"===u&&e.buttonRef.current.focus(),c(t,l)}},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.props.onInstance(this)}},{key:"componentWillUnmount",value:function(){this.props.onInstance(null)}},{key:"render",value:function(){var e,t=this.props,n=t.className,r=t.count,o=t.commentsShown,i=t.commentClosed;o?e="收起评论":e=r&&!i?"".concat(Object(b.formatNumber)(r)," 条评论"):"添加评论";return Object(s.c)(d.Fragment,{children:[Object(s.b)(v.c,{keyMap:{COMMENT:"c"},handlers:{COMMENT:this.handleClick}}),Object(s.b)(p.c,{onRef:this.buttonRef,preset:"plain",className:n,onClick:this.handleClick,icon:f.a,label:e})]})}}]),n}(d.Component);g.propTypes={commentsShown:l.a.bool,count:l.a.number,zaInfos:l.a.shape({id:l.a.number,getCommentAction:l.a.func}),onInstance:l.a.func},g.defaultProps={zaInfos:{},onInstance:function(){return null}};t.a=g},function(e,t,n){"use strict";var r=n(32),o=n(2),i=n(25),a=n(66),c=n(49),s=n(1),u=n(235),l=n.n(u),d=n(34),f=n(63),p=n(28);function h(e,t){var n=e.isPinProfile,i=e.user,c=e.isPinDaily,s=e.onClick,u=void 0===s?l.a:s,h=e.children,b=Object(r.a)(e,["isPinProfile","user","isPinDaily","onClick","children"]),v=i.id,m=i.urlToken,g=i.isOrg,y=i.url,O=i.maskLevel,j="//www.zhihu.com/".concat(g?"org":"people","/").concat(m||v),w="zhihu://pin".concat(y,"/moments"),C=Object(a.c)((function(e){c&&"A"===e.target.nodeName&&p.a.trackEvent(e.target,{id:2065}),n&&(e.preventDefault(),f.a.dispatch("base/openURL",{url:w})),O&&e.preventDefault(),u(e)}));return Object(o.b)(d.Link,Object.assign({ref:t,to:j,target:"_blank",onClick:C,className:"UserLink-link","data-za-detail-view-element_name":"User"},b,{children:h}))}var b=Object(s.forwardRef)(h),v=n(888);t.a=function(e){var t=e.user,s=e.noHoverCard,u=e.noLink,l=e.children,d=Object(r.a)(e,["user","noHoverCard","noLink","children"]),f=t.id,p=t.urlToken,h=!Object(v.a)(t)||u,m=Object(i.useSelector)((function(e){return Object(c.d)(e,{includeTablet:!0})})),g=null!=s?s:m,y=Object(a.d)((function(){return n.e(53).then(n.bind(null,1144))}),!g);if(h)return l||null;var O=Object(o.b)(b,Object.assign({},d,{user:t,children:l}));return g||!y?O:Object(o.b)(y,{toggler:O,id:f,urlToken:p,user:t})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(32),o=n(2),i=n(11),a=n.n(i),c=n(177),s=n(898);function u(e){var t=e.className,n=e.user,i=void 0===n?{}:n,u=e.avatarProps,l=void 0===u?{}:u,d=Object(r.a)(e,["className","user","avatarProps"]),f=i.name,p=i.avatarUrl;return Object(o.b)("span",{className:a()("UserLink",t),children:Object(o.b)(s.a,Object.assign({},d,{user:i,children:Object(o.b)(c.a,Object.assign({className:"UserLink-avatar",url:p,alt:f},l))}))})}},function(e,t,n){"use strict";n.d(t,"b",(function(){return l}));var r=n(39),o=n.n(r),i=n(254),a=n.n(i);function c(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var u={BASIC_STYLING:"basic_styling",LIST_CONTENT:"list_content",BLOCK_CONTENT:"block_content",STRUCTURE_STYLING:"structure_styling",FORMAT_EDITING:"format_editing",MENU:"menu",RIGHT_SIDE:"right_side",BASIC_MEDIA:"basic_media",PROFESSIONAL_MEDIA:"professional_media",CUSTOM_MAIN:"custom_main"},l=function(e){var t,n=Object.values(u).reduce((function(e,t){return Object.assign({},e,o()({},t,[]))}),{}),r=c(e);try{for(r.s();!(t=r.n()).done;){var i=t.value.toolbar;if(a()(i)||Array.isArray(i)){a()(i)&&(i=[i]);var s,l=c(i);try{for(l.s();!(s=l.n()).done;){var d=s.value,f=d.section;n[void 0===f?"custom-main":f].push(d)}}catch(e){l.e(e)}finally{l.f()}}}}catch(e){r.e(e)}finally{r.f()}return n};t.a=u},function(e,t,n){"use strict";n.d(t,"b",(function(){return f}));var r=n(39),o=n.n(r),i=n(254),a=n.n(i),c=n(973),s=n.n(c);function u(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var d={CONTENT_OPERATION:"content_operation",TEXT_STYLE:"text_style",LIST:"list",BLOCK:"block",STRUCTURE_GENERATION:"structure_generation",PROFESSIONAL_MEDIA:"professional_media",BASIC_MEDIA:"basic_media",BUSINESS_MEDIA:"business_media"},f=function(e){var t,n=Object.values(d).reduce((function(e,t){return Object.assign({},e,o()({},t,[]))}),{}),r=[],i=[],c=u(e);try{for(c.s();!(t=c.n()).done;){var l=t.value.toolbarV2;if(a()(l)||Array.isArray(l)){var f,p=u(a()(l)?[l]:l);try{for(p.s();!(f=p.n()).done;){var h=f.value;h.parentName?i.push(h):r.push(h)}}catch(e){p.e(e)}finally{p.f()}}}}catch(e){c.e(e)}finally{c.f()}for(var b=function(){var e=m[v],t=e.section,r=e.parentName,o=n[t];if(r){var i=o.find((function(e){return e.name===r}));if(!i)return"continue";i.childItems||(i.childItems=[]),i.childItems.includes(e)||(i.childItems.push(e),i.childItems=s()(i.childItems,(function(e){var t;return null!==(t=e.priority)&&void 0!==t?t:1/0})))}else o.push(e),o=s()(o,(function(e){var t;return null!==(t=e.priority)&&void 0!==t?t:1/0}));n[t]=o},v=0,m=[].concat(r,i);v<m.length;v++)b();return n};t.a=d},function(e,t,n){},function(e,t){var n=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return n.test(e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return R}));var r=n(33),o=n.n(r),i=n(179),a=n(43),c=n.n(a),s=n(1),u=n.n(s),l=n(90),d=n(1299),f=n(1262),p=n(1300),h=n(11),b=n.n(h),v=n(173),m=n(848),g=n(5);var y={name:"16fhh0i",styles:"&+.Catalog-FirstLevelTitle{margin-top:12px;}&+.Catalog-SecondLevelTitle{margin-top:6px;}"},O={name:"160ybly",styles:"cursor:pointer;align-items:center;"},j=function(e){var t=e.children,n=e.pl,r=e.targetId,a=e.handleScroll,s=e.index,u=c()(e,["children","pl","targetId","handleScroll","index"]);return Object(g.g)(l.Text,o()({flexShrink:0,display:"flex",alignItems:"center",color:"GBK02A",fontSize:"12px",height:"20px",lineHeight:"19px",css:y},u),Object(g.g)(l.Flex,{pl:n,css:O,"data-catalog-target-id":r,"data-za-detail-view-id":"9745","data-za-detail-view-action":"Click","data-za-detail-view-name":"正文",onClick:function(e){a(e,s)}},Object(g.g)(l.Text,{css:Object(i.a)([Object(v.d)(1),{pointerEvents:"none",wordBreak:"break-all"}],""),dangerouslySetInnerHTML:{__html:t}}),Object(g.g)(d.a,{size:"20px",css:function(e){var t;return{color:null===(t=e.colors)||void 0===t?void 0:t.GBK08A,flex:"0 0 auto",pointerEvents:"none"}}})))},w={name:"16fhh0i",styles:"&+.Catalog-FirstLevelTitle{margin-top:12px;}&+.Catalog-SecondLevelTitle{margin-top:6px;}"},C=function(e){var t=e.className,n=c()(e,["className"]);return Object(g.g)(j,o()({className:b()(t,"Catalog-FirstLevelTitle"),fontWeight:"bold",css:w},n))},k={name:"q7f27s",styles:"&+.Catalog-FirstLevelTitle{margin-top:12px;}&+.Catalog-SecondLevelTitle{margin-top:0px;}"},S={name:"4g6ai3",styles:"cursor:pointer;"},x={name:"eg4v4b",styles:"margin-top:1px;"},R=u.a.forwardRef((function(e,t){var n=e.isFold,r=e.onClick,o=n?f.a:p.a,i=n?"展开目录":"收起目录";return Object(g.g)(u.a.Fragment,null,Boolean(n)&&Object(g.g)("div",{className:"bottom-shadow",css:function(e){return{position:"absolute",bottom:"25px",width:"100%",height:"40px",background:"linear-gradient(to bottom, ".concat(e.colorMod(e.colors.GBK99A).alpha(0),", ").concat(e.colors.GBK99A,")")}}}),Object(g.g)(l.Flex,{ref:t,alignItems:"center",justifyContent:"center",height:"25px",fontSize:"12px",color:"GBL05A",css:S,onClick:r},i,Object(g.g)(o,{size:18,css:x})))})),E={1:C,2:function(e){var t=e.className,n=c()(e,["className"]);return Object(g.g)(j,o()({className:b()(t,"Catalog-SecondLevelTitle"),pl:"10px",css:k},n))}},_={name:"7cjcr7",styles:"& .Catalog-wrapper{position:relative;}"},A={name:"npr4z8",styles:"margin-bottom:18px !important;margin-top:0px !important;"};t.b=function(e){var t=e.catalog,n=e.className,r=e.canFold,o=e.inEditor,i=e.scrollOffset,a=void 0===i?0:i,c=r&&!o&&(null==t?void 0:t.length)>3,u=Object(s.useCallback)((function(e,t){if(o){var n=document.querySelector(".DraftEditor-editorContainer");if(n){var r=Array.from(n.querySelectorAll("h2,h3"))[t];r&&requestAnimationFrame((function(){return Object(m.a)(r,a)}))}}}),[o,a]);return(null==t?void 0:t.length)?Object(g.g)(l.Box,{className:b()(n,"Catalog"),mb:"48px",css:_,"data-za-detail-view-name":"正文"},Object(g.g)("h2",{css:A},"目录"),Object(g.g)(l.Box,{className:"Catalog-wrapper"},Object(g.g)(l.Flex,{className:"Catalog-content",flexDirection:"column",fontSize:"12px",overflow:"hidden",height:c?"84px":"auto"},t.map((function(e){var t=e.titleLevel,n=e.text,r=e.targetId,o=e.index,i=E[t]||C;return Object(g.g)(i,{key:String([r,o]),targetId:r,handleScroll:u,index:o},n)}))),Boolean(c)&&Object(g.g)(R,{isFold:!0}))):o?Object(g.g)(l.Flex,{flexDirection:"column",alignItems:"center",mb:"18px"},Object(g.g)(l.Box,{size:"160px",mb:"10px"},Object(g.g)(l.Image,{size:"100%",src:"https://pic1.zhimg.com/v2-acf70e51e6f95a027a65a9209fd6a330_r.png"})),Object(g.g)(l.Text,{color:"GBK06A",fontSize:"17px",lineHeight:"24px",textAlign:"center"},"在内容中设置标题将会在此处同步展示")):null}},,function(e,t,n){"use strict";var r=n(32),o=n(2),i=n(83),a=n(809);t.a=function(e){var t=e.checked,n=e.children,c=Object(r.a)(e,["checked","children"]);return Object(o.c)(i.b,Object.assign({},c,{children:[Object(o.b)("span",{css:{display:"inline-block",width:24,marginLeft:-24},children:t&&Object(o.b)(a.a,{text:!0,center:!0})}),n]}))}},function(e,t,n){"use strict";n.d(t,"b",(function(){return ae})),n.d(t,"a",(function(){return ce}));var r=n(57),o=n.n(r),i=n(1),a=n.n(i),c=n(7),s=n(839),u=n(69),l=n.n(u),d=n(1163),f=n(834),p=n(234),h=n(28),b=n(235),v=n.n(b),m=n(11),g=n.n(m),y=n(994),O=n(33),j=n.n(O),w=n(43),C=n.n(w),k=n(20),S=n.n(k),x=n(21),R=n.n(x),E=n(22),_=n.n(E),A=n(23),T=n.n(A),N=n(17),I=n.n(N),M=n(5);function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I()(e);if(t){var o=I()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return T()(this,n)}}var L=function(e){_()(n,e);var t=D(n);function n(){return S()(this,n),t.apply(this,arguments)}return R()(n,[{key:"render",value:function(){return Object(M.g)("svg",{width:"30",height:"30",viewBox:"0 0 66 66",xmlns:"http://www.w3.org/2000/svg",className:"CircleLoadingBar","aria-hidden":"true"},Object(M.g)("g",null,Object(M.g)("circle",{className:"path",fill:"none",strokeWidth:"6",strokeLinecap:"round",cx:"33",cy:"33",r:"30"})))}}]),n}(i.Component),P=n(1002);var z=function(e){var t=e.className,n=e.url,r=e.source,o=C()(e,["className","url","source"]),i="苏宁"===r?"拼购":"",a="目前".concat(r,"暂不支持在电脑端购买").concat(i,"商品");return Object(M.g)(P.a,j()({className:g()("QRCodeModal",t)},o),Object(M.g)("div",{className:"QRCodeModal-title"},"用知乎 App 扫码查看"),Object(M.g)("div",{className:"QRCodeModal-tip"},a),Object(M.g)("div",{className:"QRCodeModal-qrcode"},Object(M.g)(L,null),Object(M.g)("img",{src:"https://www.zhihu.com/qrcode?url=".concat(encodeURIComponent(n))})))},B=n(179),F=n(173);var U=function(e){return Object(M.g)("svg",j()({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 10 12",fill:"currentColor"},e),Object(M.g)("path",{d:"M5,0 C7.7615,0 10,2.074 10,4.632 C10,8 8.681,9.6805 6.043,11.657 C5.463,12.0915 4.6455,12.1135 4.041,11.722 L3.952,11.66 L3.766,11.5195 C1.2555,9.5815 0,8 0,4.632 C0,2.074 2.2385,0 5,0 Z M5,1.5 C3.0425,1.5 1.5,2.929 1.5,4.632 C1.5,7.1075 2.159,8.3245 4.368,10.0855 L4.672,10.3235 L4.8565,10.463 C4.926,10.508 5.033,10.5115 5.109,10.4765 L5.144,10.4565 C7.708,8.535 8.5,7.2275 8.5,4.631 C8.5,2.9295 6.9575,1.5 5,1.5 Z M5,3 C5.82842712,3 6.5,3.67157288 6.5,4.5 C6.5,5.32842712 5.82842712,6 5,6 C4.17157288,6 3.5,5.32842712 3.5,4.5 C3.5,3.67157288 4.17157288,3 5,3 Z"}))};var q={hotel:"酒店",ticket:"门票"},V=Object.keys(q);var H={name:"1rguia",styles:"display:flex;padding:14px;"},K={name:"1c8iba8",styles:"flex:1;margin-left:12px;overflow:hidden;"},Q={name:"gg4vpm",styles:"display:flex;justify-content:space-between;"},W={name:"zjqrkl",styles:"font-size:12px;line-height:1;vertical-align:1px;"},G={name:"1q27zj9",styles:"flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;"};function Z(e){var t,n,r,o=e.onRef,i=e.data,a=e.titleRightArea,c=i.imgUrl,s=i.title,u=i.priceText,l=i.areaName,d=Object(F.e)();return Object(M.g)("div",{css:H,ref:o},Object(M.g)("img",{src:c,css:Object(B.a)([{width:75,height:100,borderRadius:6,flexShrink:0,objectFit:"cover"},d],"")}),Object(M.g)("div",{css:K},Object(M.g)("div",{css:Q},Object(M.g)("div",{css:function(e){return Object.assign({color:e.colors.GBK02A,fontSize:15,fontWeight:e.fontWeights.bold,lineHeight:1.2,height:36},Object(F.d)(2))}},s),a),Object(M.g)("div",{css:function(e){return{color:e.colors.GBK05A,fontSize:12,marginTop:4,fontWeight:e.fontWeights.bold,height:16,lineHeight:"16px"}}},(n=(t=i).source,r=t.productTypeName,[n,q[r]].filter(Boolean).join(" · "))),Object(M.g)("div",{css:function(e){return{display:"flex",alignItems:"center",color:e.colors.GRD08A,marginTop:8,height:18,lineHeight:"18px"}}},Object(M.g)("div",{css:function(e){return{fontSize:15,fontWeight:e.fontWeights.bold}}},u," ",Object(M.g)("span",{css:W},"起")),Object(M.g)("div",{role:"button",css:function(e){return{marginLeft:"auto",cursor:"pointer",fontSize:13,fontWeight:e.fontWeights.bold}}},"去购买 ",Object(M.g)(f.a,{size:16,center:!0}))),Object(M.g)("div",{css:function(e){return{display:"flex",alignItems:"center",marginTop:2,height:18,lineHeight:1,fontSize:12,color:e.colors.GBK06A,fontWeight:e.fontWeights.bold,overflow:"hidden",transform:"scale(0.92)",transformOrigin:"left"}}},Object(M.g)(U,{width:"12",height:"12",css:Object(B.a)({flexShrink:0,marginTop:-1,marginRight:2},"")}),Object(M.g)("span",{css:G},l))))}var Y=Object(i.forwardRef)((function(e,t){return Object(M.g)(Z,j()({onRef:t},e))})),J={jingdong:"https://zhihu-live.zhimg.com/namespace_1001/static/20210302/49ab350f2a978c498a772cca64bed957.png",taobao:"https://zhihu-live.zhimg.com/namespace_1001/static/20210302/a8b2060a0b5d2c430e35ac415e19799c.png",pinduoduo:"https://zhihu-live.zhimg.com/namespace_1001/static/20210302/32e7577190980fd93efe88e79290ac2a.png",suning:"https://zhihu-live.zhimg.com/namespace_1001/static/20210302/380c2640df67aa0dac0e476f231868bc.png",meituanhotel:"https://zhihu-live.zhimg.com/namespace_1001/static/20210302/84810f4277ac3237497d30dae0ccf6e6.png",youzan:"https://zhihu-live.zhimg.com/namespace_1001/static/20210302/cb99f968d536fa5fcdfb457c08ec8325.png",zhihu:"https://zhihu-live.zhimg.com/namespace_1001/static/20210302/241545a9b1f94a0a9673708a20912fd1.png"};var $=function(e){var t=e.width,n=void 0===t?"16":t,r=e.height,o=void 0===r?"16":r;return Object(M.g)("svg",j()({width:n,height:o,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Object(M.g)("path",{d:"M8.31461 8L5.74555 10.5685C5.41807 10.896 5.41807 11.4269 5.74555 11.7544C6.07302 12.0819 6.60396 12.0819 6.93144 11.7544L10.0929 8.59295C10.2502 8.43572 10.3386 8.22242 10.3386 8C10.3386 7.77758 10.2502 7.56428 10.0929 7.40705L6.93144 4.24561C6.60396 3.91813 6.07302 3.91813 5.74555 4.24561C5.41807 4.57308 5.41807 5.10402 5.74555 5.4315L8.31461 8Z",fill:"#FF7955"}))},X=n(322),ee=n(63);var te=function(e){var t,n,r,o,i,a,s,u,d,h=e.id,b=e.bottomInfo,v=e.type,m=e.scenes,y=e.fetcher,O=l()(null===(t=navigator)||void 0===t?void 0:t.userAgent)||{},j=O.ZhihuHybrid,w=O.Safari,C=O.iOS,k=O.Android,S=function(e){j?ee.a.supportsAction("mcn/openURL").then((function(t){t?ee.a.dispatch("mcn/openURL",{type:v,scenes:m,url:e,fallbackUrl:e}):w?window.location.href=e:window.open(e,"_blank")})):w?window.location.href=e:window.open(e,"_blank")},x=function(e,t){if(e){var n=e.clickUrl,r=e.clickType;if(n){if(t.preventDefault(),t.stopPropagation(),"redirect"!==r)return"linkcard"===r?S(n):void(j?ee.a.dispatch("base/openURL",{url:n}):S(n));y&&y(n).then((function(e){var t=Object(c.camelizeKeys)(e.data)||{},n=t.url,r=t.appSchemaIos,o=t.appSchemaAndroid;S(C?r:k?o:n)}))}}};return Object(M.g)(p.b,{content:{id:h,type:"GoodsRecommend"}},Object(M.g)(p.e,{zaText:!0,as:"div",zaType:"Card",zaBlock:"goodsRecommendCardBottomInfo",className:"BottomInfo"},Object(M.g)(p.a,{as:"div",zaText:!0,zaAction:"OpenUrl",zaBlock:"icon",zaType:"Button",extra:{link:{url:null===(n=b.icon)||void 0===n?void 0:n.clickUrl}},onClick:function(e){return x(b.icon,e)}},Object(M.g)("img",{src:null===(r=b.icon)||void 0===r?void 0:r.iconUrl,alt:""}),Object(M.g)("span",{className:g()({"MCNLinkCard-cardBottom-iconText":"redirect"===(null===(o=b.icon)||void 0===o?void 0:o.clickType)||"linkcard"===(null===(i=b.icon)||void 0===i?void 0:i.clickType)})},null===(a=b.icon)||void 0===a?void 0:a.iconText)),Object(M.g)(p.a,{as:"span",className:"MCNLinkCard-cardBottom-arrowText",zaText:!0,zaAction:"OpenUrl",zaBlock:"text",zaType:"Text",extra:{link:{url:null===(s=b.text)||void 0===s?void 0:s.clickUrl}},onClick:function(e){return x(b.text,e)}},null===(u=b.text)||void 0===u?void 0:u.text,(null===(d=b.text)||void 0===d?void 0:d.clickUrl)&&Object(M.g)(f.a,null))))},ne=function(e){var t=e.id,n=e.skuId,r=e.source,o=e.image,a=e.title,c=e.price,s=void 0===c?"0.00":c,u=e.sourceList,d=void 0===u?[]:u,f=e.bottomInfo,b=e.isContent,v=e.onRef,m=e.scenes,y=e.fetcher,O=Object(X.versionControl)(l.a,{IOS:"7.8.0",ANDROID:"7.4.0"}),j=l()(navigator.userAgent),w=j.Mobile,C=j.Android,k=j.iOS,S=j.ZhihuHybrid,x=w?O&&S&&k?"zhihu://goods/bottom_sheet_hybrid?url=https://www.zhihu.com/grapp/select/method?page=paperBook&paperBookCardId=".concat(t):O&&S&&C?"https://www.zhihu.com/goods/bottom_sheet_hybrid?url=https://www.zhihu.com/grapp/select/method?page=paperBook&paperBookCardId=".concat(t):"https://www.zhihu.com/grapp/select/method?page=paperBook&paperBookCardId=".concat(t):"";Object(i.useEffect)((function(){h.a.trackCardShow(null,{id:10329,path:[{module_name:"".concat(t,"_").concat(n,"_").concat(r)}]})}),[]);return Object(M.g)(p.b,{as:"div",className:"AssociatedCard",block:"polymericCard",content:{type:"GoodsRecommend",id:"".concat(t,"-").concat(n,"-").concat(r)},extra:{link:{url:x}}},Object(M.g)(p.e,{as:"div",ref:v,className:"AssociatedCard-cardContainer",shouldTrackClick:!0,zaType:"Card",zaText:a,zaAction:"OpenUrl",zaEventType:"Click",extra:{link:{url:x}},onClick:function(){h.a.trackEvent(null,{id:10330,action:"OpenUrl",path:[{module_name:"".concat(t,"_").concat(n,"_").concat(r)}]})}},Object(M.g)("div",{className:g()("AssociatedCard-imageBox")},Object(M.g)("img",{className:"AssociatedCard-image",src:o,alt:""})),Object(M.g)("div",{className:"AssociatedCard-main"},Object(M.g)("div",{className:"AssociatedCard-title"},a),Object(M.g)("div",{className:"AssociatedCard-tool"},Object(M.g)("div",{className:"AssociatedCard-price"},Object(M.g)("span",null,s),Object(M.g)("span",{className:"AssociatedCard-priceQi"},"起")),Object(M.g)("div",{className:"AssociatedCard-sources"},d.length&&d.map((function(e,t){return t>2?null:Object(M.g)("img",{key:e,className:"AssociatedCard-sourceLogo",src:J[e],alt:""})})),Object(M.g)("span",{className:"AssociatedCard-sourceLength",style:{display:d.length>3?"inline-flex":"none"}},d.length),Object(M.g)($,{height:21,width:24,size:24,css:function(e){var t;return{color:null===(t=e.colors)||void 0===t?void 0:t.GRD08A}}}))))),f&&b&&Object(M.g)(te,{id:t,bottomInfo:f,type:r,fetcher:y,scenes:m}))},re=Object(i.forwardRef)((function(e,t){return Object(M.g)(ne,j()({onRef:t},e))})),oe=n(3),ie=n.n(oe),ae={CONTENT:0,MENTION_IN_CONTENT:1,SHOWCASE:2,LIVING_THEATER:3},ce={EDITOR:"editor",CONTENT:"content"},se=1,ue={"淘宝":"taobao","天猫":"tmall","京东":"jingdong","京东自营":"jingdongSale","知乎":"zhihu","美团酒旅":"meituanhotel","苏宁":"suning","有赞":"youzan","拼多多":"pinduoduo"};function le(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.trimZero,r=void 0!==n&&n,o=String(e).padStart(2,"0").slice(-2);return r&&"00"===o?"".concat(Math.floor(e/100)):"".concat(Math.floor(e/100),".").concat(o)}function de(e){var t=e.source,n=e.producer,r=e.price,o=e.zhihuVipText,i=e.isInvalidCard;if(null===r)return null;var a="¥ ".concat(le(r)).concat("网络文学"===n?"/千字":"");return o?Object(M.g)("div",{className:"MCNLinkCard-VIPPrice"},Object(M.g)("span",{className:"MCNLinkCard-VIPPriceHint"},o),Object(M.g)("span",{className:"MCNLinkCard-originalPrice"},a)):Object(M.g)("div",{className:g()("MCNLinkCard-price",{"MCNLinkCard-price--invalid":i})},"拼多多"===t&&Object(M.g)("span",{className:"MCNLinkCard-pricePrefix"},"拼团价"),Object(M.g)("span",null,a))}function fe(e,t){var n=Object(i.useState)(null),r=o()(n,2),u=r[0],b=r[1],m=Object(i.useState)(!1),O=o()(m,2),j=O[0],w=O[1],C=e.component,k=void 0===C?"a":C,S=e.id,x=e.scenes,R=void 0===x?ae.CONTENT:x,E=e.className,_=e.onClick,A=e.onMouseDown,T=e.refetchKey,N=e.onData,I=void 0===N?v.a:N,D=e.processResponse,L=e.getUrl,P=e.buttonText,B=e.fetcher,F=void 0===B?y.a:B,U=e.fetcherOptions,q=e.cardShowHandler,H=e.disableZa,K=e.titleRightArea,Q=e.position,W=void 0===Q?ce.CONTENT:Q,G=e.goodsRecommendCards,Z=Object(i.useRef)(null);if(Object(i.useEffect)((function(){if(null!==T)if(G&&G[S])b(Object(c.camelizeKeys)(G[S]));else{var e=L?L(S):"/api/v4/mcn/linkcard/".concat(S,"?scenes=").concat(R);F(e,U).then((function(e){var t=D?D(e):Object(c.camelizeKeys)(e.data);b(t),I(t)})).catch((function(){}))}}),[S,R,b,I,T,L,D,F,U,G]),Object(i.useEffect)((function(){Z.current&&!H&&Object(s.onViewedOnce)(Z.current.parentNode,(function(){var e=u.skuid,t=u.source;h.a.trackCardShow(Z.current.parentNode,{id:6108,path:[{module_name:"".concat(S,"_").concat(e,"_").concat(ue[t])}]},{button:{text:Z.current.parentNode.dataset.zaExtraButtonText}})}))}),[q,u,H,S]),!u)return Object(M.g)(k,{ref:t,className:g()("MCNLinkCard","MCNLinkCard-placeholder",E),"data-draft-node":"block","data-draft-type":"mcn-link-card"});var J=u.url,$=u.skuid,X=u.title,ee=u.imgUrl,ne=u.price,oe=u.source,ie=u.children,fe=u.productTypeName,pe=u.goodsType,he=u.producer,be=u.zhihuButtonText,ve=u.zhihuVipText,me=u.appSchemaAndroid,ge=u.appSchemaIos,ye=u.subtitle,Oe=u.status,je=u.banClick,we=u.description,Ce=u.bottomInfo,ke=u.productType,Se=null,xe="square",Re=P||"去购买",Ee=!0,_e=!1,Ae=!1;(W===ce.EDITOR&&Oe===se||"red_packet"===fe&&je)&&(_e=!0),"有赞"===oe&&"store"===fe&&(Ee=!1,Re="去浏览"),"知乎"===oe&&(Se=he,xe="rectangle",Re=be||"去查看"),"red_packet"===fe&&(Re="去领取",Ee=!1,Ae=!0);var Te=["天猫","京东自营"].includes(oe)?"1":void 0,Ne=V.includes(fe),Ie=ie&&ie.length&&[ue[oe]].concat(ie.map((function(e){return ue[e.source]})))||[],Me=ie&&ie.length&&ie.reduce((function(e,t){return parseInt((null==e?void 0:e.price)||0)>parseInt((null==t?void 0:t.price)||0)?t:e})),De=parseInt((null==Me?void 0:Me.price)||0)>parseInt(ne||0)?parseInt(ne||0):parseInt((null==Me?void 0:Me.price)||0),Le=ie&&ie.length?Object(M.g)(re,{ref:Z,id:S,skuId:$,source:ue[oe],image:ee,title:X,price:"¥ ".concat(le(De)),sourceList:Ie,isContent:W===ce.CONTENT,bottomInfo:Ce,scenes:R,fetcher:F}):Ne?Object(M.g)(Y,{data:u,ref:Z,titleRightArea:K}):Object(M.g)("div",{className:"MCNLinkCard-card",ref:Z},Object(M.g)("div",{className:"MCNLinkCard-cardContainer"},Object(M.g)("div",{className:g()("MCNLinkCard-imageContainer","MCNLinkCard-imageContainer--".concat(xe),{"MCNLinkCard-imageContainer--invalid":_e,"MCNLinkCard-redPacketImageContainer":Ae})},Object(M.g)("img",{className:"MCNLinkCard-image",src:ee,alt:""}),Se&&Object(M.g)("div",{className:"MCNLinkCard-tagInImage"},Se)),Object(M.g)("div",{className:"MCNLinkCard-info"},Object(M.g)("div",{className:"MCNLinkCard-titleContainer"},Object(M.g)("div",{className:g()("MCNLinkCard-title",{"MCNLinkCard-title--invalid":_e,"MCNLinkCard-redPacketTitle":Ae})},X),K),Ae&&we&&Object(M.g)("div",{className:"MCNLinkCard-desc"},we),!Ae&&Object(M.g)("div",{className:g()("MCNLinkCard-source",{"MCNLinkCard-source--invalid":_e})},ye||oe),Object(M.g)("div",{className:"MCNLinkCard-tool"},Object(M.g)("div",{className:"MCNLinkCard-toolLeft"},Ae&&Object(M.g)("div",{className:"MCNLinkCard-redEvenlope-time"},ye),Ee&&Object(M.g)(de,{source:oe,producer:he,price:ne,zhihuVipText:ve,isInvalidCard:_e})),_e?Object(M.g)("div",{className:"MCNLinkCard-invalidButton",role:"button"},Object(M.g)(d.a,{size:17,center:!0}),Object(M.g)("span",null,"已失效")):Object(M.g)("div",{className:"MCNLinkCard-button",role:"button"},Re,Object(M.g)(f.a,{size:24,center:!0}))))),Ce&&W===ce.CONTENT&&Object(M.g)(te,{id:S,bottomInfo:Ce,fetcher:F,type:ue[oe],scenes:R}));return Object(M.g)(a.a.Fragment,null,j&&Object(M.g)(z,{url:J,source:oe,onClose:function(){return w(!1)}}),Object(M.g)(p.b,{block:"goodsRecommendCard",content:{type:"GoodsRecommend",id:"".concat(S,"-").concat($,"-").concat(ue[oe])},extra:{link:{url:J}}},Object(M.g)(p.e,{shouldTrackClick:!0,zaAction:"OpenUrl",zaType:"Card",zaText:X,zaEventType:"Click",as:k,ref:t,className:g()("MCNLinkCard",E),"data-draft-node":"block","data-draft-type":"mcn-link-card","data-mcn-id":S,"data-mcn-skuid":$,"data-mcn-source":oe,"data-mcn-goods-type":pe,"data-mcn-app-schema-android":me,"data-mcn-app-schema-ios":ge,"data-mcn-children":ie&&ie.length||0,"data-za-detail-view-name":S,"data-za-extra-button-text":Te,"data-za-not-track-link":!0,"data-mcn-product-type":ke,href:J,target:"_blank",rel:"noopener noreferrer",onClick:function(e){if(!H&&h.a.trackEvent(e.currentTarget,{id:6208,action:"Click",path:[{module_name:"".concat(S,"_").concat($,"_").concat(ue[oe])}]},{button:{text:e.currentTarget.dataset.zaExtraButtonText}}),Ae&&_e)e.preventDefault();else if(_&&_(e),!e.defaultPrevented){var t=l()(navigator.userAgent),n=t.Tablet,r=t.Mobile;"拼多多"!==oe||n||r||(e.preventDefault(),w(!0)),"苏宁"!==oe||"苏宁拼购"!==pe||n||r||(e.preventDefault(),w(!0))}},onMouseDown:A},Le)))}fe.prototype={component:ie.a.element,id:ie.a.number,className:ie.a.string,onClick:ie.a.func};t.c=a.a.forwardRef(fe)},function(e,t,n){"use strict";n.d(t,"a",(function(){return ge}));var r=n(32),o=n(13),i=n(14),a=n(15),c=n(16),s=n(9),u=n(2),l=n(3),d=n.n(l),f=n(1),p=n(25),h=n(11),b=n.n(h),v=n(30),m=n(853),g=n(1262),y=n(873),O=n(237),j=n(1135),w=n(1018),C=n(378),k=n(839),S=n(1062),x=n(150),R=n(28),E=n(206),_=n(958),A=n(19),T=n(38),N=n.n(T),I=n(52),M=n(812);function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var o=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var L=function(e){Object(a.a)(n,e);var t=D(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.visible,n=e.top,r=e.onSelect,o=e.content,i=this.hintInfo,a=i&&"danger"===i.type;return Object(u.c)("div",{className:b()("SharePopover",{"SharePopover--show":t}),style:{top:n},disabled:a,children:[Object(u.b)("span",{className:"SharePopover-arrow"}),Object(u.c)("div",{className:b()("SharePopover-content",{"SharePopover-content--danger":a}),onClick:function(){a||r(o)},children:[Object(u.b)(M.a,{className:"SharePopover-quote",size:24}),Object(u.b)("span",{className:"SharePopover-main",children:"发送到百科下的摘录"}),i&&Object(u.b)("span",{className:"SharePopover-hint",children:i.text})]})]})}},{key:"hintInfo",get:function(){var e=this.props,t=e.content;if(!e.isCopyable)return{type:"danger",text:"该内容限制转载"};var n=t.length;return n<100?{type:"danger",text:"最少摘录 100 字"}:n>450&&n<=500?{type:"warning",text:"还可以摘录 ".concat(500-n," 字")}:n>500&&{type:"danger",text:"已经超出 ".concat(n-500," 字")}}}]),n}(f.Component);L.propTypes={content:d.a.string,top:d.a.number,visible:d.a.bool};var P=L,z=n(40),B=n(132),F=n(1160),U=n(398);function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var o=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var V=function(e){Object(a.a)(n,e);var t=q(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={topics:[],actived:!1},e.handleChange=function(t){(0,e.props.onChange)(t),e.setState((function(e){return Object.assign({},e,{actived:!1,topics:t})}))},e.deactived=function(){e.setState({actived:!1})},e.toggleActived=function(){e.setState((function(e){return Object.assign({},e,{actived:!e.actived})}))},e.focus=function(){return e.topicsInput&&e.topicsInput.focus()},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.topics,r=t.actived;return Object(u.b)("div",{className:"TopicSelect",children:Object(u.b)(U.a,{actived:r,placeholderNote:" ",max:1,inputProps:{className:"".concat("TopicSelect","-topicInput")},onRef:function(t){e.topicsInput=t},value:n,onChange:this.handleChange,onBlur:this.handleBlur,onToggleActived:this.toggleActived})})}}]),n}(f.Component);function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var o=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var K=function(e){Object(a.a)(n,e);var t=H(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={topics:[]},e.handleChangeTopics=function(t){e.setState((function(e){return Object.assign({},e,{topics:t})}))},e.handleSubmit=function(){var t=Object(z.a)(e.state.topics,1)[0].urlToken;(0,e.props.onSubmit)(t)},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.type,n=e.author,r=e.currentUser,o=e.title,i=e.url,a=e.onClose,c=e.content,s=e.visible;return Object(u.b)(B.b,{onClose:a,size:"large",title:"发送摘录到百科",className:"AbstractForm",children:s&&Object(u.c)(f.Fragment,{children:[Object(u.b)(F.a,{type:t,author:n,member:r,title:o,url:i,content:c,theme:"scroll"}),Object(u.b)(V,{onChange:this.handleChangeTopics}),Object(u.b)("div",{className:"AbstractForm-footer",children:Object(u.b)(v.c,{preset:"primary",color:"blue",disabled:this.disabled,onClick:this.handleSubmit,children:"确定"})})]})})}},{key:"disabled",get:function(){var e=this.state.topics,t=this.props.content;return 0===e.length||""===t}}]),n}(f.Component);K.propTypes={type:d.a.string.isRequired,author:d.a.object,currentUser:d.a.object,title:d.a.string.isRequired,content:d.a.string.isRequired,url:d.a.string.isRequired,visible:d.a.bool.isRequired,onClose:d.a.func.isRequired,onSubmit:d.a.func.isRequired};var Q=n(151),W=n(1101),G=n(250);function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var o=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var Y=function(e){Object(a.a)(n,e);var t=Z(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={popoverVisible:!1,top:0,content:"",abstractModalVisible:!1},e.handlePopoverShow=function(t,n){if(!e.hasAddBaikeSummaryPermission)return null;R.a.trackCardShow(null,{id:6115}),e.setState((function(e){return Object.assign({},e,{top:n,content:t,popoverVisible:!0})}))},e.handlePopoverClose=function(){if(!e.hasAddBaikeSummaryPermission)return null;e.setState((function(e){return Object.assign({},e,{popoverVisible:!1})}))},e.handleAbstractModalClose=function(){e.setState((function(e){return Object.assign({},e,{abstractModalVisible:!1})}))},e.handleAbstractSelected=function(t){R.a.trackEvent(null,{id:6116,action:"Send"}),e.setState((function(e){return Object.assign({},e,{content:t,popoverVisible:!1,abstractModalVisible:!0})}))},e.handleCreateAbstract=function(t){var n=e.props,r=n.type,o=n.objectId,i=n.createAbstract,a=e.state.content;R.a.trackEvent(null,{id:6117,action:"Submit"}),i({type:r,token:o,topicId:t,content:a}).then((function(){e.setState((function(e){return Object.assign({},e,{content:a,popoverVisible:!1,abstractModalVisible:!1})}))}))},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e,t,n;e=this.richContainer,t=this.handlePopoverShow,n=this.handlePopoverClose,e.onmouseup=function(){var r=Object(I.a)(N.a.mark((function r(o){var i,a;return N.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,new Promise((function(e){setTimeout((function(){var t="";t=document.selection?document.selection.createRange().text:document.getSelection(),e(t.toString())}),0)}));case 2:(i=r.sent)?(a=o.target===e?o.offsetY:o.offsetY+o.target.offsetTop+30,t(i,a)):n();case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}},{key:"render",value:function(){var e=this.state,t=e.popoverVisible,n=e.top,r=e.content,o=e.abstractModalVisible,i=this.props,a=i.type,c=i.author,s=i.currentUser,l=i.title,d=i.url,p=i.isCopyable;return this.hasAddBaikeSummaryPermission?Object(u.c)(f.Fragment,{children:[Object(u.b)(P,{top:n,visible:t,content:r,isCopyable:this.isAuthor||p,onBlur:this.handlePopoverClose,onSelect:this.handleAbstractSelected}),Object(u.b)(K,{type:a,onSubmit:this.handleCreateAbstract,author:c,visible:o,onClose:this.handleAbstractModalClose,currentUser:s,title:l,url:d,content:r})]}):null}},{key:"isAuthor",get:function(){var e=this.props,t=e.currentUser,n=e.author;return Object(W.a)(t,n)}},{key:"hasAddBaikeSummaryPermission",get:function(){var e=this.props.currentUser;return e&&e.hasAddBaikeSummaryPermission}},{key:"richContainer",get:function(){var e=this.props,t=e.type,n=e.objectId;return"article"===t?document.querySelector(".Post-RichText"):document.querySelector(".AnswerItem[name='".concat(n,"'] .RichContent-inner"))}}]),n}(f.Component);Y.propTypes={type:d.a.string.isRequired,author:d.a.object.isRequired,currentUser:d.a.object,title:d.a.string.isRequired,url:d.a.string.isRequired,objectId:d.a.number.isRequired,isCopyable:d.a.bool},Y.defaultProps={isCopyable:!0};var J=Object(A.compose)(Object(G.b)(),Object(p.connect)(null,{createAbstract:Q.d}))(Y),$=n(850),X=n(67),ee=n(427),te=n(37),ne=n(944);function re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var o=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var oe=function(e){Object(a.a)(n,e);var t=re(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).state={tipShown:!1,tipContent:"",tipX:0,tipY:0,tipPosition:"bottom"},e.handleMouseDown=e.handleMouseDown.bind(Object(X.a)(e)),e.handleCopy=e.handleCopy.bind(Object(X.a)(e)),e.handleTipClose=e.handleTipClose.bind(Object(X.a)(e)),e.rightClickX=-1,e.rightClickY=-1,e}return Object(i.a)(n,[{key:"getRange",value:function(e){if(e&&e.rangeCount>0)return e.getRangeAt(0)}},{key:"getExtraCopyright",value:function(e,t,n){var r=["作者：".concat(t),"链接：".concat(e),"来源：知乎","著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"],o=["",""];return r=n?r.concat(o):o.concat(r)}},{key:"getCopyText",value:function(e,t,n,r){var o=this.getExtraCopyright(t,n,r).join("\n");return r?o+e:e+o}},{key:"getRangeHtml",value:function(e){var t=document.createElement("div");return t.appendChild(e.cloneContents()),t.outerHTML}},{key:"getCopyHtml",value:function(e,t,n,r){var o=this.getExtraCopyright(t,n,r).join("<br />");return"<div>".concat(r?o+e:e+o,"</div>")}},{key:"randomRange",value:function(e,t){return Math.floor(Math.random()*(t-e)+e)}},{key:"addCopyright",value:function(e,t,n){if(window.getSelection){var r=window.getSelection(),o=this.getRange(r),i=o.toString().trim(),a=this.getRangeHtml(o);if(i&&!(i.length<128)){var c=i.length>=512,s=this.getCopyHtml(a,t,n,c),u=this.getCopyText(i,t,n,c),l=e.nativeEvent.clipboardData;if("object"==typeof l){if(l.setData("text/html",'<meta charset="utf-8">'+s),l.setData("text/plain",u),l.getData("text/plain")&&l.getData("text/plain").length>0)return void e.preventDefault()}var d=document.createElement("div");d.innerHTML=s;var f=d.firstChild;f.style.position="fixed",f.style.left="-9999px",document.body.appendChild(f),r.selectAllChildren(f),setTimeout((function(){document.body.removeChild(f),r.removeAllRanges(),r.addRange(o)}),200)}}}},{key:"showTip",value:function(e,t){if(window.getSelection){var n=window.getSelection(),r=this.getRange(n),o=r.toString().trim(),i=this.randomRange(44,66);if(!(o.length<=i)){e.preventDefault(),e.stopPropagation();var a,c=r.getBoundingClientRect(),s=window.pageYOffset,u=this.rightClickX,l=this.rightClickY,d="bottom";if(-1!==l)a=l+3;else{var f=this.props.viewPort,p=c.top+s,h=c.bottom+s,b=s+f.top+52,v=s+f.bottom-52;h<b?a=b-52:h<v?a=h:(d="top",a=p>b&&p<v?p:v+52)}var m=-1!==u?u+3:c.left+(c.right-c.left)/2-12;this.setState({tipShown:!0,tipContent:t,tipX:m,tipY:a,tipPosition:d}),this.rightClickX=-1,this.rightClickY=-1}}}},{key:"handleTipClose",value:function(){this.setState({tipShown:!1})}},{key:"handleCopy",value:function(e){var t=this.props,n=t.data,r=n.author,o=n.type,i=n.id,a=n.question,c=n.reshipmentSettings,s=n.relationship,l=(s=void 0===s?{}:s).isAuthor,d=s.isAuthorized,f=t.isCurrentUser,p="";if("article"===o?p="https://zhuanlan.zhihu.com/p/".concat(i):"answer"===o&&(p="https://www.zhihu.com/question/".concat(a.id,"/answer/").concat(i)),!f&&!l)switch(c){case"disallowed":this.showTip(e,Object(u.b)("a",{href:"https://www.zhihu.com/term/zhihu-terms#sec-licence-6",children:"禁止转载"}));break;case"need_payment":if(!d){this.showTip(e,Object(u.b)("a",{href:"https://www.zhihu.com/copyright/apply?answer=".concat(i),children:"申请转载"}));break}this.showTip(e,"已获授权，复制成功");default:this.addCopyright(e,p,r.name)}}},{key:"handleMouseDown",value:function(e){3===e.nativeEvent.which&&(this.rightClickX=e.pageX,this.rightClickY=e.pageY)}},{key:"render",value:function(){var e=this.props,t=e.onRef,n=e.data,r=e.tag,o=e.html,i=e.children,a=e.onClick,c=e.className,s=e.itemProp,l=e.style,d=e.prefix,f=e.ecommerce,p=e.shouldUseArticleCard,h=e.shouldShowCatalog,b=e.richContentKey,v=this.state,m=v.tipShown,g=v.tipContent,y=v.tipX,O=v.tipY,j=v.tipPosition;return Object(u.c)("div",{ref:t,onClick:a,className:c,style:l,children:[d,Object(u.b)(ne.a,{richContentKey:b,sourceId:n.id,sourceType:n.type,itemProp:s,tag:r,html:o,onCopy:this.handleCopy,onMouseDown:this.handleMouseDown,className:"CopyrightRichText-richText",ecommerce:f,shouldUseArticleCard:p,shouldShowCatalog:h}),i,Object(u.b)(ee.a,{shown:m,timeout:1e4,hideOnClick:!0,onClose:this.handleTipClose,x:y,y:O,position:j,content:g,className:"CopyrightRichText-tooltip"})]})}}]),n}(f.Component);oe.propTypes={onRef:d.a.func,viewPort:d.a.object};var ie=Object(A.compose)(Object(p.connect)((function(e,t){return{isCurrentUser:Object(te.i)(e,t.data.author)}})))(oe),ae=n(937),ce=n(845),se=n(34),ue=n(371),le=n.n(ue),de=n(367),fe=n(176);function pe(){var e=Object(ce.a)(["发布于",""]);return pe=function(){return e},e}function he(){var e=Object(ce.a)(["编辑于",""]);return he=function(){return e},e}function be(){var e=Object(ce.a)(["发布于",""]);return be=function(){return e},e}function ve(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var o=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var me=function(e){Object(a.a)(n,e);var t=ve(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.href,n=e.created,r=e.updated,o=e.onClick,i=e.videoPlayCount;return Object(u.c)("div",{className:"ContentItem-time",children:[Object(u.b)(se.Link,{to:t,target:"_blank",onClick:o,children:Object(u.b)("span",{"data-tooltip":le()(be(),Object(fe.toAbsoluteDateTimeString)(n)),children:r!==n?le()(he(),Object(fe.toSmartString)(r)):le()(pe(),Object(fe.toSmartString)(n))})}),Boolean(i)&&Object(u.c)("span",{css:{marginTop:10,marginLeft:5},children:["· ",Object(de.cnNiceNumber)(i),"次播放"]})]})}}]),n}(f.Component);me.propTypes={href:d.a.string,created:d.a.number,updated:d.a.number,videoPlayCount:d.a.number,onClick:d.a.func};var ge=me,ye=n(49),Oe=n(437),je=n(981);function we(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var o=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var Ce=/.*?(class="link-box")/;var ke=function(e){Object(a.a)(n,e);var t=we(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state=Object.assign({},e.getInitTruncatedState(e.props),{shouldSticky:!1,offset:0}),e.richContentRef=Object(f.createRef)(),e.truncateContent=function(){var t=e.props.isMobile?400:800,n=e.props.expandedHeight||t;(!e.content||e.content.scrollHeight<n)&&e.setState({isTruncated:!1,isExpanded:!1}),e.content&&e.content.scrollHeight>e.content.offsetHeight&&e.setState({contentCollapsed:!0})},e.updateStateInBrowser=function(){var t=e.props,n=t.excerpt,r=t.allowCollapseWithEmptyExcerpt,o=t.html,i=t.expanded,a=t.cover,c=t.unescapable,s=t.limit,u=t.limitWithImage,l=t.truncateHTMLOptions,d=t.truncateDisabled,f=!0,p=e.state.truncatedContent;if((n||r)&&(Ce.test(n)||d))p=n;else if(!c){var h=a?u:s,b=e.truncate(o,h,l);f=b.isTruncated,p=b.content}return{isTruncated:f,isExpanded:o&&i,truncatedContent:p,previewImg:null}},e.checkOpenInAppStyle=function(e){},e.toggle=function(t){e.isCollapsed()?e.handleExpand(t):e.handleCollapse(t)},e.handleExpand=function(t){var n,r,o=e.props.zaIds.expand;(null==t?void 0:t.target)&&(((null===(r=n=t.target.textContent)||void 0===r?void 0:r.length)>10||t.target.classList.contains("RichContent-inner")||t.target.classList.contains("List-item"))&&(n=null));R.a.trackEvent(e.richContentRef.current,Object.assign({action:"Expand"},n&&{name:n},o&&{id:o}));var i=e.props.onExpand;if(i)i(t);else{var a=e.props,c=a.onToggleExpend,s=a.data,u=s.type,l=s.id;e.context.currentUser&&Object(je.c)("article"===u?"post":u,l,je.a);c&&c(!0),e.setState({isExpanded:!0},(function(){"article"===u&&Object(k.onViewedOnce)(e.richContentRef.current,(function(){R.a.trackEvent(e.richContentRef.current,{action:"ReadFinish"})}))}))}},e.handleCollapse=function(){var t=e.props.onToggleExpend;R.a.trackEvent(e.richContentRef.current,{action:"Collapse",element:"Button"});t&&t(!1),e.setState({isExpanded:!1},(function(){return e.checkOpenInAppStyle(!1)}))},e.handlePreview=function(t){var n=e.state,r=n.isExpanded,o=n.isTruncated&&!r,i=t.target;o||"IMG"!==i.tagName||!i.classList.contains("zh-lightbox-thumb")&&!i.classList.contains("Slideshow-swiperImage")||e.setState({previewImg:i})},e.handlePositionStatusChange=function(t){var n=e.props.onPositionStatusChange;n&&(n(t),e.checkOpenInAppStyle("fixed"===t))},e.handleObserve=function(t){var n=t[0].intersectionRatio;if(n||!document.querySelector("#root").style.position){var r=n>0;r!==e.state.shouldSticky&&(e.setState({shouldSticky:r}),r||e.checkOpenInAppStyle(!1))}},e.handleTrunObserve=function(t){var n=e.props,r=n.data,o=(r.type,r.id,n.updateReadStatus,t[0]),i=o.intersectionRatio,a=o.isIntersecting;e.truncateComputed||(i>0||a)&&(setTimeout((function(){return e.truncateContent()})),e.truncateComputed=!0)},e.isCollapsed=function(){var t=e.props,n=t.after,r=t.before,o=t.unescapable,i=e.state,a=i.isExpanded,c=i.isTruncated;return!r&&!n||o?c&&!a:!a},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.setState(Object.assign({},this.updateStateInBrowser(),{viewPort:{top:148,bottom:window.innerHeight-56}})),Object(k.onViewedOnce)(this.richContentRef.current,(function(){var t=e.props,n=t.data,r=n.type,o=n.id,i=t.expanded;e.context.currentUser&&i&&Object(je.c)("article"===r?"post":r,o,je.a)})),this.props.imperativeRef&&(this.props.imperativeRef.current={handleExpand:this.handleExpand.bind(this)})}},{key:"componentWillReceiveProps",value:function(e){this.props.data.id!==e.data.id&&this.setState(this.getInitTruncatedState(e))}},{key:"componentWillUpdate",value:function(e,t){if(this.state.isExpanded&&!t.isExpanded){var n=this.richContentRef.current.getBoundingClientRect();n.top<this.props.topExcludedHeight&&(this.rect=n,this.scroll=window.pageYOffset)}}},{key:"componentDidUpdate",value:function(e,t){if(t.isExpanded&&!this.state.isExpanded&&this.rect){var n=this.rect,r=n.top,o=n.bottom,i=n.height,a=this.richContentRef.current.offsetHeight,c=window.innerHeight,s=o<c?a-i:r-(c-a);window.scrollTo(0,this.scroll+s),this.rect=null,this.scroll=null}}},{key:"componentWillUnmount",value:function(){this.props.imperativeRef&&(this.props.imperativeRef.current=null)}},{key:"getInitTruncatedState",value:function(e){var t=e.excerpt,n=e.html,r=e.expanded,o=e.unescapable;return{isTruncated:t.length<=n.length,isExpanded:r,truncatedContent:o?n:t,previewImg:null}}},{key:"truncate",value:function(e,t,n){var r=Object(S.truncateHTML)(e,t,n);return{isTruncated:r.isTruncated,content:r.content}}},{key:"renderActions",value:function(){var e=this,t=this.props,n=t.children,r=t.unescapable,o=t.noCollapsed,i=t.expandText,a=void 0===i?"展开阅读全文":i,c=t.onClick,s=t.videoData,l=t.needExpandArrow,d=void 0===l||l,f=this.state,p=f.isExpanded,h=f.isTruncated,b=f.shouldSticky,m=f.offset;if(!p)return[r&&h&&!s&&Object(u.c)(v.c,{preset:"plain",className:"ContentItem-rightButton ContentItem-expandButton",onClick:c||this.handleExpand,children:[a,d&&Object(u.b)(g.a,{className:"ContentItem-arrowIcon",center:!0})]},"expand-button"),n&&Object(u.b)($.a,{children:n},"actions")];var y=(n||!o)&&Object(u.c)($.a,{className:"RichContent-actions",children:[n,!o&&Object(u.c)(v.c,{"data-zop-retract-question":!0,preset:"plain",className:"ContentItem-rightButton",onClick:this.handleCollapse,children:[Object(u.b)("span",{className:"RichContent-collapsedText",children:"收起"}),Object(u.b)(g.a,{className:"ContentItem-arrowIcon is-active",center:!0})]})]});return b&&y?Object(u.b)(O.a,{offset:m,bottom:!0,container:function(){return e.richContentRef.current.parentNode},onPositionStatusChange:this.handlePositionStatusChange,children:y}):y}},{key:"renderText",value:function(){var e=this,t=this.props,n=t.html,r=t.excerpt,o=t.data,i=t.itemProp,a=void 0===i?"text":i,c=t.expandText,s=void 0===c?"阅读全文":c,l=t.onClick,d=t.prefix,f=t.unescapable,p=(t.isSearchContent,t.collapsedHeight),h=t.ecommerce,m=t.canAbstract,O=t.shouldUseArticleCard,w=t.richContentKey,k=this.state,S=k.truncatedContent,x=k.previewImg,R=k.viewPort,E=k.contentCollapsed,A=k.isExpanded,T=this.isCollapsed(),N=S||r,I="answer"===o.type?Object(j.a)(n):n,M=T?N:I,D={},L=Object(u.c)(ie,Object.assign({richContentKey:w&&String([w,T]),itemProp:a,className:b()("RichContent-inner",{"RichContent-inner--collapsed":E}),style:T&&f?{maxHeight:p}:null,tag:"span",onRef:function(t){e.content=t},data:o,html:M,viewPort:R,prefix:d},T&&{onClick:l||this.handleExpand},D,{ecommerce:h,shouldUseArticleCard:O,shouldShowCatalog:Object(_.a)(o)&&(A||f&&!T),children:[m&&Object(u.b)(J,Object.assign({},this.abstractProps)),!f&&T&&Object(u.c)(v.c,{preset:"plain",className:"ContentItem-more",children:[s,Object(u.b)(g.a,{className:"ContentItem-arrowIcon",center:!0})]}),x&&Object(u.b)(y.a,{img:x,onClose:function(){return e.setState({previewImg:null})}})]}),T);return f?Object(u.b)(C.a,{rootMargin:"200px 0px 200px 0px",onObserve:this.handleTrunObserve,children:L}):L}},{key:"render",value:function(){var e=this.props,t=e.unescapable,r=e.after,o=e.before,i=e.extra,a=e.cover,c=e.hasVideo,s=e.renderCanExpandExtra,l=e.className,d=e.videoData,p=e.handleClickVideoMoreButton,h=e.duration,v=e.isVideoAnswer,m=this.state.isExpanded,g=this.isCollapsed(),y=d?Object(u.c)(f.Fragment,{children:[Object(u.b)(ae.a,{data:d}),Object(u.b)("p",{className:"RichContent-videoMore",onClick:p,children:"点击查看全文"})]}):this.renderText(),O=m?Object(u.b)(C.a,{rootMargin:"-".concat(240,"px 0px"),onObserve:this.handleObserve,children:y}):y;return Object(u.c)("div",{className:b()("RichContent",l,{"is-collapsed":g,"RichContent--unescapable":t}),ref:this.richContentRef,onClick:this.handlePreview,children:[Object(u.b)(E.c,{keyMap:{TOGGLE_EXPAND:"o"},handlers:{TOGGLE_EXPAND:this.toggle}}),!g&&o,!t&&g&&a&&Object(u.b)(n.Cover,{url:a,hasVideo:c,onClick:this.handleExpand,duration:h,isVideoAnswer:v}),O,i||"function"==typeof s&&s(m,this.handleExpand),!g&&r,this.renderActions()]})}},{key:"abstractProps",get:function(){var e=this.props.data;return{objectId:e.id,type:e.type,author:e.author,title:e.question.title,url:e.url,isCopyable:e.isCopyable}}}]),n}(f.Component);ke.contextTypes={currentUser:d.a.object},ke.propTypes={enableConvert:d.a.bool,unescapable:d.a.bool,expanded:d.a.bool,noCollapsed:d.a.bool,limit:d.a.number,limitWithImage:d.a.number,collapsedHeight:d.a.number,html:d.a.string,excerpt:d.a.string,allowCollapseWithEmptyExcerpt:d.a.bool,truncateDisabled:d.a.bool,before:d.a.node,after:d.a.node,prefix:d.a.node,extra:d.a.node,renderCanExpandExtra:d.a.func,topExcludedHeight:d.a.number,onPositionStatusChange:d.a.func,type:d.a.string,data:d.a.object,canAbstract:d.a.bool,cover:d.a.string,hasVideo:d.a.bool,truncateHTMLOptions:d.a.object,expandText:d.a.string,onToggleExpend:d.a.func,videoData:d.a.object,handleClickVideoMoreButton:d.a.func,zaIds:d.a.shape({expand:d.a.number})},ke.defaultProps={limit:160,limitWithImage:100,expanded:!1,unescapable:!1,topExcludedHeight:60,excerpt:"",allowCollapseWithEmptyExcerpt:!1,hasVideo:!1,isVideoAnswer:!1,data:{},collapsedHeight:400,zaIds:{}},ke.Cover=function(e){var t=e.url,n=e.hasVideo,o=e.duration,i=e.isVideoAnswer,a=Object(r.a)(e,["url","hasVideo","duration","isVideoAnswer"]);return Object(u.c)("div",Object.assign({className:b()("RichContent-cover",{"RichContent-cover--mobile":!1})},a,{children:[Object(u.c)("div",{className:"RichContent-cover-inner",children:[Object(u.b)(w.a,{thumbnail:Object(x.imgUrl)(t,"60w"),url:Object(x.imgUrl)(t,"400x224"),alt:"cover"}),o&&Object(u.b)("div",{className:"RichContent-cover-mask"}),o&&Object(u.b)("div",{className:"RichContent-cover-duration",children:o})]}),i&&Object(u.b)("img",{css:{position:"absolute",left:0,top:0,width:"64px",height:"18px",objectFit:"cover"},src:"https://pic1.zhimg.com/80/v2-c19ceba4b1bea7204cb67e27f469c95b_1440w.png"}),n&&Object(u.b)(m.a,{className:"RichContent-cover-play"})]}))};t.b=Object(p.connect)((function(e){return{isMobile:Object(ye.d)(e)}}),{updateReadStatus:Oe.b})(ke)},function(e,t,n){"use strict";var r=n(57),o=n.n(r),i=n(33),a=n.n(i),c=n(43),s=n.n(c),u=n(1),l=n.n(u),d=n(234),f=n(76),p=n.n(f),h=n(929),b=n(880),v=n(38),m=n.n(v),g=n(572),y=n.n(g),O=n(66),j=n(77),w=n.n(j),C=n(20),k=n.n(C),S=n(21),x=n.n(S),R=n(7),E=n(318),_=n.n(E),A=function(){function e(t){var n=this;k()(this,e),this.fetch=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n.url||(n.url=e),e!==n.url)throw new Error("mismatch url\n".concat(e,"\n").concat(n.url),e,n.url);return new Promise((function(e,r){n.addToQueue({options:t,resolve:e,reject:r})}))},this.instance=null,this.customFetch=t,this.delay=200,this.maxDelay=1e3,this.url="",this.queueMaxLength=10,this.queue=[],this.startTime=Date.now(),this.timeout=null,this.initialized=!1}var t;return x()(e,[{key:"initConfig",value:function(e){var t=e.delay,n=e.maxDelay,r=e.maxBatchCount;t&&(this.delay=t),n&&(this.maxDelay=n),r&&(this.maxBatchCount=r),this.initialized=!0}},{key:"buildFetchParams",value:function(e){var t=o()(e,1)[0].options,n=e.reduce((function(e,t){var n,r;return(null===(n=(r=t.options).dataBuilder)||void 0===n?void 0:n.call(r,e,t))||e}),{}),r=this.url,i=!t.method||"GET"===t.method.toUpperCase();if(i){var a=_()(r,!0);a.query=Object.assign({},a.query,{},n),r=a.toString()}return[r,Object.assign({},t,{data:i?null:Object.assign({},t.data,{},n)})]}},{key:"doFetch",value:(t=y()(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.queue.length){e.next=2;break}return e.abrupt("return");case 2:return t=this.queue,this.queue=[],e.prev=4,e.next=7,this.customFetch.apply(this,w()(this.buildFetchParams(t)));case 7:n=e.sent,t.forEach((function(e){var t=e.options,r=e.resolve;t.resultBuilder?r(t.resultBuilder(n)):r(n)})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),t.forEach((function(t){return t.reject(e.t0)}));case 14:case"end":return e.stop()}}),e,this,[[4,11]])}))),function(){return t.apply(this,arguments)})},{key:"addToQueue",value:function(e){var t=this;this.initialized||this.initConfig(e.options),clearTimeout(this.timeout),(Date.now()-this.startTime>this.maxDelay||this.queue.length>=this.maxBatchCount)&&(this.startTime=Date.now(),this.doFetch()),this.queue.push(e),setTimeout((function(){t.startTime=Date.now(),t.doFetch()}),this.delay)}}]),e}(),T=null,N=function(e){return function(t,n){return T||(T=new A(e)),T.fetch(t,n)}}(function(e){return function(){var t=y()(m.a.mark((function t(n,r){var o;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(n,r);case 2:return o=t.sent,t.t0=R.camelizeKeys,t.next=6,o.json();case 6:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}(fetch)),I={},M=function(e){var t=Object(u.useRef)(0),n=e.inEditor,r=e["data-offset-key"],i=e["data-text"],a=e["data-image"],c=e.href,s=Object(u.useState)((function(){return n&&I[r]||null})),l=o()(s,2),d=l[0],f=l[1],p=Object(O.e)({once:!0}),h=o()(p,2),b=h[0],v=h[1],g=Object(O.c)((function(e){var t=e||d;if(!t||0===Object.keys(t).length)return{objectType:null,title:i||c,thumbnail:a};t.title=i||t.title||c,t.thumbnail=a||t.thumbnail;var o=Object.assign({},t,{cached:!0});return n&&(I[r]=o),o})),j=Object(O.c)(y()(m.a.mark((function e(){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.current+=1,e.prev=1,e.next=4,N("/api/v4/link_card_infos",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"},dataBuilder:function(e){return e.urls="".concat(e.urls?e.urls+",":"").concat(c),e},resultBuilder:function(e){return e[c]}});case 4:n=e.sent,f(g(n)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t.current<=1?j():f(g());case 11:case"end":return e.stop()}}),e,null,[[1,8]])}))));return Object(u.useEffect)((function(){!v||d&&d.cached||j()}),[v,d,j]),Object(u.useEffect)((function(){n&&f(g())}),[n,g,i,a]),[b,d]},D=n(916),L=n(239),P=n(5),z={answer:"Answer",article:"Column",zvideo:"Zvideo",question:"Question",collection:"Collection",roundtable:"Roundtable",topic:"Topic"},B=l.a.forwardRef((function(e,t){var n=p()(e,["zvideoLinkCardProps"]),r=n.inEditor,i=n["data-text"],c=n.href,l=n.newLinkCardAb,f=n.zaBlock,v=s()(n,["inEditor","data-text","href","newLinkCardAb","zaBlock"]),m=Object(u.useRef)(),g=M(e),y=o()(g,2),O=y[0],j=y[1],w=Object(D.a)(e,m,"zvideo"===(null==j?void 0:j.objectType)),C=w.handleImageClick,k=w.handleInfoClick,S=Object(u.useCallback)(Object(L.a)(t,O,m),[]),x=r?h.d:d.a,R=r?null:{as:h.d,shouldTrackShow:!0,zaText:!0,zaType:"Button",zaAction:"OpenUrl",zaBlock:f,extra:{link:{url:c}},"data-za-module":"Content"},E=Object(P.g)(x,a()({},R,{url:c,data:j,onClick:k,onClickImage:C,newLinkCardAb:l}));return"3"===l?Object(P.g)(d.b,{content:{type:z[null==j?void 0:j.objectType]||"Unknown"}},Object(P.g)(b.a,a()({ref:S,text:i,url:c,component:"a",newLinkCardAb:l},v),Boolean(j)&&E)):Object(P.g)(b.a,a()({ref:S,text:i,url:c,component:"a",newLinkCardAb:l},v),Boolean(j)&&Object(P.g)(d.b,{content:{type:z[j.objectType]||"Unknown"}},E))}));t.a=B},function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var r=n(20),o=n.n(r),i=n(21),a=n.n(i),c=n(22),s=n.n(c),u=n(23),l=n.n(u),d=n(17),f=n.n(d),p=n(3),h=n.n(p),b=n(1),v=n(378),m=n(5);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var o=f()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l()(this,n)}}var y=function(e){s()(n,e);var t=g(n);function n(){var e;o()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={shown:!1},e.handleObserve=function(t){(t[0].isIntersecting||t[0].intersectionRatio>0)&&e.setState({shown:!0})},e}return a()(n,[{key:"render",value:function(){var e=this.props,t=e.placeholder,n=e.rootMargin,r=e.children;return this.state.shown?r:Object(m.g)(v.a,{rootMargin:n,onObserve:this.handleObserve,threshold:[0,.1]},t||Object(m.g)("div",{style:{height:"1px"}}))}}]),n}(b.Component);y.propTypes={placeholder:h.a.element,rootMargin:h.a.string},y.defaultProps={rootMargin:"200px"};var O=y},function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return c}));var r=n(982),o=n.n(r),i=n(24);function a(e){if("number"!=typeof e)return null;var t=Math.floor(e/60),n=Math.floor(e%60);return"".concat(String(t),":").concat(o()(String(n),2,"0"))}function c(e,t){var n=Array.from(e).filter((function(e){return i.a.VIDEO.some((function(t){return e.name.toLowerCase().endsWith(t)}))}));return 0===n.length?{errMsg:"视频格式不支持",abortUpload:!0}:!t&&n.length>1?{errMsg:"一次仅能上传一个视频，请分开上传",abortUpload:!1,validFiles:[n[0]]}:{errMsg:null,abortUpload:!1,validFiles:n}}},function(e,t,n){(function(e,r){var o;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var i="Expected a function",a="__lodash_placeholder__",c=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],s="[object Arguments]",u="[object Array]",l="[object Boolean]",d="[object Date]",f="[object Error]",p="[object Function]",h="[object GeneratorFunction]",b="[object Map]",v="[object Number]",m="[object Object]",g="[object RegExp]",y="[object Set]",O="[object String]",j="[object Symbol]",w="[object WeakMap]",C="[object ArrayBuffer]",k="[object DataView]",S="[object Float32Array]",x="[object Float64Array]",R="[object Int8Array]",E="[object Int16Array]",_="[object Int32Array]",A="[object Uint8Array]",T="[object Uint16Array]",N="[object Uint32Array]",I=/\b__p \+= '';/g,M=/\b(__p \+=) '' \+/g,D=/(__e\(.*?\)|\b__t\)) \+\n'';/g,L=/&(?:amp|lt|gt|quot|#39);/g,P=/[&<>"']/g,z=RegExp(L.source),B=RegExp(P.source),F=/<%-([\s\S]+?)%>/g,U=/<%([\s\S]+?)%>/g,q=/<%=([\s\S]+?)%>/g,V=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,H=/^\w*$/,K=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Q=/[\\^$.*+?()[\]{}|]/g,W=RegExp(Q.source),G=/^\s+|\s+$/g,Z=/^\s+/,Y=/\s+$/,J=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,$=/\{\n\/\* \[wrapped with (.+)\] \*/,X=/,? & /,ee=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,te=/\\(\\)?/g,ne=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,re=/\w*$/,oe=/^[-+]0x[0-9a-f]+$/i,ie=/^0b[01]+$/i,ae=/^\[object .+?Constructor\]$/,ce=/^0o[0-7]+$/i,se=/^(?:0|[1-9]\d*)$/,ue=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,le=/($^)/,de=/['\n\r\u2028\u2029\\]/g,fe="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",pe="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",he="[\\ud800-\\udfff]",be="["+pe+"]",ve="["+fe+"]",me="\\d+",ge="[\\u2700-\\u27bf]",ye="[a-z\\xdf-\\xf6\\xf8-\\xff]",Oe="[^\\ud800-\\udfff"+pe+me+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",je="\\ud83c[\\udffb-\\udfff]",we="[^\\ud800-\\udfff]",Ce="(?:\\ud83c[\\udde6-\\uddff]){2}",ke="[\\ud800-\\udbff][\\udc00-\\udfff]",Se="[A-Z\\xc0-\\xd6\\xd8-\\xde]",xe="(?:"+ye+"|"+Oe+")",Re="(?:"+Se+"|"+Oe+")",Ee="(?:"+ve+"|"+je+")"+"?",_e="[\\ufe0e\\ufe0f]?"+Ee+("(?:\\u200d(?:"+[we,Ce,ke].join("|")+")[\\ufe0e\\ufe0f]?"+Ee+")*"),Ae="(?:"+[ge,Ce,ke].join("|")+")"+_e,Te="(?:"+[we+ve+"?",ve,Ce,ke,he].join("|")+")",Ne=RegExp("['’]","g"),Ie=RegExp(ve,"g"),Me=RegExp(je+"(?="+je+")|"+Te+_e,"g"),De=RegExp([Se+"?"+ye+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[be,Se,"$"].join("|")+")",Re+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[be,Se+xe,"$"].join("|")+")",Se+"?"+xe+"+(?:['’](?:d|ll|m|re|s|t|ve))?",Se+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",me,Ae].join("|"),"g"),Le=RegExp("[\\u200d\\ud800-\\udfff"+fe+"\\ufe0e\\ufe0f]"),Pe=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ze=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Be=-1,Fe={};Fe[S]=Fe[x]=Fe[R]=Fe[E]=Fe[_]=Fe[A]=Fe["[object Uint8ClampedArray]"]=Fe[T]=Fe[N]=!0,Fe[s]=Fe[u]=Fe[C]=Fe[l]=Fe[k]=Fe[d]=Fe[f]=Fe[p]=Fe[b]=Fe[v]=Fe[m]=Fe[g]=Fe[y]=Fe[O]=Fe[w]=!1;var Ue={};Ue[s]=Ue[u]=Ue[C]=Ue[k]=Ue[l]=Ue[d]=Ue[S]=Ue[x]=Ue[R]=Ue[E]=Ue[_]=Ue[b]=Ue[v]=Ue[m]=Ue[g]=Ue[y]=Ue[O]=Ue[j]=Ue[A]=Ue["[object Uint8ClampedArray]"]=Ue[T]=Ue[N]=!0,Ue[f]=Ue[p]=Ue[w]=!1;var qe={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ve=parseFloat,He=parseInt,Ke="object"==typeof e&&e&&e.Object===Object&&e,Qe="object"==typeof self&&self&&self.Object===Object&&self,We=Ke||Qe||Function("return this")(),Ge=t&&!t.nodeType&&t,Ze=Ge&&"object"==typeof r&&r&&!r.nodeType&&r,Ye=Ze&&Ze.exports===Ge,Je=Ye&&Ke.process,$e=function(){try{var e=Ze&&Ze.require&&Ze.require("util").types;return e||Je&&Je.binding&&Je.binding("util")}catch(e){}}(),Xe=$e&&$e.isArrayBuffer,et=$e&&$e.isDate,tt=$e&&$e.isMap,nt=$e&&$e.isRegExp,rt=$e&&$e.isSet,ot=$e&&$e.isTypedArray;function it(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function at(e,t,n,r){for(var o=-1,i=null==e?0:e.length;++o<i;){var a=e[o];t(r,a,n(a),e)}return r}function ct(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function st(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function ut(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function lt(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i}function dt(e,t){return!!(null==e?0:e.length)&&jt(e,t,0)>-1}function ft(e,t,n){for(var r=-1,o=null==e?0:e.length;++r<o;)if(n(t,e[r]))return!0;return!1}function pt(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}function ht(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}function bt(e,t,n,r){var o=-1,i=null==e?0:e.length;for(r&&i&&(n=e[++o]);++o<i;)n=t(n,e[o],o,e);return n}function vt(e,t,n,r){var o=null==e?0:e.length;for(r&&o&&(n=e[--o]);o--;)n=t(n,e[o],o,e);return n}function mt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var gt=St("length");function yt(e,t,n){var r;return n(e,(function(e,n,o){if(t(e,n,o))return r=n,!1})),r}function Ot(e,t,n,r){for(var o=e.length,i=n+(r?1:-1);r?i--:++i<o;)if(t(e[i],i,e))return i;return-1}function jt(e,t,n){return t==t?function(e,t,n){var r=n-1,o=e.length;for(;++r<o;)if(e[r]===t)return r;return-1}(e,t,n):Ot(e,Ct,n)}function wt(e,t,n,r){for(var o=n-1,i=e.length;++o<i;)if(r(e[o],t))return o;return-1}function Ct(e){return e!=e}function kt(e,t){var n=null==e?0:e.length;return n?Et(e,t)/n:NaN}function St(e){return function(t){return null==t?void 0:t[e]}}function xt(e){return function(t){return null==e?void 0:e[t]}}function Rt(e,t,n,r,o){return o(e,(function(e,o,i){n=r?(r=!1,e):t(n,e,o,i)})),n}function Et(e,t){for(var n,r=-1,o=e.length;++r<o;){var i=t(e[r]);void 0!==i&&(n=void 0===n?i:n+i)}return n}function _t(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function At(e){return function(t){return e(t)}}function Tt(e,t){return pt(t,(function(t){return e[t]}))}function Nt(e,t){return e.has(t)}function It(e,t){for(var n=-1,r=e.length;++n<r&&jt(t,e[n],0)>-1;);return n}function Mt(e,t){for(var n=e.length;n--&&jt(t,e[n],0)>-1;);return n}function Dt(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}var Lt=xt({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),Pt=xt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function zt(e){return"\\"+qe[e]}function Bt(e){return Le.test(e)}function Ft(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function Ut(e,t){return function(n){return e(t(n))}}function qt(e,t){for(var n=-1,r=e.length,o=0,i=[];++n<r;){var c=e[n];c!==t&&c!==a||(e[n]=a,i[o++]=n)}return i}function Vt(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function Ht(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function Kt(e){return Bt(e)?function(e){var t=Me.lastIndex=0;for(;Me.test(e);)++t;return t}(e):gt(e)}function Qt(e){return Bt(e)?function(e){return e.match(Me)||[]}(e):function(e){return e.split("")}(e)}var Wt=xt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Gt=function e(t){var n,r=(t=null==t?We:Gt.defaults(We.Object(),t,Gt.pick(We,ze))).Array,o=t.Date,fe=t.Error,pe=t.Function,he=t.Math,be=t.Object,ve=t.RegExp,me=t.String,ge=t.TypeError,ye=r.prototype,Oe=pe.prototype,je=be.prototype,we=t["__core-js_shared__"],Ce=Oe.toString,ke=je.hasOwnProperty,Se=0,xe=(n=/[^.]+$/.exec(we&&we.keys&&we.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Re=je.toString,Ee=Ce.call(be),_e=We._,Ae=ve("^"+Ce.call(ke).replace(Q,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Te=Ye?t.Buffer:void 0,Me=t.Symbol,Le=t.Uint8Array,qe=Te?Te.allocUnsafe:void 0,Ke=Ut(be.getPrototypeOf,be),Qe=be.create,Ge=je.propertyIsEnumerable,Ze=ye.splice,Je=Me?Me.isConcatSpreadable:void 0,$e=Me?Me.iterator:void 0,gt=Me?Me.toStringTag:void 0,xt=function(){try{var e=ei(be,"defineProperty");return e({},"",{}),e}catch(e){}}(),Zt=t.clearTimeout!==We.clearTimeout&&t.clearTimeout,Yt=o&&o.now!==We.Date.now&&o.now,Jt=t.setTimeout!==We.setTimeout&&t.setTimeout,$t=he.ceil,Xt=he.floor,en=be.getOwnPropertySymbols,tn=Te?Te.isBuffer:void 0,nn=t.isFinite,rn=ye.join,on=Ut(be.keys,be),an=he.max,cn=he.min,sn=o.now,un=t.parseInt,ln=he.random,dn=ye.reverse,fn=ei(t,"DataView"),pn=ei(t,"Map"),hn=ei(t,"Promise"),bn=ei(t,"Set"),vn=ei(t,"WeakMap"),mn=ei(be,"create"),gn=vn&&new vn,yn={},On=Ri(fn),jn=Ri(pn),wn=Ri(hn),Cn=Ri(bn),kn=Ri(vn),Sn=Me?Me.prototype:void 0,xn=Sn?Sn.valueOf:void 0,Rn=Sn?Sn.toString:void 0;function En(e){if(Ha(e)&&!Ia(e)&&!(e instanceof Nn)){if(e instanceof Tn)return e;if(ke.call(e,"__wrapped__"))return Ei(e)}return new Tn(e)}var _n=function(){function e(){}return function(t){if(!Va(t))return{};if(Qe)return Qe(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function An(){}function Tn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}function Nn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function In(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Mn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Dn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ln(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Dn;++t<n;)this.add(e[t])}function Pn(e){var t=this.__data__=new Mn(e);this.size=t.size}function zn(e,t){var n=Ia(e),r=!n&&Na(e),o=!n&&!r&&Pa(e),i=!n&&!r&&!o&&$a(e),a=n||r||o||i,c=a?_t(e.length,me):[],s=c.length;for(var u in e)!t&&!ke.call(e,u)||a&&("length"==u||o&&("offset"==u||"parent"==u)||i&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||ci(u,s))||c.push(u);return c}function Bn(e){var t=e.length;return t?e[Lr(0,t-1)]:void 0}function Fn(e,t){return ki(go(e),Zn(t,0,e.length))}function Un(e){return ki(go(e))}function qn(e,t,n){(void 0!==n&&!_a(e[t],n)||void 0===n&&!(t in e))&&Wn(e,t,n)}function Vn(e,t,n){var r=e[t];ke.call(e,t)&&_a(r,n)&&(void 0!==n||t in e)||Wn(e,t,n)}function Hn(e,t){for(var n=e.length;n--;)if(_a(e[n][0],t))return n;return-1}function Kn(e,t,n,r){return er(e,(function(e,o,i){t(r,e,n(e),i)})),r}function Qn(e,t){return e&&yo(t,Oc(t),e)}function Wn(e,t,n){"__proto__"==t&&xt?xt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Gn(e,t){for(var n=-1,o=t.length,i=r(o),a=null==e;++n<o;)i[n]=a?void 0:bc(e,t[n]);return i}function Zn(e,t,n){return e==e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e}function Yn(e,t,n,r,o,i){var a,c=1&t,u=2&t,f=4&t;if(n&&(a=o?n(e,r,o,i):n(e)),void 0!==a)return a;if(!Va(e))return e;var w=Ia(e);if(w){if(a=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&ke.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!c)return go(e,a)}else{var I=ri(e),M=I==p||I==h;if(Pa(e))return fo(e,c);if(I==m||I==s||M&&!o){if(a=u||M?{}:ii(e),!c)return u?function(e,t){return yo(e,ni(e),t)}(e,function(e,t){return e&&yo(t,jc(t),e)}(a,e)):function(e,t){return yo(e,ti(e),t)}(e,Qn(a,e))}else{if(!Ue[I])return o?e:{};a=function(e,t,n){var r=e.constructor;switch(t){case C:return po(e);case l:case d:return new r(+e);case k:return function(e,t){var n=t?po(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case S:case x:case R:case E:case _:case A:case"[object Uint8ClampedArray]":case T:case N:return ho(e,n);case b:return new r;case v:case O:return new r(e);case g:return function(e){var t=new e.constructor(e.source,re.exec(e));return t.lastIndex=e.lastIndex,t}(e);case y:return new r;case j:return o=e,xn?be(xn.call(o)):{}}var o}(e,I,c)}}i||(i=new Pn);var D=i.get(e);if(D)return D;i.set(e,a),Za(e)?e.forEach((function(r){a.add(Yn(r,t,n,r,e,i))})):Ka(e)&&e.forEach((function(r,o){a.set(o,Yn(r,t,n,o,e,i))}));var L=w?void 0:(f?u?Wo:Qo:u?jc:Oc)(e);return ct(L||e,(function(r,o){L&&(r=e[o=r]),Vn(a,o,Yn(r,t,n,o,e,i))})),a}function Jn(e,t,n){var r=n.length;if(null==e)return!r;for(e=be(e);r--;){var o=n[r],i=t[o],a=e[o];if(void 0===a&&!(o in e)||!i(a))return!1}return!0}function $n(e,t,n){if("function"!=typeof e)throw new ge(i);return Oi((function(){e.apply(void 0,n)}),t)}function Xn(e,t,n,r){var o=-1,i=dt,a=!0,c=e.length,s=[],u=t.length;if(!c)return s;n&&(t=pt(t,At(n))),r?(i=ft,a=!1):t.length>=200&&(i=Nt,a=!1,t=new Ln(t));e:for(;++o<c;){var l=e[o],d=null==n?l:n(l);if(l=r||0!==l?l:0,a&&d==d){for(var f=u;f--;)if(t[f]===d)continue e;s.push(l)}else i(t,d,r)||s.push(l)}return s}En.templateSettings={escape:F,evaluate:U,interpolate:q,variable:"",imports:{_:En}},En.prototype=An.prototype,En.prototype.constructor=En,Tn.prototype=_n(An.prototype),Tn.prototype.constructor=Tn,Nn.prototype=_n(An.prototype),Nn.prototype.constructor=Nn,In.prototype.clear=function(){this.__data__=mn?mn(null):{},this.size=0},In.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},In.prototype.get=function(e){var t=this.__data__;if(mn){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return ke.call(t,e)?t[e]:void 0},In.prototype.has=function(e){var t=this.__data__;return mn?void 0!==t[e]:ke.call(t,e)},In.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=mn&&void 0===t?"__lodash_hash_undefined__":t,this},Mn.prototype.clear=function(){this.__data__=[],this.size=0},Mn.prototype.delete=function(e){var t=this.__data__,n=Hn(t,e);return!(n<0)&&(n==t.length-1?t.pop():Ze.call(t,n,1),--this.size,!0)},Mn.prototype.get=function(e){var t=this.__data__,n=Hn(t,e);return n<0?void 0:t[n][1]},Mn.prototype.has=function(e){return Hn(this.__data__,e)>-1},Mn.prototype.set=function(e,t){var n=this.__data__,r=Hn(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Dn.prototype.clear=function(){this.size=0,this.__data__={hash:new In,map:new(pn||Mn),string:new In}},Dn.prototype.delete=function(e){var t=$o(this,e).delete(e);return this.size-=t?1:0,t},Dn.prototype.get=function(e){return $o(this,e).get(e)},Dn.prototype.has=function(e){return $o(this,e).has(e)},Dn.prototype.set=function(e,t){var n=$o(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Ln.prototype.add=Ln.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Ln.prototype.has=function(e){return this.__data__.has(e)},Pn.prototype.clear=function(){this.__data__=new Mn,this.size=0},Pn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Pn.prototype.get=function(e){return this.__data__.get(e)},Pn.prototype.has=function(e){return this.__data__.has(e)},Pn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Mn){var r=n.__data__;if(!pn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Dn(r)}return n.set(e,t),this.size=n.size,this};var er=wo(sr),tr=wo(ur,!0);function nr(e,t){var n=!0;return er(e,(function(e,r,o){return n=!!t(e,r,o)})),n}function rr(e,t,n){for(var r=-1,o=e.length;++r<o;){var i=e[r],a=t(i);if(null!=a&&(void 0===c?a==a&&!Ja(a):n(a,c)))var c=a,s=i}return s}function or(e,t){var n=[];return er(e,(function(e,r,o){t(e,r,o)&&n.push(e)})),n}function ir(e,t,n,r,o){var i=-1,a=e.length;for(n||(n=ai),o||(o=[]);++i<a;){var c=e[i];t>0&&n(c)?t>1?ir(c,t-1,n,r,o):ht(o,c):r||(o[o.length]=c)}return o}var ar=Co(),cr=Co(!0);function sr(e,t){return e&&ar(e,t,Oc)}function ur(e,t){return e&&cr(e,t,Oc)}function lr(e,t){return lt(t,(function(t){return Fa(e[t])}))}function dr(e,t){for(var n=0,r=(t=co(t,e)).length;null!=e&&n<r;)e=e[xi(t[n++])];return n&&n==r?e:void 0}function fr(e,t,n){var r=t(e);return Ia(e)?r:ht(r,n(e))}function pr(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":gt&&gt in be(e)?function(e){var t=ke.call(e,gt),n=e[gt];try{e[gt]=void 0;var r=!0}catch(e){}var o=Re.call(e);r&&(t?e[gt]=n:delete e[gt]);return o}(e):function(e){return Re.call(e)}(e)}function hr(e,t){return e>t}function br(e,t){return null!=e&&ke.call(e,t)}function vr(e,t){return null!=e&&t in be(e)}function mr(e,t,n){for(var o=n?ft:dt,i=e[0].length,a=e.length,c=a,s=r(a),u=1/0,l=[];c--;){var d=e[c];c&&t&&(d=pt(d,At(t))),u=cn(d.length,u),s[c]=!n&&(t||i>=120&&d.length>=120)?new Ln(c&&d):void 0}d=e[0];var f=-1,p=s[0];e:for(;++f<i&&l.length<u;){var h=d[f],b=t?t(h):h;if(h=n||0!==h?h:0,!(p?Nt(p,b):o(l,b,n))){for(c=a;--c;){var v=s[c];if(!(v?Nt(v,b):o(e[c],b,n)))continue e}p&&p.push(b),l.push(h)}}return l}function gr(e,t,n){var r=null==(e=vi(e,t=co(t,e)))?e:e[xi(Bi(t))];return null==r?void 0:it(r,e,n)}function yr(e){return Ha(e)&&pr(e)==s}function Or(e,t,n,r,o){return e===t||(null==e||null==t||!Ha(e)&&!Ha(t)?e!=e&&t!=t:function(e,t,n,r,o,i){var a=Ia(e),c=Ia(t),p=a?u:ri(e),h=c?u:ri(t),w=(p=p==s?m:p)==m,S=(h=h==s?m:h)==m,x=p==h;if(x&&Pa(e)){if(!Pa(t))return!1;a=!0,w=!1}if(x&&!w)return i||(i=new Pn),a||$a(e)?Ho(e,t,n,r,o,i):function(e,t,n,r,o,i,a){switch(n){case k:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case C:return!(e.byteLength!=t.byteLength||!i(new Le(e),new Le(t)));case l:case d:case v:return _a(+e,+t);case f:return e.name==t.name&&e.message==t.message;case g:case O:return e==t+"";case b:var c=Ft;case y:var s=1&r;if(c||(c=Vt),e.size!=t.size&&!s)return!1;var u=a.get(e);if(u)return u==t;r|=2,a.set(e,t);var p=Ho(c(e),c(t),r,o,i,a);return a.delete(e),p;case j:if(xn)return xn.call(e)==xn.call(t)}return!1}(e,t,p,n,r,o,i);if(!(1&n)){var R=w&&ke.call(e,"__wrapped__"),E=S&&ke.call(t,"__wrapped__");if(R||E){var _=R?e.value():e,A=E?t.value():t;return i||(i=new Pn),o(_,A,n,r,i)}}if(!x)return!1;return i||(i=new Pn),function(e,t,n,r,o,i){var a=1&n,c=Qo(e),s=c.length,u=Qo(t).length;if(s!=u&&!a)return!1;var l=s;for(;l--;){var d=c[l];if(!(a?d in t:ke.call(t,d)))return!1}var f=i.get(e),p=i.get(t);if(f&&p)return f==t&&p==e;var h=!0;i.set(e,t),i.set(t,e);var b=a;for(;++l<s;){d=c[l];var v=e[d],m=t[d];if(r)var g=a?r(m,v,d,t,e,i):r(v,m,d,e,t,i);if(!(void 0===g?v===m||o(v,m,n,r,i):g)){h=!1;break}b||(b="constructor"==d)}if(h&&!b){var y=e.constructor,O=t.constructor;y==O||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof O&&O instanceof O||(h=!1)}return i.delete(e),i.delete(t),h}(e,t,n,r,o,i)}(e,t,n,r,Or,o))}function jr(e,t,n,r){var o=n.length,i=o,a=!r;if(null==e)return!i;for(e=be(e);o--;){var c=n[o];if(a&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++o<i;){var s=(c=n[o])[0],u=e[s],l=c[1];if(a&&c[2]){if(void 0===u&&!(s in e))return!1}else{var d=new Pn;if(r)var f=r(u,l,s,e,t,d);if(!(void 0===f?Or(l,u,3,r,d):f))return!1}}return!0}function wr(e){return!(!Va(e)||(t=e,xe&&xe in t))&&(Fa(e)?Ae:ae).test(Ri(e));var t}function Cr(e){return"function"==typeof e?e:null==e?Qc:"object"==typeof e?Ia(e)?_r(e[0],e[1]):Er(e):ts(e)}function kr(e){if(!fi(e))return on(e);var t=[];for(var n in be(e))ke.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Sr(e){if(!Va(e))return function(e){var t=[];if(null!=e)for(var n in be(e))t.push(n);return t}(e);var t=fi(e),n=[];for(var r in e)("constructor"!=r||!t&&ke.call(e,r))&&n.push(r);return n}function xr(e,t){return e<t}function Rr(e,t){var n=-1,o=Da(e)?r(e.length):[];return er(e,(function(e,r,i){o[++n]=t(e,r,i)})),o}function Er(e){var t=Xo(e);return 1==t.length&&t[0][2]?hi(t[0][0],t[0][1]):function(n){return n===e||jr(n,e,t)}}function _r(e,t){return ui(e)&&pi(t)?hi(xi(e),t):function(n){var r=bc(n,e);return void 0===r&&r===t?vc(n,e):Or(t,r,3)}}function Ar(e,t,n,r,o){e!==t&&ar(t,(function(i,a){if(o||(o=new Pn),Va(i))!function(e,t,n,r,o,i,a){var c=gi(e,n),s=gi(t,n),u=a.get(s);if(u)return void qn(e,n,u);var l=i?i(c,s,n+"",e,t,a):void 0,d=void 0===l;if(d){var f=Ia(s),p=!f&&Pa(s),h=!f&&!p&&$a(s);l=s,f||p||h?Ia(c)?l=c:La(c)?l=go(c):p?(d=!1,l=fo(s,!0)):h?(d=!1,l=ho(s,!0)):l=[]:Wa(s)||Na(s)?(l=c,Na(c)?l=ac(c):Va(c)&&!Fa(c)||(l=ii(s))):d=!1}d&&(a.set(s,l),o(l,s,r,i,a),a.delete(s));qn(e,n,l)}(e,t,a,n,Ar,r,o);else{var c=r?r(gi(e,a),i,a+"",e,t,o):void 0;void 0===c&&(c=i),qn(e,a,c)}}),jc)}function Tr(e,t){var n=e.length;if(n)return ci(t+=t<0?n:0,n)?e[t]:void 0}function Nr(e,t,n){t=t.length?pt(t,(function(e){return Ia(e)?function(t){return dr(t,1===e.length?e[0]:e)}:e})):[Qc];var r=-1;return t=pt(t,At(Jo())),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(Rr(e,(function(e,n,o){return{criteria:pt(t,(function(t){return t(e)})),index:++r,value:e}})),(function(e,t){return function(e,t,n){var r=-1,o=e.criteria,i=t.criteria,a=o.length,c=n.length;for(;++r<a;){var s=bo(o[r],i[r]);if(s){if(r>=c)return s;var u=n[r];return s*("desc"==u?-1:1)}}return e.index-t.index}(e,t,n)}))}function Ir(e,t,n){for(var r=-1,o=t.length,i={};++r<o;){var a=t[r],c=dr(e,a);n(c,a)&&Ur(i,co(a,e),c)}return i}function Mr(e,t,n,r){var o=r?wt:jt,i=-1,a=t.length,c=e;for(e===t&&(t=go(t)),n&&(c=pt(e,At(n)));++i<a;)for(var s=0,u=t[i],l=n?n(u):u;(s=o(c,l,s,r))>-1;)c!==e&&Ze.call(c,s,1),Ze.call(e,s,1);return e}function Dr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var o=t[n];if(n==r||o!==i){var i=o;ci(o)?Ze.call(e,o,1):Xr(e,o)}}return e}function Lr(e,t){return e+Xt(ln()*(t-e+1))}function Pr(e,t){var n="";if(!e||t<1||t>9007199254740991)return n;do{t%2&&(n+=e),(t=Xt(t/2))&&(e+=e)}while(t);return n}function zr(e,t){return ji(bi(e,t,Qc),e+"")}function Br(e){return Bn(_c(e))}function Fr(e,t){var n=_c(e);return ki(n,Zn(t,0,n.length))}function Ur(e,t,n,r){if(!Va(e))return e;for(var o=-1,i=(t=co(t,e)).length,a=i-1,c=e;null!=c&&++o<i;){var s=xi(t[o]),u=n;if("__proto__"===s||"constructor"===s||"prototype"===s)return e;if(o!=a){var l=c[s];void 0===(u=r?r(l,s,c):void 0)&&(u=Va(l)?l:ci(t[o+1])?[]:{})}Vn(c,s,u),c=c[s]}return e}var qr=gn?function(e,t){return gn.set(e,t),e}:Qc,Vr=xt?function(e,t){return xt(e,"toString",{configurable:!0,enumerable:!1,value:Vc(t),writable:!0})}:Qc;function Hr(e){return ki(_c(e))}function Kr(e,t,n){var o=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var a=r(i);++o<i;)a[o]=e[o+t];return a}function Qr(e,t){var n;return er(e,(function(e,r,o){return!(n=t(e,r,o))})),!!n}function Wr(e,t,n){var r=0,o=null==e?r:e.length;if("number"==typeof t&&t==t&&o<=2147483647){for(;r<o;){var i=r+o>>>1,a=e[i];null!==a&&!Ja(a)&&(n?a<=t:a<t)?r=i+1:o=i}return o}return Gr(e,t,Qc,n)}function Gr(e,t,n,r){var o=0,i=null==e?0:e.length;if(0===i)return 0;for(var a=(t=n(t))!=t,c=null===t,s=Ja(t),u=void 0===t;o<i;){var l=Xt((o+i)/2),d=n(e[l]),f=void 0!==d,p=null===d,h=d==d,b=Ja(d);if(a)var v=r||h;else v=u?h&&(r||f):c?h&&f&&(r||!p):s?h&&f&&!p&&(r||!b):!p&&!b&&(r?d<=t:d<t);v?o=l+1:i=l}return cn(i,4294967294)}function Zr(e,t){for(var n=-1,r=e.length,o=0,i=[];++n<r;){var a=e[n],c=t?t(a):a;if(!n||!_a(c,s)){var s=c;i[o++]=0===a?0:a}}return i}function Yr(e){return"number"==typeof e?e:Ja(e)?NaN:+e}function Jr(e){if("string"==typeof e)return e;if(Ia(e))return pt(e,Jr)+"";if(Ja(e))return Rn?Rn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function $r(e,t,n){var r=-1,o=dt,i=e.length,a=!0,c=[],s=c;if(n)a=!1,o=ft;else if(i>=200){var u=t?null:zo(e);if(u)return Vt(u);a=!1,o=Nt,s=new Ln}else s=t?[]:c;e:for(;++r<i;){var l=e[r],d=t?t(l):l;if(l=n||0!==l?l:0,a&&d==d){for(var f=s.length;f--;)if(s[f]===d)continue e;t&&s.push(d),c.push(l)}else o(s,d,n)||(s!==c&&s.push(d),c.push(l))}return c}function Xr(e,t){return null==(e=vi(e,t=co(t,e)))||delete e[xi(Bi(t))]}function eo(e,t,n,r){return Ur(e,t,n(dr(e,t)),r)}function to(e,t,n,r){for(var o=e.length,i=r?o:-1;(r?i--:++i<o)&&t(e[i],i,e););return n?Kr(e,r?0:i,r?i+1:o):Kr(e,r?i+1:0,r?o:i)}function no(e,t){var n=e;return n instanceof Nn&&(n=n.value()),bt(t,(function(e,t){return t.func.apply(t.thisArg,ht([e],t.args))}),n)}function ro(e,t,n){var o=e.length;if(o<2)return o?$r(e[0]):[];for(var i=-1,a=r(o);++i<o;)for(var c=e[i],s=-1;++s<o;)s!=i&&(a[i]=Xn(a[i]||c,e[s],t,n));return $r(ir(a,1),t,n)}function oo(e,t,n){for(var r=-1,o=e.length,i=t.length,a={};++r<o;){var c=r<i?t[r]:void 0;n(a,e[r],c)}return a}function io(e){return La(e)?e:[]}function ao(e){return"function"==typeof e?e:Qc}function co(e,t){return Ia(e)?e:ui(e,t)?[e]:Si(cc(e))}var so=zr;function uo(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:Kr(e,t,n)}var lo=Zt||function(e){return We.clearTimeout(e)};function fo(e,t){if(t)return e.slice();var n=e.length,r=qe?qe(n):new e.constructor(n);return e.copy(r),r}function po(e){var t=new e.constructor(e.byteLength);return new Le(t).set(new Le(e)),t}function ho(e,t){var n=t?po(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function bo(e,t){if(e!==t){var n=void 0!==e,r=null===e,o=e==e,i=Ja(e),a=void 0!==t,c=null===t,s=t==t,u=Ja(t);if(!c&&!u&&!i&&e>t||i&&a&&s&&!c&&!u||r&&a&&s||!n&&s||!o)return 1;if(!r&&!i&&!u&&e<t||u&&n&&o&&!r&&!i||c&&n&&o||!a&&o||!s)return-1}return 0}function vo(e,t,n,o){for(var i=-1,a=e.length,c=n.length,s=-1,u=t.length,l=an(a-c,0),d=r(u+l),f=!o;++s<u;)d[s]=t[s];for(;++i<c;)(f||i<a)&&(d[n[i]]=e[i]);for(;l--;)d[s++]=e[i++];return d}function mo(e,t,n,o){for(var i=-1,a=e.length,c=-1,s=n.length,u=-1,l=t.length,d=an(a-s,0),f=r(d+l),p=!o;++i<d;)f[i]=e[i];for(var h=i;++u<l;)f[h+u]=t[u];for(;++c<s;)(p||i<a)&&(f[h+n[c]]=e[i++]);return f}function go(e,t){var n=-1,o=e.length;for(t||(t=r(o));++n<o;)t[n]=e[n];return t}function yo(e,t,n,r){var o=!n;n||(n={});for(var i=-1,a=t.length;++i<a;){var c=t[i],s=r?r(n[c],e[c],c,n,e):void 0;void 0===s&&(s=e[c]),o?Wn(n,c,s):Vn(n,c,s)}return n}function Oo(e,t){return function(n,r){var o=Ia(n)?at:Kn,i=t?t():{};return o(n,e,Jo(r,2),i)}}function jo(e){return zr((function(t,n){var r=-1,o=n.length,i=o>1?n[o-1]:void 0,a=o>2?n[2]:void 0;for(i=e.length>3&&"function"==typeof i?(o--,i):void 0,a&&si(n[0],n[1],a)&&(i=o<3?void 0:i,o=1),t=be(t);++r<o;){var c=n[r];c&&e(t,c,r,i)}return t}))}function wo(e,t){return function(n,r){if(null==n)return n;if(!Da(n))return e(n,r);for(var o=n.length,i=t?o:-1,a=be(n);(t?i--:++i<o)&&!1!==r(a[i],i,a););return n}}function Co(e){return function(t,n,r){for(var o=-1,i=be(t),a=r(t),c=a.length;c--;){var s=a[e?c:++o];if(!1===n(i[s],s,i))break}return t}}function ko(e){return function(t){var n=Bt(t=cc(t))?Qt(t):void 0,r=n?n[0]:t.charAt(0),o=n?uo(n,1).join(""):t.slice(1);return r[e]()+o}}function So(e){return function(t){return bt(Fc(Nc(t).replace(Ne,"")),e,"")}}function xo(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=_n(e.prototype),r=e.apply(n,t);return Va(r)?r:n}}function Ro(e){return function(t,n,r){var o=be(t);if(!Da(t)){var i=Jo(n,3);t=Oc(t),n=function(e){return i(o[e],e,o)}}var a=e(t,n,r);return a>-1?o[i?t[a]:a]:void 0}}function Eo(e){return Ko((function(t){var n=t.length,r=n,o=Tn.prototype.thru;for(e&&t.reverse();r--;){var a=t[r];if("function"!=typeof a)throw new ge(i);if(o&&!c&&"wrapper"==Zo(a))var c=new Tn([],!0)}for(r=c?r:n;++r<n;){var s=Zo(a=t[r]),u="wrapper"==s?Go(a):void 0;c=u&&li(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?c[Zo(u[0])].apply(c,u[3]):1==a.length&&li(a)?c[s]():c.thru(a)}return function(){var e=arguments,r=e[0];if(c&&1==e.length&&Ia(r))return c.plant(r).value();for(var o=0,i=n?t[o].apply(this,e):r;++o<n;)i=t[o].call(this,i);return i}}))}function _o(e,t,n,o,i,a,c,s,u,l){var d=128&t,f=1&t,p=2&t,h=24&t,b=512&t,v=p?void 0:xo(e);return function m(){for(var g=arguments.length,y=r(g),O=g;O--;)y[O]=arguments[O];if(h)var j=Yo(m),w=Dt(y,j);if(o&&(y=vo(y,o,i,h)),a&&(y=mo(y,a,c,h)),g-=w,h&&g<l){var C=qt(y,j);return Lo(e,t,_o,m.placeholder,n,y,C,s,u,l-g)}var k=f?n:this,S=p?k[e]:e;return g=y.length,s?y=mi(y,s):b&&g>1&&y.reverse(),d&&u<g&&(y.length=u),this&&this!==We&&this instanceof m&&(S=v||xo(S)),S.apply(k,y)}}function Ao(e,t){return function(n,r){return function(e,t,n,r){return sr(e,(function(e,o,i){t(r,n(e),o,i)})),r}(n,e,t(r),{})}}function To(e,t){return function(n,r){var o;if(void 0===n&&void 0===r)return t;if(void 0!==n&&(o=n),void 0!==r){if(void 0===o)return r;"string"==typeof n||"string"==typeof r?(n=Jr(n),r=Jr(r)):(n=Yr(n),r=Yr(r)),o=e(n,r)}return o}}function No(e){return Ko((function(t){return t=pt(t,At(Jo())),zr((function(n){var r=this;return e(t,(function(e){return it(e,r,n)}))}))}))}function Io(e,t){var n=(t=void 0===t?" ":Jr(t)).length;if(n<2)return n?Pr(t,e):t;var r=Pr(t,$t(e/Kt(t)));return Bt(t)?uo(Qt(r),0,e).join(""):r.slice(0,e)}function Mo(e){return function(t,n,o){return o&&"number"!=typeof o&&si(t,n,o)&&(n=o=void 0),t=nc(t),void 0===n?(n=t,t=0):n=nc(n),function(e,t,n,o){for(var i=-1,a=an($t((t-e)/(n||1)),0),c=r(a);a--;)c[o?a:++i]=e,e+=n;return c}(t,n,o=void 0===o?t<n?1:-1:nc(o),e)}}function Do(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=ic(t),n=ic(n)),e(t,n)}}function Lo(e,t,n,r,o,i,a,c,s,u){var l=8&t;t|=l?32:64,4&(t&=~(l?64:32))||(t&=-4);var d=[e,t,o,l?i:void 0,l?a:void 0,l?void 0:i,l?void 0:a,c,s,u],f=n.apply(void 0,d);return li(e)&&yi(f,d),f.placeholder=r,wi(f,e,t)}function Po(e){var t=he[e];return function(e,n){if(e=ic(e),(n=null==n?0:cn(rc(n),292))&&nn(e)){var r=(cc(e)+"e").split("e");return+((r=(cc(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var zo=bn&&1/Vt(new bn([,-0]))[1]==1/0?function(e){return new bn(e)}:Jc;function Bo(e){return function(t){var n=ri(t);return n==b?Ft(t):n==y?Ht(t):function(e,t){return pt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Fo(e,t,n,o,c,s,u,l){var d=2&t;if(!d&&"function"!=typeof e)throw new ge(i);var f=o?o.length:0;if(f||(t&=-97,o=c=void 0),u=void 0===u?u:an(rc(u),0),l=void 0===l?l:rc(l),f-=c?c.length:0,64&t){var p=o,h=c;o=c=void 0}var b=d?void 0:Go(e),v=[e,t,n,o,c,p,h,s,u,l];if(b&&function(e,t){var n=e[1],r=t[1],o=n|r,i=o<131,c=128==r&&8==n||128==r&&256==n&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!i&&!c)return e;1&r&&(e[2]=t[2],o|=1&n?0:4);var s=t[3];if(s){var u=e[3];e[3]=u?vo(u,s,t[4]):s,e[4]=u?qt(e[3],a):t[4]}(s=t[5])&&(u=e[5],e[5]=u?mo(u,s,t[6]):s,e[6]=u?qt(e[5],a):t[6]);(s=t[7])&&(e[7]=s);128&r&&(e[8]=null==e[8]?t[8]:cn(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=o}(v,b),e=v[0],t=v[1],n=v[2],o=v[3],c=v[4],!(l=v[9]=void 0===v[9]?d?0:e.length:an(v[9]-f,0))&&24&t&&(t&=-25),t&&1!=t)m=8==t||16==t?function(e,t,n){var o=xo(e);return function i(){for(var a=arguments.length,c=r(a),s=a,u=Yo(i);s--;)c[s]=arguments[s];var l=a<3&&c[0]!==u&&c[a-1]!==u?[]:qt(c,u);if((a-=l.length)<n)return Lo(e,t,_o,i.placeholder,void 0,c,l,void 0,void 0,n-a);var d=this&&this!==We&&this instanceof i?o:e;return it(d,this,c)}}(e,t,l):32!=t&&33!=t||c.length?_o.apply(void 0,v):function(e,t,n,o){var i=1&t,a=xo(e);return function t(){for(var c=-1,s=arguments.length,u=-1,l=o.length,d=r(l+s),f=this&&this!==We&&this instanceof t?a:e;++u<l;)d[u]=o[u];for(;s--;)d[u++]=arguments[++c];return it(f,i?n:this,d)}}(e,t,n,o);else var m=function(e,t,n){var r=1&t,o=xo(e);return function t(){var i=this&&this!==We&&this instanceof t?o:e;return i.apply(r?n:this,arguments)}}(e,t,n);return wi((b?qr:yi)(m,v),e,t)}function Uo(e,t,n,r){return void 0===e||_a(e,je[n])&&!ke.call(r,n)?t:e}function qo(e,t,n,r,o,i){return Va(e)&&Va(t)&&(i.set(t,e),Ar(e,t,void 0,qo,i),i.delete(t)),e}function Vo(e){return Wa(e)?void 0:e}function Ho(e,t,n,r,o,i){var a=1&n,c=e.length,s=t.length;if(c!=s&&!(a&&s>c))return!1;var u=i.get(e),l=i.get(t);if(u&&l)return u==t&&l==e;var d=-1,f=!0,p=2&n?new Ln:void 0;for(i.set(e,t),i.set(t,e);++d<c;){var h=e[d],b=t[d];if(r)var v=a?r(b,h,d,t,e,i):r(h,b,d,e,t,i);if(void 0!==v){if(v)continue;f=!1;break}if(p){if(!mt(t,(function(e,t){if(!Nt(p,t)&&(h===e||o(h,e,n,r,i)))return p.push(t)}))){f=!1;break}}else if(h!==b&&!o(h,b,n,r,i)){f=!1;break}}return i.delete(e),i.delete(t),f}function Ko(e){return ji(bi(e,void 0,Mi),e+"")}function Qo(e){return fr(e,Oc,ti)}function Wo(e){return fr(e,jc,ni)}var Go=gn?function(e){return gn.get(e)}:Jc;function Zo(e){for(var t=e.name+"",n=yn[t],r=ke.call(yn,t)?n.length:0;r--;){var o=n[r],i=o.func;if(null==i||i==e)return o.name}return t}function Yo(e){return(ke.call(En,"placeholder")?En:e).placeholder}function Jo(){var e=En.iteratee||Wc;return e=e===Wc?Cr:e,arguments.length?e(arguments[0],arguments[1]):e}function $o(e,t){var n,r,o=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof t?"string":"hash"]:o.map}function Xo(e){for(var t=Oc(e),n=t.length;n--;){var r=t[n],o=e[r];t[n]=[r,o,pi(o)]}return t}function ei(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return wr(n)?n:void 0}var ti=en?function(e){return null==e?[]:(e=be(e),lt(en(e),(function(t){return Ge.call(e,t)})))}:os,ni=en?function(e){for(var t=[];e;)ht(t,ti(e)),e=Ke(e);return t}:os,ri=pr;function oi(e,t,n){for(var r=-1,o=(t=co(t,e)).length,i=!1;++r<o;){var a=xi(t[r]);if(!(i=null!=e&&n(e,a)))break;e=e[a]}return i||++r!=o?i:!!(o=null==e?0:e.length)&&qa(o)&&ci(a,o)&&(Ia(e)||Na(e))}function ii(e){return"function"!=typeof e.constructor||fi(e)?{}:_n(Ke(e))}function ai(e){return Ia(e)||Na(e)||!!(Je&&e&&e[Je])}function ci(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&se.test(e))&&e>-1&&e%1==0&&e<t}function si(e,t,n){if(!Va(n))return!1;var r=typeof t;return!!("number"==r?Da(n)&&ci(t,n.length):"string"==r&&t in n)&&_a(n[t],e)}function ui(e,t){if(Ia(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Ja(e))||(H.test(e)||!V.test(e)||null!=t&&e in be(t))}function li(e){var t=Zo(e),n=En[t];if("function"!=typeof n||!(t in Nn.prototype))return!1;if(e===n)return!0;var r=Go(n);return!!r&&e===r[0]}(fn&&ri(new fn(new ArrayBuffer(1)))!=k||pn&&ri(new pn)!=b||hn&&"[object Promise]"!=ri(hn.resolve())||bn&&ri(new bn)!=y||vn&&ri(new vn)!=w)&&(ri=function(e){var t=pr(e),n=t==m?e.constructor:void 0,r=n?Ri(n):"";if(r)switch(r){case On:return k;case jn:return b;case wn:return"[object Promise]";case Cn:return y;case kn:return w}return t});var di=we?Fa:is;function fi(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||je)}function pi(e){return e==e&&!Va(e)}function hi(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in be(n)))}}function bi(e,t,n){return t=an(void 0===t?e.length-1:t,0),function(){for(var o=arguments,i=-1,a=an(o.length-t,0),c=r(a);++i<a;)c[i]=o[t+i];i=-1;for(var s=r(t+1);++i<t;)s[i]=o[i];return s[t]=n(c),it(e,this,s)}}function vi(e,t){return t.length<2?e:dr(e,Kr(t,0,-1))}function mi(e,t){for(var n=e.length,r=cn(t.length,n),o=go(e);r--;){var i=t[r];e[r]=ci(i,n)?o[i]:void 0}return e}function gi(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var yi=Ci(qr),Oi=Jt||function(e,t){return We.setTimeout(e,t)},ji=Ci(Vr);function wi(e,t,n){var r=t+"";return ji(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(J,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return ct(c,(function(n){var r="_."+n[0];t&n[1]&&!dt(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match($);return t?t[1].split(X):[]}(r),n)))}function Ci(e){var t=0,n=0;return function(){var r=sn(),o=16-(r-n);if(n=r,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function ki(e,t){var n=-1,r=e.length,o=r-1;for(t=void 0===t?r:t;++n<t;){var i=Lr(n,o),a=e[i];e[i]=e[n],e[n]=a}return e.length=t,e}var Si=function(e){var t=Ca(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(K,(function(e,n,r,o){t.push(r?o.replace(te,"$1"):n||e)})),t}));function xi(e){if("string"==typeof e||Ja(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Ri(e){if(null!=e){try{return Ce.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ei(e){if(e instanceof Nn)return e.clone();var t=new Tn(e.__wrapped__,e.__chain__);return t.__actions__=go(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var _i=zr((function(e,t){return La(e)?Xn(e,ir(t,1,La,!0)):[]})),Ai=zr((function(e,t){var n=Bi(t);return La(n)&&(n=void 0),La(e)?Xn(e,ir(t,1,La,!0),Jo(n,2)):[]})),Ti=zr((function(e,t){var n=Bi(t);return La(n)&&(n=void 0),La(e)?Xn(e,ir(t,1,La,!0),void 0,n):[]}));function Ni(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=null==n?0:rc(n);return o<0&&(o=an(r+o,0)),Ot(e,Jo(t,3),o)}function Ii(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=r-1;return void 0!==n&&(o=rc(n),o=n<0?an(r+o,0):cn(o,r-1)),Ot(e,Jo(t,3),o,!0)}function Mi(e){return(null==e?0:e.length)?ir(e,1):[]}function Di(e){return e&&e.length?e[0]:void 0}var Li=zr((function(e){var t=pt(e,io);return t.length&&t[0]===e[0]?mr(t):[]})),Pi=zr((function(e){var t=Bi(e),n=pt(e,io);return t===Bi(n)?t=void 0:n.pop(),n.length&&n[0]===e[0]?mr(n,Jo(t,2)):[]})),zi=zr((function(e){var t=Bi(e),n=pt(e,io);return(t="function"==typeof t?t:void 0)&&n.pop(),n.length&&n[0]===e[0]?mr(n,void 0,t):[]}));function Bi(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}var Fi=zr(Ui);function Ui(e,t){return e&&e.length&&t&&t.length?Mr(e,t):e}var qi=Ko((function(e,t){var n=null==e?0:e.length,r=Gn(e,t);return Dr(e,pt(t,(function(e){return ci(e,n)?+e:e})).sort(bo)),r}));function Vi(e){return null==e?e:dn.call(e)}var Hi=zr((function(e){return $r(ir(e,1,La,!0))})),Ki=zr((function(e){var t=Bi(e);return La(t)&&(t=void 0),$r(ir(e,1,La,!0),Jo(t,2))})),Qi=zr((function(e){var t=Bi(e);return t="function"==typeof t?t:void 0,$r(ir(e,1,La,!0),void 0,t)}));function Wi(e){if(!e||!e.length)return[];var t=0;return e=lt(e,(function(e){if(La(e))return t=an(e.length,t),!0})),_t(t,(function(t){return pt(e,St(t))}))}function Gi(e,t){if(!e||!e.length)return[];var n=Wi(e);return null==t?n:pt(n,(function(e){return it(t,void 0,e)}))}var Zi=zr((function(e,t){return La(e)?Xn(e,t):[]})),Yi=zr((function(e){return ro(lt(e,La))})),Ji=zr((function(e){var t=Bi(e);return La(t)&&(t=void 0),ro(lt(e,La),Jo(t,2))})),$i=zr((function(e){var t=Bi(e);return t="function"==typeof t?t:void 0,ro(lt(e,La),void 0,t)})),Xi=zr(Wi);var ea=zr((function(e){var t=e.length,n=t>1?e[t-1]:void 0;return n="function"==typeof n?(e.pop(),n):void 0,Gi(e,n)}));function ta(e){var t=En(e);return t.__chain__=!0,t}function na(e,t){return t(e)}var ra=Ko((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,o=function(t){return Gn(t,e)};return!(t>1||this.__actions__.length)&&r instanceof Nn&&ci(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:na,args:[o],thisArg:void 0}),new Tn(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(void 0),e}))):this.thru(o)}));var oa=Oo((function(e,t,n){ke.call(e,n)?++e[n]:Wn(e,n,1)}));var ia=Ro(Ni),aa=Ro(Ii);function ca(e,t){return(Ia(e)?ct:er)(e,Jo(t,3))}function sa(e,t){return(Ia(e)?st:tr)(e,Jo(t,3))}var ua=Oo((function(e,t,n){ke.call(e,n)?e[n].push(t):Wn(e,n,[t])}));var la=zr((function(e,t,n){var o=-1,i="function"==typeof t,a=Da(e)?r(e.length):[];return er(e,(function(e){a[++o]=i?it(t,e,n):gr(e,t,n)})),a})),da=Oo((function(e,t,n){Wn(e,n,t)}));function fa(e,t){return(Ia(e)?pt:Rr)(e,Jo(t,3))}var pa=Oo((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var ha=zr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&si(e,t[0],t[1])?t=[]:n>2&&si(t[0],t[1],t[2])&&(t=[t[0]]),Nr(e,ir(t,1),[])})),ba=Yt||function(){return We.Date.now()};function va(e,t,n){return t=n?void 0:t,Fo(e,128,void 0,void 0,void 0,void 0,t=e&&null==t?e.length:t)}function ma(e,t){var n;if("function"!=typeof t)throw new ge(i);return e=rc(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}}var ga=zr((function(e,t,n){var r=1;if(n.length){var o=qt(n,Yo(ga));r|=32}return Fo(e,r,t,n,o)})),ya=zr((function(e,t,n){var r=3;if(n.length){var o=qt(n,Yo(ya));r|=32}return Fo(t,r,e,n,o)}));function Oa(e,t,n){var r,o,a,c,s,u,l=0,d=!1,f=!1,p=!0;if("function"!=typeof e)throw new ge(i);function h(t){var n=r,i=o;return r=o=void 0,l=t,c=e.apply(i,n)}function b(e){return l=e,s=Oi(m,t),d?h(e):c}function v(e){var n=e-u;return void 0===u||n>=t||n<0||f&&e-l>=a}function m(){var e=ba();if(v(e))return g(e);s=Oi(m,function(e){var n=t-(e-u);return f?cn(n,a-(e-l)):n}(e))}function g(e){return s=void 0,p&&r?h(e):(r=o=void 0,c)}function y(){var e=ba(),n=v(e);if(r=arguments,o=this,u=e,n){if(void 0===s)return b(u);if(f)return lo(s),s=Oi(m,t),h(u)}return void 0===s&&(s=Oi(m,t)),c}return t=ic(t)||0,Va(n)&&(d=!!n.leading,a=(f="maxWait"in n)?an(ic(n.maxWait)||0,t):a,p="trailing"in n?!!n.trailing:p),y.cancel=function(){void 0!==s&&lo(s),l=0,r=u=o=s=void 0},y.flush=function(){return void 0===s?c:g(ba())},y}var ja=zr((function(e,t){return $n(e,1,t)})),wa=zr((function(e,t,n){return $n(e,ic(t)||0,n)}));function Ca(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new ge(i);var n=function n(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(Ca.Cache||Dn),n}function ka(e){if("function"!=typeof e)throw new ge(i);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Ca.Cache=Dn;var Sa=so((function(e,t){var n=(t=1==t.length&&Ia(t[0])?pt(t[0],At(Jo())):pt(ir(t,1),At(Jo()))).length;return zr((function(r){for(var o=-1,i=cn(r.length,n);++o<i;)r[o]=t[o].call(this,r[o]);return it(e,this,r)}))})),xa=zr((function(e,t){return Fo(e,32,void 0,t,qt(t,Yo(xa)))})),Ra=zr((function(e,t){return Fo(e,64,void 0,t,qt(t,Yo(Ra)))})),Ea=Ko((function(e,t){return Fo(e,256,void 0,void 0,void 0,t)}));function _a(e,t){return e===t||e!=e&&t!=t}var Aa=Do(hr),Ta=Do((function(e,t){return e>=t})),Na=yr(function(){return arguments}())?yr:function(e){return Ha(e)&&ke.call(e,"callee")&&!Ge.call(e,"callee")},Ia=r.isArray,Ma=Xe?At(Xe):function(e){return Ha(e)&&pr(e)==C};function Da(e){return null!=e&&qa(e.length)&&!Fa(e)}function La(e){return Ha(e)&&Da(e)}var Pa=tn||is,za=et?At(et):function(e){return Ha(e)&&pr(e)==d};function Ba(e){if(!Ha(e))return!1;var t=pr(e);return t==f||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!Wa(e)}function Fa(e){if(!Va(e))return!1;var t=pr(e);return t==p||t==h||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Ua(e){return"number"==typeof e&&e==rc(e)}function qa(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function Va(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Ha(e){return null!=e&&"object"==typeof e}var Ka=tt?At(tt):function(e){return Ha(e)&&ri(e)==b};function Qa(e){return"number"==typeof e||Ha(e)&&pr(e)==v}function Wa(e){if(!Ha(e)||pr(e)!=m)return!1;var t=Ke(e);if(null===t)return!0;var n=ke.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Ce.call(n)==Ee}var Ga=nt?At(nt):function(e){return Ha(e)&&pr(e)==g};var Za=rt?At(rt):function(e){return Ha(e)&&ri(e)==y};function Ya(e){return"string"==typeof e||!Ia(e)&&Ha(e)&&pr(e)==O}function Ja(e){return"symbol"==typeof e||Ha(e)&&pr(e)==j}var $a=ot?At(ot):function(e){return Ha(e)&&qa(e.length)&&!!Fe[pr(e)]};var Xa=Do(xr),ec=Do((function(e,t){return e<=t}));function tc(e){if(!e)return[];if(Da(e))return Ya(e)?Qt(e):go(e);if($e&&e[$e])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[$e]());var t=ri(e);return(t==b?Ft:t==y?Vt:_c)(e)}function nc(e){return e?(e=ic(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function rc(e){var t=nc(e),n=t%1;return t==t?n?t-n:t:0}function oc(e){return e?Zn(rc(e),0,4294967295):0}function ic(e){if("number"==typeof e)return e;if(Ja(e))return NaN;if(Va(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Va(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(G,"");var n=ie.test(e);return n||ce.test(e)?He(e.slice(2),n?2:8):oe.test(e)?NaN:+e}function ac(e){return yo(e,jc(e))}function cc(e){return null==e?"":Jr(e)}var sc=jo((function(e,t){if(fi(t)||Da(t))yo(t,Oc(t),e);else for(var n in t)ke.call(t,n)&&Vn(e,n,t[n])})),uc=jo((function(e,t){yo(t,jc(t),e)})),lc=jo((function(e,t,n,r){yo(t,jc(t),e,r)})),dc=jo((function(e,t,n,r){yo(t,Oc(t),e,r)})),fc=Ko(Gn);var pc=zr((function(e,t){e=be(e);var n=-1,r=t.length,o=r>2?t[2]:void 0;for(o&&si(t[0],t[1],o)&&(r=1);++n<r;)for(var i=t[n],a=jc(i),c=-1,s=a.length;++c<s;){var u=a[c],l=e[u];(void 0===l||_a(l,je[u])&&!ke.call(e,u))&&(e[u]=i[u])}return e})),hc=zr((function(e){return e.push(void 0,qo),it(Cc,void 0,e)}));function bc(e,t,n){var r=null==e?void 0:dr(e,t);return void 0===r?n:r}function vc(e,t){return null!=e&&oi(e,t,vr)}var mc=Ao((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Re.call(t)),e[t]=n}),Vc(Qc)),gc=Ao((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Re.call(t)),ke.call(e,t)?e[t].push(n):e[t]=[n]}),Jo),yc=zr(gr);function Oc(e){return Da(e)?zn(e):kr(e)}function jc(e){return Da(e)?zn(e,!0):Sr(e)}var wc=jo((function(e,t,n){Ar(e,t,n)})),Cc=jo((function(e,t,n,r){Ar(e,t,n,r)})),kc=Ko((function(e,t){var n={};if(null==e)return n;var r=!1;t=pt(t,(function(t){return t=co(t,e),r||(r=t.length>1),t})),yo(e,Wo(e),n),r&&(n=Yn(n,7,Vo));for(var o=t.length;o--;)Xr(n,t[o]);return n}));var Sc=Ko((function(e,t){return null==e?{}:function(e,t){return Ir(e,t,(function(t,n){return vc(e,n)}))}(e,t)}));function xc(e,t){if(null==e)return{};var n=pt(Wo(e),(function(e){return[e]}));return t=Jo(t),Ir(e,n,(function(e,n){return t(e,n[0])}))}var Rc=Bo(Oc),Ec=Bo(jc);function _c(e){return null==e?[]:Tt(e,Oc(e))}var Ac=So((function(e,t,n){return t=t.toLowerCase(),e+(n?Tc(t):t)}));function Tc(e){return Bc(cc(e).toLowerCase())}function Nc(e){return(e=cc(e))&&e.replace(ue,Lt).replace(Ie,"")}var Ic=So((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Mc=So((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Dc=ko("toLowerCase");var Lc=So((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var Pc=So((function(e,t,n){return e+(n?" ":"")+Bc(t)}));var zc=So((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Bc=ko("toUpperCase");function Fc(e,t,n){return e=cc(e),void 0===(t=n?void 0:t)?function(e){return Pe.test(e)}(e)?function(e){return e.match(De)||[]}(e):function(e){return e.match(ee)||[]}(e):e.match(t)||[]}var Uc=zr((function(e,t){try{return it(e,void 0,t)}catch(e){return Ba(e)?e:new fe(e)}})),qc=Ko((function(e,t){return ct(t,(function(t){t=xi(t),Wn(e,t,ga(e[t],e))})),e}));function Vc(e){return function(){return e}}var Hc=Eo(),Kc=Eo(!0);function Qc(e){return e}function Wc(e){return Cr("function"==typeof e?e:Yn(e,1))}var Gc=zr((function(e,t){return function(n){return gr(n,e,t)}})),Zc=zr((function(e,t){return function(n){return gr(e,n,t)}}));function Yc(e,t,n){var r=Oc(t),o=lr(t,r);null!=n||Va(t)&&(o.length||!r.length)||(n=t,t=e,e=this,o=lr(t,Oc(t)));var i=!(Va(n)&&"chain"in n&&!n.chain),a=Fa(e);return ct(o,(function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(i||t){var n=e(this.__wrapped__),o=n.__actions__=go(this.__actions__);return o.push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,ht([this.value()],arguments))})})),e}function Jc(){}var $c=No(pt),Xc=No(ut),es=No(mt);function ts(e){return ui(e)?St(xi(e)):function(e){return function(t){return dr(t,e)}}(e)}var ns=Mo(),rs=Mo(!0);function os(){return[]}function is(){return!1}var as=To((function(e,t){return e+t}),0),cs=Po("ceil"),ss=To((function(e,t){return e/t}),1),us=Po("floor");var ls,ds=To((function(e,t){return e*t}),1),fs=Po("round"),ps=To((function(e,t){return e-t}),0);return En.after=function(e,t){if("function"!=typeof t)throw new ge(i);return e=rc(e),function(){if(--e<1)return t.apply(this,arguments)}},En.ary=va,En.assign=sc,En.assignIn=uc,En.assignInWith=lc,En.assignWith=dc,En.at=fc,En.before=ma,En.bind=ga,En.bindAll=qc,En.bindKey=ya,En.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Ia(e)?e:[e]},En.chain=ta,En.chunk=function(e,t,n){t=(n?si(e,t,n):void 0===t)?1:an(rc(t),0);var o=null==e?0:e.length;if(!o||t<1)return[];for(var i=0,a=0,c=r($t(o/t));i<o;)c[a++]=Kr(e,i,i+=t);return c},En.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,o=[];++t<n;){var i=e[t];i&&(o[r++]=i)}return o},En.concat=function(){var e=arguments.length;if(!e)return[];for(var t=r(e-1),n=arguments[0],o=e;o--;)t[o-1]=arguments[o];return ht(Ia(n)?go(n):[n],ir(t,1))},En.cond=function(e){var t=null==e?0:e.length,n=Jo();return e=t?pt(e,(function(e){if("function"!=typeof e[1])throw new ge(i);return[n(e[0]),e[1]]})):[],zr((function(n){for(var r=-1;++r<t;){var o=e[r];if(it(o[0],this,n))return it(o[1],this,n)}}))},En.conforms=function(e){return function(e){var t=Oc(e);return function(n){return Jn(n,e,t)}}(Yn(e,1))},En.constant=Vc,En.countBy=oa,En.create=function(e,t){var n=_n(e);return null==t?n:Qn(n,t)},En.curry=function e(t,n,r){var o=Fo(t,8,void 0,void 0,void 0,void 0,void 0,n=r?void 0:n);return o.placeholder=e.placeholder,o},En.curryRight=function e(t,n,r){var o=Fo(t,16,void 0,void 0,void 0,void 0,void 0,n=r?void 0:n);return o.placeholder=e.placeholder,o},En.debounce=Oa,En.defaults=pc,En.defaultsDeep=hc,En.defer=ja,En.delay=wa,En.difference=_i,En.differenceBy=Ai,En.differenceWith=Ti,En.drop=function(e,t,n){var r=null==e?0:e.length;return r?Kr(e,(t=n||void 0===t?1:rc(t))<0?0:t,r):[]},En.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?Kr(e,0,(t=r-(t=n||void 0===t?1:rc(t)))<0?0:t):[]},En.dropRightWhile=function(e,t){return e&&e.length?to(e,Jo(t,3),!0,!0):[]},En.dropWhile=function(e,t){return e&&e.length?to(e,Jo(t,3),!0):[]},En.fill=function(e,t,n,r){var o=null==e?0:e.length;return o?(n&&"number"!=typeof n&&si(e,t,n)&&(n=0,r=o),function(e,t,n,r){var o=e.length;for((n=rc(n))<0&&(n=-n>o?0:o+n),(r=void 0===r||r>o?o:rc(r))<0&&(r+=o),r=n>r?0:oc(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},En.filter=function(e,t){return(Ia(e)?lt:or)(e,Jo(t,3))},En.flatMap=function(e,t){return ir(fa(e,t),1)},En.flatMapDeep=function(e,t){return ir(fa(e,t),1/0)},En.flatMapDepth=function(e,t,n){return n=void 0===n?1:rc(n),ir(fa(e,t),n)},En.flatten=Mi,En.flattenDeep=function(e){return(null==e?0:e.length)?ir(e,1/0):[]},En.flattenDepth=function(e,t){return(null==e?0:e.length)?ir(e,t=void 0===t?1:rc(t)):[]},En.flip=function(e){return Fo(e,512)},En.flow=Hc,En.flowRight=Kc,En.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var o=e[t];r[o[0]]=o[1]}return r},En.functions=function(e){return null==e?[]:lr(e,Oc(e))},En.functionsIn=function(e){return null==e?[]:lr(e,jc(e))},En.groupBy=ua,En.initial=function(e){return(null==e?0:e.length)?Kr(e,0,-1):[]},En.intersection=Li,En.intersectionBy=Pi,En.intersectionWith=zi,En.invert=mc,En.invertBy=gc,En.invokeMap=la,En.iteratee=Wc,En.keyBy=da,En.keys=Oc,En.keysIn=jc,En.map=fa,En.mapKeys=function(e,t){var n={};return t=Jo(t,3),sr(e,(function(e,r,o){Wn(n,t(e,r,o),e)})),n},En.mapValues=function(e,t){var n={};return t=Jo(t,3),sr(e,(function(e,r,o){Wn(n,r,t(e,r,o))})),n},En.matches=function(e){return Er(Yn(e,1))},En.matchesProperty=function(e,t){return _r(e,Yn(t,1))},En.memoize=Ca,En.merge=wc,En.mergeWith=Cc,En.method=Gc,En.methodOf=Zc,En.mixin=Yc,En.negate=ka,En.nthArg=function(e){return e=rc(e),zr((function(t){return Tr(t,e)}))},En.omit=kc,En.omitBy=function(e,t){return xc(e,ka(Jo(t)))},En.once=function(e){return ma(2,e)},En.orderBy=function(e,t,n,r){return null==e?[]:(Ia(t)||(t=null==t?[]:[t]),Ia(n=r?void 0:n)||(n=null==n?[]:[n]),Nr(e,t,n))},En.over=$c,En.overArgs=Sa,En.overEvery=Xc,En.overSome=es,En.partial=xa,En.partialRight=Ra,En.partition=pa,En.pick=Sc,En.pickBy=xc,En.property=ts,En.propertyOf=function(e){return function(t){return null==e?void 0:dr(e,t)}},En.pull=Fi,En.pullAll=Ui,En.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Mr(e,t,Jo(n,2)):e},En.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Mr(e,t,void 0,n):e},En.pullAt=qi,En.range=ns,En.rangeRight=rs,En.rearg=Ea,En.reject=function(e,t){return(Ia(e)?lt:or)(e,ka(Jo(t,3)))},En.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,o=[],i=e.length;for(t=Jo(t,3);++r<i;){var a=e[r];t(a,r,e)&&(n.push(a),o.push(r))}return Dr(e,o),n},En.rest=function(e,t){if("function"!=typeof e)throw new ge(i);return zr(e,t=void 0===t?t:rc(t))},En.reverse=Vi,En.sampleSize=function(e,t,n){return t=(n?si(e,t,n):void 0===t)?1:rc(t),(Ia(e)?Fn:Fr)(e,t)},En.set=function(e,t,n){return null==e?e:Ur(e,t,n)},En.setWith=function(e,t,n,r){return r="function"==typeof r?r:void 0,null==e?e:Ur(e,t,n,r)},En.shuffle=function(e){return(Ia(e)?Un:Hr)(e)},En.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&si(e,t,n)?(t=0,n=r):(t=null==t?0:rc(t),n=void 0===n?r:rc(n)),Kr(e,t,n)):[]},En.sortBy=ha,En.sortedUniq=function(e){return e&&e.length?Zr(e):[]},En.sortedUniqBy=function(e,t){return e&&e.length?Zr(e,Jo(t,2)):[]},En.split=function(e,t,n){return n&&"number"!=typeof n&&si(e,t,n)&&(t=n=void 0),(n=void 0===n?4294967295:n>>>0)?(e=cc(e))&&("string"==typeof t||null!=t&&!Ga(t))&&!(t=Jr(t))&&Bt(e)?uo(Qt(e),0,n):e.split(t,n):[]},En.spread=function(e,t){if("function"!=typeof e)throw new ge(i);return t=null==t?0:an(rc(t),0),zr((function(n){var r=n[t],o=uo(n,0,t);return r&&ht(o,r),it(e,this,o)}))},En.tail=function(e){var t=null==e?0:e.length;return t?Kr(e,1,t):[]},En.take=function(e,t,n){return e&&e.length?Kr(e,0,(t=n||void 0===t?1:rc(t))<0?0:t):[]},En.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?Kr(e,(t=r-(t=n||void 0===t?1:rc(t)))<0?0:t,r):[]},En.takeRightWhile=function(e,t){return e&&e.length?to(e,Jo(t,3),!1,!0):[]},En.takeWhile=function(e,t){return e&&e.length?to(e,Jo(t,3)):[]},En.tap=function(e,t){return t(e),e},En.throttle=function(e,t,n){var r=!0,o=!0;if("function"!=typeof e)throw new ge(i);return Va(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),Oa(e,t,{leading:r,maxWait:t,trailing:o})},En.thru=na,En.toArray=tc,En.toPairs=Rc,En.toPairsIn=Ec,En.toPath=function(e){return Ia(e)?pt(e,xi):Ja(e)?[e]:go(Si(cc(e)))},En.toPlainObject=ac,En.transform=function(e,t,n){var r=Ia(e),o=r||Pa(e)||$a(e);if(t=Jo(t,4),null==n){var i=e&&e.constructor;n=o?r?new i:[]:Va(e)&&Fa(i)?_n(Ke(e)):{}}return(o?ct:sr)(e,(function(e,r,o){return t(n,e,r,o)})),n},En.unary=function(e){return va(e,1)},En.union=Hi,En.unionBy=Ki,En.unionWith=Qi,En.uniq=function(e){return e&&e.length?$r(e):[]},En.uniqBy=function(e,t){return e&&e.length?$r(e,Jo(t,2)):[]},En.uniqWith=function(e,t){return t="function"==typeof t?t:void 0,e&&e.length?$r(e,void 0,t):[]},En.unset=function(e,t){return null==e||Xr(e,t)},En.unzip=Wi,En.unzipWith=Gi,En.update=function(e,t,n){return null==e?e:eo(e,t,ao(n))},En.updateWith=function(e,t,n,r){return r="function"==typeof r?r:void 0,null==e?e:eo(e,t,ao(n),r)},En.values=_c,En.valuesIn=function(e){return null==e?[]:Tt(e,jc(e))},En.without=Zi,En.words=Fc,En.wrap=function(e,t){return xa(ao(t),e)},En.xor=Yi,En.xorBy=Ji,En.xorWith=$i,En.zip=Xi,En.zipObject=function(e,t){return oo(e||[],t||[],Vn)},En.zipObjectDeep=function(e,t){return oo(e||[],t||[],Ur)},En.zipWith=ea,En.entries=Rc,En.entriesIn=Ec,En.extend=uc,En.extendWith=lc,Yc(En,En),En.add=as,En.attempt=Uc,En.camelCase=Ac,En.capitalize=Tc,En.ceil=cs,En.clamp=function(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=ic(n))==n?n:0),void 0!==t&&(t=(t=ic(t))==t?t:0),Zn(ic(e),t,n)},En.clone=function(e){return Yn(e,4)},En.cloneDeep=function(e){return Yn(e,5)},En.cloneDeepWith=function(e,t){return Yn(e,5,t="function"==typeof t?t:void 0)},En.cloneWith=function(e,t){return Yn(e,4,t="function"==typeof t?t:void 0)},En.conformsTo=function(e,t){return null==t||Jn(e,t,Oc(t))},En.deburr=Nc,En.defaultTo=function(e,t){return null==e||e!=e?t:e},En.divide=ss,En.endsWith=function(e,t,n){e=cc(e),t=Jr(t);var r=e.length,o=n=void 0===n?r:Zn(rc(n),0,r);return(n-=t.length)>=0&&e.slice(n,o)==t},En.eq=_a,En.escape=function(e){return(e=cc(e))&&B.test(e)?e.replace(P,Pt):e},En.escapeRegExp=function(e){return(e=cc(e))&&W.test(e)?e.replace(Q,"\\$&"):e},En.every=function(e,t,n){var r=Ia(e)?ut:nr;return n&&si(e,t,n)&&(t=void 0),r(e,Jo(t,3))},En.find=ia,En.findIndex=Ni,En.findKey=function(e,t){return yt(e,Jo(t,3),sr)},En.findLast=aa,En.findLastIndex=Ii,En.findLastKey=function(e,t){return yt(e,Jo(t,3),ur)},En.floor=us,En.forEach=ca,En.forEachRight=sa,En.forIn=function(e,t){return null==e?e:ar(e,Jo(t,3),jc)},En.forInRight=function(e,t){return null==e?e:cr(e,Jo(t,3),jc)},En.forOwn=function(e,t){return e&&sr(e,Jo(t,3))},En.forOwnRight=function(e,t){return e&&ur(e,Jo(t,3))},En.get=bc,En.gt=Aa,En.gte=Ta,En.has=function(e,t){return null!=e&&oi(e,t,br)},En.hasIn=vc,En.head=Di,En.identity=Qc,En.includes=function(e,t,n,r){e=Da(e)?e:_c(e),n=n&&!r?rc(n):0;var o=e.length;return n<0&&(n=an(o+n,0)),Ya(e)?n<=o&&e.indexOf(t,n)>-1:!!o&&jt(e,t,n)>-1},En.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=null==n?0:rc(n);return o<0&&(o=an(r+o,0)),jt(e,t,o)},En.inRange=function(e,t,n){return t=nc(t),void 0===n?(n=t,t=0):n=nc(n),function(e,t,n){return e>=cn(t,n)&&e<an(t,n)}(e=ic(e),t,n)},En.invoke=yc,En.isArguments=Na,En.isArray=Ia,En.isArrayBuffer=Ma,En.isArrayLike=Da,En.isArrayLikeObject=La,En.isBoolean=function(e){return!0===e||!1===e||Ha(e)&&pr(e)==l},En.isBuffer=Pa,En.isDate=za,En.isElement=function(e){return Ha(e)&&1===e.nodeType&&!Wa(e)},En.isEmpty=function(e){if(null==e)return!0;if(Da(e)&&(Ia(e)||"string"==typeof e||"function"==typeof e.splice||Pa(e)||$a(e)||Na(e)))return!e.length;var t=ri(e);if(t==b||t==y)return!e.size;if(fi(e))return!kr(e).length;for(var n in e)if(ke.call(e,n))return!1;return!0},En.isEqual=function(e,t){return Or(e,t)},En.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:void 0)?n(e,t):void 0;return void 0===r?Or(e,t,void 0,n):!!r},En.isError=Ba,En.isFinite=function(e){return"number"==typeof e&&nn(e)},En.isFunction=Fa,En.isInteger=Ua,En.isLength=qa,En.isMap=Ka,En.isMatch=function(e,t){return e===t||jr(e,t,Xo(t))},En.isMatchWith=function(e,t,n){return n="function"==typeof n?n:void 0,jr(e,t,Xo(t),n)},En.isNaN=function(e){return Qa(e)&&e!=+e},En.isNative=function(e){if(di(e))throw new fe("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return wr(e)},En.isNil=function(e){return null==e},En.isNull=function(e){return null===e},En.isNumber=Qa,En.isObject=Va,En.isObjectLike=Ha,En.isPlainObject=Wa,En.isRegExp=Ga,En.isSafeInteger=function(e){return Ua(e)&&e>=-9007199254740991&&e<=9007199254740991},En.isSet=Za,En.isString=Ya,En.isSymbol=Ja,En.isTypedArray=$a,En.isUndefined=function(e){return void 0===e},En.isWeakMap=function(e){return Ha(e)&&ri(e)==w},En.isWeakSet=function(e){return Ha(e)&&"[object WeakSet]"==pr(e)},En.join=function(e,t){return null==e?"":rn.call(e,t)},En.kebabCase=Ic,En.last=Bi,En.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=r;return void 0!==n&&(o=(o=rc(n))<0?an(r+o,0):cn(o,r-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,o):Ot(e,Ct,o,!0)},En.lowerCase=Mc,En.lowerFirst=Dc,En.lt=Xa,En.lte=ec,En.max=function(e){return e&&e.length?rr(e,Qc,hr):void 0},En.maxBy=function(e,t){return e&&e.length?rr(e,Jo(t,2),hr):void 0},En.mean=function(e){return kt(e,Qc)},En.meanBy=function(e,t){return kt(e,Jo(t,2))},En.min=function(e){return e&&e.length?rr(e,Qc,xr):void 0},En.minBy=function(e,t){return e&&e.length?rr(e,Jo(t,2),xr):void 0},En.stubArray=os,En.stubFalse=is,En.stubObject=function(){return{}},En.stubString=function(){return""},En.stubTrue=function(){return!0},En.multiply=ds,En.nth=function(e,t){return e&&e.length?Tr(e,rc(t)):void 0},En.noConflict=function(){return We._===this&&(We._=_e),this},En.noop=Jc,En.now=ba,En.pad=function(e,t,n){e=cc(e);var r=(t=rc(t))?Kt(e):0;if(!t||r>=t)return e;var o=(t-r)/2;return Io(Xt(o),n)+e+Io($t(o),n)},En.padEnd=function(e,t,n){e=cc(e);var r=(t=rc(t))?Kt(e):0;return t&&r<t?e+Io(t-r,n):e},En.padStart=function(e,t,n){e=cc(e);var r=(t=rc(t))?Kt(e):0;return t&&r<t?Io(t-r,n)+e:e},En.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),un(cc(e).replace(Z,""),t||0)},En.random=function(e,t,n){if(n&&"boolean"!=typeof n&&si(e,t,n)&&(t=n=void 0),void 0===n&&("boolean"==typeof t?(n=t,t=void 0):"boolean"==typeof e&&(n=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):(e=nc(e),void 0===t?(t=e,e=0):t=nc(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var o=ln();return cn(e+o*(t-e+Ve("1e-"+((o+"").length-1))),t)}return Lr(e,t)},En.reduce=function(e,t,n){var r=Ia(e)?bt:Rt,o=arguments.length<3;return r(e,Jo(t,4),n,o,er)},En.reduceRight=function(e,t,n){var r=Ia(e)?vt:Rt,o=arguments.length<3;return r(e,Jo(t,4),n,o,tr)},En.repeat=function(e,t,n){return t=(n?si(e,t,n):void 0===t)?1:rc(t),Pr(cc(e),t)},En.replace=function(){var e=arguments,t=cc(e[0]);return e.length<3?t:t.replace(e[1],e[2])},En.result=function(e,t,n){var r=-1,o=(t=co(t,e)).length;for(o||(o=1,e=void 0);++r<o;){var i=null==e?void 0:e[xi(t[r])];void 0===i&&(r=o,i=n),e=Fa(i)?i.call(e):i}return e},En.round=fs,En.runInContext=e,En.sample=function(e){return(Ia(e)?Bn:Br)(e)},En.size=function(e){if(null==e)return 0;if(Da(e))return Ya(e)?Kt(e):e.length;var t=ri(e);return t==b||t==y?e.size:kr(e).length},En.snakeCase=Lc,En.some=function(e,t,n){var r=Ia(e)?mt:Qr;return n&&si(e,t,n)&&(t=void 0),r(e,Jo(t,3))},En.sortedIndex=function(e,t){return Wr(e,t)},En.sortedIndexBy=function(e,t,n){return Gr(e,t,Jo(n,2))},En.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=Wr(e,t);if(r<n&&_a(e[r],t))return r}return-1},En.sortedLastIndex=function(e,t){return Wr(e,t,!0)},En.sortedLastIndexBy=function(e,t,n){return Gr(e,t,Jo(n,2),!0)},En.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=Wr(e,t,!0)-1;if(_a(e[n],t))return n}return-1},En.startCase=Pc,En.startsWith=function(e,t,n){return e=cc(e),n=null==n?0:Zn(rc(n),0,e.length),t=Jr(t),e.slice(n,n+t.length)==t},En.subtract=ps,En.sum=function(e){return e&&e.length?Et(e,Qc):0},En.sumBy=function(e,t){return e&&e.length?Et(e,Jo(t,2)):0},En.template=function(e,t,n){var r=En.templateSettings;n&&si(e,t,n)&&(t=void 0),e=cc(e),t=lc({},t,r,Uo);var o,i,a=lc({},t.imports,r.imports,Uo),c=Oc(a),s=Tt(a,c),u=0,l=t.interpolate||le,d="__p += '",f=ve((t.escape||le).source+"|"+l.source+"|"+(l===q?ne:le).source+"|"+(t.evaluate||le).source+"|$","g"),p="//# sourceURL="+(ke.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Be+"]")+"\n";e.replace(f,(function(t,n,r,a,c,s){return r||(r=a),d+=e.slice(u,s).replace(de,zt),n&&(o=!0,d+="' +\n__e("+n+") +\n'"),c&&(i=!0,d+="';\n"+c+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),u=s+t.length,t})),d+="';\n";var h=ke.call(t,"variable")&&t.variable;h||(d="with (obj) {\n"+d+"\n}\n"),d=(i?d.replace(I,""):d).replace(M,"$1").replace(D,"$1;"),d="function("+(h||"obj")+") {\n"+(h?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var b=Uc((function(){return pe(c,p+"return "+d).apply(void 0,s)}));if(b.source=d,Ba(b))throw b;return b},En.times=function(e,t){if((e=rc(e))<1||e>9007199254740991)return[];var n=4294967295,r=cn(e,4294967295);e-=4294967295;for(var o=_t(r,t=Jo(t));++n<e;)t(n);return o},En.toFinite=nc,En.toInteger=rc,En.toLength=oc,En.toLower=function(e){return cc(e).toLowerCase()},En.toNumber=ic,En.toSafeInteger=function(e){return e?Zn(rc(e),-9007199254740991,9007199254740991):0===e?e:0},En.toString=cc,En.toUpper=function(e){return cc(e).toUpperCase()},En.trim=function(e,t,n){if((e=cc(e))&&(n||void 0===t))return e.replace(G,"");if(!e||!(t=Jr(t)))return e;var r=Qt(e),o=Qt(t);return uo(r,It(r,o),Mt(r,o)+1).join("")},En.trimEnd=function(e,t,n){if((e=cc(e))&&(n||void 0===t))return e.replace(Y,"");if(!e||!(t=Jr(t)))return e;var r=Qt(e);return uo(r,0,Mt(r,Qt(t))+1).join("")},En.trimStart=function(e,t,n){if((e=cc(e))&&(n||void 0===t))return e.replace(Z,"");if(!e||!(t=Jr(t)))return e;var r=Qt(e);return uo(r,It(r,Qt(t))).join("")},En.truncate=function(e,t){var n=30,r="...";if(Va(t)){var o="separator"in t?t.separator:o;n="length"in t?rc(t.length):n,r="omission"in t?Jr(t.omission):r}var i=(e=cc(e)).length;if(Bt(e)){var a=Qt(e);i=a.length}if(n>=i)return e;var c=n-Kt(r);if(c<1)return r;var s=a?uo(a,0,c).join(""):e.slice(0,c);if(void 0===o)return s+r;if(a&&(c+=s.length-c),Ga(o)){if(e.slice(c).search(o)){var u,l=s;for(o.global||(o=ve(o.source,cc(re.exec(o))+"g")),o.lastIndex=0;u=o.exec(l);)var d=u.index;s=s.slice(0,void 0===d?c:d)}}else if(e.indexOf(Jr(o),c)!=c){var f=s.lastIndexOf(o);f>-1&&(s=s.slice(0,f))}return s+r},En.unescape=function(e){return(e=cc(e))&&z.test(e)?e.replace(L,Wt):e},En.uniqueId=function(e){var t=++Se;return cc(e)+t},En.upperCase=zc,En.upperFirst=Bc,En.each=ca,En.eachRight=sa,En.first=Di,Yc(En,(ls={},sr(En,(function(e,t){ke.call(En.prototype,t)||(ls[t]=e)})),ls),{chain:!1}),En.VERSION="4.17.20",ct(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){En[e].placeholder=En})),ct(["drop","take"],(function(e,t){Nn.prototype[e]=function(n){n=void 0===n?1:an(rc(n),0);var r=this.__filtered__&&!t?new Nn(this):this.clone();return r.__filtered__?r.__takeCount__=cn(n,r.__takeCount__):r.__views__.push({size:cn(n,4294967295),type:e+(r.__dir__<0?"Right":"")}),r},Nn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),ct(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;Nn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Jo(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),ct(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Nn.prototype[e]=function(){return this[n](1).value()[0]}})),ct(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Nn.prototype[e]=function(){return this.__filtered__?new Nn(this):this[n](1)}})),Nn.prototype.compact=function(){return this.filter(Qc)},Nn.prototype.find=function(e){return this.filter(e).head()},Nn.prototype.findLast=function(e){return this.reverse().find(e)},Nn.prototype.invokeMap=zr((function(e,t){return"function"==typeof e?new Nn(this):this.map((function(n){return gr(n,e,t)}))})),Nn.prototype.reject=function(e){return this.filter(ka(Jo(e)))},Nn.prototype.slice=function(e,t){e=rc(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Nn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),void 0!==t&&(n=(t=rc(t))<0?n.dropRight(-t):n.take(t-e)),n)},Nn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Nn.prototype.toArray=function(){return this.take(4294967295)},sr(Nn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),o=En[r?"take"+("last"==t?"Right":""):t],i=r||/^find/.test(t);o&&(En.prototype[t]=function(){var t=this.__wrapped__,a=r?[1]:arguments,c=t instanceof Nn,s=a[0],u=c||Ia(t),l=function(e){var t=o.apply(En,ht([e],a));return r&&d?t[0]:t};u&&n&&"function"==typeof s&&1!=s.length&&(c=u=!1);var d=this.__chain__,f=!!this.__actions__.length,p=i&&!d,h=c&&!f;if(!i&&u){t=h?t:new Nn(this);var b=e.apply(t,a);return b.__actions__.push({func:na,args:[l],thisArg:void 0}),new Tn(b,d)}return p&&h?e.apply(this,a):(b=this.thru(l),p?r?b.value()[0]:b.value():b)})})),ct(["pop","push","shift","sort","splice","unshift"],(function(e){var t=ye[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);En.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var o=this.value();return t.apply(Ia(o)?o:[],e)}return this[n]((function(n){return t.apply(Ia(n)?n:[],e)}))}})),sr(Nn.prototype,(function(e,t){var n=En[t];if(n){var r=n.name+"";ke.call(yn,r)||(yn[r]=[]),yn[r].push({name:t,func:n})}})),yn[_o(void 0,2).name]=[{name:"wrapper",func:void 0}],Nn.prototype.clone=function(){var e=new Nn(this.__wrapped__);return e.__actions__=go(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=go(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=go(this.__views__),e},Nn.prototype.reverse=function(){if(this.__filtered__){var e=new Nn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Nn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Ia(e),r=t<0,o=n?e.length:0,i=function(e,t,n){var r=-1,o=n.length;for(;++r<o;){var i=n[r],a=i.size;switch(i.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=cn(t,e+a);break;case"takeRight":e=an(e,t-a)}}return{start:e,end:t}}(0,o,this.__views__),a=i.start,c=i.end,s=c-a,u=r?c:a-1,l=this.__iteratees__,d=l.length,f=0,p=cn(s,this.__takeCount__);if(!n||!r&&o==s&&p==s)return no(e,this.__actions__);var h=[];e:for(;s--&&f<p;){for(var b=-1,v=e[u+=t];++b<d;){var m=l[b],g=m.iteratee,y=m.type,O=g(v);if(2==y)v=O;else if(!O){if(1==y)continue e;break e}}h[f++]=v}return h},En.prototype.at=ra,En.prototype.chain=function(){return ta(this)},En.prototype.commit=function(){return new Tn(this.value(),this.__chain__)},En.prototype.next=function(){void 0===this.__values__&&(this.__values__=tc(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?void 0:this.__values__[this.__index__++]}},En.prototype.plant=function(e){for(var t,n=this;n instanceof An;){var r=Ei(n);r.__index__=0,r.__values__=void 0,t?o.__wrapped__=r:t=r;var o=r;n=n.__wrapped__}return o.__wrapped__=e,t},En.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Nn){var t=e;return this.__actions__.length&&(t=new Nn(this)),(t=t.reverse()).__actions__.push({func:na,args:[Vi],thisArg:void 0}),new Tn(t,this.__chain__)}return this.thru(Vi)},En.prototype.toJSON=En.prototype.valueOf=En.prototype.value=function(){return no(this.__wrapped__,this.__actions__)},En.prototype.first=En.prototype.head,$e&&(En.prototype[$e]=function(){return this}),En}();We._=Gt,void 0===(o=function(){return Gt}.call(t,n,t,r))||(r.exports=o)}).call(this)}).call(this,n(100),n(265)(e))},function(e,t,n){"use strict";n.d(t,"k",(function(){return a})),n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return b})),n.d(t,"d",(function(){return m})),n.d(t,"e",(function(){return y})),n.d(t,"h",(function(){return j})),n.d(t,"i",(function(){return C})),n.d(t,"g",(function(){return S})),n.d(t,"j",(function(){return E})),n.d(t,"f",(function(){return x.a}));var r=n(32),o=n(2),i=n(90),a=function(e){var t=e.children,n=Object(r.a)(e,["children"]);return Object(o.b)(i.Flex,Object.assign({alignItems:"center",justifyContent:"center",flex:1,height:"100%"},n,{children:Object(o.b)(i.Text,{textAlign:"center",color:"GBL05A",children:t})}))},c=n(1),s=n.n(c),u=n(131),l=Object.assign;var d=function(e){return s.a.createElement(u.a,l({width:"150",height:"120",viewBox:"0 0 150 120"},e),s.a.createElement("g",{fill:"none",fillRule:"evenodd"},s.a.createElement("path",{fill:"#EBEEF5",d:"M94 29v-2.002c0-.55.443-.998 1-.998h1c.553 0 1 .446 1 .998V29h2.002c.55 0 .998.443.998 1v1c0 .553-.446 1-.998 1H97v2.002c0 .55-.443.998-1 .998h-1c-.553 0-1-.446-1-.998V32h-2.002A.997.997 0 0191 31v-1c0-.553.446-1 .998-1H94zm30.613 17.724l-21.82-4.638.207-3.023 22.237 4.727a6.004 6.004 0 014.62 7.122l-7.9 37.158a6.001 6.001 0 01-7.116 4.627l-15.31-3.254.63-2.934 15.31 3.25c1.62.34 3.218-.69 3.56-2.32l7.9-37.16a3.005 3.005 0 00-2.31-3.567zM48.596 85.727l.624 2.935-12.717 2.703a6.004 6.004 0 01-7.117-4.628L21.488 49.58a6.004 6.004 0 014.62-7.123L47 38.017l.133 3.038-20.402 4.337a3 3 0 00-2.3 3.564l7.9 37.157a3.005 3.005 0 003.56 2.317l12.71-2.703zM100 82c0 3.314-2.688 6-6.006 6H56.006A6.01 6.01 0 0150 82V34c0-3.314 2.688-6 6.006-6h27.147v3H56.006A3.003 3.003 0 0053 34v48c0 1.65 1.35 3 3.006 3h37.988A3.003 3.003 0 0097 82V42.373h3V82zm-4.5-41C89.7 41 85 36.3 85 30.5S89.7 20 95.5 20 106 24.7 106 30.5 101.3 41 95.5 41zm0-3a7.5 7.5 0 100-15 7.5 7.5 0 000 15z",fillRule:"nonzero"}),s.a.createElement("path",{fill:"#F7F8FA",d:"M47 73.22l-6.484 1.378c-.82.174-1.333.97-1.16 1.78.173.816.97 1.327 1.784 1.154L47 76.287V73.22zm0-8.594l-4.58.974c-.8.17-1.324.968-1.152 1.778a1.494 1.494 0 001.775 1.156l3.957-.84v-3.068zm0-17.285a6.002 6.002 0 00-8 5.66 6.002 6.002 0 008 5.66V47.34zm56 29.88l6.178 1.318a1.5 1.5 0 10.624-2.934L103 74.148v3.067zm0-8.58l4.275.91c.808.17 1.6-.34 1.775-1.157a1.507 1.507 0 00-1.15-1.78l-4.9-1.04v3.067zm0-8.97c.626.22 1.3.34 2 .34 3.314 0 6-2.685 6-6s-2.686-6-6-6c-.7 0-1.374.12-2 .34v11.32zM76 56a8 8 0 110-16 8 8 0 010 16zm-8 7.5c0-.828.667-1.5 1.505-1.5h12.99a1.5 1.5 0 110 3h-12.99A1.5 1.5 0 0168 63.5zm-5 8c0-.828.67-1.5 1.49-1.5h23.02c.822 0 1.49.666 1.49 1.5 0 .828-.67 1.5-1.49 1.5H64.49c-.822 0-1.49-.666-1.49-1.5z"})))},f=Object.assign;var p=function(e){return s.a.createElement(u.a,f({width:"150",height:"120",viewBox:"0 0 150 120"},e),s.a.createElement("g",{fill:"none",fillRule:"evenodd"},s.a.createElement("path",{fill:"#EBEEF5",d:"M67.757 83H45c-1.66 0-3-1.338-3-2.998V37.998A3.003 3.003 0 0145 35h53.42v-3H45c-3.31 0-6 2.686-6 5.998v42.004A5.994 5.994 0 0045 86h21.515l6.853 6.854a2.99 2.99 0 004.234 0L84.456 86H105c3.31 0 6-2.686 6-5.998v-36.54h-3v36.54A3.003 3.003 0 01105 83H83.214l-7.728 7.728L67.756 83z",fillRule:"nonzero"}),s.a.createElement("path",{fill:"#F7F8FA",d:"M55 48.5c0-.828.67-1.5 1.508-1.5h26.984a1.5 1.5 0 110 3H56.508A1.5 1.5 0 0155 48.5zm0 11c0-.828.677-1.5 1.495-1.5h37.01c.826 0 1.495.666 1.495 1.5 0 .828-.677 1.5-1.495 1.5h-37.01A1.494 1.494 0 0155 59.5zm0 11c0-.828.677-1.5 1.495-1.5h37.01c.826 0 1.495.666 1.495 1.5 0 .828-.677 1.5-1.495 1.5h-37.01A1.494 1.494 0 0155 70.5z"}),s.a.createElement("path",{fill:"#EBEEF5",d:"M94.868 50.46l18.92-18.92-2.83-2.827-18.918 18.92-2.12-2.123 18.917-18.918a3.005 3.005 0 014.245-.002l2.828 2.828a3.004 3.004 0 01-.002 4.245L96.99 52.58l-2.122-2.12zm-7.193 2.377l2.244-7.327 7.07 7.07-7.328 2.245c-1.575.482-2.473-.405-1.988-1.988z",fillRule:"nonzero"})))},h=Object.assign;var b=function(e){return s.a.createElement(u.a,h({width:"150",height:"120",viewBox:"0 0 150 120"},e),s.a.createElement("g",{fill:"none",fillRule:"evenodd"},s.a.createElement("path",{fill:"#EBEEF5",d:"M102 30.998A2.996 2.996 0 0098.998 28H50.002A2.996 2.996 0 0047 30.998v58.147l.193-.125c1.453-.94 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.94 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.94 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.94 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.94 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.413-.913 3.363-.94 4.807-.075V30.998zm-1.508 60.542c-.464-.3-1.21-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.21-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.21-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.21-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.21-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.21-.298-1.67 0l-4.316 2.79A1.99 1.99 0 0144 93V30.997C44 27.687 46.68 25 50.002 25h48.996A5.996 5.996 0 01105 30.998v62c0 .45-.147.866-.396 1.2l-4.112-2.658z",fillRule:"nonzero"}),s.a.createElement("path",{fill:"#F7F8FA",d:"M55 39c0-.553.44-1 1-1h19c.553 0 1 .44 1 1v19c0 .553-.44 1-1 1H56c-.553 0-1-.44-1-1V39zm25 .5c0-.828.675-1.5 1.498-1.5h11.004c.827 0 1.498.666 1.498 1.5 0 .828-.675 1.5-1.498 1.5H81.498A1.495 1.495 0 0180 39.5zm0 9c0-.828.675-1.5 1.498-1.5h11.004c.827 0 1.498.666 1.498 1.5 0 .828-.675 1.5-1.498 1.5H81.498A1.495 1.495 0 0180 48.5zm0 9c0-.828.675-1.5 1.498-1.5h11.004c.827 0 1.498.666 1.498 1.5 0 .828-.675 1.5-1.498 1.5H81.498A1.495 1.495 0 0180 57.5zm-25 9c0-.828.677-1.5 1.505-1.5h35.99a1.5 1.5 0 110 3h-35.99A1.5 1.5 0 0155 66.5zm0 9c0-.828.665-1.5 1.505-1.5h24.99a1.5 1.5 0 110 3h-24.99A1.5 1.5 0 0155 75.5z"})))},v=Object.assign;var m=function(e){return s.a.createElement(u.a,v({width:"150",height:"120",viewBox:"0 0 150 120"},e),s.a.createElement("g",{fill:"none",fillRule:"evenodd"},s.a.createElement("path",{fill:"#EBEEF5",d:"M37.273 69.98c.212-3.3 3.063-5.98 6.387-5.98h63.91c3.315 0 6.175 2.673 6.387 5.98l1.285 20.04c.212 3.302-2.302 5.98-5.615 5.98H41.603c-3.313 0-5.827-2.673-5.615-5.98l1.285-20.04zm1.71 20.23C38.88 91.788 40.02 93 41.603 93h68.023c1.58 0 2.722-1.215 2.62-2.79l-1.284-20.037c-.11-1.726-1.657-3.173-3.394-3.173H43.66c-1.74 0-3.282 1.447-3.393 3.173L38.982 90.21zM47 58h58v-3.5a1.5 1.5 0 013 0v5c0 .414-.168.79-.44 1.06a1.49 1.49 0 01-1.06.44h-61a1.49 1.49 0 01-1.06-.44A1.49 1.49 0 0144 59.5v-5a1.5 1.5 0 013 0V58zm50-31H55v28.008h-3V25.992c0-1.1 1.025-1.992 2.283-1.992h43.434c1.26 0 2.283.898 2.283 1.992v29.016h-3V27zM60 87.5c0-.828.668-1.5 1.5-1.5h29c.828 0 1.5.666 1.5 1.5 0 .828-.668 1.5-1.5 1.5h-29c-.828 0-1.5-.666-1.5-1.5zM46 72.01c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm-52 7c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98z",fillRule:"nonzero"}),s.a.createElement("path",{fill:"#F7F8FA",d:"M71 34.5a1.5 1.5 0 011.497-1.5h7.006a1.5 1.5 0 110 3h-7.006A1.495 1.495 0 0171 34.5zm-9 8c0-.828.665-1.5 1.505-1.5h24.99a1.5 1.5 0 110 3h-24.99A1.5 1.5 0 0162 42.5zm0 7c0-.828.67-1.5 1.495-1.5h19.01c.826 0 1.495.666 1.495 1.5 0 .828-.67 1.5-1.495 1.5h-19.01A1.494 1.494 0 0162 49.5z"})))},g=Object.assign;var y=function(e){return s.a.createElement(u.a,g({width:"150",height:"120",viewBox:"0 0 150 120"},e),s.a.createElement("g",{fill:"none",fillRule:"evenodd"},s.a.createElement("path",{fill:"#EBEEF5",d:"M106.807 78h8.19A3.004 3.004 0 00118 74.998V34.002A3 3 0 00114.997 31H61.003A3.004 3.004 0 0058 34.002V36h-3v-1.998A6.004 6.004 0 0161.003 28h53.994A6 6 0 01121 34.002v40.996A6.004 6.004 0 01114.997 81h-5.372l-.375 6.004c-.138 2.207-1.514 2.732-3.074 1.172L99 81h-5v-3h6.243l6.178 6.178.388-6.178zM44.824 95.176c-1.56 1.56-2.936 1.035-3.074-1.172L41.312 87H37a6 6 0 01-6-6.006V45.006A6.01 6.01 0 0137 39h48a6 6 0 016 6.006v35.988A6.01 6.01 0 0185 87H53l-8.176 8.176zm-.245-3.998L51.755 84H85c1.65 0 3-1.35 3-3.006V45.006A3 3 0 0085 42H37c-1.65 0-3 1.35-3 3.006v35.988A3 3 0 0037 84h7.13l.45 7.178z",fillRule:"nonzero"}),s.a.createElement("path",{fill:"#F7F8FA",d:"M94 49h9.494a1.5 1.5 0 110 3H94v-3zm0 9h9.494a1.5 1.5 0 110 3H94v-3zm-50 6.5c0-.828.68-1.5 1.505-1.5h30.99a1.5 1.5 0 110 3h-30.99A1.5 1.5 0 0144 64.5zm0-14.503c0-.55.453-.997.997-.997h6.006c.55 0 .997.453.997.997v6.006c0 .55-.453.997-.997.997h-6.006c-.55 0-.997-.453-.997-.997v-6.006zM44 73.5c0-.828.68-1.5 1.505-1.5h30.99a1.5 1.5 0 110 3h-30.99A1.5 1.5 0 0144 73.5z"})))},O=Object.assign;var j=function(e){return s.a.createElement(u.a,O({width:"150",height:"120",viewBox:"0 0 150 120"},e),s.a.createElement("path",{fill:"#EBEEF5",d:"M62.85 82.335c-.13-.03-.202-.04-.25-.044-.117 0-.31.05-.87.34-7.092 2.65-7.508 2.79-9.903 3.43-.955.26-1.885.46-2.826.63-1.24.23-2.52-.08-3.35-.83-1.12-1.01-1.16-2.58-.02-3.73l.28-.22s.074-.053.204-.19c.265-.26.54-.63.81-1.102.588-1.05 1.025-2.445 1.224-4.246.145-.8-.374-2.14-1.117-2.833-.23-.216-.696-.727-1.487-1.683-3.62-4.37-6.03-12.332-6.03-18.87C39.5 37.19 53.48 23.5 72.446 23.5c19.842 0 32.947 13.235 32.947 29.466 0 21.157-22.76 36.133-42.028 29.488-.182-.04-.473-.11-.515-.12zm-.068-3.038c.233.014.448.05.717.108l.6.14c17.56 6.102 38.29-7.514 38.29-26.58 0-14.58-11.77-26.465-29.95-26.465-17.32 0-29.95 12.36-29.95 26.466 0 5.885 2.203 13.176 5.333 16.96.716.865 1.102 1.287 1.222 1.4 1.432 1.34 2.34 3.65 2.044 5.404-.246 2.172-.8 3.94-1.585 5.338a8.3 8.3 0 01-1.213 1.68c1.02-.175 1.87-.366 2.75-.598 2.25-.596 2.667-.743 9.4-3.245.95-.47 1.596-.653 2.326-.608zm11.554 9.593a1.5 1.5 0 111.919-2.306c5.242 4.364 12.82 5.41 19.8 2.98l.173-.05c.084-.017.372-.085.433-.1.22-.046.39-.074.59-.086.61-.037 1.14.11 1.87.472 4.83 1.793 5.13 1.9 6.73 2.324.57.15 1.12.276 1.68.38-.22-.318-.46-.7-.68-1.153-.58-1.14-.99-2.51-1.173-4.12-.232-1.39.38-2.75 1.537-3.83.12-.11.43-.44.947-1.05 2.1-2.47 3.356-7.15 3.356-11.61 0-4.7-.62-7.39-2.7-10.094a1.5 1.5 0 012.381-1.828c2.56 3.33 3.318 6.62 3.318 11.925 0 5.11-1.433 10.45-4.066 13.555-.59.693-.98 1.107-1.19 1.304-.49.46-.675.873-.623 1.16.16 1.37.47 2.41.894 3.25.324.647.62 1.013.756 1.13 1.162 1.17.883 2.636-.177 3.54-.78.67-1.91 1-2.948.817-.69-.124-1.373-.28-2.073-.46-1.75-.466-2.05-.57-7.08-2.44l-.156-.068c-.344-.173-.42-.195-.414-.195-.142.03-.33.075-.464.105-7.91 2.728-16.56 1.52-22.627-3.533z"}))},w=Object.assign;var C=function(e){return s.a.createElement(u.a,w({width:"150",height:"120",viewBox:"0 0 150 120"},e),s.a.createElement("path",{fill:"#EBEEF5",d:"M46.76 78.71a1.895 1.895 0 00-1.378 2.092c.13.948.94 1.648 1.904 1.635h55.468a1.882 1.882 0 001.884-1.635c.13-.95-.46-1.846-1.367-2.09a8.61 8.61 0 01-6.4-7.872l-2.473-20.928c-.96-7.872-6.567-14.37-14.178-16.435l-.986-.267-.113-1.014c-.24-2.106-2.01-3.696-4.11-3.696s-3.87 1.59-4.104 3.696l-.114 1.014-.98.267c-7.61 2.063-13.22 8.563-14.18 16.43L53.15 70.84c-.2 3.74-2.79 6.926-6.393 7.87zm50.61-29.155l2.482 20.982c.127 2.562 1.817 4.654 4.19 5.276a4.895 4.895 0 013.568 5.397c-.336 2.446-2.434 4.26-4.876 4.227H47.306a4.883 4.883 0 01-4.896-4.227 4.897 4.897 0 013.58-5.4 5.614 5.614 0 004.17-5.168l2.49-21.093c1.068-8.77 7.135-16.06 15.46-18.7.807-3.11 3.615-5.35 6.9-5.35s6.094 2.24 6.9 5.35c8.325 2.64 14.393 9.93 15.46 18.7zm-16.417 38.91c-.288 3.184-3.007 5.36-5.943 5.36-2.936 0-5.655-2.176-5.943-5.36l-2.988.27c.43 4.82 4.52 8.09 8.93 8.09s8.49-3.27 8.93-8.09l-2.99-.27z"}))},k=Object.assign;var S=function(e){return s.a.createElement(u.a,k({width:"150",height:"120",viewBox:"0 0 150 120"},e),s.a.createElement("path",{fill:"#E7EAF1",d:"M39.09 35.994c.05-3.31 2.777-5.994 6.096-5.994h18.562c2.21 0 4.667 1.66 5.487 3.708L70.152 36h34.85A5.997 5.997 0 01111 41.99v40.02c0 3.308-2.69 5.99-6 5.99H45c-3.314 0-6-2.686-6-5.99V41.99c0-.077 0-.153.004-.23l.086-5.766zm2.914 5.81L42 41.99v40.02A2.998 2.998 0 0045 85h60c1.655 0 3-1.342 3-2.99V41.99a2.998 2.998 0 00-3-2.99H68.12l-1.67-4.177C66.085 33.915 64.73 33 63.747 33h-18.56c-1.68 0-3.07 1.368-3.097 3.038l-.086 5.767zM69.89 72.658c-1.56.715-3.105-.395-2.906-2.113l.697-6.032-4.11-4.47c-1.16-1.265-.58-3.076 1.115-3.418l5.952-1.2 2.982-5.29c.843-1.498 2.744-1.507 3.593 0l2.98 5.29 5.955 1.2c1.684.34 2.28 2.145 1.11 3.418l-4.11 4.47.698 6.032c.197 1.708-1.336 2.832-2.908 2.113l-5.52-2.527-5.523 2.53z"}))},x=n(875),R=Object.assign;var E=function(e){return s.a.createElement(u.a,R({width:"150",height:"120",viewBox:"0 0 150 120"},e),s.a.createElement("g",{fill:"none",fillRule:"evenodd"},s.a.createElement("path",{fill:"#EBEEF5",d:"M109.545 78h5.463A2.995 2.995 0 00118 75.01V34.99c0-1.648-1.34-2.99-2.992-2.99H62.992A2.995 2.995 0 0060 34.99v2.027h-3V34.99c0-3.308 2.69-5.99 5.992-5.99h52.016A5.993 5.993 0 01121 34.99v40.02c0 3.308-2.69 5.99-5.992 5.99h-2.744l-.558 5.65c-.217 2.197-1.783 2.842-3.49 1.45l-8.7-7.1h-18.69v-3h19.76l8.29 6.767.67-6.767zM37.33 91.9c-1.942 1.057-3.23.15-2.878-2.027l1.237-7.64A25.886 25.886 0 0130 66c0-14.36 11.637-26 26-26 14.36 0 26 11.637 26 26 0 14.36-11.637 26-26 26-4.627 0-8.973-1.21-12.737-3.327L37.33 91.9zm5.958-6.656l1.447.814A22.878 22.878 0 0056 89c12.705 0 23-10.296 23-23 0-12.705-10.296-23-23-23-12.705 0-23 10.296-23 23a22.894 22.894 0 005.03 14.36l.833 1.04-1.11 6.855 5.535-3.01zm13.108-31.452c2.304 0 4.176.612 5.616 1.908 1.44 1.26 2.16 2.988 2.16 5.148 0 1.764-.468 3.24-1.368 4.392-.324.396-1.332 1.332-3.024 2.808-.684.576-1.188 1.224-1.512 1.872-.396.72-.576 1.512-.576 2.376v.612H53.84v-.612c0-1.332.216-2.484.72-3.42.468-1.008 1.836-2.484 4.068-4.464l.612-.684c.648-.828 1.008-1.692 1.008-2.628 0-1.26-.36-2.232-1.044-2.952-.72-.72-1.764-1.08-3.06-1.08-1.62 0-2.808.504-3.528 1.548-.648.864-.972 2.088-.972 3.672h-3.78c0-2.628.756-4.68 2.268-6.192 1.512-1.548 3.6-2.304 6.264-2.304zm-.648 21.06c.756 0 1.404.216 1.908.72.504.468.756 1.08.756 1.836s-.288 1.368-.792 1.872a2.703 2.703 0 01-1.872.72c-.72 0-1.368-.252-1.872-.756s-.756-1.116-.756-1.836c0-.756.252-1.368.756-1.836.504-.504 1.152-.72 1.872-.72z",fillRule:"nonzero"}),s.a.createElement("path",{fill:"#F7F8FA",d:"M83.23 56h24.275c.818 0 1.495-.672 1.495-1.5 0-.834-.67-1.5-1.495-1.5H81.93a28.845 28.845 0 013.002 11h12.56a1.5 1.5 0 110 3h-12.51a29.422 29.422 0 00-.05-3zM72.285 42h35.22c.826 0 1.495.666 1.495 1.5 0 .828-.677 1.5-1.495 1.5H76a28.945 28.945 0 00-3.715-3z"})))}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.onViewedOnce=t.isViewed=void 0;var o=r(n(207));t.isViewed=function(e){if(!document.body||!document.body.contains(e))return!1;var t=e.getBoundingClientRect(),n=document.documentElement;return t.bottom<(window.innerHeight||n.clientHeight)};var i=function(){};t.onViewedOnce=function(e,n,r){if(t.isViewed(e))return n.call(r,e),i;var a=o.default((function(){t.isViewed(e)&&(n.call(r,e),c())}),250);function c(){window.removeEventListener("scroll",a),window.removeEventListener("resize",a)}return window.addEventListener("scroll",a),window.addEventListener("resize",a),c}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.onFullyViewedOnce=t.isFullyViewed=void 0;var o=r(n(207)),i=r(n(235));t.isFullyViewed=function(e,t){var n=e.getBoundingClientRect(),r=n.right,o=n.bottom,i=t.getBoundingClientRect(),a=i.right;return o<=i.bottom&&r<=a},t.onFullyViewedOnce=function(e,n,r,a){if(t.isFullyViewed(e,n))return r.call(a,e),i.default;var c=o.default((function(){t.isFullyViewed(e,n)&&(r.call(a,e),s())}),250);n.addEventListener("scroll",c),n.addEventListener("resize",c);var s=function(){n.removeEventListener("scroll",c),n.removeEventListener("resize",c)};return s}},function(e,t,n){"use strict";n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return u}));var r=n(1),o=n(839),i=n(28),a=n(66),c=function(e){i.a.trackCardShow(e,{id:7844},{button:{text:"inlinezvideo"}})},s=function(e,t,n){var r;i.a.trackEvent(e.target,{id:7846,action:"OpenUrl"},{button:{text:"inlinezvideo"}}),null==t||null===(r=t.onImageClick)||void 0===r||r.call(t,e,n)},u=function(e,t,n){var r;i.a.trackEvent(e.target,{id:7846,action:"OpenUrl"},{button:{text:"inlinezvideo"}}),null==t||null===(r=t.onImageClick)||void 0===r||r.call(t,e,n)};t.a=function(e,t,n){var i=e["data-text"],l=e.href,d=e.zvideoLinkCardProps;Object(r.useEffect)((function(){n&&Object(o.onViewedOnce)(t.current,(function(){return c(t.current)}))}),[n,t]);var f=Object(a.c)((function(e){s(e,{title:i,url:l,video:{}})})),p=Object(a.c)((function(e){u(e,d,{title:i,url:l})}));return n?{handleImageClick:f,handleInfoClick:p}:{}}},function(e,t,n){"use strict";var r=n(1),o=n(5);function i(e){var t=e.className,n=e.children,i=e.onEvent,a=Object(r.useCallback)((function(e){i(e)||e.stopPropagation()}),[i]);return Object(o.g)("div",{className:t,onBeforeInput:a,onBlur:a,onCompositionEnd:a,onCompositionStart:a,onCopy:a,onCut:a,onDragEnd:a,onDragEnter:a,onDragLeave:a,onDragOver:a,onDragStart:a,onDrop:a,onFocus:a,onInput:a,onKeyDown:a,onKeyPress:a,onKeyUp:a,onMouseUp:a,onPaste:a,onSelect:a,onClick:a},n)}i.defaultProps={onEvent:function(){return!1}},t.a=i},function(e,t,n){"use strict";var r={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i=Object.defineProperty,a=Object.getOwnPropertyNames,c=Object.getOwnPropertySymbols,s=Object.getOwnPropertyDescriptor,u=Object.getPrototypeOf,l=u&&u(Object);e.exports=function e(t,n,d){if("string"!=typeof n){if(l){var f=u(n);f&&f!==l&&e(t,f,d)}var p=a(n);c&&(p=p.concat(c(n)));for(var h=0;h<p.length;++h){var b=p[h];if(!(r[b]||o[b]||d&&d[b])){var v=s(n,b);try{i(t,b,v)}catch(e){}}}return t}return t}},function(e,t,n){"use strict";var r=n(1),o=n(66);t.a=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.rootMargin,a=n.threshold,c=n.once,s=void 0===c||c;e=Array.isArray(e)?e:e?[e]:[];var u=Object(r.useRef)(null),l=Object(o.c)(t);Object(r.useEffect)((function(){if(e.length)return u.current&&e.forEach((function(e){return u.current.unobserve(e)})),u.current=new IntersectionObserver((function(e){e.forEach((function(e){e.intersectionRatio>0&&(l(e),s&&u.current.unobserve(e.target))}))}),{rootMargin:i,threshold:a}),e.forEach((function(e){return u.current.observe(e)})),function(){e.forEach((function(e){return u.current.unobserve(e)}))}}),[e,i,JSON.stringify(a),s])}},function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return k}));var r=n(33),o=n.n(r),i=n(43),a=n.n(i),c=n(1),s=n.n(c),u=n(11),l=n.n(u),d=n(5),f=function(e){var t=e.className,n=e.title,r=e.options,i=e.children,c=a()(e,["className","title","options","children"]);return Object(d.g)("div",o()({className:l()("List",t)},c),(n||r)&&Object(d.g)("div",{className:"List-header"},Object(d.g)("h4",{className:"List-headerText"},n),Object(d.g)("div",{className:"List-headerOptions"},r)),i)},p=n(20),h=n.n(p),b=n(21),v=n.n(b),m=n(22),g=n.n(m),y=n(23),O=n.n(y),j=n(17),w=n.n(j);function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var o=w()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return O()(this,n)}}var k=function(e){g()(n,e);var t=C(n);function n(){return h()(this,n),t.apply(this,arguments)}return v()(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.tabIndex,r=e.meta,o=e.children,i=e.onRef;return Object(d.g)("div",{className:l()("List-item",t),tabIndex:n,ref:i},r&&Object(d.g)("div",{className:"List-itemMeta"},r),o)}}]),n}(s.a.Component);n(987)},function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var r=n(20),o=n.n(r),i=n(21),a=n.n(i),c=n(22),s=n.n(c),u=n(23),l=n.n(u),d=n(17),f=n.n(d),p=n(1),h=n.n(p),b=n(11),v=n.n(b),m=n(111),g=n.n(m),y=n(5);function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var o=f()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l()(this,n)}}var j=function(e){s()(n,e);var t=O(n);function n(){var e;o()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={uid:g()()},e.handleChange=function(t){var n=t.target.files;n&&e.uploadFiles(n),e.setState({uid:g()()})},e.uploadFiles=function(t){var n=e.props.multiple,r=g()(),o=Array.prototype.slice.call(t);n?o.map((function(t){e.upload(t,r)})):e.upload(o[0],r)},e.upload=function(t,n){var r,o=e.props,i=o.beforeUpload,a=o.customUpload,c=o.onStart,s=o.onSuccess,u=o.onError;if(i&&(r=i(t)),!1!==r&&a){var l={file:t,uid:n,status:"uploading"};c&&c(l),Promise.resolve().then((function(){return a({file:t})})).then((function(e){s&&s(Object.assign({},l,{remoteInfo:e,status:"success"}))})).catch((function(e){u&&u(Object.assign({},l,{remoteInfo:e,status:"error"}))}))}},e}return a()(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.accept,r=e.multiple,o=e.disabled,i=e.onRef,a=e.onClick,c=e.children;return Object(y.g)("label",{className:v()("UploadPicture-wrapper",t)},Object(y.g)("input",{type:"file",accept:n,multiple:r,className:"UploadPicture-input",disabled:o,ref:i,onChange:this.handleChange,onClick:a}),c)}}]),n}(h.a.Component);j.defaultProps={multiple:!1,disabled:!1}},function(e,t,n){"use strict";var r=n(57),o=n.n(r),i=n(1),a=n(112);var c="function"==typeof Image,s={},u=c?a((function(e){return new Promise((function(t){return n=e,r=function(e,n){s[e]=n,t(n)},(o=new Image).onload=function(){var e=o.width>0&&o.height>0;r(n,e)},o.onerror=function(){r(n,!1)},void(o.src="data:image/webp;base64,"+{lossy:"UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",lossless:"UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==",alpha:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==",animation:"UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"}[n]);var n,r,o}))})):function(){return Promise.resolve(!1)};t.a=function(e){var t=s[e],n=Object(i.useState)(t),r=o()(n,2),a=r[0],l=r[1];return c&&void 0===t&&u(e).then(l),a}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={TAB:9,ESCAPE:27,ARROW_LEFT:37,ARROW_UP:38,ARROW_RIGHT:39,ARROW_DOWN:40}},function(e,t,n){e.exports=n(59)(202)},function(e,t,n){"use strict";var r=n(1027),o=n(1028);e.exports=function(e,t){var n=t.getStartKey(),i=t.getStartOffset(),a=t.getEndKey(),c=t.getEndOffset(),s=o(e,t).getBlockMap(),u=s.keySeq(),l=u.indexOf(n),d=u.indexOf(a)+1;return r(s.slice(l,d).map((function(e,t){var r=e.getText(),o=e.getCharacterList();return n===a?e.merge({text:r.slice(i,c),characterList:o.slice(i,c)}):t===n?e.merge({text:r.slice(i),characterList:o.slice(i)}):t===a?e.merge({text:r.slice(0,c),characterList:o.slice(0,c)}):e})))}},function(e,t,n){"use strict";var r=n(91)||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(1032),i=n(836),a=n(837),c=(0,i.Map)(),s=0;function u(e,t){console.warn("WARNING: "+e+' will be deprecated soon!\nPlease use "'+t+'" instead.')}var l={getLastCreatedEntityKey:function(){return u("DraftEntity.getLastCreatedEntityKey","contentState.getLastCreatedEntityKey"),l.__getLastCreatedEntityKey()},create:function(e,t,n){return u("DraftEntity.create","contentState.createEntity"),l.__create(e,t,n)},add:function(e){return u("DraftEntity.add","contentState.addEntity"),l.__add(e)},get:function(e){return u("DraftEntity.get","contentState.getEntity"),l.__get(e)},mergeData:function(e,t){return u("DraftEntity.mergeData","contentState.mergeEntityData"),l.__mergeData(e,t)},replaceData:function(e,t){return u("DraftEntity.replaceData","contentState.replaceEntityData"),l.__replaceData(e,t)},__getLastCreatedEntityKey:function(){return""+s},__create:function(e,t,n){return l.__add(new o({type:e,mutability:t,data:n||{}}))},__add:function(e){var t=""+ ++s;return c=c.set(t,e),t},__get:function(e){var t=c.get(e);return t||a(!1),t},__mergeData:function(e,t){var n=l.__get(e),o=r({},n.getData(),t),i=n.set("data",o);return c=c.set(e,i),i},__replaceData:function(e,t){var n=l.__get(e).set("data",t);return c=c.set(e,n),n}};e.exports=l},function(e,t,n){"use strict";var r={encode:function(e,t,n){return e+"-"+t+"-"+n},decode:function(e){var t=e.split("-"),n=t[0],r=t[1],o=t[2];return{blockKey:n,decoratorKey:parseInt(r,10),leafKey:parseInt(o,10)}}};e.exports=r},function(e,t){e.exports=function(e){return null==e}},function(e,t,n){"use strict";n.d(t,"c",(function(){return v})),n.d(t,"b",(function(){return y})),n.d(t,"a",(function(){return O}));var r=n(1),o=n.n(r),i=n(11),a=n.n(i),c=n(318),s=n.n(c),u=n(367),l=n(826),d=n(1281),f=n(5),p={answer:"回答",article:"文章",zvideo:"视频",question:"问题",collection:"收藏夹",roundtable:"圆桌",topic:"话题"},h={voteupCount:"赞同",commentCount:"评论",playCount:"播放",followerCount:"关注",answerCount:"回答",visitCount:"浏览"},b={answer:["voteupCount","commentCount"],article:["voteupCount","commentCount"],zvideo:["playCount","voteupCount"],question:["followerCount","answerCount"],collection:["visitCount","followerCount"],default:["followerCount","visitCount"]},v=function(e){var t=e.twoLine,n=e.children;return Boolean(n)&&Object(f.g)("span",{className:a()("LinkCard-title",{"two-line":t})},n)},m=function(e){var t=e.author,n=e.children;return Boolean(t)&&Object(f.g)("span",{className:"LinkCard-excerpt"},Object(f.g)("span",{className:"LinkCard-author"},t,n?"：":" 创作"),Boolean(n)&&n)},g=function(e){var t=e.data,n=t.objectType,r=(b[n]||b.default).map((function(e){var n=t[e];return"".concat(Object(u.cnNiceNumber)(n)).concat(h[e])})).filter(Boolean).join(" · ");return Object(f.g)("span",{className:"LinkCard-desc"},r,Object(f.g)("span",{className:"LinkCard-tag"},p[n]))},y=function(e){var t=e.url,n=Object(r.useMemo)((function(){var e=null,n=s()(t,!0);return"link.zhihu.com"===n.hostname&&(e=n.query.target),(e||t).replace(/^https?:\/\//,"")}),[t]);return Object(f.g)("span",{className:"LinkCard-desc"},Object(f.g)(l.a,{size:14,center:!0}),n)},O=function(e){var t=e.url,n=e.isVideo,r=e.ratio,o=void 0===r?1:r,i=e.onClick;return Boolean(t)&&Object(f.g)("span",{className:"LinkCard-image",style:{height:60*o}},Object(f.g)("img",{src:t,onClick:i,alt:n?"点击可播放视频":""}),n&&Object(f.g)("span",{className:"LinkCard-image--video"},Object(f.g)(d.a,{size:10,center:!0})))};t.d=o.a.forwardRef((function(e,t){var n=e.url,r=e.data,i=e.onClick,a=e.onClickImage,c="2"===e.newLinkCardAb,s=r.title,u=r.author,l=r.excerpt,d=r.thumbnail,p=r.objectType;return Object(f.g)(o.a.Fragment,null,Object(f.g)("span",{ref:t,className:"LinkCard-contents",onClick:i},Object(f.g)(v,{twoLine:!u||c},s),!c&&Object(f.g)(m,{author:u},l),p?Object(f.g)(g,{data:r}):Object(f.g)(y,{url:n})),Object(f.g)(O,{url:d,isVideo:"zvideo"===p,onClick:a}))}))},function(e,t,n){},function(e,t,n){"use strict";var r=n(25),o=n(49);t.a=function(){return Object(r.useSelector)(o.e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n(110),o=n.n(r),i=n(57),a=n.n(i),c=n(1),s=n(63),u=n(90),l=n(71),d=n.n(l),f=n(234),p=n(369),h=n(5),b=function(e){return/^(\w+:)?\/\//.test(e)?e:location.origin+e},v=function(e,t){var n=t.params,r=t.onRequestOpen,o=Object(p.b)();return function(t){var i=e.href,c=e.onClick;if(c&&c(t),!t.defaultPrevented&&i){var u=function(e,t){if(!t)return e;var n=e.split("#"),r=a()(n,2),o=r[0],i=r[1],c=o+(o.includes("?")?"&":"?")+t;return i?c+"#"+i:c}(b(i),n);if((null==o?void 0:o.ZhihuHybrid)||(null==o?void 0:o.Zhihu))return t.preventDefault(),void s.a.dispatch("base/openURL",{url:u});(null==r?void 0:r({ua:o,url:u}))&&t.preventDefault()}}},m=function(e,t){var n=t.extra;return{zaType:"Button",zaAction:"OpenUrl",zaEventType:"Click",shouldTrackClick:Boolean(e),extra:d()({link:{get url(){return b(e)}}},n)}},g=Object(c.forwardRef)((function(e,t){var n=e.params,r=e.onRequestOpen,i=e.extra,a=e.as,c=void 0===a?u.Link:a,s=o()(e,["params","onRequestOpen","extra","as"]);return Object(h.g)(f.c,Object.assign({as:c},m(s.href,{extra:i}),s,{ref:t,onClick:v(s,{params:n,onRequestOpen:r})}))}))},,function(e,t,n){"use strict";n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return L})),n.d(t,"d",(function(){return z})),n.d(t,"f",(function(){return F})),n.d(t,"e",(function(){return V})),n.d(t,"g",(function(){return W})),n.d(t,"h",(function(){return G})),n.d(t,"c",(function(){return X}));var r=n(57),o=n.n(r),i=n(33),a=n.n(i),c=n(43),s=n.n(c),u=n(1),l=n.n(u),d=n(235),f=n.n(d),p=n(42),h=n(5),b=function(e){return function(t){var n=Object(u.useState)(null),r=o()(n,2),i=r[0],c=r[1],l=e.idAttr,d=e.selector,b=e.component,v=e.targetClassName,m=e.cardDataFilter,g=e.getCardProps,y=t.root,O=s()(t,["root"]),j=l&&d&&v&&Object(u.useCallback)(function(e){var t=e.idAttr,n=e.targetClassName;return function(e){var r=e.getAttribute(t),o=document.createElement("div");return o.className=n,e.parentNode.replaceChild(o,e),{data:{id:r},target:o}}}({idAttr:l,targetClassName:v}),[l,v]),w=Object(u.useMemo)((function(){return j?function(e){return Array.from(e.querySelectorAll(d)).map(j)}:f.a}),[j,y,d]);return Object(u.useEffect)((function(){if(y||d&&m){var e=(m||w)(y).map((function(e){var t=e.data,n=e.target,r=null;return"function"==typeof g&&(r=g(t)),Object(p.createPortal)(Object(h.g)(b,a()({key:t.id,id:t.id},r,O)),n)}));e.length>0&&c(e)}}),[y]),i}},v=b({idAttr:"data-ad-id",selector:"a[data-ad-id]",targetClassName:"RichText-ADLinkCardContainer",component:n(996).a}),m=n(28),g=n(234),y=n(7),O=n(868),j=n(397),w=n.n(j),C=n(11),k=n.n(C),S=n(371),x=n.n(S),R=n(150),E=n(367);function _(){var e=w()(["","的文章"]);return _=function(){return e},e}var A=function(e){var t=e.authorName,n=e.voteupCount;return Object(h.g)(l.a.Fragment,null,x()(_(),t),n>=100&&" · ".concat(Object(E.cnNiceNumber)(n),"赞同"))};function T(e){var t=e.cardRef,n=e.useOpenArticleButton,r=e.handleClickLink,o=e.title,i=e.excerptText,a=e.imgUrlSrc,c=e.voteupCount,s=e.commentCount;return Object(h.g)("div",{className:"ArticleLinkCard",ref:t},Object(h.g)("span",{className:"ArticleLinkCard-title"},o),Boolean(i)&&Object(h.g)("div",{className:"ArticleLinkCard-excerpt"},i),a&&Object(h.g)("div",{className:"ArticleLinkCard-imageWrapper"},Object(h.g)("img",{src:Object(R.imgUrl)(a,"540x300"),className:"ArticleLinkCard-image",alt:""})),Object(h.g)("div",{className:"ArticleLinkCard-bottom"},Object(h.g)("span",{className:"ArticleLinkCard-hint"},"".concat(Object(E.cnNiceNumber)(c),"赞同 · ").concat(Object(E.cnNiceNumber)(s),"评论")),n&&Object(h.g)("span",{onClick:r,className:"ArticleLinkCard-hybridLink"},"查看完整文章")),Object(h.g)("div",{className:"ArticleLinkCard-bottomCardGradient"}))}function N(e){var t=e.cardRef,n=e.useOpenArticleButton,r=e.handleClickLink,o=e.title,i=e.content,a=e.imgUrlSrc,c=e.voteupCount,s=e.authorName,u=e.avatarUrl;return Object(h.g)("div",{className:"ArticleLinkCard AvatarArticleLinkCard",ref:t},Object(h.g)("div",{className:"AvatarArticleLinkCard-info"},Object(h.g)("div",{className:"AvatarArticleLinkCard-hint"},u&&Object(h.g)("img",{className:"AvatarArticleLinkCard-avatar",src:u,alt:""}),Object(h.g)(A,{authorName:s,voteupCount:c})),n&&Object(h.g)("span",{onClick:r,className:"AvatarArticleLinkCard-hybridLink"},"查看全文")),Object(h.g)("span",{className:"ArticleLinkCard-title"},o),Object(h.g)("div",{className:k()("ArticleLinkCard-content",{"ArticleLinkCard-content--noImg":!a})},Object(h.g)("div",{dangerouslySetInnerHTML:{__html:i}})),!a&&Object(h.g)("span",{className:"AvatarArticleLinkCard-more"},"更多内容"),a&&Object(h.g)("img",{className:"AvatarArticleLinkCard-image",src:a,alt:""}))}function I(e){var t=e.cardRef,n=e.useOpenArticleButton,r=e.handleClickLink,o=e.title,i=e.content,a=e.imgUrlSrc,c=e.voteupCount,s=e.authorName;return Object(h.g)("div",{className:"ArticleLinkCard QuoteArticleLinkCard",ref:t},Object(h.g)("span",{className:"ArticleLinkCard-title"},o),Object(h.g)("div",{className:"QuoteArticleLinkCard-hint"},Object(h.g)(A,{authorName:s,voteupCount:c})),Object(h.g)("div",{className:k()("ArticleLinkCard-content QuoteArticleLinkCard-content",{"ArticleLinkCard-content--noImg":!a})},Object(h.g)("div",{dangerouslySetInnerHTML:{__html:i}})),!a&&n&&Object(h.g)("div",{onClick:r,className:"QuoteArticleLinkCard-hybridLink"},"查看全文"),a&&Object(h.g)("img",{className:"QuoteArticleLinkCard-image",src:a,alt:""}))}function M(e){var t=e.article,n=t.title,r=t.excerpt,o=t.content,i=t.imageUrl,a=t.voteupCount,c=t.commentCount,s=t.author,l=void 0===s?{}:s,d=e.styleAbParam,f=e.cardRef,p=e.useOpenArticleButton,b=e.handleClickLink,v=Object(u.useMemo)((function(){var e=document.createElement("div");return e.innerHTML=r,e.textContent}),[r]),m=l.name,g=l.avatarUrl;return"1"===d?Object(h.g)(N,{cardRef:f,useOpenArticleButton:p,handleClickLink:b,title:n,content:o,imgUrlSrc:i,voteupCount:a,authorName:m,avatarUrl:g}):"2"===d?Object(h.g)(I,{cardRef:f,useOpenArticleButton:p,handleClickLink:b,title:n,content:o,imgUrlSrc:i,voteupCount:a,authorName:m}):Object(h.g)(T,{cardRef:f,useOpenArticleButton:p,handleClickLink:b,title:n,excerptText:v,imgUrlSrc:i,voteupCount:a,commentCount:c})}var D=function(e){var t=e.article.id,n=e.article,r=e.useOpenArticleButton,o=e.enableZa,i=e.styleAbParam,a=Object(u.useRef)(null);Object(u.useEffect)((function(){o&&(m.a.setModule(a.current,{module:"Content"},{card:{content:{type:"Post",token:String(t)}}}),m.a.trackCardShow(a.current,{id:8589,element:"Card"}))}),[o,t]);var c="https://zhuanlan.zhihu.com/p/".concat(t),s=Object(u.useCallback)((function(){o&&m.a.trackEvent(a.current,{id:8590,action:"OpenUrl",element:"Card"})}),[o]);return Object(h.g)(g.c,{as:"a",shouldTrackShow:!0,shouldTrackClick:!0,zaBlock:"ZTextArticleLinkCard",zaAction:"OpenUrl",zaType:"Button",zaEventType:"Click",extra:{link:{url:c}},href:c,"data-za-not-track-link":!0,onClick:s,rel:"noopener noreferrer",target:"_blank"},Object(h.g)(M,{styleAbParam:i,cardRef:a,useOpenArticleButton:r,linkUrl:c,handleClickLink:s,article:n}))},L=b({cardDataFilter:function(e){return Array.from(e.getElementsByTagName("a")).map((function(e){var t,n=e.getAttribute("href"),r="link-card"===e.getAttribute("data-draft-type"),o="normal"===e.getAttribute("data-size");if(!n||!r||!o)return null;var i=null===(t=n.match(/https:\/\/zhuanlan.zhihu.com\/p\/(\d+)$/))||void 0===t?void 0:t[1];if(i){var a=document.createElement("div");return a.className="RichText-ArticleLinkCardContainer",e.parentNode.replaceChild(a,e),{data:{id:i},target:a}}return null})).filter(Boolean)},component:function(e){var t=e.id,n=e.useOpenArticleButton,r=e.enableZa,i=e.styleAbParam,c=s()(e,["id","useOpenArticleButton","enableZa","styleAbParam"]),l=Object(u.useState)(null),d=o()(l,2),f=d[0],p=d[1],b=Object(u.useState)(null),v=o()(b,2),m=v[0],g=v[1],j=i&&["1","2"].includes(i)?"1":"0";return Object(u.useEffect)((function(){var e="https://www.zhihu.com/api/v4/articles/".concat(t,"?is_article_card=").concat(j);Object(O.a)(e).then((function(e){return Object(y.camelizeKeys)(e)})).then((function(e){e.error?g(e.error.message):p(e)})).catch((function(e){g(e.message||"未知错误")}))}),[t,j]),m?Object(h.g)("div",{className:"ArticleLinkCard-error"},m):f?Object(h.g)(D,a()({article:f,useOpenArticleButton:n,enableZa:r,styleAbParam:i},c)):Object(h.g)("div",{className:"ArticleLinkCard-loading"},"加载中...")}}),P=n(907),z=b({idAttr:"data-mcn-id",selector:"a[data-mcn-id]",targetClassName:"RichText-MCNLinkCardContainer",component:P.c}),B=n(909),F=b({cardDataFilter:function(e){return Array.from(e.querySelectorAll("a.LinkCard[data-draft-type=link-card]")).map((function(e){var t,n=(t=e.attributes,Array.from(t).reduce((function(e,t){return"class"===t.name?e.className=t.value:e[t.name]=t.value,e}),{})),r=document.createElement("div");return r.className="RichText-LinkCardContainer",e.parentNode.replaceChild(r,e),{data:n,target:r}}))},getCardProps:function(e){return e.href&&e.href.match(/https:\/\/www.zhihu.com\/zvideo\/(\d+)$/)?e.zaBlock="ZTextZVideoLinkCard":e.zaBlock="ZTextLinkCard",e},component:B.a}),U=n(839),q=function(e){var t=Object(y.camelizeKeys)(e),n=t.resourceName,r=t.button,o=r.url,i=r.text,a=t.title,c=t.cover,s=t.price,u=t.source,l=void 0===u?"知乎":u;return{url:o,buttonText:i,title:a,imgUrl:c,price:s,authorText:t.desc,heatText:t.footer,producer:n,source:l}},V=b({idAttr:"data-sku-id",selector:"a[data-sku-id]",targetClassName:"RichText-MkSkuLinkCardContainer",component:function(e){var t=e.onClick,n=Object(u.useRef)(!1);return Object(h.g)(P.c,a()({processResponse:q,getUrl:function(e){return"https://www.zhihu.com/api/v4/market/km_sku_card/".concat(e)},fetcherOptions:{credentials:"same-origin"},onClick:function(e){m.a.trackEvent(e.target,{id:7204,action:"OpenUrl"}),t&&t(e)},disableZa:!0,ref:function(t){t&&!t.classList.contains("MCNLinkCard-placeholder")&&!1===n.current&&(m.a.setModule(t,{module:"Content"},{card:{content:{id:e.id}}}),Object(U.onViewedOnce)(t,(function(){m.a.trackCardShow(t,{id:7203})})),n.current=!0)},zaBlock:"ZTextMkSKuLinkCard"},e))}}),H=n(66),K=[{selector:"a.external, a.internal",zaBlock:"ZTextLink"},{selector:"a.member_mention, a.UserLink-link",zaBlock:"ZTextMention"},{selector:"a.video-box",zaBlock:"ZTextVideoCard"},{selector:'a.LinkCard.old[data-draft-type="link-card"]',zaBlock:"ZTextLinkCard"},{selector:'a.LinkCard.new.static[data-draft-type="link-card"]:not(.zvideo)',zaBlock:"ZTextLinkCard"},{selector:'a.LinkCard.new.static.zvideo[data-draft-type="link-card"]',zaBlock:"ZTextZVideoLinkCard"},{selector:"a.FileLinkCard",zaBlock:"ZTextFileLinkCard"}],Q=function(e){var t=e.element,n=e.config,r={elementLocation:{type:"Button"},block:n.zaBlock},o={action:"OpenUrl",elementLocation:{type:"Button"},block:n.zaBlock,eventType:"Click"},i={link:{url:t.href}},a=Object(g.i)().trackEvent,c=Object(g.h)(r,i),s=Object(H.c)((function(e){a(o,i),"ZTextLinkCard"===n.zaBlock&&t.dataset.isEcommerce&&e.preventDefault()}));return Object(u.useEffect)((function(){return t.addEventListener("click",s),function(){t.removeEventListener("click",s)}}),[]),Object(u.useEffect)((function(){return c(t),function(){return c(null)}}),[]),null},W=function(e){var t=e.root,n=Object(u.useState)([]),r=o()(n,2),i=r[0],a=r[1];return Object(u.useEffect)((function(){if(t){var e=[];K.forEach((function(n){var r=n.selector;Array.from(t.querySelectorAll(r)).forEach((function(t){e.push({el:t,config:n})}))})),a(e)}}),[t]),Object(h.g)(l.a.Fragment,null,i.map((function(e,t){var n=e.el,r=e.config;return Object(h.g)(Q,{key:t,element:n,config:r})})))},G=b({cardDataFilter:function(e){return Array.from(e.getElementsByTagName("a")).map((function(e){var t,n=e.getAttribute("href"),r="link-card"===e.getAttribute("data-draft-type");if(!n||!r)return null;var o=null===(t=n.match(/https:\/\/www.zhihu.com\/zvideo\/(\d+)$/))||void 0===t?void 0:t[1];if(o){var i=document.createElement("div");return i.className="RichText-ZVideoLinkCardContainer",e.parentNode.replaceChild(i,e),{data:{id:o},target:i}}return null})).filter(Boolean)},component:n(977).a}),Z=n(90),Y=n(904);var J={name:"1wtde8n",styles:"font-size:12px;overflow:hidden;"},$=function(e){var t=e.contentHTML,n=Object(u.useState)(!0),r=o()(n,2),i=r[0],a=r[1],c=Object(H.c)((function(){a(!i)}));return Object(h.g)(g.b,{block:"ZTextCatalog"},Object(h.g)(g.e,{as:Z.Flex,zaType:"Block",className:"Catalog-content",flexDirection:"column",css:J,style:{height:i?"84px":"auto"},dangerouslySetInnerHTML:{__html:t}}),Object(h.g)(g.a,{as:Y.a,zaType:"Button",zaAction:i?"Expand":"Collapse",isFold:i,onClick:c}))},X=function(e){var t=e.root,n=Object(u.useState)(null),r=o()(n,2),i=r[0],a=r[1];return Object(u.useEffect)((function(){if(t){var e=t.querySelector(".Catalog-wrapper");if(e&&e.querySelector(".bottom-shadow")){var n=e.querySelector(".Catalog-content").innerHTML,r=document.createElement("div");r.className="Catalog-wrapper",e.parentNode.replaceChild(r,e),a(Object(p.createPortal)(Object(h.g)($,{contentHTML:n}),r))}}}),[t]),i}},function(e,t,n){"use strict";n.d(t,"b",(function(){return ee})),n.d(t,"a",(function(){return Fe})),n.d(t,"c",(function(){return ae})),n.d(t,"e",(function(){return le})),n.d(t,"d",(function(){return ie}));var r=n(77),o=n.n(r),i=n(92),a=n.n(i),c=n(22),s=n.n(c),u=n(23),l=n.n(u),d=n(17),f=n.n(d),p=n(20),h=n.n(p),b=n(21),v=n.n(b),m=n(39),g=n.n(m),y=n(137),O=n(138),j=n(1),w=n.n(j);function C(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var o=f()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l()(this,n)}}var x={arr:Array.isArray,obj:function(e){return"[object Object]"===Object.prototype.toString.call(e)},fun:function(e){return"function"==typeof e},str:function(e){return"string"==typeof e},num:function(e){return"number"==typeof e},und:function(e){return void 0===e},nul:function(e){return null===e},set:function(e){return e instanceof Set},map:function(e){return e instanceof Map},equ:function(e,t){if(typeof e!=typeof t)return!1;if(x.str(e)||x.num(e))return e===t;if(x.obj(e)&&x.obj(t)&&Object.keys(e).length+Object.keys(t).length===0)return!0;var n;for(n in e)if(!(n in t))return!1;for(n in t)if(e[n]!==t[n])return!1;return!x.und(n)||e===t}};function R(){var e=Object(j.useState)(!1)[1];return Object(j.useCallback)((function(){return e((function(e){return!e}))}),[])}function E(e,t){return x.und(e)||x.nul(e)?t:e}function _(e){return x.und(e)?[]:x.arr(e)?e:[e]}function A(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return x.fun(e)?e.apply(void 0,n):e}function T(e){var t=function(e){return e.to,e.from,e.config,e.onStart,e.onRest,e.onFrame,e.children,e.reset,e.reverse,e.force,e.immediate,e.delay,e.attach,e.destroyed,e.interpolateTo,e.ref,e.lazy,Object(O.default)(e,["to","from","config","onStart","onRest","onFrame","children","reset","reverse","force","immediate","delay","attach","destroyed","interpolateTo","ref","lazy"])}(e);if(x.und(t))return Object(y.default)({to:t},e);var n=Object.keys(e).reduce((function(n,r){return x.und(t[r])?Object(y.default)({},n,g()({},r,e[r])):n}),{});return Object(y.default)({to:t},n)}var N,I,M=function(){function e(){h()(this,e),this.payload=void 0,this.children=[]}return v()(e,[{key:"getAnimatedValue",value:function(){return this.getValue()}},{key:"getPayload",value:function(){return this.payload||this}},{key:"attach",value:function(){}},{key:"detach",value:function(){}},{key:"getChildren",value:function(){return this.children}},{key:"addChild",value:function(e){0===this.children.length&&this.attach(),this.children.push(e)}},{key:"removeChild",value:function(e){var t=this.children.indexOf(e);this.children.splice(t,1),0===this.children.length&&this.detach()}}]),e}(),D=function(e){s()(n,e);var t=S(n);function n(){var e;return h()(this,n),(e=t.apply(this,arguments)).payload=[],e.attach=function(){return e.payload.forEach((function(t){return t instanceof M&&t.addChild(a()(e))}))},e.detach=function(){return e.payload.forEach((function(t){return t instanceof M&&t.removeChild(a()(e))}))},e}return n}(M),L=function(e){s()(n,e);var t=S(n);function n(){var e;return h()(this,n),(e=t.apply(this,arguments)).payload={},e.attach=function(){return Object.values(e.payload).forEach((function(t){return t instanceof M&&t.addChild(a()(e))}))},e.detach=function(){return Object.values(e.payload).forEach((function(t){return t instanceof M&&t.removeChild(a()(e))}))},e}return v()(n,[{key:"getValue",value:function(e){void 0===e&&(e=!1);var t={};for(var n in this.payload){var r=this.payload[n];(!e||r instanceof M)&&(t[n]=r instanceof M?r[e?"getAnimatedValue":"getValue"]():r)}return t}},{key:"getAnimatedValue",value:function(){return this.getValue(!0)}}]),n}(M);function P(e,t){N={fn:e,transform:t}}function z(e){I=e}var B,F=function(e){return"undefined"!=typeof window?window.requestAnimationFrame(e):-1};function U(e){B=e}var q=function(){return Date.now()};function V(e){e}var H,K,Q=function(e){return e.current};function W(e){H=e}var G=function(e){s()(n,e);var t=S(n);function n(e,r){var o;return h()(this,n),(o=t.call(this)).update=void 0,o.payload=e.style?Object(y.default)({},e,{style:H(e.style)}):e,o.update=r,o.attach(),o}return n}(L),Z=!1,Y=new Set,J=function e(){if(!Z)return!1;var t,n=q(),r=C(Y);try{for(r.s();!(t=r.n()).done;){for(var o=t.value,i=!1,a=0;a<o.configs.length;a++){for(var c=o.configs[a],s=void 0,u=void 0,l=0;l<c.animatedValues.length;l++){var d=c.animatedValues[l];if(!d.done){var f=c.fromValues[l],p=c.toValues[l],h=d.lastPosition,b=p instanceof M,v=Array.isArray(c.initialVelocity)?c.initialVelocity[l]:c.initialVelocity;if(b&&(p=p.getValue()),c.immediate)d.setValue(p),d.done=!0;else if("string"!=typeof f&&"string"!=typeof p){if(void 0!==c.duration)h=f+c.easing((n-d.startTime)/c.duration)*(p-f),s=n>=d.startTime+c.duration;else if(c.decay)h=f+v/(1-.998)*(1-Math.exp(-(1-.998)*(n-d.startTime))),(s=Math.abs(d.lastPosition-h)<.1)&&(p=h);else{u=void 0!==d.lastTime?d.lastTime:n,v=void 0!==d.lastVelocity?d.lastVelocity:c.initialVelocity,n>u+64&&(u=n);for(var m=Math.floor(n-u),g=0;g<m;++g){h+=1*(v+=1*((-c.tension*(h-p)+-c.friction*v)/c.mass)/1e3)/1e3}var y=!(!c.clamp||0===c.tension)&&(f<p?h>p:h<p),O=Math.abs(v)<=c.precision,j=0===c.tension||Math.abs(p-h)<=c.precision;s=y||O&&j,d.lastVelocity=v,d.lastTime=n}b&&!c.toValues[l].done&&(s=!1),s?(d.value!==p&&(h=p),d.done=!0):i=!0,d.setValue(h),d.lastPosition=h}else d.setValue(p),d.done=!0}}o.props.onFrame&&(o.values[c.name]=c.interpolation.getValue())}o.props.onFrame&&o.props.onFrame(o.values),i||(Y.delete(o),o.stop(!0))}}catch(e){r.e(e)}finally{r.f()}return Y.size?K?K():F(e):Z=!1,Z};function $(e,t,n){if("function"==typeof e)return e;if(Array.isArray(e))return $({range:e,output:t,extrapolate:n});if(B&&"string"==typeof e.output[0])return B(e);var r=e,o=r.output,i=r.range||[0,1],a=r.extrapolateLeft||r.extrapolate||"extend",c=r.extrapolateRight||r.extrapolate||"extend",s=r.easing||function(e){return e};return function(e){var t=function(e,t){for(var n=1;n<t.length-1&&!(t[n]>=e);++n);return n-1}(e,i);return function(e,t,n,r,o,i,a,c,s){var u=s?s(e):e;if(u<t){if("identity"===a)return u;"clamp"===a&&(u=t)}if(u>n){if("identity"===c)return u;"clamp"===c&&(u=n)}if(r===o)return r;if(t===n)return e<=t?r:o;t===-1/0?u=-u:n===1/0?u-=t:u=(u-t)/(n-t);u=i(u),r===-1/0?u=-u:o===1/0?u+=r:u=u*(o-r)+r;return u}(e,i[t],i[t+1],o[t],o[t+1],s,a,c,r.map)}}var X=function(e){s()(n,e);var t=S(n);function n(e,r,o,i){var a;return h()(this,n),(a=t.call(this)).calc=void 0,a.payload=e instanceof D&&!(e instanceof n)?e.getPayload():Array.isArray(e)?e:[e],a.calc=$(r,o,i),a}return v()(n,[{key:"getValue",value:function(){return this.calc.apply(this,o()(this.payload.map((function(e){return e.getValue()}))))}},{key:"updateConfig",value:function(e,t,n){this.calc=$(e,t,n)}},{key:"interpolate",value:function(e,t,r){return new n(this,e,t,r)}}]),n}(D),ee={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}};var te=function(e){s()(n,e);var t=S(n);function n(e){var r,o;return h()(this,n),r=t.call(this),o=a()(r),r.animatedStyles=new Set,r.value=void 0,r.startPosition=void 0,r.lastPosition=void 0,r.lastVelocity=void 0,r.startTime=void 0,r.lastTime=void 0,r.done=!1,r.setValue=function(e,t){void 0===t&&(t=!0),o.value=e,t&&o.flush()},r.value=e,r.startPosition=e,r.lastPosition=e,r}return v()(n,[{key:"flush",value:function(){0===this.animatedStyles.size&&function e(t,n){"update"in t?n.add(t):t.getChildren().forEach((function(t){return e(t,n)}))}(this,this.animatedStyles),this.animatedStyles.forEach((function(e){return e.update()}))}},{key:"clearStyles",value:function(){this.animatedStyles.clear()}},{key:"getValue",value:function(){return this.value}},{key:"interpolate",value:function(e,t,n){return new X(this,e,t,n)}}]),n}(M),ne=function(e){s()(n,e);var t=S(n);function n(e){var r;return h()(this,n),(r=t.call(this)).payload=e.map((function(e){return new te(e)})),r}return v()(n,[{key:"setValue",value:function(e,t){var n=this;void 0===t&&(t=!0),Array.isArray(e)?e.length===this.payload.length&&e.forEach((function(e,r){return n.payload[r].setValue(e,t)})):this.payload.forEach((function(n){return n.setValue(e,t)}))}},{key:"getValue",value:function(){return this.payload.map((function(e){return e.getValue()}))}},{key:"interpolate",value:function(e,t){return new X(this,e,t)}}]),n}(D),re=0,oe=function(){function e(){var t=this;h()(this,e),this.id=void 0,this.idle=!0,this.hasChanged=!1,this.guid=0,this.local=0,this.props={},this.merged={},this.animations={},this.interpolations={},this.values={},this.configs=[],this.listeners=[],this.queue=[],this.localQueue=void 0,this.getValues=function(){return t.interpolations},this.id=re++}return v()(e,[{key:"update",value:function(e){if(!e)return this;var t=T(e),n=t.delay,r=void 0===n?0:n,o=t.to,i=Object(O.default)(t,["delay","to"]);if(x.arr(o)||x.fun(o))this.queue.push(Object(y.default)({},i,{delay:r,to:o}));else if(o){var a={};Object.entries(o).forEach((function(e){var t=e[0],n=e[1],o=Object(y.default)({to:g()({},t,n),delay:A(r,t)},i),c=a[o.delay]&&a[o.delay].to;a[o.delay]=Object(y.default)({},a[o.delay],o,{to:Object(y.default)({},c,o.to)})})),this.queue=Object.values(a)}return this.queue=this.queue.sort((function(e,t){return e.delay-t.delay})),this.diff(i),this}},{key:"start",value:function(e){var t,n=this;if(this.queue.length){this.idle=!1,this.localQueue&&this.localQueue.forEach((function(e){var t=e.from,r=void 0===t?{}:t,o=e.to,i=void 0===o?{}:o;x.obj(r)&&(n.merged=Object(y.default)({},r,n.merged)),x.obj(i)&&(n.merged=Object(y.default)({},n.merged,i))}));var r=this.local=++this.guid,o=this.localQueue=this.queue;this.queue=[],o.forEach((function(t,i){var a=t.delay,c=Object(O.default)(t,["delay"]),s=function(t){i===o.length-1&&r===n.guid&&t&&(n.idle=!0,n.props.onRest&&n.props.onRest(n.merged)),e&&e()},u=x.arr(c.to)||x.fun(c.to);a?setTimeout((function(){r===n.guid&&(u?n.runAsync(c,s):n.diff(c).start(s))}),a):u?n.runAsync(c,s):n.diff(c).start(s)}))}else x.fun(e)&&this.listeners.push(e),this.props.onStart&&this.props.onStart(),t=this,Y.has(t)||Y.add(t),Z||(Z=!0,F(K||J));return this}},{key:"stop",value:function(e){return this.listeners.forEach((function(t){return t(e)})),this.listeners=[],this}},{key:"pause",value:function(e){var t;return this.stop(!0),e&&(t=this,Y.has(t)&&Y.delete(t)),this}},{key:"runAsync",value:function(e,t){var n=this,r=this,o=(e.delay,Object(O.default)(e,["delay"])),i=this.local,a=Promise.resolve(void 0);if(x.arr(o.to))for(var c=function(e){var t=e,r=Object(y.default)({},o,T(o.to[t]));x.arr(r.config)&&(r.config=r.config[t]),a=a.then((function(){if(i===n.guid)return new Promise((function(e){return n.diff(r).start(e)}))}))},s=0;s<o.to.length;s++)c(s);else if(x.fun(o.to)){var u,l=0;a=a.then((function(){return o.to((function(e){var t=Object(y.default)({},o,T(e));if(x.arr(t.config)&&(t.config=t.config[l]),l++,i===n.guid)return u=new Promise((function(e){return n.diff(t).start(e)}))}),(function(e){return void 0===e&&(e=!0),r.stop(e)})).then((function(){return u}))}))}a.then(t)}},{key:"diff",value:function(e){var t=this;this.props=Object(y.default)({},this.props,e);var n=this.props,r=n.from,o=void 0===r?{}:r,i=n.to,a=void 0===i?{}:i,c=n.config,s=void 0===c?{}:c,u=n.reverse,l=n.attach,d=n.reset,f=n.immediate;if(u){var p=[a,o];o=p[0],a=p[1]}this.merged=Object(y.default)({},o,this.merged,a),this.hasChanged=!1;var h=l&&l(this);if(this.animations=Object.entries(this.merged).reduce((function(e,n){var r=n[0],i=n[1],a=e[r]||{},c=x.num(i),u=x.str(i)&&!i.startsWith("#")&&!/\d/.test(i)&&!I[i],l=x.arr(i),p=!c&&!l&&!u,b=x.und(o[r])?i:o[r],v=c||l||u?i:1,m=A(s,r);h&&(v=h.animations[r].parent);var O,j=a.parent,w=a.interpolation,C=_(h?v.getPayload():v),k=i;p&&(k=B({range:[0,1],output:[i,i]})(1));var S=w&&w.getValue(),R=!x.und(j)&&a.animatedValues.some((function(e){return!e.done})),T=!x.equ(k,S),N=!x.equ(k,a.previous),M=!x.equ(m,a.config);if(d||N&&T||M){if(c||u)j=w=a.parent||new te(b);else if(l)j=w=a.parent||new ne(b);else if(p){var D=a.interpolation&&a.interpolation.calc(a.parent.value);D=void 0===D||d?b:D,a.parent?(j=a.parent).setValue(0,!1):j=new te(0);var L={output:[D,i]};a.interpolation?(w=a.interpolation,a.interpolation.updateConfig(L)):w=j.interpolate(L)}return C=_(h?v.getPayload():v),O=_(j.getPayload()),d&&!p&&j.setValue(b,!1),t.hasChanged=!0,O.forEach((function(e){e.startPosition=e.value,e.lastPosition=e.value,e.lastVelocity=R?e.lastVelocity:void 0,e.lastTime=R?e.lastTime:void 0,e.startTime=q(),e.done=!1,e.animatedStyles.clear()})),A(f,r)&&j.setValue(p?v:i,!1),Object(y.default)({},e,g()({},r,Object(y.default)({},a,{name:r,parent:j,interpolation:w,animatedValues:O,toValues:C,previous:k,config:m,fromValues:_(j.getValue()),immediate:A(f,r),initialVelocity:E(m.velocity,0),clamp:E(m.clamp,!1),precision:E(m.precision,.01),tension:E(m.tension,170),friction:E(m.friction,26),mass:E(m.mass,1),duration:m.duration,easing:E(m.easing,(function(e){return e})),decay:m.decay})))}return T?e:(p&&(j.setValue(1,!1),w.updateConfig({output:[k,k]})),j.done=!0,t.hasChanged=!0,Object(y.default)({},e,g()({},r,Object(y.default)({},e[r],{previous:k}))))}),this.animations),this.hasChanged)for(var b in this.configs=Object.values(this.animations),this.values={},this.interpolations={},this.animations)this.interpolations[b]=this.animations[b].interpolation,this.values[b]=this.animations[b].interpolation.getValue();return this}},{key:"destroy",value:function(){this.stop(),this.props={},this.merged={},this.animations={},this.interpolations={},this.values={},this.configs=[],this.local=0}}]),e}(),ie=function(e,t){var n=Object(j.useRef)(!1),r=Object(j.useRef)(),o=x.fun(t),i=Object(j.useMemo)((function(){var n;return r.current&&(r.current.map((function(e){return e.destroy()})),r.current=void 0),[new Array(e).fill().map((function(e,r){var i=new oe,a=o?A(t,r,i):t[r];return 0===r&&(n=a.ref),i.update(a),n||i.start(),i})),n]}),[e]),a=i[0],c=i[1];r.current=a;Object(j.useImperativeHandle)(c,(function(){return{start:function(){return Promise.all(r.current.map((function(e){return new Promise((function(t){return e.start(t)}))})))},stop:function(e){return r.current.forEach((function(t){return t.stop(e)}))},get controllers(){return r.current}}}));var s=Object(j.useMemo)((function(){return function(e){return r.current.map((function(t,n){t.update(o?A(e,n,t):e[n]),c||t.start()}))}}),[e]);Object(j.useEffect)((function(){n.current?o||s(t):c||r.current.forEach((function(e){return e.start()}))})),Object(j.useEffect)((function(){return n.current=!0,function(){return r.current.forEach((function(e){return e.destroy()}))}}),[]);var u=r.current.map((function(e){return e.getValues()}));return o?[u,s,function(e){return r.current.forEach((function(t){return t.pause(e)}))}]:u},ae=function(e){var t=x.fun(e),n=ie(1,t?e:[e]),r=n[0],o=n[1],i=n[2];return t?[r[0],o,i]:r},ce=0,se=function(e,t){return("function"==typeof t?e.map(t):_(t)).map(String)},ue=function(e){var t=e.items,n=e.keys,r=void 0===n?function(e){return e}:n,o=Object(O.default)(e,["items","keys"]);return t=_(void 0!==t?t:null),Object(y.default)({items:t,keys:se(t,r)},o)};function le(e,t,n){var r=Object(y.default)({items:e,keys:t||function(e){return e}},n),i=ue(r),a=i.lazy,c=void 0!==a&&a,s=(i.unique,i.reset),u=void 0!==s&&s,l=(i.enter,i.leave,i.update,i.onDestroyed),d=(i.keys,i.items,i.onFrame),f=i.onRest,p=i.onStart,h=i.ref,b=Object(O.default)(i,["lazy","unique","reset","enter","leave","update","onDestroyed","keys","items","onFrame","onRest","onStart","ref"]),v=R(),m=Object(j.useRef)(!1),g=Object(j.useRef)({mounted:!1,first:!0,deleted:[],current:{},transitions:[],prevProps:{},paused:!!r.ref,instances:!m.current&&new Map,forceUpdate:v});return Object(j.useImperativeHandle)(r.ref,(function(){return{start:function(){return Promise.all(Array.from(g.current.instances).map((function(e){var t=e[1];return new Promise((function(e){return t.start(e)}))})))},stop:function(e){return Array.from(g.current.instances).forEach((function(t){return t[1].stop(e)}))},get controllers(){return Array.from(g.current.instances).map((function(e){return e[1]}))}}})),g.current=function(e,t){var n=e.first,r=e.prevProps,i=Object(O.default)(e,["first","prevProps"]),a=ue(t),c=a.items,s=a.keys,u=a.initial,l=a.from,d=a.enter,f=a.leave,p=a.update,h=a.trail,b=void 0===h?0:h,v=a.unique,m=a.config,g=a.order,j=void 0===g?["enter","leave","update"]:g,w=ue(r),C=w.keys,k=w.items,S=Object(y.default)({},i.current),x=o()(i.deleted),R=Object.keys(S),E=new Set(R),_=new Set(s),T=s.filter((function(e){return!E.has(e)})),N=i.transitions.filter((function(e){return!e.destroyed&&!_.has(e.originalKey)})).map((function(e){return e.originalKey})),I=s.filter((function(e){return E.has(e)})),M=-b;for(;j.length;){switch(j.shift()){case"enter":T.forEach((function(e,t){v&&x.find((function(t){return t.originalKey===e}))&&(x=x.filter((function(t){return t.originalKey!==e})));var r=s.indexOf(e),o=c[r],i=n&&void 0!==u?"initial":"enter";S[e]={slot:i,originalKey:e,key:v?String(e):ce++,item:o,trail:M+=b,config:A(m,o,i),from:A(n&&void 0!==u?u||{}:l,o),to:A(d,o)}}));break;case"leave":N.forEach((function(e){var t=C.indexOf(e),n=k[t];x.unshift(Object(y.default)({},S[e],{slot:"leave",destroyed:!0,left:C[Math.max(0,t-1)],right:C[Math.min(C.length,t+1)],trail:M+=b,config:A(m,n,"leave"),to:A(f,n)})),delete S[e]}));break;case"update":I.forEach((function(e){var t=s.indexOf(e),n=c[t];S[e]=Object(y.default)({},S[e],{item:n,slot:"update",trail:M+=b,config:A(m,n,"update"),to:A(p,n)})}))}}var D=s.map((function(e){return S[e]}));return x.forEach((function(e){var t,n=e.left,r=(e.right,Object(O.default)(e,["left","right"]));-1!==(t=D.findIndex((function(e){return e.originalKey===n})))&&(t+=1),t=Math.max(0,t),D=[].concat(o()(D.slice(0,t)),[r],o()(D.slice(t)))})),Object(y.default)({},i,{changed:T.length||N.length||I.length,first:n&&0===T.length,transitions:D,current:S,deleted:x,prevProps:t})}(g.current,r),g.current.changed&&g.current.transitions.forEach((function(e){var t=e.slot,n=e.from,r=e.to,o=e.config,i=e.trail,a=e.key,s=e.item;g.current.instances.has(a)||g.current.instances.set(a,new oe);var v=g.current.instances.get(a),m=Object(y.default)({},b,{to:r,from:n,config:o,ref:h,onRest:function(n){g.current.mounted&&(e.destroyed&&(h||c||de(g,a),l&&l(s)),!Array.from(g.current.instances).some((function(e){return!e[1].idle}))&&(h||c)&&g.current.deleted.length>0&&de(g),f&&f(s,t,n))},onStart:p&&function(){return p(s,t)},onFrame:d&&function(e){return d(s,t,e)},delay:i,reset:u&&"enter"===t});v.update(m),g.current.paused||v.start()})),Object(j.useEffect)((function(){return g.current.mounted=m.current=!0,function(){g.current.mounted=m.current=!1,Array.from(g.current.instances).map((function(e){return e[1].destroy()})),g.current.instances.clear()}}),[]),g.current.transitions.map((function(e){var t=e.item,n=e.slot,r=e.key;return{item:t,key:r,state:n,props:g.current.instances.get(r).getValues()}}))}function de(e,t){var n,r=C(e.current.deleted);try{var o=function(){var r=n.value.key,o=function(e){return e.key!==r};(x.und(t)||t===r)&&(e.current.instances.delete(r),e.current.transitions=e.current.transitions.filter(o),e.current.deleted=e.current.deleted.filter(o))};for(r.s();!(n=r.n()).done;)o()}catch(e){r.e(e)}finally{r.f()}e.current.forceUpdate()}var fe=function(e){s()(n,e);var t=S(n);function n(e){var r;return h()(this,n),void 0===e&&(e={}),r=t.call(this),!e.transform||e.transform instanceof M||(e=N.transform(e)),r.payload=e,r}return n}(L),pe={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},he="[-+]?\\d*\\.?\\d+";function be(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var ve=new RegExp("rgb"+be(he,he,he)),me=new RegExp("rgba"+be(he,he,he,he)),ge=new RegExp("hsl"+be(he,"[-+]?\\d*\\.?\\d+%","[-+]?\\d*\\.?\\d+%")),ye=new RegExp("hsla"+be(he,"[-+]?\\d*\\.?\\d+%","[-+]?\\d*\\.?\\d+%",he)),Oe=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,je=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,we=/^#([0-9a-fA-F]{6})$/,Ce=/^#([0-9a-fA-F]{8})$/;function ke(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Se(e,t,n){var r=n<.5?n*(1+t):n+t-n*t,o=2*n-r,i=ke(o,r,e+1/3),a=ke(o,r,e),c=ke(o,r,e-1/3);return Math.round(255*i)<<24|Math.round(255*a)<<16|Math.round(255*c)<<8}function xe(e){var t=parseInt(e,10);return t<0?0:t>255?255:t}function Re(e){return(parseFloat(e)%360+360)%360/360}function Ee(e){var t=parseFloat(e);return t<0?0:t>1?255:Math.round(255*t)}function _e(e){var t=parseFloat(e);return t<0?0:t>100?1:t/100}function Ae(e){var t,n,r="number"==typeof(t=e)?t>>>0===t&&t>=0&&t<=4294967295?t:null:(n=we.exec(t))?parseInt(n[1]+"ff",16)>>>0:pe.hasOwnProperty(t)?pe[t]:(n=ve.exec(t))?(xe(n[1])<<24|xe(n[2])<<16|xe(n[3])<<8|255)>>>0:(n=me.exec(t))?(xe(n[1])<<24|xe(n[2])<<16|xe(n[3])<<8|Ee(n[4]))>>>0:(n=Oe.exec(t))?parseInt(n[1]+n[1]+n[2]+n[2]+n[3]+n[3]+"ff",16)>>>0:(n=Ce.exec(t))?parseInt(n[1],16)>>>0:(n=je.exec(t))?parseInt(n[1]+n[1]+n[2]+n[2]+n[3]+n[3]+n[4]+n[4],16)>>>0:(n=ge.exec(t))?(255|Se(Re(n[1]),_e(n[2]),_e(n[3])))>>>0:(n=ye.exec(t))?(Se(Re(n[1]),_e(n[2]),_e(n[3]))|Ee(n[4]))>>>0:null;if(null===r)return e;var o=(16711680&(r=r||0))>>>16,i=(65280&r)>>>8,a=(255&r)/255;return"rgba(".concat((4278190080&r)>>>24,", ").concat(o,", ").concat(i,", ").concat(a,")")}var Te=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Ne=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,Ie=new RegExp("(".concat(Object.keys(pe).join("|"),")"),"g"),Me={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},De=["Webkit","Ms","Moz","O"];function Le(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||Me.hasOwnProperty(e)&&Me[e]?(""+t).trim():t+"px"}Me=Object.keys(Me).reduce((function(e,t){return De.forEach((function(n){return e[function(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}(n,t)]=e[t]})),e}),Me);var Pe={};W((function(e){return new fe(e)})),V("div"),U((function(e){var t=e.output.map((function(e){return e.replace(Ne,Ae)})).map((function(e){return e.replace(Ie,Ae)})),n=t[0].match(Te).map((function(){return[]}));t.forEach((function(e){e.match(Te).forEach((function(e,t){return n[t].push(+e)}))}));var r=t[0].match(Te).map((function(t,r){return $(Object(y.default)({},e,{output:n[r]}))}));return function(e){var n=0;return t[0].replace(Te,(function(){return r[n++](e)})).replace(/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,(function(e,t,n,r,o){return"rgba(".concat(Math.round(t),", ").concat(Math.round(n),", ").concat(Math.round(r),", ").concat(o,")")}))}})),z(pe),P((function(e,t){if(!e.nodeType||void 0===e.setAttribute)return!1;var n=t.style,r=t.children,o=t.scrollTop,i=t.scrollLeft,a=Object(O.default)(t,["style","children","scrollTop","scrollLeft"]),c="filter"===e.nodeName||e.parentNode&&"filter"===e.parentNode.nodeName;for(var s in void 0!==o&&(e.scrollTop=o),void 0!==i&&(e.scrollLeft=i),void 0!==r&&(e.textContent=r),n)if(n.hasOwnProperty(s)){var u=0===s.indexOf("--"),l=Le(s,n[s],u);"float"===s&&(s="cssFloat"),u?e.style.setProperty(s,l):e.style[s]=l}for(var d in a){var f=c?d:Pe[d]||(Pe[d]=d.replace(/([A-Z])/g,(function(e){return"-"+e.toLowerCase()})));void 0!==e.getAttribute(f)&&e.setAttribute(f,a[d])}}),(function(e){return e}));var ze,Be,Fe=(ze=function(e){return Object(j.forwardRef)((function(t,n){var r=R(),o=Object(j.useRef)(!0),i=Object(j.useRef)(null),a=Object(j.useRef)(null),c=Object(j.useCallback)((function(e){var t=i.current;i.current=new G(e,(function(){var e=!1;a.current&&(e=N.fn(a.current,i.current.getAnimatedValue())),a.current&&!1!==e||r()})),t&&t.detach()}),[]);Object(j.useEffect)((function(){return function(){o.current=!1,i.current&&i.current.detach()}}),[]),Object(j.useImperativeHandle)(n,(function(){return Q(a,o,r)})),c(t);var s,u=i.current.getValue(),l=(u.scrollTop,u.scrollLeft,Object(O.default)(u,["scrollTop","scrollLeft"])),d=(s=e,!x.fun(s)||s.prototype instanceof w.a.Component?function(e){return a.current=function(e,t){return t&&(x.fun(t)?t(e):x.obj(t)&&(t.current=e)),e}(e,n)}:void 0);return w.a.createElement(e,Object(y.default)({},l,{ref:d}))}))},void 0===(Be=!1)&&(Be=!0),function(e){return(x.arr(e)?e:Object.keys(e)).reduce((function(e,t){var n=Be?t[0].toLowerCase()+t.substring(1):t;return e[n]=ze(n),e}),ze)})(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"])},function(e,t,n){"use strict";n.d(t,"h",(function(){return v})),n.d(t,"d",(function(){return S})),n.d(t,"a",(function(){return y})),n.d(t,"f",(function(){return C})),n.d(t,"b",(function(){return O})),n.d(t,"c",(function(){return j})),n.d(t,"e",(function(){return k}));n(57);var r=n(1),o=n(42),i=n(41),a=n.n(i),c=n(318),s=n.n(c),u=n(28),l=(n(63),n(7),n(392)),d=n.n(l),f=(n(864),n(943)),p=n(842);function h(e){return"string"!=typeof e?e:e.replace(/__TS__/g,(function(){return parseInt(Date.now()/1e3)}))}function b(e){return e instanceof r.Component?Object(o.findDOMNode)(e):e}function v(e,t,n,r){"cardShow"===e?u.a.trackCardShow(b(t),n,r):"trackEvent"===e&&u.a.trackEvent(b(t),n,r)}n.d(t,"g",(function(){return p.v}));function m(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p.u;if(!e)return new Promise((function(e){return e()}));var r=e,o=/^https?:\/\/[\w-.]+(:\d+)?/i.exec(e)[0];return o&&o.match("sugar.zhihu.com")&&(r=Object(p.a)(r,{ets:(new Date).getTime()})),n(r=h(r),r.indexOf("sugar.zhihu.com")>-1&&t?{fl:t}:void 0)}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.type,r=void 0===n?"":n,o=t.payload,i=void 0===o?{}:o;if(r===f.a.TopicClick){var a=i.url;return"".concat(e,"&etu=").concat(btoa(unescape(encodeURIComponent(a))))}if(r===f.a.ExtendClick&&0===e.indexOf("https://sugar.zhihu.com"))try{var c=e.slice(),u=parseInt(Date.now()/1e3),l="".concat(s()(c).pathname,"+").concat(u),p=d()(l),h=i.clickEvent,b=void 0===h?{}:h,v=b.clientX,m=b.clientY,g=b.currentTarget,y=g.getBoundingClientRect(),O=y.width,j=y.height,w=y.left,C=y.top,k=v-w,S=m-C,x="".concat(parseInt(k),"x").concat(parseInt(S),"x").concat(parseInt(O),"x").concat(parseInt(j));return"".concat(c,"&ev=").concat(x,"&emfen=").concat(p,"&emfts=").concat(u)}catch(t){return e}return e}function y(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};try{var o;e&&"function"==typeof e.trackMethod&&(o=e.trackMethod,e=e.tracks);var i=e.filter(Boolean).map((function(e){var i="".concat(e).concat(n?"&et=".concat(n):"");return m(i=g(i,r),t,o)})),a=Promise.all(i).catch((function(){return null}));return Promise.race([a,new Promise((function(e){return setTimeout(e,500)}))])}catch(e){console.error("clickTrack: ",e)}}function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.filter(Boolean).map((function(e){return m(e)})),n=Promise.all(t).catch((function(){return null}));return Promise.race([n,new Promise((function(e){return setTimeout(e,500)}))])}function j(e,t){e&&e.length&&e.map((function(e){return Object(p.u)(e,{et:t?"page_adjson":"page_ads"})}))}function w(e,t){e&&e.length&&e.map((function(e){return m(e,t)}))}function C(e,t,n,r){var o;t&&"function"==typeof t.trackMethod&&(o=t.trackMethod,t=t.tracks),t&&t.length&&Object(p.p)(e,(function(){t.map((function(e){return Promise.race([m(e,n,o),new Promise((function(e,t){return setTimeout(t,5e3)}))]).then((function(){return{status:200}})).catch((function(){return{status:600}})).then((function(t){return{et:"third_imp",ev:t.status||601,etu:btoa(unescape(encodeURIComponent(e))),plugin:Object(p.i)()}})).then((function(e){if(e){var t=a.a.stringify(e);(r||[]).map((function(e){return e?Object(p.r)(t?"".concat(e).concat(e.includes("?")?"&":"?").concat(t):e):null}))}}))}))}))}function k(e,t){t&&t.length&&Object(p.o)(e,(function(){t.map((function(e){return m("".concat(e))}))}))}function S(e,t){var n=t.impressionTracks,r=t.debugTracks,o=t.viewTracks,i=t.viewXTracks,a=t.xAppFlavor;w(n,a),C(e,o,a,r),k(e,i)}},function(e,t,n){"use strict";var r=n(13),o=n(14),i=n(67),a=n(15),c=n(16),s=n(9),u=n(2),l=n(1),d=n(19),f=n(25),p=n(378),h=n(853),b=n(1005),v=n(28),m=n(881),g=n(26),y=n(217),O=n(368),j=n(320),w=n.n(j),C=function(e,t){return e+(t?Date.now()-t:0)},k=function(e,t){return Math.abs(e-t)<.01},S={auto:"Auto",ld:"LD",sd:"SD",hd:"HD"},x={auto:"自动",ld:"低清",sd:"标清",hd:"超清"},R=[1,2,3,5,8,13];function E(e){var t,n="sd",r=0,o=null,i=0,a=null,c=!1,s=0,u=0;function l(t,c){e(t,Object.assign({play_event_identifier:o,duration:1e3*r,elapsed:C(i,a),video_quality:S[n]},c))}function d(){(++u<15?R.includes(u):u%15==0)&&l({action:"Playing"})}function f(){clearInterval(t)}return{handlePlayEvent:function(e){var n=e.currentTime,c=e.duration;r=c,k(n,0)&&(o=w()(),i=0),a=Date.now(),k(n,0)?l({action:"Play"}):l({action:"ResumePlay"}),u=0,f(),t=setInterval(d,1e3)},handlePauseEvent:function(e){var t=e.currentTime,n=e.duration;a&&(i+=Date.now()-a,a=null),k(t,n)?l({action:"EndPlay"}):l({action:"Pause"}),f()},handleQualityChangeEvent:function(e){var t=e.quality;l({action:"Switch",name:x[t]}),n=t},handleFragmentLoading:function(){c||(s=Date.now())},handleFragmentLoaded:function(){c||(c=!0,l({action:"Load"},{video_load_time:Date.now()-s}))},clearTick:f}}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var o=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var A=function(e){Object(a.a)(n,e);var t=_(n);function n(e){var o;Object(r.a)(this,n),(o=t.call(this,e)).pauseVideoInIframe=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];o.messageHelper.dispatchMessage(e.contentWindow,m.a.PLAYER.PAUSE,{dontApplyOnFullScreen:t})},o.pauseAllOtherVideos=function(){Array.from(document.querySelectorAll("iframe")).filter((function(e){return e!==o.iframe})).forEach((function(e){return o.pauseVideoInIframe(e)}))},o.handleMessage=function(e,t){var n=o.videoTracker,r=n.handlePlayEvent,i=n.handlePauseEvent,a=n.handleQualityChangeEvent,c=n.handleFragmentLoading,s=n.handleFragmentLoaded;switch(e){case m.b.DOM.PLAY:o.pauseAllOtherVideos(),r(t);break;case m.b.DOM.PAUSE:i(t);break;case m.b.PLAYER.QUALITY_CHANGE:a(t);break;case"fragment-loading":c(t);break;case"fragment-loaded":s(t)}},o.handleObserve=function(e){e[0].intersectionRatio<=0&&o.iframe&&o.pauseVideoInIframe(o.iframe,!0)},o.handlePlay=function(){o.props.trackEvent(Object(i.a)(o),{id:5500,action:"Play",element:"Video"})},o.handlePlayFailed=function(){(0,o.props.showNotification)("视频加载失败，请刷新页面重试","red")};var a=e.data;return o.messageHelper=Object(m.c)(a.id,"*",!0),o.videoTracker=E((function(e,t){v.a.trackEvent(Object(i.a)(o),e,{play:t})})),o}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.data,n=t.isLens,r=t.id,o=t.playerUrl,i=t.flvPlayerUrl,a=e.loadVideo;n||!r||o||i||a(r);var c=this.messageHelper.subscribeMessage;this.messageSubscription=c(this.handleMessage)}},{key:"componentWillUnmount",value:function(){this.messageSubscription.unsubscribe(),this.videoTracker.clearTick()}},{key:"render",value:function(){var e=this,t=this.props,n=t.data,r=t.data.error,o=t.onBeforePlay;return Object(u.b)("div",{className:"RichText-video",children:r?Object(u.b)(b.a,Object.assign({},n)):Object(u.b)(p.a,{onObserve:this.handleObserve,children:Object(u.b)(h.b,Object.assign({},n,{onIframeRef:function(t){return e.iframe=t},onPlay:this.handlePlay,onPlayFailed:this.handlePlayFailed,onBeforePlay:o}))})})}}]),n}(l.Component);t.a=Object(d.compose)(Object(f.connect)((function(e,t){var n=t.data,r=n.isLens,o=n.id;return r?{data:Object.assign({},t.data,{source:"lens",playerUrl:"https://www.zhihu.com/video/".concat(o)})}:{data:e.video.data[o]||t.data}}),{showNotification:g.h,loadVideo:y.c}),Object(O.b)((function(e){var t=e.data,n=t.isLens,r=t.id,o=t.isPlayable;return{module:"VideoItem",content:{type:"Video",sub_type:n?"SelfHosted":"Embedded",video_id:r,is_playable:Boolean(o)},trackCardShow:!0,view:{id:174}}})))(A)},function(e,t,n){var r,o,i;o=[t],void 0===(i="function"==typeof(r=function(e){"use strict";function t(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(e,"__esModule",{value:!0});var n=!1;if("undefined"!=typeof window){var r={get passive(){n=!0}};window.addEventListener("testPassive",null,r),window.removeEventListener("testPassive",null,r)}function o(e){return s.some((function(t){return!(!t.options.allowTouchMove||!t.options.allowTouchMove(e))}))}function i(e){var t=e||window.event;return!!o(t.target)||1<t.touches.length||(t.preventDefault&&t.preventDefault(),!1)}function a(){setTimeout((function(){void 0!==f&&(document.body.style.paddingRight=f,f=void 0),void 0!==d&&(document.body.style.overflow=d,d=void 0)}))}var c="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||"MacIntel"===window.navigator.platform&&1<window.navigator.maxTouchPoints),s=[],u=!1,l=-1,d=void 0,f=void 0;e.disableBodyScroll=function(e,r){if(c){if(!e)return void console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");if(e&&!s.some((function(t){return t.targetElement===e}))){var a={targetElement:e,options:r||{}};s=[].concat(t(s),[a]),e.ontouchstart=function(e){1===e.targetTouches.length&&(l=e.targetTouches[0].clientY)},e.ontouchmove=function(t){var n,r,a,c;1===t.targetTouches.length&&(r=e,c=(n=t).targetTouches[0].clientY-l,o(n.target)||(r&&0===r.scrollTop&&0<c||(a=r)&&a.scrollHeight-a.scrollTop<=a.clientHeight&&c<0?i(n):n.stopPropagation()))},u||(document.addEventListener("touchmove",i,n?{passive:!1}:void 0),u=!0)}}else{h=r,setTimeout((function(){if(void 0===f){var e=!!h&&!0===h.reserveScrollBarGap,t=window.innerWidth-document.documentElement.clientWidth;e&&0<t&&(f=document.body.style.paddingRight,document.body.style.paddingRight=t+"px")}void 0===d&&(d=document.body.style.overflow,document.body.style.overflow="hidden")}));var p={targetElement:e,options:r||{}};s=[].concat(t(s),[p])}var h},e.clearAllBodyScrollLocks=function(){c?(s.forEach((function(e){e.targetElement.ontouchstart=null,e.targetElement.ontouchmove=null})),u&&(document.removeEventListener("touchmove",i,n?{passive:!1}:void 0),u=!1),s=[],l=-1):(a(),s=[])},e.enableBodyScroll=function(e){if(c){if(!e)return void console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");e.ontouchstart=null,e.ontouchmove=null,s=s.filter((function(t){return t.targetElement!==e})),u&&0===s.length&&(document.removeEventListener("touchmove",i,n?{passive:!1}:void 0),u=!1)}else(s=s.filter((function(t){return t.targetElement!==e}))).length||a()}})?r.apply(t,o):r)||(e.exports=i)},,function(e,t,n){"use strict";n.d(t,"c",(function(){return r.c})),n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return m}));var r=n(989),o=n(13),i=n(14),a=n(15),c=n(16),s=n(9),u=n(2),l=n(1),d=n(74),f=n(1150),p=n.n(f),h=n(368);function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var o=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var v=function(e){Object(a.a)(n,e);var t=b(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(u.b)("img",{src:p.a,style:{maxWidth:"200px",marginTop:"30px"},alt:"delete-comment-success"})}}]),n}(l.Component);v.showModal=function(e){d.b.open((function(t){var n=(e||{}).reportText;return setTimeout(t,2e3),Object(u.b)(d.b,{title:"举报成功",onClose:t,children:Object(u.c)("div",{style:{textAlign:"center"},children:[Object(u.b)("div",{children:n||"你的举报我们已经收到，处理完成后将会私信告知处理结果。"}),Object(u.b)(v,{})]})})}))};var m=Object(h.b)({view:{id:3038},trackCardShow:!0})(v),g=n(30),y=n(243);function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var o=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var j=function(e){Object(a.a)(n,e);var t=O(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={reportModalShown:!1},e.handleSubmit=function(){var t=e.props,n=t.id,r=t.onDelete,o=t.onClose;r(n),o()},e.handleReportModalOpen=function(){return e.setState({reportModalShown:!0})},e.handleReportModalClose=function(){e.setState({reportModalShown:!1}),e.handleSubmit()},e.handleSuccess=function(){e.handleSubmit()},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.id,n=e.shown,r=e.onClose,o=e.reportAndDeleteExperiment;return Object(u.c)(l.Fragment,{children:[Object(u.b)(d.b,{title:"你确定要删除这条评论吗？",closeButton:null,maskClosable:!1,hotKeyClosable:!1,onClose:r,footer:o&&Object(u.c)("div",{className:"CommentDeleteAndReport-extra",children:["评论若构成举报条件可以",Object(u.b)(g.c,{preset:"link",onClick:this.handleReportModalOpen,children:"删除并举报"})]}),children:n&&Object(u.c)(d.a,{direction:"horizontal",children:[Object(u.b)(g.c,{onClick:r,children:"取消"}),Object(u.b)(g.c,{preset:"primary",color:"blue",onClick:this.handleSubmit,children:"确定"})]})}),Object(u.b)(y.a,{title:"删除成功，请选择举报理由",subtitle:"",shown:this.state.reportModalShown,type:"comment",urlToken:t,zaEnabled:!0,onSuccess:this.handleSuccess,onClose:this.handleReportModalClose})]})}}]),n}(l.Component)},function(e,t){function n(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then}e.exports=n,e.exports.default=n},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r,o=n(40),i=n(0),a=n(2),c=n(66),s=n(1),u=n(74),l=n(24),d=n(889),f=n(373),p={comment_img:"comment_img",dynamic_top:"dynamic_top",comment_sticker:"comment_sticker",block_keyword:"block_keyword"},h=(r={},Object(i.a)(r,p.comment_img,"https://pic1.zhimg.com/v2-1b6677f81c2df41f55332474e15bc5a8.png"),Object(i.a)(r,p.dynamic_top,"https://pic1.zhimg.com/v2-e16a265a43592abd5b98fceef02a1614.png"),Object(i.a)(r,p.comment_sticker,"https://pic1.zhimg.com/v2-183a98cd480d24cd3e3246ba7a26303b.png"),Object(i.a)(r,p.block_keyword,"https://pic3.zhimg.com/v2-0ad4e8aa43c3279cc7536f2fb7ac8348.png"),r);t.b=Object(d.a)((function(e){var t=e.show,n=e.setShow,r=e.type,i=e.isLogin,d=Object(s.useState)(""),p=Object(o.a)(d,2),b=p[0],v=p[1],m=Object(s.useState)(!1),g=Object(o.a)(m,2),y=g[0],O=g[1],j=Object(f.b)(),w=Object(c.c)((function(){t&&n(!1)})),C=Object(c.c)((function(){window.open(l.F,"_blank")}));return Object(s.useEffect)((function(){!b&&i&&(O(!0),j("/api/v4/unlimited/vip_rights/popup?token="+r).then((function(e){v(e.payload.button.text)})).catch((function(){})).then((function(){O(!1)})))}),[t]),Object(a.b)(u.b,{css:{".Modal-content":{padding:0,marginTop:0}},onClose:w,children:t&&!y&&Object(a.c)(a.a,{children:[Object(a.b)("img",{src:h[r],css:{height:"230px",width:"400px",display:"block"}}),Object(a.b)("div",{css:{padding:20},children:Object(a.b)("div",{css:function(e){return{padding:8,background:"linear-gradient(135deg, ".concat(e.colors.GYL06A," 0.2%, ").concat(e.colors.GYL08A," 100%)"),borderRadius:3,textAlign:"center",fontsize:14,color:e.colors.GYL12A,userSelect:"none","&:hover":{cursor:"pointer"}}},onClick:C,children:b||"开通会员立即解锁"})})]})})}))},function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"e",(function(){return a})),n.d(t,"d",(function(){return c})),n.d(t,"g",(function(){return s})),n.d(t,"h",(function(){return u})),n.d(t,"f",(function(){return l})),n.d(t,"a",(function(){return f}));var r=n(858),o={ready:"立即下载",downloading:"下载中...",pause:"继续下载",completed:"立即安装",error:"立即下载"},i="立即打开",a={brand_card_image:"normal",plutus_card_image:"normal",plutus_card_image_download:"largeDownloadAd",plutus_card_video:"video",plutus_card_video_download:"videoDownload",plutus_card_window:"windowAd",sdk_card_image:"sdkAd",plutus_card_slide_image:"normal",plutus_card_slide_image_download:"normalDownload",plutus_card_word_105:"word",plutus_card_word_105_download:"wordDownload",plutus_card_small_image_105:"smallImage",plutus_card_small_image_105_download:"smallImageDownload",plutus_card_multi_images_105:"multiple",plutus_card_multi_images_105_download:"multipleDownload"},c={bbi_105:"normal",pbi_105:"normal",pii_105:"normal",pii_105_d:"normalDownload",pbi_105_d:"largeDownloadAd",pv_105:"video",bv_105_o:"videoWithDeeplink",bv_105_i:"videoFullscreen",pv_105_d:"videoDownload",ps_105:"windowAd",sbi_105:"sdkAd",pw_105_d:"wordDownload",pw_105:"word",psi_105:"smallImage",psi_105_d:"smallImageDownload",pmi_105:"multiple",pmi_105_d:"multipleDownload",pw_417_d:"wordDownload",pw_417:"word",psi_417:"smallImage",psi_417_d:"smallImageDownload",pw_419_d:"wordDownload",pw_419:"word",psi_419:"smallImage",psi_419_d:"smallImageDownload"},s={bsi_20:"single",bmi_20:"multiple",pw_20:"word",bw_20:"word",pw_20_d:"wordDownload",psi_20:"single",psi_20_d:"singleDownload",bsi_20_pu:"singlePu",pmi_20:"multiple",pmi_20_d:"multipleDownload",sci_20:"single",bsi_118:"single",bmi_118:"multiple"},u={bsi_208:"small",bmi_208:"multiple"},l=n.n(r)()({psi_19:"single",psi_19_d:"singleDownload",bsi_19:"single",psi_219:"small",psi_219_d:"small",pmi_219:"multiple",pmi_219_d:"multiple",pbi_m:"large",pbi_m_d:"large",psi_m:"small",psi_m_d:"small",pw_m:"word",pw_m_d:"word"},s),d="https://www.zhihu.com",f=("".concat(d,"/m_banner.html"),"".concat(d,"/m_banner2.html"),"".concat(d,"/natsume/maozhua_m_banner.html"),"".concat(d,"/natsume/ruoying_m_banner.html"),"".concat(d,"/m_related_feed.html"),"".concat(d,"/natsume/ruoying_related_feed.html"),"".concat(d,"/m_hot_feed.html"),{ExtendClick:"ExtendClick",TopicClick:"TopicClick"});new Set(["click_con","click_win","click_upvote","click_downvote"]),new Set(["click_topic","click_hot1","click_hot2","click_hot3"])},function(e,t,n){"use strict";var r=n(32),o=n(40),i=n(2),a=n(1),c=n(25),s=n(182),u=n.n(s),l=n(1057),d=n(878),f=n(382),p=n(48),h=n.n(p),b=n(49),v=n(38),m=n.n(v),g=n(52),y=n(404),O=n(63),j=n(322),w=n(69),C=n.n(w),k={"京东":"jingdong","淘宝":"taobao","知乎":"zhihu","拼多多":"pinduoduo","美团酒旅":"meituanhotel","苏宁":"suning","天猫":"taobao"},S=function(e,t,n){var r=e.id,o=e.url,i=e.source,a=e.children,c=void 0===a?0:a,s=e.scenes,u=e.fallbackUrl,l=k[i],d=C()(navigator.userAgent);if(!d.ZhihuHybrid)return c&&"function"==typeof n?void n():void(d.Mobile?location.href=o:t?t.location.href=o:window.open(o));O.a.supportsAction("mcn/openURL").then((function(e){var t=e;if(r&&o&&i&&(Object(j.versionControl)(d,{IOS:"6.15",ANDROID:"6.15"})||"taobao"!==l)&&(Object(j.versionControl)(d,{IOS:"6.25",ANDROID:"6.25"})||"zhihu"!==l)&&(Object(j.versionControl)(d,{IOS:"6.28",ANDROID:"6.29"})||"pinduoduo"!==l)&&(Object(j.versionControl)(d,{IOS:"6.37",ANDROID:"6.37"})||"meituanhotel"!==l)&&(Object(j.versionControl)(d,{IOS:"6.51",ANDROID:"6.51"})||"suning"!==l)&&(Object(j.versionControl)(d,{ANDROID:"6.63"})||"0"!==r)||(t=!1),t){var n=Object.assign({id:r,url:o,type:l,fallbackUrl:u||o},s?{scenes:s}:{});O.a.dispatch("mcn/openURL",n)}else O.a.dispatch("base/openURL",{url:o})}))};var x=n(150),R=n(369),E=function(e){var t=Object(R.b)(),n=Object(a.useCallback)((function(n){t.ZhihuHybrid&&function(e,t){var n=t.root;if(!e.defaultPrevented){var r=e.target;if("img"===r.tagName.toLowerCase()&&(r.src.includes("zhimg")||!r.src.includes("equation"))&&(!r.classList.contains("ztext-gif")||r.parentNode.classList.contains("isPlaying"))){var o=Array.from(n.querySelectorAll(["img"])).filter((function(e){return e.src.includes("zhimg")&&!e.src.includes("equation")})),i=o.indexOf(r);if(-1!==i){e.preventDefault();var a=o.map((function(e){return e.dataset.thumbnail&&e.src.replace(/\.jpg|\.webp/,".gif")||e.dataset.src||e.src||""})).map((function(e){return Object(x.imgUrl)(e,Object.assign({quality:""},e.endsWith("webp")&&{extension:"jpg"}))}));O.a.dispatch("base/openImage",{images:a,index:i})}}}}(n,{root:e})}),[e,t.ZhihuHybrid]);Object(a.useEffect)((function(){if(e)return e.addEventListener("click",n),function(){e.removeEventListener("click",n)}}),[e,n])},_=n(42),A=n(854),T=function(e){var t=e.getAttribute("data-hash"),n=e.textContent.replace(/^@/,""),r=document.createElement("span");return e.parentNode.replaceChild(r,e),{target:r,data:{id:t,name:n}}},N=function(e){var t=Object(a.useState)(null),n=Object(o.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)((function(){if(e){var t=Array.from(e.querySelectorAll(".member_mention"));if(t.length){var n=t.map(T).map((function(e,t){var n=e.data,r=e.target;return Object(_.createPortal)(Object(i.c)(A.a,{user:n,children:["@",n.name]},t),r)}));c(n)}}}),[e]),r},I=n(937),M=function(e){var t=e.getAttribute("data-poster"),n="data:,"===t?"":t,r={title:e.getAttribute("data-name"),thumbnail:n,url:e.getAttribute("href"),src:e.getAttribute("data-src")};r=e.getAttribute("data-lens-id")?Object.assign({},r,{isLens:!0,id:e.getAttribute("data-lens-id"),isPlayable:!0}):Object.assign({},r,{isLens:!1,id:e.getAttribute("data-video-id"),isPlayable:"true"===e.getAttribute("data-video-playable")}),e.hasAttribute("data-lens-status")&&(r=Object.assign({},r,{error:{status:e.getAttribute("data-lens-status"),message:e.getAttribute("data-description")}}));var o=document.createElement("div");return e.parentNode.replaceChild(o,e),{target:o,data:r}},D=function(e){var t=Object(a.useState)(null),n=Object(o.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)((function(){if(e){var t=Array.from(e.querySelectorAll(".video-box, .video-link, .unprocessable_video"));if(t.length){var n=t.map(M).map((function(e,t){var n=e.data,r=e.target;return Object(_.createPortal)(Object(i.b)(I.a,{data:n},t),r)}));c(n)}}}),[e]),r},L=n(66),P={},z=function(e,t){var n=function(e){return e.split("/").reverse()[0]}(t),r=n.split("."),i=Object(o.a)(r,2),a=i[0],c=i[1],s=a.split("_"),u=Object(o.a)(s,2)[1],l="webp"===c||"gif"===c?c:"image",d=Object(p.statGenerator)({appName:"heifetz"})("".concat(l,".").concat(u,".unknown.RichText"));switch(e){case"loadstart":P[n]=Date.now();break;case"load":if(P[n]){var f="".concat(d,".success");h.a.increment({raw:"".concat(f,".count")}),h.a.timing(f,Date.now()-P[n]),delete P[n]}break;case"timeout":P[n]&&(h.a.increment({raw:"".concat(d,".timeout.count")}),delete P[n]);break;case"error":P[n]&&(h.a.increment({raw:"".concat(d,".failure.count")}),delete P[n])}},B=function(e){return Object(i.b)(d.a,Object.assign({onLoadStateChange:z},e,{useMp4:!0}))};t.a=function(e){var t=e.ecommerce,s=e.html,p=e.shouldUseArticleCard,h=e.shouldShowCatalog,v=e.sourceId,O=e.sourceType,j=Object(r.a)(e,["ecommerce","html","shouldUseArticleCard","shouldShowCatalog","sourceId","sourceType"]),w=Object(a.useState)(null),k=Object(o.a)(w,2),x=k[0],R=k[1],_=Object(a.useState)(!1),A=Object(o.a)(_,2),T=A[0],I=A[1],M=Object(a.useState)(""),P=Object(o.a)(M,2),F=P[0],U=P[1],q=!Object(b.o)({includeTablet:!0}),V=Object(c.useSelector)((function(e){return e.currentUser}));E(x);var H,K=Object(L.d)((function(){return n.e(5).then(n.bind(null,2611))})),Q=(H=Object(c.useDispatch)(),Object(a.useCallback)(function(){var e=Object(g.a)(m.a.mark((function e(t,n){var r,o,i,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t,o=null,"京东"!==t.source&&"苏宁"!==t.source){e.next=9;break}return C()(navigator.userAgent).Safari&&"苏宁拼购"!==t.goodsType&&(o=window.open()),e.next=7,H(Object(y.b)(t.id,0)).catch((function(){return null}));case 7:a=e.sent,r=Object.assign({},t,null==a||null===(i=a.payload)||void 0===i?void 0:i.data);case 9:"苏宁拼购"!==t.goodsType&&S(r,o,n);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[H]));return Object(i.c)(i.a,{children:[Object(i.b)(l.a,Object.assign({},j,{html:s,onRef:R,lazyLoadImageProps:{onLoadStateChange:z,useWebP:!1},adLinkCardProps:{parentId:v,parentType:O},mcnLinkCardProps:{onClick:function(e){var t=e.currentTarget,n=t.href,r=t.dataset,o=r.mcnId,i=r.mcnSource,a=r.mcnChildren,c=r.mcnAppSchemaIos,s=r.mcnAppSchemaAndroid,u=r.mcnGoodsType;q&&("拼多多"===i||"苏宁"===i&&"苏宁拼购"===u)||(e.preventDefault(),Q({id:o,source:i,goodsType:u,url:n,children:Number(a),appSchemaIos:c,appSchemaAndroid:s},(function(){U(o),I(!0)})))}},mkSkuLinkCardProps:{cardSize:"large",enableBackdrop:!1,sourceConvert:!1,tagPreset:"plain",enableMetaTag:!1,enableButton:!0,buttonPreset:"plain",buttonColor:"orange",enableHint:!1},zvideoLinkCardProps:{enableInlinePlay:!0},articleLinkCardProps:{enableZa:!0,useOpenArticleButton:!0},shouldUseArticleCard:p,shouldShowCatalog:h,sourceId:v})),Object(d.b)(x,{Component:B}),D(x),N(x),Object(f.d)(x,{ecommerce:t,getComponent:function(){return n.e(2).then(n.bind(null,1576))}}),T&&Object(i.b)(K,{showModal:T,id:F,userId:V,clientId:u.a.get("_zap"),onClose:function(){U(""),I(!1)},onSelectCard:function(e){var t=e.id,n=e.source,r=e.goods_type,o=e.url,i=e.app_schema_ios,a=e.app_schema_android;Q({id:t,source:n,goodsType:r,url:o,appSchemaIos:i,appSchemaAndroid:a})}})]})}},function(e,t,n){"use strict";var r=n(2),o=n(3),i=n.n(o),a=n(11),c=n.n(a),s=Array.from(Array(12),(function(e,t){return Object(r.b)("span",{className:"Spinner-blade-12"},t)}));function u(e){var t=e.className,n=e.white,o=e.large;return Object(r.b)("div",{className:c()("Spinner-blade",t,{"Spinner-blade--large":o,"Spinner-blade--white":n}),children:s})}u.propTypes={className:i.a.string,large:i.a.bool,white:i.a.bool};var l=u;t.a=l},function(e,t,n){"use strict";var r=n(77),o=n.n(r),i=n(20),a=n.n(i),c=n(21),s=n.n(c),u=n(92),l=n.n(u),d=n(22),f=n.n(d),p=n(23),h=n.n(p),b=n(17),v=n.n(b),m=n(3),g=n.n(m),y=n(1),O=n.n(y),j=n(42),w=n(64),C=n.n(w),k=n(388),S=n.n(k),x=n(28),R=n(1133),E=n.n(R);var _=function(e,t){return function(n){var r=t(n);return E()(r,n),r.displayName="".concat(e,"(").concat(function(e){return e.displayName||e.name||"Component"}(n),")"),r}};function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v()(e);if(t){var o=v()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h()(this,n)}}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var N=C()((function(){var e=new IntersectionObserver((function(t){t.forEach((function(t){if(0!==t.intersectionRatio){var n=t.target;e.unobserve(n),n.handleChange&&(n.handleChange(),n.handleChange=null)}}))}),{threshold:[.1]});return e})),I=function(e,t,n,r){return _("track",(function(o){return function(i){f()(u,i);var c=A(u);function u(){var e;a()(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=c.call.apply(c,[this].concat(n)),T(l()(e),"values_",{}),T(l()(e),"trackCardShow",(function(){var t=e.values,n=t.viewInfo,r=t.extraInfo;x.a.trackCardShow(e.element,n,r)})),e}return s()(u,[{key:"parseValues",value:function(){var o,i=this,a=function(e){return"function"==typeof e?e(i.props):e};this.values={viewLocation:e,moduleInfo:(o=a(t),o?o.type||o.sub_type?{card:{card_type:"Content",content:o}}:o:null),viewInfo:a(n),extraInfo:a(r)}}},{key:"setModule",value:function(){var e=this.values,t=e.viewLocation,n=e.moduleInfo;x.a.setModule(this.element,t,n)}},{key:"componentDidMount",value:function(){this.element=Object(j.findDOMNode)(this),this.parseValues(),this.values.viewInfo&&(this.element.handleChange=this.trackCardShow,N().observe(this.element))}},{key:"componentDidUpdate",value:function(){this.parseValues()}},{key:"componentWillUnmount",value:function(){this.values.viewInfo&&(N().unobserve(this.element),this.element.handleChange=null),this.element=null}},{key:"render",value:function(){return O.a.createElement(o,this.props)}},{key:"values",get:function(){return this.values_},set:function(e){S()(e,this.values_)||(this.values_=e,this.setModule())}}]),u}(y.Component)}))},M=function(e){f()(n,e);var t=A(n);function n(){var e;a()(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return e=t.call.apply(t,[this].concat(i)),T(l()(e),"Component",I.apply(void 0,o()(e.props.options))((function(){return e.props.children}))),e}return s()(n,[{key:"render",value:function(){return"undefined"!=typeof window&&window.IntersectionObserver?O.a.createElement(this.Component,null):this.props.children}}]),n}(y.Component);T(M,"propTypes",{children:g.a.element.isRequired,options:g.a.array.isRequired});t.a=M},function(e,t,n){"use strict";var r=n(32),o=n(2),i=n(1),a=n(3),c=n.n(a),s=n(374),u=n(372),l=n(956);function d(e){var t,n=e.user,a=e.noHeadline,c=Object(r.a)(e,["user","noHeadline"]),d=n.headline,f=n.isOrg,p=Object(i.useMemo)((function(){return Object(u.e)(n.badgeV2||n.badge)}),[n]),h=p.identity,b=p.bestAnswerer,v=p.baike,m=p.title;return m?Object(o.b)(s.a,Object.assign({html:m},c)):!f&&(null==b||null===(t=b.topics)||void 0===t?void 0:t.length)?Object(o.c)("div",Object.assign({},c,{children:[Object(o.b)(l.a,{topics:b.topics,user:n}),"的优秀答主"]})):h?Object(o.b)("div",Object.assign({},c,{children:h[0].description})):v?Object(o.b)("div",Object.assign({},c,{children:v.description})):d&&!a?Object(o.b)(s.a,Object.assign({html:d},c)):null}d.propTypes={user:c.a.object.isRequired,noHeadline:c.a.bool},t.a=Object(i.memo)(d)},function(e,t,n){"use strict";function r(e){return function(){return e}}var o=function(){};o.thatReturns=r,o.thatReturnsFalse=r(!1),o.thatReturnsTrue=r(!0),o.thatReturnsNull=r(null),o.thatReturnsThis=function(){return this},o.thatReturnsArgument=function(e){return e},e.exports=o},function(e,t,n){},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));n(858),n(57);var r=n(63),o=(n(7),n(864));n(842);function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.HYBRID_ACTION_EVENT.commonAd;return new Promise((function(n){r.a.ready().then((function(){r.a.supportsAction(t).then((function(o){o?r.a.dispatch(t,e).then((function(e){e&&!1===e.status?n({status:!1,type:2,data:e}):n({status:!0,type:2,data:e})}),(function(e){return n({status:!1,type:2,data:e})})):n({status:!1,type:1})}))})).catch((function(e){return n({status:!1,type:0,data:e})}))}))}function a(e,t){return new Promise((function(n,r){i(t,e).then((function(e){return e.status?n(e):r(e)}))}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return O})),n.d(t,"b",(function(){return j}));var r=n(33),o=n.n(r),i=n(20),a=n.n(i),c=n(21),s=n.n(c),u=n(23),l=n.n(u),d=n(17),f=n.n(d),p=n(22),h=n.n(p),b=n(1),v=n.n(b),m=n(7),g=n(842),y=n(864),O=function(e){function t(e){var n;return a()(this,t),(n=l()(this,f()(t).call(this,e))).state={hasError:!1},n}return h()(t,e),s()(t,[{key:"componentDidCatch",value:function(e,t){this.handleError(e,t)}},{key:"unstable_handleError",value:function(e,t){this.handleError(e,t)}},{key:"handleError",value:function(e,t){this.setState({hasError:!0}),console.error(e),t&&console.error(t),Object(y.sendRaven)({adjson:Object(g.d)(this.props,"children.props"),error:e,info:t})}},{key:"render",value:function(){return this.state.hasError?null:this.props.children}}]),t}(v.a.Component),j=function(e){return function(t){return t.data?v.a.createElement(O,null,v.a.createElement(e,o()({},t,{data:Object(m.camelizeKeys)(t.data)}))):null}}},function(e,t,n){var r=n(1070),o=n(903),i=n(1071);e.exports=function(e){return o(e)?i(e):r(e)}},function(e,t,n){"use strict";function r(e){var t=String(e);return t.length<2&&(t="0"+t),t}function o(e){if(!isFinite(e))return"";var t=(e=Math.floor(e))%60,n=Math.floor(e/60);return"".concat(r(n),":").concat(r(t))}n.d(t,"a",(function(){return o}))},function(e,t,n){"use strict";n.d(t,"e",(function(){return r})),n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"f",(function(){return c})),n.d(t,"g",(function(){return s})),n.d(t,"a",(function(){return u}));var r=5,o=40,i=60,a=300,c=6,s=[{value:"original",label:"原创"},{value:"reprint",label:"转载"}],u="https://pic2.zhimg.com/v2-feb96045745dac939aa2a900c6d6845d.jpg"},function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n(13),o=n(14),i=n(15),a=n(16),c=n(9),s=n(2),u=n(1),l=n(11),d=n.n(l);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var p=function(e){Object(i.a)(n,e);var t=f(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.children;return Object(s.b)("div",{className:d()("Badge",t),children:n})}}]),n}(u.Component),h=n(234),b=n(1161),v=n(24);function m(e){return Object(s.b)(h.a,Object.assign({as:"a",href:v.F,target:"_blank",rel:"noopener noreferrer",zaBlock:"VipBadge",zaType:"Button",zaEventType:"Click",zaAction:"OpenUrl",extra:{link:{url:v.F}}},e,{children:Object(s.b)(b.a,{css:{height:"1em",width:"1em","&:hover":{cursor:"pointer"}},center:!0})}))}var g=Object(u.memo)(m);t.b=p},function(e,t,n){"use strict";var r=n(13),o=n(14),i=n(67),a=n(15),c=n(16),s=n(9),u=n(2),l=n(3),d=n.n(l),f=n(1),p=n(34),h=n(30),b=n(957),v=n(24);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var o=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var g=function(e){Object(a.a)(n,e);var t=m(n);function n(){var e;return Object(r.a)(this,n),(e=t.call(this)).state={expanded:!1},e.onExpand=e.handleExpand.bind(Object(i.a)(e)),e}return Object(o.a)(n,[{key:"handleExpand",value:function(){this.setState({expanded:!0})}},{key:"render",value:function(){var e=this.props,t=e.topics,n=e.user,r=e.ellipsisLength,o=e.expandable,i=e.privacyEnabled,a=e.showPrivacyPage,c=this.state.expanded,s="等 ".concat(t.length," 个"),l=t;return c||(l=t.slice(0,r)),Object(u.c)("span",{children:[l.map((function(e,t){return Object(u.c)("span",{children:[Object(u.b)(b.a,{showPrivacyPage:i&&a,authWrapperClassName:"ProfileMainPrivacy-authWrapper",authChild:Object(u.b)("span",{className:"ProfileMainPrivacy-pointerWrapper",children:e.name}),children:Object(u.b)(p.Link,{to:"".concat(v.D,"/").concat(n.isOrg?"org":"people","/").concat(n.urlToken,"/creations/").concat(e.id),children:e.name})}),t<l.length-1?"、":" "]},t)})),!c&&t.length>r&&(o?Object(u.b)(h.c,{preset:"plain",onClick:this.onExpand,children:s}):s),"话题"]})}}]),n}(f.Component);g.propTypes={topics:d.a.array.isRequired,user:d.a.object,ellipsisLength:d.a.number,expandable:d.a.bool,noHoverCard:d.a.bool,privacyEnabled:d.a.bool,showPrivacyPage:d.a.bool},g.defaultProps={ellipsisLength:3,expandable:!0,noHoverCard:!1},t.a=g},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(2),o=n(1),i=n(400),a=function(e){var t=e.children,n=e.showPrivacyPage,a=e.authWrapperClassName,c=e.authChild,s=o.Children.only(t),u=c?o.Children.only(c):s;return n?Object(r.b)(i.a,{wrapperClassName:a,loginButton:u}):s}},function(e,t,n){"use strict";t.a=function(e,t){return!!e&&(!!(t=t||e.type)&&("answer"===t&&((null===(n=e.settings)||void 0===n||null===(r=n.tableOfContents)||void 0===r?void 0:r.enabled)||(null===(o=e.settings)||void 0===o||null===(i=o.tableOfContent)||void 0===i?void 0:i.enabled))));var n,r,o,i}},function(e,t,n){"use strict";var r=n(13),o=n(14),i=n(15),a=n(16),c=n(9),s=n(2),u=n(1),l=n(11),d=n.n(l),f=n(30),p=n(132);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var b=function(e){Object(i.a)(n,e);var t=h(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).handleSubmit=function(){var t=e.props,n=t.onSubmit,r=t.onCancel,o=t.needCancel;(void 0===o||o)&&r(),n()},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.subtitle,r=e.shown,o=e.onCancel,i=e.className,a=e.isMobile,c=e.confirmText,u=e.cancelText,l=e.showButtonHorizontal,h=e.showConfirmButtonRight,b=Object(s.b)(f.c,{preset:"primary",color:"blue",onClick:this.handleSubmit,children:c||"确认"},"confirm"),v=Object(s.b)(f.c,{onClick:o,children:u||"取消"},"cancel"),m=a||h?[v,b]:[b,v];return Object(s.b)(p.b,{wrapperClassName:"ConfirmModal-wrapper",className:d()("ConfirmModal",i),title:t,size:a?"small":"default",subtitle:n,onClose:o,closeButton:!1,buttonGroupOnly:!0,children:r&&Object(s.b)(p.a,{direction:a||l?"horizontal":"vertical",children:m})})}}]),n}(u.Component);t.a=b},function(e,t,n){"use strict";n.d(t,"a",(function(){return T}));var r=n(0),o=n(13),i=n(14),a=n(15),c=n(16),s=n(9),u=n(32),l=n(2),d=n(3),f=n.n(d),p=n(1),h=n(19),b=n(25),v=n(29),m=n(141),g=n(440),y=n(160),O=n(115);var j=n(104),w=n(434),C=function(e,t){var n=t.urlToken;return e.people.allFavlistsByUser[n]||{}},k=function(e){return e.currentUser},S=(Object(j.a)(y.a.GET_ALL_FAVLISTS,(function(e,t,n){return function(r,o){var i=o();if(e=e||k(i),!t){var a=C(i,{urlToken:e}),c=a.offset,s=void 0===c?0:c,u=a.limit;t={offset:s,limit:void 0===u?10:u}}return{action:Object.assign({urlToken:e,paging:t},O.a.enableSchema&&{schema:w.b},{extra:n}),fetcher:function(e,t){var n=t.next,r=t.offset,o=void 0===r?0:r,i=t.limit,a=void 0===i?10:i;return n?O.a.http(n):O.a.http("/api/v4/people/".concat(e,"/collections"),{query:{include:"data[*].updated_time,answer_count,follower_count,creator,is_public",offset:o,limit:a}})}(e,t)}}})),Object(j.a)(y.a.GET_ALL_FAVLISTS_WITH_RELATIONS,(function(e,t,n,r,o){return function(i,a){var c=a();if(e=e||k(c),!r){var s=C(c,{urlToken:e}),u=s.offset,l=void 0===u?0:u,d=s.limit;r={offset:l,limit:void 0===d?10:d}}var f=Object.assign({contentType:t,contentId:n,urlToken:e,paging:r},O.a.enableSchema&&{schema:w.b},{extra:o});return{action:f,fetcher:function(e){var t=e.contentType,n=e.contentId,r=e.paging,o=(r=void 0===r?{}:r).next,i=r.offset,a=void 0===i?0:i,c=r.limit,s=void 0===c?10:c;return o?O.a.http(o):O.a.http("/api/v4/collections/contents/".concat(t,"/").concat(n),{query:{offset:a,limit:s}})}(f)}}})));function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var o=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var R=function(){return n.e(35).then(n.bind(null,1448)).then((function(e){return e.FavlistsModal}))},E={ids:[],isFetching:!1,isDrained:!1},_=Object(v.createSelector)((function(e){return e.people.allFavlistsByUser[e.currentUser]||E}),(function(e){return e.entities.favlists}),(function(e,t){var n=e.ids,r=Object(u.a)(e,["ids"]);return Object.assign({},r,{items:n.map((function(e){return t[e]}))})}));var A=function(e){Object(a.a)(n,e);var t=x(n);function n(){var e;Object(o.a)(this,n);for(var i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).onFavlistAdd=function(){for(var t=e.props,n=t.urlToken,r=t.onFavlistAdd,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return r.apply(void 0,i.concat([{urlToken:n}]))},e.onLoad=function(){for(var t=e.props,n=t.onLoad,o=t.type,i=t.id,a=t.urlToken,c=t.onUpdateReaction,s=arguments.length,u=new Array(s),l=0;l<s;l++)u[l]=arguments[l];return n.apply(void 0,[a,o,i].concat(u)).then((function(e){c({contentType:o,contentId:i,relations:e.payload.data.reduce((function(e,t){return Object.assign({},e,Object(r.a)({},t.id,t.isFavorited))}),{})})}))},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this.context.currentUser||{};return Object(l.b)(m.a,Object.assign({getComponent:R},this.props,{authRequired:this.context.authRequired,isUserActive:Boolean(e.isActive),onLoad:this.onLoad,onFavlistAdd:this.onFavlistAdd}))}}]),n}(p.Component);A.contextTypes={authRequired:f.a.func,currentUser:f.a.object};var T=Object(h.compose)(Object(b.connect)((function(e,t){var n=t.id,r=t.type,o=e.favlists.relations,i=e.currentUser,a=_(e);return{isFetching:a.isFetching,isDrained:a.isDrained,items:a.items,relations:o["".concat(r,"_").concat(n)],zaEnabled:!0,urlToken:i}}),(function(e,t){return{onUpdateFav:function(){return e(g.b.apply(void 0,arguments))},onFavlistAdd:t.onFavlistAdd||function(){return e(g.a.apply(void 0,arguments))},onLoad:function(){return e(S.apply(void 0,arguments))},onUpdateReaction:function(){return e(g.c.apply(void 0,arguments))}}})))(A)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var i=n(890),a=n(844),c=n(860),s=n(847),u=n(926),l=n(856),d=n(836),f=n(870),p=n(855),h=n(962),b=d.List,v=d.Record,m=d.Repeat,g=l.draft_tree_data_support?s:c,y=function(e){function t(){return r(this,t),o(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getEntityMap=function(){return u},t.prototype.getBlockMap=function(){return this.get("blockMap")},t.prototype.getSelectionBefore=function(){return this.get("selectionBefore")},t.prototype.getSelectionAfter=function(){return this.get("selectionAfter")},t.prototype.getBlockForKey=function(e){return this.getBlockMap().get(e)},t.prototype.getKeyBefore=function(e){return this.getBlockMap().reverse().keySeq().skipUntil((function(t){return t===e})).skip(1).first()},t.prototype.getKeyAfter=function(e){return this.getBlockMap().keySeq().skipUntil((function(t){return t===e})).skip(1).first()},t.prototype.getBlockAfter=function(e){return this.getBlockMap().skipUntil((function(t,n){return n===e})).skip(1).first()},t.prototype.getBlockBefore=function(e){return this.getBlockMap().reverse().skipUntil((function(t,n){return n===e})).skip(1).first()},t.prototype.getBlocksAsArray=function(){return this.getBlockMap().toArray()},t.prototype.getFirstBlock=function(){return this.getBlockMap().first()},t.prototype.getLastBlock=function(){return this.getBlockMap().last()},t.prototype.getPlainText=function(e){return this.getBlockMap().map((function(e){return e?e.getText():""})).join(e||"\n")},t.prototype.getLastCreatedEntityKey=function(){return u.__getLastCreatedEntityKey()},t.prototype.hasText=function(){var e=this.getBlockMap();return e.size>1||e.first().getLength()>0},t.prototype.createEntity=function(e,t,n){return u.__create(e,t,n),this},t.prototype.mergeEntityData=function(e,t){return u.__mergeData(e,t),this},t.prototype.replaceEntityData=function(e,t){return u.__replaceData(e,t),this},t.prototype.addEntity=function(e){return u.__add(e),this},t.prototype.getEntity=function(e){return u.__get(e)},t.createFromBlockArray=function(e,n){var r=Array.isArray(e)?e:e.contentBlocks,o=i.createFromArray(r),a=o.isEmpty()?new f:f.createEmpty(o.first().getKey());return new t({blockMap:o,entityMap:n||u,selectionBefore:a,selectionAfter:a})},t.createFromText=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:/\r\n?|\n/g,r=e.split(n),o=r.map((function(e){return e=h(e),new g({key:p(),text:e,type:"unstyled",characterList:b(m(a.EMPTY,e.length))})}));return t.createFromBlockArray(o)},t}(v({entityMap:null,blockMap:null,selectionBefore:null,selectionAfter:null}));e.exports=y},function(e,t,n){"use strict";var r=new RegExp("\r","g");e.exports=function(e){return e.replace(r,"")}},function(e,t,n){"use strict";var r=n(837),o=null;function i(e){return"LTR"===e||"RTL"===e}function a(e){return i(e)||r(!1),"LTR"===e?"ltr":"rtl"}function c(e){o=e}var s={NEUTRAL:"NEUTRAL",LTR:"LTR",RTL:"RTL",isStrong:i,getHTMLDir:a,getHTMLDirIfDifferent:function(e,t){return i(e)||r(!1),i(t)||r(!1),e===t?null:a(e)},setGlobalDir:c,initGlobalDir:function(){c("LTR")},getGlobalDir:function(){return o||this.initGlobalDir(),o||r(!1),o}};e.exports=s},function(e,t,n){"use strict";var r=n(836).Map,o=n(1),i=n(871),a=r({"header-one":{element:"h1"},"header-two":{element:"h2"},"header-three":{element:"h3"},"header-four":{element:"h4"},"header-five":{element:"h5"},"header-six":{element:"h6"},"unordered-list-item":{element:"li",wrapper:o.createElement("ul",{className:i("public/DraftStyleDefault/ul")})},"ordered-list-item":{element:"li",wrapper:o.createElement("ol",{className:i("public/DraftStyleDefault/ol")})},blockquote:{element:"blockquote"},atomic:{element:"figure"},"code-block":{element:"pre",wrapper:o.createElement("pre",{className:i("public/DraftStyleDefault/pre")})},unstyled:{element:"div",aliasedElements:["p"]}});e.exports=a},function(e,t,n){"use strict";e.exports={BACKSPACE:8,TAB:9,RETURN:13,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46,COMMA:188,PERIOD:190,A:65,Z:90,ZERO:48,NUMPAD_0:96,NUMPAD_9:105}},function(e,t,n){"use strict";function r(e,t){return t&&"MUTABLE"===e.__get(t).getMutability()?t:null}e.exports=function(e,t){var n;if(t.isCollapsed()){var o=t.getAnchorKey(),i=t.getAnchorOffset();return i>0?(n=e.getBlockForKey(o).getEntityAt(i-1))!==e.getBlockForKey(o).getEntityAt(i)?null:r(e.getEntityMap(),n):null}var a=t.getStartKey(),c=t.getStartOffset(),s=e.getBlockForKey(a);return n=c===s.getLength()?null:s.getEntityAt(c),r(e.getEntityMap(),n)}},function(e,t,n){"use strict";var r=n(1204);e.exports=function e(t,n){return!(!t||!n)&&(t===n||!r(t)&&(r(n)?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}},function(e,t,n){"use strict";function r(e,t){var n=o.get(e,t);return"auto"===n||"scroll"===n}var o={get:n(1206),getScrollParent:function(e){if(!e)return null;for(var t=e.ownerDocument;e&&e!==t.body;){if(r(e,"overflow")||r(e,"overflowY")||r(e,"overflowX"))return e;e=e.parentNode}return t.defaultView||t.parentWindow}};e.exports=o},function(e,t,n){"use strict";var r=n(1211),o=n(1212);e.exports=function(e){var t=r(e.ownerDocument||e.document);e.Window&&e instanceof e.Window&&(e=t);var n=o(e),i=e===t?e.ownerDocument.documentElement:e,a=e.scrollWidth-i.clientWidth,c=e.scrollHeight-i.clientHeight;return n.x=Math.max(0,Math.min(n.x,a)),n.y=Math.max(0,Math.min(n.y,c)),n}},function(e,t,n){"use strict";var r=n(1040);e.exports=function(e){for(var t=e;t&&t!==document.documentElement;){var n=r(t);if(null!=n)return n;t=t.parentNode}return null}},function(e,t,n){"use strict";var r=n(851).isPlatform("Mac OS X"),o={isCtrlKeyCommand:function(e){return!!e.ctrlKey&&!e.altKey},isOptionKeyCommand:function(e){return r&&e.altKey},hasCommandModifier:function(e){return r?!!e.metaKey&&!e.altKey:o.isCtrlKeyCommand(e)}};e.exports=o},function(e,t,n){"use strict";e.exports=function(e,t){var n=e.getSelection(),r=e.getCurrentContent(),o=n.getStartKey(),i=n.getStartOffset(),a=o,c=0;if(t>i){var s=r.getKeyBefore(o);if(null==s)a=o;else a=s,c=r.getBlockForKey(s).getText().length}else c=i-t;return n.merge({focusKey:a,focusOffset:c,isBackward:!0})}},function(e,t,n){var r=n(256),o=n(1094),i=n(184),a=n(321),c=i((function(e,t){if(null==e)return[];var n=t.length;return n>1&&a(e,t[0],t[1])?t=[]:n>2&&a(t[0],t[1],t[2])&&(t=[t[0]]),o(e,r(t,1),[])}));e.exports=c},function(e,t,n){var r=n(1146);function o(t,n,i){return"undefined"!=typeof Reflect&&Reflect.get?e.exports=o=Reflect.get:e.exports=o=function(e,t,n){var o=r(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}},o(t,n,i||t)}e.exports=o},function(e,t,n){"use strict";n.d(t,"a",(function(){return C}));var r=n(40),o=n(13),i=n(14),a=n(15),c=n(16),s=n(9),u=n(2),l=n(1),d=n(41),f=n(3),p=n.n(f),h=n(11),b=n.n(h),v=n(1147),m=n(94),g=n.n(m),y="function"==typeof ResizeObserver?function(e,t){var n=new ResizeObserver((function(e){return t(e[0].contentRect)}));return n.observe(e),function(){n.disconnect()}}:function(e,t){var n,r=function(){var r=e.getBoundingClientRect();!(n&&["left","top","width","height"].every((function(e){return n[e]===r[e]})))&&(n=r,t(r))},o=new(window.MutationObserver||window.WebKitMutationObserver)(g()(r,100));return o.observe(e,{attributes:!0,characterData:!0,childList:!0,subtree:!0}),r(),function(){o.disconnect()}};function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var o=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var j={auto:"auto",yes:"scroll",no:"hidden"},w=function(e){Object(a.a)(n,e);var t=O(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={locationHref:"",iframeHeight:900},e.iframe=null,e.iframeMessenger=null,e.iframeObserver=null,e.handleIframeLoad=function(){e.iframe.contentDocument&&(e.unlistenResize=y(e.iframe.contentDocument.body,(function(t){e.setState({iframeHeight:t.height})})))},e.handleMessage=function(t){var n=e.props.onMessage;t.type===v.b.CHANGE_IFRAME_HEIGHT&&e.setState({iframeHeight:t.payload}),t.type===v.b.REDIRECT_URL&&(window.location.href=t.payload),n&&n(t)},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.setState({locationHref:window.location.href,timestamp:Date.now()}),this.iframeMessenger=new v.a({beforeMessage:function(e){return e.origin.endsWith("zhihu.com")},onMessage:this.handleMessage})}},{key:"componentWillUnmount",value:function(){this.iframeMessenger.close(),this.unlistenResize&&this.unlistenResize()}},{key:"render",value:function(){var e=this,t=this.props,n=t.src,o=t.className,i=t.scrolling,a=t.withParentUrl,c=t.withTimestamp,s=this.state,l=s.locationHref,f=s.timestamp,p=s.iframeHeight,h=n.split("?"),v=Object(r.a)(h,2),m=v[0],g=v[1],y=Object(d.parse)(g);return a&&(y.parent_url=l),c&&(y.ts=f),Object(u.b)("iframe",{className:b()("Iframe",o),src:"".concat(m,"?").concat(Object(d.stringify)(y)),ref:function(t){return e.iframe=t},height:p,onLoad:this.handleIframeLoad,scrolling:i,style:{border:"none",display:"block",overflow:j[i],width:"100%"}})}}]),n}(l.Component);w.defaultProps={scrolling:"auto",withParentUrl:!0,withTimestamp:!1},w.propTypes={className:p.a.string,src:p.a.string,scrolling:p.a.oneOf(["auto","yes","no"]),onMessage:p.a.func};var C=w},function(e,t,n){"use strict";var r=n(20),o=n.n(r),i=n(21),a=n.n(i),c=n(22),s=n.n(c),u=n(23),l=n.n(u),d=n(17),f=n.n(d),p=n(33),h=n.n(p),b=n(43),v=n.n(b),m=n(3),g=n.n(m),y=n(1),O=n(11),j=n.n(O),w=n(367),C=n(30),k=n(5);function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var o=f()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l()(this,n)}}function x(e){var t=e.className,n=e.tag,r=e.name,o=e.value,i=v()(e,["className","tag","name","value"]),a="div";return n?a=n:i.href?a="a":i.onClick&&(a=C.c),Object(k.g)(a,h()({className:j()("NumberBoard-item",t)},i),Object(k.g)("div",{className:"NumberBoard-itemInner"},Object(k.g)("div",{className:"NumberBoard-itemName"},r),Object(k.g)("strong",{className:"NumberBoard-itemValue",title:o},Object(w.formatNumber)(o))))}var R=function(e){s()(n,e);var t=S(n);function n(){return o()(this,n),t.apply(this,arguments)}return a()(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.divider,r=e.children,o=e.items,i=v()(e,["className","divider","children","items"]);return Object(k.g)("div",h()({className:j()("NumberBoard",t,{"NumberBoard--divider":n})},i),r||o.map((function(e){return Object(k.g)(x,h()({key:e.name},e))})))}}]),n}(y.Component);R.propTypes={divider:g.a.bool},R.defaultProps={divider:!1},R.Item=x;var E=R;t.a=E},function(e,t,n){"use strict";var r=n(57),o=n.n(r),i=n(33),a=n.n(i),c=n(43),s=n.n(c),u=n(1),l=n.n(u),d=n(11),f=n.n(d),p=n(28),h=n(235),b=n.n(h),v=n(7),m=n(839),g=n(367),y=n(234),O=n(896),j=n(991),w=n(177),C=n(868),k=n(910),S=n(853),x=n(909),R=n(5);function E(e){var t=Object(u.useRef)(null),n=e.component,r=void 0===n?"a":n,o=e.className,i=e.onClick,a=e.onMouseDown,c=e.zvideo,s=e.enableInlinePlay,d=void 0!==s&&s,h=e.onImageClick,v=void 0===h?b.a:h,C=e.onInfoClick,x=void 0===C?b.a:C,E=e.renderInjection,A=c.id,T=c.title,N=c.url,I=c.imageUrl,M=c.video,D=M.videoId,L=M.duration,P=M.status,z=c.author,B=c.playCount,F=!N?"inlinezvideo":"zvideo";Object(u.useEffect)((function(){E||Object(m.onViewedOnce)(t.current,(function(){p.a.trackCardShow(t.current,{id:7844},{button:{text:F}})}))}),[F,E]);var U=Object(u.useCallback)((function(e){p.a.trackEvent(e.target,{id:7846,action:"OpenUrl"},{button:{text:F}}),v(e,c)}),[v,c,F]),q=Object(u.useCallback)((function(e){p.a.trackEvent(e.target,{id:7847,action:"OpenUrl"},{button:{text:F}}),x(e,c)}),[x,c,F]);if(E){if("function"!=typeof E)throw new Error("renderInjection must be function");return E(e)}return"converting_failure"===P?Object(R.g)(_,{error:"视频转码失败，请重新上传视频"}):Object(R.g)(l.a.Fragment,null,Object(R.g)(y.c,{as:r,shouldTrackClick:!0,shouldTrackShow:!0,zaAction:"OpenUrl",zaEventType:"Click",zaBlock:"ZTextZVideoLinkCard",zaType:"Button",extra:{link:{url:N}},className:f()("ZVideoLinkCard",o),ref:t,href:N,target:"_blank",rel:"noopener noreferrer",onClick:i,onMouseDown:a,"data-za-not-track-link":!0,"data-za-module":"Content","data-za-module-info":JSON.stringify({card:{content:{type:"Zvideo",token:A,video_id:D}}})},d?Object(R.g)(k.a,{placeholder:Object(R.g)("div",{className:"ZVideoLinkCard-playerContainer"})},Object(R.g)("div",{className:"ZVideoLinkCard-playerContainer"},Object(R.g)(O.a,{type:"video",className:"ZVideoLinkCard-player",src:"https://www.zhihu.com/video/".concat(D),iframeProps:{allowFullScreen:!0}}))):Object(R.g)("div",{className:"ZVideoLinkCard-image",style:{backgroundImage:"url(".concat(I,")")},onClick:U},Object(R.g)(S.a,{className:"ZVideoLinkCard-playIcon"}),Boolean(L)&&Object(R.g)("div",{className:"ZVideoLinkCard-duration"},Object(j.a)(L))),Object(R.g)("div",{className:"ZVideoLinkCard-info",onClick:q},Object(R.g)("div",{className:"ZVideoLinkCard-title"},T),Boolean(N)&&Object(R.g)("div",{className:"ZVideoLinkCard-author"},Object(R.g)(w.a,{className:"ZVideoLinkCard-avatar",url:z.avatarUrl,alt:"",size:20,round:!0}),Object(R.g)("div",null,z.name,"的视频"),Boolean(B)&&Object(R.g)("div",null," · ",Object(g.cnNiceNumber)(B),"播放")))))}function _(e){var t=e.error;return Object(R.g)("div",{className:"ZVideoLinkErrorCard"},Object(R.g)("div",{className:"ZVideoLinkErrorCard-message"},t.message||"视频加载错误"))}function A(e){var t=e.id,n=e.shouldUseOldLinkCard,r=s()(e,["id","shouldUseOldLinkCard"]),i=Object(u.useState)(null),c=o()(i,2),l=c[0],d=c[1],f=Object(u.useState)(null),p=o()(f,2),h=p[0],b=p[1];return Object(u.useEffect)((function(){if(n){var e="https://www.zhihu.com/api/v4/zvideos/".concat(t,"/card");Object(C.a)(e).then((function(e){return Object(v.camelizeKeys)(e)})).then((function(e){e.error?b(e.error):d(e)})).catch((function(e){b(e)}))}}),[n,t]),n?h?Object(R.g)(_,{error:h}):l?Object(R.g)(E,a()({zvideo:l},r)):null:Object(R.g)(x.a,a()({inEditor:!0,component:"div",href:"https://www.zhihu.com/zvideo/".concat(t)},r))}A.defaultProps={shouldUseOldLinkCard:!0};t.a=A},function(e,t,n){"use strict";var r=n(32),o=n(2),i=n(372),a=n(90),c=n(846),s=n(112),u=n.n(s),l=n(150),d=u()(l.findImageSpec),f=function(e,t){return Object(l.imgUrl)(e,d(t))};t.a=function(e){var t=e.user,n=e.size,s=void 0===n?38:n,u=e.noBadge,l=void 0!==u&&u,d=e.noLink,p=void 0!==d&&d,h=e.linkProps,b=Object(r.a)(e,["user","size","noBadge","noLink","linkProps"]),v=t.avatarUrl,m=t.isOrg,g=t.urlToken,y=!p&&g?"https://www.zhihu.com/".concat(m?"org":"people","/").concat(g):null,O=Object(o.b)(a.Image,{loading:"lazy",src:f(v,s),srcSet:"".concat(f(v,2*s)," 2x"),size:s,display:"block",css:{borderRadius:"50%"}});return Object(o.c)(a.Box,Object.assign({display:"inline-block",size:s,css:{position:"relative"}},b,{children:[y?Object(o.b)(c.a,Object.assign({href:y,target:"_blank"},h,{children:O})):O,!l&&Object(o.b)(i.c,{css:Object(i.f)(s),isOrg:m,badge:t.badgeV2||t.badge,linkify:!p,enableTooltip:!0})]}))}},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i}));var r=e.Buffer,o=function(e){if("undefined"!=typeof atob)return atob(e);if(r)return r.from(e,"base64").toString("binary");throw new Error("Do not support Base64 decoding")},i=function(e){if("undefined"!=typeof btoa)return btoa(e);if(r)return r.from(String(e),"binary").toString("base64");throw new Error("Do not support Base64 encoding")}}).call(this,n(100))},function(e,t,n){"use strict";var r=n(2),o=n(66);t.a=function(e){var t=Object(o.d)((function(){return n.e(0).then(n.bind(null,1313))}));return t?Object(r.b)(t,Object.assign({},e)):null}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return u}));var r=n(112),o=n.n(r),i=n(1066),a=n.n(i),c=function(e,t){var n=[];return o()((function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];n.push(o),setTimeout((function(){n.length&&(t(n),n.length=0)}),e)}),(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return String(t)}))}(550,(function(e){var t=new FormData;return t.append("items",JSON.stringify(e)),a()("/lastread/touch",{method:"POST",body:t})})),s="read",u="touch";t.c=c},function(e,t,n){var r=n(1067),o=n(952),i=n(399),a=n(410);e.exports=function(e,t,n){e=a(e);var c=(t=i(t))?o(e):0;return t&&c<t?r(t-c,n)+e:e}},,,function(e,t,n){var r=n(1075)();e.exports=r},,function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n(1);var r=n(11),o=n.n(r),i=n(5),a=function(e){var t=e.avatar,n=e.bottom,r=e.button,a=e.className,c=e.height,s=e.icon,u=e.inline,l=e.right,d=e.style,f=void 0===d?{}:d,p=e.title,h=e.width,b=Object.assign({},f);return h&&(b.width="".concat(h,"px")),c&&(b.height="".concat(c,"px")),n&&(b.marginBottom="".concat(n,"px")),l&&(b.marginRight="".concat(l,"px")),Object(i.g)("div",{className:o()("Holder",a,{"Holder--inline":u,"Holder--title":p,"Holder--icon":s,"Holder--button":r,"Holder--avatar":t}),style:b})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return A}));var r=n(40),o=n(13),i=n(14),a=n(15),c=n(16),s=n(9),u=n(2),l=n(3),d=n.n(l),f=n(1),p=n(11),h=n.n(p),b=n(30),v=n(1325),m=n(1403),g=n(28),y=n(367),O=n(74),j=n(206),w=n(4),C=n(781),k=n(135);function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var o=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var x=function(e){Object(a.a)(n,e);var t=S(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={step:0},e.containerRef=Object(f.createRef)(),e.reasonButtonRefs=[],e.toggleStep=function(){e.setState({step:0===e.state.step?1:0},(function(){e.popover.position()}))},e.handleKeyDown=function(t){var n=Number(t.key);n&&e.reasonButtonRefs[n-1]&&e.reasonButtonRefs[n-1].focus()},e.handleNeverShowVoteDownReason=function(){e.props.onSetVoteDownReason(!1),e.popover.close()},e.handleSelectReason=function(t){e.props.onSelectVoteDownReason(t),e.popover.close()},e}return Object(i.a)(n,[{key:"componentDidUpdate",value:function(){"absolute"===this.props.positionStatus&&this.popover.close()}},{key:"render",value:function(){var e=this,t=this.props,n=t.reasonList,r=t.positionStatus,o=this.state.step,i=Object(w.a)(n).sort((function(e,t){return e.sort-t.sort}));return Object(u.b)(k.a,{className:"VoteDownReasonMenu",targetClassName:"VoteDownReasonMenu-target",positionStatus:r,toggler:this.props.toggler,onOpen:function(){e.setState({step:0})},getContainer:function(){return document.querySelector(".ContentItem-actions")},onClick:this.props.onTogglerClick,ref:function(t){e.popover=t,e.props.popoverRef&&e.props.popoverRef(t)},placement:"top",arrowed:!0,preventCloseOnTarget:!0,children:Object(u.c)("div",{className:"VoteDownReasonMenu-container",onKeyDown:this.handleKeyDown,tabIndex:-1,children:[Object(u.c)("div",{className:"VoteDownReasonMenu-header",children:[0===o&&"已反对，你觉得",1===o&&"不再显示该反馈功能？"]}),Object(u.c)("div",{className:"VoteDownReasonMenu-action",children:[0===o&&Object(u.b)(b.c,{preset:"plain",className:"VoteDownReasonMenu-ignoreButton preventCloseOnTarget",onClick:this.toggleStep,children:"不再显示"}),0===o&&Object(u.b)("div",{className:"VoteDownReasonMenu-spliter"}),Object(u.b)(b.c,{preset:"plain",className:"VoteDownReasonMenu-closeButton",onClick:function(){e.popover.close()},"aria-label":"关闭",tabIndex:1,icon:C.a})]}),0===o&&Object(u.b)("div",{className:"VoteDownReasonMenu-reasonList",children:i.map((function(t,n){return Object(u.b)(b.c,{preset:"plain",className:"VoteDownReasonMenu-reason",onClick:function(){e.handleSelectReason(t)},onRef:function(t){return e.reasonButtonRefs[n]=t},children:t.name},t.reasonId)}))}),1===o&&Object(u.c)("div",{className:"VoteDownReasonMenu-disableReason",children:[Object(u.b)("div",{className:"VoteDownReasonMenu-disableReasonHint",children:"你可以在「设置」页面中的「屏蔽」开启。"}),Object(u.c)("div",{className:"VoteDownReasonMenu-disableReasonButtonList",children:[Object(u.b)(b.c,{className:"preventCloseOnTarget",onClick:this.toggleStep,children:"返回"}),Object(u.b)(b.c,{color:"blue",onClick:this.handleNeverShowVoteDownReason,children:"不再显示"})]})]})]})})}}]),n}(f.Component);x.defaultProps={reasonList:[]};var R=x,E=n(24);n(1152);function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var o=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var A=function(e){Object(a.a)(n,e);var t=_(n);function n(){var e;Object(o.a)(this,n);for(var i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={recognizeInfo:{showRecognizeModal:!1,action:"",voteType:"",isRecognized:e.props.isRecognized}},e.voteUpButtonRef=Object(f.createRef)(),e.voteDownButtonRef=Object(f.createRef)(),e.shouldShowMenu=function(){var t=e.props,n=t.voting,r=t.voteDownReason,o=t.onLoadVoteDownReason;return!!t.isShowVoteDownMenu&&(-1===n?(e.popover.close(),!1):!!r||(e.isPendingForVoteDownReason=!0,o(),!1))},e.onVote=e.context.authRequired((function(t){e.props.onVote(t)}),E.V.vote),e.voteUp=function(t){var n=1===e.props.voting?["UnUpvote","neutral"]:["Upvote","up"],o=Object(r.a)(n,2),i=o[0],a=o[1];e.vote(t,i,a),e.voteUpButtonRef.current.focus()},e._voteDown=function(t){var n=-1===e.props.voting?["UnDownvote","neutral"]:["Downvote","down"],o=Object(r.a)(n,2),i=o[0],a=o[1];e.vote(t,i,a),e.voteDownButtonRef.current.focus()},e.voteDown=function(t){e.shouldShowMenu()&&e.popover.open(),e._voteDown(t)},e.vote=function(t,n,r){var o=e.props,i=o.disableAuth,a=o.handleToggleGuide,c=o.onClick,s=o.type,u=o.zaIds,l=u.voteUp,d=u.voteDown,f=n.includes("Upvote")?l:d;"article"===s&&"down"===r&&g.a.trackEvent(e.voteDownButtonRef.current,{action:"Click",id:2315,name:"反对"}),g.a.trackEvent(n.includes("Upvote")?e.voteUpButtonRef.current:e.voteDownButtonRef.current,Object.assign({action:n,element:"Button"},f&&{id:f})),c?c(t,r):i?a():e.onVoteWithRecognize(n,r)},e.onVoteWithRecognize=function(t,n){var r=e.props.voting;!e.state.recognizeInfo.isRecognized||1!==r||"UnUpvote"!==t&&"Downvote"!==t?e.onVote(n):e.setState({recognizeInfo:Object.assign({},e.state.recognizeInfo,{showRecognizeModal:!0,action:t,voteType:n})})},e.handleConfirmCancelRecognize=function(){e.onVote(e.state.recognizeInfo.voteType),e.setState({recognizeInfo:Object.assign({},e.state.recognizeInfo,{isRecognized:!1,showRecognizeModal:!1})})},e.handleCloseCancelRecognizeModal=function(){return e.setState({recognizeInfo:Object.assign({},e.state.recognizeInfo,{showRecognizeModal:!1})})},e.handleTogglerClick=function(t){e.shouldShowMenu()||t.preventDefault(),e._voteDown(t)},e.renderVoteUpButton=function(){var t=e.props,n=t.isOwner,r=t.count,o=t.voting,i=t.disabled,a=t.hideDesc,c=1===o?"已赞同":"赞同",s=[c,Object(y.cnNiceNumber)(r)].join(" "),l=[!a&&c,0!==r&&Object(y.cnNiceNumber)(r).trim()].filter(Boolean).join(" ");return Object(u.c)(b.c,{className:h()("VoteButton VoteButton--up",{"is-active":1===o}),disabled:n||i,onClick:e.voteUp,"aria-label":s,onRef:e.voteUpButtonRef,children:[Object(u.b)(v.a,{center:!0,size:10,className:"VoteButton-TriangleUp"}),l]})},e.renderVoteDownButton=function(){var t=e.props,n=t.voting,r=t.disabled,o=-1===n?"已反对":"反对";return Object(u.b)(b.c,{className:h()("VoteButton VoteButton--down",{"is-active":-1===n},{"VoteButton--mobileDown":!1}),disabled:r,onClick:e._voteDown,"aria-label":o,onRef:e.voteDownButtonRef,children:Object(u.b)(m.a,{center:!0,size:10})})},e}return Object(i.a)(n,[{key:"componentWillReceiveProps",value:function(e){e.voteDownReason&&this.isPendingForVoteDownReason&&(this.isPendingForVoteDownReason=!1,this.popover.open())}},{key:"render",value:function(){var e=this,t=this.props,n=t.isOwner,r=t.positionStatus,o=t.isShowVoteDownMenu,i=t.voteDownReason,a=this.state.recognizeInfo,c=a.showRecognizeModal,s="UnUpvote"===a.action,l=o&&!0;return Object(u.c)("span",{ref:this.voteButtonRef,children:[Object(u.b)(j.c,{keyMap:{VOTE_UP:"v",VOTE_DOWN:"d"},handlers:{VOTE_UP:this.voteUp,VOTE_DOWN:this.voteDown}}),this.renderVoteUpButton(),!n&&!l&&this.renderVoteDownButton(),!n&&l&&Object(u.b)(R,{reasonList:i,toggler:this.renderVoteDownButton(),popoverRef:function(t){return e.popover=t},positionStatus:r,onTogglerClick:this.handleTogglerClick,onSelectVoteDownReason:this.props.onSelectVoteDownReason,onSetVoteDownReason:this.props.onSetVoteDownReason}),Object(u.b)(O.b,{title:"确定".concat(s?"取消赞同":"选择反对"),onClose:this.handleCloseCancelRecognizeModal,children:c&&Object(u.c)("div",{children:[Object(u.c)("div",{children:[s?"取消赞同":"选择反对","时，你赠与作者的专业徽章也会收回，并且赠与次数不会返还，是否仍要取消？"]}),Object(u.c)(O.a,{direction:"horizontal",children:[Object(u.b)(b.c,{onClick:this.handleCloseCancelRecognizeModal,children:s?"暂不取消":"暂不选择"}),Object(u.b)(b.c,{preset:"primary",color:"blue",onClick:this.handleConfirmCancelRecognize,children:s?"取消赞同":"选择反对"})]})]})})]})}}]),n}(f.Component);A.contextTypes={authRequired:d.a.func},A.propTypes={voting:d.a.oneOf([-1,0,1]).isRequired,disabled:d.a.bool,type:d.a.string,hideDesc:d.a.bool,zaIds:d.a.shape({voteUp:d.a.number,voteDown:d.a.number}),isRecognized:d.a.bool},A.defaultProps={voting:0,disabled:!1,type:"",hideDesc:!1,zaIds:{}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return O})),n.d(t,"b",(function(){return j}));var r=n(0),o=n(13),i=n(14),a=n(15),c=n(16),s=n(9),u=n(2),l=n(1),d=n(3),f=n.n(d),p=n(25),h=n(11),b=n.n(h),v=n(906),m=n(37),g=n(96);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var o=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var O={all:"开放评论",censor:"预审评论",nobody:"关闭评论"},j={all:"允许任何人评论",follower:"允许关注我的人评论",censor:"评论由我筛选后显示",followee:"允许我关注的人评论",paid:"付费用户可评论",nobody:"关闭评论"},w=function(e){Object(a.a)(n,e);var t=y(n);function n(){var e;Object(o.a)(this,n);for(var i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).handleClickOption=function(t){var n=e.props,r=n.isOrg,o=n.target,i=n.onChange,a=n.current;if(t!==a)if(o){var c=o.id;o.adminClosedComment?Object(g.b)("此内容无法更改评论权限",{theme:"red-ghost"}):r||"censor"!==t&&"censor"!==a?i(c,t):Object(g.a)("你确定要更改评论权限吗？",{content:"censor"===t?"更改后，已有评论不变，新评论需要经过筛选才会公开显示":"更改后，所有待筛选评论都会被公开显示出来"}).then((function(){return i(c,t)})).catch((function(){return null}))}else i(t)},e.getCommentPermission=function(){var t=e.props.target,n=t&&"answer"===t.type&&"paid"===t.answerType;return Object.keys(j).filter((function(e){if("paid"!==e||n)return"follower"!==e||t&&"article"===t.type})).reduce((function(e,t){return Object.assign({},e,Object(r.a)({},t,j[t]))}),{})},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.isOrg,r=t.current,o=t.className,i=n?O:this.getCommentPermission();return Object(u.b)(l.Fragment,{children:Object.keys(i).map((function(t){return Object(u.b)(v.a,{onClick:function(){return e.handleClickOption(t)},className:b()("CommentPermission-item",o),checked:t===r,children:i[t]},t)}))})}}]),n}(l.Component);w.propTypes={current:f.a.string.isRequired,target:f.a.object,onChange:f.a.func.isRequired};t.c=Object(p.connect)((function(e){return{isOrg:Object(m.h)(e)}}))(w)},function(e,t,n){"use strict";var r=n(40),o=n(2),i=n(1),a=n(73),c=n.n(a),s=n(25),u=n(379),l=Object(s.connect)((function(e){return{hasData:e.emoticons.emoticonGroupList.length>0}}));t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.alwaysShow,n=void 0!==t&&t;return function(e){return l(c()((function(t){var a=t.hasData,c=Object(i.useState)(!1),l=Object(r.a)(c,2),d=l[0],f=l[1],p=Object(s.useDispatch)();return Object(i.useEffect)((function(){a?f(!0):p(Object(u.d)()).then((function(e){var t=e.payload.data[0].id;p(Object(u.e)(t)),f(!0)})).catch((function(){f(!0)}))}),[p,a]),(!d||!n)&&Object(o.b)(e,Object.assign({},t))}),e))}}},function(e,t,n){"use strict";function r(e){var t=String(e);return t.length<2&&(t="0"+t),t}t.a=function(e){if(!Number.isFinite(e))return"";var t=(e=Math.floor(e))%60,n=Math.floor(e/60);return"".concat(r(n),":").concat(r(t))}},function(e,t,n){"use strict";
/*!
 * bytes
 * Copyright(c) 2012-2014 TJ Holowaychuk
 * Copyright(c) 2015 Jed Watson
 * MIT Licensed
 */e.exports=function(e,t){if("string"==typeof e)return s(e);if("number"==typeof e)return c(e,t);return null},e.exports.format=c,e.exports.parse=s;var r=/\B(?=(\d{3})+(?!\d))/g,o=/(?:\.0*|(\.[^0]+)0+)$/,i={b:1,kb:1024,mb:1<<20,gb:1<<30,tb:Math.pow(1024,4),pb:Math.pow(1024,5)},a=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb|pb)$/i;function c(e,t){if(!Number.isFinite(e))return null;var n=Math.abs(e),a=t&&t.thousandsSeparator||"",c=t&&t.unitSeparator||"",s=t&&void 0!==t.decimalPlaces?t.decimalPlaces:2,u=Boolean(t&&t.fixedDecimals),l=t&&t.unit||"";l&&i[l.toLowerCase()]||(l=n>=i.pb?"PB":n>=i.tb?"TB":n>=i.gb?"GB":n>=i.mb?"MB":n>=i.kb?"KB":"B");var d=(e/i[l.toLowerCase()]).toFixed(s);return u||(d=d.replace(o,"$1")),a&&(d=d.replace(r,a)),d+c+l}function s(e){if("number"==typeof e&&!isNaN(e))return e;if("string"!=typeof e)return null;var t,n=a.exec(e),r="b";return n?(t=parseFloat(n[1]),r=n[4].toLowerCase()):(t=parseInt(e,10),r="b"),Math.floor(i[r]*t)}},function(e,t,n){"use strict";e.exports=n(1008)},function(e,t,n){"use strict";t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch(e,Object.assign({credentials:"include",headers:{"X-Requested-With":"Fetch"}},t)).then((function(e){return e.json()}))}},function(e,t,n){"use strict";var r=n(13),o=n(14),i=n(15),a=n(16),c=n(9),s=n(2),u=n(1),l=n(25),d=n(19),f=n(3),p=n.n(f),h=n(11),b=n.n(h),v=n(258),m=n.n(v),g=n(66),y=n(234),O=n(379),j=n(37),w=n(236),C=n(942),k=n(40),S=n(153);function x(e){var t,n,r,o,i,a,c,l,d,f=e.className,p=e.emoticonGroupList,h=e.curEmoticonGroupId,v=e.onGroupSelected,m=e.vipEnabled,y=Object(u.useRef)(),O=Object(S.a)(m,p),j=(t=y,n=Object(u.useState)({left:null,x:null}),r=Object(k.a)(n,2),o=r[0],i=r[1],a=Object(u.useState)(!1),c=Object(k.a)(a,2),l=c[0],d=c[1],{onMouseDown:Object(g.c)((function(e){var n;d(!0);var r=null===(n=t.current)||void 0===n?void 0:n.scrollLeft,o=e.clientX;i({left:r,x:o}),e.preventDefault()})),onMouseMove:Object(g.c)((function(e){if(l){var n=e.clientX-o.x;t.current&&(t.current.scrollLeft=o.left-n)}})),onMouseUp:Object(g.c)((function(){l&&d(!1)}))});return Object(s.b)("div",{className:b()("EmoticonsFooter",f),children:Object(s.b)("ul",Object.assign({className:"EmoticonsFooter-items",ref:y},j,{children:O.map((function(e){return Object(s.b)("li",{className:b()("EmoticonsFooter-item",{"EmoticonsFooter-item--selected":h===e.id}),onClick:function(){v(e.id)},children:Object(s.b)("img",{src:e.iconUrl,className:"EmoticonsFooter-itemIcon"})},e.id)}))}))})}var R=n(945);function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var _=function(e){Object(i.a)(n,e);var t=E(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).handleMouseEnter=function(e,t){e.dynamicImageUrl&&(t.target.src=e.dynamicImageUrl)},e.handleMouseLeave=function(e,t){e.dynamicImageUrl&&(t.target.src=e.staticImageUrl)},e.handleSelectEmoticon=function(t,n){(0,e.props.onSelectEmoticon)(t,n)},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.type,r=t.data,o=void 0===r?[]:r;return 0===o.length?Object(s.b)(R.a,{className:"EmoticonPanel-spinner"}):Object(s.b)("ul",{className:"EmoticonPanel",children:o.map((function(t){return Object(s.c)(y.a,{zaType:"Button",zaText:t.title,zaEventType:"Click",zaBlock:"vip"===n?"VipEmoticon":"Emoticon",as:"li",className:b()("EmoticonPanel-item",{"EmoticonPanel-item--big":"emoji"!==n}),onClick:function(){e.handleSelectEmoticon(t,n)},children:[Object(s.b)("img",{src:t.staticImageUrl,title:"emoji"===n?t.title:"",className:b()({"EmoticonPanel-itemImg--small":"emoji"===n,"EmoticonPanel-itemImg--big":"emoji"!==n}),onMouseOver:function(n){e.handleMouseEnter(t,n)},onMouseOut:function(n){e.handleMouseLeave(t,n)},alt:t.title}),"emoji"!==n&&Object(s.b)("span",{className:"EmoticonPanel-itemTitle",children:t.title})]},t.id)}))})}}]),n}(u.Component);function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}_.propTypes={type:p.a.string.isRequired,data:p.a.array.isRequired,onSelectEmoticon:p.a.func.isRequired};var T=function(e){Object(i.a)(n,e);var t=A(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).getCurEmoticonGroupPanleData=function(){var t=e.props,n=t.curEmoticonGroupId;return t.emoticonPanelList.filter((function(e){return e.groupId===n}))},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.changeSelectedEmoticonPanel,n=e.curEmoticonPanelId,r=e.className,o=this.getCurEmoticonGroupPanleData();return o.length<=1?null:Object(s.b)("ul",{className:b()("EmoticonPagination",r),children:o.map((function(e){return Object(s.b)("li",{className:b()("EmoticonPagination-bullet",{"EmoticonPagination-bullet--active":e.id===n}),onClick:function(){t(e.id)}},e.id)}))})}}]),n}(u.Component);T.propsTypes={className:p.a.string};var N=Object(l.connect)((function(e){var t=e.emoticons;return{curEmoticonGroupId:t.curEmoticonGroupId,emoticonPanelList:t.emoticonPanelList,curEmoticonPanelId:t.curEmoticonPanelId}}),{changeSelectedEmoticonPanel:O.b})(T),I=n(0),M=n(834),D=n(24);function L(e){var t=e.show,n=e.onClick,r=Object(g.c)((function(){null==n||n()}));return t&&Object(s.c)(y.a,{zaType:"Button",zaEventType:"Click",zaAction:"OpenUrl",zaBlock:"VipBrand",extra:{link:{url:D.F}},css:function(e){return Object(I.a)({backgroundColor:e.colorMod(e.colors.GYL08A).alpha(.25),color:e.colors.GYL12A,display:"flex",alignItems:"center",justifyContent:"center",height:"25px",fontSize:"12px",lineHeight:"17px",userSelect:"none"},"&:hover",{cursor:"pointer"})},onClick:r,children:["开通会员解锁全部会员表情 ",Object(s.b)(M.a,{})]})}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var z={containerClass:"Emoticons-panelContainer",ContainerEl:"ul",threshold:10},B=function(e){Object(i.a)(n,e);var t=P(n);function n(e){var o;return Object(r.a)(this,n),(o=t.call(this,e)).state={showVipStickerModal:!1},o.setShowVipStickerModal=function(e){o.setState({showVipStickerModal:e})},o.handleGetSwiperInstance=function(e){o.mousetrap=new m.a,o.swiperInstance=e,o.mousetrap.bind("left",(function(){e.slidePrev()})),o.mousetrap.bind("right",(function(){e.slideNext()}))},o.handleEmoticonGroupSelected=function(e){var t=o.props,n=t.getEmoticonsDetail,r=t.emoticonGroupDetail,i=t.changeSelectedEmoticonGroup,a=t.changeSelectedEmoticonPanel;r[e]||n(e),i(e),a("".concat(e,"-0"))},o.handleSlideChange=function(){var e=o.props,t=e.emoticonPanelList,n=e.getEmoticonsDetail,r=e.changeSelectedEmoticonPanel,i=e.changeSelectedEmoticonGroup;if(o.swiperInstance){var a=t[o.swiperInstance.activeIndex];r(a.id),i(a.groupId),0===a.data.length&&n(a.groupId)}},o.handleRequestVip=function(){o.setShowVipStickerModal(!0)},o.handleSelectEmoticon=function(e,t){var n=o.props,r=n.onSelectEmoticon,i=n.isVip;"vip"!==t||i?r(e,t):o.handleRequestVip()},o.swiperInstance=Object(u.createRef)(),o}return Object(o.a)(n,[{key:"componentWillUnmount",value:function(){var e=this.props,t=e.changeSelectedEmoticonGroup,n=e.changeSelectedEmoticonPanel,r=e.emoticonPanelList;t(r[0].groupId),n(r[0].id),this.mousetrap.reset()}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.emoticonGroupList,o=void 0===r?[]:r,i=t.curEmoticonGroupId,a=t.emoticonPanelList,c=t.curEmoticonPanelId,u=t.isVip,l=t.vipEnabled,d=void 0!==l&&l,f=t.Swiper,p=this.state.showVipStickerModal,h=this.setShowVipStickerModal,v=Object(S.a)(d,a);return Object(s.b)(y.b,{block:"EmoticonsCard",children:Object(s.c)("div",{className:b()("Emoticons",n),children:[f?Object(s.b)(f,Object.assign({},z,{activeSlideKey:c,getSwiper:this.handleGetSwiperInstance,on:{slideChange:this.handleSlideChange},children:v.map((function(t){return Object(s.b)("li",{className:"Emoticons-panels-item",children:Object(s.b)(_,{type:t.type,data:t.data,onSelectEmoticon:e.handleSelectEmoticon})},t.id)}))})):Object(s.b)("div",{css:{height:183}}),Object(s.b)(N,{className:"Emoticons-Pagination"}),Object(s.b)(L,{show:d&&!u,onClick:this.handleRequestVip}),Object(s.b)(x,{emoticonGroupList:o,curEmoticonGroupId:i,onGroupSelected:this.handleEmoticonGroupSelected,vipEnabled:d}),Object(s.b)(C.b,{show:p,setShow:h,type:C.a.comment_sticker})]})})}}]),n}(u.Component);B.propTypes={className:p.a.string,onSelectEmoticon:p.a.func};t.a=Object(d.compose)(Object(l.connect)((function(e){var t=e.emoticons,n=t.emoticonGroupList,r=t.curEmoticonGroupId,o=t.emoticonGroupDetail,i=t.emoticonPanelList;return{emoticonGroupList:n,curEmoticonGroupId:r,emoticonGroupDetail:o,emoticonPanelList:void 0===i?[]:i,curEmoticonPanelId:t.curEmoticonPanelId,isVip:Object(j.j)(e)}}),{getEmoticonsDetail:O.e,changeSelectedEmoticonGroup:O.a,changeSelectedEmoticonPanel:O.b}),Object(w.a)(null),(function(e){return function(t){var r=Object(g.d)((function(){return n.e(42).then(n.t.bind(null,2579,7))}));return Object(s.b)(e,Object.assign({},t,{Swiper:r}))}}))(B)},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n(1);var r=n(3),o=n.n(r),i=n(66),a=n(5);function c(e){var t=e.id,r=e.parentType,o=e.parentId,c=e.suger,s=e.data,u=e.isEditor,l=void 0!==u&&u,d=Object(i.d)((function(){return n.e(3).then(n.bind(null,2613))}),t),f=Object(i.d)((function(){return n.e(4).then(n.bind(null,2614))}),t);return t.startsWith("fee_")&&f?Object(a.g)(f,{id:t,isEditor:l}):d?Object(a.g)(d,{id:t,parentType:r,urlToken:o,suger:c,data:s,isEditor:l}):null}c.propTypes={id:o.a.string.isRequired,parentType:o.a.oneOf(["answer","article"]),parentId:o.a.string,suger:o.a.object,data:o.a.object,isEditor:o.a.bool};var s=c},function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(155),a=n.n(i),c=n(5);t.a=function(e){var t=e.referenceList,n=e.onClick,r=e.listRef;return Object(c.g)(o.a.Fragment,null,Object(c.g)("h2",null,"参考"),Object(c.g)("ol",{className:"ReferenceList",onClick:n,ref:r},a()(t,"refKey").map((function(e){var n=t.filter((function(t){return t.refKey===e.refKey})),r=n.length>1?Object(c.g)(o.a.Fragment,null,Object(c.g)("span",{className:"ReferenceList-backHint","aria-label":"back"},"^"),n.map((function(e,t){var n="".concat(e.refKey,"_").concat(t);return Object(c.g)("sup",{key:n,className:"ReferenceList-backLink"},Object(c.g)("a",{href:"#".concat(n),"data-reference-link":!0},"abcdefghijklmnopqrstuvwxyz"[t%26]))}))):Object(c.g)("a",{className:"ReferenceList-backLink",href:"#".concat(e.refKey,"_0"),"aria-label":"back","data-reference-link":!0},"^");return Object(c.g)("li",{id:e.refKey,key:e.refKey,tabIndex:0},r,e.text&&Object(c.g)("span",null,e.text),e.text&&e.url&&" ",e.url&&Object(c.g)("a",{href:e.url,className:"external",target:"_blank",rel:"noopener noreferrer"},e.url))}))))}},function(e,t,n){var r=n(578),o=n(1095)(r);e.exports=o},function(e,t,n){},function(e,t,n){"use strict";n.d(t,"a",(function(){return Q}));var r=n(20),o=n.n(r),i=n(21),a=n.n(i),c=n(22),s=n.n(c),u=n(23),l=n.n(u),d=n(17),f=n.n(d),p=n(1),h=n.n(p),b=n(137),v=n(138),m=n(139);n(3);function g(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var y=n(42),O=n.n(y),j=!1,w=h.a.createContext(null),C=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var o,i=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?i?(o="exited",r.appearStatus="entering"):o="entered":o=t.unmountOnExit||t.mountOnEnter?"unmounted":"exited",r.state={status:o},r.nextCallback=null,r}Object(m.a)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&"unmounted"===t.status?{status:"exited"}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?"entering"!==n&&"entered"!==n&&(t="entering"):"entering"!==n&&"entered"!==n||(t="exiting")}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!=typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),"entering"===t?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&"exited"===this.state.status&&this.setState({status:"unmounted"})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,o=this.props.nodeRef?[r]:[O.a.findDOMNode(this),r],i=o[0],a=o[1],c=this.getTimeouts(),s=r?c.appear:c.enter;!e&&!n||j?this.safeSetState({status:"entered"},(function(){t.props.onEntered(i)})):(this.props.onEnter(i,a),this.safeSetState({status:"entering"},(function(){t.props.onEntering(i,a),t.onTransitionEnd(s,(function(){t.safeSetState({status:"entered"},(function(){t.props.onEntered(i,a)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:O.a.findDOMNode(this);t&&!j?(this.props.onExit(r),this.safeSetState({status:"exiting"},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:"exited"},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:"exited"},(function(){e.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:O.a.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var o=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],i=o[0],a=o[1];this.props.addEndListener(i,a)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if("unmounted"===e)return null;var t=this.props,n=t.children,r=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,Object(v.default)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return h.a.createElement(w.Provider,{value:null},"function"==typeof n?n(e,r):h.a.cloneElement(h.a.Children.only(n),r))},t}(h.a.Component);function k(){}C.contextType=w,C.propTypes={},C.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:k,onEntering:k,onEntered:k,onExit:k,onExiting:k,onExited:k},C.UNMOUNTED="unmounted",C.EXITED="exited",C.ENTERING="entering",C.ENTERED="entered",C.EXITING="exiting";var S=C,x=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return r=t,void((n=e).classList?n.classList.remove(r):"string"==typeof n.className?n.className=g(n.className,r):n.setAttribute("class",g(n.className&&n.className.baseVal||"",r)));var n,r}))},R=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,n){var r=t.resolveArguments(e,n),o=r[0],i=r[1];t.removeClasses(o,"exit"),t.addClass(o,i?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,n)},t.onEntering=function(e,n){var r=t.resolveArguments(e,n),o=r[0],i=r[1]?"appear":"enter";t.addClass(o,i,"active"),t.props.onEntering&&t.props.onEntering(e,n)},t.onEntered=function(e,n){var r=t.resolveArguments(e,n),o=r[0],i=r[1]?"appear":"enter";t.removeClasses(o,i),t.addClass(o,i,"done"),t.props.onEntered&&t.props.onEntered(e,n)},t.onExit=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"appear"),t.removeClasses(n,"enter"),t.addClass(n,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var n=t.resolveArguments(e)[0];t.addClass(n,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"exit"),t.addClass(n,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,n){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,n]},t.getClassNames=function(e){var n=t.props.classNames,r="string"==typeof n,o=r?""+(r&&n?n+"-":"")+e:n[e];return{baseClassName:o,activeClassName:r?o+"-active":n[e+"Active"],doneClassName:r?o+"-done":n[e+"Done"]}},t}Object(m.a)(t,e);var n=t.prototype;return n.addClass=function(e,t,n){var r=this.getClassNames(t)[n+"ClassName"],o=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===n&&o&&(r+=" "+o),"active"===n&&e&&e.scrollTop,r&&(this.appliedClasses[t][n]=r,function(e,t){e&&t&&t.split(" ").forEach((function(t){return r=t,void((n=e).classList?n.classList.add(r):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(n,r)||("string"==typeof n.className?n.className=n.className+" "+r:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+r)));var n,r}))}(e,r))},n.removeClasses=function(e,t){var n=this.appliedClasses[t],r=n.base,o=n.active,i=n.done;this.appliedClasses[t]={},r&&x(e,r),o&&x(e,o),i&&x(e,i)},n.render=function(){var e=this.props,t=(e.classNames,Object(v.default)(e,["classNames"]));return h.a.createElement(S,Object(b.default)({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(h.a.Component);R.defaultProps={classNames:""},R.propTypes={};var E=R,_=n(67);function A(e,t){var n=Object.create(null);return e&&p.Children.map(e,(function(e){return e})).forEach((function(e){n[e.key]=function(e){return t&&Object(p.isValidElement)(e)?t(e):e}(e)})),n}function T(e,t,n){return null!=n[t]?n[t]:e.props[t]}function N(e,t,n){var r=A(e.children),o=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,o=Object.create(null),i=[];for(var a in e)a in t?i.length&&(o[a]=i,i=[]):i.push(a);var c={};for(var s in t){if(o[s])for(r=0;r<o[s].length;r++){var u=o[s][r];c[o[s][r]]=n(u)}c[s]=n(s)}for(r=0;r<i.length;r++)c[i[r]]=n(i[r]);return c}(t,r);return Object.keys(o).forEach((function(i){var a=o[i];if(Object(p.isValidElement)(a)){var c=i in t,s=i in r,u=t[i],l=Object(p.isValidElement)(u)&&!u.props.in;!s||c&&!l?s||!c||l?s&&c&&Object(p.isValidElement)(u)&&(o[i]=Object(p.cloneElement)(a,{onExited:n.bind(null,a),in:u.props.in,exit:T(a,"exit",e),enter:T(a,"enter",e)})):o[i]=Object(p.cloneElement)(a,{in:!1}):o[i]=Object(p.cloneElement)(a,{onExited:n.bind(null,a),in:!0,exit:T(a,"exit",e),enter:T(a,"enter",e)})}})),o}var I=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},M=function(e){function t(t,n){var r,o=(r=e.call(this,t,n)||this).handleExited.bind(Object(_.a)(r));return r.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},r}Object(m.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var n,r,o=t.children,i=t.handleExited;return{children:t.firstRender?(n=e,r=i,A(n.children,(function(e){return Object(p.cloneElement)(e,{onExited:r.bind(null,e),in:!0,appear:T(e,"appear",n),enter:T(e,"enter",n),exit:T(e,"exit",n)})}))):N(e,o,i),firstRender:!1}},n.handleExited=function(e,t){var n=A(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=Object(b.default)({},t.children);return delete n[e.key],{children:n}})))},n.render=function(){var e=this.props,t=e.component,n=e.childFactory,r=Object(v.default)(e,["component","childFactory"]),o=this.state.contextValue,i=I(this.state.children).map(n);return delete r.appear,delete r.enter,delete r.exit,null===t?h.a.createElement(w.Provider,{value:o},i):h.a.createElement(w.Provider,{value:o},h.a.createElement(t,r,i))},t}(h.a.Component);M.propTypes={},M.defaultProps={component:"div",childFactory:function(e){return e}};var D=M,L=n(33),P=n.n(L),z=n(43),B=n.n(z),F=n(5);function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var o=f()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l()(this,n)}}var q=function(e){s()(n,e);var t=U(n);function n(e){var r;return o()(this,n),r=t.call(this,e),"undefined"!=typeof document&&(r.element=document.createElement("div")),r}return a()(n,[{key:"componentDidMount",value:function(){document.body.appendChild(this.element)}},{key:"componentWillUnmount",value:function(){document.body.removeChild(this.element),delete this.element}},{key:"render",value:function(){if(this.element){var e=this.props,t=e.onRef,n=B()(e,["onRef"]);return Object(y.createPortal)(Object(F.g)("div",P()({ref:t},n)),this.element)}return null}}]),n}(p.Component);function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var o=f()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l()(this,n)}}var H=function(e,t){e.addEventListener("transitionend",t,!1),e.addEventListener("transitioncancel",t,!1)},K=function(e){s()(n,e);var t=V(n);function n(){var e;o()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={shouldMountPortal:!1,hasChildren:!1},e.handleExited=function(){e.setState((function(e){e.hasChildren}))},e}return a()(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.portalClassName,r=t.transitionName,o=t.onAfterEnter,i=t.timeout,a=t.children,c=this.state,s=c.shouldMountPortal,u=c.hasChildren,l={appear:"".concat(r,"-enter"),appearActive:"".concat(r,"-enter-active"),enter:"".concat(r,"-enter"),enterActive:"".concat(r,"-enter-active"),enterDone:"".concat(r,"-enter-done"),exit:"".concat(r,"-leave"),exitActive:"".concat(r,"-leave-active"),exitDone:"".concat(r,"-leave-done")};return s&&Object(F.g)(q,{className:n},Object(F.g)(D,null,u&&p.Children.map(a,(function(t,n){return t&&Object(F.g)(E,{key:n,timeout:i,classNames:l,appear:!0,onExited:e.handleExited,onEntering:o,addEndListener:H},t)}))))}}]),n}(p.Component);K.getDerivedStateFromProps=function(e,t){var n=p.Children.toArray(e.children).some(Boolean),r=t.hasChildren;return!r&&n?{shouldMountPortal:!0,hasChildren:n}:r&&!n?{hasChildren:n}:null};var Q=K},function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var r=n(1),o=n.n(r),i=n(173),a=n(66),c=n(11),s=n.n(c),u=n(30),l=n(3),d=n.n(l),f={image:d.a.oneOf(["default","loadingError","noNetwork","contentError","noWorks","noCollection","noBalance"])},p={buttonText:d.a.oneOfType([d.a.string,d.a.element]).isRequired,buttonOnClick:d.a.func.isRequired},h={className:d.a.string,content:d.a.string.isRequired},b=Object.assign({},h,{},p),v=Object.assign({},h,{title:d.a.string.isRequired}),m=Object.assign({},v,{},p),g=Object.assign({},h,{},f),y=Object.assign({},g,{},p),O=Object.assign({},g,{title:d.a.string.isRequired}),j=Object.assign({},O,{},p),w=n(5),C=o.a.memo((function(e){var t=e.className,r=e.image,o=e.title,c=e.content,l=e.buttonText,d=e.buttonOnClick,f=Object(i.f)().isDarkMode,p=Object(a.d)((function(){return n.e(21).then(n.bind(null,2609))})),h=r&&r.replace(/\b\w/g,(function(e){return e.toUpperCase()}))+(f?"Dark":""),b=p&&p[h],v=r&&b,m=s()("EmptyView-content",{"EmptyView-withTitle":Boolean(o)});return Object(w.g)("div",{className:s()("EmptyView-container",t)},Boolean(v)&&Object(w.g)("div",{className:"EmptyView--placeholder"}),Object(w.g)("div",{className:"EmptyView"},Boolean(v)&&Object(w.g)(v,null),Boolean(o)&&Object(w.g)("div",{className:"EmptyView-title"},o),Object(w.g)("div",{className:m},Boolean(c)&&Object(w.g)("div",null,c)),Boolean(l)&&Object(w.g)(u.c,{className:"EmptyView-button",onClick:d},l)),Boolean(v)&&Object(w.g)("div",{className:"EmptyView--placeholder"}))}));function k(e){var t=function(t){var n={};return Object.keys(t).forEach((function(r){e[r]?n[r]=t[r]:console.warn("".concat(r," is not allowed. check the type"))})),Object(w.g)(C,n)};return t.propTypes=e,t}var S={ET1:k(h),ET1A:k(b),ET2:k(v),ET2A:k(m),EI1:k(g),EI1A:k(y),EI2:k(O),EI2A:k(j)}},function(e,t,n){"use strict";var r=n(20),o=n.n(r),i=n(21),a=n.n(i),c=n(22),s=n.n(c),u=n(23),l=n.n(u),d=n(17),f=n.n(d),p=n(3),h=n.n(p),b=n(1),v=n(42),m=n(781),g=n(11),y=n.n(g),O=n(323),j=n(923),w=n(1003),C=n(1e3),k=n(33),S=n.n(k),x=n(43),R=n.n(x),E=n(5),_=function(e){var t=e.children,n=e.className,r=e.direction,o=R()(e,["children","className","direction"]);return Object(E.g)("div",S()({className:y()("ModalButtonGroup",n,"ModalButtonGroup--".concat(r))},o),t)};_.defaultProps={direction:"vertical"},_.propTypes={children:h.a.node,direction:h.a.oneOf(["vertical","horizontal"])};function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var o=f()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l()(this,n)}}var T,N=[],I=function(e){s()(n,e);var t=A(n);function n(){var e;o()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={transparent:!1},e.handleKeydown=function(t){var n=e.props,r=n.hotKeyClosable,o=n.onClose;t.keyCode===j.a.ESCAPE&&r&&o&&o(t)},e.handleBackdropClick=function(t){var n=e.props,r=n.maskClosable,o=n.onClose;r&&o&&o(t)},e.handleButtonClick=function(t){var n=e.props.onClose;n&&n(t)},e}return a()(n,[{key:"componentDidMount",value:function(){this.props.children&&this.handleShow()}},{key:"componentDidUpdate",value:function(e){var t=e.children,n=this.props.children;!t&&n?this.handleShow():t&&!n&&this.handleHide()}},{key:"componentWillUnmount",value:function(){this.props.children&&this.handleHide()}},{key:"handleShow",value:function(){var e=N[N.length-1];e&&e.setState({transparent:!0}),N.push(this),N.length>0&&(clearTimeout(T),O.hide())}},{key:"handleHide",value:function(){N.pop();var e=N[N.length-1];e&&e.setState({transparent:!1}),N.length<=0&&(T=setTimeout((function(){O.show()}),300))}},{key:"render",value:function(){var e=this.props,t=e.size,n=e.spread,r=e.title,o=e.subtitle,i=e.footer,a=e.closeButton,c=void 0===a?Object(E.g)("div",{className:"ModalWindow-closeButton",onClick:this.handleButtonClick},Object(E.g)(m.a,{className:"ModalWindow-closeIcon"})):a,s=e.buttonGroupOnly,u=e.className,l=e.children,d=e.onScroll,f=e.contentClassName,p=void 0===f?"":f,h=e.backDropClassName,b=void 0===h?"":h,v=this.state.transparent;return Object(E.g)(C.a,{transitionName:"ModalWindow",timeout:300},l&&Object(E.g)(w.a,{onKeyDown:this.handleKeydown},Object(E.g)("div",{className:y()("ModalWindow-wrapper",{"ModalWindow-wrapper--transparent":v})},Object(E.g)("div",{className:y()("ModalWindow-backdrop",b),onClick:this.handleBackdropClick}),Object(E.g)("div",{className:y()("ModalWindow","ModalWindow--".concat(t),u),tabIndex:0},Object(E.g)("div",{className:"ModalWindow-inner",onScroll:d},r&&Object(E.g)("h3",{className:y()("ModalWindow-title",{"ModalWindow-title--simple":!o&&s})},r),o&&Object(E.g)("div",{className:"ModalWindow-subtitle"},o),Object(E.g)("div",{className:y()("ModalWindow-content",{"ModalWindow-content--spread":n||"fullPage"===t&&!r&&!o},p)},l),i&&Object(E.g)("div",{className:"ModalWindow-footer"},i)),c))))}}]),n}(b.Component);I.propTypes={size:h.a.oneOf(["default","large","fullPage","small"]),spread:h.a.bool,title:h.a.node,subtitle:h.a.node,footer:h.a.node,closeButton:h.a.node,buttonGroupOnly:h.a.bool,hotKeyClosable:h.a.bool,maskClosable:h.a.bool,onClose:h.a.func,onScroll:h.a.func,contentClassName:h.a.string},I.defaultProps={size:"default",spread:!1,buttonGroupOnly:!1,hotKeyClosable:!0,maskClosable:!0},I.open=function(e){var t=document.createElement("div");document.body.appendChild(t);var n=!1,r=function(){n||(n=!0,o())};"function"==typeof e&&(e=e(r));var o=function(){Object(v.render)(Object(b.cloneElement)(e,{children:null}),t),setTimeout((function(){Object(v.unmountComponentAtNode)(t),t.parentNode.removeChild(t)}),300)};Object(v.render)(e.props.onClose?e:Object(b.cloneElement)(e,{onClose:r}),t)};t.a=I},function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var r=n(20),o=n.n(r),i=n(21),a=n.n(i),c=n(92),s=n.n(c),u=n(22),l=n.n(u),d=n(23),f=n.n(d),p=n(17),h=n.n(p),b=n(1),v=n.n(b),m=n(42),g=n(408),y=n.n(g);function O(e,t){e&&(e.focus(t),e instanceof HTMLInputElement&&e.select())}function j(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.body,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e},r=n(y()(t)),o=r.length;if(o){var i=r.indexOf(document.activeElement);-1===i?("prev"===e&&O(r[o-1]),"next"===e&&O(r[0])):("prev"===e&&O(r[(i-1+o)%o]),"next"===e&&O(r[(i+1)%o]))}}var w=O,C=n(923);function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var o=h()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f()(this,n)}}var S=[],x=function(e){l()(n,e);var t=k(n);function n(){var e;o()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).handleKeyDown=function(t){if(e.isTopLayer()){var n=e.props.onKeyDown;if(n&&n(t),!t.defaultPrevented&&t.keyCode===C.a.TAB){t.preventDefault();var r=Object(m.findDOMNode)(s()(e));j(t.shiftKey?"prev":"next",r,(function(e){return e.filter((function(e){return"true"===e.contentEditable||!e.closest("[contentEditable]")}))}))}}},e}return a()(n,[{key:"componentDidMount",value:function(){S.push(this),window.addEventListener("keydown",this.handleKeyDown,!0),this.enterFocusZone()}},{key:"componentWillUnmount",value:function(){S.splice(S.indexOf(this),1),window.removeEventListener("keydown",this.handleKeyDown,!0),this.leaveFocusZone()}},{key:"enterFocusZone",value:function(){var e=this;this.prevActiveElement=document.activeElement,this.timeout=window.setTimeout((function(){var t=Object(m.findDOMNode)(e);t&&!t.contains(document.activeElement)&&function(e){j("next",e)}(t)}),100)}},{key:"leaveFocusZone",value:function(){clearTimeout(this.timeout),this.prevActiveElement&&!this.prevActiveElement.closest("[contentEditable]")&&w(this.prevActiveElement)}},{key:"isTopLayer",value:function(){return S[S.length-1]===this}},{key:"render",value:function(){return b.Children.only(this.props.children)}}]),n}(v.a.Component)},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(2),o=n(1),i=n(30),a=n(791),c=n(206),s=function(e){var t=e.className,n=e.onClick,s=e.label,u=e.onRef,l=e.disabled,d=e.showIcon,f=void 0===d||d;return Object(r.c)(o.Fragment,{children:[Object(r.b)(c.c,{keyMap:{BOOKMARK:"s c"},handlers:{BOOKMARK:n}}),Object(r.b)(i.c,{onRef:u,className:t,preset:"plain",onClick:n,icon:f?a.a:null,label:s,disabled:l})]})};s.defaultProps={label:"收藏"};var u=s},function(e,t,n){"use strict";var r=n(20),o=n.n(r),i=n(21),a=n.n(i),c=n(22),s=n.n(c),u=n(23),l=n.n(u),d=n(17),f=n.n(d),p=n(33),h=n.n(p),b=n(3),v=n.n(b),m=n(1),g=n(853),y=n(5);function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var o=f()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l()(this,n)}}var j=function(e){s()(n,e);var t=O(n);function n(){return o()(this,n),t.apply(this,arguments)}return a()(n,[{key:"renderThumbnail",value:function(){var e=this.props.error;return Object(y.g)("div",{className:"VideoErrorCard-thumbnail"},Object(y.g)("div",{className:"VideoErrorCard-error"},e.message||"错误"))}},{key:"render",value:function(){var e=this.props,t=e.isLens,n=e.id;return Object(y.g)("div",{className:"VideoErrorCard"},Object(y.g)(g.b,h()({},this.props,t&&{playerUrl:"https://www.zhihu.com/video/".concat(n)},{thumbnail:this.renderThumbnail(),showPlayButton:!1,onBeforePlay:function(){return!1}})))}}]),n}(m.Component);j.propTypes={error:v.a.object.isRequired};t.a=j},,function(e,t,n){"use strict";
/** @license React v16.14.0
 * react-dom-server.browser.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(91),o=n(1);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a="function"==typeof Symbol&&Symbol.for,c=a?Symbol.for("react.portal"):60106,s=a?Symbol.for("react.fragment"):60107,u=a?Symbol.for("react.strict_mode"):60108,l=a?Symbol.for("react.profiler"):60114,d=a?Symbol.for("react.provider"):60109,f=a?Symbol.for("react.context"):60110,p=a?Symbol.for("react.concurrent_mode"):60111,h=a?Symbol.for("react.forward_ref"):60112,b=a?Symbol.for("react.suspense"):60113,v=a?Symbol.for("react.suspense_list"):60120,m=a?Symbol.for("react.memo"):60115,g=a?Symbol.for("react.lazy"):60116,y=a?Symbol.for("react.block"):60121,O=a?Symbol.for("react.fundamental"):60117,j=a?Symbol.for("react.scope"):60119;function w(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case s:return"Fragment";case c:return"Portal";case l:return"Profiler";case u:return"StrictMode";case b:return"Suspense";case v:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case f:return"Context.Consumer";case d:return"Context.Provider";case h:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case m:return w(e.type);case y:return w(e.render);case g:if(e=1===e._status?e._result:null)return w(e)}return null}var C=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;C.hasOwnProperty("ReactCurrentDispatcher")||(C.ReactCurrentDispatcher={current:null}),C.hasOwnProperty("ReactCurrentBatchConfig")||(C.ReactCurrentBatchConfig={suspense:null});var k={};function S(e,t){for(var n=0|e._threadCount;n<=t;n++)e[n]=e._currentValue2,e._threadCount=n+1}for(var x=new Uint16Array(16),R=0;15>R;R++)x[R]=R+1;x[15]=0;var E=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_=Object.prototype.hasOwnProperty,A={},T={};function N(e){return!!_.call(T,e)||!_.call(A,e)&&(E.test(e)?T[e]=!0:(A[e]=!0,!1))}function I(e,t,n,r,o,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i}var M={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){M[e]=new I(e,0,!1,e,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];M[t]=new I(t,1,!1,e[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){M[e]=new I(e,2,!1,e.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){M[e]=new I(e,2,!1,e,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){M[e]=new I(e,3,!1,e.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(e){M[e]=new I(e,3,!0,e,null,!1)})),["capture","download"].forEach((function(e){M[e]=new I(e,4,!1,e,null,!1)})),["cols","rows","size","span"].forEach((function(e){M[e]=new I(e,6,!1,e,null,!1)})),["rowSpan","start"].forEach((function(e){M[e]=new I(e,5,!1,e.toLowerCase(),null,!1)}));var D=/[\-:]([a-z])/g;function L(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(D,L);M[t]=new I(t,1,!1,e,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(D,L);M[t]=new I(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(D,L);M[t]=new I(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(e){M[e]=new I(e,1,!1,e.toLowerCase(),null,!1)})),M.xlinkHref=new I("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(e){M[e]=new I(e,1,!1,e.toLowerCase(),null,!0)}));var P=/["'&<>]/;function z(e){if("boolean"==typeof e||"number"==typeof e)return""+e;e=""+e;var t=P.exec(e);if(t){var n,r="",o=0;for(n=t.index;n<e.length;n++){switch(e.charCodeAt(n)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}o!==n&&(r+=e.substring(o,n)),o=n+1,r+=t}e=o!==n?r+e.substring(o,n):r}return e}function B(e,t){var n,r=M.hasOwnProperty(e)?M[e]:null;return(n="style"!==e)&&(n=null!==r?0===r.type:2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1])),n||function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(e,t,r,!1)?"":null!==r?(e=r.attributeName,3===(n=r.type)||4===n&&!0===t?e+'=""':(r.sanitizeURL&&(t=""+t),e+'="'+z(t)+'"')):N(e)?e+'="'+z(t)+'"':""}var F="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},U=null,q=null,V=null,H=!1,K=!1,Q=null,W=0;function G(){if(null===U)throw Error(i(321));return U}function Z(){if(0<W)throw Error(i(312));return{memoizedState:null,queue:null,next:null}}function Y(){return null===V?null===q?(H=!1,q=V=Z()):(H=!0,V=q):null===V.next?(H=!1,V=V.next=Z()):(H=!0,V=V.next),V}function J(e,t,n,r){for(;K;)K=!1,W+=1,V=null,n=e(t,r);return q=U=null,W=0,V=Q=null,n}function $(e,t){return"function"==typeof t?t(e):t}function X(e,t,n){if(U=G(),V=Y(),H){var r=V.queue;if(t=r.dispatch,null!==Q&&void 0!==(n=Q.get(r))){Q.delete(r),r=V.memoizedState;do{r=e(r,n.action),n=n.next}while(null!==n);return V.memoizedState=r,[r,t]}return[V.memoizedState,t]}return e=e===$?"function"==typeof t?t():t:void 0!==n?n(t):t,V.memoizedState=e,e=(e=V.queue={last:null,dispatch:null}).dispatch=ee.bind(null,U,e),[V.memoizedState,e]}function ee(e,t,n){if(!(25>W))throw Error(i(301));if(e===U)if(K=!0,e={action:n,next:null},null===Q&&(Q=new Map),void 0===(n=Q.get(t)))Q.set(t,e);else{for(t=n;null!==t.next;)t=t.next;t.next=e}}function te(){}var ne=0,re={readContext:function(e){var t=ne;return S(e,t),e[t]},useContext:function(e){G();var t=ne;return S(e,t),e[t]},useMemo:function(e,t){if(U=G(),t=void 0===t?null:t,null!==(V=Y())){var n=V.memoizedState;if(null!==n&&null!==t){e:{var r=n[1];if(null===r)r=!1;else{for(var o=0;o<r.length&&o<t.length;o++)if(!F(t[o],r[o])){r=!1;break e}r=!0}}if(r)return n[0]}}return e=e(),V.memoizedState=[e,t],e},useReducer:X,useRef:function(e){U=G();var t=(V=Y()).memoizedState;return null===t?(e={current:e},V.memoizedState=e):t},useState:function(e){return X($,e)},useLayoutEffect:function(){},useCallback:function(e){return e},useImperativeHandle:te,useEffect:te,useDebugValue:te,useResponder:function(e,t){return{props:t,responder:e}},useDeferredValue:function(e){return G(),e},useTransition:function(){return G(),[function(e){e()},!1]}},oe="http://www.w3.org/1999/xhtml";function ie(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}var ae={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},ce=r({menuitem:!0},ae),se={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ue=["Webkit","ms","Moz","O"];Object.keys(se).forEach((function(e){ue.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),se[t]=se[e]}))}));var le=/([A-Z])/g,de=/^ms-/,fe=o.Children.toArray,pe=C.ReactCurrentDispatcher,he={listing:!0,pre:!0,textarea:!0},be=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,ve={},me={};var ge=Object.prototype.hasOwnProperty,ye={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null,suppressHydrationWarning:null};function Oe(e,t){if(void 0===e)throw Error(i(152,w(t)||"Component"))}function je(e,t,n){function a(o,a){var c=a.prototype&&a.prototype.isReactComponent,s=function(e,t,n,r){if(r&&("object"==typeof(r=e.contextType)&&null!==r))return S(r,n),r[n];if(e=e.contextTypes){for(var o in n={},e)n[o]=t[o];t=n}else t=k;return t}(a,t,n,c),u=[],l=!1,d={isMounted:function(){return!1},enqueueForceUpdate:function(){if(null===u)return null},enqueueReplaceState:function(e,t){l=!0,u=[t]},enqueueSetState:function(e,t){if(null===u)return null;u.push(t)}};if(c){if(c=new a(o.props,s,d),"function"==typeof a.getDerivedStateFromProps){var f=a.getDerivedStateFromProps.call(null,o.props,c.state);null!=f&&(c.state=r({},c.state,f))}}else if(U={},c=a(o.props,s,d),null==(c=J(a,o.props,c,s))||null==c.render)return void Oe(e=c,a);if(c.props=o.props,c.context=s,c.updater=d,void 0===(d=c.state)&&(c.state=d=null),"function"==typeof c.UNSAFE_componentWillMount||"function"==typeof c.componentWillMount)if("function"==typeof c.componentWillMount&&"function"!=typeof a.getDerivedStateFromProps&&c.componentWillMount(),"function"==typeof c.UNSAFE_componentWillMount&&"function"!=typeof a.getDerivedStateFromProps&&c.UNSAFE_componentWillMount(),u.length){d=u;var p=l;if(u=null,l=!1,p&&1===d.length)c.state=d[0];else{f=p?d[0]:c.state;var h=!0;for(p=p?1:0;p<d.length;p++){var b=d[p];null!=(b="function"==typeof b?b.call(c,f,o.props,s):b)&&(h?(h=!1,f=r({},f,b)):r(f,b))}c.state=f}}else u=null;if(Oe(e=c.render(),a),"function"==typeof c.getChildContext&&"object"==typeof(o=a.childContextTypes)){var v=c.getChildContext();for(var m in v)if(!(m in o))throw Error(i(108,w(a)||"Unknown",m))}v&&(t=r({},t,v))}for(;o.isValidElement(e);){var c=e,s=c.type;if("function"!=typeof s)break;a(c,s)}return{child:e,context:t}}var we=function(){function e(e,t){o.isValidElement(e)?e.type!==s?e=[e]:(e=e.props.children,e=o.isValidElement(e)?[e]:fe(e)):e=fe(e),e={type:null,domNamespace:oe,children:e,childIndex:0,context:k,footer:""};var n=x[0];if(0===n){var r=x,a=2*(n=r.length);if(!(65536>=a))throw Error(i(304));var c=new Uint16Array(a);for(c.set(r),(x=c)[0]=n+1,r=n;r<a-1;r++)x[r]=r+1;x[a-1]=0}else x[0]=x[n];this.threadID=n,this.stack=[e],this.exhausted=!1,this.currentSelectValue=null,this.previousWasTextNode=!1,this.makeStaticMarkup=t,this.suspenseDepth=0,this.contextIndex=-1,this.contextStack=[],this.contextValueStack=[]}var t=e.prototype;return t.destroy=function(){if(!this.exhausted){this.exhausted=!0,this.clearProviders();var e=this.threadID;x[e]=x[0],x[0]=e}},t.pushProvider=function(e){var t=++this.contextIndex,n=e.type._context,r=this.threadID;S(n,r);var o=n[r];this.contextStack[t]=n,this.contextValueStack[t]=o,n[r]=e.props.value},t.popProvider=function(){var e=this.contextIndex,t=this.contextStack[e],n=this.contextValueStack[e];this.contextStack[e]=null,this.contextValueStack[e]=null,this.contextIndex--,t[this.threadID]=n},t.clearProviders=function(){for(var e=this.contextIndex;0<=e;e--)this.contextStack[e][this.threadID]=this.contextValueStack[e]},t.read=function(e){if(this.exhausted)return null;var t=ne;ne=this.threadID;var n=pe.current;pe.current=re;try{for(var r=[""],o=!1;r[0].length<e;){if(0===this.stack.length){this.exhausted=!0;var a=this.threadID;x[a]=x[0],x[0]=a;break}var c=this.stack[this.stack.length-1];if(o||c.childIndex>=c.children.length){var s=c.footer;if(""!==s&&(this.previousWasTextNode=!1),this.stack.pop(),"select"===c.type)this.currentSelectValue=null;else if(null!=c.type&&null!=c.type.type&&c.type.type.$$typeof===d)this.popProvider(c.type);else if(c.type===b){this.suspenseDepth--;var u=r.pop();if(o){o=!1;var l=c.fallbackFrame;if(!l)throw Error(i(303));this.stack.push(l),r[this.suspenseDepth]+="\x3c!--$!--\x3e";continue}r[this.suspenseDepth]+=u}r[this.suspenseDepth]+=s}else{var f=c.children[c.childIndex++],p="";try{p+=this.render(f,c.context,c.domNamespace)}catch(e){if(null!=e&&"function"==typeof e.then)throw Error(i(294));throw e}r.length<=this.suspenseDepth&&r.push(""),r[this.suspenseDepth]+=p}}return r[0]}finally{pe.current=n,ne=t}},t.render=function(e,t,n){if("string"==typeof e||"number"==typeof e)return""===(n=""+e)?"":this.makeStaticMarkup?z(n):this.previousWasTextNode?"\x3c!-- --\x3e"+z(n):(this.previousWasTextNode=!0,z(n));if(e=(t=je(e,t,this.threadID)).child,t=t.context,null===e||!1===e)return"";if(!o.isValidElement(e)){if(null!=e&&null!=e.$$typeof){if((n=e.$$typeof)===c)throw Error(i(257));throw Error(i(258,n.toString()))}return e=fe(e),this.stack.push({type:null,domNamespace:n,children:e,childIndex:0,context:t,footer:""}),""}var a=e.type;if("string"==typeof a)return this.renderDOM(e,t,n);switch(a){case u:case p:case l:case v:case s:return e=fe(e.props.children),this.stack.push({type:null,domNamespace:n,children:e,childIndex:0,context:t,footer:""}),"";case b:throw Error(i(294))}if("object"==typeof a&&null!==a)switch(a.$$typeof){case h:U={};var y=a.render(e.props,e.ref);return y=J(a.render,e.props,y,e.ref),y=fe(y),this.stack.push({type:null,domNamespace:n,children:y,childIndex:0,context:t,footer:""}),"";case m:return e=[o.createElement(a.type,r({ref:e.ref},e.props))],this.stack.push({type:null,domNamespace:n,children:e,childIndex:0,context:t,footer:""}),"";case d:return n={type:e,domNamespace:n,children:a=fe(e.props.children),childIndex:0,context:t,footer:""},this.pushProvider(e),this.stack.push(n),"";case f:a=e.type,y=e.props;var w=this.threadID;return S(a,w),a=fe(y.children(a[w])),this.stack.push({type:e,domNamespace:n,children:a,childIndex:0,context:t,footer:""}),"";case O:throw Error(i(338));case g:switch(function(e){if(-1===e._status){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}}(a=e.type),a._status){case 1:return e=[o.createElement(a._result,r({ref:e.ref},e.props))],this.stack.push({type:null,domNamespace:n,children:e,childIndex:0,context:t,footer:""}),"";case 2:throw a._result;default:throw Error(i(295))}case j:throw Error(i(343))}throw Error(i(130,null==a?a:typeof a,""))},t.renderDOM=function(e,t,n){var a=e.type.toLowerCase();if(n===oe&&ie(a),!ve.hasOwnProperty(a)){if(!be.test(a))throw Error(i(65,a));ve[a]=!0}var c=e.props;if("input"===a)c=r({type:void 0},c,{defaultChecked:void 0,defaultValue:void 0,value:null!=c.value?c.value:c.defaultValue,checked:null!=c.checked?c.checked:c.defaultChecked});else if("textarea"===a){var s=c.value;if(null==s){s=c.defaultValue;var u=c.children;if(null!=u){if(null!=s)throw Error(i(92));if(Array.isArray(u)){if(!(1>=u.length))throw Error(i(93));u=u[0]}s=""+u}null==s&&(s="")}c=r({},c,{value:void 0,children:""+s})}else if("select"===a)this.currentSelectValue=null!=c.value?c.value:c.defaultValue,c=r({},c,{value:void 0});else if("option"===a){u=this.currentSelectValue;var l=function(e){if(null==e)return e;var t="";return o.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(c.children);if(null!=u){var d=null!=c.value?c.value+"":l;if(s=!1,Array.isArray(u)){for(var f=0;f<u.length;f++)if(""+u[f]===d){s=!0;break}}else s=""+u===d;c=r({selected:void 0,children:void 0},c,{selected:s,children:l})}}if(s=c){if(ce[a]&&(null!=s.children||null!=s.dangerouslySetInnerHTML))throw Error(i(137,a,""));if(null!=s.dangerouslySetInnerHTML){if(null!=s.children)throw Error(i(60));if("object"!=typeof s.dangerouslySetInnerHTML||!("__html"in s.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=s.style&&"object"!=typeof s.style)throw Error(i(62,""))}for(O in s=c,u=this.makeStaticMarkup,l=1===this.stack.length,d="<"+e.type,s)if(ge.call(s,O)){var p=s[O];if(null!=p){if("style"===O){f=void 0;var h="",b="";for(f in p)if(p.hasOwnProperty(f)){var v=0===f.indexOf("--"),m=p[f];if(null!=m){if(v)var g=f;else if(g=f,me.hasOwnProperty(g))g=me[g];else{var y=g.replace(le,"-$1").toLowerCase().replace(de,"-ms-");g=me[g]=y}h+=b+g+":",b=f,h+=v=null==m||"boolean"==typeof m||""===m?"":v||"number"!=typeof m||0===m||se.hasOwnProperty(b)&&se[b]?(""+m).trim():m+"px",b=";"}}p=h||null}f=null;e:if(v=a,m=s,-1===v.indexOf("-"))v="string"==typeof m.is;else switch(v){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":v=!1;break e;default:v=!0}v?ye.hasOwnProperty(O)||(f=N(f=O)&&null!=p?f+'="'+z(p)+'"':""):f=B(O,p),f&&(d+=" "+f)}}u||l&&(d+=' data-reactroot=""');var O=d;s="",ae.hasOwnProperty(a)?O+="/>":(O+=">",s="</"+e.type+">");e:{if(null!=(u=c.dangerouslySetInnerHTML)){if(null!=u.__html){u=u.__html;break e}}else if("string"==typeof(u=c.children)||"number"==typeof u){u=z(u);break e}u=null}return null!=u?(c=[],he.hasOwnProperty(a)&&"\n"===u.charAt(0)&&(O+="\n"),O+=u):c=fe(c.children),e=e.type,n=null==n||"http://www.w3.org/1999/xhtml"===n?ie(e):"http://www.w3.org/2000/svg"===n&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":n,this.stack.push({domNamespace:n,type:a,children:c,childIndex:0,context:t,footer:s}),this.previousWasTextNode=!1,O},e}(),Ce={renderToString:function(e){e=new we(e,!1);try{return e.read(1/0)}finally{e.destroy()}},renderToStaticMarkup:function(e){e=new we(e,!0);try{return e.read(1/0)}finally{e.destroy()}},renderToNodeStream:function(){throw Error(i(207))},renderToStaticNodeStream:function(){throw Error(i(208))},version:"16.14.0"};e.exports=Ce.default||Ce},function(e,t,n){"use strict";
/** @license React v16.13.1
 * create-subscription.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(1);t.createSubscription=function(e){var t=e.getCurrentValue,n=e.subscribe;return function(e){function r(){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];return(n=e.call.apply(e,[this].concat(r))||this).state={source:n.props.source,value:null!=n.props.source?t(n.props.source):void 0},n._hasUnmounted=!1,n._unsubscribe=null,n}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(r,e),r.getDerivedStateFromProps=function(e,n){return e.source!==n.source?{source:e.source,value:null!=e.source?t(e.source):void 0}:null};var o=r.prototype;return o.componentDidMount=function(){this.subscribe()},o.componentDidUpdate=function(e,t){this.state.source!==t.source&&(this.unsubscribe(),this.subscribe())},o.componentWillUnmount=function(){this.unsubscribe(),this._hasUnmounted=!0},o.render=function(){return this.props.children(this.state.value)},o.subscribe=function(){var e=this,r=this.state.source;if(null!=r){var o=n(r,(function(t){e._hasUnmounted||e.setState((function(e){return t===e.value||r!==e.source?null:{value:t}}))}));if("function"!=typeof o)throw Error(function(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}(266));this._unsubscribe=o,(o=t(this.props.source))!==this.state.value&&this.setState({value:o})}},o.unsubscribe=function(){"function"==typeof this._unsubscribe&&this._unsubscribe(),this._unsubscribe=null},r}(r.Component)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(174),o=n(579),i=n(58);function a(e,t){Object(i.a)(2,arguments);var n=Object(r.a)(t);return Object(o.a)(e,-n)}},function(e,t,n){e.exports=n(371),e.exports.CJKSpace=n(1264).CJKSpace},,function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a}));var r=n(40),o=n(924),i=function(e,t){switch(e){case"answer":return"https://www.zhihu.com/answer/".concat(t);case"book":return"https//www.zhihu.com/pub/book/".concat(t);case"article":return"https://zhuanlan.zhihu.com/p/".concat(t);case"live":return"https://www.zhihu.com/lives/".concat(t);case"remix_album":case"remix":return"https://www.zhihu.com/remix/albums/".concat(t);case"pin":return"https://www.zhihu.com/pin/".concat(t);case"question":return"https://www.zhihu.com/question/".concat(t);case"zvideo":return"https://www.zhihu.com/zvideo/".concat(t);default:return""}},a=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];try{if(!e||"string"!=typeof e)return"";if(!t||"object"!=typeof t)return e;var i=e.split("#"),a=Object(r.a)(i,2),c=a[0],s=a[1],u=void 0===s?"":s,l=c.split("?"),d=Object(r.a)(l,2),f=d[0],p=d[1],h=Object(o.parse)(p),b=n?Object.assign({},h,t):Object.assign({},t,h),v=function(e,t){return t?e+t:""};return f+v("?",Object(o.stringify)(b))+v("#",u)}catch(t){return console.error(t),e}}},function(e,t,n){"use strict";n.d(t,"useSpring",(function(){return Qe})),n.d(t,"useTransition",(function(){return Ge}));var r=n(92),o=n.n(r),i=n(77),a=n.n(i),c=n(110),s=n.n(c),u=n(57),l=n.n(u),d=n(33),f=n.n(d),p=n(974),h=n.n(p),b=n(21),v=n.n(b),m=n(22),g=n.n(m),y=n(23),O=n.n(y),j=n(17),w=n.n(j),C=n(422),k=n.n(C),S=n(38),x=n.n(S),R=n(572),E=n.n(R),_=n(20),A=n.n(_),T=n(895);n.d(t,"Globals",(function(){return T.b}));var N=n(1),I=n(1105);n(1106),n(1107);function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var o=w()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return O()(this,n)}}function D(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function P(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return T.s.fun(e)?e.apply(void 0,n):e}var z=function(e,t){return!0===e||!!(t&&e&&(T.s.fun(e)?e(t):Object(T.y)(e).includes(t)))},B=function(e,t){return T.s.obj(e)?t&&e[t]:e},F=function(e,t){return!0===e.default?e[t]:e.default?e.default[t]:void 0},U=function(e){return e},q=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:U,n=V;e.default&&!0!==e.default&&(e=e.default,n=Object.keys(e));var r,o={},i=D(n);try{for(i.s();!(r=i.n()).done;){var a=r.value,c=t(e[a],a);T.s.und(c)||(o[a]=c)}}catch(e){i.e(e)}finally{i.f()}return o},V=["config","onProps","onStart","onChange","onPause","onResume","onRest"],H={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function K(e){var t=function(e){var t={},n=0;if(Object(T.l)(e,(function(e,r){H[r]||(t[r]=e,n++)})),n)return t}(e);if(t){var n={to:t};return Object(T.l)(e,(function(e,r){return r in t||(n[r]=e)})),n}return Object.assign({},e)}function Q(e){return e=Object(T.q)(e),T.s.arr(e)?e.map(Q):Object(T.t)(e)?T.b.createStringInterpolator({range:[0,1],output:[e,e]})(1):e}function W(e){for(var t in e)return!0;return!1}function G(e){return T.s.fun(e)||T.s.arr(e)&&T.s.obj(e[0])}function Z(e,t){var n;null==(n=e.ref)||n.delete(e),null==t||t.delete(e)}function Y(e,t){var n;t&&e.ref!==t&&(null==(n=e.ref)||n.delete(e),t.add(e),e.ref=t)}var J=Object.assign({},{tension:170,friction:26},{mass:1,damping:1,easing:function(e){return e},clamp:!1}),$=function e(){A()(this,e),this.velocity=0,Object.assign(this,J)};function X(e,t){if(T.s.und(t.decay)){var n=!T.s.und(t.tension)||!T.s.und(t.friction);!n&&T.s.und(t.frequency)&&T.s.und(t.damping)&&T.s.und(t.mass)||(e.duration=void 0,e.decay=void 0),n&&(e.frequency=void 0)}else e.duration=void 0}var ee=[],te=function e(){A()(this,e),this.changed=!1,this.values=ee,this.toValues=null,this.fromValues=ee,this.config=new $,this.immediate=!1};function ne(e,t){var n=t.key,r=t.props,o=t.defaultProps,i=t.state,a=t.actions;return new Promise((function(t,c){var s,u,l,d=z(null!=(s=r.cancel)?s:null==o?void 0:o.cancel,n);if(d)b();else{T.s.und(r.pause)||(i.paused=z(r.pause,n));var f=null==o?void 0:o.pause;!0!==f&&(f=i.paused||z(f,n)),u=P(r.delay||0,n),f?(i.resumeQueue.add(h),a.pause()):(a.resume(),h())}function p(){i.resumeQueue.add(h),i.timeouts.delete(l),l.cancel(),u=l.time-T.w.now()}function h(){u>0?(l=T.w.setTimeout(b,u),i.pauseQueue.add(p),i.timeouts.add(l)):b()}function b(){i.pauseQueue.delete(p),i.timeouts.delete(l),e<=(i.cancelId||0)&&(d=!0);try{a.start(Object.assign({},r,{callId:e,cancel:d}),t)}catch(e){c(e)}}}))}var re=function(e,t){return 1==t.length?t[0]:t.some((function(e){return e.cancelled}))?ae(e.get()):t.every((function(e){return e.noop}))?oe(e.get()):ie(e.get(),t.every((function(e){return e.finished})))},oe=function(e){return{value:e,noop:!0,finished:!0,cancelled:!1}},ie=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{value:e,finished:t,cancelled:n}},ae=function(e){return{value:e,cancelled:!0,finished:!1}};function ce(e,t,n,r){var o=t.callId,i=t.parentId,a=t.onRest,c=n.asyncTo,s=n.promise;return i||e!==c||t.reset?n.promise=E()(x.a.mark((function u(){var l,d,f,p,h,b,v,m;return x.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:if(n.asyncId=o,n.asyncTo=e,l=q(t,(function(e,t){return"onRest"===t?void 0:e})),p=new Promise((function(e,t){return d=e,f=t})),h=function(e){var t=o<=(n.cancelId||0)&&ae(r)||o!==n.asyncId&&ie(r,!1);if(t)throw e.result=t,f(e),e},b=function(e,t){var i=new ue,a=new le;return E()(x.a.mark((function c(){var s,u;return x.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(!T.b.skipAnimation){c.next=5;break}throw se(n),a.result=ie(r,!1),f(a),a;case 5:return h(i),(s=T.s.obj(e)?Object.assign({},e):Object.assign({},t,{to:e})).parentId=o,Object(T.l)(l,(function(e,t){T.s.und(s[t])&&(s[t]=e)})),c.next=11,r.start(s);case 11:if(u=c.sent,h(i),!n.paused){c.next=16;break}return c.next=16,new Promise((function(e){n.resumeQueue.add(e)}));case 16:return c.abrupt("return",u);case 17:case"end":return c.stop()}}),c)})))()},!T.b.skipAnimation){u.next=9;break}return se(n),u.abrupt("return",ie(r,!1));case 9:return u.prev=9,m=T.s.arr(e)?function(){var e=E()(x.a.mark((function e(t){var n,r,o;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=D(t),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return o=r.value,e.next=7,b(o);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})));return function(t){return e.apply(this,arguments)}}()(e):Promise.resolve(e(b,r.stop.bind(r))),u.next=13,Promise.all([m.then(d),p]);case 13:v=ie(r.get(),!0,!1),u.next=27;break;case 16:if(u.prev=16,u.t0=u.catch(9),!(u.t0 instanceof ue)){u.next=22;break}v=u.t0.result,u.next=27;break;case 22:if(!(u.t0 instanceof le)){u.next=26;break}v=u.t0.result,u.next=27;break;case 26:throw u.t0;case 27:return u.prev=27,o==n.asyncId&&(n.asyncId=i,n.asyncTo=i?c:void 0,n.promise=i?s:void 0),u.finish(27);case 30:return T.s.fun(a)&&T.w.batchedUpdates((function(){a(v,r,r.item)})),u.abrupt("return",v);case 32:case"end":return u.stop()}}),u,null,[[9,16,27,30]])})))():s}function se(e,t){Object(T.m)(e.timeouts,(function(e){return e.cancel()})),e.pauseQueue.clear(),e.resumeQueue.clear(),e.asyncId=e.asyncTo=e.promise=void 0,t&&(e.cancelId=t)}var ue=function(e){g()(n,e);var t=M(n);function n(){return A()(this,n),t.call(this,"An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}return n}(k()(Error)),le=function(e){g()(n,e);var t=M(n);function n(){return A()(this,n),t.call(this,"SkipAnimationSignal")}return n}(k()(Error)),de=function(e){return e instanceof pe},fe=1,pe=function(e){g()(n,e);var t=M(n);function n(){var e;return A()(this,n),(e=t.apply(this,arguments)).id=fe++,e._priority=0,e}return v()(n,[{key:"get",value:function(){var e=Object(I.e)(this);return e&&e.getValue()}},{key:"to",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return T.b.to(this,t)}},{key:"interpolate",value:function(){Object(T.j)();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return T.b.to(this,t)}},{key:"toJSON",value:function(){return this.get()}},{key:"observerAdded",value:function(e){1==e&&this._attach()}},{key:"observerRemoved",value:function(e){0==e&&this._detach()}},{key:"_attach",value:function(){}},{key:"_detach",value:function(){}},{key:"_onChange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(T.d)(this,{type:"change",parent:this,value:e,idle:t})}},{key:"_onPriorityChange",value:function(e){this.idle||T.o.sort(this),Object(T.d)(this,{type:"priority",parent:this,priority:e})}},{key:"priority",get:function(){return this._priority},set:function(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}}]),n}(T.a),he=Symbol.for("SpringPhase"),be=function(e){return(1&e[he])>0},ve=function(e){return(2&e[he])>0},me=function(e){return(4&e[he])>0},ge=function(e,t){return t?e[he]|=3:e[he]&=-3},ye=function(e,t){return t?e[he]|=4:e[he]&=-5},Oe=function(e){g()(n,e);var t=M(n);function n(e,r){var o;if(A()(this,n),(o=t.call(this)).animation=new te,o.defaultProps={},o._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},o._pendingCalls=new Set,o._lastCallId=0,o._lastToId=0,o._memoizedDuration=0,!T.s.und(e)||!T.s.und(r)){var i=T.s.obj(e)?Object.assign({},e):Object.assign({},r,{from:e});T.s.und(i.default)&&(i.default=!0),o.start(i)}return o}return v()(n,[{key:"advance",value:function(e){var t=this,n=!0,r=!1,o=this.animation,i=o.config,a=o.toValues,c=Object(I.g)(o.to);!c&&Object(T.r)(o.to)&&(a=Object(T.y)(Object(T.q)(o.to))),o.values.forEach((function(s,u){if(!s.done){var l=s.constructor==I.b?1:c?c[u].lastPosition:a[u],d=o.immediate,f=l;if(!d){if(f=s.lastPosition,i.tension<=0)return void(s.done=!0);var p,h=s.elapsedTime+=e,b=o.fromValues[u],v=null!=s.v0?s.v0:s.v0=T.s.arr(i.velocity)?i.velocity[u]:i.velocity;if(T.s.und(i.duration))if(i.decay){var m=!0===i.decay?.998:i.decay,g=Math.exp(-(1-m)*h);f=b+v/(1-m)*(1-g),d=Math.abs(s.lastPosition-f)<.1,p=v*g}else{p=null==s.lastVelocity?v:s.lastVelocity;for(var y=i.precision||(b==l?.005:Math.min(1,.001*Math.abs(l-b))),O=i.restVelocity||y/10,j=i.clamp?0:i.bounce,w=!T.s.und(j),C=b==l?s.v0>0:b<l,k=Math.ceil(e/1),S=0;S<k&&(Math.abs(p)>O||!(d=Math.abs(l-f)<=y));++S){w&&(f==l||f>l==C)&&(p=-p*j,f=l),f+=1*(p+=1*((1e-6*-i.tension*(f-l)+.001*-i.friction*p)/i.mass))}}else{var x=1;i.duration>0&&(t._memoizedDuration!==i.duration&&(t._memoizedDuration=i.duration,s.durationProgress>0&&(s.elapsedTime=i.duration*s.durationProgress,h=s.elapsedTime+=e)),x=(x=(i.progress||0)+h/t._memoizedDuration)>1?1:x<0?0:x,s.durationProgress=x),p=((f=b+i.easing(x)*(l-b))-s.lastPosition)/e,d=1==x}s.lastVelocity=p,Number.isNaN(f)&&(console.warn("Got NaN while animating:",t),d=!0)}c&&!c[u].done&&(d=!1),d?s.done=!0:n=!1,s.setValue(f,i.round)&&(r=!0)}}));var s=Object(I.e)(this);if(n){var u=Object(T.q)(o.to);(s.setValue(u)||r)&&this._onChange(u),this._stop()}else r&&this._onChange(s.getValue())}},{key:"set",value:function(e){var t=this;return T.w.batchedUpdates((function(){t._stop(),t._focus(e),t._set(e)})),this}},{key:"pause",value:function(){this._update({pause:!0})}},{key:"resume",value:function(){this._update({pause:!1})}},{key:"finish",value:function(){var e=this;if(ve(this)){var t=this.animation,n=t.to,r=t.config;T.w.batchedUpdates((function(){e._onStart(),r.decay||e._set(n,!1),e._stop()}))}return this}},{key:"update",value:function(e){return(this.queue||(this.queue=[])).push(e),this}},{key:"start",value:function(e,t){var n,r=this;return T.s.und(e)?(n=this.queue||[],this.queue=[]):n=[T.s.obj(e)?e:Object.assign({},t,{to:e})],Promise.all(n.map((function(e){return r._update(e)}))).then((function(e){return re(r,e)}))}},{key:"stop",value:function(e){var t=this,n=this.animation.to;return this._focus(this.get()),se(this._state,e&&this._lastCallId),T.w.batchedUpdates((function(){return t._stop(n,e)})),this}},{key:"reset",value:function(){this._update({reset:!0})}},{key:"eventObserved",value:function(e){"change"==e.type?this._start():"priority"==e.type&&(this.priority=e.priority+1)}},{key:"_prepareNode",value:function(e){var t=this.key||"",n=e.to,r=e.from;(null==(n=T.s.obj(n)?n[t]:n)||G(n))&&(n=void 0),null==(r=T.s.obj(r)?r[t]:r)&&(r=void 0);var o={to:n,from:r};if(!be(this)){if(e.reverse){var i=[r,n];n=i[0],r=i[1]}r=Object(T.q)(r),T.s.und(r)?Object(I.e)(this)||this._set(n):this._set(r)}return o}},{key:"_update",value:function(e,t){var n=this,r=f()({},e),o=this.key,i=this.defaultProps;r.default&&Object.assign(i,q(r,(function(e,t){return/^on/.test(t)?B(e,o):e}))),Re(this,r,"onProps"),Ee(this,"onProps",r,this);var a=this._prepareNode(r);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");var c=this._state;return ne(++this._lastCallId,{key:o,props:r,defaultProps:i,state:c,actions:{pause:function(){me(n)||(ye(n,!0),Object(T.n)(c.pauseQueue),Ee(n,"onPause",ie(n,je(n,n.animation.to)),n))},resume:function(){me(n)&&(ye(n,!1),ve(n)&&n._resume(),Object(T.n)(c.resumeQueue),Ee(n,"onResume",ie(n,je(n,n.animation.to)),n))},start:this._merge.bind(this,a)}}).then((function(e){if(r.loop&&e.finished&&(!t||!e.noop)){var o=we(r);if(o)return n._update(o,!0)}return e}))}},{key:"_merge",value:function(e,t,n){var r=this;if(t.cancel)return this.stop(!0),n(ae(this));var o=!T.s.und(e.to),i=!T.s.und(e.from);if(o||i){if(!(t.callId>this._lastToId))return n(ae(this));this._lastToId=t.callId}var a=this.key,c=this.defaultProps,s=this.animation,u=s.to,l=s.from,d=e.to,f=void 0===d?u:d,p=e.from,h=void 0===p?l:p;if(!i||o||t.default&&!T.s.und(f)||(f=h),t.reverse){var b=[h,f];f=b[0],h=b[1]}var v=!Object(T.u)(h,l);v&&(s.from=h),h=Object(T.q)(h);var m=!Object(T.u)(f,u);m&&this._focus(f);var g=G(t.to),y=s.config,O=y.decay,j=y.velocity;(o||i)&&(y.velocity=0),t.config&&!g&&function(e,t,n){for(var r in n&&(X(n=Object.assign({},n),t),t=Object.assign({},n,t)),X(e,t),Object.assign(e,t),J)null==e[r]&&(e[r]=J[r]);var o=e.mass,i=e.frequency,a=e.damping;T.s.und(i)||(i<.01&&(i=.01),a<0&&(a=0),e.tension=Math.pow(2*Math.PI/i,2)*o,e.friction=4*Math.PI*a*o/i)}(y,P(t.config,a),t.config!==c.config?P(c.config,a):void 0);var w=Object(I.e)(this);if(!w||T.s.und(f))return n(ie(this,!0));var C=T.s.und(t.reset)?i&&!t.default:!T.s.und(h)&&z(t.reset,a),k=C?h:this.get(),S=Q(f),x=T.s.num(S)||T.s.arr(S)||Object(T.t)(S),R=!g&&(!x||z(c.immediate||t.immediate,a));if(m){var E=Object(I.f)(f);if(E!==w.constructor){if(!R)throw Error("Cannot animate between ".concat(w.constructor.name," and ").concat(E.name,', as the "to" prop suggests'));w=this._set(S)}}var _=w.constructor,A=Object(T.r)(f),N=!1;if(!A){var M=C||!be(this)&&v;(m||M)&&(A=!(N=Object(T.u)(Q(k),S))),Object(T.u)(y.decay,O)&&Object(T.u)(y.velocity,j)||(A=!0)}if(N&&ve(this)&&(s.changed&&!C?A=!0:A||this._stop(u)),!g&&((A||Object(T.r)(u))&&(s.values=w.getPayload(),s.toValues=Object(T.r)(f)?null:_==I.b?[1]:Object(T.y)(S)),s.immediate!=R&&(s.immediate=R,R||C||this._set(u)),A)){var D=s.onRest;Object(T.k)(xe,(function(e){return Re(r,t,e)}));var L=ie(this,je(this,u));Object(T.n)(this._pendingCalls,L),this._pendingCalls.add(n),s.changed&&T.w.batchedUpdates((function(){var e;s.changed=!C,null==D||D(L,r),C?P(c.onRest,L):null==(e=s.onStart)||e.call(s,L,r)}))}C&&this._set(k),g?n(ce(t.to,t,this._state,this)):A?this._start():ve(this)&&!m?this._pendingCalls.add(n):n(oe(k))}},{key:"_focus",value:function(e){var t=this.animation;e!==t.to&&(Object(T.p)(this)&&this._detach(),t.to=e,Object(T.p)(this)&&this._attach())}},{key:"_attach",value:function(){var e=0,t=this.animation.to;Object(T.r)(t)&&(Object(T.c)(t,this),de(t)&&(e=t.priority+1)),this.priority=e}},{key:"_detach",value:function(){var e=this.animation.to;Object(T.r)(e)&&Object(T.x)(e,this)}},{key:"_set",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=Object(T.q)(e);if(!T.s.und(r)){var o=Object(I.e)(this);if(!o||!Object(T.u)(r,o.getValue())){var i=Object(I.f)(r);o&&o.constructor==i?o.setValue(r):Object(I.h)(this,i.create(r)),o&&T.w.batchedUpdates((function(){t._onChange(r,n)}))}}return Object(I.e)(this)}},{key:"_onStart",value:function(){var e=this.animation;e.changed||(e.changed=!0,Ee(this,"onStart",ie(this,je(this,e.to)),this))}},{key:"_onChange",value:function(e,t){t||(this._onStart(),P(this.animation.onChange,e,this)),P(this.defaultProps.onChange,e,this),h()(w()(n.prototype),"_onChange",this).call(this,e,t)}},{key:"_start",value:function(){var e=this.animation;Object(I.e)(this).reset(Object(T.q)(e.to)),e.immediate||(e.fromValues=e.values.map((function(e){return e.lastPosition}))),ve(this)||(ge(this,!0),me(this)||this._resume())}},{key:"_resume",value:function(){T.b.skipAnimation?this.finish():T.o.start(this)}},{key:"_stop",value:function(e,t){if(ve(this)){ge(this,!1);var n=this.animation;Object(T.k)(n.values,(function(e){e.done=!0})),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),Object(T.d)(this,{type:"idle",parent:this});var r=t?ae(this.get()):ie(this.get(),je(this,null!=e?e:n.to));Object(T.n)(this._pendingCalls,r),n.changed&&(n.changed=!1,Ee(this,"onRest",r,this))}}},{key:"idle",get:function(){return!(ve(this)||this._state.asyncTo)||me(this)}},{key:"goal",get:function(){return Object(T.q)(this.animation.to)}},{key:"velocity",get:function(){var e=Object(I.e)(this);return e instanceof I.c?e.lastVelocity||0:e.getPayload().map((function(e){return e.lastVelocity||0}))}},{key:"hasAnimated",get:function(){return be(this)}},{key:"isAnimating",get:function(){return ve(this)}},{key:"isPaused",get:function(){return me(this)}}]),n}(pe);function je(e,t){var n=Q(t),r=Q(e.get());return Object(T.u)(r,n)}function we(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.loop,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.to,r=P(t);if(r){var o=!0!==r&&K(r),i=(o||e).reverse,a=!o||o.reset;return Ce(Object.assign({},e,{loop:t,default:!1,pause:void 0,to:!i||G(n)?n:void 0,from:a?e.from:void 0,reset:a},o))}}function Ce(e){var t=e=K(e),n=t.to,r=t.from,o=new Set;return T.s.obj(n)&&Se(n,o),T.s.obj(r)&&Se(r,o),e.keys=o.size?Array.from(o):null,e}function ke(e){var t=Ce(e);return T.s.und(t.default)&&(t.default=q(t)),t}function Se(e,t){Object(T.l)(e,(function(e,n){return null!=e&&t.add(n)}))}var xe=["onStart","onRest","onChange","onPause","onResume"];function Re(e,t,n){e.animation[n]=t[n]!==F(t,n)?B(t[n],e.key):void 0}function Ee(e,t){for(var n,r,o,i,a,c,s=arguments.length,u=new Array(s>2?s-2:0),l=2;l<s;l++)u[l-2]=arguments[l];null==(i=(o=e.animation)[t])||(n=i).call.apply(n,[o].concat(u)),null==(c=(a=e.defaultProps)[t])||(r=c).call.apply(r,[a].concat(u))}var _e=["onStart","onChange","onRest"],Ae=1,Te=function(){function e(t,n){A()(this,e),this.id=Ae++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),n&&(this._flush=n),t&&this.start(Object.assign({default:!0},t))}return v()(e,[{key:"get",value:function(){var e={};return this.each((function(t,n){return e[n]=t.get()})),e}},{key:"set",value:function(e){for(var t in e){var n=e[t];T.s.und(n)||this.springs[t].set(n)}}},{key:"update",value:function(e){return e&&this.queue.push(Ce(e)),this}},{key:"start",value:function(e){var t=this.queue;return e?t=Object(T.y)(e).map(Ce):this.queue=[],this._flush?this._flush(this,t):(Be(this,t),Ne(this,t))}},{key:"stop",value:function(e,t){if(e!==!!e&&(t=e),t){var n=this.springs;Object(T.k)(Object(T.y)(t),(function(t){return n[t].stop(!!e)}))}else se(this._state,this._lastAsyncId),this.each((function(t){return t.stop(!!e)}));return this}},{key:"pause",value:function(e){if(T.s.und(e))this.start({pause:!0});else{var t=this.springs;Object(T.k)(Object(T.y)(e),(function(e){return t[e].pause()}))}return this}},{key:"resume",value:function(e){if(T.s.und(e))this.start({pause:!1});else{var t=this.springs;Object(T.k)(Object(T.y)(e),(function(e){return t[e].resume()}))}return this}},{key:"each",value:function(e){Object(T.l)(this.springs,e)}},{key:"_onFrame",value:function(){var e=this,t=this._events,n=t.onStart,r=t.onChange,o=t.onRest,i=this._active.size>0,a=this._changed.size>0;(i&&!this._started||a&&!this._started)&&(this._started=!0,Object(T.m)(n,(function(t){var n=l()(t,2),r=n[0],o=n[1];o.value=e.get(),r(o,e,e._item)})));var c=!i&&this._started,s=a||c&&o.size?this.get():null;a&&r.size&&Object(T.m)(r,(function(t){var n=l()(t,2),r=n[0],o=n[1];o.value=s,r(o,e,e._item)})),c&&(this._started=!1,Object(T.m)(o,(function(t){var n=l()(t,2),r=n[0],o=n[1];o.value=s,r(o,e,e._item)})))}},{key:"eventObserved",value:function(e){if("change"==e.type)this._changed.add(e.parent),e.idle||this._active.add(e.parent);else{if("idle"!=e.type)return;this._active.delete(e.parent)}T.w.onFrame(this._onFrame)}},{key:"idle",get:function(){return!this._state.asyncTo&&Object.values(this.springs).every((function(e){return e.idle}))}},{key:"item",get:function(){return this._item},set:function(e){this._item=e}}]),e}();function Ne(e,t){return Promise.all(t.map((function(t){return Ie(e,t)}))).then((function(t){return re(e,t)}))}function Ie(e,t,n){return Me.apply(this,arguments)}function Me(){return(Me=E()(x.a.mark((function e(t,n,r){var o,i,a,c,s,u,l,d,f,p,h,b,v;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.keys,i=n.to,a=n.from,c=n.loop,s=n.onRest,u=n.onResolve,l=T.s.obj(n.default)&&n.default,c&&(n.loop=!1),!1===i&&(n.to=null),!1===a&&(n.from=null),(d=T.s.arr(i)||T.s.fun(i)?i:void 0)?(n.to=void 0,n.onRest=void 0,l&&(l.onRest=void 0)):Object(T.k)(_e,(function(e){var r=n[e];if(T.s.fun(r)){var o=t._events[e];n[e]=function(e){var t=e.finished,n=e.cancelled,i=o.get(r);i?(t||(i.finished=!1),n&&(i.cancelled=!0)):o.set(r,{value:null,finished:t||!1,cancelled:n||!1})},l&&(l[e]=n[e])}})),f=t._state,n.pause===!f.paused?(f.paused=n.pause,Object(T.n)(n.pause?f.pauseQueue:f.resumeQueue)):f.paused&&(n.pause=!0),p=(o||Object.keys(t.springs)).map((function(e){return t.springs[e].start(n)})),h=!0===n.cancel||!0===F(n,"cancel"),(d||h&&f.asyncId)&&p.push(ne(++t._lastAsyncId,{props:n,state:f,actions:{pause:T.v,resume:T.v,start:function(e,n){h?(se(f,t._lastAsyncId),n(ae(t))):(e.onRest=s,n(ce(d,e,f,t)))}}})),!f.paused){e.next=15;break}return e.next=15,new Promise((function(e){f.resumeQueue.add(e)}));case 15:return e.t0=re,e.t1=t,e.next=19,Promise.all(p);case 19:if(e.t2=e.sent,b=(0,e.t0)(e.t1,e.t2),!c||!b.finished||r&&b.noop){e.next=26;break}if(!(v=we(n,c,i))){e.next=26;break}return Be(t,[v]),e.abrupt("return",Ie(t,v,!0));case 26:return u&&T.w.batchedUpdates((function(){return u(b,t,t.item)})),e.abrupt("return",b);case 28:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function De(e,t){var n=Object.assign({},e.springs);return t&&Object(T.k)(Object(T.y)(t),(function(e){T.s.und(e.keys)&&(e=Ce(e)),T.s.obj(e.to)||(e=Object.assign({},e,{to:void 0})),ze(n,e,(function(e){return Pe(e)}))})),n}function Le(e,t){Object(T.l)(t,(function(t,n){e.springs[n]||(e.springs[n]=t,Object(T.c)(t,e))}))}function Pe(e,t){var n=new Oe;return n.key=e,t&&Object(T.c)(n,t),n}function ze(e,t,n){t.keys&&Object(T.k)(t.keys,(function(r){(e[r]||(e[r]=n(r)))._prepareNode(t)}))}function Be(e,t){Object(T.k)(t,(function(t){ze(e.springs,t,(function(t){return Pe(t,e)}))}))}var Fe,Ue,qe=function(e){var t=e.children,n=s()(e,["children"]),r=Object(N.useContext)(Ve),o=n.pause||!!r.pause,i=n.immediate||!!r.immediate;n=Object(T.B)((function(){return{pause:o,immediate:i}}),[o,i]);var a=Ve.Provider;return Object(N.createElement)(a,{value:n},t)},Ve=(Fe=qe,Ue={},Object.assign(Fe,Object(N.createContext)(Ue)),Fe.Provider._context=Fe,Fe.Consumer._context=Fe,Fe);qe.Provider=Ve.Provider,qe.Consumer=Ve.Consumer;var He=function(e){g()(n,e);var t=M(n);function n(){var e;return A()(this,n),(e=t.call(this,"return arguments.callee._call.apply(arguments.callee, arguments)")).current=[],e}return v()(n,[{key:"_call",value:function(e){Object(T.i)(),this.start(e)}},{key:"set",value:function(e){Object(T.k)(this.current,(function(t){return t.set(e)}))}},{key:"start",value:function(e){var t=this,n=[];return Object(T.k)(this.current,(function(r,o){if(T.s.und(e))n.push(r.start());else{var i=t._getProps(e,r,o);i&&n.push(r.start(i))}})),n}},{key:"update",value:function(e){var t=this;return Object(T.k)(this.current,(function(n,r){return n.update(t._getProps(e,n,r))})),this}},{key:"add",value:function(e){this.current.includes(e)||this.current.push(e)}},{key:"delete",value:function(e){var t=this.current.indexOf(e);~t&&this.current.splice(t,1)}},{key:"_getProps",value:function(e,t,n){return T.s.fun(e)?e(n,t):e}}]),n}(k()(Function));function Ke(e,t,n){var r=arguments,o=T.s.fun(t)&&t;o&&!n&&(n=[]);var i=Object(N.useMemo)((function(){return o||3==r.length?new He:void 0}),[]),c=Object(N.useRef)(0),s=Object(T.z)(),u=Object(N.useMemo)((function(){return{ctrls:[],queue:[],flush:function(e,t){var n=De(e,t);return c.current>0&&!u.queue.length&&!Object.keys(n).some((function(t){return!e.springs[t]}))?Ne(e,t):new Promise((function(r){Le(e,n),u.queue.push((function(){r(Ne(e,t))})),s()}))}}}),[]),l=a()(u.ctrls),d=[],f=Object(T.D)(e)||0,p=l.slice(e,f);function h(e,n){for(var r=e;r<n;r++){var i=l[r]||(l[r]=new Te(null,u.flush)),a=o?o(r,i):t[r];a&&(d[r]=ke(a))}}Object(N.useMemo)((function(){l.length=e,h(f,e)}),[e]),Object(N.useMemo)((function(){h(0,Math.min(f,e))}),n);var b=l.map((function(e,t){return De(e,d[t])})),v=Object(N.useContext)(qe),m=Object(T.D)(v),g=v!==m&&W(v);Object(T.A)((function(){c.current++,u.ctrls=l;var e=u.queue;e.length&&(u.queue=[],Object(T.k)(e,(function(e){return e()}))),Object(T.k)(p,(function(e){Z(e,i),e.stop(!0)})),Object(T.k)(l,(function(e,t){Le(e,b[t]),null==i||i.add(e),g&&e.start({default:v});var n=d[t];n&&(Y(e,n.ref),e.ref?e.queue.push(n):e.start(n))}))})),Object(T.C)((function(){return function(){Object(T.k)(u.ctrls,(function(e){return e.stop(!0)}))}}));var y=b.map((function(e){return Object.assign({},e)}));return i?[y,i]:y}function Qe(e,t){var n=T.s.fun(e),r=Ke(1,n?e:[e],n?t||[]:t),o=l()(r,2),i=l()(o[0],1),a=i[0],c=o[1];return n||2==arguments.length?[a,c]:a}Object(T.k)(["stop","pause","resume"],(function(e){He.prototype[e]=function(){var t=arguments;return Object(T.k)(this.current,(function(n){return n[e].apply(n,a()(t))})),this}}));var We="enter";function Ge(e,t,n){var r=arguments,o=t.reset,i=t.sort,a=t.trail,c=void 0===a?0:a,s=t.expires,u=void 0===s||s,l=t.onDestroyed,d=Object(N.useMemo)((function(){return 3==r.length?new He:void 0}),[]),f=Object(T.y)(e),p=[],h=Object(N.useRef)(null),b=o?null:h.current;Object(T.A)((function(){h.current=p})),Object(T.C)((function(){return function(){return Object(T.k)(h.current,(function(e){e.expired&&clearTimeout(e.expirationId),Z(e.ctrl,d),e.ctrl.stop(!0)}))}}));var v=Ye(f,t,b),m=o&&h.current||[];Object(T.A)((function(){return Object(T.k)(m,(function(e){var t=e.ctrl,n=e.item,r=e.key;Z(t,d),P(l,n,r)}))}));var g=[];if(b&&Object(T.k)(b,(function(e,t){e.expired?(clearTimeout(e.expirationId),m.push(e)):~(t=g[t]=v.indexOf(e.key))&&(p[t]=e)})),Object(T.k)(f,(function(e,t){p[t]||(p[t]={key:v[t],item:e,phase:"mount",ctrl:new Te},p[t].ctrl.item=e)})),g.length){var y=-1;Object(T.k)(g,(function(e,n){var r=b[n];~e?(y=p.indexOf(r),p[y]=Object.assign({},r,{item:f[e]})):t.leave&&p.splice(++y,0,r)}))}T.s.fun(i)&&p.sort((function(e,t){return i(e.item,t.item)}));var O=-c,j=Object(T.z)(),w=q(t),C=new Map;Object(T.k)(p,(function(e,n){var r,o,i=e.key,a=e.phase;if("mount"==a)r=t.enter,o=We;else{var s=v.indexOf(i)<0;if("leave"!=a)if(s)r=t.leave,o="leave";else{if(!(r=t.update))return;o="update"}else{if(s)return;r=t.enter,o=We}}if(r=P(r,e.item,n),!(r=T.s.obj(r)?K(r):{to:r}).config){var l=t.config||w.config;r.config=P(l,e.item,n,o)}var d=Object.assign({},w,{delay:O+=c,reset:!1},r);if(o==We&&T.s.und(d.from)){var f=T.s.und(t.initial)||b?t.from:t.initial;d.from=P(f,e.item,n)}var p=d.onResolve;d.onResolve=function(e){P(p,e);var t=h.current,n=t.find((function(e){return e.key===i}));if(n&&(!e.cancelled||"update"==n.phase)&&n.ctrl.idle){var r=t.every((function(e){return e.ctrl.idle}));if("leave"==n.phase){var o=P(u,n.item);if(!1!==o){var a=!0===o?0:o;if(n.expired=!0,!r&&a>0)return void(a<=2147483647&&(n.expirationId=setTimeout(j,a)))}}r&&t.some((function(e){return e.expired}))&&j()}};var m=De(e.ctrl,d);C.set(e,{phase:o,springs:m,payload:d})}));var k=Object(N.useContext)(qe),S=Object(T.D)(k),x=k!==S&&W(k);Object(T.A)((function(){x&&Object(T.k)(p,(function(e){e.ctrl.start({default:k})}))}),[k]),Object(T.A)((function(){Object(T.k)(C,(function(e,t){var n=e.phase,r=e.springs,o=e.payload,i=t.ctrl;t.phase=n,null==d||d.add(i),Y(i,o.ref),Le(i,r),x&&n==We&&i.start({default:k}),i[i.ref?"update":"start"](o)}))}),o?void 0:n);var R=function(e){return Object(N.createElement)(N.Fragment,null,p.map((function(t,n){var r=(C.get(t)||t.ctrl).springs,o=e(Object.assign({},r),t.item,t,n);return o&&o.type?Object(N.createElement)(o.type,Object.assign({},o.props,{key:T.s.str(t.key)||T.s.num(t.key)?t.key:t.ctrl.id,ref:o.ref})):o})))};return d?[R,d]:R}var Ze=1;function Ye(e,t,n){var r=t.key,o=t.keys,i=void 0===o?r:o;if(null===i){var a=new Set;return e.map((function(e){var t=n&&n.find((function(t){return t.item===e&&"leave"!==t.phase&&!a.has(t)}));return t?(a.add(t),t.key):Ze++}))}return T.s.und(i)?e:T.s.fun(i)?e.map(i):Object(T.y)(i)}var Je=function(e){g()(n,e);var t=M(n);function n(e,r){var i;A()(this,n),(i=t.call(this)).source=e,i.idle=!0,i._active=new Set,i.calc=T.f.apply(void 0,a()(r));var c=i._get(),s=Object(I.f)(c);return Object(I.h)(o()(i),s.create(c)),i}return v()(n,[{key:"advance",value:function(e){var t=this._get(),n=this.get();Object(T.u)(t,n)||(Object(I.e)(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&Xe(this._active)&&et(this)}},{key:"_get",value:function(){var e=T.s.arr(this.source)?this.source.map(T.q):Object(T.y)(Object(T.q)(this.source));return this.calc.apply(this,a()(e))}},{key:"_start",value:function(){var e=this;this.idle&&!Xe(this._active)&&(this.idle=!1,Object(T.k)(Object(I.g)(this),(function(e){e.done=!1})),T.b.skipAnimation?(T.w.batchedUpdates((function(){return e.advance()})),et(this)):T.o.start(this))}},{key:"_attach",value:function(){var e=this,t=1;Object(T.k)(Object(T.y)(this.source),(function(n){Object(T.r)(n)&&Object(T.c)(n,e),de(n)&&(n.idle||e._active.add(n),t=Math.max(t,n.priority+1))})),this.priority=t,this._start()}},{key:"_detach",value:function(){var e=this;Object(T.k)(Object(T.y)(this.source),(function(t){Object(T.r)(t)&&Object(T.x)(t,e)})),this._active.clear(),et(this)}},{key:"eventObserved",value:function(e){"change"==e.type?e.idle?this.advance():(this._active.add(e.parent),this._start()):"idle"==e.type?this._active.delete(e.parent):"priority"==e.type&&(this.priority=Object(T.y)(this.source).reduce((function(e,t){return Math.max(e,(de(t)?t.priority:0)+1)}),0))}}]),n}(pe);function $e(e){return!1!==e.idle}function Xe(e){return!e.size||Array.from(e).every($e)}function et(e){e.idle||(e.idle=!0,Object(T.k)(Object(I.g)(e),(function(e){e.done=!0})),Object(T.d)(e,{type:"idle",parent:e}))}T.b.assign({createStringInterpolator:T.g,to:function(e,t){return new Je(e,t)}});T.o.advance},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return j})),n.d(t,"e",(function(){return C})),n.d(t,"f",(function(){return x})),n.d(t,"d",(function(){return N})),n.d(t,"g",(function(){return D}));var r=n(1),o=n.n(r),i=n(28),a=n(234),c=n(848),s=function(e){var t=Object(a.i)().trackEvent,n=Object(r.useCallback)((function(n){!function(e,t,n){if(!e.defaultPrevented){var r=e.target.getAttribute("data-catalog-target-id");if(r){n({action:"OpenUrl",block:"ZTextCatalog",eventType:"Click",elementLocation:{type:"Button",text:e.target.innerText}},{link:{url:window.location.href}}),i.a.trackEvent(e.target);var o=t.querySelector("#"+r);o&&(e.preventDefault(),Object(c.a)(o,10,!1))}}}(n,e,t)}),[e,t]);Object(r.useEffect)((function(){if(e)return e.addEventListener("click",n),function(){e.removeEventListener("click",n)}}),[e,n])},u=function(e){Object(r.useEffect)((function(){e&&Array.from(e.querySelectorAll("img[eeimg]")).forEach((function(e){e.setAttribute("data-formula",e.alt),e.alt="[公式]"}))}),[e])},l=(n(878),n(57)),d=n.n(l),f=n(64),p=n.n(f),h=n(150),b=function(e){return e.replace(/\.(jpg|png|jpeg|gif)/,".webp")},v=n(919),m=n(922),g=p()((function(){return/Mobile/.test(navigator.userAgent)}));function y(e,t){var n={monitor:{type:"Event",imgResourceErrorInfo:{error_description:t,img_url:e,img_from:"web"}}};i.a.trackMonitor({name:t},n)}var O=function(e){var t=e.onLoadStateChange,n=e.enableWebP,r=e.size,o=e.quality;return function(e){var i=e.target,a=function(e){var t=e.image,n=e.enableWebP,r=e.size,o=e.quality,i=void 0===o?80:o,a=t.dataset,c=a.actualsrc,s=a.actualgif;return n&&s&&s.match(/.gif$/i)?c:(r||(r="720w",!g()&&window.devicePixelRatio>=1.5&&(r="1440w"),g()&&window.devicePixelRatio*window.innerWidth>=1080&&(r="1440w")),Object(h.imgUrl)(c,{quality:i,size:r}))}({image:i,enableWebP:n,size:r,quality:o});if(n&&(a=b(a)),i.src=a,i.complete)i.dataset.lazyStatus="ok";else{t&&i.addEventListener("loadstart",(function(){t("loadstart",a)})),i.dataset.lazyStatus="loading";var c=setTimeout((function(){i.complete||y(i.url,"image_web_timeout_image"),t&&t("timeout",a)}),15e3);i.addEventListener("load",(function(){i.dataset.lazyStatus="ok",clearTimeout(c),y(i.url,"image_web_success_image"),t&&t("load",a)})),i.addEventListener("error",(function(){clearTimeout(c),y(i.url,"image_web_fail_image"),t&&t("error",a)}))}}},j=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.useWebP,o=void 0===n||n,i=t.disabled,a=void 0!==i&&i,c=t.onLoadStateChange,s=t.size,u=t.quality,l=Object(r.useState)([]),f=d()(l,2),p=f[0],h=f[1],b=Object(m.a)("lossless");Object(v.a)(p,O({onLoadStateChange:c,enableWebP:b&&o,size:s,quality:u}),{rootMargin:"300px"}),Object(r.useEffect)((function(){if(e&&!a){var t=Array.from(e.querySelectorAll("img.lazy:not([data-thumbnail])"));t.length&&h(t)}}),[e,a])},w=n(66),C=function(e,t){var n=Object(w.c)((function(n){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e.defaultPrevented&&e.target.matches("a[data-reference-link]")){var r=e.target.getAttribute("href"),o=t.querySelector(r);if(o){if(e.preventDefault(),n.onReferenceClick&&e.target.hasAttribute("aria-labelledby"))return void n.onReferenceClick(e);o.focus({preventScroll:!0}),Object(c.a)(o),document.documentElement.setAttribute("data-focus-visible","")}}}(n,e,t)}));Object(r.useEffect)((function(){if(e)return e.addEventListener("click",n),function(){e.removeEventListener("click",n)}}),[e,n])},k=(n(575),function(e){var t=function(e){if(0!==e.intersectionRatio){var t=e.target;t.dataset.zaDetailViewId=t.cardShowViewId,i.a.trackCardShow(t,{},{link:{url:t.href}}),n.unobserve(t),t.clickViewId&&(t.dataset.zaDetailViewId=t.clickViewId)}},n=new IntersectionObserver((function(e){e.forEach(t)}),{threshold:[.1]});return[{cardShowViewId:1042,clickViewId:1043,selector:"a.external, a.internal"},{cardShowViewId:1044,clickViewId:1045,selector:"a.member_mention, a.UserLink-link"},{cardShowViewId:174,clickViewId:175,selector:"a.video-box"},{cardShowViewId:171,clickViewId:172,selector:'a[data-draft-type="link-card"]'},{cardShowViewId:7692,selector:"a.FileLinkCard .FileLinkCard-info"},{cardShowViewId:9744,selector:".Catalog"}].forEach((function(t){var r=t.selector,o=t.cardShowViewId,i=t.clickViewId;Array.from(e.querySelectorAll(r)).forEach((function(e){e.cardShowViewId=o,e.clickViewId=i,n.observe(e)}))})),function(){n.disconnect()}}),S="function"==typeof queueMicrotask?queueMicrotask:function(e){return Promise.resolve().then(e)},x=function(e){var t=Object(r.useRef)(null);Object(r.useEffect)((function(){if(e)return S((function(){e&&(t.current=k(e))})),function(){t.current&&t.current()}}),[e])},R=n(33),E=n.n(R),_=n(934),A=n(868),T=n(5),N=function(e){var t=e.contentType,n=e.token,i=e.root,a=e.mcnLinkCardProps,c=Object(r.useState)(null),s=d()(c,2),u=s[0],l=s[1],f=Object(r.useState)(!1),p=d()(f,2),h=p[0],b=p[1];return Object(r.useEffect)((function(){var e=i&&i.querySelector("*[data-draft-type=mcn-link-card]");["answer","article"].includes(t)&&e&&Object(A.a)("/api/v4/mcn/linkcards?content_type=".concat(t,"&token=").concat(n)).then((function(e){var t=e.data;t&&(l(t),b(!0))})).catch((function(){b(!0)}))}),[i]),Object(T.g)(o.a.Fragment,null,h&&Object(T.g)(_.d,E()({},a,{goodsRecommendCards:u,root:i})))},I=n(839),M=n(916),D=function(e,t,n){var o=Object(r.useRef)(n),i=Object(w.c)((function(e){var n=e.currentTarget,r={title:n.dataset.text,href:n.href};"IMG"===e.target.tagName?Object(M.b)(e,t,Object.assign({},r,{video:{}})):Object(M.c)(e,t,r)}));Object(r.useEffect)((function(){if(e&&o.current){var t=Array.from(e.querySelectorAll(".LinkCard.new.static.zvideo"));return t.forEach((function(e){Object(I.onViewedOnce)(e,(function(){return Object(M.d)(e)})),e.addEventListener("click",i)})),function(){t.forEach((function(e){e.removeEventListener("click",i)}))}}}),[e,o,i])}},function(e,t,n){"use strict";var r=n(13),o=n(14),i=n(15),a=n(16),c=n(9),s=n(2),u=n(1),l=n(11),d=n.n(l),f=n(174),p=n(75),h=n(58);function b(e,t){Object(h.a)(2,arguments);var n=Object(p.a)(e),r=Object(f.a)(t);return n.setSeconds(r),n}var v=n(1368),m=n(214),g=n(1369);function y(e){Object(h.a)(1,arguments);var t=Object(p.a)(e),n=t.getFullYear(),r=t.getMonth(),o=new Date(0);return o.setFullYear(n,r+1,0),o.setHours(0,0,0,0),o.getDate()}var O=n(1333);var j=n(985),w=n.n(j),C=n(982),k=n.n(C),S=n(435),x=n.n(S),R=n(178),E=n(1114);function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var A=w()(0,24).map((function(e){return k()(e,2,"0")})),T=w()(0,60).map((function(e){return k()(e,2,"0")})),N=function(e){Object(i.a)(n,e);var t=_(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={value:b(e.props.value,0)},e}return Object(o.a)(n,[{key:"handleChange",value:function(e,t){var n=this.props.onChange;this.setState({value:e}),n(e,t)}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.large,o=t.min,i=t.max,a=t.onRef,c=this.state.value;return Object(s.c)("div",{className:d()("DateTimePicker",n),ref:a,children:[Object(s.b)(E.a,{large:r,value:c,disabledDate:function(e){return!(!o||!v.a(e,m.a(o)))||!(!i||!g.a(e,m.a(i)))},onChange:function(t){e.handleChange(x()((function(e){return function(e,t){Object(h.a)(2,arguments);var n=Object(p.a)(e),r=Object(f.a)(t);return isNaN(n)?new Date(NaN):(n.setFullYear(r),n)}(e,t.getFullYear())}),(function(e){return function(e,t){Object(h.a)(2,arguments);var n=Object(p.a)(e),r=Object(f.a)(t),o=n.getFullYear(),i=n.getDate(),a=new Date(0);a.setFullYear(o,r,15),a.setHours(0,0,0,0);var c=y(a);return n.setMonth(r,Math.min(i,c)),n}(e,t.getMonth())}),(function(e){return function(e,t){Object(h.a)(2,arguments);var n=Object(p.a)(e),r=Object(f.a)(t);return n.setDate(r),n}(e,t.getDate())}))(c),{date:t})}}),Object(s.b)(R.b,{large:r,value:O.a(c,"HH"),onChange:function(t){return e.handleChange(function(e,t){Object(h.a)(2,arguments);var n=Object(p.a)(e),r=Object(f.a)(t);return n.setHours(r),n}(c,t),{hours:t})},children:A.map((function(e){return Object(s.b)(R.a,{value:e},e)}))}),Object(s.b)("span",{className:"DateTimePicker-label",children:"时"}),Object(s.b)(R.b,{large:r,value:O.a(c,"mm"),onChange:function(t){return e.handleChange(function(e,t){Object(h.a)(2,arguments);var n=Object(p.a)(e),r=Object(f.a)(t);return n.setMinutes(r),n}(c,t),{minutes:t})},children:T.map((function(e){return Object(s.b)(R.a,{value:e},e)}))}),Object(s.b)("span",{className:"DateTimePicker-label",children:"分"})]})}}]),n}(u.Component);t.a=N},function(e,t,n){"use strict";n.d(t,"b",(function(){return N})),n.d(t,"a",(function(){return d}));var r=n(3),o=n.n(r),i=n(1),a=n(11),c=n.n(a),s=n(177),u=n(5),l=function(e){var t=e.title,n=e.subtitle,r=e.attrInfo,o=e.coverUrl,i=e.avatarUrl,a=e.avatarFit;return Object(u.g)("div",null,o&&Object(u.g)("div",{className:"HoverCard-coverContainer"},Object(u.g)("img",{className:"HoverCard-cover",src:o,alt:"cover"})),Object(u.g)("div",{className:c()("HoverCard-titleContainer",{"HoverCard-titleContainer--noAvatar":!o})},i&&Object(u.g)(s.a,{size:68,className:"HoverCard-avatar",url:i,imgFit:a}),Object(u.g)("div",{className:c()("HoverCard-titleText",{"HoverCard-titleText--noAvatar":!i})},Object(u.g)("div",{className:"HoverCard-title"},t),n&&Object(u.g)("div",{className:"HoverCard-subtitle"},n)),r&&Object(u.g)("div",{className:"HoverCard-attrInfo"},r)))};l.propTypes={title:o.a.node,subtitle:o.a.node,attrInfo:o.a.node,coverUrl:o.a.string,avatarUrl:o.a.string,avatarFit:o.a.oneOf(["fill","contain","cover","none","scale-down"])};var d=l,f=n(20),p=n.n(f),h=n(21),b=n.n(h),v=n(22),m=n.n(v),g=n(23),y=n.n(g),O=n(17),j=n.n(O),w=n(33),C=n.n(w),k=n(43),S=n.n(k),x=n(76),R=n.n(x),E=n(376),_=n(135);function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j()(e);if(t){var o=j()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y()(this,n)}}var T=function(e){m()(n,e);var t=A(n);function n(){var e;p()(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={opened:!1,placement:null,loaderStyle:null},e.handleOpen=function(t){var n=t.arrowStyle,r=t.placement,o=e.props.onOpen;o&&o(),e.setState({opened:!0,placement:r,loaderStyle:n})},e.handleClose=function(){var t=e.props.onClose;t&&t(),e.setState({opened:!1})},e}return b()(n,[{key:"render",value:function(){var e=R()(this.props,["onOpen","onClose"]),t=e.toggler,n=e.children,r=e.isLoading,o=e.onRef,a=e.size,s=S()(e,["toggler","children","isLoading","onRef","size"]),l=this.state,d=l.opened,f=l.loaderStyle;return Object(u.g)(_.a,C()({noLayer:!0,toggler:Object(u.g)("div",null,t),toggleEvent:"hover",targetClassName:"HoverCard-popoverTarget",placement:"bottom-left",onOpen:this.handleOpen,onClose:this.handleClose},s),Object(u.g)("div",{className:c()("HoverCard-container",{"HoverCard-container--large":"large"===a}),ref:o},r&&Object(u.g)("div",{className:"HoverCard-loading",style:f},Object(u.g)(E.a,null)),Object(u.g)("div",{className:c()("HoverCard",{"HoverCard--isLoading":r||!d})},i.Children.map(n,(function(e){return e&&("string"==typeof e?Object(u.g)("div",{className:"HoverCard-item"},e):Object(i.cloneElement)(e,{className:c()("HoverCard-item",e.props.className)}))})))))}}]),n}(i.Component);T.propTypes={toggler:o.a.node.isRequired,isLoading:o.a.bool,onOpen:o.a.func,onClose:o.a.func,size:o.a.oneOf(["default","large"])},T.defaultProps={margin:16,align:"left",topExcludedHeight:60,size:"default"};var N=T},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(1),o=n.n(r),i=n(11),a=n.n(i),c=n(367),s=n(5),u=[{extensionList:["doc","docx","txt"],type:"doc"},{extensionList:["jpg","jpeg","png","bmp"],type:"image"},{extensionList:["mp3","aac"],type:"music"},{extensionList:["pdf"],type:"pdf"},{extensionList:["xls","xlsx","csv"],type:"table"},{extensionList:["torrent"],type:"torrent"},{extensionList:["mp4","flv"],type:"video"},{extensionList:["zip","rar","7z"],type:"zip"},{extensionList:[""],type:"folder"}];var l=function(e){var t=e.className,n=e.isDirectory,r=void 0!==n&&n,o=e.extension,i=function(e){return"https://zhstatic.zhihu.com/assets/zhihu-components/file-icon/zhimg_answer_editor_file_".concat(e,".svg")}(r?"folder":function(e){var t=u.find((function(t){return t.extensionList.includes(e)}));return t?t.type:"other"}(o));return Object(s.g)("img",{className:a()("FileExtensionIcon",t),src:i})},d={baidu:"百度网盘"};var f=function(e){var t=e.component,n=void 0===t?"a":t,r=e.className,i=e.href,u=e.type,f=void 0===u?"file":u,p=e.name,h=e.extension,b=e.size,v=e.source,m=e.onRef,g=e.onClick,y=e.onMouseDown,O=Number(b);return Object(s.g)(n,{className:a()("FileLinkCard",r),href:i,target:"_blank",rel:"noopener noreferrer","data-za-detail-view-id":7693,ref:m,onClick:g,onMouseDown:y},Object(s.g)(l,{className:"FileLinkCard-icon",isDirectory:"directory"===f,extension:h}),Object(s.g)("div",{className:"FileLinkCard-info"},Object(s.g)("div",{className:"FileLinkCard-name"},p),Object(s.g)("div",{className:"FileLinkCard-meta"},Boolean(O)&&Object(s.g)("div",{className:"FileLinkCard-size"},Object(c.unitPrefix)(O)),Boolean(O)&&v&&Object(s.g)(o.a.Fragment,null," · "),v&&Object(s.g)("div",{className:"FileLinkCard-source"},function(e){return d[e]||e}(v)))))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var r=n(20),o=n.n(r),i=n(21),a=n.n(i),c=n(22),s=n.n(c),u=n(23),l=n.n(u),d=n(17),f=n.n(d),p=n(33),h=n.n(p),b=n(43),v=n.n(b),m=n(1),g=n(42),y=n(11),O=n.n(y),j=n(1056),w=n.n(j),C=n(76),k=n.n(C),S=n(5);function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var o=f()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l()(this,n)}}function R(e,t,n){var r=new Image;return r.addEventListener("load",t),r.onerror=n,r.src=e,r}var E=function(e){s()(n,e);var t=x(n);function n(){var e;o()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={thumbnailLoaded:!1,loaded:!1,vagued:!0,computedWidth:e.props.width,computedHeight:e.props.height},e.wrapperNode=null,e.hasLoaded=!1,e.loadThumbnail=function(){var t=e.props,n=t.onLoadImageFail,r=t.onLoadImageTimeout;e.thumbnail=R(e.props.thumbnail,e.handleThumbnailLoaded,(function(){n&&n({type:"thumbnail",url:e.props.thumbnail})})),r&&setTimeout((function(){e.thumbnail&&!e.thumbnail.complete&&r({type:"thumbnail",url:e.props.thumbnail})}),3e3)},e.loadImage=function(){var t=e.props,n=t.onLoadImageFail,r=t.onLoadImageTimeout;e.image=R(e.props.url,e.handleImageLoaded,(function(){n&&n({type:"image",url:e.props.url})})),r&&setTimeout((function(){e.image&&!e.image.complete&&r({type:"image",url:e.props.url})}),3e3)},e.handleObserve=function(t){t&&e.hasLoaded||t&&(e.hasLoaded=!0,e.loadThumbnail(),e.loadImage())},e.handleThumbnailLoaded=function(){var t=e.props.onLoadImageSuccess;t&&t({type:"thumbnail",url:e.props.thumbnail});var n=e.state,r=n.computedWidth;if(!n.computedHeight){var o=e.thumbnail,i=o.naturalWidth,a=o.naturalHeight*(Number(r)/i);e.setState({computeHeight:a})}e.setState({thumbnailLoaded:!0})},e.handleImageLoaded=function(){var t=e.props.onLoadImageSuccess;t&&t({type:"image",url:e.props.url}),e.setState({loaded:!0}),e.timeout=window.setTimeout((function(){return e.setState({vagued:!1})}),500)},e}return a()(n,[{key:"componentDidMount",value:function(){if(this.wrapperNode){var e=Object(g.findDOMNode)(this.wrapperNode),t=this.state,n=t.computedWidth,r=t.computedHeight;this.setState({computeWidth:n||e.offsetWidth,computeHeight:r||e.offsetHeight})}}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout),this.thumbnail&&this.thumbnail.removeEventListener("load",this.handleThumbnailLoaded),this.image&&this.image.removeEventListener("load",this.handleImageLoaded)}},{key:"render",value:function(){var e=this,t=k()(this.props,["onLoadImageFail","onLoadImageTimeout","onLoadImageSuccess"]),n=t.className,r=t.url,o=t.alt,i=t.threshold,a=t.thumbnail,c=v()(t,["className","url","alt","threshold","thumbnail"]),s=this.state,u=s.thumbnailLoaded,l=s.loaded,d=s.vagued,f=s.computedWidth,p=s.computedHeight;if(!d)return Object(S.g)("img",h()({className:n,width:f,src:r,alt:o},c));var b=w.a;return Object(S.g)(b,{rootMargin:"".concat(i,"px 0px ").concat(i,"px 0px"),onChange:this.handleObserve,className:O()("VagueImage",n),ref:function(t){e.wrapperNode=t},style:Object.assign({},f&&{width:"".concat(f,"px")},{},p&&{height:"".concat(p,"px")}),"data-src":r},Object(S.g)("div",{className:O()("VagueImage-mask",{"is-active":!l}),style:u?{backgroundImage:"url(".concat(a,")")}:{}}),l&&Object(S.g)("img",{className:"VagueImage-innerLarge",src:r,alt:o}))}}]),n}(m.Component);E.defaultProps={threshold:200};var _=E},function(e,t,n){"use strict";var r=n(20),o=n.n(r),i=n(21),a=n.n(i),c=n(22),s=n.n(c),u=n(23),l=n.n(u),d=n(17),f=n.n(d),p=n(57),h=n.n(p),b=n(33),v=n.n(b),m=n(43),g=n.n(m),y=n(1),O=n.n(y),j=n(3),w=n.n(j),C=n(18),k=function(e){return O.a.createElement(C.a,e,O.a.createElement("path",{d:"M11.991 3C7.023 3 3 7.032 3 12s4.023 9 8.991 9C16.968 21 21 16.968 21 12s-4.032-9-9.009-9zm6.237 5.4h-2.655a14.084 14.084 0 0 0-1.242-3.204A7.227 7.227 0 0 1 18.228 8.4zM12 4.836A12.678 12.678 0 0 1 13.719 8.4h-3.438A12.678 12.678 0 0 1 12 4.836zM5.034 13.8A7.418 7.418 0 0 1 4.8 12c0-.621.09-1.224.234-1.8h3.042A14.864 14.864 0 0 0 7.95 12c0 .612.054 1.206.126 1.8H5.034zm.738 1.8h2.655a14.084 14.084 0 0 0 1.242 3.204A7.188 7.188 0 0 1 5.772 15.6zm2.655-7.2H5.772a7.188 7.188 0 0 1 3.897-3.204c-.54.999-.954 2.079-1.242 3.204zM12 19.164a12.678 12.678 0 0 1-1.719-3.564h3.438A12.678 12.678 0 0 1 12 19.164zm2.106-5.364H9.894A13.242 13.242 0 0 1 9.75 12c0-.612.063-1.215.144-1.8h4.212c.081.585.144 1.188.144 1.8 0 .612-.063 1.206-.144 1.8zm.225 5.004c.54-.999.954-2.079 1.242-3.204h2.655a7.227 7.227 0 0 1-3.897 3.204zm1.593-5.004c.072-.594.126-1.188.126-1.8 0-.612-.054-1.206-.126-1.8h3.042c.144.576.234 1.179.234 1.8s-.09 1.224-.234 1.8h-3.042z"}))};k.defaultProps={name:"Browser"};var S=k,x=n(826),R=n(11),E=n.n(R),_=n(76),A=n.n(_),T=n(150),N=n(877),I=n(5);function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var o=f()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l()(this,n)}}var D=function(){return Object(I.g)("div",{className:"LinkCard-image LinkCard-image--default"},Object(I.g)(S,{size:32}))},L=/^https?:\/\/link\.zhihu\.com/,P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e;if(L.test(e)){var n=e.match(/target=([^=]+)/)||[],r=h()(n,2),o=r[1];o&&(t=decodeURIComponent(o))}var i=t.split("/"),a=h()(i,3),c=a[2];return c||""},z=function(e){s()(n,e);var t=M(n);function n(){return o()(this,n),t.apply(this,arguments)}return a()(n,[{key:"renderLinkMeta",value:function(){var e=this.props,t=e.url,n=e.entityType,r=e.entityData,o=P(t);if(n&&r&&"job"===n){var i=r.salary,a=r.city,c=r.location,s=r.seniority,u=r.education;return Object(I.g)("span",{className:"LinkCard-meta"},Object(I.g)("span",{className:"LinkCard-textMeta"},s&&Object(I.g)("span",{className:"LinkCard-metaItem"},s),u&&Object(I.g)("span",{className:"LinkCard-metaItem"},u),(a||c)&&Object(I.g)("span",{className:"LinkCard-metaItem"},a,Object(I.g)("span",{className:"LinkCard-metaItem-jobLocation"},c))),i&&Object(I.g)("span",{className:"LinkCard-badge"},i))}return Object(I.g)("span",{className:"LinkCard-meta"},Object(I.g)(x.a,{size:17,center:!0}),o)}},{key:"render",value:function(){var e=A()(this.props,["entityType","entityData"]),t=e.text,n=e.target,r=e.url,o=e.image,i=e.imageWidth,a=e.imageHeight,c=e.component,s=e.className,u=e.size,l=g()(e,["text","target","url","image","imageWidth","imageHeight","component","className","size"]);if(Object(N.b)(r))return Object(I.g)(N.a,v()({className:E()("old",s)},this.props));var d=function(e,t){if(e>0&&t>0){var n=e/t;if(n>1.2)return{modifier:"horizontal",size:"180x120"};if(n<=.8)return{modifier:"vertical",size:"120x160"}}return{modifier:"square",size:"ipico"}}(i,a),f=d.modifier,p=d.size,h=!o&&function(e){var t=P(e);return"zhihu.com"===t||t.endsWith(".zhihu.com")}(r)?"https://zhstatic.zhihu.com/assets/zhihu/editor/zhihu-card-default.svg":Object(T.imgUrl)(o,p);return Object(I.g)(c,v()({target:n,href:r,"data-draft-node":"block","data-draft-type":"link-card"},h&&{"data-image":h},i&&{"data-image-width":i},a&&{"data-image-height":a},u&&{"data-size":u},{className:E()("LinkCard old",s,{"LinkCard--hasImage":Boolean(h),"LinkCard--noImage":!h})},l),h&&Object(I.g)("span",{className:"LinkCard-backdrop",style:{backgroundImage:"url(".concat(h,")")}}),Object(I.g)("span",{className:"LinkCard-content"},Object(I.g)("span",{className:"LinkCard-text"},Object(I.g)("span",{className:"LinkCard-title","data-text":!0},t),this.renderLinkMeta()),Object(I.g)("span",{className:"LinkCard-imageCell"},h?Object(I.g)("img",{className:E()("LinkCard-image","LinkCard-image--".concat(f)),alt:"图标",src:h}):Object(I.g)(D,null))))}}]),n}(O.a.Component);z.propTypes={component:w.a.oneOfType([w.a.string,w.a.func]),target:w.a.string,url:w.a.string.isRequired,text:w.a.string.isRequired,image:w.a.string,imageWidth:w.a.oneOfType([w.a.string,w.a.number]),imageHeight:w.a.oneOfType([w.a.string,w.a.number])},z.defaultProps={component:"a",target:"_blank"};t.a=z},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(367);function o(e){return Object(r.formatNumber)(e)||"--"}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(0),o=n(6),i=n(26),a=n(24),c=Object(o.a)("user",["UPDATE_FOLLOWERS_PIN"]).UPDATE_FOLLOWERS_PIN;function s(e,t,n){return function(o,s){var u=s(),l=u.entities.users,d=u.currentUser,f=l[e];return o(n?Object(i.h)(a.T.blocked,"red"):{urlToken:d,userUrlToken:e,expect:t,API:{types:c,endpoint:"members/".concat(e,"/followers"),method:t?"POST":"DELETE"},UPDATE:{request:{users:Object(r.a)({},e,{isFollowing:t})},failure:{users:Object(r.a)({},e,f)},success:function(t){return{users:Object(r.a)({},e,t)}}}})}}},function(e,t,n){"use strict";var r=n(13),o=n(14),i=n(15),a=n(16),c=n(9),s=n(2),u=n(3),l=n.n(u),d=n(1),f=n(28),p=n(176),h=n(367),b=n(865),v=n(1112),m=n(854),g=n(947),y=n(850),O=(n(1145),n(899)),j=n(886);function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var C=function(e){Object(i.a)(n,e);var t=w(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.user;f.a.setModule(this,{module:"UserItem"},{card:{content:{type:"User",member_hash_id:e.id,follower_num:e.followerCount}}})}},{key:"renderRewardDetails",value:function(){var e=this.props.user,t=e.amount,n=e.rewardCreated;return Object(s.c)("div",{className:"ContentItem-rewardDetails",children:[Object(s.b)("p",{className:"ContentItem-rewardAmount",children:t&&"赞赏了 ¥".concat(t/100)}),Object(s.b)("p",{className:"ContentItem-rewardTime",children:Object(p.toRelativeString)(n)})]})}},{key:"render",value:function(){var e=this.props,t=e.user,n=t.urlToken,r=t.isFollowed,o=t.isFollowing,i=t.answerCount,a=t.articlesCount,c=t.followerCount,u=t.id,l=t.isOrg,d=e.user,f=e.type,p=e.isRewardList,w=e.action,C=e.meta,k=e.status,S=e.noTrackCardShow,x=e.onClick,R=e.currentUser,E=!n,_=R&&R.id===u,A=void 0!==w?w:!_&&!E&&Object(s.b)(b.a,{id:d.urlToken,type:f||d.type,preset:b.a.PRESETS.primary,gender:d.gender,isFollowing:o,onClick:x}),T=void 0!==C?C:E||Object(s.b)(g.a,{user:d}),N=void 0!==k?Object(s.b)(y.d,{children:k}):!E&&Object(s.c)(y.d,{children:[Boolean(i)&&"".concat(Object(h.formatNumber)(i)," 回答"),Boolean(a)&&"".concat(Object(h.formatNumber)(a)," 文章"),Boolean(c)&&"".concat(Object(h.formatNumber)(c)," 关注者")]}),I="//www.zhihu.com/".concat(l?"org":"people","/").concat(n||u),M=this.props.userLinkV2;return Object(s.b)(y.e,{data:d,link:I,image:M?Object(s.b)(O.a,{className:"UserItem-avatar",avatarProps:{size:60},user:d,target:"_blank"}):Object(s.b)(m.a,{className:"UserItem-avatar",avatar:!0,avatarProps:{size:60},user:d,target:"_blank"}),title:Object(s.c)("div",{className:"UserItem-title",children:[M?Object(s.b)(j.a,{user:d,target:"_blank"}):Object(s.b)(m.a,{user:d,target:"_blank"}),Object(s.b)(v.a,{isFollowing:o,isFollowed:r})]}),meta:Object(s.c)("div",{children:[T,N]}),noTrackCardShow:S,extra:p?this.renderRewardDetails():A})}}]),n}(d.Component);C.contextTypes={authRequired:l.a.func},C.propTypes={action:l.a.node,status:l.a.node,meta:l.a.node,type:l.a.string,isRewardList:l.a.bool,onClick:l.a.func,currentUser:l.a.object},t.a=C},,function(e,t,n){"use strict";var r=n(841);t.a=function(e,t,n,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:" ",a=e.getSelection(),c=e.getCurrentContent(),s=c.createEntity(t,n,o),u=s.getLastCreatedEntityKey(),l=r.EditorState.set(e,{currentContent:s}),d=(l=r.AtomicBlockUtils.insertAtomicBlock(l,u,i)).getCurrentContent(),f=d.getBlockMap(),p=a.getStartKey(),h=d.getBlockForKey(p);h!==f.first()&&0===h.getLength()&&(f=f.delete(p),d=d.merge({blockMap:f}));var b=l.getSelection().getFocusKey(),v=d.getBlockForKey(b);return v!==f.last()&&0===v.getLength()&&(f=f.delete(b),d=d.merge({blockMap:f,selectionAfter:r.SelectionState.createEmpty(d.getKeyAfter(b))})),l=r.EditorState.set(l,{currentContent:d}),r.EditorState.forceSelection(l,l.getCurrentContent().getSelectionAfter())}},function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var r=n(20),o=n.n(r),i=n(21),a=n.n(i),c=n(22),s=n.n(c),u=n(23),l=n.n(u),d=n(17),f=n.n(d),p=n(33),h=n.n(p),b=n(43),v=n.n(b),m=n(1),g=n.n(m),y=n(18),O=function(e){return g.a.createElement(y.a,e,g.a.createElement("path",{d:"M16.296 7h.697A1.01 1.01 0 0 1 18 8.003v10.995c0 .554-.45 1.003-1.007 1.003H4.007A1.01 1.01 0 0 1 3 18.998V8.003C3 7.449 3.45 7 4.007 7h12.289zm-.892 11a.6.6 0 0 0 .597-.601V9.601A.597.597 0 0 0 15.405 9H5.596A.599.599 0 0 0 5 9.602v7.797c0 .335.267.601.596.601h9.808zM7 4h13a1 1 0 0 1 1 1v11a1 1 0 0 1-2 0V6.5c0-.5-.5-.5-.5-.5H7a1 1 0 0 1 0-2z",fillRule:"evenodd"}))};O.defaultProps={name:"Size"};var j=O,w=n(5);function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var o=f()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l()(this,n)}}var k=function(e){s()(n,e);var t=C(n);function n(){var e;o()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).handleMouseMove=function(t){1!==t.buttons&&1!==t.which||e.handleChange(t)},e.handleChange=function(t){var n=e.input.value;e.value!==n&&(e.value=n,e.props.onChange&&e.props.onChange(t))},e}return a()(n,[{key:"componentDidMount",value:function(){this.value=this.input.value}},{key:"render",value:function(){var e=this;return Object(w.g)("input",h()({},this.props,{onMouseMove:this.handleMouseMove,onClick:this.handleChange,onKeyDown:this.handleChange,onChange:this.handleChange,ref:function(t){e.input=t}}))}}]),n}(m.Component);function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var o=f()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l()(this,n)}}var x=function(e){s()(n,e);var t=S(n);function n(){return o()(this,n),t.apply(this,arguments)}return a()(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=v()(e,["className"]);return Object(w.g)("div",{className:t},Object(w.g)(j,{center:!0,size:18}),Object(w.g)(k,h()({type:"range",className:"RangeInput",min:"1",max:"2",step:"0.01"},n)),Object(w.g)(j,{center:!0,size:22}))}}]),n}(m.Component)},function(e,t,n){"use strict";n.d(t,"a",(function(){return r.a})),n.d(t,"c",(function(){return b})),n.d(t,"b",(function(){return g})),n.d(t,"d",(function(){return O}));var r=n(1154),o=n(0),i=n(32),a=n(2),c=n(25),s=n(76),u=n.n(s),l=n(73),d=n.n(l),f=n(401),p=["answer","article","post","item"],h=function(e){return e.itemType||p.find((function(t){return e[t]}))},b=function(e){return d()(Object(c.connect)((function(e,t){return{useNewLabels:Object(f.f)(e,t[h(t)])}}))((function(t){var n=t.showLabelInfo,r=void 0===n||n,c=t.showLabels,s=void 0===c||c,l=Object(i.a)(t,["showLabelInfo","showLabels"]),d=h(l),f=l,p=[];return s||p.push("isLabeled"),r||(p.push("labelInfo"),p.push("hermesLabel")),d&&p.length>0&&(f=Object.assign({},f,Object(o.a)({},d,u()(l[d],p)))),Object(a.b)(e,Object.assign({},f))})),e)},v=n(1),m=Object(v.createContext)({showLabelInfo:!0,showLabels:!0}),g=m.Provider,y=m.Consumer,O=function(e){return function(t){var n=Object(a.b)(y,{children:function(n){return Object(a.b)(e,Object.assign({},t,{showLabelProps:n}))}});return d()(n,e)}}},function(e,t,n){"use strict";var r=n(847),o=n(836),i=n(855),a=o.OrderedMap;e.exports=function(e){return e.first()instanceof r?function(e){var t={},n=void 0;return a(e.withMutations((function(e){e.forEach((function(r,o){var a=r.getKey(),c=r.getNextSiblingKey(),s=r.getPrevSiblingKey(),u=r.getChildKeys(),l=r.getParentKey(),d=i();(t[a]=d,c)&&(e.get(c)?e.setIn([c,"prevSibling"],d):e.setIn([a,"nextSibling"],null));s&&(e.get(s)?e.setIn([s,"nextSibling"],d):e.setIn([a,"prevSibling"],null));if(l&&e.get(l)){var f=e.get(l).getChildKeys();e.setIn([l,"children"],f.set(f.indexOf(r.getKey()),d))}else e.setIn([a,"parent"],null),n&&(e.setIn([n.getKey(),"nextSibling"],d),e.setIn([a,"prevSibling"],t[n.getKey()])),n=e.get(a);u.forEach((function(t){e.get(t)?e.setIn([t,"parent"],d):e.setIn([a,"children"],r.getChildKeys().filter((function(e){return e!==t})))}))}))})).toArray().map((function(e){return[t[e.getKey()],e.set("key",t[e.getKey()])]})))}(e):function(e){return a(e.toArray().map((function(e){var t=i();return[t,e.set("key",t)]})))}(e)}},function(e,t,n){"use strict";var r=n(844),o=n(891),i=n(837);function a(e,t,n){var a=t.getCharacterList(),c=n>0?a.get(n-1):void 0,s=n<a.count()?a.get(n):void 0,u=c?c.getEntity():void 0,l=s?s.getEntity():void 0;if(l&&l===u&&"MUTABLE"!==e.__get(l).getMutability()){for(var d,f=function(e,t,n){var r;return o(e,(function(e,t){return e.getEntity()===t.getEntity()}),(function(e){return e.getEntity()===t}),(function(e,t){e<=n&&t>=n&&(r={start:e,end:t})})),"object"!=typeof r&&i(!1),r}(a,l,n),p=f.start,h=f.end;p<h;)d=a.get(p),a=a.set(p,r.applyEntity(d,null)),p++;return t.set("characterList",a)}return t}e.exports=function(e,t){var n=e.getBlockMap(),r=e.getEntityMap(),o={},i=t.getStartKey(),c=t.getStartOffset(),s=n.get(i),u=a(r,s,c);u!==s&&(o[i]=u);var l=t.getEndKey(),d=t.getEndOffset(),f=n.get(l);i===l&&(f=u);var p=a(r,f,d);return p!==f&&(o[l]=p),Object.keys(o).length?e.merge({blockMap:n.merge(o),selectionAfter:t}):e.set("selectionAfter",t)}},function(e,t,n){"use strict";e.exports=function(e,t,n){if(n===e.count())t.forEach((function(t){e=e.push(t)}));else if(0===n)t.reverse().forEach((function(t){e=e.unshift(t)}));else{var r=e.slice(0,n),o=e.slice(n);e=r.concat(t,o).toList()}return e}},function(e,t,n){"use strict";var r=n(847);e.exports=function(e,t){if(!(e instanceof r))return null;var n=e.getNextSiblingKey();if(n)return n;var o=e.getParentKey();if(!o)return null;for(var i=t.get(o);i&&!i.getNextSiblingKey();){var a=i.getParentKey();i=a?t.get(a):null}return i?i.getNextSiblingKey():null}},function(e,t,n){"use strict";var r=n(836),o=n(948),i=n(891),a=r.List,c=r.Repeat,s=r.Record,u=o.thatReturnsTrue,l=s({start:null,end:null}),d=s({start:null,end:null,decoratorKey:null,leaves:null}),f={generate:function(e,t,n){var r=t.getLength();if(!r)return a.of(new d({start:0,end:0,decoratorKey:null,leaves:a.of(new l({start:0,end:0}))}));var o=[],s=n?n.getDecorations(t,e):a(c(null,r)),f=t.getCharacterList();return i(s,h,u,(function(e,t){o.push(new d({start:e,end:t,decoratorKey:s.get(e),leaves:p(f.slice(e,t).toList(),e)}))})),a(o)},getFingerprint:function(e){return e.map((function(e){var t=e.get("decoratorKey");return(null!==t?t+"."+(e.get("end")-e.get("start")):"")+"."+e.get("leaves").size})).join("-")}};function p(e,t){var n=[],r=e.map((function(e){return e.getStyle()})).toList();return i(r,h,u,(function(e,r){n.push(new l({start:e+t,end:r+t}))})),a(n)}function h(e,t){return e===t}e.exports=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var i=function(e){function t(){return r(this,t),o(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getType=function(){return this.get("type")},t.prototype.getMutability=function(){return this.get("mutability")},t.prototype.getData=function(){return this.get("data")},t}((0,n(836).Record)({type:"TOKEN",mutability:"IMMUTABLE",data:Object}));e.exports=i},function(e,t,n){"use strict";var r=n(963),o=n(837),i="֐־׀׃׆׈-׏א-ת׫-ׯװ-ײ׳-״׵-׿߀-߉ߊ-ߪߴ-ߵߺ߻-߿ࠀ-ࠕࠚࠤࠨ࠮-࠯࠰-࠾࠿ࡀ-ࡘ࡜-࡝࡞࡟-࢟‏יִײַ-ﬨשׁ-זּ﬷טּ-לּ﬽מּ﬿נּ-סּ﭂ףּ-פּ﭅צּ-ﭏ",a="؈؋؍؛؜؝؞-؟ؠ-ؿـف-ي٭ٮ-ٯٱ-ۓ۔ەۥ-ۦۮ-ۯۺ-ۼ۽-۾ۿ܀-܍܎܏ܐܒ-ܯ݋-݌ݍ-ޥޱ޲-޿ࢠ-ࢲࢳ-ࣣﭐ-ﮱ﮲-﯁﯂-﯒ﯓ-ﴽ﵀-﵏ﵐ-ﶏ﶐-﶑ﶒ-ﷇ﷈-﷏ﷰ-ﷻ﷼﷾-﷿ﹰ-ﹴ﹵ﹶ-ﻼ﻽-﻾",c=new RegExp("["+"A-Za-zªµºÀ-ÖØ-öø-ƺƻƼ-ƿǀ-ǃǄ-ʓʔʕ-ʯʰ-ʸʻ-ˁː-ˑˠ-ˤˮͰ-ͳͶ-ͷͺͻ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҂Ҋ-ԯԱ-Ֆՙ՚-՟ա-և։ःऄ-हऻऽा-ीॉ-ौॎ-ॏॐक़-ॡ।-॥०-९॰ॱॲ-ঀং-ঃঅ-ঌএ-ঐও-নপ-রলশ-হঽা-ীে-ৈো-ৌৎৗড়-ঢ়য়-ৡ০-৯ৰ-ৱ৴-৹৺ਃਅ-ਊਏ-ਐਓ-ਨਪ-ਰਲ-ਲ਼ਵ-ਸ਼ਸ-ਹਾ-ੀਖ਼-ੜਫ਼੦-੯ੲ-ੴઃઅ-ઍએ-ઑઓ-નપ-રલ-ળવ-હઽા-ીૉો-ૌૐૠ-ૡ૦-૯૰ଂ-ଃଅ-ଌଏ-ଐଓ-ନପ-ରଲ-ଳଵ-ହଽାୀେ-ୈୋ-ୌୗଡ଼-ଢ଼ୟ-ୡ୦-୯୰ୱ୲-୷ஃஅ-ஊஎ-ஐஒ-கங-சஜஞ-டண-தந-பம-ஹா-ிு-ூெ-ைொ-ௌௐௗ௦-௯௰-௲ఁ-ఃఅ-ఌఎ-ఐఒ-నప-హఽు-ౄౘ-ౙౠ-ౡ౦-౯౿ಂ-ಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽಾಿೀ-ೄೆೇ-ೈೊ-ೋೕ-ೖೞೠ-ೡ೦-೯ೱ-ೲം-ഃഅ-ഌഎ-ഐഒ-ഺഽാ-ീെ-ൈൊ-ൌൎൗൠ-ൡ൦-൯൰-൵൹ൺ-ൿං-ඃඅ-ඖක-නඳ-රලව-ෆා-ෑෘ-ෟ෦-෯ෲ-ෳ෴ก-ะา-ำเ-ๅๆ๏๐-๙๚-๛ກ-ຂຄງ-ຈຊຍດ-ທນ-ຟມ-ຣລວສ-ຫອ-ະາ-ຳຽເ-ໄໆ໐-໙ໜ-ໟༀ༁-༃༄-༒༓༔༕-༗༚-༟༠-༩༪-༳༴༶༸༾-༿ཀ-ཇཉ-ཬཿ྅ྈ-ྌ྾-࿅࿇-࿌࿎-࿏࿐-࿔࿕-࿘࿙-࿚က-ဪါ-ာေးျ-ြဿ၀-၉၊-၏ၐ-ၕၖ-ၗၚ-ၝၡၢ-ၤၥ-ၦၧ-ၭၮ-ၰၵ-ႁႃ-ႄႇ-ႌႎႏ႐-႙ႚ-ႜ႞-႟Ⴀ-ჅჇჍა-ჺ჻ჼჽ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፠-፨፩-፼ᎀ-ᎏᎠ-Ᏼᐁ-ᙬ᙭-᙮ᙯ-ᙿᚁ-ᚚᚠ-ᛪ᛫-᛭ᛮ-ᛰᛱ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱ᜵-᜶ᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳាើ-ៅះ-ៈ។-៖ៗ៘-៚ៜ០-៩᠐-᠙ᠠ-ᡂᡃᡄ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᤣ-ᤦᤩ-ᤫᤰ-ᤱᤳ-ᤸ᥆-᥏ᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧀᧁ-ᧇᧈ-ᧉ᧐-᧙᧚ᨀ-ᨖᨙ-ᨚ᨞-᨟ᨠ-ᩔᩕᩗᩡᩣ-ᩤᩭ-ᩲ᪀-᪉᪐-᪙᪠-᪦ᪧ᪨-᪭ᬄᬅ-ᬳᬵᬻᬽ-ᭁᭃ-᭄ᭅ-ᭋ᭐-᭙᭚-᭠᭡-᭪᭴-᭼ᮂᮃ-ᮠᮡᮦ-ᮧ᮪ᮮ-ᮯ᮰-᮹ᮺ-ᯥᯧᯪ-ᯬᯮ᯲-᯳᯼-᯿ᰀ-ᰣᰤ-ᰫᰴ-ᰵ᰻-᰿᱀-᱉ᱍ-ᱏ᱐-᱙ᱚ-ᱷᱸ-ᱽ᱾-᱿᳀-᳇᳓᳡ᳩ-ᳬᳮ-ᳱᳲ-ᳳᳵ-ᳶᴀ-ᴫᴬ-ᵪᵫ-ᵷᵸᵹ-ᶚᶛ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‎ⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℴℵ-ℸℹℼ-ℿⅅ-ⅉⅎ⅏Ⅰ-ↂↃ-ↄↅ-ↈ⌶-⍺⎕⒜-ⓩ⚬⠀-⣿Ⰰ-Ⱞⰰ-ⱞⱠ-ⱻⱼ-ⱽⱾ-ⳤⳫ-ⳮⳲ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵰ⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々〆〇〡-〩〮-〯〱-〵〸-〺〻〼ぁ-ゖゝ-ゞゟァ-ヺー-ヾヿㄅ-ㄭㄱ-ㆎ㆐-㆑㆒-㆕㆖-㆟ㆠ-ㆺㇰ-ㇿ㈀-㈜㈠-㈩㈪-㉇㉈-㉏㉠-㉻㉿㊀-㊉㊊-㊰㋀-㋋㋐-㋾㌀-㍶㍻-㏝㏠-㏾㐀-䶵一-鿌ꀀ-ꀔꀕꀖ-ꒌꓐ-ꓷꓸ-ꓽ꓾-꓿ꔀ-ꘋꘌꘐ-ꘟ꘠-꘩ꘪ-ꘫꙀ-ꙭꙮꚀ-ꚛꚜ-ꚝꚠ-ꛥꛦ-ꛯ꛲-꛷Ꜣ-ꝯꝰꝱ-ꞇ꞉-꞊Ꞌ-ꞎꞐ-ꞭꞰ-Ʇꟷꟸ-ꟹꟺꟻ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꠣ-ꠤꠧ꠰-꠵꠶-꠷ꡀ-ꡳꢀ-ꢁꢂ-ꢳꢴ-ꣃ꣎-꣏꣐-꣙ꣲ-ꣷ꣸-꣺ꣻ꤀-꤉ꤊ-ꤥ꤮-꤯ꤰ-ꥆꥒ-꥓꥟ꥠ-ꥼꦃꦄ-ꦲꦴ-ꦵꦺ-ꦻꦽ-꧀꧁-꧍ꧏ꧐-꧙꧞-꧟ꧠ-ꧤꧦꧧ-ꧯ꧰-꧹ꧺ-ꧾꨀ-ꨨꨯ-ꨰꨳ-ꨴꩀ-ꩂꩄ-ꩋꩍ꩐-꩙꩜-꩟ꩠ-ꩯꩰꩱ-ꩶ꩷-꩹ꩺꩻꩽꩾ-ꪯꪱꪵ-ꪶꪹ-ꪽꫀꫂꫛ-ꫜꫝ꫞-꫟ꫠ-ꫪꫫꫮ-ꫯ꫰-꫱ꫲꫳ-ꫴꫵꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚ꭛ꭜ-ꭟꭤ-ꭥꯀ-ꯢꯣ-ꯤꯦ-ꯧꯩ-ꯪ꯫꯬꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ-豈-舘並-龎ﬀ-ﬆﬓ-ﬗＡ-Ｚａ-ｚｦ-ｯｰｱ-ﾝﾞ-ﾟﾠ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ"+i+a+"]"),s=new RegExp("["+i+a+"]");function u(e){var t=c.exec(e);return null==t?null:t[0]}function l(e){var t=u(e);return null==t?r.NEUTRAL:s.exec(t)?r.RTL:r.LTR}function d(e,t){if(t=t||r.NEUTRAL,!e.length)return t;var n=l(e);return n===r.NEUTRAL?t:n}function f(e,t){return t||(t=r.getGlobalDir()),r.isStrong(t)||o(!1),d(e,t)}var p={firstStrongChar:u,firstStrongCharDir:l,resolveBlockDir:d,getDirection:f,isDirectionLTR:function(e,t){return f(e,t)===r.LTR},isDirectionRTL:function(e,t){return f(e,t)===r.RTL}};e.exports=p},function(e,t,n){"use strict";e.exports={BOLD:{fontWeight:"bold"},CODE:{fontFamily:"monospace",wordWrap:"break-word"},ITALIC:{fontStyle:"italic"},STRIKETHROUGH:{textDecoration:"line-through"},UNDERLINE:{textDecoration:"underline"}}},function(e,t,n){"use strict";e.exports=function(e){var t=e.getSelection(),n=t.getAnchorKey(),r=e.getBlockTree(n),o=t.getStartOffset(),i=!1;return r.some((function(e){return o===e.get("start")?(i=!0,!0):o<e.get("end")&&e.get("leaves").some((function(e){var t=e.get("start");return o===t&&(i=!0,!0)}))})),i}},function(e,t,n){"use strict";var r=n(91)||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var a=n(1195),c=n(927),s=n(1),u=n(42),l=n(1038),d=n(968),f=n(1033),p=n(963),h=n(871),b=n(1209),v=n(969),m=n(1213),g=n(837),y=n(849),O=function(e,t){return e.getAnchorKey()===t||e.getFocusKey()===t},j=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.shouldComponentUpdate=function(e){return this.props.block!==e.block||this.props.tree!==e.tree||this.props.direction!==e.direction||O(e.selection,e.block.getKey())&&e.forceSelection},t.prototype.componentDidMount=function(){var e=this.props.selection,t=e.getEndKey();if(e.getHasFocus()&&t===this.props.block.getKey()){var n=u.findDOMNode(this),r=d.getScrollParent(n),o=v(r),i=void 0;if(r===window){var a=b(n);(i=a.y+a.height-m().height)>0&&window.scrollTo(o.x,o.y+i+10)}else{n instanceof HTMLElement||g(!1),(i=n.offsetHeight+n.offsetTop-(r.offsetHeight+o.y))>0&&l.setTop(r,l.getTop(r)+i+10)}}},t.prototype._renderChildren=function(){var e=this,t=this.props.block,n=t.getKey(),o=t.getText(),i=this.props.tree.size-1,u=O(this.props.selection,n);return this.props.tree.map((function(l,d){var h=l.get("leaves"),b=h.size-1,v=h.map((function(r,l){var f=c.encode(n,d,l),p=r.get("start"),h=r.get("end");return s.createElement(a,{key:f,offsetKey:f,block:t,start:p,selection:u?e.props.selection:null,forceSelection:e.props.forceSelection,text:o.slice(p,h),styleSet:t.getInlineStyleAt(p),customStyleMap:e.props.customStyleMap,customStyleFn:e.props.customStyleFn,isLast:d===i&&l===b})})).toArray(),m=l.get("decoratorKey");if(null==m)return v;if(!e.props.decorator)return v;var g=y(e.props.decorator),O=g.getComponentForKey(m);if(!O)return v;var j=g.getPropsForKey(m),w=c.encode(n,d,0),C=o.slice(h.first().get("start"),h.last().get("end")),k=p.getHTMLDirIfDifferent(f.getDirection(C),e.props.direction);return s.createElement(O,r({},j,{contentState:e.props.contentState,decoratedText:C,dir:k,key:w,entityKey:t.getEntityAt(l.get("start")),offsetKey:w}),v)})).toArray()},t.prototype.render=function(){var e=this.props,t=e.direction,n=e.offsetKey,r=h({"public/DraftStyleDefault/block":!0,"public/DraftStyleDefault/ltr":"LTR"===t,"public/DraftStyleDefault/rtl":"RTL"===t});return s.createElement("div",{"data-offset-key":n,className:r},this._renderChildren())},t}(s.Component);e.exports=j},function(e,t,n){"use strict";e.exports=function(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}},function(e,t,n){"use strict";function r(e,t){return!!t&&(e===t.documentElement||e===t.body)}var o={getTop:function(e){var t=e.ownerDocument;return r(e,t)?t.body.scrollTop||t.documentElement.scrollTop:e.scrollTop},setTop:function(e,t){var n=e.ownerDocument;r(e,n)?n.body.scrollTop=n.documentElement.scrollTop=t:e.scrollTop=t},getLeft:function(e){var t=e.ownerDocument;return r(e,t)?t.body.scrollLeft||t.documentElement.scrollLeft:e.scrollLeft},setLeft:function(e,t){var n=e.ownerDocument;r(e,n)?n.body.scrollLeft=n.documentElement.scrollLeft=t:e.scrollLeft=t}};e.exports=o},function(e,t,n){"use strict";var r=n(1216),o=n(1217),i=n(948),a=new RegExp("\r\n","g"),c={"text/rtf":1,"text/html":1};function s(e){if("file"==e.kind)return e.getAsFile()}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=t,this.types=t.types?o(t.types):[]}return e.prototype.isRichText=function(){return!(!this.getHTML()||!this.getText())||!this.isImage()&&this.types.some((function(e){return c[e]}))},e.prototype.getText=function(){var e;return this.data.getData&&(this.types.length?-1!=this.types.indexOf("text/plain")&&(e=this.data.getData("text/plain")):e=this.data.getData("Text")),e?e.replace(a,"\n"):null},e.prototype.getHTML=function(){if(this.data.getData){if(!this.types.length)return this.data.getData("Text");if(-1!=this.types.indexOf("text/html"))return this.data.getData("text/html")}},e.prototype.isLink=function(){return this.types.some((function(e){return-1!=e.indexOf("Url")||-1!=e.indexOf("text/uri-list")||e.indexOf("text/x-moz-url")}))},e.prototype.getLink=function(){return this.data.getData?-1!=this.types.indexOf("text/x-moz-url")?this.data.getData("text/x-moz-url").split("\n")[0]:-1!=this.types.indexOf("text/uri-list")?this.data.getData("text/uri-list"):this.data.getData("url"):null},e.prototype.isImage=function(){var e=this.types.some((function(e){return-1!=e.indexOf("application/x-moz-file")}));if(e)return!0;for(var t=this.getFiles(),n=0;n<t.length;n++){var o=t[n].type;if(!r.isImage(o))return!1}return!0},e.prototype.getCount=function(){return this.data.hasOwnProperty("items")?this.data.items.length:this.data.hasOwnProperty("mozItemCount")?this.data.mozItemCount:this.data.files?this.data.files.length:null},e.prototype.getFiles=function(){return this.data.items?Array.prototype.slice.call(this.data.items).map(s).filter(i.thatReturnsArgument):this.data.files?Array.prototype.slice.call(this.data.files):[]},e.prototype.hasFiles=function(){return this.getFiles().length>0},e}();e.exports=u},function(e,t,n){"use strict";e.exports=function e(t){if(t instanceof Element){var n=t.getAttribute("data-offset-key");if(n)return n;for(var r=0;r<t.childNodes.length;r++){var o=e(t.childNodes[r]);if(o)return o}}return null}},function(e,t,n){"use strict";(function(t){var r=n(837),o=/\.textClipping$/,i={"text/plain":!0,"text/html":!0,"text/rtf":!0};e.exports=function(e,n){var a=0,c=[];e.forEach((function(s){!function(e,n){if(!t.FileReader||e.type&&!(e.type in i))return void n("");if(""===e.type){var a="";return o.test(e.name)&&(a=e.name.replace(o,"")),void n(a)}var c=new FileReader;c.onload=function(){var e=c.result;"string"!=typeof e&&r(!1),n(e)},c.onerror=function(){n("")},c.readAsText(e)}(s,(function(t){a++,t&&c.push(t.slice(0,5e3)),a==e.length&&n(c.join("\r"))}))}))}}).call(this,n(100))},function(e,t,n){"use strict";var r=n(927),o=n(849);e.exports=function(e,t,n,i,a){var c=o(e.getSelection()),s=r.decode(t),u=s.blockKey,l=e.getBlockTree(u).getIn([s.decoratorKey,"leaves",s.leafKey]),d=r.decode(i),f=d.blockKey,p=e.getBlockTree(f).getIn([d.decoratorKey,"leaves",d.leafKey]),h=l.get("start"),b=p.get("start"),v=l?h+n:null,m=p?b+a:null;if(c.getAnchorKey()===u&&c.getAnchorOffset()===v&&c.getFocusKey()===f&&c.getFocusOffset()===m)return c;var g=!1;if(u===f){var y=l.get("end"),O=p.get("end");g=b===h&&O===y?a<n:b<h}else{g=e.getCurrentContent().getBlockMap().keySeq().skipUntil((function(e){return e===u||e===f})).first()===f}return c.merge({anchorKey:u,anchorOffset:v,focusKey:f,focusOffset:m,isBackward:g})}},function(e,t,n){"use strict";var r=n(925);e.exports=function(e){var t=e.getSelection();return t.isCollapsed()?null:r(e.getCurrentContent(),t)}},function(e,t,n){"use strict";var r=n(851),o=n(837);var i=r.isBrowser("Chrome")?function(e){for(var t=e.cloneRange(),n=[],r=e.endContainer;null!=r;r=r.parentNode){var i=r===e.commonAncestorContainer;i?t.setStart(e.startContainer,e.startOffset):t.setStart(t.endContainer,0);var a,c=Array.from(t.getClientRects());if(n.push(c),i)return n.reverse(),(a=[]).concat.apply(a,n);t.setEndBefore(r)}o(!1)}:function(e){return Array.from(e.getClientRects())};e.exports=i},function(e,t,n){"use strict";var r=n(970),o=n(1040),i=n(1042),a=n(837),c=n(849);function s(e,t,n){var i=t,s=r(i);if(null!=s||e&&(e===i||e.firstChild===i)||a(!1),e===i&&((i=i.firstChild)instanceof Element&&"true"===i.getAttribute("data-contents")||a(!1),n>0&&(n=i.childNodes.length)),0===n){var l=null;if(null!=s)l=s;else{var d=function(e){for(;e.firstChild&&(e.firstChild instanceof Element&&"true"===e.firstChild.getAttribute("data-blocks")||o(e.firstChild));)e=e.firstChild;return e}(i);l=c(o(d))}return{key:l,offset:0}}var f=i.childNodes[n-1],p=null,h=null;if(o(f)){var b=function(e){for(;e.lastChild&&(e.lastChild instanceof Element&&"true"===e.lastChild.getAttribute("data-blocks")||o(e.lastChild));)e=e.lastChild;return e}(f);p=c(o(b)),h=u(b)}else p=c(s),h=u(f);return{key:p,offset:h}}function u(e){var t=e.textContent;return"\n"===t?0:t.length}e.exports=function(e,t,n,o,a,u){var l=n.nodeType===Node.TEXT_NODE,d=a.nodeType===Node.TEXT_NODE;if(l&&d)return{selectionState:i(e,c(r(n)),o,c(r(a)),u),needsRecovery:!1};var f=null,p=null,h=!0;return l?(f={key:c(r(n)),offset:o},p=s(t,a,u)):d?(p={key:c(r(a)),offset:u},f=s(t,n,o)):(f=s(t,n,o),p=s(t,a,u),n===a&&o===u&&(h=!!n.firstChild&&"BR"!==n.firstChild.nodeName)),{selectionState:i(e,f.key,f.offset,p.key,p.offset),needsRecovery:h}}},function(e,t,n){"use strict";var r="\\s|(?![_])"+n(1234).getPunctuation(),o=new RegExp("^(?:"+r+")*(?:['‘’]|(?!"+r+").)*(?:(?!"+r+").)"),i=new RegExp("(?:(?!"+r+").)(?:['‘’]|(?!"+r+").)*(?:"+r+")*$");function a(e,t){var n=t?i.exec(e):o.exec(e);return n?n[0]:e}var c={getBackward:function(e){return a(e,!0)},getForward:function(e){return a(e,!1)}};e.exports=c},function(e,t,n){"use strict";e.exports=function(e,t){var n,r=e.getSelection(),o=r.getStartKey(),i=r.getStartOffset(),a=e.getCurrentContent(),c=o;return t>a.getBlockForKey(o).getText().length-i?(c=a.getKeyAfter(o),n=0):n=i+t,r.merge({focusKey:c,focusOffset:n})}},function(e,t,n){"use strict";var r,o=i||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(91);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=n(844),s=n(860),u=n(847),l=n(964),d=n(926),f=n(856),p=n(836),h=n(836).Set,b=n(1245),v=n(871),m=n(855),g=n(1049),y=n(837),O=n(962),j=f.draft_tree_data_support,w=p.List,C=p.OrderedSet,k=new RegExp("\r","g"),S=new RegExp("\n","g"),x=new RegExp("&nbsp;","g"),R=new RegExp("&#13;?","g"),E=new RegExp("&#8203;?","g"),_=["bold","bolder","500","600","700","800","900"],A=["light","lighter","100","200","300","400"],T={b:"BOLD",code:"CODE",del:"STRIKETHROUGH",em:"ITALIC",i:"ITALIC",s:"STRIKETHROUGH",strike:"STRIKETHROUGH",strong:"BOLD",u:"UNDERLINE"},N=(a(r={},v("public/DraftStyleDefault/depth0"),0),a(r,v("public/DraftStyleDefault/depth1"),1),a(r,v("public/DraftStyleDefault/depth2"),2),a(r,v("public/DraftStyleDefault/depth3"),3),a(r,v("public/DraftStyleDefault/depth4"),4),r),I=["className","href","rel","target","title"],M=["alt","className","height","src","width"],D=void 0,L={text:"",inlines:[],entities:[],blocks:[]},P={children:w(),depth:0,key:"",type:""},z=function(e,t){return"li"===e?"ol"===t?"ordered-list-item":"unordered-list-item":null},B=function(e,t,n){var r=n.filter((function(t){return t.element===e||t.wrapper===e||t.aliasedElements&&t.aliasedElements.some((function(t){return t===e}))})).keySeq().toSet().toArray().sort();switch(r.length){case 0:return"unstyled";case 1:return r[0];default:return function(e,t,n){for(var r=0;r<n.length;r++){var o=n[r](e,t);if(o)return o}return null}(e,t,[z])||"unstyled"}},F=function(e,t,n){var r=e.text.slice(-1),o=t.text.slice(0,1);if("\r"!==r||"\r"!==o||n||(e.text=e.text.slice(0,-1),e.inlines.pop(),e.entities.pop(),e.blocks.pop()),"\r"===r){if(" "===t.text||"\n"===t.text)return e;" "!==o&&"\n"!==o||(t.text=t.text.slice(1),t.inlines.shift(),t.entities.shift())}return{text:e.text+t.text,inlines:e.inlines.concat(t.inlines),entities:e.entities.concat(t.entities),blocks:e.blocks.concat(t.blocks)}},U=function(e){e instanceof HTMLAnchorElement||y(!1);var t=e.protocol;return"http:"===t||"https:"===t||"mailto:"===t},q=function(e){var t=new Array(1);return e&&(t[0]=e),o({},L,{text:" ",inlines:[C()],entities:t})},V=function(){return o({},L,{text:"\n",inlines:[C()],entities:new Array(1)})},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o({},P,e)},K=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{text:"\r",inlines:[C()],entities:new Array(1),blocks:[H({parent:n,key:m(),type:e,depth:Math.max(0,Math.min(4,t))})]}},Q=function e(t,n,r,i,a,c,s,u,l,f){var p=D,h=n.nodeName.toLowerCase(),v=t,m="unstyled",g=!1,y=a&&B(a,i,u),O=o({},L),w=void 0;if("#text"===h){var C=n.textContent,k=C.trim();if(i&&""===k&&n.parentElement){var x=n.parentElement.nodeName.toLowerCase();if("ol"===x||"ul"===x)return{chunk:o({},L),entityMap:t}}return""===k&&"pre"!==a?{chunk:q(l),entityMap:t}:("pre"!==a&&(C=C.replace(S," ")),D=h,{chunk:{text:C,inlines:Array(C.length).fill(r),entities:Array(C.length).fill(l),blocks:[]},entityMap:t})}if(D=h,"br"===h)return"br"!==p||a&&"unstyled"!==y?{chunk:V(),entityMap:t}:{chunk:K("unstyled",s,f),entityMap:t};if("img"===h&&n instanceof HTMLImageElement&&n.attributes.getNamedItem("src")&&n.attributes.getNamedItem("src").value){var R=n,E={};M.forEach((function(e){var t=R.getAttribute(e);t&&(E[e]=t)})),n.textContent="📷",l=d.__create("IMAGE","MUTABLE",E||{})}r=function(e,t,n){var r=T[e];if(r)n=n.add(r).toOrderedSet();else if(t instanceof HTMLElement){var o=t;n=n.withMutations((function(e){var t=o.style.fontWeight,n=o.style.fontStyle,r=o.style.textDecoration;_.indexOf(t)>=0?e.add("BOLD"):A.indexOf(t)>=0&&e.remove("BOLD"),"italic"===n?e.add("ITALIC"):"normal"===n&&e.remove("ITALIC"),"underline"===r&&e.add("UNDERLINE"),"line-through"===r&&e.add("STRIKETHROUGH"),"none"===r&&(e.remove("UNDERLINE"),e.remove("STRIKETHROUGH"))})).toOrderedSet()}return n}(h,n,r),"ul"!==h&&"ol"!==h||(i&&(s+=1),i=h),!j&&"li"===h&&n instanceof HTMLElement&&(s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object.keys(N).some((function(n){e.classList.contains(n)&&(t=N[n])})),t}(n,s));var P=B(h,i,u),z=i&&"li"===a&&"li"===h,H=(!a||j)&&-1!==c.indexOf(h);(z||H)&&(w=(O=K(P,s,f)).blocks[0].key,a=h,g=!j),z&&(m="ul"===i?"unordered-list-item":"ordered-list-item");var Q=n.firstChild;null!=Q&&(h=Q.nodeName.toLowerCase());for(var W=null;Q;){Q instanceof HTMLAnchorElement&&Q.href&&U(Q)?function(){var e=Q,t={};I.forEach((function(n){var r=e.getAttribute(n);r&&(t[n]=r)})),t.url=new b(e.href).toString(),W=d.__create("LINK","MUTABLE",t||{})}():W=void 0;var G=e(v,Q,r,i,a,c,s,u,W||l,j?w:null),Z=G.chunk;v=G.entityMap,O=F(O,Z,j);var Y=Q.nextSibling;!f&&Y&&c.indexOf(h)>=0&&a&&(O=F(O,V())),Y&&(h=Y.nodeName.toLowerCase()),Q=Y}return g&&(O=F(O,K(m,s,f))),{chunk:O,entityMap:v}},W=function(e,t,n,r){e=e.trim().replace(k,"").replace(x," ").replace(R,"").replace(E,"");var i=function(e){var t=e.get("unstyled").element,n=h([]);return e.forEach((function(e){e.aliasedElements&&e.aliasedElements.forEach((function(e){n=n.add(e)})),n=n.add(e.element)})),n.filter((function(e){return e&&e!==t})).toArray().sort()}(n),a=t(e);if(!a)return null;D=null;var c=function(e,t){return t.some((function(t){return-1!==e.indexOf("<"+t)}))}(e,i)?i:["div"],s=Q(r,a,C(),"ul",null,c,-1,n),u=s.chunk,l=s.entityMap;return 0===u.text.indexOf("\r")&&(u={text:u.text.slice(1),inlines:u.inlines.slice(1),entities:u.entities.slice(1),blocks:u.blocks}),"\r"===u.text.slice(-1)&&(u.text=u.text.slice(0,-1),u.inlines=u.inlines.slice(0,-1),u.entities=u.entities.slice(0,-1),u.blocks.pop()),0===u.blocks.length&&u.blocks.push(o({},L,{type:"unstyled",depth:0})),u.text.split("\r").length===u.blocks.length+1&&u.blocks.unshift({type:"unstyled",depth:0}),{chunk:u,entityMap:l}},G=function(e){if(!e||!e.text||!Array.isArray(e.blocks))return null;var t=0,n=e.blocks,r=e.inlines,o=e.entities,i=j?u:s;return e.text.split("\r").reduce((function(e,a,s){a=O(a);var l=n[s],d=t+a.length,f=r.slice(t,d),p=o.slice(t,d),h=w(f.map((function(e,t){var n={style:e,entity:null};return p[t]&&(n.entity=p[t]),c.create(n)})));t=d+1;var b=l.depth,v=l.type,g=l.parent,y=l.key||m(),j=null;if(g){var C=e.cacheRef[g],k=e.contentBlocks[C];if(k.getChildKeys().isEmpty()&&k.getText()){var S=k.getCharacterList(),x=k.getText();j=m();var R=new u({key:j,text:x,characterList:S,parent:g,nextSibling:y});e.contentBlocks.push(R),k=k.withMutations((function(e){e.set("characterList",w()).set("text","").set("children",k.children.push(R.getKey()))}))}e.contentBlocks[C]=k.set("children",k.children.push(y))}var E=new i({key:y,parent:g,type:v,depth:b,text:a,characterList:h,prevSibling:j||(0===s||n[s-1].parent!==g?null:n[s-1].key),nextSibling:s===n.length-1||n[s+1].parent!==g?null:n[s+1].key});return e.contentBlocks.push(E),e.cacheRef[E.key]=s,e}),{cacheRef:{},contentBlocks:[]}).contentBlocks};e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l,r=W(e,t,n,d);if(null==r)return null;var o=r.chunk,i=r.entityMap,a=G(o);return{contentBlocks:a,entityMap:i}}},function(e,t,n){"use strict";var r=n(851),o=n(837),i=r.isBrowser("IE <= 9");e.exports=function(e){var t,n=null;return!i&&document.implementation&&document.implementation.createHTMLDocument&&((t=document.implementation.createHTMLDocument("foo")).documentElement||o(!1),t.documentElement.innerHTML=e,n=t.getElementsByTagName("body")[0]),n}},function(e,t,n){"use strict";var r=n(843),o=n(838),i=(n(870),n(1246)),a=n(849),c={currentBlockContainsLink:function(e){var t=e.getSelection(),n=e.getCurrentContent(),r=n.getEntityMap();return n.getBlockForKey(t.getAnchorKey()).getCharacterList().slice(t.getStartOffset(),t.getEndOffset()).some((function(e){var t=e.getEntity();return!!t&&"LINK"===r.__get(t).getType()}))},getCurrentBlockType:function(e){var t=e.getSelection();return e.getCurrentContent().getBlockForKey(t.getStartKey()).getType()},getDataObjectForLinkURL:function(e){return{url:e.toString()}},handleKeyCommand:function(e,t){switch(t){case"bold":return c.toggleInlineStyle(e,"BOLD");case"italic":return c.toggleInlineStyle(e,"ITALIC");case"underline":return c.toggleInlineStyle(e,"UNDERLINE");case"code":return c.toggleCode(e);case"backspace":case"backspace-word":case"backspace-to-start-of-line":return c.onBackspace(e);case"delete":case"delete-word":case"delete-to-end-of-block":return c.onDelete(e);default:return null}},insertSoftNewline:function(e){var t=r.insertText(e.getCurrentContent(),e.getSelection(),"\n",e.getCurrentInlineStyle(),null),n=o.push(e,t,"insert-characters");return o.forceSelection(n,t.getSelectionAfter())},onBackspace:function(e){var t=e.getSelection();if(!t.isCollapsed()||t.getAnchorOffset()||t.getFocusOffset())return null;var n=e.getCurrentContent(),r=t.getStartKey(),i=n.getBlockBefore(r);if(i&&"atomic"===i.getType()){var a=n.getBlockMap().delete(i.getKey()),s=n.merge({blockMap:a,selectionAfter:t});if(s!==n)return o.push(e,s,"remove-range")}var u=c.tryToRemoveBlockStyle(e);return u?o.push(e,u,"change-block-type"):null},onDelete:function(e){var t=e.getSelection();if(!t.isCollapsed())return null;var n=e.getCurrentContent(),i=t.getStartKey(),a=n.getBlockForKey(i).getLength();if(t.getStartOffset()<a)return null;var c=n.getBlockAfter(i);if(!c||"atomic"!==c.getType())return null;var s=t.merge({focusKey:c.getKey(),focusOffset:c.getLength()}),u=r.removeRange(n,s,"forward");return u!==n?o.push(e,u,"remove-range"):null},onTab:function(e,t,n){var r=t.getSelection(),a=r.getAnchorKey();if(a!==r.getFocusKey())return t;var c=t.getCurrentContent(),s=c.getBlockForKey(a),u=s.getType();if("unordered-list-item"!==u&&"ordered-list-item"!==u)return t;e.preventDefault();var l=c.getBlockBefore(a);if(!l)return t;var d=l.getType();if("unordered-list-item"!==d&&"ordered-list-item"!==d)return t;var f=s.getDepth();if(!e.shiftKey&&f===n)return t;n=Math.min(l.getDepth()+1,n);var p=i(c,r,e.shiftKey?-1:1,n);return o.push(t,p,"adjust-depth")},toggleBlockType:function(e,t){var n=e.getSelection(),i=n.getStartKey(),c=n.getEndKey(),s=e.getCurrentContent(),u=n;if(i!==c&&0===n.getEndOffset()){var l=a(s.getBlockBefore(c));c=l.getKey(),u=u.merge({anchorKey:i,anchorOffset:n.getStartOffset(),focusKey:c,focusOffset:l.getLength(),isBackward:!1})}if(s.getBlockMap().skipWhile((function(e,t){return t!==i})).reverse().skipWhile((function(e,t){return t!==c})).some((function(e){return"atomic"===e.getType()})))return e;var d=s.getBlockForKey(i).getType()===t?"unstyled":t;return o.push(e,r.setBlockType(s,u,d),"change-block-type")},toggleCode:function(e){var t=e.getSelection(),n=t.getAnchorKey(),r=t.getFocusKey();return t.isCollapsed()||n!==r?c.toggleBlockType(e,"code-block"):c.toggleInlineStyle(e,"CODE")},toggleInlineStyle:function(e,t){var n=e.getSelection(),i=e.getCurrentInlineStyle();if(n.isCollapsed())return o.setInlineStyleOverride(e,i.has(t)?i.remove(t):i.add(t));var a,c=e.getCurrentContent();return a=i.has(t)?r.removeInlineStyle(c,n,t):r.applyInlineStyle(c,n,t),o.push(e,a,"change-inline-style")},toggleLink:function(e,t,n){var i=r.applyEntity(e.getCurrentContent(),t,n);return o.push(e,i,"apply-entity")},tryToRemoveBlockStyle:function(e){var t=e.getSelection(),n=t.getAnchorOffset();if(t.isCollapsed()&&0===n){var o=t.getAnchorKey(),i=e.getCurrentContent(),a=i.getBlockForKey(o),c=i.getFirstBlock();if(a.getLength()>0&&a!==c)return null;var s=a.getType(),u=i.getBlockBefore(o);if("code-block"===s&&u&&"code-block"===u.getType()&&0!==u.getLength())return null;if("unstyled"!==s)return r.setBlockType(i,t,"unstyled")}return null}};e.exports=c},function(e,t,n){"use strict";var r=n(971),o=n(965),i=n(851),a=i.isPlatform("Mac OS X"),c=i.isPlatform("Windows"),s=a&&i.isBrowser("Firefox < 29"),u=r.hasCommandModifier,l=r.isCtrlKeyCommand;function d(e){return a&&e.altKey||l(e)}e.exports=function(e){switch(e.keyCode){case 66:return u(e)?"bold":null;case 68:return l(e)?"delete":null;case 72:return l(e)?"backspace":null;case 73:return u(e)?"italic":null;case 74:return u(e)?"code":null;case 75:return!c&&l(e)?"secondary-cut":null;case 77:case 79:return l(e)?"split-block":null;case 84:return a&&l(e)?"transpose-characters":null;case 85:return u(e)?"underline":null;case 87:return a&&l(e)?"backspace-word":null;case 89:return l(e)?c?"redo":"secondary-paste":null;case 90:return function(e){return u(e)?e.shiftKey?"redo":"undo":null}(e)||null;case o.RETURN:return"split-block";case o.DELETE:return function(e){return c&&e.shiftKey?null:d(e)?"delete-word":"delete"}(e);case o.BACKSPACE:return function(e){return u(e)&&a?"backspace-to-start-of-line":d(e)?"backspace-word":"backspace"}(e);case o.LEFT:return s&&u(e)?"move-selection-to-start-of-block":null;case o.RIGHT:return s&&u(e)?"move-selection-to-end-of-block":null;default:return null}}},function(e,t,n){"use strict";var r={stringify:function(e){return"_"+String(e)},unstringify:function(e){return e.slice(1)}};e.exports=r},,function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"…";return e.length>t?e.slice(0,t)+n:e}function o(e,t){for(var n,r=0,o="",i=e.length,a=0;a<i&&((n=e[a]).charCodeAt(0)<128?r+=1:r+=2,o+=n,!(r>=t-1));a+=1);return o}n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return c}));var i=null;function a(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"…",c=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"undefined"==typeof document?t=o(n=e.replace(/<.+?>/g,""),r):((i=i||document.createElement("div")).textContent=e,t=o(n=i.textContent.replace(/<.+?>/g,""),r));var s=!1;return t!==n&&(s=!0,t=t.slice(0,t.length-a.length),t+=a),c?{output:t,truncated:s}:t}function c(e){return/\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F]/g.test(e)}},function(e,t,n){"use strict";var r=n(40),o=n(1),i=n(35),a=n.n(i);t.a=function(e){var t=Object(o.useState)((function(){return a.a.get(e)})),n=Object(r.a)(t,2),i=n[0],c=n[1];return[i,Object(o.useCallback)((function(t){a.a.set(e,t),c(t)}),[e])]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),a=n(1149);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u=function(e){function t(){var e,n,r;c(this,t);for(var o=arguments.length,i=Array(o),u=0;u<o;u++)i[u]=arguments[u];return n=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={inView:!1},r.node=null,r.handleNode=function(e){r.node&&(0,a.unobserve)(r.node),r.node=e,r.observeNode(),r.props.innerRef&&r.props.innerRef(e)},r.handleChange=function(e){r.setState({inView:e}),r.props.onChange&&r.props.onChange(e)},s(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidUpdate",value:function(e,t){e.rootMargin===this.props.rootMargin&&e.root===this.props.root&&e.threshold===this.props.threshold||((0,a.unobserve)(this.node),this.observeNode()),t.inView!==this.state.inView&&this.state.inView&&this.props.triggerOnce&&((0,a.unobserve)(this.node),this.node=null)}},{key:"componentWillUnmount",value:function(){this.node&&((0,a.unobserve)(this.node),this.node=null)}},{key:"observeNode",value:function(){if(this.node){var e=this.props,t=e.threshold,n=e.root,r=e.rootMargin,o=e.rootId;(0,a.observe)(this.node,this.handleChange,{threshold:t,root:n,rootMargin:r},o)}}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.render,o=e.tag,a=(e.innerRef,e.triggerOnce,e.threshold,e.root,e.rootId,e.rootMargin,function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["children","render","tag","innerRef","triggerOnce","threshold","root","rootId","rootMargin"])),c=this.state.inView;return i.createElement(o,r({},a,{ref:this.handleNode}),"function"==typeof n?n(c):null,"function"==typeof t?t(c):t)}}]),t}(i.Component);u.defaultProps={tag:"div",threshold:0,triggerOnce:!1},t.default=u},function(e,t,n){"use strict";n.d(t,"a",(function(){return Y}));var r=n(77),o=n.n(r),i=n(57),a=n.n(i),c=n(33),s=n.n(c),u=n(43),l=n.n(u),d=n(1),f=n.n(d),p=n(3),h=n.n(p),b=n(173),v=n(235),m=n.n(v);var g=function(e){return e.length?function(t,n){var r=this;return e.reverse().reduce((function(e,t){return t.call(r,e,n)}),t)}:m.a},y=n(239),O=n(11),j=n.n(O),w=n(1077),C=n.n(w),k=n(876),S=/<p><br><\/p>/g,x=function(e){return e?e.replace(S,'<p class="ztext-empty-paragraph"><br /></p>'):e},R=n(852),E=n(1019),_=n(880),A=n(7),T=n(877),N=n(929),I=n(5),M=function(e){var t=e.className,n=e.html;return n?Object(I.g)("span",{className:"LinkCard-richText ".concat(t),dangerouslySetInnerHTML:{__html:"<object>".concat(n,"</object>")}}):null},D=function(e){var t=e.data,n=t.title,r=t.content,o=t.desc,i=t.image,a=t.ratio,c=t.isVideo,s=t.url;return Object(I.g)(f.a.Fragment,null,Object(I.g)("span",{className:"LinkCard-contents"},Object(I.g)(N.c,{twoLine:!r},n),Object(I.g)(M,{className:"LinkCard-excerpt",html:r}),Object(I.g)(M,{className:"LinkCard-desc",html:o}),!r&&!o&&Object(I.g)(N.b,{url:s})),Object(I.g)(N.a,{url:i,ratio:a,isVideo:c}))},L=(n(930),function(e){if(Object(T.b)(e.url))return Object(I.g)(T.a,s()({},e,{className:j()("old",e.className)}));var t=Object(d.useMemo)((function(){return function(e){var t={};if(e.data){var n=Object(A.camelizeKeys)(JSON.parse(e.data)),r=n.source,o=void 0===r?{}:r,i=n.display,a=void 0===i?{}:i,c=n.zaData,s=void 0===c?{}:c,u=a.cardOpenUrl,l=a.title,d=a.content,f=a.desc,p=a.image||{};t={source:o,url:u,title:l,content:d,desc:f,image:p.imageUrl,ratio:p.ratio,isVideo:p.isVideo,zaAttachInfo:s.attachInfo}}return Object.assign({},t,{},e,{title:e.text||t.title,image:t.image||e.image})}(e)}),[e]),n=t.source,r=t.target,o=t.title,i=t.url,a=t.zaAttachInfo;return Object(I.g)(_.a,{notCommerce:!0,target:r,text:o,url:i,"data-za-attach-info":a,className:j()("static",{zvideo:"ZVIDEO"===(null==n?void 0:n.contentType)})},Object(I.g)(D,{data:t}))}),P=n(848),z=/<a\b([^>]*data-draft-type="link-card"[^>]*)>(.*?)<\/a>/g,B=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.newLinkCardAb,r=t.linkCardInfo;return e?e.replace(z,(function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=Object(P.e)(t,{decodeValue:!0}),a=i.target,c=void 0===a?"_blank":a,u=i.href,l=void 0===u?"":u,d=i["data-image"],f=i["data-image-width"],p=i["data-image-height"],h=i["data-entity-type"],b=i["data-entity-data"],v=i["data-size"],m=o.replace(/<[^>]*>/g,"");m=Object(P.b)(m),l.match(/https:\/\/www.zhihu.com\/zvideo\/(\d+)$/)&&!m&&(m="知乎视频");var g=["1","2","3"].includes(n),y=g?r?L:_.a:E.a;return Object(R.renderToStaticMarkup)(Object(I.g)(y,s()({text:m,url:l,target:c,image:d,imageWidth:f,imageHeight:p,entityType:h,entityData:Object(P.f)(b),size:v},g&&{newLinkCardAb:n},r&&{data:r[l]})))})):e},F=n(1017),U=/<a\b([^>]*data-draft-type="file-link-card"[^>]*)>(.*?)<\/a>/g,q=function(e){return e?e.replace(U,(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=Object(P.e)(t,{decodeValue:!0}),o=r.href,i=void 0===o?"":o,a=r["data-file-type"],c=r["data-file-extension"],s=r["data-file-size"],u=r["data-file-source"],l=Object(P.b)(n);return Object(R.renderToStaticMarkup)(Object(I.g)(F.a,{href:i,name:l,type:a,extension:c,size:s,source:u}))})):e},V=n(882),H=(n(999),n(576),[x]),K=Object(d.forwardRef)((function(e,t){var n,r=e.as,o=e.tag,i=e.className,a=e.html,c=e.clearBoth,u=void 0!==c&&c,d=e.richContentKey,p=e.root,h=e.Portal,b=e.useHooks,v=l()(e,["as","tag","className","html","clearBoth","richContentKey","root","Portal","useHooks"]),m=C()(H);b(p);var g=null!==(n=null!=r?r:o)&&void 0!==n?n:"div";return Object(I.g)(f.a.Fragment,null,h&&Object(I.g)(h,{root:p}),Object(I.g)(g,s()({key:d||a,ref:t,className:j()("RichText","ztext",i,{"RichText--clearBoth":u}),dangerouslySetInnerHTML:{__html:m(a)}},v)))}));K.propTypes={as:h.a.string,tag:h.a.string,html:h.a.string.isRequired,clearBoth:h.a.bool,ref:h.a.func,Portal:h.a.func,useHooks:h.a.func},K.defaultProps={useHooks:m.a};var Q=f.a.memo(K),W=n(1014),G=n(934),Z=function(e){var t=e.onRef,n=e.htmlProcessors,r=e.newLinkCardAb,i=e.linkCardInfo,c=e.shouldUseArticleCard,u=e.articleLinkCardProps,p=e.zvideoLinkCardProps,h=e.adLinkCardProps,v=e.mcnLinkCardProps,m=e.mkSkuLinkCardProps,O=e.html,j=e.sourceId,w=e.shouldShowCatalog,C=e.shouldFoldCatalog,S=e.referenceLinkProps,x=e.lazyLoadImageProps,R=l()(e,["onRef","htmlProcessors","newLinkCardAb","linkCardInfo","shouldUseArticleCard","articleLinkCardProps","zvideoLinkCardProps","adLinkCardProps","mcnLinkCardProps","mkSkuLinkCardProps","html","sourceId","shouldShowCatalog","shouldFoldCatalog","referenceLinkProps","lazyLoadImageProps"]),E=h||{},_=E.parentType,A=E.parentId,T=Object(d.useState)(null),N=a()(T,2),M=N[0],D=N[1],L=Object(b.f)();Object(W.b)(M),Object(W.e)(M,S),Object(W.a)(M),Object(W.f)(M),Object(W.g)(M,p,i),Object(W.c)(M,x);var P=["1","2","3"].includes(r),z=g([].concat(o()(n),[Object(V.a)(),B,q,k.a])),F=P?!i&&Object(I.g)(G.f,{zvideoLinkCardProps:p,root:M,newLinkCardAb:r}):Object(I.g)(f.a.Fragment,null,c&&Object(I.g)(G.b,s()({},u,{root:M})),Object(I.g)(G.h,s()({},p,{root:M})));return Object(I.g)(f.a.Fragment,null,w&&C&&Object(I.g)(G.c,{root:M}),F,Object(W.d)({root:M,mcnLinkCardProps:v,contentType:_,token:A}),Object(I.g)(G.a,s()({},h,{root:M})),Object(I.g)(G.e,s()({},m,{root:M})),Object(I.g)(G.g,{root:M}),Object(I.g)(Q,s()({ref:Object(d.useCallback)(Object(y.a)(D,t),[]),html:z(O,{sourceId:j,theme:L,shouldShowCatalog:w,shouldFoldCatalog:C,newLinkCardAb:r,linkCardInfo:i})},R)))};Z.propTypes={html:h.a.string.isRequired,onRef:h.a.oneOfType([h.a.func,h.a.object]),htmlProcessors:h.a.array,newLinkCardAb:h.a.string,linkCardInfo:h.a.object},Z.defaultProps={shouldUseArticleCard:!1,htmlProcessors:[]};var Y=f.a.memo(Z)},function(e,t,n){"use strict";n.d(t,"a",(function(){return ee}));var r=n(20),o=n.n(r),i=n(21),a=n.n(i),c=n(22),s=n.n(c),u=n(23),l=n.n(u),d=n(17),f=n.n(d),p=n(43),h=n.n(p),b=n(1),v=n.n(b),m=n(3),g=n.n(m),y=n(11),O=n.n(y),j=n(150),w=n(234),C=n(255),k=n(244),S=n(161),x=n(215),R=n(74),E=n(802),_=n(5);function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var o=f()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l()(this,n)}}var T=function(e){s()(n,e);var t=A(n);function n(){var e;o()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).handleVideoPosterChange=function(){e.props.onVideoPosterChange(e.input.files[0])},e}return a()(n,[{key:"render",value:function(){var e=this;return Object(_.g)("form",null,Object(_.g)("div",{className:"VideoCoverFileInput"},Object(_.g)("div",{className:"VideoCoverFile-uploader"},Object(_.g)("div",{className:"VideoCoverFile-uploader-icon"},Object(_.g)(E.a,{size:70})),Object(_.g)("div",{className:"VideoCoverFile-uploader-text"},"选择要上传的图片"),Object(_.g)("div",{className:"VideoCoverFile-uploader-tip"},"支持 jpg，png 格式，建议分辨率 1280*720"),Object(_.g)("input",{type:"file",className:"VideoCoverFileInput-input",accept:"image/png,image/jpeg",ref:function(t){e.input=t},onChange:this.handleVideoPosterChange,onClick:function(){return e.input.value=null}}))))}}]),n}(v.a.Component);T.propTypes={onVideoPosterChange:g.a.func.isRequired},T.defaultProps={onVideoPosterChange:function(){}};var N=n(917),I=n(1064),M=n.n(I),D=n(1025),L=n(30);function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var o=f()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l()(this,n)}}var z=function(e){s()(n,e);var t=P(n);function n(){var e;o()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={range:1,image:e.props.image},e.handleSave=function(){var t=e.editorEl.getImage(),n=e.props.image;t&&t.toBlob(e.handleUploadBlob,n.type)},e.handleUploadBlob=function(t){e.props.onUploadImage(t,"avatar")},e.handleResetUpload=function(){e.setState({range:1,image:""}),e.props.onResetUpload()},e}return a()(n,[{key:"render",value:function(){var e=this,t=this.props.image,n=this.state.range;return Object(_.g)("div",{className:"VideoCoverCrop"},Object(_.g)(M.a,{ref:function(t){e.editorEl=t},image:t,width:340,height:208,border:[0,20],color:[246,246,246,.9],scale:parseFloat(n)}),Object(_.g)(D.a,{className:"VideoCoverCrop-range",value:n,onChange:function(t){return e.setState({range:t.target.value})}}),Object(_.g)("div",{className:"VideoCoverCrop-uplaodImgFooter"},Object(_.g)(L.c,{preset:"primary",onClick:this.handleResetUpload},"重新上传"),Object(_.g)(L.c,{color:"blue",preset:"primary",onClick:this.handleSave},"保存")))}}]),n}(v.a.Component);z.propTypes={image:g.a.oneOfType([g.a.string,g.a.object]).isRequired,onResetUpload:g.a.func.isRequired,onUploadImage:g.a.func.isRequired};var B={name:"12qah06",styles:"display:block;width:100%;height:100%;object-fit:cover;"},F={name:"1rwvvfg",styles:"width:100%;display:flex;flex-direction:row;margin-top:30px;& button{flex:1;}"},U={name:"8mg22s",styles:"margin-right:20px;"};function q(e){var t=e.image,n=e.file,r=e.onResetUpload,o=e.onUploadImage;return Object(_.g)("div",null,Object(_.g)("img",{src:t,css:B}),Object(_.g)("div",{css:F},Object(_.g)(L.c,{preset:"primary",onClick:r,css:U},"重新上传"),Object(_.g)(L.c,{color:"blue",preset:"primary",onClick:function(){return o(n)}},"保存")))}var V=n(28);function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var o=f()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l()(this,n)}}var K=function(e){s()(n,e);var t=H(n);function n(){var e;o()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).handleSelect=function(t){t.preventDefault();var n=e.props.setTab;V.a.trackEvent(t.target,{id:2181}),n(1)},e}return a()(n,[{key:"render",value:function(){var e=this.props,t=e.curTabId,n=e.setTab;return Object(_.g)("ul",{className:"VideoCoverEditor-tabs"},Object(_.g)("li",{className:O()("VideoCoverEditor-tabItem",{active:0===t}),onClick:function(){return n(0)}},"上传封面"),Object(_.g)("li",{className:O()("VideoCoverEditor-tabItem",{active:1===t}),onClick:this.handleSelect},"选择封面"))}}]),n}(v.a.Component);function Q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var o=f()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l()(this,n)}}K.propTypes={curTabId:g.a.number.isRequired,setTab:g.a.func.isRequired};var W=function(e){s()(n,e);var t=Q(n);function n(){return o()(this,n),t.apply(this,arguments)}return a()(n,[{key:"render",value:function(){return Object(_.g)("div",{className:"VideoCoverPickerPending"},Object(_.g)("p",null,"视频处理中..."),Object(_.g)("p",null,"暂无系统封面，请使用上传封面"),Object(_.g)(L.c,{className:"VideoCoverPickerPending-nowUpdate",color:"blue",preset:"primary",onClick:this.props.backTab},"现在上传"))}}]),n}(v.a.Component);W.propTypes={backTab:g.a.func.isRequired};var G=n(1109),Z=n(1091),Y=n(376);function J(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var o=f()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l()(this,n)}}var $=function(e){s()(n,e);var t=J(n);function n(){var e;o()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={curPicIndex:0,thumbs:[]},e.handleCoverClick=function(t){e.setState({curPicIndex:t})},e.handleSubmit=function(t){t.preventDefault();var n=e.state.curPicIndex,r=e.props,o=r.items,i=r.onUploadPoster;V.a.trackEvent(t.target,{id:2234});var a=!o.length;i(e.list.children[n].children[0].src,a)},e}return a()(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.video;Object(G.h)(t).then((function(t){e.setState({thumbs:t})}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.curPicIndex,r=t.thumbs;return Object(_.g)("div",{className:"VideoCoverPicker-coverSelect"},0===r.length?Object(_.g)("div",{className:"VideoCoverPicker-coverList VideoCoverPicker-empty"},Array.from(Array(9)).map((function(e,t){return Object(_.g)("div",{className:"VideoCoverPicker-coverItem",key:t})})),Object(_.g)(Y.a,null)):Object(_.g)("div",{className:"VideoCoverPicker-coverList",ref:function(t){return e.list=t}},r.slice(0,9).map((function(t,r){return Object(_.g)("div",{className:O()("VideoCoverPicker-coverItem",{actived:n===r}),onClick:function(){return e.handleCoverClick(r)},key:r},Object(_.g)("img",{src:t.url}),Object(_.g)(Z.a,{shown:n!==r}))}))),Object(_.g)(L.c,{onClick:this.handleSubmit,className:"VideoCoverPicker-coverSelectBtn",color:"blue",preset:"primary"},"确定"))}}]),n}(v.a.Component);function X(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var o=f()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l()(this,n)}}$.propTypes={items:g.a.array.isRequired,onUploadPoster:g.a.func.isRequired};var ee=function(e){s()(n,e);var t=X(n);function n(){var e;o()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={editorShown:!1,cropShown:!1,file:null,dataUrl:"",curTabId:0,errorMsg:""},e.renderTitle=function(){var t=e.state.curTabId;return Object(_.g)(K,{curTabId:t,setTab:e.setTab})},e.setTab=function(t){e.setState({curTabId:t})},e.showEditor=function(){e.setState({editorShown:!0})},e.hideEditor=function(){e.setState({editorShown:!1})},e.handleVideoPosterChange=function(t){if(t.size>10485760)return e.setState({errorMsg:"请上传不超过 10M 的图片"},(function(){e.resetErrorMsg()})),void e.resetUpload();Object(k.a)(t).then((function(n){var r=window.URL.createObjectURL(n),o=new Image;o.onload=function(){o.width<640||o.height<360?(e.setState({errorMsg:"请上传宽度不小于 640px，高度不小于 360px 的图片"},(function(){e.resetErrorMsg()})),e.resetUpload()):e.setState({cropShown:!0,file:t,dataUrl:r})},o.src=r}))},e.resetUpload=function(){e.setState({cropShown:!1})},e.resetErrorMsg=function(){setTimeout((function(){e.setState({errorMsg:""})}),2400)},e.uploadImage=function(t){return Object(C.a)(t).then((function(t){var n=t.src;e.uploadVideoPoster(n)})).catch((function(){e.setState({errorMsg:"上传封面图片失败"},(function(){e.resetErrorMsg()}))}))},e.uploadVideoPoster=function(t,n){if(n)return Object(j.loadImage)(t).then((function(t){var n=document.createElement("canvas"),r=n.getContext("2d");n.width=t.width,n.height=t.height,r.drawImage(t,0,0,t.width,t.height),n.toBlob(e.uploadImage,"image/jpeg")}));t=Object(j.imgUrl)(t,""),(0,e.props.onVideoPosterChange)(t),e.resetUpload(),e.hideEditor()},e.handleUploadImage=function(){var t;e.load("https://lens.zhihu.com/report?msg=upload_cover",{catch:function(){return null}}),(t=e).uploadImage.apply(t,arguments).then((function(){e.shouldRetry=!1}))},e}return a()(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.thumbnail,r=t.needUploadThumbnail,o=t.uploading,i=t.id,a=t.changedVideoPoster,c=t.instantUpload;r&&n&&this.uploadVideoPoster(n,!n.startsWith("http")),!1!==o||a||c||(this.shouldRetry=!0,this.cts=new S.a,this.token=this.cts.token,Object(S.b)((function(){return e.load("https://lens.zhihu.com/api/v4/videos/".concat(i,"/default_cover")).then((function(t){if(!t.algorithm_cover_url)return Promise.reject("has no smart cover");e.shouldRetry&&e.uploadVideoPoster(t.algorithm_cover_url,!1)}))}),{times:10,delay:3e3,shouldRetry:function(){return e.shouldRetry},cancellationToken:this.token}))}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.changedVideoPoster,n=e.needUploadThumbnail;t&&!n&&(this.shouldRetry=!1)}},{key:"componentWillUnmount",value:function(){this.cts&&this.cts.cancel();var e=this.state.dataUrl;e&&window.URL.revokeObjectURL(e)}},{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.errorMessage,o=h()(n,["errorMessage"]);return fetch(e,Object.assign({},o,{headers:Object.assign({},o.headers,{Accept:"application/json","X-Requested-With":"Fetch"}),credentials:"include"})).then((function(e){return e.json().catch((function(){return{}})).then((function(t){if(!e.ok)throw t;return t}))})).catch((function(){if(n.catch)return n.catch();t.setState({errorMsg:r||"上传封面失败"},(function(){t.resetErrorMsg()}))}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.editorShown,r=t.cropShown,o=t.file,i=t.dataUrl,a=t.curTabId,c=t.errorMsg,s=t.covers,u=void 0===s?[]:s,l=this.props,d=l.triggerClassName,f=l.coverButtonText,p=l.uploading,h=l.upload,b=l.originVideo,v=l.useCoverCrop,m=l.zvideoId,g=l.id,y=(null==h?void 0:h.file)||b,j="video/mp4"===(null==y?void 0:y.type),C=v?z:q;return Object(_.g)(N.a,null,Object(_.g)("div",{className:"VideoCoverEditor"},Object(_.g)(w.a,{className:O()(d,"Video-uploadPosterButton"),zaText:!0,zaType:"Button",zaBlock:"VideoUploadPoster",extra:{mediaInfo:{attachmentZvideoId:m,videoInfo:{videoId:g}}},onClick:this.showEditor},Object(_.g)("p",null,f)),n&&Object(_.g)(R.b,{className:"VideoCoverEditor-Modal",title:j&&this.renderTitle(),onClose:this.hideEditor},0===a&&(r?Object(_.g)(C,{file:o,image:i,onResetUpload:this.resetUpload,onUploadImage:this.handleUploadImage}):Object(_.g)(T,{onVideoPosterChange:this.handleVideoPosterChange})),1===a&&j&&(p?Object(_.g)(W,{backTab:function(){e.setState({curTabId:0})}}):Object(_.g)($,{items:u,video:y,onUploadPoster:function(){e.load("https://lens.zhihu.com/report?msg=choose_cover",{catch:function(){return null}}),e.uploadVideoPoster.apply(e,arguments).then((function(){e.shouldRetry=!1}))}})))),Object(_.g)(x.a,{notification:{key:c,text:c,theme:"red"},delay:2400}))}}]),n}(b.Component);ee.propTypes={onVideoPosterChange:g.a.func.isRequired,coverButtonText:g.a.string,useCoverCrop:g.a.bool},ee.defaultProps={onVideoPosterChange:function(){},coverButtonText:"上传视频封面",useCoverCrop:!0}},function(e,t,n){"use strict";var r=n(20),o=n.n(r),i=n(21),a=n.n(i),c=n(22),s=n.n(c),u=n(23),l=n.n(u),d=n(17),f=n.n(d),p=n(1),h=n(5);function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var o=f()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l()(this,n)}}var v=function(e){s()(n,e);var t=b(n);function n(){return o()(this,n),t.apply(this,arguments)}return a()(n,[{key:"render",value:function(){return Object(h.g)("svg",{width:"30",height:"30",viewBox:"0 0 66 66",xmlns:"http://www.w3.org/2000/svg",className:"CircleLoadingBar","aria-hidden":"true"},Object(h.g)("g",null,Object(h.g)("circle",{className:"path",fill:"none",strokeWidth:"6",strokeLinecap:"round",cx:"33",cy:"33",r:"30"})))}}]),n}(p.Component);t.a=v},,function(e,t,n){var r=n(580),o=n(262),i=n(260),a=n(93),c=n(209),s=n(261),u=n(259),l=n(327),d=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(c(e)&&(a(e)||"string"==typeof e||"function"==typeof e.splice||s(e)||l(e)||i(e)))return!e.length;var t=o(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(u(e))return!r(e).length;for(var n in e)if(d.call(e,n))return!1;return!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stripHTML=t.truncateHTML=t.parseTag=t.parseTagGroup=t.parseAttrs=t.TAG_RE=t.TAG_RE_TEMPLATE=void 0;var r=n(1134);Object.defineProperty(t,"TAG_RE_TEMPLATE",{enumerable:!0,get:function(){return r.TAG_RE_TEMPLATE}}),Object.defineProperty(t,"TAG_RE",{enumerable:!0,get:function(){return r.TAG_RE}}),Object.defineProperty(t,"parseAttrs",{enumerable:!0,get:function(){return r.parseAttrs}}),Object.defineProperty(t,"parseTagGroup",{enumerable:!0,get:function(){return r.parseTagGroup}}),Object.defineProperty(t,"parseTag",{enumerable:!0,get:function(){return r.parseTag}}),Object.defineProperty(t,"truncateHTML",{enumerable:!0,get:function(){return r.truncateHTML}}),Object.defineProperty(t,"stripHTML",{enumerable:!0,get:function(){return r.stripHTML}})},function(e,t,n){var r=n(998),o=n(209);e.exports=function(e,t){var n=-1,i=o(e)?Array(e.length):[];return r(e,(function(e,r,o){i[++n]=t(e,r,o)})),i}},function(e,t,n){e.exports=function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}e=e&&e.hasOwnProperty("default")?e.default:e,t=t&&t.hasOwnProperty("default")?t.default:t,n=n&&n.hasOwnProperty("default")?n.default:n;var i=function(e){var t="undefined"==typeof DOMParser?null:new DOMParser;return t?t.parseFromString(e,"text/html"):null},a=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if("text/html"===r.type){r.getAsString((function(e){var n=i(e).querySelector("img");n&&n.src&&t(n.src)}));break}}},c=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&c.return&&c.return()}finally{if(o)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=!("undefined"==typeof window||"undefined"==typeof navigator||!("ontouchstart"in window||navigator.msMaxTouchPoints>0)),d="undefined"!=typeof File,f={touch:{react:{down:"onTouchStart",mouseDown:"onMouseDown",drag:"onTouchMove",drop:"onTouchEnd",move:"onTouchMove",mouseMove:"onMouseMove",up:"onTouchEnd",mouseUp:"onMouseUp"},native:{down:"touchstart",mouseDown:"mousedown",drag:"touchmove",drop:"touchend",move:"touchmove",mouseMove:"mousemove",up:"touchend",mouseUp:"mouseup"}},desktop:{react:{down:"onMouseDown",drag:"onDragOver",drop:"onDrop",move:"onMouseMove",up:"onMouseUp"},native:{down:"mousedown",drag:"dragStart",drop:"drop",move:"mousemove",up:"mouseup"}}},p=l?f.touch:f.desktop,h="undefined"!=typeof window&&window.devicePixelRatio?window.devicePixelRatio:1,b=function(e){function i(){var e,t,n;r(this,i);for(var c=arguments.length,u=Array(c),l=0;l<c;l++)u[l]=arguments[l];return t=n=o(this,(e=i.__proto__||Object.getPrototypeOf(i)).call.apply(e,[this].concat(u))),n.state={drag:!1,my:null,mx:null,image:{x:.5,y:.5}},n.handleMouseDown=function(e){(e=e||window.event).preventDefault(),n.setState({drag:!0,mx:null,my:null})},n.handleMouseUp=function(){n.state.drag&&(n.setState({drag:!1}),n.props.onMouseUp())},n.handleMouseMove=function(e){if(e=e||window.event,!1!==n.state.drag){var t=e.targetTouches?e.targetTouches[0].pageX:e.clientX,r=e.targetTouches?e.targetTouches[0].pageY:e.clientY,o={mx:t,my:r},i=n.props.rotate;if(i=(i%=360)<0?i+360:i,n.state.mx&&n.state.my){var a=n.state.mx-t,c=n.state.my-r,u=n.state.image.width*n.props.scale,l=n.state.image.height*n.props.scale,d=n.getCroppingRect(),f=d.x,p=d.y;f*=u,p*=l;var h=function(e){return e*(Math.PI/180)},b=Math.cos(h(i)),v=Math.sin(h(i)),m=p+-a*v+c*b,g={x:(f+a*b+c*v)/u+1/n.props.scale*n.getXScale()/2,y:m/l+1/n.props.scale*n.getYScale()/2};n.props.onPositionChange(g),o.image=s({},n.state.image,g)}n.setState(o),n.props.onMouseMove(e)}},n.handleDragOver=function(e){(e=e||window.event).preventDefault()},n.handleDrop=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.event;if(e.stopPropagation(),e.preventDefault(),e.dataTransfer){var t=e.dataTransfer,r=t.files,o=t.items;r&&r.length?(n.props.onDropFile(e),n.loadImageFile(r[0])):o&&o.length&&a(o,(function(e){return n.loadImage(e)}))}},n.setCanvas=function(e){n.canvas=e},o(n,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,t.Component),u(i,[{key:"isVertical",value:function(){return this.props.rotate%180!=0}},{key:"getBorders",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.border;return Array.isArray(e)?e:[e,e]}},{key:"getDimensions",value:function(){var e=this.props,t=e.width,n=e.height,r=e.rotate,o=e.border,i={},a=this.getBorders(o),s=c(a,2),u=s[0],l=s[1],d=t,f=n;return this.isVertical()?(i.width=f,i.height=d):(i.width=d,i.height=f),i.width+=2*u,i.height+=2*l,{canvas:i,rotate:r,width:t,height:n,border:o}}},{key:"getImage",value:function(){var e=this.getCroppingRect(),t=this.state.image;e.x*=t.resource.width,e.y*=t.resource.height,e.width*=t.resource.width,e.height*=t.resource.height;var n=document.createElement("canvas");this.isVertical()?(n.width=e.height,n.height=e.width):(n.width=e.width,n.height=e.height);var r=n.getContext("2d");return r.translate(n.width/2,n.height/2),r.rotate(this.props.rotate*Math.PI/180),r.translate(-n.width/2,-n.height/2),this.isVertical()&&r.translate((n.width-n.height)/2,(n.height-n.width)/2),r.drawImage(t.resource,-e.x,-e.y),n}},{key:"getImageScaledToCanvas",value:function(){var e=this.getDimensions(),t=e.width,n=e.height,r=document.createElement("canvas");return this.isVertical()?(r.width=n,r.height=t):(r.width=t,r.height=n),this.paintImage(r.getContext("2d"),this.state.image,0,1),r}},{key:"getXScale",value:function(){var e=this.props.width/this.props.height,t=this.state.image.width/this.state.image.height;return Math.min(1,e/t)}},{key:"getYScale",value:function(){var e=this.props.height/this.props.width,t=this.state.image.height/this.state.image.width;return Math.min(1,e/t)}},{key:"getCroppingRect",value:function(){var e=this.props.position||{x:this.state.image.x,y:this.state.image.y},t=1/this.props.scale*this.getXScale(),n=1/this.props.scale*this.getYScale(),r={x:e.x-t/2,y:e.y-n/2,width:t,height:n},o=0,i=1-r.width,a=0,c=1-r.height;return(t>1||n>1)&&(o=-r.width,i=1,a=-r.height,c=1),s({},r,{x:Math.max(o,Math.min(r.x,i)),y:Math.max(a,Math.min(r.y,c))})}},{key:"isDataURL",value:function(e){return null!==e&&!!e.match(/^\s*data:([a-z]+\/[a-z]+(;[a-z-]+=[a-z-]+)?)?(;base64)?,[a-z0-9!$&',()*+;=\-._~:@/?%\s]*\s*$/i)}},{key:"loadImage",value:function(e){d&&e instanceof File?this.loadImageFile(e):"string"==typeof e&&this.loadImageURL(e)}},{key:"loadImageURL",value:function(e){var t=new Image;t.onload=this.handleImageReady.bind(this,t),t.onerror=this.props.onLoadFailure,!this.isDataURL(e)&&this.props.crossOrigin&&(t.crossOrigin=this.props.crossOrigin),t.src=e}},{key:"loadImageFile",value:function(e){var t=this,n=new FileReader;n.onload=function(e){return t.loadImageURL(e.target.result)},n.readAsDataURL(e)}},{key:"componentDidMount",value:function(){var e=n.findDOMNode(this.canvas).getContext("2d");if(this.props.image&&this.loadImage(this.props.image),this.paint(e),document){var t=p.native;document.addEventListener(t.move,this.handleMouseMove,!1),document.addEventListener(t.up,this.handleMouseUp,!1),l&&(document.addEventListener(t.mouseMove,this.handleMouseMove,!1),document.addEventListener(t.mouseUp,this.handleMouseUp,!1))}}},{key:"componentWillUnmount",value:function(){if(document){var e=p.native;document.removeEventListener(e.move,this.handleMouseMove,!1),document.removeEventListener(e.up,this.handleMouseUp,!1),l&&(document.removeEventListener(e.mouseMove,this.handleMouseMove,!1),document.removeEventListener(e.mouseUp,this.handleMouseUp,!1))}}},{key:"componentDidUpdate",value:function(e,t){var r=n.findDOMNode(this.canvas),o=r.getContext("2d");o.clearRect(0,0,r.width,r.height),this.paint(o),this.paintImage(o,this.state.image,this.props.border),e.image===this.props.image&&e.width===this.props.width&&e.height===this.props.height&&e.position===this.props.position&&e.scale===this.props.scale&&e.rotate===this.props.rotate&&t.my===this.state.my&&t.mx===this.state.mx&&t.image.x===this.state.image.x&&t.image.y===this.state.image.y||this.props.onImageChange()}},{key:"handleImageReady",value:function(e){var t=this.getInitialSize(e.width,e.height);t.resource=e,t.x=.5,t.y=.5,this.setState({drag:!1,image:t},this.props.onImageReady),this.props.onLoadSuccess(t)}},{key:"getInitialSize",value:function(e,t){var n=void 0,r=void 0,o=this.getDimensions();return o.height/o.width>t/e?r=e*((n=this.getDimensions().height)/t):n=t*((r=this.getDimensions().width)/e),{height:n,width:r}}},{key:"componentWillReceiveProps",value:function(e){(e.image&&this.props.image!==e.image||this.props.width!==e.width||this.props.height!==e.height)&&this.loadImage(e.image)}},{key:"paintImage",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:h;if(t.resource){var o=this.calculatePosition(t,n);e.save(),e.translate(e.canvas.width/2,e.canvas.height/2),e.rotate(this.props.rotate*Math.PI/180),e.translate(-e.canvas.width/2,-e.canvas.height/2),this.isVertical()&&e.translate((e.canvas.width-e.canvas.height)/2,(e.canvas.height-e.canvas.width)/2),e.scale(r,r),e.globalCompositeOperation="destination-over",e.drawImage(t.resource,o.x,o.y,o.width,o.height),e.restore()}}},{key:"calculatePosition",value:function(e,t){e=e||this.state.image;var n=this.getBorders(t),r=c(n,2),o=r[0],i=r[1],a=this.getCroppingRect(),s=e.width*this.props.scale,u=e.height*this.props.scale,l=-a.x*s,d=-a.y*u;return this.isVertical()?(l+=i,d+=o):(l+=o,d+=i),{x:l,y:d,height:u,width:s}}},{key:"paint",value:function(e){e.save(),e.scale(h,h),e.translate(0,0),e.fillStyle="rgba("+this.props.color.slice(0,4).join(",")+")";var t=this.props.borderRadius,n=this.getDimensions(),r=this.getBorders(n.border),o=c(r,2),i=o[0],a=o[1],s=n.canvas.height,u=n.canvas.width;t=Math.max(t,0),t=Math.min(t,u/2-i,s/2-a),e.beginPath(),function(e,t,n,r,o,i){if(0===i)e.rect(t,n,r,o);else{var a=r-i,c=o-i;e.translate(t,n),e.arc(i,i,i,Math.PI,1.5*Math.PI),e.lineTo(a,0),e.arc(a,i,i,1.5*Math.PI,2*Math.PI),e.lineTo(r,c),e.arc(a,c,i,2*Math.PI,.5*Math.PI),e.lineTo(i,o),e.arc(i,c,i,.5*Math.PI,Math.PI),e.translate(-t,-n)}}(e,i,a,u-2*i,s-2*a,t),e.rect(u,0,-u,s),e.fill("evenodd"),e.restore()}},{key:"render",value:function(){var e=this.getDimensions(),n={width:e.canvas.width,height:e.canvas.height,cursor:this.state.drag?"grabbing":"grab"},r={width:e.canvas.width*h,height:e.canvas.height*h,style:s({},n,this.props.style)};return r[p.react.down]=this.handleMouseDown,r[p.react.drag]=this.handleDragOver,this.props.disableDrop||(r[p.react.drop]=this.handleDrop),l&&(r[p.react.mouseDown]=this.handleMouseDown),t.createElement("canvas",s({ref:this.setCanvas},r))}}]),i}();return b.propTypes={scale:e.number,rotate:e.number,image:e.oneOfType([e.string].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(d?[e.instanceOf(File)]:[]))),border:e.oneOfType([e.number,e.arrayOf(e.number)]),borderRadius:e.number,width:e.number,height:e.number,position:e.shape({x:e.number,y:e.number}),color:e.arrayOf(e.number),style:e.object,crossOrigin:e.oneOf(["","anonymous","use-credentials"]),onDropFile:e.func,onLoadFailure:e.func,onLoadSuccess:e.func,onImageReady:e.func,onImageChange:e.func,onMouseUp:e.func,onMouseMove:e.func,onPositionChange:e.func,disableDrop:e.bool},b.defaultProps={disableDrop:!1,scale:1,rotate:0,border:25,borderRadius:0,width:200,height:200,color:[0,0,0,.5],style:{},onDropFile:function(){},onLoadFailure:function(){},onLoadSuccess:function(){},onImageReady:function(){},onImageChange:function(){},onMouseUp:function(){},onMouseMove:function(){},onPositionChange:function(){}},b}(n(3),n(1),n(42))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(412),o=n(58);function i(e,t){Object(o.a)(2,arguments);var n=Object(r.a)(e,t)/6e4;return n>0?Math.floor(n):Math.ceil(n)}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=i(n(419)),o=i(n(420));function i(e){return e&&e.__esModule?e:{default:e}}var a=function(e){if(204===e.status)return!1;if("0"===e.headers.get("content-length"))return!1;var t=e.headers.get("content-type");return t&&-1!==t.indexOf("application/json")},c=function(e){return e.ok?a(e)?e.json():e.text():a(e)?e.json().then((function(t){return Promise.reject(Object.assign({},t,{status:e.status}))})):e.text().then((function(t){return Promise.reject(new o.default(e,{text:t}))}))},s=(0,r.default)(fetch),u=function(e,t){return s(e,t).then(c)};t.default=u},function(e,t,n){var r=n(1068),o=n(581),i=n(1069),a=n(903),c=n(952),s=n(1072),u=Math.ceil;e.exports=function(e,t){var n=(t=void 0===t?" ":o(t)).length;if(n<2)return n?r(t,e):t;var l=r(t,u(e/c(t)));return a(t)?i(s(l),0,e).join(""):l.slice(0,e)}},function(e,t){var n=Math.floor;e.exports=function(e,t){var r="";if(!e||t<1||t>9007199254740991)return r;do{t%2&&(r+=e),(t=n(t/2))&&(e+=e)}while(t);return r}},function(e,t,n){var r=n(411);e.exports=function(e,t,n){var o=e.length;return n=void 0===n?o:n,!t&&n>=o?e:r(e,t,n)}},function(e,t,n){var r=n(582)("length");e.exports=r},function(e,t){var n="[\\ud800-\\udfff]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",o="\\ud83c[\\udffb-\\udfff]",i="[^\\ud800-\\udfff]",a="(?:\\ud83c[\\udde6-\\uddff]){2}",c="[\\ud800-\\udbff][\\udc00-\\udfff]",s="(?:"+r+"|"+o+")"+"?",u="[\\ufe0e\\ufe0f]?"+s+("(?:\\u200d(?:"+[i,a,c].join("|")+")[\\ufe0e\\ufe0f]?"+s+")*"),l="(?:"+[i+r+"?",r,a,c,n].join("|")+")",d=RegExp(o+"(?="+o+")|"+l+u,"g");e.exports=function(e){for(var t=d.lastIndex=0;d.test(e);)++t;return t}},function(e,t,n){var r=n(1073),o=n(903),i=n(1074);e.exports=function(e){return o(e)?i(e):r(e)}},function(e,t){e.exports=function(e){return e.split("")}},function(e,t){var n="[\\ud800-\\udfff]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",o="\\ud83c[\\udffb-\\udfff]",i="[^\\ud800-\\udfff]",a="(?:\\ud83c[\\udde6-\\uddff]){2}",c="[\\ud800-\\udbff][\\udc00-\\udfff]",s="(?:"+r+"|"+o+")"+"?",u="[\\ufe0e\\ufe0f]?"+s+("(?:\\u200d(?:"+[i,a,c].join("|")+")[\\ufe0e\\ufe0f]?"+s+")*"),l="(?:"+[i+r+"?",r,a,c,n].join("|")+")",d=RegExp(o+"(?="+o+")|"+l+u,"g");e.exports=function(e){return e.match(d)||[]}},function(e,t,n){var r=n(1076),o=n(321),i=n(409);e.exports=function(e){return function(t,n,a){return a&&"number"!=typeof a&&o(t,n,a)&&(n=a=void 0),t=i(t),void 0===n?(n=t,t=0):n=i(n),a=void 0===a?t<n?1:-1:i(a),r(t,n,a,e)}}},function(e,t){var n=Math.ceil,r=Math.max;e.exports=function(e,t,o,i){for(var a=-1,c=r(n((t-e)/(o||1)),0),s=Array(c);c--;)s[i?c:++a]=e,e+=o;return s}},function(e,t,n){var r=n(584)(!0);e.exports=r},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(372);function o(e){var t,n=e.isOrg,o=e.badgeV2,i=e.badge;if(!n)return!1;var a=Object(r.e)(o||i);return Boolean(null===(t=a.identity)||void 0===t?void 0:t.length)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(2),o=n(11),i=n.n(o);function a(e){var t=e.className;return Object(r.b)("span",{className:i()("ActivityItem-StickyMark",t),children:"置顶"})}},function(e,t,n){"use strict";var r=n(32),o=n(13),i=n(14),a=n(15),c=n(16),s=n(9),u=n(2),l=n(3),d=n.n(l),f=n(1),p=n(19),h=n(25),b=n(11),v=n.n(b),m=n(177),g=n(30),y=n(976),O=n(1016),j=n(374),w=n(28),C=n(102),k=n(24),S=n(151);function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var o=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var R=function(e){Object(a.a)(n,e);var t=x(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).load=function(){var t=e.props,n=t.dispatch,r=t.id;n(Object(S.A)(r))},e.track=function(){var t=e.props.topic;e.hoverCardElement&&t&&(w.a.setModule(e.hoverCardElement,{module:"TopicItem"},{card:{content:{type:"Topic",token:t.id,item_num:t.questionsCount,follower_num:t.followersCount}}}),w.a.trackCardShow(e.hoverCardElement))},e.handleFollow=e.context.authRequired((function(){var t=!e.props.topic.isFollowing;w.a.trackEvent(e.hoverCardElement,{action:t?"Follow":"UnFollow",element:"Button"});var n=e.props,r=n.dispatch,o=n.id;r(Object(S.M)(o))}),k.V.follow),e.handleOpen=function(){e.load(),e.track()},e}return Object(i.a)(n,[{key:"isTopicReady",value:function(){var e=this.props.topic||{},t=e.questionsCount,n=e.followersCount,r=e.bestAnswersCount;return!(void 0===t&&void 0===n&&void 0===r)}},{key:"render",value:function(){var e=this,t=this.props,n=t.toggler,o=t.topic,i=t.id,a=t.isLoading,c=t.onRef,s=Object(r.a)(t,["toggler","topic","id","isLoading","onRef"]),l=o||{},d=l.name,f=l.introduction,p=l.questionsCount,h=l.followersCount,b=l.bestAnswersCount,v=l.avatarUrl,m=l.isFollowing,w=l.headerCard,k="//www.zhihu.com/topic/".concat(i),S=w&&w.avatarUrl||v;return Object(u.c)(O.b,Object.assign({toggler:n,preventCloseOnTarget:!0,isLoading:a,onOpen:this.handleOpen,size:"large"},s,{onRef:function(t){c&&"function"==typeof c&&c(t),e.hoverCardElement=t},children:[Object(u.b)(O.a,{title:Object(u.b)("a",{target:"_blank",rel:"noopener noreferrer",href:k,children:d}),avatarUrl:S,avatarFit:"cover"}),f&&Object(u.b)("div",{children:Object(u.b)(j.a,{className:"HoverCard-description",html:f})}),Object(u.c)("div",{children:[this.isTopicReady()&&Object(u.c)(y.a,{children:[Object(u.b)(y.a.Item,{tag:C.a,preset:"plain",a:!0,to:"".concat(k,"/questions"),name:"问题",value:p,target:"_blank"}),Object(u.b)(y.a.Item,{tag:C.a,preset:"plain",a:!0,to:"".concat(k,"/top-answers"),name:"精华",value:b,target:"_blank"}),Object(u.b)(y.a.Item,{tag:C.a,preset:"plain",a:!0,to:"".concat(k,"/followers"),name:"关注者",target:"_blank",value:h})]}),Object(u.b)("div",{className:"HoverCard-buttons",children:o&&Object(u.b)(g.c,{preset:"primary",color:m?"grey":"blue",onClick:this.handleFollow,children:m?"已关注":"关注话题"})})]})]}))}}]),n}(f.Component);R.contextTypes={authRequired:d.a.func};var E=Object(h.connect)((function(e,t){var n=t.id,r=e.entities.topics,o=e.loading.local;return{topic:r[n],isLoading:Boolean(o["topic/".concat(n)])}}))(R),_=n(49);function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var o=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var T=function(e){Object(a.a)(n,e);var t=A(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e,t=this.props,n=t.isMobile,o=t.topic,i=o.name,a=o.avatarUrl,c=o.id,s=o.headerCard,l=t.avatar,d=t.avatarProps,f=t.noHoverCard,p=t.noLink,h=t.style,b=t.className,g=t.children,y=(t.dispatch,t.trackEvent,Object(r.a)(t,["isMobile","topic","avatar","avatarProps","noHoverCard","noLink","style","className","children","dispatch","trackEvent"])),O=void 0===f?n:f,j=s&&s.avatarUrl||a;e=l?Object(u.b)(m.a,Object.assign({className:"TopicLink-avatar",url:j,alt:i},d)):g||i,p||O||(e=Object(u.b)(E,{toggler:e,id:c}));var w=p?"span":"a";return Object(u.b)(w,Object.assign({style:h,className:v()("TopicLink",b),href:"//www.zhihu.com/topic/".concat(c),target:"_blank"},y,{children:e}))}}]),n}(f.Component);T.propTypes={topic:d.a.object.isRequired,user:d.a.object,avatar:d.a.bool,avatarProps:d.a.object,noHoverCard:d.a.bool,noLink:d.a.bool,style:d.a.object,className:d.a.string,children:d.a.node},T.defaultProps={avatar:!1,noLink:!1};t.a=Object(p.compose)(Object(h.connect)((function(e){return{isMobile:Object(_.d)(e,{includeTablet:!0})}})))(T)},function(e,t,n){"use strict";var r=n(2),o=n(1),i=n(25),a=n(66),c=n(401),s=function(){return Object(r.b)("div",{className:"LabelContainer-loading"})};t.a=function(e){var t=e.useOldLabels,u=e.item,l=e.abnormalDetailProps,d=e.collapseReasonProps,f=e.showDeleteButton,p=e.inviter,h=u.type,b=u.id,v=u.isLabeled,m=Object(i.useDispatch)(),g=Object(i.useSelector)((function(e){return t||l||d?{}:f?{thankInviterInfo:p}:Object(c.c)(e,u)})),y=Object(a.d)((function(){return n.e(7).then(n.bind(null,2623))}));return Object(o.useEffect)((function(){v&&!g&&m(Object(c.e)(h,b))}),[m,h,b,v,g]),y?Object(r.b)(y,Object.assign({data:g},e)):v&&!t?Object(r.b)(s,{}):null}},function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var r=n(20),o=n.n(r),i=n(21),a=n.n(i),c=n(22),s=n.n(c),u=n(23),l=n.n(u),d=n(17),f=n.n(d),p=n(33),h=n.n(p),b=n(43),v=n.n(b),m=n(1),g=n(11),y=n.n(g),O=n(234),j=n(30),w=(n(949),n(5));function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var o=f()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l()(this,n)}}var k=function(e){return"undefined"!=typeof navigator&&/Mac/i.test(navigator.userAgent)?e.replace(/\+/g,""):e.replace("⌘","Ctrl").replace("⌥","Alt").replace("⇧","Shift")},S=function(e){s()(n,e);var t=C(n);function n(){return o()(this,n),t.apply(this,arguments)}return a()(n,[{key:"render",value:function(){var e=this.props,t=e.label,n=e.shortcut,r=e.icon,o=e.isActive,i=e.className,a=e.children,c=v()(e,["label","shortcut","icon","isActive","className","children"]);return Object(w.g)(O.a,h()({as:j.c,zaType:"Button",zaText:t,preset:"plain",className:y()(i,"Editable-control",{"is-active":o}),"aria-label":t},t&&{"data-tooltip":t+(n?" (".concat(k(n),")"):"")},{"data-tooltip-position":"bottom","data-tooltip-will-hide-on-click":!0},c),"function"==typeof r?Object(w.g)(r,null):r,a&&Object(w.g)("span",null,a))}}]),n}(m.Component);S.defaultProps={isActive:!1}},function(e,t,n){"use strict";t.a=function(e){var t=e.getCurrentContent();return t.getBlockMap().filter((function(e){return"atomic"===e.getType()})).map((function(e){var n=e.getEntityAt(0);return n?t.getEntity(n):null})).filter(Boolean)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(13),o=n(14),i=n(15),a=n(16),c=n(9),s=n(2),u=n(3),l=n.n(u),d=n(1),f=n(142),p=n(237);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var b=function(e){Object(i.a)(n,e);var t=h(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={stickyOffset:e.props.offset},e.check=function(){var t;if(null===(t=e.el)||void 0===t?void 0:t.children){var n=e.props.offset,r=n,o=Array.from(e.el.children).map((function(e){var t=window.getComputedStyle(e);return e.offsetHeight+parseInt(t.marginBottom,10)+parseInt(t.marginTop,10)})),i=e.el&&e.el.clientHeight,a=document.documentElement.clientHeight-n;if(e.sticky&&e.sticky.updateHeight(),i>a){var c=i;o.every((function(e){return!(c<a)&&(c-=e,!0)})),r=n-i+c}e.state.stickyOffset!==r&&e.setState({stickyOffset:r})}},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.resizeHandler=Object(f.subscribe)("resize",this.check),this.timeout=setTimeout(this.check)}},{key:"componentWillUnmount",value:function(){this.resizeHandler.unsubscribe(),clearTimeout(this.timeout)}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,r=t.className,o=t.onRef;return Object(s.b)("div",{className:r,ref:o,children:Object(s.b)(p.a,{offset:this.state.stickyOffset,ref:function(t){e.sticky=t},children:Object(s.b)("div",{ref:function(t){e.el=t},children:n})})})}}]),n}(d.Component);b.propTypes={offset:l.a.number,onRef:l.a.func,className:l.a.string},b.defaultProps={offset:0,onRef:function(){},className:""}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(174),o=n(75),i=n(58);function a(e,t){Object(i.a)(2,arguments);var n=Object(o.a)(e),a=Object(r.a)(t);if(isNaN(a))return new Date(NaN);if(!a)return n;var c=n.getDate(),s=new Date(n.getTime());s.setMonth(n.getMonth()+a+1,0);var u=s.getDate();return c>=u?s:(n.setFullYear(s.getFullYear(),s.getMonth(),c),n)}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return u})),n.d(t,"d",(function(){return l})),n.d(t,"c",(function(){return d}));var r=n(0),o=n(7),i=n(10),a=n(6),c=Object(a.a)("club",["GET","JOIN","LEAVE","UPDATE","REQUEST_JOIN"]),s=function(e){return{API:{types:c.GET,method:"GET",endpoint:"clubs/".concat(e),fetchOptions:{credentials:"include"}},schema:i.a.CLUB,meta:{id:e}}},u=function(e){return function(t){return t({API:{types:c.JOIN,method:"POST",endpoint:"clubs/".concat(e,"/join"),fetchOptions:{credentials:"include"}},meta:{id:e}}).then((function(){return t(s(e))}))}},l=function(e,t){return function(n){return n({API:{types:c.REQUEST_JOIN,method:"POST",endpoint:"clubs/".concat(e,"/join_requests"),fetchOptions:{zsEncrypt:!0},body:Object(o.decamelizeKeys)({requestDetail:t})}}).then((function(){return n(s(e))}))}},d=function(e){return function(t,n){var o=n().entities.clubs[e],i=o.joinCount,a=o.isJoined,u=o.loginMask;return t({API:{types:c.LEAVE,method:"DELETE",endpoint:"clubs/".concat(e,"/join"),fetchOptions:{credentials:"include"}},UPDATE:{request:{clubs:Object(r.a)({},e,Object.assign({isJoined:!1},i&&{joinCount:i-1}))},failure:{clubs:Object(r.a)({},e,Object.assign({isJoined:a,loginMask:u},i&&{joinCount:i}))}},meta:{id:e}}).then((function(){return t(s(e))}))}}},function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"e",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return c}));var r=function(e){var t=e.title,n=e.id,r=e.topics,o=e.answerCount,i=e.commentCount,a=e.created,c=e.updatedTime,s=e.visitsCount,u=e.followerCount;return{name:t,url:"https://www.zhihu.com/question/".concat(n),keywords:r.map((function(e){return e.name})).join(","),answerCount:o,commentCount:i,dateCreated:new Date(1e3*a).toISOString(),dateModified:new Date(1e3*c).toISOString(),"zhihu:visitsCount":s,"zhihu:followerCount":u}};function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e&&(t||n)}var i={auto_notif:"auto_notif",header:"header",question_header_card:"question_header_card",force_launch_notif:"force_launch_notif",agree:"agree",disagree:"disagree",comment:"comment",star:"star",comment_list:"comment_list",comment_more:"comment_more",more_answers:"more_answers",bottom:"bottom",capsule:"capsule",follow:"follow",write_answer:"write_answer"},a={expand_answer:"force_launch_notif",expand_answer1:"auto_notif",expand_answer2:"auto_notif",up:"agree",down:"disagree",comment_answer:"comment",collect_answer:"star"},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isClose,n=e.isEvaluate,r=e.isLocked,o=e.isSuggest;return t?"closed":o?"suggested":n?"evaluated":r?"locked":""}},function(e,t,n){"use strict";var r=n(4),o=n(13),i=n(14),a=n(15),c=n(16),s=n(9),u=n(2),l=n(1),d=n.n(l),f=n(11),p=n.n(f),h=n(3),b=n.n(h),v=n(174),m=n(1085),g=n(58);function y(e,t){Object(g.a)(2,arguments);var n=Object(v.a)(t);return Object(m.a)(e,12*n)}var O=n(1119),j=n(75);var w=n(737),C=n(579),k=n(213);var S=n(1392),x=n(1333),R=n(1324),E=n(1393),_=n(1394),A=n(363);function T(e,t){Object(g.a)(2,arguments);var n=Object(j.a)(e),r=Object(j.a)(t);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function N(e){Object(g.a)(1,arguments);var t=Object(j.a)(e),n=t.getDate();return n}var I=n(18),M=function(e){return d.a.createElement(I.a,e,d.a.createElement("path",{d:"M17.782 16.78a.737.737 0 0 1-1.052 0l-4.512-4.249a.758.758 0 0 1 0-1.063L16.73 7.22a.737.737 0 0 1 1.052 0c.29.294.29.77.001 1.063L14 12l3.782 3.716c.29.294.29.77 0 1.063zm-5 0a.737.737 0 0 1-1.052 0L7.218 12.53a.758.758 0 0 1 0-1.063L11.73 7.22a.737.737 0 0 1 1.052 0c.29.294.29.77.001 1.063L9 12l3.782 3.716c.29.294.29.77 0 1.063z",fillRule:"evenodd"}))};M.defaultProps={name:"DoubleArrowLeft"};var D=M,L=n(1118),P=n(834),z=function(e){return d.a.createElement(I.a,e,d.a.createElement("path",{d:"M6.218 16.78a.737.737 0 0 0 1.052 0l4.512-4.249a.758.758 0 0 0 0-1.063L7.27 7.22a.737.737 0 0 0-1.052 0 .759.759 0 0 0-.001 1.063L10 12l-3.782 3.716a.758.758 0 0 0 0 1.063zm5 0a.737.737 0 0 0 1.052 0l4.512-4.249a.758.758 0 0 0 0-1.063L12.27 7.22a.737.737 0 0 0-1.052 0 .759.759 0 0 0-.001 1.063L15 12l-3.782 3.716a.758.758 0 0 0 0 1.063z",fillRule:"evenodd"}))};z.defaultProps={name:"DoubleArrowRight"};var B=z;function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var o=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var U=["日","一","二","三","四","五","六"],q=function(e){Object(a.a)(n,e);var t=F(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={calendarDate:e.props.defaultCalendarDate||(Array.isArray(e.props.value)?e.props.value[0]:e.props.value),hoveringDate:null,now:new Date},e.handlePrevYearClick=function(){var t=y(e.state.calendarDate,-1);e.setState({calendarDate:t}),e.props.onCalendarDateChange(t)},e.handlePrevMonthClick=function(){var t=Object(m.a)(e.state.calendarDate,-1);e.setState({calendarDate:t}),e.props.onCalendarDateChange(t)},e.handleNextMonthClick=function(){var t=Object(m.a)(e.state.calendarDate,1);e.setState({calendarDate:t}),e.props.onCalendarDateChange(t)},e.handleNextYearClick=function(){var t=y(e.state.calendarDate,1);e.setState({calendarDate:t}),e.props.onCalendarDateChange(t)},e.handleDayClick=function(t){e.setState({calendarDate:t}),e.props.onCalendarDateChange(t),e.props.onChange(t)},e.handleDayHover=function(t){e.setState({hoveringDate:t}),e.props.onHover(t)},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.className,o=t.weekStartsOn,i=t.value,a=t.disabledDate,c=t.showToday,s=t.showPrevMonth,l=t.showPrevYear,d=t.showNextMonth,f=t.showNextYear,h=this.state,b=h.calendarDate,m=h.hoveringDate,y=h.now,I=Object(O.a)(function(e){Object(g.a)(1,arguments);var t=Object(j.a)(e);return t.setDate(1),t.setHours(0,0,0,0),t}(b),{weekStartsOn:o}),M=function(e,t){Object(g.a)(1,arguments);var n=t||{},r=n.locale,o=r&&r.options&&r.options.weekStartsOn,i=null==o?0:Object(v.a)(o),a=null==n.weekStartsOn?i:Object(v.a)(n.weekStartsOn);if(!(a>=0&&a<=6))throw new RangeError("weekStartsOn must be between 0 and 6");var c=Object(j.a)(e),s=c.getDay(),u=6+(s<a?-7:0)-(s-a);return c.setHours(0,0,0,0),c.setDate(c.getDate()+u),c}(function(e){Object(g.a)(1,arguments);var t=Object(j.a)(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}(b),{weekStartsOn:o}),z=Object(r.a)(Array(Object(w.a)(M,I)+1)).map((function(e,t){return Object(C.a)(I,t)})).reduce((function(e,t){var n=function(e,t,n){Object(g.a)(2,arguments);var r=Object(O.a)(e,n),o=Object(O.a)(t,n),i=r.getTime()-Object(k.a)(r),a=o.getTime()-Object(k.a)(o);return Math.round((i-a)/6048e5)}(t,I,{weekStartsOn:o});return e[n]=e[n]?[].concat(Object(r.a)(e[n]),[t]):[t],e}),[]),F=z[0].map(S.a),q=Array.isArray(i),V=c;return Object(u.c)("div",{className:p()("Calendar",n,{"Calendar--hasBottomTool":V}),children:[Object(u.c)("div",{className:"Calendar-topTool",children:[l&&Object(u.b)("button",{className:"Calendar-topToolButton Calendar-topToolButton--prevYear",onClick:this.handlePrevYearClick,children:Object(u.b)(D,{size:20,center:!0})}),s&&Object(u.b)("button",{className:"Calendar-topToolButton Calendar-topToolButton--prevMonth",onClick:this.handlePrevMonthClick,children:Object(u.b)(L.a,{size:20,center:!0})}),Object(u.b)("div",{className:"Calendar-topToolDate",children:Object(x.a)(b,"yyyy 年 M 月")}),d&&Object(u.b)("button",{className:"Calendar-topToolButton Calendar-topToolButton--nextMonth",onClick:this.handleNextMonthClick,children:Object(u.b)(P.a,{size:20,center:!0})}),f&&Object(u.b)("button",{className:"Calendar-topToolButton Calendar-topToolButton--nextYear",onClick:this.handleNextYearClick,children:Object(u.b)(B,{size:20,center:!0})})]}),Object(u.c)("table",{className:"Calendar-table",cellSpacing:0,children:[Object(u.b)("thead",{className:"Calendar-thead",children:Object(u.b)("tr",{children:F.map((function(e){return Object(u.b)("th",{className:"Calendar-weekName",children:U[e]},e)}))})}),Object(u.b)("tbody",{children:z.map((function(t,n){return Object(u.b)("tr",{children:t.map((function(t,n){var r=a(t),o=q?Object(R.a)(t,i[0])||Object(R.a)(t,i[1]):Object(R.a)(t,i),c=!1;if(q){var s=Object(E.a)(i),l=Object(_.a)(i);c=Object(A.a)(t,s)>0&&Object(A.a)(l,t)>0}return Object(u.b)("td",{className:p()("Calendar-day",{"is-hovered":Object(R.a)(t,m),"is-today":Object(R.a)(t,y),"is-disabled":r,"is-not-this-month":!T(t,b),"is-input-date":o,"is-in-range":c}),onClick:function(){r||e.handleDayClick(t)},onMouseEnter:function(){r||e.handleDayHover(t)},onMouseLeave:function(){r||e.handleDayHover(null)},children:N(t)},n)}))},n)}))})]}),V&&Object(u.b)("div",{className:"Calendar-bottomTool",children:c&&Object(u.b)("button",{className:"Calendar-todayButton",onClick:function(){return e.handleDayClick(y)},disabled:a(y),children:"今天"})})]})}}]),n}(l.Component);q.defaultProps={weekStartsOn:0,disabledDate:function(){return!1},onChange:function(){return!1},onCalendarDateChange:function(){return!1},onHover:function(){return!1},showToday:!0,showPrevMonth:!0,showPrevYear:!0,showNextMonth:!0,showNextYear:!0},q.propTypes={defaultCalendarDate:b.a.instanceOf(Date),value:b.a.oneOfType([b.a.instanceOf(Date),b.a.arrayOf(b.a.instanceOf(Date))]),weekStartsOn:b.a.number,disabledDate:b.a.func,onChange:b.a.func,onHover:b.a.func,showToday:b.a.bool,showPrevMonth:b.a.bool,showPrevYear:b.a.bool,showNextMonth:b.a.bool,showNextYear:b.a.bool};t.a=q},,function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var r,o=n(20),i=n.n(o),a=n(21),c=n.n(a),s=n(22),u=n.n(s),l=n(23),d=n.n(l),f=n(17),p=n.n(f),h=n(1),b=n.n(h),v=n(11),m=n.n(v),g=n(5);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var o=p()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d()(this,n)}}!function(e){e.BLACK="black",e.WHITE="white"}(r||(r={}));var O=function(e){u()(n,e);var t=y(n);function n(){return i()(this,n),t.apply(this,arguments)}return c()(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.maskClassName,r=e.shown,o=e.background,i=e.children,a=e.fullContent;return Object(g.g)("div",{className:m()("Mask",t,{"Mask-hidden":!r})},Object(g.g)("div",{className:m()("Mask-mask","Mask-mask--".concat(o),n)}),i&&Object(g.g)("div",{className:a?"Mask-content--full":"Mask-content"},i))}}]),n}(b.a.Component);O.defaultProps={shown:!1,background:r.BLACK};var j=O},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(2),o=n(34),i=n(66),a=["answer","question","article","pin","zvideo","club_post","videoanswer"];var c=Object(o.withRouter)((function(e){var t=e.parent.type,o=a.includes(t),c=Object(i.d)((function(){return n.e(16).then(n.bind(null,2618))}),!o),s=Object(i.d)((function(){return n.e(16).then(n.bind(null,2615))}),o),u=o?s:c;return u?Object(r.b)(u,Object.assign({},e)):null}))},function(e,t,n){"use strict";n.d(t,"b",(function(){return i}));var r=n(63),o={400:"请求参数有误",401:"用户认证失败",403:"服务已拒绝",404:"资源不存在",405:"请求方式有误",410:"资源已解散",502:"网关错误",503:"服务无响应",504:"网关超时"},i=function(e){var t;return(null==e||null===(t=e.payload)||void 0===t?void 0:t.message)||(null==e?void 0:e.status)&&o[e.status]||"操作失败"};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r.a.dispatch("ui/showToast",{icon:"fail",text:i(e)})}},function(e,t,n){var r=n(212),o=n(263),i=n(245),a=n(1063),c=n(1096),s=n(218),u=n(1097),l=n(326),d=n(93);e.exports=function(e,t,n){t=t.length?r(t,(function(e){return d(e)?function(t){return o(t,1===e.length?e[0]:e)}:e})):[l];var f=-1;t=r(t,s(i));var p=a(e,(function(e,n,o){return{criteria:r(t,(function(t){return t(e)})),index:++f,value:e}}));return c(p,(function(e,t){return u(e,t,n)}))}},function(e,t,n){var r=n(209);e.exports=function(e,t){return function(n,o){if(null==n)return n;if(!r(n))return e(n,o);for(var i=n.length,a=t?i:-1,c=Object(n);(t?a--:++a<i)&&!1!==o(c[a],a,c););return n}}},function(e,t){e.exports=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}},function(e,t,n){var r=n(1098);e.exports=function(e,t,n){for(var o=-1,i=e.criteria,a=t.criteria,c=i.length,s=n.length;++o<c;){var u=r(i[o],a[o]);if(u)return o>=s?u:u*("desc"==n[o]?-1:1)}return e.index-t.index}},function(e,t,n){var r=n(253);e.exports=function(e,t){if(e!==t){var n=void 0!==e,o=null===e,i=e==e,a=r(e),c=void 0!==t,s=null===t,u=t==t,l=r(t);if(!s&&!l&&!a&&e>t||a&&c&&u&&!s&&!l||o&&c&&u||!n&&u||!i)return 1;if(!o&&!a&&!l&&e<t||l&&n&&i&&!o&&!a||s&&n&&i||!c&&i||!u)return-1}return 0}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return s}));var r=n(4),o=n(1),i=n(19),a=n(25);function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Object(a.useDispatch)(),c=Array.isArray(e),s=c?e:[e];return Object(o.useMemo)((function(){return c?s.map((function(e){return Object(i.bindActionCreators)(e,n)})):Object(i.bindActionCreators)(s[0],n)}),[n].concat(Object(r.a)(s),Object(r.a)(t)))}function s(e){return Object(a.useSelector)(e,a.shallowEqual)}},function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i}));var r=n(954);function o(e){return(t=e,t?t.replace(/\.[^/.]+$/,""):"").slice(0,r.c);var t}function i(e,t){var n=e.title,o=e.description,i=e.categoryFirstLevel,a=e.categorySecondLevelId,c=e.topics,s=e.zvideoType;if(!n)return"视频标题至少 ".concat(r.e," 个字");if(n.length<r.e)return"视频标题至少 ".concat(r.e," 个字");if(n.length>r.d)return"视频标题最多 ".concat(r.d," 个字");if(o.length>r.b)return"视频描述最多 ".concat(r.b," 个字");if(!i)return"请选择所属领域";if(!a)return"请选择所属二级领域";if(!c.length)return"请绑定话题";if(!s)return"请选择类型";if(t){var u=t();if(u)return u}}},function(e,t,n){"use strict";function r(e,t){return!(!e||!t)&&(e.id===t.id&&void 0!==e.id||e.urlToken===t.urlToken&&void 0!==e.urlToken)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r=n(32),o=n(2),i=n(30),a=n(1173),c=function(e){var t=e.onClick,n=e.text,c=Object(r.a)(e,["onClick","text"]);return Object(o.c)(i.c,Object.assign({preset:"link",onClick:t,css:{fontSize:15}},c,{children:[Object(o.b)(a.a,{text:!0,center:!0})," ",n]}))};c.defaultProps={text:"修改"},t.a=c},function(e,t,n){"use strict";t.a=function(e){return e.componentList.filter(Boolean).filter((function(e){var t=e.component;return Boolean(t)})).map((function(e){return e.component}))}},function(e,t,n){"use strict";n.d(t,"animated",(function(){return M}));var r=n(21),o=n.n(r),i=n(57),a=n.n(i),c=n(20),s=n.n(c),u=n(22),l=n.n(u),d=n(23),f=n.n(d),p=n(17),h=n.n(p),b=n(110),v=n.n(b),m=n(1013);n.o(m,"useSpring")&&n.d(t,"useSpring",(function(){return m.useSpring})),n.o(m,"useTransition")&&n.d(t,"useTransition",(function(){return m.useTransition}));var g=n(42),y=n(895),O=n(1105);function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var o=h()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f()(this,n)}}var w=/^--/;function C(e,t){return null==t||"boolean"==typeof t||""===t?"":"number"!=typeof t||0===t||w.test(e)||S.hasOwnProperty(e)&&S[e]?(""+t).trim():t+"px"}var k={};var S={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},x=["Webkit","Ms","Moz","O"];S=Object.keys(S).reduce((function(e,t){return x.forEach((function(n){return e[function(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}(n,t)]=e[t]})),e}),S);var R=/^(matrix|translate|scale|rotate|skew)/,E=/^(translate)/,_=/^(rotate|skew)/,A=function(e,t){return y.s.num(e)&&0!==e?e+t:e},T=function e(t,n){return y.s.arr(t)?t.every((function(t){return e(t,n)})):y.s.num(t)?t===n:parseFloat(t)===n},N=function(e){l()(n,e);var t=j(n);function n(e){var r=e.x,o=e.y,i=e.z,c=v()(e,["x","y","z"]);s()(this,n);var u=[],l=[];return(r||o||i)&&(u.push([r||0,o||0,i||0]),l.push((function(e){return["translate3d(".concat(e.map((function(e){return A(e,"px")})).join(","),")"),T(e,0)]}))),Object(y.l)(c,(function(e,t){if("transform"===t)u.push([e||""]),l.push((function(e){return[e,""===e]}));else if(R.test(t)){if(delete c[t],y.s.und(e))return;var n=E.test(t)?"px":_.test(t)?"deg":"";u.push(Object(y.y)(e)),l.push("rotate3d"===t?function(e){var t=a()(e,4),r=t[0],o=t[1],i=t[2],c=t[3];return["rotate3d(".concat(r,",").concat(o,",").concat(i,",").concat(A(c,n),")"),T(c,0)]}:function(e){return["".concat(t,"(").concat(e.map((function(e){return A(e,n)})).join(","),")"),T(e,t.startsWith("scale")?1:0)]})}})),u.length&&(c.transform=new I(u,l)),t.call(this,c)}return n}(O.a),I=function(e){l()(n,e);var t=j(n);function n(e,r){var o;return s()(this,n),(o=t.call(this)).inputs=e,o.transforms=r,o._value=null,o}return o()(n,[{key:"get",value:function(){return this._value||(this._value=this._get())}},{key:"_get",value:function(){var e=this,t="",n=!0;return Object(y.k)(this.inputs,(function(r,o){var i=Object(y.q)(r[0]),c=e.transforms[o](y.s.arr(i)?i:r.map(y.q)),s=a()(c,2),u=s[0],l=s[1];t+=" "+u,n=n&&l})),n?"none":t}},{key:"observerAdded",value:function(e){var t=this;1==e&&Object(y.k)(this.inputs,(function(e){return Object(y.k)(e,(function(e){return Object(y.r)(e)&&Object(y.c)(e,t)}))}))}},{key:"observerRemoved",value:function(e){var t=this;0==e&&Object(y.k)(this.inputs,(function(e){return Object(y.k)(e,(function(e){return Object(y.r)(e)&&Object(y.x)(e,t)}))}))}},{key:"eventObserved",value:function(e){"change"==e.type&&(this._value=null),Object(y.d)(this,e)}}]),n}(y.a);m.Globals.assign({batchedUpdates:g.unstable_batchedUpdates,createStringInterpolator:y.g,colors:y.e});var M=Object(O.d)(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],{applyAnimatedValues:function(e,t){if(!e.nodeType||!e.setAttribute)return!1;var n="filter"===e.nodeName||e.parentNode&&"filter"===e.parentNode.nodeName,r=t.style,o=t.children,i=t.scrollTop,a=t.scrollLeft,c=v()(t,["style","children","scrollTop","scrollLeft"]),s=Object.values(c),u=Object.keys(c).map((function(t){return n||e.hasAttribute(t)?t:k[t]||(k[t]=t.replace(/([A-Z])/g,(function(e){return"-"+e.toLowerCase()})))}));for(var l in void 0!==o&&(e.textContent=o),r)if(r.hasOwnProperty(l)){var d=C(l,r[l]);"float"===l?l="cssFloat":w.test(l)?e.style.setProperty(l,d):e.style[l]=d}u.forEach((function(t,n){e.setAttribute(t,s[n])})),void 0!==i&&(e.scrollTop=i),void 0!==a&&(e.scrollLeft=a)},createAnimatedStyle:function(e){return new N(e)},getComponentProps:function(e){e.scrollTop,e.scrollLeft;return v()(e,["scrollTop","scrollLeft"])}}).animated},function(e,t,n){"use strict";n.d(t,"a",(function(){return E})),n.d(t,"b",(function(){return x})),n.d(t,"c",(function(){return S})),n.d(t,"d",(function(){return D})),n.d(t,"e",(function(){return j})),n.d(t,"f",(function(){return T})),n.d(t,"g",(function(){return C})),n.d(t,"h",(function(){return w}));var r=n(57),o=n.n(r),i=n(974),a=n.n(i),c=n(22),s=n.n(c),u=n(23),l=n.n(u),d=n(17),f=n.n(d),p=n(20),h=n.n(p),b=n(21),v=n.n(b),m=n(895),g=n(1);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var o=f()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l()(this,n)}}var O=Symbol.for("Animated:node"),j=function(e){return e&&e[O]},w=function(e,t){return Object(m.h)(e,O,t)},C=function(e){return e&&e[O]&&e[O].getPayload()},k=function(){function e(){h()(this,e),w(this,this)}return v()(e,[{key:"getPayload",value:function(){return this.payload||[]}}]),e}(),S=function(e){s()(n,e);var t=y(n);function n(e){var r;return h()(this,n),(r=t.call(this))._value=e,r.done=!0,r.durationProgress=0,m.s.num(r._value)&&(r.lastPosition=r._value),r}return v()(n,[{key:"getPayload",value:function(){return[this]}},{key:"getValue",value:function(){return this._value}},{key:"setValue",value:function(e,t){return m.s.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value!==e&&(this._value=e,!0)}},{key:"reset",value:function(){var e=this.done;this.done=!1,m.s.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}}],[{key:"create",value:function(e){return new n(e)}}]),n}(k),x=function(e){s()(n,e);var t=y(n);function n(e){var r;return h()(this,n),(r=t.call(this,0))._string=null,r._toString=Object(m.f)({output:[e,e]}),r}return v()(n,[{key:"getValue",value:function(){var e=this._string;return null==e?this._string=this._toString(this._value):e}},{key:"setValue",value:function(e){if(m.s.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else{if(!a()(f()(n.prototype),"setValue",this).call(this,e))return!1;this._string=null}return!0}},{key:"reset",value:function(e){e&&(this._toString=Object(m.f)({output:[this.getValue(),e]})),this._value=0,a()(f()(n.prototype),"reset",this).call(this)}}],[{key:"create",value:function(e){return new n(e)}}]),n}(S),R={dependencies:null},E=function(e){s()(n,e);var t=y(n);function n(e){var r;return h()(this,n),(r=t.call(this)).source=e,r.setValue(e),r}return v()(n,[{key:"getValue",value:function(e){var t={};return Object(m.l)(this.source,(function(n,r){var o;(o=n)&&o[O]===o?t[r]=n.getValue(e):Object(m.r)(n)?t[r]=Object(m.q)(n):e||(t[r]=n)})),t}},{key:"setValue",value:function(e){this.source=e,this.payload=this._makePayload(e)}},{key:"reset",value:function(){this.payload&&Object(m.k)(this.payload,(function(e){return e.reset()}))}},{key:"_makePayload",value:function(e){if(e){var t=new Set;return Object(m.l)(e,this._addToPayload,t),Array.from(t)}}},{key:"_addToPayload",value:function(e){var t=this;R.dependencies&&Object(m.r)(e)&&R.dependencies.add(e);var n=C(e);n&&Object(m.k)(n,(function(e){return t.add(e)}))}}]),n}(k),_=function(e){s()(n,e);var t=y(n);function n(e){return h()(this,n),t.call(this,e)}return v()(n,[{key:"getValue",value:function(){return this.source.map((function(e){return e.getValue()}))}},{key:"setValue",value:function(e){var t=this.getPayload();return e.length==t.length?t.some((function(t,n){return t.setValue(e[n])})):(a()(f()(n.prototype),"setValue",this).call(this,e.map(A)),!0)}}],[{key:"create",value:function(e){return new n(e)}}]),n}(E);function A(e){return(Object(m.t)(e)?x:S).create(e)}function T(e){var t=j(e);return t?t.constructor:m.s.arr(e)?_:Object(m.t)(e)?x:S}var N=function(e,t){var n=!m.s.fun(e)||e.prototype&&e.prototype.isReactComponent;return Object(g.forwardRef)((function(r,i){var a=Object(g.useRef)(null),c=n&&Object(g.useCallback)((function(e){a.current=function(e,t){e&&(m.s.fun(e)?e(t):e.current=t);return t}(i,e)}),[i]),s=function(e,t){var n=new Set;R.dependencies=n,e.style&&(e=Object.assign({},e,{style:t.createAnimatedStyle(e.style)}));return e=new E(e),R.dependencies=null,[e,n]}(r,t),u=o()(s,2),l=u[0],d=u[1],f=Object(m.z)(),p=function(){var e=a.current;n&&!e||!1===(!!e&&t.applyAnimatedValues(e,l.getValue(!0)))&&f()},h=new I(p,d),b=Object(g.useRef)();Object(m.A)((function(){var e=b.current;b.current=h,Object(m.k)(d,(function(e){return Object(m.c)(e,h)})),e&&(Object(m.k)(e.deps,(function(t){return Object(m.x)(t,e)})),m.w.cancel(e.update))})),Object(g.useEffect)(p,[]),Object(m.C)((function(){return function(){var e=b.current;Object(m.k)(e.deps,(function(t){return Object(m.x)(t,e)}))}}));var v=t.getComponentProps(l.getValue());return Object(g.createElement)(e,Object.assign({},v,{ref:c}))}))},I=function(){function e(t,n){h()(this,e),this.update=t,this.deps=n}return v()(e,[{key:"eventObserved",value:function(e){"change"==e.type&&m.w.write(this.update)}}]),e}();var M=Symbol.for("AnimatedComponent"),D=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.applyAnimatedValues,r=void 0===n?function(){return!1}:n,o=t.createAnimatedStyle,i=void 0===o?function(e){return new E(e)}:o,a=t.getComponentProps,c=void 0===a?function(e){return e}:a,s={applyAnimatedValues:r,createAnimatedStyle:i,getComponentProps:c},u=function e(t){var n=L(t)||"Anonymous";return(t=m.s.str(t)?e[t]||(e[t]=N(t,s)):t[M]||(t[M]=N(t,s))).displayName="Animated(".concat(n,")"),t};return Object(m.l)(e,(function(t,n){m.s.arr(e)&&(n=L(t)),u[n]=u(t)})),{animated:u}},L=function(e){return m.s.str(e)?e:e&&m.s.str(e.displayName)?e.displayName:m.s.fun(e)&&e.name||null}},function(e,t){},function(e,t){},,function(e,t,n){"use strict";function r(e){var t,n,r=window.URL||window.webkitURL;try{n=document.createElement("video"),t=r.createObjectURL(e)}catch(e){}return new Promise((function(e){var r=setTimeout((function(){e(0)}),1e3);n.addEventListener("loadeddata",(function(){clearTimeout(r),e(n.duration?n.duration:0)})),n.src=t}))}n.d(t,"g",(function(){return r})),n.d(t,"h",(function(){return o})),n.d(t,"i",(function(){return i})),n.d(t,"f",(function(){return a})),n.d(t,"e",(function(){return c})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return d}));function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9;return new Promise((function(n){if(0!==t){var r=document.createElement("video"),o=(window.URL||window.webkitURL).createObjectURL(e),i=0,a=0,c=[],s=document.createElement("canvas"),u=s.getContext("2d"),l=function(){a=r.duration/(t-1),r.currentTime=i};r.addEventListener("loadeddata",l);r.addEventListener("seeked",(function e(){!function(){if(u){var e=r.videoWidth,t=r.videoHeight;s.width=e,s.height=t,u.drawImage(r,0,0,e,t),c.push({url:s.toDataURL("image/jpeg")})}}(),(i+=a)<=r.duration?r.currentTime=i:(r.removeEventListener("loadeddata",l),r.removeEventListener("seeked",e),n(c))})),r.src=o}else n([])}))}var i=function(){return"undefined"!=typeof window&&!/Maxthon/.test(window.navigator.userAgent)},a={reprint:"reprint",original:"original"},c=[{value:a.reprint,label:"转载"},{value:a.original,label:"原创"}],s=[".3gp",".asf",".avi",".dat",".f4v",".flv",".m4v",".mkv",".mov",".mp4",".mp4v",".mpe",".mpeg",".mpg",".ra",".ram",".rm",".rmvb",".vob",".webm",".wm",".wmv"],u=2147483648,l=102400,d=3600},function(e,t,n){"use strict";n.d(t,"b",(function(){return V}));var r=n(20),o=n.n(r),i=n(21),a=n.n(i),c=n(22),s=n.n(c),u=n(23),l=n.n(u),d=n(17),f=n.n(d),p=n(33),h=n.n(p),b=n(43),v=n.n(b),m=n(1),g=n.n(m),y=n(11),O=n.n(y),j=n(824),w=n(28),C=n(234),k=n(210),S=n.n(k),x=n(928),R=n.n(x),E=n(973),_=n.n(E),A=n(76),T=n.n(A),N=n(247),I=n(83),M=n(1082),D=(n(949),n(5)),L=function(){return Object(D.g)("span",{className:"Editable-toolbar-separator"})},P=function(e){var t=e.className,n=v()(e,["className"]);return Object(D.g)(I.b,h()({className:O()(t,"Editable-toolbarMenuItem")},n))},z=n(781),B=n(30);function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var o=f()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l()(this,n)}}g.a.Component;var U=n(900);function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var o=f()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l()(this,n)}}var V={INLINE_STYLE:"inlineStyle",BLOCK_TYPE:"blockType",ENTITY:"entity",CLEAR_FORMAT:"clearFormat"},H=function(e,t){var n={inlineStyle:!1,blockType:!1,entity:!1,clearFormat:!1};return"atomic"===t&&(n.inlineStyle=!0,n.blockType=!0,n.entity=!0,n.clearFormat=!0),"code-block"===t&&(n.inlineStyle=!0,n.entity=!0),n},K={FIRST_LINE:[U.a.BASIC_STYLING,U.a.LIST_CONTENT,U.a.BLOCK_CONTENT,U.a.STRUCTURE_STYLING,U.a.FORMAT_EDITING],SECOND_LINE:[U.a.BASIC_MEDIA,U.a.PROFESSIONAL_MEDIA,U.a.CUSTOM_MAIN]},Q=function(e){s()(n,e);var t=q(n);function n(){var e;o()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={isMenuOpen:!1,isMenuAttentionShown:!1},e.timeout=null,e.toolbarRef=g.a.createRef(),e.menuButtonRef=g.a.createRef(),e.showMenuAttention=function(){e.timeout=setTimeout((function(){e.setState({isMenuAttentionShown:!0}),e.timeout=setTimeout((function(){e.setState({isMenuAttentionShown:!1})}),5e3)}),2e3)},e}return a()(n,[{key:"componentDidMount",value:function(){this.props.toolbarMenuAttention&&this.showMenuAttention()}},{key:"componentDidUpdate",value:function(e){this.props.toolbarMenuAttention&&!e.toolbarMenuAttention&&this.showMenuAttention()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout)}},{key:"renderToolbarSections",value:function(e){var t=this.props,n=t.currentStyle,r=t.currentBlockType,o=t.onCommand,i=t.plugins,a=Object(U.b)(i),c=H(0,r);return e.map((function(t,i){var s;return Object(D.g)(m.Fragment,{key:t},Object(D.g)(g.a.Fragment,null,_()(a[t],(function(e){var t;return null!==(t=e.priority)&&void 0!==t?t:1/0})).map((function(e){var t,i,a=T()(e,"style"),s=a.onClick,u=a.toolType,l=a.Component,d=void 0===l?M.a:l,f=a.commandName,p=a.shouldActive,b=a.shouldShow,m=void 0===b?function(){return!0}:b,g=a.shouldDisabled,y=void 0===g?function(){return null}:g,O=v()(a,["onClick","toolType","Component","commandName","shouldActive","shouldShow","shouldDisabled"]);if(!m())return null;if(e.section===U.a.MENU){var j,w=e.label,C=e.icon,k=e.onClick,x=e.commandName,E=v()(e,["label","icon","onClick","commandName"]);return Object(D.g)(P,h()({key:null!==(j=e.icon)&&void 0!==j?j:null==d?void 0:d.name,onClick:function(e){null==k||k(e),x&&o(x)}},E),Object(D.g)(C,{text:!0}),w)}var _=S()(Object.assign({onClick:function(e){null==s||s(e),f&&o(f)}},p&&{isActive:p({currentStyle:n,currentBlockType:r})},{disabled:null!==(t=y())&&void 0!==t?t:c[u]},O),(function(e){return!R()(e)}));return Object(D.g)(d,h()({key:null!==(i=e.icon)&&void 0!==i?i:null==d?void 0:d.name},_))}))),i!==K.FIRST_LINE.length-1&&(null===(s=a[e[i+1]])||void 0===s?void 0:s.length)>0&&Object(D.g)(L,null))}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=(t.currentStyle,t.currentBlockType),o=t.onCommand,i=t.toolbarMainPlugins,a=t.toolbarSidePlugins,c=t.toolbarMenuPlugins,s=t.toolbarMenuAttention,u=t.isFixed,l=t.style,d=t.menuCallout,f=t.plugins,p=this.state,h=p.isMenuOpen,b=p.isMenuAttentionShown,v=H(0,r),m=Object(U.b)(f);return Object(D.g)(C.b,{block:"Toolbar"},Object(D.g)("div",{style:l,className:O()("Editable-toolbar",n),onMouseDown:function(e){return e.preventDefault()},ref:this.toolbarRef},Object(D.g)("div",{className:"Editable-toolbar-controls"},this.renderToolbarSections(K.FIRST_LINE),Object(D.g)(I.c,{className:"Editable-toolbarMenu",getContainer:function(){return e.toolbarRef.current},toggler:Object(D.g)(M.a,{label:h?null:"更多",icon:j.a,disabled:v.entity,onRef:this.menuButtonRef,onMouseEnter:b?function(){clearTimeout(e.timeout),e.setState({isMenuAttentionShown:!1})}:null}),onClick:function(e){w.a.trackEvent(e.target,{id:1183,action:"Click"})},onOpen:function(){o("click-more"),e.setState({isMenuOpen:!0})},onClose:function(){e.setState({isMenuOpen:!1})}},this.renderToolbarSections([U.a.MENU]),c),Object(D.g)(N.a,{isOpen:b,target:b&&this.menuButtonRef.current,container:this.toolbarRef.current,isFixed:u},s),a&&Object(D.g)(L,null),a),Object(D.g)("div",{className:"Editable-toolbar-controls"},this.renderToolbarSections(K.SECOND_LINE),i&&0===m[U.a.CUSTOM_MAIN].length&&Object(D.g)(L,null),i),d&&g.a.cloneElement(d,{anchor:this.menuButtonRef})))}}]),n}(m.Component);t.a=Q},,function(e,t,n){"use strict";var r=n(13),o=n(14),i=n(15),a=n(16),c=n(9),s=n(2);function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var l=function(e){Object(i.a)(n,e);var t=u(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isFollowed,n=e.isFollowing;return t?Object(s.b)("span",{className:"FollowStatus",children:n?"相互关注":"关注了你"}):null}}]),n}(n(1).Component);t.a=l},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(2),o=n(11),i=n.n(o);function a(e){var t=e.header,n=e.options,o=e.className,a=e.onRef,c=e.showOptions,s=void 0===c||c;return Object(r.c)("div",{className:i()("Topbar",o,!1),ref:a,children:[Object(r.b)("div",{className:"Topbar-title",children:t}),s&&Object(r.b)("div",{className:"Topbar-options",children:n})]})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var r=n(13),o=n(14),i=n(15),a=n(16),c=n(9),s=n(2),u=n(1),l=n(3),d=n.n(l),f=n(11),p=n.n(f),h=n(1333),b=n(433),v=n(135),m=n(1395),g=n(1089);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var O=function(e){Object(i.a)(n,e);var t=y(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={isFocused:!1},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.large,o=t.value,i=t.onChange,a=t.isButtonActive,c=t.toggler,u=t.disabledDate,l=t.getContainer,d=this.state.isFocused;return Object(s.b)(v.a,{className:p()("DatePicker",n),toggler:c||Object(s.c)(b.a,{large:r,className:p()("DatePicker-Button",{"is-active":d||a}),children:[Object(s.b)(m.a,{center:!0,size:20}),h.a(o,"yyyy/MM/dd")]}),onOpen:function(){e.setState({isFocused:!0})},onClose:function(){e.setState({isFocused:!1})},ref:function(t){e.popover=t},placement:"bottom",arrowed:!0,preventCloseOnTarget:!0,getContainer:l,children:Object(s.b)(g.a,{value:o,onChange:function(t){e.popover.close(),i(t)},disabledDate:u})})}}]),n}(u.Component);O.propTypes={toggler:d.a.element,disabledDate:d.a.func}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(2);function o(e){var t=e.annotationDetail;if(!t||!t.showOuter)return null;var n=t.reason,o=t.reasonDescription;return Object(r.b)("span",{className:"AnnotationTag",children:32300===n?"该内容已被标记":o})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var r=n(13),o=n(14),i=n(15),a=n(16),c=n(9),s=n(2),u=n(3),l=n.n(u),d=n(1),f=n(69),p=n.n(f),h=n(368),b=n(132),v=n(208);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var g={zhihu:"注册或登录",wechat:"使用微信快速登录",weibo:"使用微博快速登录",qq:"使用 QQ 快速登录"},y={qq:"qqconn",weibo:"sina",wechat:"wechat_mp"},O=function(e){Object(i.a)(n,e);var t=m(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).jumpToOAuthUrl=function(t){var n=e.props.redirectUrl,r=void 0===n?location.href:n,o=Object(v.d)(r),i=o.utm_source,a=o.utm_medium,c=p()(navigator.userAgent).isZhihu;location.href="zhihu"!==t?"https://www.zhihu.com/oauth/redirect/login/".concat(y[t],"?next=/oauth/account_callback&from=").concat(encodeURIComponent(r),"&utm_source=").concat(i,"&ref_source=").concat(a):c?"zhihu://signin?next=".concat(r):"https://www.zhihu.com/signin?next=".concat(r).concat(i?"?utm_source=".concat(i):"")},e.renderSignButtons=function(){var t=e.props.buttons;return"string"==typeof t?e.renderSingleSignButton({name:t}):t.map((function(t){return"string"==typeof t?e.renderSingleSignButton({name:t}):"object"==typeof t?e.renderSingleSignButton(t):null}))},e.renderSingleSignButton=function(t){var n=t.name,r=t.text,o=t.fill,i=t.color,a="#fff"===o||"#ffffff"===o;return Object.keys(g).includes(n)?Object(s.b)("button",{className:"SignInModal-button-".concat(n),style:{backgroundColor:o,borderColor:a?"#0f88eb":o,color:a?"#0f88eb":i},onClick:function(){e.jumpToOAuthUrl(n)},children:r||g[n]},n):null},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.urlScheme,r=this.props.title||"".concat(n?"打开 App 或":"","登录后继续操作");return Object(s.b)(b.b,{size:"small",className:"SignInModal",title:r,onClose:t,children:Object(s.b)(h.a,{module:"SignForm",moduleName:r,trackCardShow:!0,children:Object(s.c)("div",{className:"SignInModal-content",children:[n&&Object(s.b)(v.a,{className:"SignInModal-openInAppButton",href:n,children:"立即打开 App"}),this.renderSignButtons()]})})})}}]),n}(d.Component);O.propTypes={onClose:l.a.func.isRequired,urlScheme:l.a.string,redirectUrl:l.a.string,buttons:l.a.oneOfType([l.a.array,l.a.string])},O.defaultProps={buttons:["zhihu"]}},function(e,t,n){"use strict";var r=n(32),o=n(2),i=n(1),a=n(11),c=n.n(a),s=n(235),u=n.n(s),l=n(384),d=n.n(l),f=n(47),p=Object(f.isBrowser)()?i.useLayoutEffect:function(){};t.a=function(e){var t=e.onKeyDown,n=void 0===t?u.a:t,a=e.onChange,s=e.value,l=e.large,f=e.className,h=e.autoHeight,b=e.autoHeightOnInit,v=e.shiftEnter,m=Object(r.a)(e,["onKeyDown","onChange","value","large","className","autoHeight","autoHeightOnInit","shiftEnter"]),g=Object(i.useRef)(),y=function(){var e=g.current;if(e){e.style.height="1px";var t=Math.max(e.scrollHeight,25);e.style.height="".concat(t,"px")}};p((function(){if(!h){var e=l?100:0,t=g.current;t.style.height="1px",t.style.height="".concat(d()(t.scrollHeight,e,230),"px")}}),[s,l,h]);var O=Object(i.useCallback)((function(e){(v&&"Enter"===e.key&&!e.shiftKey||!l&&"Enter"===e.key)&&(y(),e.preventDefault()),n(e)}),[l,n,v]),j=Object(i.useCallback)((function(e){h&&y(),a&&a(e)}),[a,h]);return Object(i.useEffect)((function(){b&&h&&y()}),[b,h]),Object(o.b)("textarea",Object.assign({},m,{ref:g,onKeyDown:O,value:s,onChange:j,className:c()("AutoSizeTextArea",f)}))}},function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(18),a=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M14.782 16.78a.737.737 0 0 1-1.052 0L9.218 12.53a.758.758 0 0 1 0-1.063L13.73 7.22a.737.737 0 0 1 1.052 0c.29.294.29.77.001 1.063L11 12l3.782 3.716c.29.294.29.77 0 1.063z",fillRule:"evenodd"}))};a.defaultProps={name:"ArrowLeft"},t.a=a},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(75),o=n(174),i=n(58);function a(e,t){Object(i.a)(1,arguments);var n=t||{},a=n.locale,c=a&&a.options&&a.options.weekStartsOn,s=null==c?0:Object(o.a)(c),u=null==n.weekStartsOn?s:Object(o.a)(n.weekStartsOn);if(!(u>=0&&u<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var l=Object(r.a)(e),d=l.getDay(),f=(d<u?7:0)+d-u;return l.setDate(l.getDate()-f),l.setHours(0,0,0,0),l}},function(e,t,n){},,function(e,t,n){"use strict";var r=n(1148),o={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,t){var n,i,a,c,s,u,l=!1;t||(t={}),n=t.debug||!1;try{if(a=r(),c=document.createRange(),s=document.getSelection(),(u=document.createElement("span")).textContent=e,u.style.all="unset",u.style.position="fixed",u.style.top=0,u.style.clip="rect(0, 0, 0, 0)",u.style.whiteSpace="pre",u.style.webkitUserSelect="text",u.style.MozUserSelect="text",u.style.msUserSelect="text",u.style.userSelect="text",u.addEventListener("copy",(function(r){if(r.stopPropagation(),t.format)if(r.preventDefault(),void 0===r.clipboardData){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var i=o[t.format]||o.default;window.clipboardData.setData(i,e)}else r.clipboardData.clearData(),r.clipboardData.setData(t.format,e);t.onCopy&&(r.preventDefault(),t.onCopy(r.clipboardData))})),document.body.appendChild(u),c.selectNodeContents(u),s.addRange(c),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");l=!0}catch(r){n&&console.error("unable to copy using execCommand: ",r),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),l=!0}catch(r){n&&console.error("unable to copy using clipboardData: ",r),n&&console.error("falling back to prompt"),i=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(i,e)}}finally{s&&("function"==typeof s.removeRange?s.removeRange(c):s.removeAllRanges()),u&&document.body.removeChild(u),a()}return l}},,function(e,t,n){"use strict";var r=n(1),o=n(3),i=n.n(o),a=n(25),c=n(382);function s(e){var t=e.content,n=e.type,o=e.urlToken,i=Object(a.useDispatch)(),s=Object(r.useCallback)((function(){i(Object(c.a)({content:t,type:n,urlToken:o}))}),[i,t,n,o]),u=Object(a.useSelector)((function(e){return Object(c.c)(e,{type:n,urlToken:o})}));return Object(r.useEffect)((function(){u||s()}),[u,s]),null}s.propTypes={content:i.a.string.isRequired,type:i.a.oneOf(["answer","article"]).isRequired,urlToken:i.a.string.isRequired},t.a=s},,function(e,t,n){"use strict";n.d(t,"a",(function(){return Jn}));var r=n(4),o=n(40),i=n(13),a=n(14),c=n(67),s=n(15),u=n(16),l=n(9),d=n(2),f=n(5),p=n(1),h=n.n(p),b=n(19),v=n(90),m=n(3),g=n.n(m),y=n(11),O=n.n(y),j=n(25),w=n(29),C=n(34),k=n(835),S=n(1297),x=n(1173),R=n(1571),E=n(1572),_=n(28),A=n(234),T=n(853),N=n(30),I=n(83),M=n(906),D=n(175),L=n(35),P=n.n(L),z=n(1116),B=n(141),F=n(132),U=[{code:32309,description:"收到大量反对"},{code:32301,description:"可能包含争议观点"},{code:32302,description:"可能存在事实性错误",placeholder:"为了避免对您造成误导，请谨慎甄别"},{code:32303,description:"可能涉及金钱往来",placeholder:"为保障您的财产安全，请谨慎判断"},{code:32304,description:"可能包含剧透"},{code:32306,description:"可能包含具体的医疗建议",placeholder:"网络上的医疗建议仅供参考，如有需要请咨询专业人士或前往医疗机构就医"},{code:32307,description:"可能包含令人不适的图片或视频",placeholder:"为保障您的阅读体验，请谨慎浏览"},{code:32308,description:"已有回应"},{code:32300,description:"其他"}];function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var V=function(e){Object(s.a)(n,e);var t=q(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.options,n=e.value,r=e.onChange,o=e.className;return Object(d.b)("div",{className:O()("RadioButtons",o),children:t.map((function(e,t){var o=e.value,i=e.text,a=e.placeholder;return Object(d.c)("label",{className:"RadioButtons-item",children:[Object(d.b)("span",{className:"RadioButtons-text",children:i}),Object(d.b)("input",{type:"radio",className:"RadioButtons-input",value:o,checked:n===o,onChange:function(){return r(o,a)}})]},t)}))})}}]),n}(p.PureComponent);function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}V.propTypes={options:g.a.arrayOf(g.a.shape({value:g.a.string,text:g.a.string,placeholder:g.a.string})).isRequired,value:g.a.string,onChange:g.a.func,className:g.a.string};var K=function(){return n.e(43).then(n.bind(null,2581))},Q=U.map((function(e){var t=e.code,n=e.description,r=e.placeholder;return{text:n,value:String(t),placeholder:r}})),W=function(e){Object(s.a)(n,e);var t=H(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={selectedReasonCode:null,isReasonDescriptionEmpty:!0},e.handleReasonCodeChange=function(t,n){e.setState({selectedReasonCode:Number(t),selectedReasonPlaceholder:n||""}),e.input&&e.input.resetWithValue(n||"")},e.handleAddAnnotation=function(){var t=e.props,n=t.addAnnotation,r=t.type,o=t.urlToken,i=t.showNotification,a=t.onClose;n(r,o,e.state.selectedReasonCode,e.input.toHTML()).then((function(){a(),i&&i("标记内容成功")}))},e.handleReasonDescriptionChange=function(t){e.setState({isReasonDescriptionEmpty:t.isEmpty})},e}return Object(a.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.onClose,r=t.shown,o=t.className,i=this.state,a=i.selectedReasonCode,c=i.isReasonDescriptionEmpty,s=i.selectedReasonPlaceholder,u=function(e){var t=U.find((function(t){return t.code===e}));return t&&t.description}(a),l=32300===a;return Object(d.b)(F.b,{title:"标记内容",subtitle:"请选择标记原因",onClose:n,className:o,children:r&&Object(d.c)("div",{children:[Object(d.c)("div",{className:"AddAnnotationModal-body",children:[Object(d.b)(V,{options:Q,onChange:this.handleReasonCodeChange,value:String(a)}),a&&Object(d.c)("div",{children:[Object(d.c)("div",{className:"AddAnnotationModal-description",children:[u,"（",l?"必填":"选填","）"]}),Object(d.b)(B.a,{getComponent:K,multiline:!0,richtext:!0,allowMention:!0,large:!0,spread:!0,minRows:2,onRef:function(t){e.input=t},defaultValue:s,placeholder:"请填写原因",onChange:this.handleReasonDescriptionChange})]})]}),Object(d.b)(F.a,{direction:"horizontal",className:"AddAnnotationModal-buttonGroup",children:Object(d.b)(N.c,{preset:"primary",color:"blue",onClick:this.handleAddAnnotation,size:"spread",disabled:!a||l&&c,children:"标记"})})]})})}}]),n}(p.PureComponent);W.propTypes={addAnnotation:g.a.func.isRequired,onClose:g.a.func.isRequired,shown:g.a.bool.isRequired,type:g.a.oneOf([0,1,2]).isRequired,urlToken:g.a.oneOfType([g.a.number,g.a.string]),showNotification:g.a.func,className:g.a.string};var G=n(47),Z=n(69),Y=n.n(Z),J=n(134);function $(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var X=function(e){Object(s.a)(n,e);var t=$(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={isReasonDescriptionEmpty:!0},e.handleCancelAnnotation=function(){var t=e.props,n=t.cancelAnnotation,r=t.type,o=t.urlToken,i=t.showNotification,a=t.onClose;n(r,o,32305,e.input.value).then((function(){a(),i&&i("撤销标记成功")}))},e.handleReasonDescriptionChange=function(t){return e.setState({isReasonDescriptionEmpty:t.isEmpty})},e}return Object(a.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.onClose,r=t.shown,o=t.className,i=this.state.isReasonDescriptionEmpty;return Object(d.b)(F.b,{title:"你确定要撤销这条内容的标记吗？",onClose:n,className:o,children:r&&Object(d.c)("div",{className:"CancelAnnotationModal",children:[Object(d.b)(J.a,{multiline:!0,large:!0,spread:!0,onRef:function(t){e.input=t},placeholder:"请填写撤销原因（必填）",onChange:this.handleReasonDescriptionChange,className:"CancelAnnotationModal-Input"}),Object(d.c)(F.a,{direction:"horizontal",children:[Object(G.isBrowser)()&&!Y()(window.navigator.userAgent).Mobile&&Object(d.b)(N.c,{onClick:n,size:"spread",children:"取消"}),Object(d.b)(N.c,{preset:"primary",color:"blue",onClick:this.handleCancelAnnotation,size:"spread",className:"CancelAnnotationModal-CancelButton",disabled:i,children:"撤销标记"})]})]})})}}]),n}(p.PureComponent);X.propTypes={cancelAnnotation:g.a.func.isRequired,onClose:g.a.func.isRequired,shown:g.a.bool.isRequired,type:g.a.oneOf([0,1,2]).isRequired,urlToken:g.a.oneOfType([g.a.number.isRequired,g.a.string.isRequired]),showNotification:g.a.func,className:g.a.string};var ee=n(208),te=n(382),ne=n(368),re=n(24),oe=n(70),ie=n(101),ae=n(0),ce=n(7),se=n(50),ue=n(6),le=Object.assign({},Object(ue.a)("collaboration",["ADD_ANNOTATION","CANCEL_ANNOTATION"])),de=function(e){return e===re.e?"answers":e===re.g?"pins":e===re.f?"articles":null},fe=n(26),pe=n(381),he=n(49),be=n(217),ve=n(37),me=n(133),ge=n(1078),ye=n(869),Oe=n(940),je=n(1156),we=n(1157),Ce=n(958),ke=n(235),Se=n.n(ke),xe=n(428),Re=n(1291),Ee=n(1088),_e=Object(C.withRouter)(Object(j.connect)(null,{loadComments:xe.e})((function(e){var t=Object(p.useState)([]),n=Object(o.a)(t,2),r=n[0],i=n[1],a=e.parent,c=a.type,s=a.id,u=a.question,l=e.parent,f=e.loadComments,h=e.location.pathname,b=-1!==(null==h?void 0:h.indexOf("answer")),v=-1!==(null==h?void 0:h.indexOf("question")),m=Object(j.useSelector)((function(e){return Object(he.j)(e,{type:b?"answer":v?"question":"",id:s||(null==u?void 0:u.id)})}));if(Object(p.useEffect)((function(){f(c,s).then((function(e){var t=e.payload;i(t.data)}))}),[s,c,f]),!(null==r?void 0:r.length))return null;var g=function(e,t){"zvideo"===c?Object(ee.c)(Object(ye.a)({type:c,id:s},{launch_button:t})):m?location.href="zhihu://".concat(c,"/").concat(s,"?utm_app_name=zhihu_check"):Object(ee.c)(Object(ye.a)({type:c,id:s},{launch_button:t})),e.preventDefault()};return Object(d.c)("div",{className:"CommentsForOia",children:[r.slice(0,2).map((function(e){return Object(d.b)("div",{onClick:function(e){return g(e,Ee.b.comment_list)},children:Object(d.b)(Re.a,{parent:l,comment:e,onLike:Se.a,onDelete:Se.a})},e.id)})),r.length>2&&Object(d.b)(N.c,{color:"blue",preset:"primary",onClick:function(e){return g(e,Ee.b.comment_more)},children:"打开 App 查看更多评论"})]})}))),Ae=n(1269),Te=n(1270),Ne=n(960),Ie=n(74),Me=n(102),De=n(1267),Le=n.n(De),Pe=n(1287),ze=n.n(Pe),Be=n(1303),Fe=n.n(Be),Ue=n(1351),qe=n.n(Ue),Ve={answerAdmireCouldOpen:{image:ze.a,title:"开启「赞赏」权益",content:"你已经获得了「赞赏」权益，使用「赞赏」可以得到更多收益。快去开启权益吧。",buttonText:"立即开启",buttonLink:"https://www.zhihu.com/creator/reward/community",detailViewName:"admire",cardShowId:4922,buttonClickId:4924,readAlwaysId:4926,readNextId:4928},answerAdmireCouldUse:{image:ze.a,title:"使用「赞赏」权益",content:"你可以为这篇内容开启「赞赏」。「赞赏」开启后，读者将可以付费支持你的创作。",buttonText:"开启赞赏",detailViewName:"admire",cardShowId:4923,buttonClickId:4925,readAlwaysId:4927,readNextId:4929},promotionCouldOpen:{image:qe.a,title:"开启「自定义推广」权益",content:"你已经获得了「自定义推广」权益，使用「自定义推广」可以让内容得到更多展示机会。快去开启权益吧。",buttonText:"立即开启",buttonLink:"https://www.zhihu.com/creator/custom-promotion",detailViewName:"promotion",cardShowId:4922,buttonClickId:4924,readAlwaysId:4926,readNextId:4928},promotionCouldUse:{image:qe.a,title:"使用「自定义推广」权益",content:"你可以使用「自定义推广」权益，使这篇内容获得更多展示机会。快去使用权益吧。",buttonText:"立即使用权益",buttonLink:"https://www.zhihu.com/creator/custom-promotion",detailViewName:"promotion",cardShowId:4923,buttonClickId:4925,readAlwaysId:4927,readNextId:4929},recommendationCouldOpen:{image:Fe.a,title:"开启「内容自荐」权益",content:"你已经获得了「内容自荐」权益，优质内容通过自荐后可以展示给更多人。快去开启权益吧。",buttonText:"立即开启",buttonLink:"https://www.zhihu.com/creator/recommend",detailViewName:"recommend",cardShowId:4922,buttonClickId:4924,readAlwaysId:4926,readNextId:4928},recommendationCouldUse:{image:Fe.a,title:"使用「内容自荐」权益",content:"你可以使用「内容自荐」权益，让更多人看到这篇内容。快去使用权益吧。",buttonText:"立即自荐",detailViewName:"recommend",cardShowId:4923,buttonClickId:4925,readAlwaysId:4927,readNextId:4929}};var He=function(e){var t=e.notification,n=void 0===t?{}:t,r=e.className,o=e.onRead,i=e.onUseAdmire,a=e.onUseRecommend,c=Object.keys(n).find((function(e){return n[e]})),s=Ve[c]||{},u=s.title,l=s.image,f=s.content,h=s.buttonText,b=s.buttonLink,v=s.detailViewName,m=s.cardShowId,g=s.buttonClickId,y=s.readAlwaysId,j=s.readNextId;return Object(p.useEffect)((function(){c&&_.a.trackCardShow(null,{id:m,name:v})}),[c,m,v]),Object(d.b)(Ie.b,{className:O()("CreatorRightsNotification",r),onClose:function(){o("next"),_.a.trackEvent(null,{id:j,name:v})},children:c&&Object(d.c)(p.Fragment,{children:[Object(d.b)("img",{className:"CreatorRightsNotification-background",src:Le.a,alt:"blue background"}),Object(d.b)("img",{className:"CreatorRightsNotification-liukanshan",src:l,alt:"liukanshan image"}),Object(d.b)("div",{className:"CreatorRightsNotification-title",children:u}),Object(d.b)("div",{className:"CreatorRightsNotification-content",children:f}),Object(d.c)(Ie.a,{className:"CreatorRightsNotification-buttonGroup",children:[b?Object(d.b)(Me.a,{className:"CreatorRightsNotification-button",preset:"primary",color:"blue",to:b,target:"_blank",onClick:function(){o("current"),_.a.trackEvent(null,{id:g,name:v})},children:h}):Object(d.b)(N.c,{className:"CreatorRightsNotification-button",preset:"primary",color:"blue",onClick:function(){o("current"),_.a.trackEvent(null,{id:g,name:v}),"answerAdmireCouldUse"===c&&i(),"recommendationCouldUse"===c&&a()},children:h}),Object(d.b)(N.c,{className:"CreatorRightsNotification-dismiss",preset:"plain",color:"grey",onClick:function(){o("always"),_.a.trackEvent(null,{id:y,name:v})},children:"不再提醒"})]})]})})},Ke=n(1004),Qe=n(1336),We=n(1115),Ge=n(850),Ze=n(883),Ye=n(897),Je=n(894),$e=n(243),Xe=n(1326),et=n(1332),tt=n(857),nt=n(1305),rt=n(242),ot=n(988),it={up:1,neutral:0,down:-1};function at(e){var t=e.id,n=e.voteupCount,r=e.voting,o=e.isOwner,i=e.answer,a=e.currentUser,c=e.disabled,s=Object(j.useDispatch)();Object(p.useEffect)((function(){!c&&a&&s(Object(rt.b)(["opposeRight"]))}),[c,a,s]);var u=Object(j.useSelector)((function(e){var t=e.entities.questions[i.question.id];return null==t?void 0:t.voteDownReason})),l=Object(j.useSelector)((function(e){return Object(rt.d)(e)})),f=Object(p.useCallback)((function(e){s(Object(oe.K)(i.id,it[e],{zVideoId:t}))}),[t,s,i.id]);return Object(d.b)(ot.a,{type:"zvideo",isShowVoteDownMenu:Boolean(!c&&a)&&l,count:n,voting:r,onVote:f,isOwner:o,voteDownReason:u,onLoadVoteDownReason:function(){s(Object(oe.k)(i.id,i.question.id))},onSelectVoteDownReason:function(e){s(Object(oe.C)(i.id,e.reasonId)).then((function(e){s(Object(fe.h)(e.payload.message))}))},onSetVoteDownReason:function(e){s(Object(rt.e)(e))}})}var ct=n(908);function st(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var ut=function(e){Object(s.a)(n,e);var t=st(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props.activateReward;return Object(d.c)("div",{className:"Reward",children:[Object(d.b)("button",{className:"Reward-activateBtn",onClick:e,children:"开启赞赏"}),Object(d.b)("div",{className:"Reward-activateHint",children:"赞赏开启后，读者将可以付费支持你的创作。"})]})}}]),n}(p.Component);function lt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}ut.propTypes={activateReward:g.a.func};var dt=function(e){Object(s.a)(n,e);var t=lt(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.tagline,n=e.totalMoney,r=e.showRewarders;return Object(d.c)("div",{children:[Object(d.b)("div",{className:"Reward-tagline",children:t||re.p}),Boolean(n)&&Object(d.b)("div",{className:"Reward-money",children:Object(d.c)("span",{onClick:r,children:["¥ ",n.toFixed(2)]})})]})}}]),n}(p.Component);dt.propTypes={tagline:g.a.string,totalMoney:g.a.number,showRewarders:g.a.func};var ft=n(1130);function pt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var ht=function(e){Object(s.a)(n,e);var t=pt(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.modalShown,n=e.onLoad,r=e.items,o=e.voteupCount,i=e.isRewardList,a=e.onClose,c=e.notice;return Object(d.b)(F.b,{size:"fullPage",onClose:a,children:t&&Object(d.b)(ft.a,{items:r,text:"赞赏了",isFetching:!1,isDrained:!1,voteupCount:o,onLoad:n,isRewardList:i,notice:c,type:"rewardPeople"})})}}]),n}(p.Component);ht.propTypes={onLoad:g.a.func,modalShown:g.a.bool};var bt=n(367);function vt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var mt=function(e){Object(s.a)(n,e);var t=vt(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={hoverName:""},e.hoverUser=function(t){e.setState({hoverName:t.target.dataset.name})},e}return Object(a.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.users,r=t.handleListShown,o=t.rewardMemberCount,i=t.onUserClick,a=this.state.hoverName,c=n.slice(0,5);return Object(d.c)("div",{className:"Reward-count",children:[Object(d.b)("p",{className:"Reward-User-text",onClick:r,children:"".concat(Object(bt.formatNumber)(o)," 人已赞赏")}),Object(d.c)("div",{children:[c.map((function(t,n){return Object(d.b)(C.Link,{to:"//www.zhihu.com/".concat(t.userType,"/").concat(t.urlToken),className:"Reward-User-img","data-hover-title":a,target:"_blank",onClick:i,children:Object(d.b)("img",{src:t.avatarUrl,className:"Reward-User-avatar","data-name":t.name,"data-index":n,onMouseOver:e.hoverUser,alt:"赞赏用户"})},n)})),o>6&&Object(d.c)("span",{className:"Reward-MoreUser",onClick:r,children:[Object(d.b)("i",{}),Object(d.b)("i",{}),Object(d.b)("i",{})]})]})]})}}]),n}(p.Component);mt.propTypes={users:g.a.array,handleListShown:g.a.func,rewardMemberCount:g.a.number,onUserClick:g.a.func},mt.defaultProps={users:[]};var gt=Object(ne.b)({module:"UserList",moduleName:"*** 人已赞赏"})(mt);function yt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var Ot=function(e){Object(s.a)(n,e);var t=yt(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.rewardMemberCount,n=e.handleListShown,r=e.isAuthor,o=e.users,i=e.onUserClick;return t?Object(d.b)(gt,{users:o,onUserClick:i,handleListShown:n,rewardMemberCount:t}):Object(d.b)("div",{className:"Reward-countZero",children:r?"还没有人赞赏。":"还没有人赞赏，快来当第一个赞赏的人吧！"})}}]),n}(p.Component);function jt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}Ot.propTypes={rewardMemberCount:g.a.number,handleListShown:g.a.func,isAuthor:g.a.bool,users:g.a.array,onUserClick:g.a.func};var wt=function(e){Object(s.a)(n,e);var t=jt(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.tagline,n=e.onClick;return Object(d.c)("div",{children:[Object(d.b)("div",{className:"Reward-tagline",children:t||re.p}),Object(d.b)("button",{className:"Reward-rewardBtn",onClick:n,children:"赞赏"})]})}}]),n}(p.Component);function Ct(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}wt.propTypes={onClick:g.a.func,tagline:g.a.string};var kt=function(){return n.e(35).then(n.bind(null,2612)).then((function(e){return e.TipjarDialog}))},St=function(e){Object(s.a)(n,e);var t=Ct(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={TipjarRender:!1,modalShown:!1},e.onSubmitReward=function(t){P.a.set("isRewardable",!0),e.updateReward(t)},e.onPaySuccess=function(){var t=e.props,n=t.reward,r=t.currentUser,o=t.id,i=t.type,a=n[i][o].users,c=[r];Array.isArray(a)&&(a.push(r),c=a),e.props.onRewardSuccess(c,o,i),e.colseTijarDialog(),e.props.showNotification("你已赞赏成功！")},e.onLoad=function(t){"article"===e.props.type?"normal"===t?e.onLoadArticleRewardUser():e.onLoadArticleRewardUserDetails():e.onLoadRewardUser()},e.onLoadArticleRewardUser=function(){var t=e.props.id;e.props.getArticleRewardUser(t)},e.onLoadArticleRewardUserDetails=function(){var t=e.props,n=t.id;t.isAuthor?e.props.getPagingArticleRewardUserDetails(n):e.props.getPagingArticleRewardUser(n)},e.onLoadRewardUser=function(){var t=e.props,n=t.id;t.isAuthor?e.props.getRewardUserDetails(e.props.id):e.props.getRewardUser(n).then((function(t){var n=t.payload.data;if(n.length>0){var r={};n.forEach((function(e){r[e.urlToken]=e})),e.props.updateEntitiesUsers(r)}}))},e.handleListShown=function(t){var n=e.props.onRewardUserMoreClick;n&&n(t),e.setState({modalShown:!0})},e.handleListHide=function(){e.setState({modalShown:!1})},e.updateReward=function(t){var n=e.props,r=n.type,o=n.id,i=n.rewardInfo.canOpenReward;if("article"===r){var a=!!i||void 0;e.props.updateArticleReward(o,t,a)}else e.props.updateAnswerReward(o,t)},e.activateReward=function(){e.onSubmitReward(re.p)},e.showRewarders=function(){e.setState({modalShown:!0})},e.addReward=e.context.authRequired((function(t,n){var r=e.props,o=r.id;"article"===r.type?e.props.createArticleTipjar(o,t):e.props.createTipjar(o,t,n)}),void 0,fe.b),e.handleRewardButtonClick=function(t){var n=e.props.onRewardButtonClick;n&&n(t),e.setState({TipjarRender:!0})},e.colseTijarDialog=function(){e.setState({TipjarRender:!1})},e.removeTradeNumber=function(){var t=e.props,n=t.id,r=t.type;e.props.removeTradeNumber(n,r)},e}return Object(a.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.rewardInfo;e&&e.isRewardable&&this.onLoad("normal"),this.props.imperativeRef&&(this.props.imperativeRef.current={activateReward:this.activateReward.bind(this)})}},{key:"componentWillUnmount",value:function(){this.props.imperativeRef&&(this.props.imperativeRef.current=null)}},{key:"render",value:function(){var e=this.props,t=e.currentUser,n=e.isAuthor,r=e.isMobile,o=e.id,i=e.reward,a=e.author,c=e.type,s=e.ua,u=e.rewardInfo,l=u.canOpenReward,f=u.isRewardable,p=u.tagline,h=u.rewardTotalMoney,b=u.rewardMemberCount,v=e.onRewardUserClick,m=e.balanceEnable;if(n&&t&&"organization"===t.userType)return null;var g=this.state,y=g.TipjarRender,O=g.modalShown;if(n&&l)return Object(d.b)("div",{children:Object(d.b)(ut,{activateReward:this.activateReward})});if(f){var j=i&&i[c][o]||{},w=j.tradeNumber,C=j.users,k=j.notice,S=Object(d.b)(ht,{modalShown:O,items:C,voteupCount:b,onLoad:this.onLoad,isRewardList:n,notice:k,onClose:this.handleListHide}),x=Object(d.b)(Ot,{rewardMemberCount:b,handleListShown:this.handleListShown,onUserClick:v,users:C,isAuthor:n});if(!n)return Object(d.c)("div",{className:"Reward",children:[Object(d.b)(wt,{tagline:p,onClick:this.handleRewardButtonClick}),x,S,Object(d.b)(B.a,{getComponent:kt,author:a,tagline:p,isMobile:r,ua:s,addReward:this.addReward,colseTijarDialog:this.colseTijarDialog,tradeNumber:w,removeTradeNumber:this.removeTradeNumber,onPaySuccess:this.onPaySuccess,TipjarRender:y,type:c,balanceEnable:m})]});var R=(Number(h)||0)/100;return Object(d.c)("div",{className:"Reward",children:[Object(d.b)(dt,{tagline:p,totalMoney:R,showRewarders:this.showRewarders}),S,x]})}return null}}]),n}(p.Component);St.propTypes={reward:g.a.object,isAuthor:g.a.bool,author:g.a.object,id:g.a.number,rewardInfo:g.a.object,currentUser:g.a.object,ua:g.a.object,type:g.a.string,isMobile:g.a.bool,balanceEnable:g.a.bool,onRewardButtonClick:g.a.func,onRewardUserClick:g.a.func,onRewardUserMoreClick:g.a.func},St.contextTypes={authRequired:g.a.func},St.defaultProps={rewardInfo:{},type:"answer",balanceEnable:!0};var xt=Object(b.compose)(Object(j.connect)(null,{updateAnswerReward:oe.H,updateArticleReward:pe.l,createArticleTipjar:pe.b,getRewardUserDetails:pe.i,getPagingArticleRewardUser:pe.f,getPagingArticleRewardUserDetails:pe.g,getArticleRewardUser:pe.e,updateEntitiesUsers:pe.m,getRewardUser:pe.h,createTipjar:pe.c,removeTradeNumber:pe.k,onRewardSuccess:pe.j,showNotification:fe.h}))(St),Rt=n(959),Et=n(18),_t=function(e){return h.a.createElement(Et.a,e,h.a.createElement("path",{d:"M16.387 10.869l-3.188-4.27A1 1 0 1 1 14.8 5.401l4.92 6.59-4.883 7.491a1 1 0 1 1-1.676-1.092l3.6-5.522H7a3 3 0 0 1-3-3V7a1 1 0 1 1 2 0v2.869a1 1 0 0 0 1 1h9.387z"}))};_t.defaultProps={name:"Jump"};var At=_t;var Tt=function(e){var t=e.className,n=e.commercial;if(!(n&&n.tail&&n.tail.url&&n.tail.message))return null;var r=n.tail,o=r.url,i=r.message;return Object(d.c)("a",{className:O()("CommercialQuestionTail",t),href:o,children:[i,Object(d.b)(At,{className:"CommercialQuestionTail-Icon",center:!0,text:!0})]})},Nt=n(1026),It=n(1081),Mt=n(33),Dt=n.n(Mt),Lt=n(858),Pt=n.n(Lt),zt=n(20),Bt=n.n(zt),Ft=n(21),Ut=n.n(Ft),qt=n(23),Vt=n.n(qt),Ht=n(17),Kt=n.n(Ht),Qt=n(22),Wt=n.n(Qt),Gt=n(158),Zt=n.n(Gt),Yt=n(63),Jt=n(936),$t=n(951),Xt=n(943),en=n(842);function tn(e,t){return e.length<=t?e:"".concat(e.substring(0,t),"...")}function nn(e){var t=e.logoUrl,n=e.productName,r=e.productDesc,o=e.link,i=void 0===o?"":o,a=e.btnText,c=void 0===a?"":a,s=e.className,u=void 0===s?"":s,l=e.productNameMaxLength,d=void 0===l?6:l,f=e.productDescMaxLength,p=void 0===f?15:f,b=e.btnTextMaxLength,v=void 0===b?4:b,m=e.type,g="".concat("pc"===m?"pc":"app","_EAnswerCard");return h.a.createElement("a",{ref:e.cardRef,onClick:e.onClick,href:i,target:"_blank",className:O()("".concat(g),u)},h.a.createElement("img",{src:t,className:"".concat(g,"-image"),alt:"logo"}),h.a.createElement("div",{className:"".concat(g,"-content")},h.a.createElement("div",{className:O()("".concat(g,"-content-appName")),style:{WebkitBoxOrient:"vertical",maxWidth:"".concat(d+1,"em")}},tn(n,d)),r&&h.a.createElement("div",{className:"".concat(g,"-content-desc"),style:{maxWidth:"".concat(p+1,"em")}},tn(r,p))),h.a.createElement("div",{className:"".concat(g,"-button"),style:{maxWidth:"".concat(v+1,"em")},onClick:e.onBtnClick},tn(c,v)),"app"===m&&h.a.createElement("div",{className:"app_EAnswerCard-bottom-close",onClick:function(t){return function(e,t){e.stopPropagation(),e.preventDefault(),t.onClose()}(t,e)}},"×"))}var rn=n(950),on=function(e){function t(e){var n;return Bt()(this,t),(n=Vt()(this,Kt()(t).call(this,e))).onceViewTrack=function(e,t){n.viewShow||(n.viewShow=!0,_.a.trackCardShow(e,{id:5642}),Object(Jt.f)(e,{trackMethod:Jt.g,tracks:t}))},n.addDSCListener=function(){try{var e=n.props.data.pluginType;if(/^android/i.test(e)){n.appPromotionUrl=null,n.downloadInfo=null,n.landingUrl=Object(en.d)(n.props.data,"plugin.".concat(e,".plugin.").concat(e,".landingUrl"),"");var t=Object(en.d)(n.props.data,"plugin.".concat(e,".plugin.").concat(e,".downloadInfo"),"{}"),r=Object(en.d)(JSON.parse(t.adjson||"{}"),"ads[0].creatives[0].asset.app_promotion_url","");r&&(rn.a({app_promotion_url:n.appPromotionUrl},"ad/getDownloadStatus").then((function(e){var t=e.status,r=e.data;t||console.log("下载插件 ad/getDownloadStatus 调用失败！"),n.setState({status:r.status})})).catch(console.log),n.appPromotionUrl||Yt.a.listen("ad/downloadStatusChange",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.status,r=void 0===t?"error":t;n.setState({status:r})}))),n.appPromotionUrl=r,n.downloadInfo=t}}catch(e){console.log(e)}},n.onBtnClick=function(e){"pc"!==Object(en.g)().os&&n.appPromotionUrl&&n.downloadInfo&&(e.stopPropagation(),e.preventDefault(),n.sendClickTrack(),rn.a(n.downloadInfo,"ad/downloadApk"))},n.sendClickTrack=function(){_.a.trackEvent(n.card,{id:5641,action:"OpenUrl"}),Object(Jt.a)({trackMethod:Jt.g,tracks:n.track.click})},n.handleClick=function(e){e.stopPropagation(),n.sendClickTrack(),"pc"!==Object(en.g)().os&&n.landingUrl&&n.downloadInfo&&(e.preventDefault(),rn.a(n.downloadInfo,"ad/open"))},n.sessionId=Zt()(),n.init(e),n.viewShow=!1,n.state={status:"ready"},n}return Wt()(t,e),Ut()(t,[{key:"init",value:function(e){var t=e.data,n=t.plugin,r=t.suger,o=void 0===r?"":r,i=(n[t.pluginType]||{}).trackUrl,a=void 0===i?{}:i,c=Object(en.g)(),s={xSuger:o,sessionId:this.sessionId,os:c.os,cardType:"".concat(c.os,"_download")};this.track=Object(en.q)(a,s)}},{key:"componentDidMount",value:function(){var e=this.props.data.visible,t=Object(en.g)();_.a.setModule(this.card,{module:"Content",module_name:"".concat(t.os,"_download")}),e&&this.onceViewTrack(this.card,this.track.view),this.addDSCListener()}},{key:"componentWillReceiveProps",value:function(e){e.data.visible&&this.onceViewTrack(this.card,this.track.view)}},{key:"render",value:function(){var e=this,t=this.props.data,n=t.author,r=void 0===n?{}:n,o=t.plugin,i=t.className,a=void 0===i?"":i,c=t.pluginType,s=(o[c]||{}).plugin,u=(void 0===s?{}:s)[c],l=Object(en.g)(),d=this.state.status,f=void 0===d?"ready":d,p={className:a,type:"pc"===l.os?"pc":"app",btnText:u.interaction||"立即下载",onClick:this.handleClick,productNameMaxLength:13,productDescMaxLength:15,btnTextMaxLength:4,onClose:this.props.onClose};return/^ios/i.test(c)?(p.logoUrl=u.icon,p.productName=u.name,u.score>0&&(p.productDesc="Appstore 评分：".concat(u.score)),p.link=u.landingUrl):/^android/i.test(c)&&(p.logoUrl=u.icon||r.avatarUrl||"",p.productName=u.name,p.link=u.landingUrl,p.onBtnClick=this.onBtnClick,Xt.c[f]&&(p.btnText=Xt.c[f])),p.link?h.a.createElement(nn,Dt()({cardRef:function(t){e.card=t}},p)):null}}]),t}(h.a.Component);on.propTypes={data:g.a.object.isRequired};var an=function(e){var t=e.data;return t&&t.plugin&&t.plugin[t.pluginType]?h.a.createElement($t.a,null,h.a.createElement(on,e)):null},cn=function(e){function t(e){var n;return Bt()(this,t),(n=Vt()(this,Kt()(t).call(this,e))).onceViewTrack=function(e,t){n.viewShow||(n.viewShow=!0,_.a.trackCardShow(n.card,{id:5642}),Object(Jt.f)(e,{trackMethod:Jt.g,tracks:t}))},n.handleClick=function(e){e.stopPropagation(),_.a.trackEvent(n.card,{id:5641,action:"OpenUrl"}),Object(Jt.a)({trackMethod:Jt.g,tracks:n.track.click});var t=Object(en.d)(n.props.data,"plugin.leads.plugin.leads",{}),r=n.props.data,o=r.contentType,i=r.contentToken;t.isCanvas&&(e.preventDefault(),t.creativeId=Object(en.f)(),rn.a(t,"ad/openForm"));var a=t.cardType,c=t.hashId;if("message"===a){e.preventDefault();var s={inbox_id:c,initial_message:"",auto_focus:!0,title:"",source_type:o,source_id:i};rn.a(s,"base/openInbox")}},n.isHiddenEcommerceAd=function(e){return!(!e.isCanvas||e.adjson)||!(e.isCanvas||e.token||e.landingUrl)},n.sessionId=Zt()(),n.init(e),n.viewShow=!1,n}return Wt()(t,e),Ut()(t,[{key:"init",value:function(e){var t=e.data,n=t.plugin,r=t.suger,o=void 0===r?"":r,i=t.pluginType,a=Object(en.d)(e.data,"plugin.leads.plugin.leads",{}).cardType,c=(n[i]||{}).trackUrl,s=void 0===c?{}:c,u=Object(en.g)().os,l={xSuger:o,sessionId:this.sessionId,os:u,cardType:a};this.track=Object(en.q)(s,l)}},{key:"componentDidMount",value:function(){var e=this.props.data.visible,t=Object(en.g)();_.a.setModule(this.card,{module:"Content",module_name:"".concat(t.os,"_leads")}),e&&this.onceViewTrack(this.card,this.track.view);var n=Object(en.d)(this.props.data,"plugin.leads.plugin.leads",{}),r=n.isCanvas,o=n.adjson;r&&rn.a({adjson:o},"ad/preload")}},{key:"componentWillReceiveProps",value:function(e){e.data.visible&&this.onceViewTrack(this.card,this.track.view)}},{key:"render",value:function(){var e=this,t=this.props.data,n=t.author,r=void 0===n?{}:n,o=t.plugin,i=void 0===o?{}:o,a=t.className,c=void 0===a?"":a,s=t.pluginType,u=Object(en.d)(i,"".concat(s,".plugin.").concat(s),{});return this.isHiddenEcommerceAd(u)?null:h.a.createElement(nn,Dt()({cardRef:function(t){e.card=t}},{className:c,type:"app",logoUrl:r.avatarUrl,productName:r.name,productNameMaxLength:13,productDesc:u.desc,productDescMaxLength:15,link:u.landingUrl||"javascript:",btnText:u.interaction||"立即咨询",btnTextMaxLength:4,onClick:this.handleClick,onClose:this.props.onClose}))}}]),t}(h.a.Component);cn.propTypes={data:g.a.object.isRequired};var sn=function(e){var t=e.data;return t&&t.plugin&&t.plugin[t.pluginType]?h.a.createElement($t.a,null,h.a.createElement(cn,e)):null},un=function(e){function t(){var e,n;Bt()(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Vt()(this,(e=Kt()(t)).call.apply(e,[this].concat(o)))).state={display:!1},n.onClose=function(){n.setState({display:!0})},n.getContent=function(e){var t=e.data;if(!t||!t.plugin)return null;var r=(t=Object(en.b)(Object(ce.camelizeKeys)(t))).plugin,o=Object(en.g)();if(r.androidDownload||r.iosDownload){var i="".concat(o.os,"Download");if("pc"===o.os)i=("mac"===o.pc?["iosDownload","androidDownload"]:["androidDownload","iosDownload"]).find((function(e){return r[e]}))||"";return h.a.createElement(an,Dt()({},e,{data:Pt()({},t,{pluginType:i}),onClose:n.onClose}))}return r.leads&&"pc"!==o.os?h.a.createElement(sn,Dt()({},e,{data:Pt()({},t,{pluginType:"leads"}),onClose:n.onClose})):null},n}return Wt()(t,e),Ut()(t,[{key:"render",value:function(){var e=this.props.data,t=this.state.display;return e&&e.plugin&&!t?h.a.createElement(h.a.Fragment,null,this.getContent({data:e})):null}}]),t}(h.a.Component),ln=n(236),dn=n(449);function fn(e){var t=e.loadBrandContentPlugin,n=e.contentType,r=e.contentToken,o=e.author,i=e.plugin,a=Object(p.useCallback)((function(){t(n,r)}),[n,r,t]),c="organization"===o.userType&&!i;if(Object(p.useEffect)((function(){c&&a()}),[c,a]),!i)return null;var s={contentType:n,contentToken:r,suger:{},author:o,plugin:i,visible:!0};return Object(d.b)("div",{className:"OrgEquityPlugin",children:Object(d.b)(un,{data:s})})}fn.propTypes={contentType:g.a.oneOf(["answer","article"]).isRequired,contentToken:g.a.oneOfType([g.a.number,g.a.string]).isRequired,author:g.a.object.isRequired};var pn=Object(b.compose)(Object(ln.a)(null),Object(j.connect)((function(e,t){var n=t.contentType,r=t.contentToken;return{plugin:Object(dn.c)(e,{contentType:n,contentToken:r})}}),{loadBrandContentPlugin:dn.b}))(fn),hn=n(1124),bn=n(369),vn=n(1165),mn=n(1317),gn=[{title:"知乎",imageSrc:"https://pic4.zhimg.com/80/v2-88158afcff1e7f4b8b00a1ba81171b61_720w.png",description:"发现更大的世界",button:"打开"},{title:"浏览器",imageSrc:"https://picb.zhimg.com/80/v2-a448b133c0201b59631ccfa93cb650f3_1440w.png",description:"",button:"继续"}],yn={uc:{imageSrc:"https://pic4.zhimg.com/80/v2-eb129ee601fe0521fbc05703a615ddd5_1440w.png",title:"UC 浏览器"},qq:{imageSrc:"https://pic1.zhimg.com/80/v2-211dd15e1000c599f5b89ecf4e1eb3b6_1440w.png",title:"QQ 浏览器"},wx:{imageSrc:"https://pic1.zhimg.com/80/v2-05fe05b84411fc88790189e95d7e84aa_1440w.png",title:"微信"},huawei:{imageSrc:"https://pic1.zhimg.com/80/v2-88a3ad0d3764917daaf92f5133a7024d_1440w.jpeg",title:"华为浏览器"},safari:{imageSrc:"https://pic2.zhimg.com/80/v2-da7d9e4b6a7ddba507299bcf5a4d0600_1440w.png",title:"Safari"},chrome:{imageSrc:"https://picb.zhimg.com/80/v2-a448b133c0201b59631ccfa93cb650f3_1440w.png",title:"Chrome"},default:{imageSrc:"https://picb.zhimg.com/80/v2-a448b133c0201b59631ccfa93cb650f3_1440w.png",title:"浏览器"}},On=function(e){var t=e.show,n=e.onCancel,r=e.onSubmit,o=e.id,i=e.type,a=Object(bn.b)(),c=a.origin.toLowerCase(),s=a.Android?yn.chrome.imageSrc:yn.safari.imageSrc,u=P.a.get("question:firstCheckedTrue");Object(p.useEffect)((function(){u&&t&&!a.Wechat&&(location.href="zhihu://".concat(i,"/").concat(o))}),[u,t,i,o,a.Wechat]);var l="";return l=a.UC?"uc":a.Wechat?"wx":a.MQQBrowser?"qq":/huawei|honor/g.test(c)?"huawei":/chrome/g.test(c)||/crios/g.test(c)?"chrome":a.Safari?"safari":"default",gn[1].title=yn[l].title,gn[1].imageSrc="default"===l?s:yn[l].imageSrc,Object(d.c)(mn.a,{className:"ModalWrap",show:t,onCancel:n,hideIcon:!0,maskClosable:!1,children:[t&&Object(d.b)(vn.a,{className:"ModalWrap-body"}),Object(d.c)("div",{className:"ModalWrap-content",children:[Object(d.b)("div",{className:"ModalWrap-title",children:"继续浏览内容"}),gn.map((function(e,t){return Object(d.c)("div",{className:"ModalWrap-item",children:[e.imageSrc&&Object(d.b)("div",{className:"ModalWrap-itemImg",children:Object(d.b)("img",{src:e.imageSrc})}),Object(d.c)("div",{className:"ModalWrap-itemContent",children:[Object(d.b)("div",{className:"ModalWrap-itemTitle",children:e.title}),e.description&&Object(d.b)("div",{className:"ModalWrap-itemDesc",children:e.description})]}),Object(d.b)("div",{className:"ModalWrap-itemBtn",onClick:function(){return function(e){0===e?(P.a.set("question:firstCheckedTrue","true"),r()):n()}(t)},children:e.button})]},t)}))]})]})},jn=n(406),wn=n(1059),Cn=function(e){var t=e.show,n=e.children,r=e.className,o=Object(p.useRef)();return Object(p.useEffect)((function(){var e=null;return t?(document.body.style.overflow="hidden",e=Object(jn.a)(o.current)):document.body.style.overflow="auto",function(){e&&e()}}),[t]),Object(d.b)("div",{className:r,children:Object(d.c)("div",{ref:o,children:[Object(d.b)("div",{className:O()({"ModalLoading-background":t})}),Object(d.c)("div",{className:O()("ModalLoading-content",{"ModalLoading-modalShow":t}),children:[n,Object(d.b)(wn.a,{})]})]})})},kn=n(1170),Sn=n(1079);function xn(e){var t=e.questionId,n=e.title,r=e.href,o=e.zaTitleId,i=e.showStickyMark,a=e.onClick;return Object(d.c)("div",{itemProp:"zhihu:question",itemType:"http://schema.org/Question",itemScope:!0,children:[Object(d.b)("meta",{itemProp:"url",content:"https://www.zhihu.com/question/".concat(t)}),Object(d.b)("meta",{itemProp:"name",content:n}),i&&Object(d.b)(Sn.a,{}),Object(d.b)(C.Link,Object.assign({to:r,target:"_blank","data-za-detail-view-element_name":"Title"},o&&{"data-za-detail-view-id":o},{onClick:a,children:n}))]})}xn.propTypes={questionId:g.a.number.isRequired,title:g.a.string.isRequired,href:g.a.string.isRequired,zaTitleId:g.a.number,showStickyMark:g.a.bool,onClick:g.a.func};var Rn=n(32),En=n(1010),_n=n(1273);function An(e){var t=e.markInfo,n=re.G[t.markType];if(!n)return null;var r=t.roundtable&&"https://www.zhihu.com/roundtable/".concat(t.roundtable.urlToken);return r?Object(d.b)("a",{href:r,children:n}):Object(d.b)("span",{children:n})}function Tn(e){var t=e.markInfos,n=Object(p.useMemo)((function(){return t.filter((function(e){return re.G[e.markType]})).map((function(e,t){return Object(d.c)(p.Fragment,{children:[0!==t&&"、",Object(d.b)(An,{markInfo:e})]},t)}))}),[t]);return n.length?Object(d.c)(En.CJKSpace,{children:["收录于",n]}):null}function Nn(e){var t,n=e.id,r=e.voteupCount,o=e.markInfos,i=e.actorToken,a=e.action,c=e.concernedUpvoters,s=Object(Rn.a)(e,["id","voteupCount","markInfos","actorToken","action","concernedUpvoters"]);return Object(d.b)(ne.a,{trackCardShow:!0,view:{id:8257},children:Object(d.c)(v.Text,Object.assign({color:"GBL05A",fontSize:14,mt:"10px",mb:"-4px"},s,{children:[o&&Object(d.c)(d.a,{children:[Object(d.b)(Tn,{markInfos:o}),Boolean(r)&&" · "]}),Object(d.b)("span",{onClick:function(){return _.a.trackEvent(null,{id:8258,action:"Click"})},children:Object(d.b)(_n.a,{id:n,type:"answer",voteupCount:r,upvotedFollowees:null!==(t=null==c?void 0:c.filter((function(e){return i!==e.urlToken})))&&void 0!==t?t:[],too:"voted"===a})})]}))})}var In=n(1314),Mn=n(1288),Dn=n(1310),Ln=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.contentExpanded,r=t.unescapable,o=e.labelInfo,i=e.hermesLabel;return Object(d.b)(p.Fragment,{children:!n&&!r&&Object(d.b)(Nt.a,{labelInfo:o||i})})},Pn=n(1276),zn=n(1370),Bn=function(){return Object(d.c)("div",{className:"SelfVisibleLable-wrap",children:[Object(d.b)(zn.a,{className:"SelfVisibleLable-lockIcon",width:16,center:!0}),"仅自己可见"]})},Fn=function(e){var t=e.answer,n=e.canCollapse,r=e.showReviewingLabel,o=t.collapsedBy,i=t.reviewInfo,a=(i=void 0===i?{}:i).isReviewing,c=i.tips,s=t.isVisible,u=t.relationship,l=(u=void 0===u?{}:u).isAuthor,f=t.visibleOnlyToAuthor;return l&&f?Object(d.b)(Bn,{}):a&&s?Object(d.b)("div",{className:"AnswerItem-status",children:c},"negativeLabels"):r&&!1===s&&l?Object(d.b)("div",{children:Object(d.b)(Pn.a,{})},"negativeLabelsReviewing"):"org"!==o||n?null:Object(d.c)("div",{className:"AnswerItem-status",children:["回答被提问机构移至隐藏区（",Object(d.b)("a",{href:"/org-intro#org-question",target:"_blank",children:"为什么？"}),"）"]},"negativeLabels")},Un=function(e){var t=e.isNormal,n=void 0===t||t,r=e.collapsedBy,o=e.suggestEdit,i=e.collapseReason,a=e.isCollapsed,c=e.question,s=(c=void 0===c?{}:c).brand,u=(s=void 0===s?{}:s).isPuQuestion;return!n&&(null==o?void 0:o.unnormalDetails)?{abnormalDetailProps:{abnormalDetail:o.unnormalDetails}}:("community"===r||u)&&a?{collapseReasonProps:{collapseReason:i}}:null},qn=function(e){var t=e.answer,n=e.canCollapse,r=e.hideCommercialInviteLabel,o=t.collapsedBy,i=t.relevantInfo,a=(i=void 0===i?{}:i).relevantType,c=i.brandSpecialExtra;if(Object(oe.m)(t)||Object(oe.n)(t)||"org"===o&&!n){if("brand_special"===a&&!r)return{type:"answer",data:c};if("brand_best"===a)return{data:{name:"品牌精选",subText:"本回答由品牌设为精选"}}}return null},Vn=function(e){var t=e.annotationDetail,n=e.reviewInfo,r=(n=void 0===n?{}:n).isReviewing,o=e.isNormal,i=void 0===o||o,a=e.collapsedBy;return!r&&i&&"community"!==a&&t?{annotationDetail:t}:null};n(1308);function Hn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var Kn=function(e){return"plain"===e||"special-plain"===e},Qn=Kn,Wn={allowed:"允许规范转载",need_payment:"允许付费转载",disallowed:"禁止转载"},Gn=["zhi-hu-ri-bao-51-41"],Zn=Object(w.createSelector)((function(e,t){return Object.assign({},e.entities.answers[t.answer.id]||t.answer,{videoContribution:t.answer.videoContribution})}),(function(e,t){return e.entities.questions[t.answer.question.id]}),(function(e,t){return t?Object.assign({},e,{question:Object.assign({},e.question,t)}):e})),Yn=function(e){Object(s.a)(n,e);var t=Hn(n);function n(){var e,r,o,a,s,u;Object(i.a)(this,n);for(var l=arguments.length,f=new Array(l),h=0;h<l;h++)f[h]=arguments[h];return(e=t.call.apply(t,[this].concat(f))).state={commentsShown:!1,commentsAutoFocus:!0,reportModalShown:!1,deleteModalShown:!1,collapseModalShown:!1,favlistsShown:!1,editing:!1,commentPattern:"fixed",addAnnotationModalShown:!1,cancelAnnotationModalShown:!1,guideShown:!1,shareVideoQuery:e.getShareVideoId(),shouldShowVideoDetails:!1,contentExpanded:e.props.expanded,hasFetchedLabels:!1,showWechatExpand:!1,autoExpand:!1,shownLoadingBar:!1,shownCatalogModal:!1,wxIsReady:!1},e.answerFormRef=Object(p.createRef)(),e.rewardContainerRef=Object(p.createRef)(),e.richContentRef=Object(p.createRef)(),e.handleLoadedNext=function(){e.setState({wxIsReady:!0}),e.state.shownLoadingBar&&e.createOpenInAppHandler(e.state.autoExpand?"expand_answer2":"expand_answer1")(),e.setState({shownLoadingBar:!1})},e.showOiaModal=function(){var t=e.props,n=t.blockReading,r=t.itemProp,o=t.isBaidu,i=t.shouldAllAutoExpand;("mainEntityOfPage"===r||"acceptedAnswer"===r)&&(document.referrer.includes("zhihu.com")&&i||!o&&!document.referrer.includes("sm.cn")&&n)&&e.setState({showWechatExpand:!0,autoExpand:!0})},e.onCloseReward=function(){var t=e.props.answer.id;P.a.set("isRewardable",!1),e.props.updateAnswerReward(t,"")},e.openModal=function(t,n){e.setState(Object.assign({},n))},e.openDeleteModal=function(){setTimeout((function(){e.setState({deleteModalShown:!0})}))},e.closeModal=function(){e.setState({commentsShown:!1});var t=e.props.onCloseComment;"function"==typeof t&&t()},e.closeDeleteModal=function(){e.setState({deleteModalShown:!1})},e.toggleCatalogModal=function(){e.setState({shownCatalogModal:!e.state.shownCatalogModal})},e.disableAuth=(r=e.props,o=r.router,a=(o=void 0===o?{}:o).location,s=(a=void 0===a?{}:a).pathname,u=r.isBaidu,r.isMobile&&!e.context.currentUser&&!u&&!s.startsWith("/topic")),e.loadAnswerConcernedVoters=function(){var t=e.props,n=t.concernedUpvoters,r=t.answer,o=t.loadAnswerConcernedVoters;!n&&e.context.currentUser&&o(r.id)},e.handleExpand=function(t){var n=e.props,r=n.onToggleExpand,o=n.trackPromotionClick;t&&(e.loadAnswerConcernedVoters(),o&&o()),r&&r(t),e.setState({contentExpanded:t})},e.handleReshipmentSettings=function(t){var n=e.props,r=n.answer.id,o=n.updateAnswerReshipmentSettings,i=n.fillCurrentUserIfNeeded;"need_payment"===t?Promise.resolve(i(["caEnabled"])).then((function(){e.props.currentUser.caEnabled?o(r,t):window.open("/copyright/invite")})):o(r,t)},e.handleLoadAnswerForSettings=function(){var t=e.props,n=t.answer.id;(0,t.loadAnswerForSettings)(n)},e.handleDeleteAnswer=function(){var t=e.props,n=t.answer.id;(0,t.deleteAnswer)(n)},e.handlePositionStatusChange=function(t){e.setState({positionStatus:t})},e.handleCollapseModalShow=function(){e.setState({collapseModalShown:!0})},e.handleCollapseModalHide=function(){e.setState({collapseModalShown:!1})},e.handleUpdateAnswerCollapsed=function(){var t=e.props,n=t.answer,r=n.id,o=n.collapsedBy,i=t.updateAnswerCollapsed,a=t.showNotification;return"community"===o?a("该回答因违反社区规范已被管理员折叠，暂无法公开","red"):i(r)},e.handleUpdateAnswerStick=function(){var t=e.props,n=t.answer.id;return(0,t.updateAnswerStick)(n)},e.handleRestoreAnswer=function(){var t=e.props,n=t.answer,r=n.id,o=n.question;(0,t.restoreAnswer)(o.id,r)},e.handleStartEditAnswer=function(){var t=e.props,n=t.draftStatus,r=t.hasPublishingDraft,o=t.isMobile;n&&n.loading?D.a.alert("草稿正在加载中……"):r?D.a.alert("你有一份对该回答的修改正在发布中，请等待发布完成后再次修改。"):o?e.context.startAddAnswer(e.props.answer.id):e.setState({editing:!0},(function(){e.answerFormRef.current.focus()}))},e.handleCancelEditAnswer=function(){e.setState({editing:!1});var t=e.props,n=t.onCloseEditing,r=t.onCloseComment;"function"==typeof r&&r(),"function"==typeof n&&n()},e.handleSubmitAnswer=function(t){var n=e.props,r=n.answer.id,o=n.updateAnswer;return e.handleCancelEditAnswer(),o(r,t).then((function(t){return _.a.trackEvent(e.contentItem,{action:"StatusReport"},{status:{result:"Success",event:{action:"Edit"}}}),t}))},e.handleReportOpen=function(){var t=e.props.zaInfos.report;_.a.trackEvent(e.contentItem,Object.assign({action:"Report",element:"Button",is_intent:!0},t&&{id:t})),e.context.authRequired((function(){return e.setState({reportModalShown:!0})}),re.V.report)()},e.handleReportHide=function(){e.setState({reportModalShown:!1})},e.handleFavlistsShown=function(t){var n=e.props,r=n.shouldOia,o=n.zaInfos.favlists;_.a.trackEvent(e.favButtonRef,Object.assign({action:"Collect",element:"Button",is_intent:!0},o&&{id:o})),r?e.createOpenInAppHandler("collect_answer")(t):e.disableAuth?e.handleToggleGuide():e.context.authRequired((function(){return e.setState({favlistsShown:!0})}),re.V.favlists)()},e.handleFavlistHide=function(){e.setState({favlistsShown:!1})},e.handleLogMoreClick=function(){var t=e.props.zaInfos.options;_.a.trackEvent(e.contentItem,Object.assign({action:"Click",element_name:"MoreAction"},t&&{id:t}))},e.handleShowAddAnnotationModal=function(){return e.setState({addAnnotationModalShown:!0})},e.handleCloseAddAnnotationModal=function(){return e.setState({addAnnotationModalShown:!1})},e.handleShowCancelAnnotationModal=function(){return e.setState({cancelAnnotationModalShown:!0})},e.handleCloseCancelAnnotationModal=function(){return e.setState({cancelAnnotationModalShown:!1})},e.handleToggleGuide=function(){e.setState({guideShown:!e.state.guideShown})},e.handleClickVideoMoreButton=function(){e.setState({shouldShowVideoDetails:!1})},e.startEditing=function(){var t=e.props,n=t.isAuthor,r=t.editable;e.context.currentUser&&n&&r&&e.handleStartEditAnswer()},e.addRewardTagline=function(t){var n=e.props.answer.id;Object(pe.a)(t,n)},e.createOpenInAppHandler=function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.props,o=r.answer,i=o.type,a=o.id,s=r.blockReading,u=r.isSpecialQuestionOrAnswer;return function(r,o){if(r&&r.preventDefault(),s&&_.a.trackEvent(Object(c.a)(e),{id:5550,action:"Click"},{button:{text:"openapp"}}),u)location.href="zhihu://".concat(i,"/").concat(a,"?utm_app_name=zhihu_check");else{var l=Ee.a[o]||Ee.a[t],d=Object.assign({},s&&{yyb_ckey:"CK1430255776739"},{preventToOIA:n});Ee.b[l]&&(d.launch_button=Ee.b[l]),Object(ee.c)(Object(ye.a)({type:i,id:a}),d)}}},e.renderLabels=function(){var t=e.props.answer,n=t.isNormal;if((void 0===n||n)&&e.isPaidAnswer)return{labels:[],editingLabels:[]};var r=e.props,o=r.useNewLabels,i=r.canCollapse,a=r.relatedTo,c=r.showReviewingLabel,s=r.hideCommercialInviteLabel,u=e.state,l=u.contentExpanded,f=u.editing,p=Fn({answer:t,canCollapse:i,showReviewingLabel:c}),h=Un(t),b=qn({answer:t,canCollapse:i,hideCommercialInviteLabel:s}),v=Vn(t);if(!o){var m=Object(d.b)(It.a,Object.assign({useOldLabels:!0,item:{isLabeled:!0}},h,{commercialProps:b,annotationProps:v,showLegacyPositiveLabel:Object(oe.n)(t),editing:f}));return{labels:[p,m],editingLabels:[m]}}if(p||h)return{labels:[p,Object(d.b)(It.a,Object.assign({item:{isLabeled:!0}},h),"labels")],editingLabels:[]};var g=[Object(d.b)(It.a,{item:t,commercialProps:b,annotationProps:v,editing:f},"labels")];return{labels:l||a?g:[],editingLabels:g}},e.renderPrefix=function(){var t=e.props,n=t.answer,r=t.relatedTo,o={contentExpanded:e.state.contentExpanded,unescapable:Boolean(r)};return Ln(n,o)},e.renderVoteButton=function(){var t=e.props,n=t.answer,r=t.answer,o=r.question,i=o.questionType,a=o.isMuted,c=r.relationship,s=(c=void 0===c?{}:c).isRecognized,u=c.voting,l=r.attachment,f=r.voteupCount,p=t.shouldOia,h=t.zaInfos,b=h.voteUp,v=h.voteDown,m=t.isMuteSpecial,g=t.isMuteFreeze,y=t.isAuthor,O=e.context.currentUser,j=e.state.positionStatus,w="commercial"===i;return e.isLegacyVideoAnswer?Object(d.b)(at,{answer:n,id:l.attachmentId,voteupCount:f,voting:u,isOwner:y,disabled:w&&a||m||g,currentUser:O}):Object(d.b)(nt.a,Object.assign({answer:n,disabled:w&&a||m||g},p&&{onClick:e.createOpenInAppHandler("vote_answer")},{disableAuth:e.disableAuth,isRecognized:s,handleToggleGuide:e.handleToggleGuide,positionStatus:j,zaIds:{voteUp:b,voteDown:v}}),"vote")},e}return Object(a.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.expanded,r=t.byComment,o=t.editing,i=t.loadVideoDetails,a=t.isSearchSpecialSource,c=t.isMobile,s=t.isWechat,u=this.state.shareVideoQuery;if(u&&i(u).then((function(){e.setState({shouldShowVideoDetails:!0})})),n&&this.loadAnswerConcernedVoters(),r&&setTimeout((function(){return e.setState({commentsShown:Boolean(r)})})),o&&this.startEditing(),c&&!a&&this.showOiaModal(),c&&s)if(document.addEventListener("WeixinJSBridgeReady",(function(){e.handleLoadedNext()})),"complete"===document.readyState)this.handleLoadedNext();else{window.addEventListener("load",(function t(){window.removeEventListener("load",t),e.handleLoadedNext()}))}}},{key:"componentDidUpdate",value:function(e){!this.props.editing||e.editing||this.state.editing||this.startEditing()}},{key:"componentWillReceiveProps",value:function(e){var t=this,n=this.props.answer,r=n.reshipmentSettings,o=n.commentPermission,i=e.answer,a=i.reshipmentSettings,c=i.commentPermission;!r&&a&&!o&&c&&setTimeout((function(){return t.settingsTogglerEl.click()}))}},{key:"getShareVideoId",value:function(){var e=this.props,t=e.location;return e.isMobile?t.query.preview_video_id:null}},{key:"renderReshipmentSettings",value:function(e){var t=this;return Object.keys(Wn).map((function(n){return Object(d.b)(M.a,{onClick:function(){return t.handleReshipmentSettings(n)},checked:n===e,children:Wn[n]},n)}))}},{key:"renderAnswerExtraInfo",value:function(){var e=this.props,t=e.answer,n=e.actor,r=e.action,o=e.concernedUpvoters,i=e.isHuman,a=e.useNewLabels,c=e.isMobile,s=t.id,u=t.voteupCount,l=t.markInfos,f=t.isNormal;if(!((!i||!c)&&(void 0===f||f)))return null;var p=(null==l?void 0:l.length)>0&&!a;return p||u?Object(d.b)(Nn,{id:s,voteupCount:u,markInfos:p&&l,actorToken:null==n?void 0:n.urlToken,action:r,concernedUpvoters:o},"AnswerItemExtraInfo"):null}},{key:"renderSettings",value:function(){var e=this,t=this.context.currentUser,n=this.props,r=n.answer,o=r.collapsedBy,i=r.reshipmentSettings,a=r.commentPermission,c=r.question.questionType,s=r.rewardInfo,u=(s=void 0===s?{}:s).isRewardable,l=void 0!==u&&u,f=r.relevantInfo,p=n.answer,h=n.canCollapse,b=n.isMobile,v=n.isAuthor;return t&&v?i&&a?Object(d.c)(I.c,{toggler:Object(d.b)(N.c,{preset:"plain",onRef:function(t){e.settingsTogglerEl=t},icon:k.a,label:!b&&"设置"}),reversed:!0,menuClassName:"AnswerItem-selfMenu",itemClassName:"AnswerItem-selectMenuItem",children:[this.renderReshipmentSettings(i),Object(d.b)(I.a,{}),Object(d.b)(Oe.c,{target:p,onChange:this.props.updateAnswerCommentPermission,current:p.commentPermission}),Object(d.b)(I.a,{}),l&&Object(d.b)(I.b,{onClick:this.onCloseReward,children:"关闭赞赏"}),Object(d.b)(I.b,{onClick:this.openDeleteModal,children:"删除"}),"commercial"===c&&h&&"nobody"===o&&(!f||"brand_special"!==f.relevantType)&&[Object(d.b)(I.a,{},"MenuDivider"),Object(d.b)(I.b,{onClick:this.handleUpdateAnswerCollapsed,children:"隐藏"},"MenuItem")]]},"settings"):Object(d.b)(N.c,{preset:"plain",onClick:this.handleLoadAnswerForSettings,icon:k.a,label:!b&&"设置"},"settings"):null}},{key:"renderReshipment",value:function(e,t){var n=this;return"need_payment"===t?Object(d.b)(I.b,{onClick:function(){_.a.trackEvent(n.contentItem,{action:"Authorize",element:"Button",is_intent:!0})},tag:"a",href:"/copyright/apply?answer=".concat(e),target:"_blank",children:"申请授权"}):"disallowed"===t?Object(d.b)(I.b,{tag:"a",target:"_blank",href:"/term/zhihu-terms#sec-licence-6",children:"禁止转载"}):null}},{key:"renderOptions",value:function(){var e=this;if(!this.context.currentUser)return null;var t=this.props,n=t.answer,r=t.canCollapse,o=t.renderExtraOptions,i=t.permission.canBrandAdminEdit,a=t.isMobile,c=t.isAuthor,s=n.id,u=n.reshipmentSettings,l=n.collapsedBy,p=n.question,h=p.questionType,b=p.brand,v=(b=void 0===b?{}:b).isPuQuestion,m=n.annotationAction,g=void 0===m?[]:m,y=n.annotationDetail,O={toggler:Object(d.b)(N.c,{preset:"plain",className:"OptionsButton",icon:S.a,"aria-label":"更多"}),reversed:!0,onOpen:this.handleLogMoreClick,menuClassName:"AnswerItem-selfMenu",itemClassName:"AnswerItem-selfMenuItem"},j="commercial"===h,w="nobody"!==l;return c?null:Object(f.e)(I.c,Object.assign({},O,{key:"options"}),a&&Object(d.b)(kn.a,{answer:n}),r&&!j&&Object(d.b)(I.b,{onClick:w?this.handleUpdateAnswerCollapsed:this.handleCollapseModalShow,children:w?"取消隐藏":"隐藏"}),i&&j&&!w&&!v&&Object(d.b)(I.b,{onClick:this.handleUpdateAnswerCollapsed,children:"隐藏"}),g&&g.some((function(e){return re.d.add===e}))&&!y&&Object(d.b)(I.b,{onClick:this.handleShowAddAnnotationModal,children:"标记内容"}),g&&g.some((function(e){return re.d.cancel===e}))&&y&&Object(d.b)(I.b,{onClick:this.handleShowCancelAnnotationModal,children:"撤销标记"}),Object(d.b)(I.b,{onClick:this.handleReportOpen,children:"举报"}),this.renderReshipment(s,u),o&&o({itemClassName:"AnswerItem-selfMenuItem",getContainer:function(){return e.contentItem}}))}},{key:"renderMeta",value:function(){var e=function(e){var t=e.thumbnail,n=e.voteupCount,r=e.question.id,o=e.id,i=e.createdTime,a=e.updatedTime,c=e.commentCount;return{image:t,upvoteCount:n,url:"https://www.zhihu.com/question/".concat(r,"/answer/").concat(o),dateCreated:new Date(1e3*i).toISOString(),dateModified:new Date(1e3*a).toISOString(),commentCount:c}}(this.props.answer);return Object.keys(e).map((function(t){return Object(d.b)("meta",{itemProp:t,content:e[t]},t)}))}},{key:"renderBrandQuestionPrizeTip",value:function(){var e=this.props.answer,t=e.id,n=e.question.prize,r=(n=void 0===n?{}:n).winnersAnswerTokens,o=n.prizes;if(!n.status)return null;var i=["一","二","三"],a=null;return o&&r&&r.forEach((function(e,n){e.includes(t)&&null===a&&(a=o&&o[1]&&o[1].name?"得".concat(i[n],"等奖"):"奖")})),a&&Object(d.c)("div",{className:"AnswerItem-brandQuestionPrizeTip",children:["该回答在有奖问答中获",a]})}},{key:"renderBrandEntityTrack",value:function(){var e=this.state.contentExpanded,t=this.props,n=t.answer,r=t.expanded,o=t.isBrandAnswer,i=n.question;return(r||e)&&(i&&"commercial"===i.questionType||o)?Object(d.b)(Qe.a,{type:n.type,id:n.id}):null}},{key:"renderEditTime",value:function(){var e,t,n,r=this.props,o=r.shouldOia,i=r.answer,a=i.id,c=i.createdTime,s=i.updatedTime,u=i.question.id,l=i.playCount,f=i.attachment,p=l||(null==f||null===(e=f.zvideo)||void 0===e?void 0:e.playCount)||(null==f||null===(t=f.video)||void 0===t||null===(n=t.videoInfo)||void 0===n?void 0:n.playCount)||0,h="".concat(re.E,"/question/").concat(u,"/answer/").concat(a);return Object(d.b)(ct.a,Object.assign({created:c,updated:s,href:h},this.isVideoAnswer&&p>0&&{videoPlayCount:Number(p)},o&&{onClick:this.createOpenInAppHandler("click_answer")}))}},{key:"render",value:function(){var e,t,n=this,i=this.props,a=i.answer,c=i.reward,s=i.answer,u=s.id,l=s.isNormal,f=void 0===l||l,p=s.isDelete,h=s.question,b=s.rewardInfo,m=s.question,g=m.title,y=m.id,j=m.questionType,w=m.commercial,C=m.brand,k=(C=void 0===C?{}:C).isPuQuestion,S=s.author,_=s.excerpt,I=s.content,M=s.enableConvert,L=s.editableContent,P=s.commentCount,B=s.adminClosedComment,F=s.collapsedBy,U=s.isSticky,q=s.thumbnail,V=s.thumbnailExtraInfo,H=s.reviewInfo,K=(H=void 0===H?{}:H).isReviewing,Q=H.editType,G=s.relevantInfo,Z=(G=void 0===G?{}:G).relevantType,Y=s.annotationDetail,J=s.paidInfo,$=void 0===J?{}:J,ee=s.creatorRightsNotification,te=s.attachment,ne=s.vessayInfo,oe=s.videoContribution,ie=i.relatedTo,ae=i.editable,ce=i.byComment,se=i.draft,ue=i.expanded,le=i.lastreadTouchable,de=i.preset,fe=i.canCollapse,pe=i.canStick,he=i.itemProp,be=void 0===he?"answer":he,ve=i.addAnnotation,me=i.cancelAnnotation,Oe=i.showNotification,ke=i.dataZaIndex,Se=i.blockReading,xe=i.isWechat,Re=i.isHuaweiBrowser,Ee=i.isHonor,Ie=i.lessExcerpt,Me=i.isHuman,De=i.ua,Le=i.shouldSpecialOia,Pe=i.shareVideoDetail,ze=i.trackPromotionClick,Be=i.formatContent,Fe=i.zaInfos,Ue=Fe.expand,qe=Fe.title,Ve=Fe.thank,Qe=Fe.toggleComment,nt=Fe.share,rt=Fe.getCommentAction,ot=i.handleToggleSticky,it=i.renderActionButtons,at=i.permission.canBrandAdminEdit,st=i.readContentRightsNotification,ut=i.ecommerce,lt=i.isMobile,dt=i.canAbstract,ft=i.isBaidu,pt=i.isMuteSpecial,ht=i.isMuteFreeze,bt=i.isAuthor,vt=i.shouldUseArticleCard,mt=i.isTopic,gt=i.xiaomi,yt=i.showCommentForOia,Ot=i.pathname,jt=i.richContentKey,wt=i.isQuestionPage,Ct=i.useNewEditorSetting,kt="function"==typeof ot,St=this.context.currentUser,Et="".concat(re.E,"/question/").concat(y,"/answer/").concat(u),_t=this.state,At=_t.reportModalShown,Nt=_t.deleteModalShown,It=_t.collapseModalShown,Mt=_t.favlistsShown,Dt=_t.editing,Lt=_t.commentsShown,Pt=_t.commentsAutoFocus,zt=_t.commentPattern,Bt=_t.addAnnotationModalShown,Ft=_t.cancelAnnotationModalShown,Ut=_t.positionStatus,qt=_t.shareVideoQuery,Vt=_t.shouldShowVideoDetails,Ht=_t.contentExpanded,Kt=_t.showWechatExpand,Qt=_t.autoExpand,Wt=_t.shownLoadingBar,Gt=_t.wxIsReady,Zt=_t.shownCatalogModal,Yt=qt&&Vt?{title:Pe.title,thumbnail:Pe.coverUrl,isLens:!0,id:qt,isPlayable:!0,url:"https://www.zhihu.com/video/".concat(qt)}:null;if(p)return Object(d.c)("div",{className:"AnswerItem-deleted",children:["你已经删除了该问题的回答，如果需要修改，请先  ",Object(d.b)("a",{onClick:this.handleRestoreAnswer,children:"撤销删除"})]});var Jt,$t=!(K&&"create"===Q),Xt="commercial"===j,en="nobody"!==F,tn=!function(e){return"special-plain"===e}(de)&&Object(d.b)(tt.a,{className:O()("AnswerItem-authorInfo",{"AnswerItem-authorInfo--related":ie}),preset:Qn(de)?"plain":"default",author:S,relatedTo:ie,id:u,userLinkV2:!0},"authorInfo"),nn=this.renderAnswerExtraInfo(),rn=this.renderLabels(),on=rn.labels,an=rn.editingLabels,cn=q||(null==te||null===(e=te.video)||void 0===e||null===(t=e.videoInfo)||void 0===t?void 0:t.thumbnail);if(Dt)return Object(d.c)("div",{children:[Ct?Object(d.c)(v.Flex,{alignItems:"center",justifyContent:"space-between",css:function(e){return{borderBottom:"1px solid ".concat(e.colors.GBK09A),".Tabs":{border:"none"}}},children:[Object(d.b)("div",{css:function(e){return{fontWeight:"bold",fontSize:15,color:e.colors.GBK03A,borderBottom:"1px solid ".concat(e.colors.GBK10A)}},children:this.isVideoAnswer?"本回答为视频回答":"本回答为图文回答"}),Object(d.b)(Xe.a,{handleClick:null===(Jt=this.answerFormRef.current)||void 0===Jt?void 0:Jt.toggleFullscreen})]}):Object(d.c)(d.a,{children:[this.isVideoAnswer&&Object(d.b)("div",{css:function(e){return Object.assign({padding:"4px 0 20px",fontWeight:"bold",fontSize:15,lineHeight:"21px",color:e.colors.GBK03A,borderBottom:"1px solid ".concat(e.colors.GBK10A)},wt&&{marginBottom:16})},children:"本回答为视频回答"}),tn]}),!Ct&&an,!Ct&&nn,Object(d.b)(et.a,{css:Ct?{margin:"0 -20px -20px"}:{margin:"16px -20px 0"},className:"AnswerItem-form",isReediting:!0,imperativeRef:this.answerFormRef,question:h,answer:a,defaultValue:L,onDeleteDraft:this.handleCancelEditAnswer,onCancel:this.handleCancelEditAnswer,onSubmit:this.handleSubmitAnswer,isRewardable:b.isRewardable,addRewardTagline:this.addRewardTagline})]});var sn=Kn(de)?[[tn].concat(Object(r.a)(on)),nn]:[[tn].concat(Object(r.a)(on),[nn]),null],un=Object(o.a)(sn,2),ln=un[0],dn=un[1],fn="mainEntityOfPage"===be||"acceptedAnswer"===be,bn=Le&&!fn,vn=!Yt&&this.renderEditTime(),mn=$.content,gn=this.isPaidAnswer,yn=gn?mn:I,jn=!ie&&Object(d.b)(xn,{questionId:y,title:g,href:Et,zaTitleId:qe,showStickyMark:kt&&this.props.isSticky,onClick:ze}),wn=f||bt,Sn=gt&&Ot.match(/\/question\/\d+$/g),Rn=Be?Be(yn||_,a):yn||_||"",En=$t&&!lt&&Ht&&Object(Ce.a)(a,"answer"),_n=Boolean(M||(null==ne?void 0:ne.enableVideoTranslate)),An=Object(Te.a)("answer",u);return Object(d.c)(Ge.e,{onRef:function(e){return n.contentItem=e},className:"AnswerItem","data-za-index":ke,"data-zop":JSON.stringify({authorName:S.name,itemId:u,title:g,type:"answer"}),data:a,link:Et,meta:ln,title:jn,lastreadTouchable:le,name:u,itemProp:be,itemType:"http://schema.org/Answer",itemScope:!0,children:[f&&(!mt||Ht)&&Object(d.b)(Dn.b,{answer:a}),this.renderMeta(),Xt&&this.renderBrandQuestionPrizeTip(),this.renderBrandEntityTrack(),this.isLegacyVideoAnswer&&Object(d.b)("div",{css:{marginTop:16},children:Object(d.b)(T.b,{id:te.zvideo.videoId,thumbnail:te.zvideo.thumbnail,playerUrl:"https://video.zhihu.com/video/".concat(te.zvideo.videoId),isLens:!0,isPlayable:!0})}),(ie||Ht)&&oe&&Object(d.b)(In.a,Object.assign({},oe)),(ie||Ht)&&this.isVideoAnswer&&Object(d.b)(Mn.a,{}),wn?Object(d.c)(ct.b,Object.assign({richContentKey:jt,className:O()({"RichContent-mobileBaidu":ft}),imperativeRef:this.richContentRef,canAbstract:dt,onToggleExpend:this.handleExpand},bn&&{expandText:"App 内查看"},Se&&fn&&{expandText:"展开阅读全文"},lt&&Me&&!fn&&{collapsedHeight:180},{cover:cn,hasVideo:Boolean(V&&"video"===V.type)||this.isVideoAnswer,videoData:Yt,handleClickVideoMoreButton:this.handleClickVideoMoreButton,unescapable:Boolean(ie),expanded:ue,onPositionStatusChange:this.handlePositionStatusChange,before:dn,excerpt:Be?Be(_,a):_,html:Rn,prefix:this.renderPrefix(),ecommerce:ut,after:Object(d.c)("div",{children:[Object(d.b)(Dn.a,{answer:a}),Object(d.b)(Tt,{className:"AnswerItem-CommercialQuestionTail",commercial:w}),!lt&&Ht&&Object(d.b)(pn,{contentType:"answer",contentToken:u,author:S}),vn,St&&bt&&ae&&Object(d.c)("a",{className:"AnswerItem-editButton",onClick:this.handleStartEditAnswer,children:[Object(d.b)(x.a,{text:!0,center:!0})," ",Object(d.c)("span",{className:"AnswerItem-editButtonText",children:["修改",se&&se.editableContent&&"（有未发布的编辑草稿）"]})]}),!lt&&St&&Object(d.b)(xt,{imperativeRef:this.rewardContainerRef,reward:c,currentUser:St,rewardInfo:b,isAuthor:bt,id:u,author:S,ua:De,balanceEnable:!1})]}),data:a,onClick:Se&&fn?function(){(Sn||xe)&&lt?(n.setState({autoExpand:!1}),n.richContentRef.current.handleExpand()):(Re||Ee)&&lt?(n.setState({autoExpand:!1}),n.createOpenInAppHandler("expand_answer1",!0)(),n.richContentRef.current.handleExpand()):n.setState({showWechatExpand:!0,autoExpand:!1})}:bn?n.createOpenInAppHandler("expand_answer"):n.disableAuth&&Se&&n.handleToggleGuide},Ie?{limit:74}:{},{zaIds:{expand:Ue},shouldUseArticleCard:vt,children:[$t&&at&&Xt&&en&&!k&&Object(d.b)(N.c,{className:O()("ContentItem-rightButton AnswerItem-mainAction AnswerItem-open",{"AnswerItem-mainAction--disabled":"community"===F}),onClick:this.handleUpdateAnswerCollapsed,children:"公开回答"}),$t&&pe&&!en&&"brand_special"!==Z&&Object(d.b)(N.c,{className:"ContentItem-rightButton AnswerItem-mainAction AnswerItem-brandQuestionButton",onClick:this.handleUpdateAnswerStick,children:U?"取消精选":"设为精选"}),!this.props.isBaidu&&it({componentList:[{name:"vote",component:$t&&this.renderVoteButton()},{name:"comment",component:$t&&Object(d.b)(Ye.a,Object.assign({onInstance:function(e){return n.commentButton=e},onClick:this.openModal},lt&&Me&&Le&&{onClick:this.createOpenInAppHandler("comment_answer")},{commentsShown:Lt,commentClosed:B,count:P,positionStatus:Ut,zaInfos:{toggleComment:Qe,getCommentAction:rt}}),"comment")},{name:"catalog",component:En&&Object(d.b)(je.a,{html:Rn,sourceId:a.id,onClick:this.toggleCatalogModal},"catalog")},{name:"share",component:$t&&!lt&&Object(d.b)(Ze.a,{disabled:pt||ht,id:u,type:"answer",title:g,authorName:S&&S.name,href:Et,positionStatus:Ut,zaShareId:nt},"share")},{name:"favlist",component:$t&&(!St||!St.isOrg)&&Object(d.b)(Ke.a,{onRef:function(e){return n.favButtonRef=e},onClick:this.handleFavlistsShown,label:lt?"":"收藏",disabled:pt||ht},"favlist")},!lt&&{name:"thank",component:$t&&!bt&&Object(d.b)(kn.a,Object.assign({zaInfo:Ve,answer:a,disabled:pt||ht},this.isLegacyVideoAnswer&&{zVideoId:te.attachmentId}),"thank")},{name:"sticky",component:!lt&&kt&&bt&&Object(ge.a)(St)&&Object(d.b)(N.c,{preset:"plain",onClick:ot,icon:this.props.isSticky?R.a:E.a,label:this.props.isSticky?"取消置顶":"置顶"},"sticky")},{name:"vessay",component:!lt&&bt&&_n&&Object(d.c)(A.a,{as:N.c,zaAction:"OpenUrl",zaText:"生成视频",zaType:"Button",preset:"plain",onClick:function(){return window.open(An)},className:"ContentItem-convertVideoButton",extra:{link:{url:An}},children:[Object(d.b)(Ae.a,{}),Object(d.b)("span",{children:"生成视频"})]})},{name:"options",component:lt&&Me||$t&&this.renderOptions()},{name:"settings",component:lt&&Me||this.renderSettings()},{name:"annotation",component:!Ht&&Object(d.b)(We.a,{annotationDetail:Y},"annotation")}]})]})):vn,wn&&!gn&&Object(d.b)(hn.a,{content:yn,type:"answer",urlToken:String(u)}),yt&&Ot.startsWith("/question")&&Object(d.b)("div",{children:Object(d.b)(_e,{parent:a})}),Object(d.b)(Je.a,{shown:Lt,parent:a,byComment:ce,commentPattern:zt,autoFocus:Pt,onClose:this.closeModal}),Object(d.b)($e.a,{type:"answer",urlToken:u,shown:At,onClose:this.handleReportHide,zaEnabled:!0}),Object(d.b)(W,{addAnnotation:ve,onClose:this.handleCloseAddAnnotationModal,shown:Bt,type:re.e,urlToken:u,showNotification:Oe}),Object(d.b)(X,{cancelAnnotation:me,onClose:this.handleCloseCancelAnnotationModal,shown:Ft,type:re.e,urlToken:u,showNotification:Oe}),St&&bt&&Object(d.b)(Rt.a,{title:"你确定要删除自己的答案吗？",subtitle:"答案内容不会被永久删除，你还可以撤消本次删除操作。",shown:Nt,onCancel:this.closeDeleteModal,onSubmit:this.handleDeleteAnswer}),fe&&Object(d.b)(Rt.a,{title:"隐藏答案",subtitle:"隐藏后该回答将不展示也不流通，是否确定隐藏？",shown:It,onCancel:this.handleCollapseModalHide,onSubmit:this.handleUpdateAnswerCollapsed}),Object(d.b)(Ne.a,{id:u,type:"answer",shown:Mt,onClose:this.handleFavlistHide,zaEnabled:!0}),lt&&this.state.guideShown&&Object(d.b)(z.a,{redirectUrl:Et,buttons:[xe?{name:"wechat",text:"快速登录",fill:"#fff"}:"zhihu"],urlScheme:Object(ye.a)({type:"answer",id:u}),onClose:this.handleToggleGuide}),Object(d.b)(He,{notification:ee,onRead:function(e){st("answer",u,e)},onUseAdmire:function(){n.rewardContainerRef.current.activateReward()},onUseRecommend:function(){var e=n.props.postToolsRecommend;D.a.confirm(Object(d.b)("div",{style:{textAlign:"center"},children:"该推荐将使用本月的 1 次推荐次数。"}),{title:"确定是否推荐？"}).then((function(){return e("answer",u)}),(function(){}))}}),Object(d.b)(On,{show:Kt&&!Sn&&lt&&!xe,id:a.id,type:a.type,onCancel:function(){n.setState({showWechatExpand:!1},(function(){Qt||n.richContentRef.current.handleExpand()}))},onSubmit:function(){n.setState({showWechatExpand:!1}),xe?Gt?n.createOpenInAppHandler(Qt?"expand_answer2":"expand_answer1")():n.setState({shownLoadingBar:!0}):n.createOpenInAppHandler(Qt?"expand_answer2":"expand_answer1")()}}),Object(d.b)(Cn,{show:Wt&&lt}),En&&Object(d.b)(we.a,{shown:Zt,html:Rn,sourceId:a.id,onClose:this.toggleCatalogModal,created:a.createdTime,updated:a.updatedTime,author:S,zaContent:{type:"Answer",token:String(a.id)}})]})}},{key:"isPaidAnswer",get:function(){return"paid"===this.props.answer.answerType}},{key:"isVideoAnswer",get:function(){var e=this.props.answer.attachment;return 2===(null==e?void 0:e.type)||"zvideo"===(null==e?void 0:e.type)||"video"===(null==e?void 0:e.type)}},{key:"isLegacyVideoAnswer",get:function(){var e=this.props.answer.attachment;return"zvideo"===(null==e?void 0:e.type)}}]),n}(p.PureComponent);Yn.contextTypes={currentUser:g.a.object,authRequired:g.a.func,startAddAnswer:g.a.func},Yn.propTypes={relatedTo:g.a.oneOf(["question","answer"]),editable:g.a.bool,preset:g.a.oneOf(["special-plain","plain","primary"]),lessExcerpt:g.a.bool,shareVideoDetail:g.a.object,formatContent:g.a.func,renderExtraOptions:g.a.func,zaInfos:g.a.object,onToggleExpand:g.a.func,useNewLabels:g.a.bool,renderActionButtons:g.a.func,canAbstract:g.a.bool,trackPromotionClick:g.a.func,isSearchSpecialSource:g.a.bool,hideCommercialInviteLabel:g.a.bool},Yn.defaultProps={editable:!1,canAbstract:!1,isSearchSpecialSource:!1,preset:"primary",zaInfos:{},renderActionButtons:kn.b};var Jn=Object(b.compose)(Object(ne.b)((function(e){var t=e.answer,n=e.trackCardShow,r=void 0===n||n,o=e.zaInfos,i=void 0===o?{}:o;return Object.assign({module:"AnswerItem",card:{has_image:Boolean(t.thumbnailExtraInfo&&"image"===t.thumbnailExtraInfo.type),has_video:Boolean(t.thumbnailExtraInfo&&"video"===t.thumbnailExtraInfo.type),content:{type:"Answer",token:t.id&&t.id.toString(),upvote_num:t.voteupCount,comment_num:t.commentCount,publish_timestamp:new Date(t.createTime).getTime(),parent_token:t.question&&t.question.id.toString(),author_member_hash_id:t.author&&t.author.id,video_id:t.thumbnailExtraInfo&&t.thumbnailExtraInfo.videoId}},content:{type:"Answer",token:t.id}},i.index&&{index:i.index},i.cardShow&&{view:{id:i.cardShow}},{trackCardShow:r})})),C.withRouter,Object(j.connect)((function(e,t){var n,r,o=e.entities.drafts,i=void 0===o?{}:o,a=e.question,c=(a=void 0===a?{}:a).draftStatus,s=e.answers,u=(s=void 0===s?{}:s).paidContent,l=void 0===u?{}:u,d=e.reward,f=e.switches,p=e.video.shareVideoDetail,h=e.env,b=h.edition,v=h.userAgent,m=t.answer,g=t.relatedTo,y=t.location.pathname,O=y.split("/"),j=!1,w=!0;!O[1]||"org"!==O[1]&&"people"!==O[1]||(j=O[2]&&-1!==Gn.indexOf(O[2]),w=!1);var C=function(e){var t;if(e.videoContribution)return e;if(null===(t=e.attachment)||void 0===t?void 0:t.video){var n=e.attachment.video,r=n.title,o=n.subVideoId,i=n.parentVideoId,a=n.zvideoId,c={videoId:o,zvideoId:a,title:r,playCount:n.playCount,voteupCount:n.voteupCount,isComplete:!a||i===o,startTime:n.startTime};return Object.assign({},e,{videoContribution:c})}return e}(Zn(e,t)),k=Object(ve.b)(e),S=["question","answer"].includes(g),x=Object(he.c)(e)&&S,R=Object(he.i)(e),E=v.Mobile,_=v.Qzone,A=E&&R&&!_;return{draft:m&&i["question_".concat(m.question.id)],draftStatus:null==c?void 0:c[m.question.id],answer:C,ua:Object(he.l)(e),pathname:y,xiaomi:b.xiaomi,reward:d,switches:f,isHuman:x,shouldOia:Object(he.h)(e)&&!j,shouldSpecialOia:Object(he.i)(e)&&!j,isSpecialQuestionOrAnswer:Object(he.j)(e,{type:S&&g,id:S?"answer"===g?m.id:m.question.id:""}),shouldAllAutoExpand:"1"===Object(he.a)(e,"web_mweb_launch"),isMobile:Object(he.d)(e),isWechat:e.env.userAgent.Wechat,isHuaweiBrowser:/huaweibrowser/gi.test(e.env.userAgent.origin)||/huawei/gi.test(e.env.userAgent.origin)&&!e.env.userAgent.UC&&!e.env.userAgent.Wechat&&!e.env.userAgent.MQQBrowser&&!/quark/gi.test(e.env.userAgent.origin)&&!/baidu/gi.test(e.env.userAgent.origin),isHonor:/honor/gi.test(e.env.userAgent.origin)&&/MQQBrowser/gi.test(e.env.userAgent.origin),concernedUpvoters:Object(oe.g)(e,{id:m.id}),currentUser:k,shareVideoDetail:p,isBrandAnswer:Object(oe.l)(m),permission:Object(ie.Z)(e),ecommerce:Object(te.c)(e,{type:"answer",urlToken:String(m.id)}),isBaidu:Object(he.h)(e)&&b.baidu,showCommentForOia:Object(he.h)(e),blockReading:A,paidContent:l,isMuteSpecial:Object(ie.C)(C.question),isMuteFreeze:Object(ie.B)(C.question),isAuthor:null!==(n=null===(r=m.relationship)||void 0===r?void 0:r.isAuthor)&&void 0!==n?n:Object(ve.i)(e,m.author),shouldUseArticleCard:"1"===Object(he.a)(e,"gue_visit_n_artcard"),useNewEditorSetting:"1"===Object(he.a)(e,"editor"),isQuestionPage:w}}),{updateAnswerReshipmentSettings:oe.G,updateAnswerCommentPermission:oe.F,updateAnswerCollapsed:oe.E,updateAnswerStick:oe.I,deleteAnswer:oe.i,restoreAnswer:oe.A,updateAnswer:oe.D,loadAnswerForSettings:oe.t,showNotification:fe.h,addAnnotation:function(e,t,n,r){return{API:{types:le.ADD_ANNOTATION,endpoint:"v3/collaboration/annotation",method:"POST",body:Object(se.getFormData)(Object(ce.decamelizeKeys)({objectType:e,urlToken:t,reason:n,detail:r}))},UPDATE:{success:function(n){var r=de(e);return r?Object(ae.a)({},r,Object(ae.a)({},t,n)):null}}}},cancelAnnotation:function(e,t,n,r){return{API:{types:le.CANCEL_ANNOTATION,endpoint:"v3/collaboration/annotation_cancel",method:"POST",body:Object(se.getFormData)(Object(ce.decamelizeKeys)({objectType:e,urlToken:t,reason:n,detail:r}))},UPDATE:{success:function(n){var r=de(e);return r?Object(ae.a)({},r,Object(ae.a)({},t,Object.assign({},n,{annotationDetail:null}))):null}}}},addRewardTagline:pe.a,updateAnswerReward:oe.H,getVoteDownReason:oe.k,selectVoteDownReason:oe.C,loadAnswerConcernedVoters:oe.q,fillCurrentUserIfNeeded:ve.e,loadVideoDetails:be.d,readContentRightsNotification:me.Qb,postToolsRecommend:me.Pb}),Nt.c)(Yn)},function(e,t,n){"use strict";var r=n(40),o=n(2),i=n(1),a=n.n(i),c=n(25),s=n(11),u=n.n(s),l=n(1494),d=n(28),f=n(234),p=n(66),h=n(368),b=n(1396),v=n(781),m=n(1434),g=n(18),y=function(e){return a.a.createElement(g.a,e,a.a.createElement("path",{d:"M18.175 15.761c0 .104-.101.207-.203.207H9.265v-2.065L4 17.103 9.265 20.2v-2.065h8.707c1.215 0 2.228-1.032 2.228-2.27V10.6h-2.025v5.161zm-12.15-7.37c0-.204.101-.306.202-.306h8.708v2.043L20.2 7.064 14.935 4v2.043H6.228C5.013 6.043 4 7.063 4 8.39V13.6h2.025V8.391z"}))};y.defaultProps={name:"Sync"};var O=y,j=n(1343),w=n(1058),C=n(30),k=n(134),S=n(178),x=n(874),R=n(867),E=n(175),_=n(872),A=n(1015),T=n(1099),N=n(398),I=n(377),M=n(26),D=n(953),L=n(396),P=n(74);function z(e){var t=e.campaign,n=e.selected,r=e.onSelect,i=t.title,a=t.description;return Object(o.c)("div",{className:"VideoContributableCampaignModalCampaign",children:[Object(o.c)("div",{className:"VideoContributableCampaignModalCampaign-info",onClick:r,children:[Object(o.b)("div",{className:"VideoContributableCampaignModalCampaign-title",children:i}),Object(o.b)("div",{className:"VideoContributableCampaignModalCampaign-description",children:a})]}),Object(o.b)(x.a,{checked:n,onChange:r,size:16})]})}var B=function(e){var t=e.shown,n=e.onClose,a=e.defaultCampaignId,c=e.campaignList,s=e.onSubmit,u=Object(i.useState)((function(){return a?c.find((function(e){return e.id===a})):null})),l=Object(r.a)(u,2),d=l[0],f=l[1];return Object(o.b)(P.b,{title:"选择活动",size:"large",onClose:n,children:t&&Object(o.c)(o.a,{children:[Object(o.b)("div",{className:"VideoContributableCampaignModal-list",children:c.map((function(e){return Object(o.b)(z,{campaign:e,selected:(null==d?void 0:d.id)===e.id,onSelect:function(){f((null==d?void 0:d.id)===e.id?null:e)}},e.id)}))}),Object(o.c)(P.a,{direction:"horizontal",children:[Object(o.b)(C.c,{onClick:n,children:"返回"}),Object(o.b)(C.c,{preset:"primary",color:"blue",onClick:function(){s(d)},children:"确定"})]})]})})},F=n(90),U=n(370),q=n(798),V=n(1087),H=n(187);function K(e){var t=e.club,n=t.id,r=t.name,i=t.description,a=t.avatar,c=t.isJoined,s=t.joinType,u=t.postCount,l=t.allowSync,d=e.selected,f=e.onSelect,p=e.handleJoinButtonClick;return Object(o.c)("div",{className:"VideoSyncToClubModalItem",children:[Object(o.c)(F.Flex,{css:{width:"calc(100% - ".concat(c?20:92,"px)")},children:[Object(o.b)("img",{src:a,className:"VideoSyncToClubModalItem-avatar"}),Object(o.c)("div",{className:"VideoSyncToClubModalItem-info",onClick:f,children:[Object(o.b)("div",{className:"VideoSyncToClubModalItem-title Highlight",dangerouslySetInnerHTML:{__html:r}}),Object(o.b)("div",{className:"VideoSyncToClubModalItem-description Highlight",dangerouslySetInnerHTML:{__html:i}}),Object(o.c)("div",{className:"VideoSyncToClubModalItem-data",children:[u,"条内容"]})]})]}),c?Object(o.b)(x.a,{checked:d,onChange:f,size:16,disabled:!l}):Object(o.b)(C.c,{preset:"secondary",color:"blue",onClick:function(){return p(n,s)},children:"all"===s?"加入圈子":"申请加入"})]})}var Q=function(e){var t=e.shown,n=e.onClose,a=e.selectedClub,s=e.onSelectClub,u=Object(i.useState)(a),l=Object(r.a)(u,2),d=l[0],f=l[1],p=Object(i.useState)(""),h=Object(r.a)(p,2),b=h[0],m=h[1],g=Object(i.useState)(""),y=Object(r.a)(g,2),O=y[0],j=y[1],w=Object(c.useSelector)((function(e){return e.club.explore.candidateSyncClubs})),S=Object(c.useSelector)((function(e){var t;return(null===(t=e.search)||void 0===t?void 0:t.clubentityByQuery[O])||{isFetching:!1,isDrained:!1,ids:[]}})),x=S.isFetching,R=S.isDrained,_=S.ids,A=Object(c.useSelector)((function(e){return e.entities})),T=A.searchClub,N={data:_.filter((function(e){return Boolean(e)})).map((function(e){var t=T[e]||{},n=t.object;return Object.assign({},t,{object:(A.clubs||{})[n]})})),isLoading:x,paging:{isEnd:R}},I=Object(c.useDispatch)();Object(i.useEffect)((function(){a||f(null)}),[a]);var M=Object(i.useRef)(null),D=Object(i.useCallback)((function(){return M.current.parentElement}),[M]),z=function(){(null==M?void 0:M.current)&&(M.current.parentElement.scrollTop=0)},B=Object(i.useCallback)((function(e){var t=e.target.value;m(t),O&&!t&&(j(""),z())}),[O]),Q=Object(c.useSelector)((function(e){var t;return null===(t=e.search)||void 0===t?void 0:t.nextOffset.clubentityByQuery})),W=Object(i.useCallback)((function(e){I(Object(H.m)(Object.assign({type:"clubentity",query:e},O===e?Q:{limit:10,offset:0})))}),[Q,O,I]),G=Object(i.useCallback)((function(e){z(),O!==e&&(W(e),j(e))}),[O,W]),Z=Object(i.useCallback)((function(e){13===e.keyCode&&b.trim()&&(document.activeElement.blur(),G(b.trim()))}),[b,G]),Y=Object(i.useCallback)((function(){O?W(b):I(Object(L.b)())}),[I,b,O,W]),J=O?N:w,$=J.data,X=void 0===$?[]:$,ee=J.paging,te=(ee=void 0===ee?{}:ee).isEnd,ne=J.isLoading,re=function(e,t){"all"===t?I(Object(V.b)(e)).then((function(){I(Object(L.b)(!0))})):window.open("https://www.zhihu.com/club/".concat(e),"_blank")},oe=Object(o.c)("div",{className:"VideoSyncToClubModal-Empty",children:[Object(o.b)("img",{className:"VideoSyncToClubModal-Empty--Image",src:"https://pic4.zhimg.com/80/v2-111b363c733ca84c2fd2044eca77503b_hd.png"}),Object(o.b)("div",{className:"VideoSyncToClubModal-Empty--Text",children:"暂时没有找到「".concat(O,"」的相关圈子")})]}),ie=Object(o.b)(U.b,{getContainer:D,onLoad:Y,isLoading:Boolean(ne),placeholder:Object(o.b)(U.a,{className:"List-item"}),isDrained:Boolean(te),className:"VideoSyncToClubModal-list",children:Object(o.c)(F.Box,{height:"100%",ref:M,children:[X.map((function(e){var t=O?Object.assign({},e.object,{id:e.object.id,avatar:e.object.avatarUrl,postCount:e.object.clubPostCount}):e;return Object(o.b)(K,{club:t,selected:(null==d?void 0:d.id)===t.id,onSelect:function(){t.isJoined&&(t.allowSync?f((null==d?void 0:d.id)===t.id?null:t):E.a.alert("无法同步到取消关联主站的圈子。"))},handleJoinButtonClick:re},t.id)})),te&&Object(o.b)("div",{className:"VideoSyncToClubModal-list--notMore",children:"没有更多内容"})]})});return Object(o.b)(P.b,{title:"选择圈子",size:"large",onClose:n,maskClosable:!1,children:t&&Object(o.c)(o.a,{children:[Object(o.b)(k.a,{className:"VideoSyncToClubModal-search",value:b,placeholder:"搜索圈子",before:Object(o.b)(q.a,{size:16,className:"VideoSyncToClubModal-search--icon"}),after:Boolean(b)&&Object(o.b)(v.a,{size:12,onClick:function(){m(""),j(""),z()},className:"VideoSyncToClubModal-search--icon"}),onChange:B,onKeyUp:Z}),O&&O===N.preSearchText&&0===X.length?oe:ie,Object(o.c)(P.a,{direction:"horizontal",children:[Object(o.b)(C.c,{onClick:n,children:"返回"}),Object(o.b)(C.c,{preset:"primary",color:"blue",onClick:function(){s(d)},disabled:!d,children:"确定"})]})]})})},W=n(247),G=n(383),Z=n(1295),Y=n(1055),J=function(e){var t=e.defaultVideo,a=e.title,s=e.description,u=t.id,l=Object(c.useDispatch)(),d=Object(i.useRef)(),h=Object(i.useState)(0),b=Object(r.a)(h,2),v=b[0],m=b[1],g=Object(Y.a)("zvideo_contribution_form:should_hide_tooltip"),y=Object(r.a)(g,2),O=y[0],j=y[1],w=Object(i.useState)(!1),C=Object(r.a)(w,2),k=C[0],S=C[1],x=Object(i.useState)(!1),R=Object(r.a)(x,2),E=R[0],_=R[1],A=Object(G.m)(u).answer,T=(A=void 0===A?{}:A).canContribute,N=void 0!==T&&T,I=Object(G.n)(u),D=Object(p.d)((function(){return n.e(17).then(n.bind(null,2619))})),L=Object(i.useCallback)((function(){a?v<6e4?l(Object(M.h)("大于 1 分钟的视频才可以投稿哦")):(l(Object(G.k)(null)),S(!0),_(!1)):l(Object(M.h)("输入标题后才可以投稿哦"))}),[a,l,v]),P=Object(i.useCallback)((function(){S(!0),_(!0)}),[]);return Object(i.useEffect)((function(){l(Object(G.g)(u,"edit"))}),[l,u]),Object(i.useEffect)((function(){var e,n;t.file?(n=t.file,new Promise((function(e,t){try{var r=document.createElement("video");r.preload="metadata",r.onloadedmetadata=function(){URL.revokeObjectURL(r.src),e(Math.floor(1e3*r.duration))},r.onerror=t,r.src=URL.createObjectURL(n)}catch(e){t(e)}}))).then((function(e){l(Object(G.f)({zvideoId:u,duration:e})),m(e)})):((null===(e=t.video)||void 0===e?void 0:e.duration)&&m(parseInt(1e3*t.video.duration)),l(Object(G.f)({zvideoId:u})))}),[t,l,u]),Object(p.i)((function(){return j(!0)}),!O&&N?5e3:null),N||I.length?Object(o.c)(f.b,{block:"Contribution",children:[Object(o.b)(f.e,{ref:d,zaType:"Block",className:"VideoUploadForm-itemTitle",css:function(e){return{"::after":{content:'"投稿到问题可以获得更多曝光哦～"',color:e.colors.GBK06A,fontWeight:"normal"}}},children:"投稿问题（选填）"}),Object(o.b)(W.a,{placement:"top-left",isOpen:!O,target:d.current,css:{".Popover-arrow":{transform:"translate(-115px, 0)"}},children:"投稿到问题，让更多人看到你的视频"}),Object(o.b)(Z.a,{zvideoId:u,showCreateButton:!0,onAdd:L,onSelect:P}),Boolean(D)&&Object(o.b)(D,{show:k,defaultVideo:t,title:a,description:s,duration:v,closeAfterEdit:E,onClose:function(){return S(!1)}})]}):null},$=n(1100),X=n(954);t.a=function(e){var t,n,a,s,g,y,P,z,F,U,q,V,H,K,W,G=e.className,Z=e.defaultVideo,Y=e.defaultCampaignId,ee=e.checkFormValid,te=e.shouldShowSyncToListCheckbox,ne=e.onRemove,re=e.onSubmit,oe=e.isEditing,ie=e.shouldShowScheduledPublish,ae=l.a(new Date,30),ce=Object(i.useState)(!1),se=Object(r.a)(ce,2),ue=se[0],le=se[1],de=Object(i.useState)(ae),fe=Object(r.a)(de,2),pe=fe[0],he=fe[1],be=Object(T.b)((function(e){return e.zvideos.tagoreCategory})),ve=Object(T.a)([I.d,I.u,I.k,I.l,I.j,I.h,M.h,I.n]),me=Object(r.a)(ve,8),ge=me[0],ye=me[1],Oe=me[2],je=me[3],we=me[4],Ce=me[5],ke=me[6],Se=me[7],xe=Object(i.useState)((null==Z?void 0:Z.title)||""),Re=Object(r.a)(xe,2),Ee=Re[0],_e=Re[1],Ae=Object(i.useState)(null!==(t=null==Z?void 0:Z.description)&&void 0!==t?t:""),Te=Object(r.a)(Ae,2),Ne=Te[0],Ie=Te[1],Me=Object(i.useState)(null!==(n=null==Z||null===(a=Z.category)||void 0===a||null===(s=a.firstLevel)||void 0===s?void 0:s.id)&&void 0!==n&&n),De=Object(r.a)(Me,2),Le=De[0],Pe=De[1],ze=be.find((function(e){return e.data.id===Le})),Be=Object(i.useState)(null!==(g=null==Z||null===(y=Z.category)||void 0===y||null===(P=y.secondLevel)||void 0===P?void 0:P.id)&&void 0!==g&&g),Fe=Object(r.a)(Be,2),Ue=Fe[0],qe=Fe[1];Object(i.useEffect)((function(){be.length||Oe()}),[be,Oe]);var Ve=Object(i.useState)(Boolean(null==Z||null===(z=Z.category)||void 0===z||null===(F=z.firstLevel)||void 0===F?void 0:F.id)||Boolean(null==Z||null===(U=Z.category)||void 0===U||null===(q=U.secondLevel)||void 0===q?void 0:q.id)),He=Object(r.a)(Ve,2),Ke=He[0],Qe=He[1],We=Object(p.b)((function(e){je(e).then((function(e){var t=e.payload.data[0];t&&(Pe(t.firstLevel.id),qe(t.secondLevel.id))}))}),300);Object(i.useEffect)((function(){Ke||We({title:Ee,type:"zvideo",content:Ne})}),[Ee,Ne,Ke,We]);var Ge=Object(i.useState)(null!==(V=null==Z?void 0:Z.topics)&&void 0!==V?V:[]),Ze=Object(r.a)(Ge,2),Ye=Ze[0],Je=Ze[1],$e=Object(i.useState)(Boolean(null==Z||null===(H=Z.topics)||void 0===H?void 0:H.length)),Xe=Object(r.a)($e,2),et=Xe[0],tt=Xe[1],nt=Object(i.useState)(!1),rt=Object(r.a)(nt,2),ot=rt[0],it=rt[1],at=Object(p.b)((function(e){we(e).then((function(e){var t=e.payload.data;t.length&&Je(t)}))}),300);Object(i.useEffect)((function(){!et&&Le&&Ue&&at({type:"zvideo",text:Ee,firstLevelCategoryId:Le,secondLevelCategoryId:Ue,limit:X.f})}),[Ee,Le,Ue,et,at]);var ct=Object(i.useState)(null==Z?void 0:Z.imageUrl),st=Object(r.a)(ct,2),ut=st[0],lt=st[1],dt=Object(i.useCallback)((function(e){return lt(e)}),[lt]);Object(i.useEffect)((function(){(!ut&&(null==Z?void 0:Z.imageUrl)||ut===X.a&&(null==Z?void 0:Z.imageUrl)&&Z.imageUrl!==X.a)&&lt(Z.imageUrl)}),[ut,Z]);var ft=Object(i.useState)(null==Z?void 0:Z.zvideoType),pt=Object(r.a)(ft,2),ht=pt[0],bt=pt[1],vt="published"===(null==Z?void 0:Z.zvideoState),mt=Object(i.useState)(null==Z?void 0:Z.campaign),gt=Object(r.a)(mt,2),yt=gt[0],Ot=gt[1],jt=Object(i.useState)(!1),wt=Object(r.a)(jt,2),Ct=wt[0],kt=wt[1],St=Object(i.useState)(!1),xt=Object(r.a)(St,2),Rt=xt[0],Et=xt[1],_t=Object(i.useState)(te),At=Object(r.a)(_t,2),Tt=At[0],Nt=At[1],It=Object(i.useState)([]),Mt=Object(r.a)(It,2),Dt=Mt[0],Lt=Mt[1],Pt=Boolean(null==Dt?void 0:Dt.length)&&!yt,zt="published"===(null==Z?void 0:Z.zvideoState);Object(i.useEffect)((function(){Ce().then((function(e){var t=e.payload;Lt(t.data)}))}),[Ce]),Object(i.useEffect)((function(){var e=null==Dt?void 0:Dt.find((function(e){return e.id===Y}));!e||Ct||yt||Ot(e)}),[Y,Dt,Ct,yt]);var Bt=Object(i.useState)("草稿已保存"),Ft=Object(r.a)(Bt,2),Ut=Ft[0],qt=Ft[1],Vt=Object(p.b)((function(e,t){ye(e,t).then((function(){qt("草稿已保存")}))}),300);Object(i.useEffect)((function(){Z.id&&(qt("草稿保存中…"),Vt(Z.id,{title:Ee,description:Ne,category:{firstLevel:Le||void 0,secondLevel:Ue||void 0},zvideoType:ht,topicIds:Ye.map((function(e){return e.id||e.urlToken})),campaignId:null==yt?void 0:yt.id,imageUrl:ut,isVisible:Tt}))}),[Z.id,Ee,Ne,Le,Ue,ht,Ye,yt,ut,Tt,Vt]);var Ht=Object(p.b)((function(e){return ge(e).then((function(e){var t,n,r,o,i,a,c,s,u=e.payload;u&&(!Ee&&_e(u.title),!ut&&u.imageUrl&&lt(u.imageUrl),!Ne&&Ie(null!==(t=u.description)&&void 0!==t?t:""),!Le&&Pe(null!==(n=null===(r=u.category)||void 0===r||null===(o=r.firstLevel)||void 0===o?void 0:o.id)&&void 0!==n&&n),!Ue&&qe(null!==(i=null===(a=u.category)||void 0===a||null===(c=a.secondLevel)||void 0===c?void 0:c.id)&&void 0!==i&&i),!(null==Ye?void 0:Ye.length)&&Je(null!==(s=u.topics)&&void 0!==s?s:[]),!ht&&bt(u.zvideoType),!yt&&Ot(u.campaign))}))}),300);Object(i.useEffect)((function(){Z.id&&Ht(Z.id)}),[Z,Ht]);var Kt=Object(c.useDispatch)(),Qt=Object(c.useSelector)((function(e){return e.club.explore.joinedClubs})),Wt=!te&&(null==Qt||null===(K=Qt.data)||void 0===K?void 0:K.length)>0,Gt=Object(i.useState)(!1),Zt=Object(r.a)(Gt,2),Yt=Zt[0],Jt=Zt[1],$t=Object(i.useState)(!1),Xt=Object(r.a)($t,2),en=Xt[0],tn=Xt[1],nn=Object(i.useState)(null),rn=Object(r.a)(nn,2),on=rn[0],an=rn[1];Object(i.useEffect)((function(){Qt||te||Kt(Object(L.c)())}),[Kt,Qt,te]),Object(i.useEffect)((function(){oe&&Z.id&&Se(Z.id).then((function(e){(null==e?void 0:e.payload)&&(an(e.payload),Jt(!0))}))}),[oe,Z,Se]);var cn=function(){return te?"添加":ue?"定时发布":"发布视频"},sn=Boolean(Z.id);return Object(o.b)(f.b,{block:"VideoUpLoadForm",content:{type:"Zvideo",id:Z.id},children:Object(o.c)(f.e,{zaType:"Block",className:u()("VideoUploadForm",G),children:[Object(o.c)("div",{className:"VideoUploadForm-item",children:[Object(o.b)("div",{className:"VideoUploadForm-itemTitle VideoUploadForm-itemTitle--first",children:"标题"}),Object(o.b)(k.a,{className:"VideoUploadForm-input",value:Ee,onChange:function(e){_e(e.target.value)},placeholder:"输入视频标题",large:!0}),Ee.length<X.e&&Object(o.c)("div",{className:"VideoUploadForm-itemError",children:["还需要输入 ",X.e-Ee.length," 个字"]}),Ee.length>X.d&&Object(o.c)("div",{className:"VideoUploadForm-itemError",children:["已超出 ",Ee.length-X.d," 个字"]})]}),Object(o.c)("div",{className:"VideoUploadForm-item",children:[Object(o.b)("div",{className:"VideoUploadForm-itemTitle",children:"简介（选填）"}),Object(o.b)(k.a,{className:"VideoUploadForm-input VideoUploadForm-input--multiline",value:Ne,onChange:function(e){Ie(e.target.value)},placeholder:"填写视频简介，让更多人找到你的视频",multiline:!0,large:!0}),Ne.length>X.b&&Object(o.c)("div",{className:"VideoUploadForm-itemError",children:["已超出 ",Ne.length-X.b," 个字"]})]}),sn&&Object(o.b)(J,{defaultVideo:Z,title:Ee,description:Ne}),Object(o.b)("div",{className:"VideoUploadForm-itemTitle",children:"所属领域"}),Object(o.c)("div",{className:"VideoUploadForm-selectContainer",children:[Object(o.c)(S.b,{className:"VideoUploadForm-select",listClassName:"VideoUploadForm-selectList",value:Le,onChange:function(e){Pe(e),qe(!1),Qe(!0)},children:[!ze&&Object(o.b)(S.a,{value:!1,text:"选择领域"},"all"),be.map((function(e){var t=e.data;return Object(o.b)(S.a,{value:t.id,text:t.name},t.id)}))]}),ze&&Object(o.c)(S.b,{className:"VideoUploadForm-select",listClassName:"VideoUploadForm-selectList",value:Ue,onChange:function(e){qe(e),Qe(!0)},children:[Object(o.b)(S.a,{value:!1,text:"选择领域"},"all"),ze.children.map((function(e){var t=e.data;return Object(o.b)(S.a,{value:t.id,text:t.name},t.id)}))]})]}),Object(o.b)("div",{className:"VideoUploadForm-itemTitle",children:"绑定话题"}),Object(o.b)(N.a,{className:"VideoUploadForm-topicInput",value:Ye,onChange:function(e){Je(e),tt(!0)},max:X.f,actived:ot,onToggleActived:function(){return it(!ot)}}),Object(o.c)("div",{className:"VideoUploadForm-typeContainer",children:[Object(o.b)("div",{className:u()("VideoUploadForm-radioContainer",{"VideoUploadForm-radioContainer--disabled":vt}),children:X.g.map((function(e){return Object(o.c)("label",{className:"VideoUploadForm-radioLabel",children:[Object(o.b)(x.a,{className:"VideoUploadForm-radio",size:16,checked:e.value===ht,onChange:function(){bt(e.value)},disabled:vt}),e.label]},e.value)}))}),"reprint"===ht&&Object(o.b)("div",{className:"VideoUploadForm-typeHint",children:"请确保转载视频符合版权使用规范，如被举报侵权，视频将会被删除"})]}),ie&&Object(o.c)("div",{className:"VideoUploadForm-scheduledPublish",children:[Object(o.b)("span",{className:"VideoUploadForm-scheduledPublish--text",children:"定时发布"}),Object(o.b)(_.a,{className:"VideoUploadForm-scheduledPublish--switch",checked:ue,onChange:function(e){return le(e.target.checked)}}),ue&&Object(o.c)(o.a,{children:[Object(o.b)(A.a,{className:"VideoUploadForm-scheduledPublish--timePicker",value:pe,min:ae,onChange:function(e){he(Date.parse(e))}}),Object(o.b)(b.a,{className:"VideoUploadForm-scheduledPublish--tooltip",size:18,"data-tooltip":"时间需至少设置在30分钟以后","data-tooltip-position":"top"})]})]}),yt&&Object(o.c)(o.a,{children:[Object(o.b)("div",{className:"VideoUploadForm-itemTitle",children:"视频活动"}),Object(o.b)(C.c,{preset:"plain",color:"blue",className:"VideoUploadForm-campaignTitle",onClick:function(){Et(!0),kt(!0)},disabled:zt,children:yt.title})]}),on&&!ue&&Object(o.c)(o.a,{children:[Object(o.b)("div",{className:"VideoUploadForm-itemTitle",children:"同步到圈子"}),Object(o.b)(h.a,{view:{id:8603},card:{content:{id:on.id,type:"Zvideo"}},trackCardShow:!0,children:Object(o.c)("div",{className:u()("VideoUploadForm-syncClubTitle",{"VideoUploadForm-syncClubTitle--disabled":Yt}),children:[!Yt&&Object(o.b)(v.a,{text:!0,center:!0,size:6,css:{marginRight:4},onClick:function(){an(null)}}),Object(o.b)("span",{dangerouslySetInnerHTML:{__html:on.name},onClick:function(){Yt?E.a.alert("暂不支持修改已同步的圈子"):tn(!0)}})]})})]}),(Pt||Wt)&&Object(o.c)("div",{className:"VideoUploadForm-featureList",children:[Pt&&!zt&&Object(o.c)("div",{className:"VideoUploadForm-feature",onClick:function(){Et(!0),kt(!0)},children:[Object(o.b)(m.a,{className:"VideoUploadForm-featureIcon",size:20}),Object(o.b)("div",{className:"VideoUploadForm-featureName",children:"绑定活动"})]}),Wt&&!on&&!ue&&Object(o.b)(h.a,{view:{id:8602},card:{content:{type:"Zvideo"}},trackCardShow:!0,children:Object(o.c)("div",{className:"VideoUploadForm-feature",onClick:function(){tn(!0)},children:[Object(o.b)(O,{className:"VideoUploadForm-featureIcon",size:20}),Object(o.b)("div",{className:"VideoUploadForm-featureName",children:"同步到圈子"})]})})]}),Boolean(null==Dt?void 0:Dt.length)&&Object(o.b)(B,{shown:Rt,onClose:function(){Et(!1)},defaultCampaignId:null==yt?void 0:yt.id,campaignList:Dt,onSubmit:function(e){Et(!1),Ot(e)}}),Wt&&Object(o.b)(Q,{shown:en,onClose:function(){return tn(!1)},selectedClub:on,onSelectClub:function(e){an(e),tn(!1)}}),te&&Object(o.c)("div",{className:"VideoUploadForm-syncToList",children:[Object(o.b)(R.a,{css:{marginRight:"8px"},checked:Tt,onChange:function(e){return Nt(e.target.checked)}}),"同步到个人主页「视频」列表"]}),Object(o.c)("div",{className:"VideoUploadForm-imageContainer",children:[Object(o.b)("img",{className:"VideoUploadForm-image",src:ut||X.a,alt:""}),Object(o.b)("div",{className:"VideoUploadForm-duration",children:Object(D.a)(null===(W=Z.video)||void 0===W?void 0:W.duration)}),Object(o.b)(w.a,{triggerClassName:"VideoUploadForm-imageEditButton",useCoverCrop:!1,originVideo:Z.file,onVideoPosterChange:dt,zvideoId:Z.id,id:Z.videoId})]}),Z.id&&Object(o.c)("div",{className:"VideoUploadForm-draftHint",children:[Object(o.b)(C.c,{className:"VideoUploadForm-draftRemoveButton",preset:"plain",icon:j.a,onClick:function(){ne()}}),Ut]}),Object(o.b)(h.a,{module:"Content",card:{content:{type:"Zvideo",token:Z.id}},children:Object(o.b)(f.a,{zaType:"Button",zaText:cn(),zaAction:"Save",as:C.c,className:"VideoUploadForm-submitButton",preset:"primary",color:"blue",onClick:function(e){var t=Object($.a)({title:Ee,description:Ne,categoryFirstLevel:ze,categorySecondLevelId:Ue,topics:Ye,zvideoType:ht},ee);if(t)return ke(t,"red");d.a.trackEvent(e.target,{id:7038,action:"Upload"},{button:{text:te?"添加":"发布视频"}});var n={id:Z.id,videoId:Z.videoId,title:Ee,description:Ne,category:{firstLevel:Le,secondLevel:Ue},zvideoType:ht,topicIds:Ye.map((function(e){return e.id||e.urlToken})),campaignId:null==yt?void 0:yt.id,clubId:null==on?void 0:on.id,imageUrl:ut,publishAt:pe};re(n,ue)},children:cn()})})]})})}},function(e,t,n){"use strict";var r=n(2),o=n(13),i=n(14),a=n(15),c=n(16),s=n(9),u=n(1),l=n(3),d=n.n(l),f=n(30),p=n(74);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var o=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var b=function(e){Object(a.a)(n,e);var t=h(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={logoutModalShown:!1},e.handleLogoutModalShow=function(){e.setState({logoutModalShown:!0})},e.handleLogoutModalHide=function(){e.setState({logoutModalShown:!1})},e.handleClick=function(){var t=e.context.currentUser;t&&t.urlToken?e.handleLogoutModalShow():location.href="https://www.zhihu.com/org/signup"},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this.state.logoutModalShown;return Object(r.c)(u.Fragment,{children:[Object(r.b)(f.c,{className:"OrgCreateButton",onClick:this.handleClick,children:"申请开通知乎机构号"}),e&&Object(r.c)(p.b,{className:"OrgCreateButton-logoutModal",title:"开通提示",onClose:this.handleLogoutModalHide,children:[Object(r.b)("p",{children:"若想访问机构号注册页面，请您请先退出当前帐号登录状态"}),Object(r.c)(p.a,{children:[Object(r.b)(f.c,{preset:"primary",color:"blue",onClick:function(){location.href="/logout?next=/org/signup"},children:"退出登录"}),Object(r.b)(f.c,{onClick:this.handleLogoutModalHide,children:"我再想想"})]})]})]})}}]),n}(u.Component);b.contextTypes={currentUser:d.a.object};var v=b;t.a=function(e){var t=e.showHelpCenter,n=void 0!==t&&t,o=(new Date).getFullYear();return Object(r.c)("footer",{className:"Footer",children:[n&&Object(r.c)(r.a,{children:[Object(r.b)("a",{className:"Footer-item",target:"_blank",rel:"noopener noreferrer",href:"/help-center",children:"帮助中心"}),Object(r.b)("span",{className:"Footer-dot"})]}),Object(r.b)("a",{className:"Footer-item",target:"_blank",rel:"noopener noreferrer",href:"//liukanshan.zhihu.com/",children:"刘看山"}),Object(r.b)("span",{className:"Footer-dot"}),Object(r.b)("a",{className:"Footer-item",target:"_blank",rel:"noopener noreferrer",href:"/question/19581624",children:"知乎指南"}),Object(r.b)("span",{className:"Footer-dot"}),Object(r.b)("a",{className:"Footer-item",target:"_blank",rel:"noopener noreferrer",href:"/term/zhihu-terms",children:"知乎协议"}),Object(r.b)("span",{className:"Footer-dot"}),Object(r.b)("a",{className:"Footer-item",target:"_blank",rel:"noopener noreferrer",href:"/term/privacy",children:"知乎隐私保护指引"}),Object(r.b)("br",{}),Object(r.b)("a",{className:"Footer-item",target:"_blank",href:"/app",children:"应用"}),Object(r.b)("span",{className:"Footer-dot"}),Object(r.b)("a",{className:"Footer-item",target:"_blank",rel:"noopener noreferrer",href:"https://app.mokahr.com/apply/zhihu",children:"工作"}),Object(r.b)("span",{className:"Footer-dot"}),Object(r.b)(v,{className:"Footer-item"}),Object(r.b)("br",{}),Object(r.b)("a",{className:"Footer-item",target:"_blank",rel:"noopener noreferrer",href:"https://zhuanlan.zhihu.com/p/28852607",children:"侵权举报"}),Object(r.b)("span",{className:"Footer-dot"}),Object(r.b)("a",{className:"Footer-item",target:"_blank",rel:"noopener noreferrer",href:"http://www.12377.cn",children:"网上有害信息举报专区"}),Object(r.b)("br",{}),Object(r.b)("a",{className:"Footer-item",target:"_blank",rel:"noopener noreferrer",href:"https://tsm.miit.gov.cn/dxxzsp/",children:"京 ICP 证 110745 号"}),Object(r.b)("br",{}),Object(r.b)("a",{className:"Footer-item",target:"_blank",rel:"noopener noreferrer",href:"https://beian.miit.gov.cn/",children:"京 ICP 备 13052560 号 - 1"}),Object(r.b)("br",{}),Object(r.c)("a",{className:"Footer-item",target:"_blank",rel:"noopener noreferrer",href:"http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=11010802020088",children:[Object(r.b)("img",{src:"https://pic3.zhimg.com/80/v2-d0289dc0a46fc5b15b3363ffa78cf6c7.png"}),"京公网安备 11010802020088 号"]}),Object(r.b)("br",{}),Object(r.c)("span",{className:"Footer-item",children:["互联网药品信息服务资格证书",Object(r.b)("br",{}),"（京）- 非经营性 - 2017 - 0067"]}),Object(r.b)("span",{className:"Footer-item",children:"违法和不良信息举报：010-82716601"}),Object(r.b)("br",{}),Object(r.b)("a",{className:"Footer-item",target:"_blank",href:"/term/child-jubao",children:"儿童色情信息举报专区"}),Object(r.b)("br",{}),Object(r.b)("a",{className:"Footer-item",target:"_blank",href:"/certificates",children:"证照中心"}),Object(r.b)("span",{className:"Footer-dot"}),Object(r.b)("a",{className:"Footer-item",target:"_blank",rel:"noopener noreferrer",href:"//ir.zhihu.com",children:"Investor Relations"}),Object(r.b)("br",{}),Object(r.b)("a",{className:"Footer-item",target:"_blank",href:"/contact",children:"联系我们"}),Object(r.c)("span",{children:[" © ",o," 知乎"]})]})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var r=n(13),o=n(14),i=n(15),a=n(16),c=n(9),s=n(2),u=n(3),l=n.n(u),d=n(1),f=n(11),p=n.n(f),h=n(237),b=n(431),v=n(188),m=n(206),g=n(24);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var O=function(e){Object(i.a)(n,e);var t=y(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={enabled:!1,shown:!1},e.handleScrollUp=function(){e.state.shown&&e.canToggle()&&e.setState({shown:!1})},e.handleScrollDown=function(){!e.state.shown&&e.canToggle()&&e.setState({shown:!0})},e.handlePositionStatusChange=function(t){e.canToggle()&&("normal"!==t?e.enable():e.disable())},e}return Object(o.a)(n,[{key:"canToggle",value:function(){return!(this.props.prevent||document.activeElement&&document.activeElement.closest(".SearchBar"))}},{key:"enable",value:function(){this.setState({enabled:!0,shown:!0})}},{key:"disable",value:function(){this.setState({enabled:!1,shown:!1})}},{key:"render",value:function(){var e=this,t=this.props,n=t.offset,r=t.children,o=this.state,i=o.enabled,a=o.shown;return Object(s.c)(d.Fragment,{children:[Object(s.b)(m.a,{shortcuts:[{key:"/",action:function(){return e.setState({shown:!1})}}]}),Object(s.b)(h.a,{offset:n,onPositionStatusChange:this.handlePositionStatusChange,children:Object(s.b)("div",{})}),i&&Object(s.b)(b.a,{onScrollUp:this.handleScrollUp,onScrollDown:this.handleScrollDown}),Object(s.b)(v.a.Inlet,{shown:a,children:Object(s.b)("div",{className:p()("PageHeader",{"is-shown":a}),children:r})})]})}}]),n}(d.Component);O.propTypes={prevent:l.a.bool,offset:l.a.number},O.defaultProps={prevent:!1,offset:g.i};var j=O},function(e,t,n){"use strict";var r=n(13),o=n(14),i=n(15),a=n(16),c=n(9),s=n(2),u=n(3),l=n.n(u),d=n(1),f=n(920),p=n(367),h=n(370),b=n(1113),v=n(1022);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var g=function(e){Object(i.a)(n,e);var t=m(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isFetching,n=e.isDrained,r=e.items,o=e.voteupCount,i=e.onLoad,a=e.text,c=e.isRewardList,u=e.notice,l=e.type,d=e.currentUser,m={getContainer:function(e){return e}};return Object(s.c)("div",{className:"VoterList",children:[Object(s.b)(b.a,{header:"".concat(Object(p.formatNumber)(o)," 人").concat(a||"赞同了")}),c&&u&&Object(s.b)("div",{className:"VoterList-description",children:Object(s.b)("p",{children:u})}),Object(s.b)(h.b,Object.assign({className:"VoterList-content",isLoading:t,isDrained:n,onLoad:i,placeholder:Object(s.b)(h.a,{className:"List-item",withAvatar:!0})},m,{children:r&&r.map((function(e,t){return Object(s.b)(f.a,{children:Object(s.b)(v.a,{currentUser:d,user:e,isRewardList:c,meta:null,type:l,userLinkV2:!0})},"".concat(t,".").concat(e.urlToken))}))}))]})}}]),n}(d.Component);g.propTypes={isFetching:l.a.bool.isRequired,isDrained:l.a.bool.isRequired,items:l.a.array.isRequired,voteupCount:l.a.number.isRequired,text:l.a.string.isRequired,onLoad:l.a.func.isRequired,isRewardList:l.a.bool,type:l.a.string,currentUser:l.a.object};t.a=g},,function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,o,i,a,c,s=1,u={},l=!1,d=e.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(e);f=f&&f.setTimeout?f:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick((function(){h(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((i=new MessageChannel).port1.onmessage=function(e){h(e.data)},r=function(e){i.port2.postMessage(e)}):d&&"onreadystatechange"in d.createElement("script")?(o=d.documentElement,r=function(e){var t=d.createElement("script");t.onreadystatechange=function(){h(e),t.onreadystatechange=null,o.removeChild(t),t=null},o.appendChild(t)}):r=function(e){setTimeout(h,0,e)}:(a="setImmediate$"+Math.random()+"$",c=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(a)&&h(+t.data.slice(a.length))},e.addEventListener?e.addEventListener("message",c,!1):e.attachEvent("onmessage",c),r=function(t){e.postMessage(a+t,"*")}),f.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var o={callback:e,args:t};return u[s]=o,r(s),s++},f.clearImmediate=p}function p(e){delete u[e]}function h(e){if(l)setTimeout(h,0,e);else{var t=u[e];if(t){l=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{p(e),l=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(100),n(241))},function(e,t,n){"use strict";var r={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i=Object.defineProperty,a=Object.getOwnPropertyNames,c=Object.getOwnPropertySymbols,s=Object.getOwnPropertyDescriptor,u=Object.getPrototypeOf,l=u&&u(Object);e.exports=function e(t,n,d){if("string"!=typeof n){if(l){var f=u(n);f&&f!==l&&e(t,f,d)}var p=a(n);c&&(p=p.concat(c(n)));for(var h=0;h<p.length;++h){var b=p[h];if(!(r[b]||o[b]||d&&d[b])){var v=s(n,b);try{i(t,b,v)}catch(e){}}}return t}return t}},function(e,t,n){"use strict";var r=n(57);Object.defineProperty(t,"__esModule",{value:!0}),t.stripHTML=t.truncateHTML=t.getBlockType=t.parseTag=t.parseTagGroup=t.parseAttrs=t.TAG_RE=t.TAG_RE_TEMPLATE=void 0;var o=["img","br"],i=/([\w|-]+)(?:="([^"]*)")?/;function a(e){var t={};if((e=e.trim()).length)for(var n,o=new RegExp(i.source,"g");n=o.exec(e);){var a=n.slice(1),c=r(a,2),s=c[0],u=c[1];t[s]=u}return t}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r(e,5),i=n[0],c=n[1],s=n[2],u=n[3],l=n[4],d="open";"/"===c?d="close":(o.includes(s)||"/"===l)&&(d="self-close");var f=t.parseAttrs?a(u):u;return{tagHTML:i,tagName:s,tagType:d,attrs:f}}function s(e){var t=e.tagName,n=e.attrs;return"string"==typeof n?t:"invisible"===n.class?"invisible":"video-box"===n.class?"video-box":["link-card","mcn-link-card","metalink"].includes(n["data-draft-type"])?"link-card":t}function u(e){switch(e){case"invalid":return{type:"invalid"};case"noscript":case"figcaption":case"video-box":case"link-card":return{type:"replace",content:" "};case"div":case"br":case"figure":case"img":case"hr":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":case"p":case"pre":case"code":case"blockquote":case"ul":case"ol":case"li":return{type:"replace-self",content:" "};case"invisible":return{type:"hide"};default:return null}}function l(e){return!!(e.h1||e.h2||e.h3||e.h4||e.h5||e.h6||e.blockquote||e.pre||e.img||e["video-box"]||e["link-card"])||(e.br||0)+(e.p||0)+(e.li||0)>1}t.TAG_RE_TEMPLATE=new RegExp(/<(\/?)(#TAG_NAME#)\s*(#TAG_ATTRS#)\s*(\/?)>/.source.replace("#TAG_ATTRS#",/[^>]*/.source)),t.TAG_RE=new RegExp(t.TAG_RE_TEMPLATE.source.replace("#TAG_NAME#",/[\w|-]+/.source)),t.parseAttrs=a,t.parseTagGroup=c,t.parseTag=function(e,n){var r=t.TAG_RE.exec(e);if(r)return c(r,n)},t.getBlockType=s,t.truncateHTML=function(e){for(var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=i.endsWith,d=void 0===a?"…":a,f=i.placeholders,p=void 0===f?{}:f,h=[],b=[],v=[],m={},g={},y=new RegExp(t.TAG_RE.source,"g"),O=0,j=0,w=0,C=0,k=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];h.push(e),t||(O+=e.length),j+=e.length};n=y.exec(e);){var S=c(n,{parseAttrs:!0}),x=S.tagHTML,R=S.tagType,E=S.tagName,_="close"===R&&o.includes(E)?"invalid":s("close"!==R?S:b[b.length-1]),A=p[_]?{type:"replace",content:p[_]}:u(_);"close"!==R&&(m[_]=(m[_]||0)+1);var T=e.slice(j,n.index),N=T.length;if(O+N>=r&&0===w&&0===C){for(k(T.slice(0,r-O));v.length;){var I=v.pop();h.push("</".concat(I.tagName,">"))}break}0===w&&k(T,0!==C),"invalid"!==_&&("open"===R?b.push(S):"close"===R&&b.pop(),A?("replace"===A.type&&(0===w&&"close"!==R&&h.push(A.content),"open"===R?w++:"close"===R&&w--),0===w&&"replace-self"===A.type&&h.push(A.content),0===w&&"hide"===A.type&&("open"===R?C++:"close"===R&&C--,h.push(x))):0===w&&(h.push(x),"open"===R?v.push(S):"close"===R&&v.pop())),"video-box"!==_||g.type||"string"==typeof S.attrs||(g.type="video",g.url=S.attrs["data-poster"],g.id=S.attrs["data-lens-id"]),j=y.lastIndex}if(O<r){var M=e.slice(j).slice(0,r-O);k(M)}var D=O>r||O===r&&j<e.length||l(m);return{isTruncated:D,thumbnailInfo:g,content:"".concat(h.join("").trim().replace(/\s{2,}/g," ")).concat(D?d:"")}},t.stripHTML=function(e){var t=document.createElement("DIV");return t.innerHTML=e,t.textContent||t.innerText||""}},function(e,t,n){"use strict";var r=n(77),o=n.n(r);function i(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return c=e.done,e},e:function(e){s=!0,i=e},f:function(){try{c||null==n.return||n.return()}finally{if(s)throw i}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var c=["DIV","P","BLOCKQUOTE","PRE","CODE","OL","UL","H1","H2","H3","H4","H5","H6"],s=function(e){return c.includes(e.nodeName)||e.classList&&(e.classList.contains("video-box")||e.classList.contains("link-box")||e.classList.contains("origin_image")||e.classList.contains("content_image"))};t.a=function(e){if("undefined"==typeof window)return e;if(-1!==e.indexOf("<p>"))return e;var t=document,n=t.createElement("div");n.innerHTML=e;var r,a=i(o()(n.childNodes));try{for(a.s();!(r=a.n()).done;){var c=r.value;if("BR"===c.nodeName&&c.previousSibling&&"BR"!==c.previousSibling.nodeName&&c.nextSibling&&"BR"===c.nextSibling.nodeName){for(var u=t.createElement("p"),l=c.previousSibling;l&&!s(l)&&("BR"!==l.nodeName||l.previousSibling&&"BR"!==l.previousSibling.nodeName&&!s(l.previousSibling));){var d=u.childNodes;d.length>0?u.insertBefore(l,d[0]):u.appendChild(l),l=c.previousSibling}u.childNodes.length>0&&(n.insertBefore(u,c),c.nextSibling.parentNode.removeChild(c.nextSibling),c.parentNode.removeChild(c))}}}catch(e){a.e(e)}finally{a.f()}return n.innerHTML}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(33),o=n.n(r),i=n(1),a=n.n(i);function c(e){return a.a.createElement("svg",o()({},e,{viewBox:"0 0 24 24"}),a.a.createElement("path",{d:"M9.218 16.78a.737.737 0 0 0 1.052 0l4.512-4.249a.758.758 0 0 0 0-1.063L10.27 7.22a.737.737 0 0 0-1.052 0 .759.759 0 0 0-.001 1.063L13 12l-3.782 3.716a.758.758 0 0 0 0 1.063z",fillRule:"evenodd"}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(33),o=n.n(r),i=n(1),a=n.n(i);function c(e){return a.a.createElement("svg",o()({viewBox:"0 0 24 24"},e),a.a.createElement("path",{d:"M13.491 10.488s-.012-5.387 0-5.998c-.037-1.987-3.035-1.987-2.997 0-.038 1.912 0 5.998 0 5.998H4.499c-1.999.01-1.999 3.009 0 3.009s5.995-.01 5.995-.01v5.999c0 2.019 3.006 2.019 2.997 0-.01-2.019 0-5.998 0-5.998s3.996.009 6.004.009c2.008 0 2.008-3-.01-3.009h-5.994z",fillRule:"evenodd"}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(33),o=n.n(r),i=n(1),a=n.n(i);function c(e){return a.a.createElement("svg",o()({viewBox:"0 0 12 12"},e),a.a.createElement("path",{fillRule:"evenodd",d:"M3 2L2 3l3 3-3 3 1 1 3-3 3 3 1-1-3-3 3-3-1-1-3 3"}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(1),o=n.n(r);function i(e){var t=e.style;return o.a.createElement("svg",{width:"16",height:"16",viewBox:"0 0 24 25",style:t},o.a.createElement("path",{fill:"#FA0",d:"M17.274758,15.4469628 L19.717838,23.7077251 C19.8447617,24.1107955 19.7143932,24.5558233 19.3955281,24.8079664 C19.0766631,25.0601095 18.6426594,25.0613602 18.3225416,24.8110584 L11.9871141,19.556149 L5.67675579,24.8157738 C5.35585352,25.0642585 4.92230992,25.0611015 4.60456814,24.8079664 C4.28682636,24.5548313 4.15784801,24.1098443 4.28559448,23.7074782 L6.69918173,15.4591101 L0.383646092,10.7225632 C0.0610151875,10.4737818 -0.0766431831,10.0304757 0.0422739945,9.62323054 C0.161191172,9.21598539 0.509822814,8.93679002 0.906828141,8.93086791 L8.69117778,8.93086791 L11.125674,0.681629762 C11.2430397,0.276206583 11.5378306,0 12.0000481,0 C12.4622656,0 12.7310442,0.276206583 12.8484099,0.681629762 L15.2829062,8.93086791 L23.0932681,8.93086791 C23.4904075,8.93683682 23.8390971,9.21625563 23.9578641,9.62370313 C24.0766312,10.0311506 23.9386295,10.4745268 23.6156809,10.7230801 L17.274758,15.4469628 Z"}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(33),o=n.n(r),i=n(1),a=n.n(i);function c(e){return a.a.createElement("svg",o()({width:"16",height:"16",viewBox:"0 0 24 25"},e),a.a.createElement("path",{fill:"none",stroke:"#FA0",strokeWidth:"1.764",d:"M11.9819001,0.879433133 C11.9795516,0.880021622 11.9838641,0.88895781 11.971605,0.931278979 L9.35049088,9.81286791 L8.69117778,9.81286791 L0.919983421,9.8127698 C0.919003912,9.81278441 0.901713576,9.82663106 0.888917203,9.87045367 C0.870461414,9.93365758 0.891089579,10.0000872 0.912838593,10.0169576 L7.7173316,15.1202144 L7.54568587,15.7068089 L5.12624332,23.9743743 C5.10962557,24.0267157 5.12267547,24.0829123 5.14588507,24.110054 L11.9857433,18.4090959 L12.5501987,18.8772825 L18.8564176,24.1084404 C18.8797348,24.0814822 18.8926963,24.023831 18.8720512,23.9578624 L16.254506,15.1071827 L16.7478316,14.7396633 L23.0777374,10.0241232 C23.1088665,10.000165 23.1295357,9.93375829 23.111104,9.87052561 C23.0983169,9.82665738 23.0810031,9.81278318 23.0932681,9.81286791 L14.6235931,9.81286791 L14.4369752,9.18051713 L12.0011958,0.92688923 C11.9873473,0.879051627 11.9964848,0.872771777 12.0017908,0.875210734 Z"}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(1),o=n.n(r);function i(e){return o.a.createElement("svg",{width:"16",height:"16",viewBox:"0 0 24 25",style:e.style},o.a.createElement("path",{fill:"#FA0",d:"M17.274758,15.4469628 L19.717838,23.7077251 C19.8447617,24.1107955 19.7143932,24.5558233 19.3955281,24.8079664 C19.0766631,25.0601095 18.6426594,25.0613602 18.3225416,24.8110584 L11.9871141,19.556149 L5.67675579,24.8157738 C5.35585352,25.0642585 4.92230992,25.0611015 4.60456814,24.8079664 C4.28682636,24.5548313 4.15784801,24.1098443 4.28559448,23.7074782 L6.69918173,15.4591101 L0.383646092,10.7225632 C0.0610151875,10.4737818 -0.0766431831,10.0304757 0.0422739945,9.62323054 C0.161191172,9.21598539 0.509822814,8.93679002 0.906828141,8.93086791 L8.69117778,8.93086791 L11.125674,0.681629762 C11.2430397,0.276206583 11.5378306,0 12.0000481,0 C12.4622656,0 12.7310442,0.276206583 12.8484099,0.681629762 L15.2829062,8.93086791 L23.0932681,8.93086791 C23.4904075,8.93683682 23.8390971,9.21625563 23.9578641,9.62370313 C24.0766312,10.0311506 23.9386295,10.4745268 23.6156809,10.7230801 L17.274758,15.4469628 Z"}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(33),o=n.n(r),i=n(1),a=n.n(i);function c(e){return a.a.createElement("svg",o()({xmlns:"http://www.w3.org/2000/svg",width:"27",height:"24",viewBox:"0 0 27 24"},e),a.a.createElement("path",{fill:"#0084FF",d:"M25.0589726,39.0133333 C25.4056402,39.0133333 25.7340622,39.0755556 26.0442385,39.2 C26.3544148,39.3244444 26.6280998,39.4977778 26.8652934,39.72 C27.1024871,39.9422222 27.2849437,40.2044444 27.4126634,40.5066667 C27.540383,40.8088889 27.6042428,41.1288889 27.6042428,41.4666667 C27.6042428,41.8044444 27.540383,42.1244444 27.4126634,42.4266667 C27.2849437,42.7288889 27.1024871,42.9911111 26.8652934,43.2133333 C26.6280998,43.4355556 26.3544148,43.6133333 26.0442385,43.7466667 C25.7340622,43.88 25.4056402,43.9466667 25.0589726,43.9466667 C24.6940593,43.9466667 24.3610759,43.88 24.0600224,43.7466667 C23.758969,43.6133333 23.4898454,43.4355556 23.2526518,43.2133333 C23.0154581,42.9911111 22.8330015,42.7288889 22.7052818,42.4266667 C22.5775622,42.1244444 22.5137023,41.8044444 22.5137023,41.4666667 C22.5137023,41.1288889 22.5775622,40.8088889 22.7052818,40.5066667 C22.8330015,40.2044444 23.0154581,39.9422222 23.2526518,39.72 C23.4898454,39.4977778 23.758969,39.3244444 24.0600224,39.2 C24.3610759,39.0755556 24.6940593,39.0133333 25.0589726,39.0133333 Z M36.4442675,39.0666667 C36.7909351,39.0666667 37.1239185,39.1288889 37.4432176,39.2533333 C37.7625167,39.3777778 38.0362017,39.5511111 38.2642725,39.7733333 C38.4923433,39.9955556 38.6748,40.2577778 38.8116425,40.56 C38.948485,40.8622222 39.0169062,41.1822222 39.0169062,41.52 C39.0169062,41.8577778 38.948485,42.1777778 38.8116425,42.48 C38.6748,42.7822222 38.4923433,43.0444444 38.2642725,43.2666667 C38.0362017,43.4888889 37.7625167,43.6666667 37.4432176,43.8 C37.1239185,43.9333333 36.7909351,44 36.4442675,44 C36.0975998,44 35.7691779,43.9333333 35.4590016,43.8 C35.1488253,43.6666667 34.8797017,43.4888889 34.6516309,43.2666667 C34.4235601,43.0444444 34.2411034,42.7822222 34.1042609,42.48 C33.9674185,42.1777778 33.8989972,41.8577778 33.8989972,41.52 C33.8989972,41.1822222 33.9674185,40.8622222 34.1042609,40.56 C34.2411034,40.2577778 34.4235601,39.9955556 34.6516309,39.7733333 C34.8797017,39.5511111 35.1488253,39.3777778 35.4590016,39.2533333 C35.7691779,39.1288889 36.0975998,39.0666667 36.4442675,39.0666667 Z M41.042175,23.92 C41.5530536,23.92 41.9498968,23.9866667 42.2327046,24.12 C42.5155124,24.2533333 42.7162147,24.4177778 42.8348116,24.6133333 C42.9534084,24.8088889 43.0081454,25.0177778 42.9990226,25.24 C42.9898997,25.4622222 42.9579698,25.6533333 42.9032328,25.8133333 C42.8484958,25.9733333 42.7344604,26.3022222 42.5611266,26.8 C42.3877928,27.2977778 42.1916519,27.8444444 41.9727039,28.44 C41.7537559,29.0355556 41.5393694,29.6266667 41.3295442,30.2133333 C41.1197191,30.8 40.9600695,31.2622222 40.8505955,31.6 C40.6134019,32.3111111 40.3123484,32.8044444 39.9474351,33.08 C39.5825218,33.3555556 39.135503,33.4933333 38.6063787,33.4933333 L37.6758498,33.4933333 L35.8968975,33.4933333 L33.5705752,33.4933333 L31.025305,33.4933333 L24.2379177,33.4933333 L24.6484451,35.8933333 L38.4421678,35.8933333 C39.3179597,35.8933333 39.7558556,36.2577778 39.7558556,36.9866667 C39.7558556,37.3422222 39.6691887,37.6488889 39.4958549,37.9066667 C39.3225211,38.1644444 38.9804149,38.2933333 38.4695363,38.2933333 L37.1558484,38.2933333 L34.6105781,38.2933333 L31.463201,38.2933333 L28.2610868,38.2933333 L25.633711,38.2933333 L24.1284437,38.2933333 C23.7635304,38.2933333 23.4579155,38.2133333 23.211599,38.0533333 C22.9652826,37.8933333 22.7600188,37.6844444 22.5958078,37.4266667 C22.4315969,37.1688889 22.2993158,36.8888889 22.1989646,36.5866667 C22.0986135,36.2844444 22.0210694,36 21.9663324,35.7333333 C21.9480867,35.6266667 21.8979112,35.3688889 21.8158057,34.96 C21.7337002,34.5511111 21.633349,34.04 21.5147522,33.4266667 C21.3961554,32.8133333 21.2638743,32.1288889 21.117909,31.3733333 C20.9719437,30.6177778 20.8259784,29.8577778 20.680013,29.0933333 C20.3333454,27.2977778 19.9410636,25.2977778 19.5031677,23.0933333 L17.4505304,23.0933333 C17.1768454,23.0933333 16.9487746,23.0266667 16.7663179,22.8933333 C16.5838613,22.76 16.4333345,22.6 16.3147377,22.4133333 C16.1961409,22.2266667 16.1140354,22.0266667 16.0684212,21.8133333 C16.0228071,21.6 16,21.4044444 16,21.2266667 C16,20.8711111 16.1231582,20.5777778 16.3694747,20.3466667 C16.6157912,20.1155556 16.9487746,20 17.3684249,20 L17.9705318,20 L18.5179017,20 L19.2021142,20 L20.1326431,20 C20.4975564,20 20.789487,20.0533333 21.008435,20.16 C21.227383,20.2666667 21.4007168,20.4 21.5284364,20.56 C21.6561561,20.72 21.7473844,20.8888889 21.8021214,21.0666667 C21.8568584,21.2444444 21.9024726,21.3955556 21.9389639,21.52 C21.9754552,21.6622222 22.0119466,21.8622222 22.0484379,22.12 C22.0849292,22.3777778 22.1214206,22.64 22.1579119,22.9066667 C22.2126489,23.2266667 22.2673859,23.5644444 22.3221229,23.92 L41.042175,23.92 Z",transform:"translate(-16 -20)"}))}},function(e,t,n){e.exports=n.p+"assets/sidebar-download-qrcode.7caef4dd.png"},,function(e,t,n){},function(e,t,n){var r=n(17);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e}},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a}));var r=n(13),o=function(){return!0},i={REDIRECT_URL:"REDIRECT_URL",CHANGE_IFRAME_HEIGHT:"CHANGE_IFRAME_HEIGHT",SHOW_APPLY_RIGHTS_SUCCESS_MODAL:"SHOW_APPLY_RIGHTS_SUCCESS_MODAL"},a=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(r.a)(this,e),this.onIframeMessage=function(e){!1!==t.beforeMessage(e)&&e.data&&e.data.type&&t.onMessage(e.data,e)},this.close=function(){window.removeEventListener("message",t.onIframeMessage)};var o=Object.assign({},e.defaultOption,n);this.beforeMessage=o.beforeMessage,this.onMessage=o.onMessage,window.addEventListener("message",this.onIframeMessage)};a.defaultOption={beforeMessage:o,onMessage:o}},function(e,t){e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,n=[],r=0;r<e.rangeCount;r++)n.push(e.getRangeAt(r));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||n.forEach((function(t){e.addRange(t)})),t&&t.focus()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.observe=i,t.unobserve=a,t.destroy=c;var r=new Map,o=new Map;function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{threshold:0},i=arguments[3],a=n.root,c=n.rootMargin,u=n.threshold||0;if(e&&t){var l=c?u.toString()+"_"+c:""+u.toString();a&&(l=i?i+"_"+l:null);var d=l?o.get(l):null;d||(d=new IntersectionObserver(s,n),l&&o.set(l,d));var f={callback:t,visible:!1,options:n,observerId:l,observer:l?void 0:d};return r.set(e,f),d.observe(e),f}}function a(e){if(e){var t=r.get(e);if(t){var n=t.observerId,i=t.observer,a=n?o.get(n):i;a&&a.unobserve(e);var c=!1;n&&r.forEach((function(t,r){t&&t.observerId===n&&r!==e&&(c=!0)})),a&&!c&&(a.disconnect(),o.delete(n)),r.delete(e)}}}function c(){o.forEach((function(e){e.disconnect()})),o.clear(),r.clear()}function s(e){e.forEach((function(e){var t=e.isIntersecting,n=e.intersectionRatio,o=e.target,i=r.get(o);if(i&&n>=0){var a=i.options,c=!1;Array.isArray(a.threshold)?c=a.threshold.some((function(e){return i.visible?n>e:n>=e})):void 0!==a.threshold&&(c=i.visible?n>a.threshold:n>=a.threshold),void 0!==t&&(c=c&&t),i.callback&&i.callback(c)}}))}t.default={observe:i,unobserve:a,destroy:c}},function(e,t,n){e.exports=n.p+"assets/deleteComment.97d8abc0.gif"},function(e,t,n){"use strict";n.d(t,"d",(function(){return C})),n.d(t,"a",(function(){return S})),n.d(t,"e",(function(){return x})),n.d(t,"b",(function(){return E}));var r=n(13),o=n(14),i=n(15),a=n(16),c=n(9),s=n(2),u=n(235),l=n.n(u),d=n(1),f=n(73),p=n.n(f),h=n(35),b=n.n(h),v=n(48),m=n.n(v);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var y="success",O="fail",j="request",w="error";function C(){var e=b.a.get("EDITABLE_STATSC");e&&(e.forEach((function(e){m.a.increment(e)})),b.a.delete("EDITABLE_STATSC"))}var k={get pageName(){return"UnknownPage"},reportRequest:l.a,reportSuccess:l.a,reportFail:l.a,reportFailAfterTimeout:l.a,reportError:l.a,reportFailFromFunc:function(e){return e},reportAllFromFunc:function(e){return e},reportAllFromPromise:function(e){return e},reportToSentry:l.a},S=Object(d.createContext)(),x=function(e){return p()((function(t){var n=Object(d.useContext)(S)||k;return Object(s.b)(e,Object.assign({reporter:n},t))}),e)},R=function(e){Object(i.a)(n,e);var t=g(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"componentDidCatch",value:function(e,t){var n=this.props,r=n.reporter,o=n.name;throw r&&(r.reportError(o),r.reportToSentry(o,e,{extra:{errorInfo:t}})),e}},{key:"render",value:function(){return this.props.children}}]),n}(d.Component),E=x(R);t.c=function(e){var t=function(t,n){m.a.increment("".concat(e,".").concat(t,".").concat(n,".count"))},n=function(t,n){var r="".concat(e,".").concat(t,".").concat(n,".count"),o=b.a.get("EDITABLE_STATSC")||[];o.push(r),b.a.set("EDITABLE_STATSC",o)},r=function(e){return t(e,y)},o=function(e){return t(e,O)};return{get pageName(){return e},reportRequest:function(e){return t(e,j)},reportSuccess:r,reportFail:o,reportFailAfterTimeout:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3,r=function(){n(e,O)};window.addEventListener("beforeunload",r);var i=setTimeout((function(){o(e),i=null,window.removeEventListener("beforeunload",r)}),t),a=function(){i&&(clearTimeout(i),window.removeEventListener("beforeunload",r))};return a},reportError:function(e){return t(e,w)},reportFailFromFunc:function(e,t){return function(){try{return t.apply(void 0,arguments)}catch(t){throw o(e),t}}},reportAllFromFunc:function(e,t){return function(){try{var n=t.apply(void 0,arguments);return r(e),n}catch(t){throw o(e),t}}},reportAllFromPromise:function(e,t){return t.then((function(t){return r(e),t}),(function(t){throw o(e),t}))},reportToSentry:function(t,n){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};null===(r=window.Raven)||void 0===r||r.captureException(n,Object.assign({tags:{scope:"".concat(e,":").concat(t)}},o))},stash:n}}},function(e,t,n){},function(e,t){var n="function"==typeof Float32Array;function r(e,t){return 1-3*t+3*e}function o(e,t){return 3*t-6*e}function i(e){return 3*e}function a(e,t,n){return((r(t,n)*e+o(t,n))*e+i(t))*e}function c(e,t,n){return 3*r(t,n)*e*e+2*o(t,n)*e+i(t)}function s(e){return e}e.exports=function(e,t,r,o){if(!(0<=e&&e<=1&&0<=r&&r<=1))throw new Error("bezier x values must be in [0, 1] range");if(e===t&&r===o)return s;for(var i=n?new Float32Array(11):new Array(11),u=0;u<11;++u)i[u]=a(.1*u,e,r);function l(t){for(var n=0,o=1;10!==o&&i[o]<=t;++o)n+=.1;--o;var s=n+.1*((t-i[o])/(i[o+1]-i[o])),u=c(s,e,r);return u>=.001?function(e,t,n,r){for(var o=0;o<4;++o){var i=c(t,n,r);if(0===i)return t;t-=(a(t,n,r)-e)/i}return t}(t,s,e,r):0===u?s:function(e,t,n,r,o){var i,c,s=0;do{(i=a(c=t+(n-t)/2,r,o)-e)>0?n=c:t=c}while(Math.abs(i)>1e-7&&++s<10);return c}(t,n,n+.1,e,r)}return function(e){return 0===e?0:1===e?1:a(l(e),t,o)}}},function(e,t,n){"use strict";var r=n(0),o=n(2),i=n(11),a=n.n(i),c=n(1515),s=n(792),u=n(1508),l=n(1509),d=n(796),f=n(1510),p=n(1511),h=n(1512),b=n(1513),v=n(1514),m={online_roundtable:s.a,relevant:u.a,editor_recommendation:l.a,roundtable:s.a,special:d.a,weekly:f.a,daily:p.a,professional:h.a,zhizhi_plan_recommend:b.a,zhizhi_plan_edu_recommend:b.a,zhizhi_plan_baby_recommend:b.a,zhizhi_plan_acg_recommend:b.a,zhizhi_plan_outing_recommend:b.a,zhizhi_plan_rumour_deny:v.a,zhizhi_plan:b.a},g=n(236),y={alpha:1,group:"GYL02A"},O={alpha:.08,group:"GYL02A"},j={brand_special:c.a},w=Object.assign({},m,{COMMERCIAL_ICONS:j}),C=function(e){return"GBL07A"===(e||y).group?"commercial":"positive"},k=function(e){return"GBL07A"===(e||O).group?"commercial":"positive"},S=function(e){return"recognition"===e?"professional":e};t.a=Object(g.a)(null)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.labelInfo,n=e.extra,i=void 0===n?{}:n,c=e.className;if(!t)return null;var s=t.type,u=t.text,l=t.foregroundColor,d=t.backgroundColor,f=i.customIcon,p=i.customIconClassName,h=C(l),b=k(d),v=f||w[S(s)];return v?Object(o.c)("span",{className:a()("Label-icon","Label-iconColor--".concat(h),Object(r.a)({},"Label-iconColor--".concat(b,"Background"),d),c),children:[Object(o.b)(v,{center:!0,className:a()("Label-iconImg",p)}),u]}):null}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n(32),o=n(13),i=n(14),a=n(15),c=n(16),s=n(9),u=n(2),l=n(1),d=n(3),f=n.n(d),p=n(920),h=n(206);function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var o=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var v=function(e){Object(a.a)(n,e);var t=b(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.containerClassName,n=e.selector,o=Object(r.a)(e,["containerClassName","selector"]);return Object(u.b)(h.b,{className:t,selector:n,children:Object(u.b)(p.b,Object.assign({},o))})}}]),n}(l.Component);v.propTypes={containerClassName:f.a.string,selector:f.a.string},v.defaultProps={selector:".List-item"};var m=v},function(e,t,n){"use strict";var r=n(2),o=n(1),i=n.n(o),a=n(18),c=function(e){return i.a.createElement(a.a,e,i.a.createElement("path",{fill:"currentColor",d:"M3.495 3A1.993 1.993 0 0 0 1.5 4.99v14.02c0 1.092.893 1.99 1.995 1.99h16.01a1.993 1.993 0 0 0 1.995-1.99V4.99c0-1.092-.893-1.99-1.995-1.99zm1.007 8a.999.999 0 1 1 0-2h6.995a.999.999 0 1 1 0 2zM3.5 14c0 .556.449 1 1.002 1h4.995a.999.999 0 1 0 0-2H4.502c-.546 0-1.002.448-1.002 1zm15.285-2.429a.5.5 0 0 1 0 .858l-3.528 2.117a.5.5 0 0 1-.757-.43V9.884a.5.5 0 0 1 .757-.429z",fillRule:"evenodd",clipRule:"evenodd"}))};c.defaultProps={name:"Catalog"};var s=c,u=n(30),l=n(876),d=n(368),f=n(28);t.a=function(e){var t=e.className,n=e.onClick,i=e.html,a=e.sourceId,c=Object(o.useCallback)((function(e){f.a.trackEvent(e.target,{id:9857,action:"Click"}),n&&n(e)}),[n]),p=Object(o.useMemo)((function(){return Object(l.c)(i,a).catalog}),[i,a]);return(null==p?void 0:p.length)?Object(r.b)(d.a,{trackCardShow:!0,view:{id:9856},children:Object(r.b)(u.c,{preset:"plain",className:t,onClick:c,icon:s,label:"目录"})}):null}},function(e,t,n){"use strict";var r=n(845),o=n(2),i=n(1),a=n(11),c=n.n(a),s=n(132),u=n(176),l=n(371),d=n.n(l),f=n(876),p=n(40),h=n(32),b=n(90),v=n(834),m=n(173),g=n(368),y=n(28),O=n(848),j=function(e){var t=e.children,n=e.targetId,r=e.active,i=e.setCursor,a=Object(h.a)(e,["children","targetId","active","setCursor"]);return Object(o.b)(b.Text,Object.assign({color:r?"GBL01A":"GBK02A",fontWeight:r?"bold":"normal",css:{fontSize:"14px"}},a,{children:Object(o.b)(g.a,{module:"Content",moduleName:String(t),children:Object(o.c)(b.Flex,{css:{cursor:"pointer",alignItems:"center",height:"48px"},sx:{borderBottom:"1px solid",borderColor:"GBK09A"},onClick:function(e){y.a.trackEvent(e.target,{id:9745,action:"Click",name:"弹窗"});var t=document.querySelector("#"+n);i(n),t&&Object(O.a)(t)},children:[Object(o.b)(b.Text,{css:Object(m.d)(1),children:t}),Object(o.b)(v.a,{size:"24px",css:function(e){return{color:e.colors.GBL05A,flex:"0 0 auto",marginLeft:"auto"}}})]})})}))},w=function(e){return Object(o.b)(j,Object.assign({},e))},C={1:w,2:function(e){return Object(o.b)(j,Object.assign({pl:"20px"},e))}},k=function(e){var t=e.catalog,n=e.className,r=e.zaContent,a=Object(i.useState)(null),s=Object(p.a)(a,2),u=s[0],l=s[1];return Object(i.useEffect)((function(){if(null==t?void 0:t.length){var e=null,n=Object(O.d)();t.forEach((function(t){var r=document.querySelector("#"+t.targetId);(null==r?void 0:r.getBoundingClientRect().top)<=n+2&&(e=t.targetId)})),l(e)}}),[]),(null==t?void 0:t.length)?Object(o.b)(g.a,{trackCardShow:!0,view:{id:9744,name:"弹窗"},content:r,module:"Content",children:Object(o.b)(b.Box,{className:c()(n),children:Object(o.b)(b.Flex,{flexDirection:"column",css:{fontSize:"12px"},children:t.map((function(e){var t=e.titleLevel,n=e.text,r=e.targetId,i=C[t]||w;return Object(o.b)(i,{targetId:r,active:u===r,setCursor:l,children:n},r)}))})})}):null};function S(){var e=Object(r.a)([""," 编辑于",""]);return S=function(){return e},e}t.a=function(e){var t=e.className,n=e.shown,r=e.onClose,a=e.html,l=e.sourceId,p=e.updated,h=e.author,b=e.zaContent,v=Object(i.useMemo)((function(){return Object(f.c)(a,l).catalog}),[a,l]);return Object(o.b)(s.b,{wrapperClassName:"CatalogModal-wrapper",className:c()("CatalogModal",t),title:"目录",subtitle:d()(S(),null==h?void 0:h.name,Object(u.toSmartString)(p)),onClose:r,children:n&&Object(o.b)(k,{css:{paddingBottom:"16px"},catalog:v,zaContent:b})})}},function(e,t,n){"use strict";var r=n(40),o=n(2),i=n(73),a=n.n(i),c=n(7),s=n(153),u=n(4),l=n(114);function d(e){return e.reduce((function(e,t){var n;return[].concat(Object(u.a)(e),Object(u.a)(null!==(n=t.stickers)&&void 0!==n?n:[]))}),[])}var f=function(){return window.zh_emoticon?Promise.resolve(d(window.zh_emoticon)):Object(l.loadScript)("https://unpkg.zhimg.com/@cfe/emoticon@1.2.2/lib/emoticon.js").then((function(){return window.zh_emoticon?d(window.zh_emoticon):[]}))},p=n(1);t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.alwaysShow,n=void 0!==t&&t;return function(e){return a()((function(t){var i=Object(p.useState)(!1),a=Object(r.a)(i,2),u=a[0],l=a[1];return Object(p.useEffect)((function(){Object(s.c)()?l(!0):f().then((function(e){Object(s.e)(Object(c.camelizeKeys)(e)),l(!0)})).catch((function(){l(!0)}))}),[]),(u||n)&&Object(o.b)(e,Object.assign({},t))}),e)}}},function(e,t,n){"use strict";var r=n(20),o=n.n(r),i=n(21),a=n.n(i),c=n(22),s=n.n(c),u=n(23),l=n.n(u),d=n(17),f=n.n(d),p=n(33),h=n.n(p),b=n(1),v=n(11),m=n.n(v),g=n(28),y=n(803),O=n(328),j=n(30),w=n(853),C=n(1058),k=n(249),S=n(5);function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var o=f()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l()(this,n)}}var R={upload:"视频上传失败"};function E(e){var t=e/1e3/1e3;return t=t<10?t.toPrecision(1):Math.round(t),"".concat(t,"M")}var _=function(e){s()(n,e);var t=x(n);function n(){var e;o()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).handleStart=function(){e.trackEvent("Upload")},e.handleRetry=function(t){t.stopPropagation(),e.props.session.start()},e.handleAbort=function(){e.trackEvent("Cancel")},e.handleError=function(t){e.trackEvent("StatusReport",{status:{event:{action:"Upload",path:[{module:"VideoItem"}],url:location.href},result:"Fail"}}),e.props.onVideoUploadError&&e.props.onVideoUploadError(e.props.entityKey,t)},e.handleStep=function(t,n){Object(O.a)((function(){var r,o;return null===(r=(o=e.props).onVideoProcessStep)||void 0===r?void 0:r.call(o,t,n)})),"uploaded"===t&&e.trackEvent("StatusReport",{status:{event:{action:"Add"},result:"Success"}},{id:9381})},e.handleComplete=function(t){var n=e.props.session.state,r=n.uploadTime,o=n.transcodeTime;e.trackEvent("StatusReport",{status:{event:{action:"Upload",path:[{module:"VideoItem"}],url:location.href},result:"Success"},play:{upload_time:r,transcode_time:o}}),e.handleVideoUploadComplete(t)},e}return a()(n,[{key:"componentDidMount",value:function(){this.pendingEvents=[];var e=this.props.session;this.video=e.video,this.setModule(),e.addListener("start",this.handleStart),e.addListener("abort",this.handleAbort),e.addListener("error",this.handleError),e.addListener("step",this.handleStep),e.addListener("complete",this.handleComplete),e.state.error||e.start()}},{key:"componentWillReceiveProps",value:function(e){this.video!==e.session.video&&(this.video=e.session.video,this.setModule(),this.flushPendingEvents())}},{key:"componentWillUnmount",value:function(){var e=this.props.session;e.removeListener("start",this.handleStart),e.removeListener("abort",this.handleAbort),e.removeListener("error",this.handleError),e.removeListener("step",this.handleStep),e.removeListener("complete",this.handleComplete),e.abort()}},{key:"setModule",value:function(){g.a.setModule(this,{module:"VideoItem"},{card:{content:{type:"Video",video_id:this.video?this.video.id:null}}})}},{key:"trackEvent",value:function(e,t,n){this.video?g.a.trackEvent(this,Object.assign({},n,{action:e}),t):this.pendingEvents.push({action:e,extra:t,detailView:n})}},{key:"flushPendingEvents",value:function(){var e=this,t=this.pendingEvents;this.pendingEvents=[],t.forEach((function(t){var n=t.action,r=t.extra,o=t.detailView;e.trackEvent(n,r,o)}))}},{key:"handleVideoUploadComplete",value:function(e){if(this.props.onVideoUploaded){var t=this.props.data,n=t.thumbnail,r=t.title;this.props.onVideoUploaded(this.props.entityKey,Object.assign({},e,{isLens:!0,id:e.id,isPlayable:!0,title:r||"",thumbnail:n||e.thumbnail,needUploadThumbnail:e.needUploadThumbnail||Boolean(n),url:"https://www.zhihu.com/video/".concat(e.id),playerUrl:"https://www.zhihu.com/video/".concat(e.id)}))}}},{key:"renderThumbnail",value:function(){var e=this.props,t=e.session,n=e.data,r=e.handleVideoPosterChange,o=e.isPin,i=e.coverButtonText,a=e.isVideoAnswer,c=t.state,s=c.uploading,u=c.uploadingType,l=c.error,d=c.errorData,f=c.fileSize,p=c.uploadedSize,b=n.thumbnail,v=!(o||a&&l)&&Object(S.g)(C.a,h()({triggerClassName:m()("Editable-videoUploader-uploadPosterButton",{"is-videoAnswer":a}),onVideoPosterChange:r,coverButtonText:i},this.props.data));return Object(S.g)("div",{className:"Editable-videoUploader-thumbnail"},b&&Object(S.g)("img",{src:b,alt:"视频封面",className:"Editable-videoUploader-image"}),b&&Object(S.g)("div",{className:m()("Editable-videoUploader-imageMask",{"is-videoAnswer":a})}),Object(S.g)("div",{className:m()("Editable-videoUploader-text",{"is-bright":b&&a})},Object(S.g)("div",{className:m()("Editable-videoUploader-status",{"is-videoAnswer":a})},s&&"upload"===u&&"视频上传中",l&&(R[d.type]||d.payload&&d.payload.message||"未知错误"),l&&Object(S.g)("div",{className:m()("Editable-videoUploader-retry",{"is-videoAnswer":a})},Object(S.g)(j.c,{preset:"link",color:"blue",icon:y.a,label:"重试",onClick:this.handleRetry}))),s&&Object(S.g)("div",{className:m()("Editable-videoUploader-size",{"is-videoAnswer":a})},E(p)," / ",E(f))),Object(S.g)("div",{className:m()("Editable-videoUploader-progress",{"is-videoAnswer":a})},Object(S.g)("div",{className:m()("Editable-videoUploader-progress-bar",{"is-error":l}),style:{width:l?"100%":"".concat(p/f*100,"%")}})),v)}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.onClick,r=e.onMouseDown,o=e.allowVideoTitleChange,i=e.handleVideoTitleChange,a=e.isVideoAnswer;return Object(S.g)("div",{className:m()("Editable-videoUploader",t,{"is-videoAnswer":a}),onClick:n,onMouseDown:r},Object(S.g)(w.b,h()({isLens:!0,id:"0",isPlayable:!0,isVideoAnswer:a,url:"https://www.zhihu.com/video/".concat("0"),playerUrl:"https://www.zhihu.com/video/".concat("0"),thumbnail:this.renderThumbnail(),showPlayButton:!1,onBeforePlay:function(){return!1}},o()&&{isVideoTitleEditable:!0,onVideoTitleChange:i})))}}]),n}(b.Component);_.defaultProps={allowVideoTitleChange:function(){return!1},isVideoAnswer:!1};t.a=Object(k.a)((function(e){return{type:"video",value:e.data.upload.file}}))(_)},function(e,t,n){"use strict";var r=n(13),o=n(14),i=n(67),a=n(15),c=n(16),s=n(9),u=n(2),l=n(1),d=n(3),f=n.n(d),p=n(28),h=n(574),b=n(839),v=n(857);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var o=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var g=function(e){Object(a.a)(n,e);var t=m(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={expanded:!0},e.handleTitleClick=function(t){p.a.trackEvent(Object(i.a)(e),{id:6121,action:"OpenUrl",element_name:"Title"}),window.open(t)},e.renderHeader=function(){var t=e.props,n=t.title,r=t.url,o=t.author;return Object(u.c)("div",{className:"AbstractCard-header",children:[Object(u.c)("div",{className:"AbstractCard-desc",children:[Object(u.b)("span",{className:"AbstractCard-title",onClick:function(){return e.handleTitleClick(r,n)},children:n}),Object(u.b)("span",{className:"AbstractCard-source",children:e.abstractSourceInfo})]}),Object(u.b)(v.a,{zaId:6120,className:"AbstractCard-author",author:o,preset:"plain"})]})},e.renderContent=function(){var t=e.props,n=t.content,r=t.member.name,o=t.theme;return Object(u.c)("div",{className:"AbstractCard-content",children:[Object(u.b)("div",{className:"AbstractCard-text AbstractCard-text--".concat(o),children:n}),Object(u.b)("div",{className:"AbstractCard-tip",children:Object(u.c)("span",{className:"AbstractCard-info",children:[r," 摘录于 ",e.createdFormat]})})]})},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){Object(b.onViewedOnce)(this.node,(function(){p.a.trackCardShow(null,{id:6118})}))}},{key:"render",value:function(){var e=this;return Object(u.c)("div",{className:"AbstractCard",ref:function(t){e.node=t},children:[this.renderHeader(),this.renderContent()]})}},{key:"abstractSourceInfo",get:function(){return"answer"===this.props.type?"下的回答内容摘录":"下的内容摘录"}},{key:"createdFormat",get:function(){var e=this.props.created;return Object(h.a)(e?new Date(1e3*e):new Date,"yyyy-MM-dd")}}]),n}(l.Component);g.propTypes={title:f.a.string.isRequired,url:f.a.string.isRequired,author:f.a.object,member:f.a.object,content:f.a.string.isRequired,created:f.a.number,theme:f.a.string.isRequired};t.a=g},function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(18),a=function(e){return o.a.createElement(i.a,e,o.a.createElement("defs",null,o.a.createElement("linearGradient",{id:"id-3811055512-a",x1:"11.015%",x2:"87.655%",y1:"18.594%",y2:"96.14%"},o.a.createElement("stop",{offset:"0%",stopColor:"#F2D9B6"}),o.a.createElement("stop",{offset:"100%",stopColor:"#BF8B43"}))),o.a.createElement("path",{fill:"url(#id-3811055512-a)",d:"M21.351 4.858A3.115 3.115 0 0 1 22.93 7.56v8.88a3.115 3.115 0 0 1-1.578 2.702l-7.774 4.44a3.185 3.185 0 0 1-3.154 0l-7.774-4.44A3.115 3.115 0 0 1 1.07 16.44V7.56c0-1.115.602-2.145 1.578-2.702l7.774-4.44a3.185 3.185 0 0 1 3.154 0l7.774 4.44zm-2.475 1.904L13.16 3.507a2.347 2.347 0 0 0-2.32 0L5.124 6.762a2.283 2.283 0 0 0-1.16 1.982v6.512c0 .817.442 1.573 1.16 1.982l5.716 3.255a2.347 2.347 0 0 0 2.32 0l5.716-3.255a2.283 2.283 0 0 0 1.16-1.982V8.744c0-.817-.442-1.573-1.16-1.982zm-9.874 4.13L12 5.76l2.998 5.131 2.466-2.12v6.343c0 .49-.4.886-.893.886H7.429a.89.89 0 0 1-.893-.887V8.771l2.466 2.12z"}))};a.defaultProps={name:"VIP"},t.a=a},function(e,t,n){"use strict";var r=n(13),o=n(14),i=n(67),a=n(15),c=n(16),s=n(9),u=n(2),l=n(1),d=n(25),f=n(30),p=n(74),h=n(120),b=n(26);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var o=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var m=function(e){Object(a.a)(n,e);var t=v(n);function n(){var e;return Object(r.a)(this,n),(e=t.call(this)).handleShieldUser=e.handleShieldUser.bind(Object(i.a)(e)),e}return Object(o.a)(n,[{key:"handleShieldUser",value:function(){var e=this.props,t=e.dispatch,n=e.user.urlToken,r=e.onClose;t(Object(h.n)(n,!0)).then((function(){return t(Object(b.h)("屏蔽成功"))})),r()}},{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.shown,r=e.user;return Object(u.b)(p.b,{onClose:t,title:"确定要屏蔽".concat(r.name,"？"),children:n&&Object(u.c)("div",{children:["屏蔽后，对方将不能关注你、向你发私信、评论你的实名回答、使用「@」提及你、邀请你回答问题，但仍然可以查看你的公开信息。",Object(u.c)(p.a,{direction:"horizontal",children:[Object(u.b)(f.c,{onClick:t,color:"grey",children:"取消"}),Object(u.b)(f.c,{preset:"primary",color:"blue",onClick:this.handleShieldUser,children:"确定"})]})]})})}}]),n}(l.Component);t.a=Object(d.connect)()(m)},function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(18),a=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M18.376 5.624c-3.498-3.499-9.254-3.499-12.752 0-3.499 3.498-3.499 9.254 0 12.752 3.498 3.499 9.254 3.499 12.752 0 3.499-3.498 3.499-9.14 0-12.752zm-1.693 1.693c2.37 2.37 2.596 6.094.678 8.69l-9.367-9.48c2.708-1.919 6.32-1.58 8.69.79zm-9.48 9.48c-2.37-2.37-2.595-6.095-.676-8.69l9.48 9.48c-2.822 1.918-6.433 1.58-8.803-.79z",fillRule:"evenodd"}))};a.defaultProps={name:"Ban"},t.a=a},,function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(2),o=n(1),i=n(109),a=n.n(i),c=n(25),s=n(73),u=n.n(s),l=n(11),d=n.n(l),f=n(1306),p=n.n(f),h=n(181),b=Object(o.memo)((function(e){var t=e.className,n=function(e){return Object.keys(e).filter((function(t){return p()(e[t])&&e[t]})).filter((function(t){return"Mobile"!==t||!e.Tablet})).map((function(e){return"Body--".concat(e)}))}(Object(c.useSelector)(h.k));return Object(r.b)(a.a,{children:Object(r.b)("body",{className:d()(t,n)})})})),v=function(e){return function(t){var n=Object(o.forwardRef)((function(n,o){return Object(r.c)(r.a,{children:[Object(r.b)(b,{className:e}),Object(r.b)(t,Object.assign({},n,{ref:o}))]})}));return u()(n,t)}};v("LightGreyBg-body"),v("WhiteBg-body"),v("GreyBg-body")},,,function(e,t,n){"use strict";var r=n(845),o=n(4),i=n(13),a=n(14),c=n(67),s=n(15),u=n(16),l=n(9),d=n(2),f=n(1),p=n.n(f),h=n(19),b=n(3),v=n.n(b),m=n(42),g=n(34),y=n(25),O=n(11),j=n.n(O),w=n(28),C=n(234),k=n(371),S=n.n(k),x=n(35),R=n.n(x),E=n(30),_=n(387),A=n(206),T=n(990),N=n(402),I=n(32),M=n(40),D=n(912),L=n(135),P=n(246),z=n(921),B=n(781),F=n(1298),U=n(66),q=n(942),V=n(37),H=n(240),K=n(26),Q=n(889),W=n(24),G="zhihu::comment_local_key",Z=(W.R,function(){return""}),Y="上传失败",J="上传中",$="",X="emoticon",ee="selected",te="image",ne=Object(f.forwardRef)((function(e,t){var n=e.children,r=Object(f.useRef)(!1),o=Object(f.useRef)(null),i=Object(f.useRef)(null),a=Object(f.useRef)(null),c=Object(U.c)((function(){var e,t,n;null===(e=o.current)||void 0===e||e.position(),null===(t=i.current)||void 0===t||t.position(),null===(n=a.current)||void 0===n||n.position()})),s=Object(U.c)((function(){var e;null===(e=o.current)||void 0===e||e.open()})),u=Object(U.c)((function(){var e,t,n;null===(e=a.current)||void 0===e||e.open(),null===(t=i.current)||void 0===t||t.close(),null===(n=o.current)||void 0===n||n.close()})),l=Object(U.c)((function(){var e;null===(e=a.current)||void 0===e||e.close()})),d=Object(U.c)((function(){var e,t,n;null===(e=i.current)||void 0===e||e.open(),null===(t=a.current)||void 0===t||t.close(),null===(n=o.current)||void 0===n||n.close()})),p=Object(U.c)((function(){var e;null===(e=i.current)||void 0===e||e.close()})),h=Object(U.c)((function(){var e,t,n;null===(e=a.current)||void 0===e||e.close(),null===(t=i.current)||void 0===t||t.close(),null===(n=o.current)||void 0===n||n.close()})),b=Object(U.c)((function(){var e,t;r.current||(r.current=!0,null===(e=i.current)||void 0===e||e.open(),null===(t=a.current)||void 0===t||t.open(),Promise.resolve().then((function(){var e,t;null===(e=i.current)||void 0===e||e.close(),null===(t=a.current)||void 0===t||t.close()})))})),v=Object(f.useState)({register:function(e,t){e===X&&(o.current=t),e===ee&&(i.current=t),e===te&&(a.current=t)},position:c,openEmoticon:s,openImage:u,openSelected:d,closeImage:l,closeSelected:p,closeAll:h,prepare:b}),m=Object(M.a)(v,1)[0];return Object(f.useImperativeHandle)(t,(function(){return m})),n&&n.map((function(e){return Object(f.cloneElement)(e,{popoversController:m})}))})),re=n(131),oe=Object.assign;var ie=function(e){return p.a.createElement(re.a,oe({width:"21",height:"14",fill:"none"},e),p.a.createElement("path",{fill:"url(#A)",stroke:"#f6f6f6",d:"M7.486.504a6 6 0 100 12h7a6 6 0 100-12h-7z"}),p.a.createElement("g",{fill:"#935d14"},p.a.createElement("path",{d:"M8.459 9.431l2.465-5.366h-.916L8.401 7.751l-1.6-3.687h-.923L8.35 9.431h.109zm3.825 0V4.065h-.814v5.366h.814zm2.05 0V7.445h.284c.659 0 1.156-.153 1.491-.46s.502-.747.502-1.321c0-.496-.154-.887-.462-1.172s-.794-.427-1.458-.427h-1.178v5.366h.822zm.305-2.708h-.305V4.78h.378c.388 0 .664.09.829.27s.247.414.247.701c0 .268-.085.496-.254.686s-.468.285-.894.285z",fillRule:"evenodd"}),p.a.createElement("path",{d:"M8.459 9.431v.146h.094l.039-.085-.133-.061zm2.465-5.366l.133.061.095-.207h-.228v.146zm-.916 0v-.146h-.096l-.038.088.134.058zM8.401 7.751l-.134.058.134.309.134-.309-.134-.058zm-1.6-3.687l.134-.058-.038-.088h-.096v.146zm-.923 0v-.146h-.229l.096.208.133-.061zM8.35 9.431l-.133.061.039.085h.094v-.146zm3.934 0v.146h.146v-.146h-.146zm0-5.366h.146v-.146h-.146v.146zm-.814 0v-.146h-.146v.146h.146zm0 5.366h-.146v.146h.146v-.146zm2.865 0v.146h.146v-.146h-.146zm0-1.986v-.146h-.146v.146h.146zm-.822-3.38v-.146h-.146v.146h.146zm0 5.366h-.146v.146h.146v-.146zm.822-2.708h-.146v.146h.146v-.146zm0-1.942v-.146h-.146v.146h.146zM8.592 9.492l2.465-5.366-.266-.122L8.326 9.37l.266.122zm2.332-5.573h-.916v.293h.916v-.293zm-1.05.088L8.267 7.693l.268.117 1.607-3.687-.268-.117zM8.535 7.693l-1.6-3.687-.269.116 1.6 3.687.268-.116zM6.801 3.918h-.923v.293h.923v-.293zm-1.056.208l2.472 5.366.266-.122-2.472-5.366-.266.122zM8.35 9.577h.109v-.293H8.35v.293zm4.08-.146V4.065h-.293v5.366h.293zm-.146-5.512h-.814v.293h.814v-.293zm-.961.146v5.366h.293V4.065h-.293zm.146 5.512h.814v-.293h-.814v.293zm3.011-.146V7.445h-.293v1.986h.293zm-.146-1.839h.284v-.293h-.284v.293zm.284 0c.68 0 1.218-.158 1.589-.498l-.198-.216c-.297.273-.753.421-1.392.421v.293zm1.589-.498c.372-.341.549-.826.549-1.429h-.293c0 .545-.158.942-.454 1.214l.198.216zm.549-1.429c0-.529-.166-.962-.509-1.279l-.199.215c.272.252.415.6.415 1.064h.293zm-.509-1.279c-.347-.321-.877-.466-1.557-.466v.293c.648 0 1.09.14 1.358.388l.199-.215zM14.69 3.92h-1.178v.293h1.178V3.92zm-1.324.146v5.366h.293V4.065h-.293zm.146 5.512h.822v-.293h-.822v.293zm1.127-3.001h-.305v.293h.305v-.293zm-.159.146V4.78h-.293v1.942h.293zm-.146-1.796h.378v-.293h-.378v.293zm.378 0c.37 0 .597.087.721.223l.216-.198c-.205-.224-.532-.318-.937-.318v.293zm.721.223c.136.148.209.345.209.602h.293c0-.317-.092-.588-.286-.8l-.216.198zm.209.602a.85.85 0 01-.217.589l.218.195a1.14 1.14 0 00.292-.784h-.293zm-.217.589c-.128.143-.373.236-.785.236v.293c.441 0 .792-.097 1.003-.334l-.218-.195z"})),p.a.createElement("defs",null,p.a.createElement("linearGradient",{id:"A",x1:"1.986",x2:"19.986",y1:"12.004",y2:"12.004",gradientUnits:"userSpaceOnUse"},p.a.createElement("stop",{stopColor:"#f8e2c4"}),p.a.createElement("stop",{offset:"1",stopColor:"#f3bb6c"}))))};function ae(e){var t=e.images,n=e.onClick,r=e.onReset,o=Object(f.useState)(!1),i=Object(M.a)(o,2),a=i[0],c=i[1],s=Object(U.c)((function(){return c(!0)})),u=Object(U.c)((function(){return c(!1)}));return Object(d.c)(f.Fragment,{children:[Object(d.c)("div",{onMouseEnter:s,onMouseLeave:u,css:{width:"110px",height:"110px",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},children:[Object(d.b)("img",{src:t[0].src}),a&&Object(d.b)(ce,{onClick:n})]}),Object(d.b)("div",{className:"closeButton",onClick:r,css:function(e){return{color:e.colors.GBK06A}},children:Object(d.b)(B.a,{})})]})}function ce(e){var t=e.onClick;return Object(d.b)("div",{css:{position:"absolute",width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0.3)",display:"flex",alignItems:"center",justifyContent:"center",userSelect:"none",borderRadius:"4px","&:hover":{cursor:"pointer"}},onClick:t,children:Object(d.b)("div",{css:function(e){return{color:e.colors.GBK99B,lineHeight:"27px",width:"74px",borderRadius:"20px",borderColor:"#fefefe",borderWidth:"1px",borderStyle:"solid",fontSize:"12px",textAlign:"center"}},children:"更换图片"})})}var se=Object(f.forwardRef)((function(e,t){var n=e.showVipBadge,r=Object(I.a)(e,["showVipBadge"]);return Object(d.b)(C.a,Object.assign({as:P.a,zaType:"Button",zaEventType:"Click",zaBlock:"AppendImage",label:"插入图片",ref:t,icon:Object(d.c)(f.Fragment,{children:[Object(d.b)(F.a,{}),n&&Object(d.b)(ie,{css:{position:"absolute",transform:"translate(10px, -6.5px)",width:"20px",height:"13px"}})]})},r))})),ue=Object(h.compose)(Object(y.connect)((function(e){return{isVip:Object(V.j)(e)}}),{showNotification:K.h,uploadImage:H.b}),Q.a)((function(e){var t=e.popoversController,n=Object(f.useState)($),r=Object(M.a)(n,2),o=r[0],i=r[1],a=Object(f.useState)(!1),c=Object(M.a)(a,2),s=c[0],u=c[1],l=Object(f.useRef)();Object(f.useEffect)((function(){t.register(te,l.current)}),[t]);var p=Object(f.useRef)(),h=Object(U.c)((function(t){t.preventDefault(),(0,e.authRequired)((function(){var t,n=e.handleInputActive;e.hasPermission?(null===(t=p.current)||void 0===t||t.click(),n(!0)):u(!0)}))()})),b=function(){p.current&&(p.current.value=null)},v=function(){var t=e.handleImages,n=e.showNotification,r=e.resetUploadImg;t([]),n("图片上传失败","red"),r(),i(Y)},m=function(t){var n=e.handleImages,r=e.updatePublishStatus;n([Object.assign({},t.payload,{url:t.payload.src})]),r(!1),b(),i($)},g=Object(U.c)((function(n){var r=e.showNotification;return n?n.size>1024*W.R*1024?(r("请上传小于 ".concat(W.R,"M 的图片。"),"red"),b(),!1):(t.openImage(),void i(J)):(b(),!1)})),y=Object(U.c)((function(t){var n=t.file;return(0,e.uploadImage)(n).then(m).catch(v)})),O=Object(U.c)((function(){var n=e.resetUploadImg,r=void 0===n?D.noop:n;t.closeImage(),r()})),j=e.images,w=e.disableButton,C=e.hasPermission,k=e.onPopoverOpen,S=e.isVip,x=Boolean(j.length)&&o===$,R=S||!C;return Object(d.c)(f.Fragment,{children:[Object(d.b)(L.a,{className:"ImagePopover",arrowed:!0,ref:l,placement:"bottom",globalClose:!j.length,onOpen:k,onClick:h,toggler:Object(d.b)(se,{disabled:w,showVipBadge:R}),children:Object(d.c)("div",{className:"ImagePopover-thumbnail",children:[x&&Object(d.b)(ae,{images:j,onClick:h,onReset:O}),o&&!x&&Object(d.b)("p",{className:"ImagePopover-uplodaStatus",children:o})]})}),Object(d.b)(z.a,{accept:"image/png,image/jpeg",onRef:p,beforeUpload:g,customUpload:y}),Object(d.b)(q.b,{show:s,setShow:u,type:q.a.comment_img})]})})),le=n(132);function de(e){var t=e.onClose,n=e.onSubmit;return Object(d.c)(le.b,{className:"CommentCheckModal-wrapper",onClose:t,children:[Object(d.b)("div",{className:"CommentCheckModal-image"}),Object(d.b)("div",{className:"CommentCheckModal-title",children:"评论可能包含不友善内容"}),Object(d.b)("div",{className:"CommentCheckModal-content",children:"友善的交流是沟通的起点，请遵守知乎社区规范，认真友善发言"}),Object(d.c)("div",{className:"CommentCheckModal-button",children:[Object(d.b)(E.c,{className:"CommentCheckModal-submit",onClick:n,preset:"primary",children:"继续发布"}),Object(d.b)(E.c,{className:"CommentCheckModal-modify",onClick:t,preset:"primary",color:"blue",children:"返回修改"})]})]})}var fe=function(e){var t=e.url,n=e.title,r=e.onReset,o=void 0===r?D.noop:r,i=e.popoversController,a=Object(f.useRef)();Object(f.useEffect)((function(){i.register(ee,a.current)}),[i]);var c=Object(U.c)((function(){i.closeSelected(),o()}));return Object(d.b)(L.a,{arrowed:!0,globalClose:!1,ref:a,preventCloseOnTarget:!0,placement:"bottom",toggler:Object(d.b)("div",{css:{height:"28px",transform:"translateX(18px)"}}),children:Object(d.c)("div",{css:{width:"140px",height:"143px",position:"relative"},children:[Object(d.b)("img",{src:t,alt:n,css:{width:"100px",height:"100px",padding:"20px"}}),Object(d.b)("div",{onClick:c,css:{position:"absolute",width:"16px",height:"16px",right:"8px",top:"8px",".Zi--Close":{width:"16px",height:"16px"}},children:Object(d.b)(B.a,{})})]})})},pe=n(1280),he=n(995),be=Object(f.forwardRef)((function(e,t){var n=e.onInsertEmoji,r=void 0===n?D.noop:n,o=e.onAddSticker,i=void 0===o?D.noop:o,a=e.vipEnabled,c=void 0!==a&&a,s=Object(I.a)(e,["onInsertEmoji","onAddSticker","vipEnabled"]),u=Object(U.c)((function(e,t){"emoji"===t?r(e.placeholder):i(e)}));return Object(d.b)(L.a,Object.assign({arrowed:!0,preventCloseOnTarget:!0},s,{ref:t,children:Object(d.b)(he.a,{onSelectEmoticon:u,css:{border:"none"},vipEnabled:c})}))}));var ve=Object(Q.a)((function(e){var t=e.disabled,n=e.onInsertEmoji,r=void 0===n?D.noop:n,o=e.onAddSticker,i=void 0===o?D.noop:o,a=e.popoversController,c=Object(f.useRef)();Object(f.useEffect)((function(){a.register(X,c.current)}),[a]);var s=Object(U.c)((function(){r.apply(void 0,arguments),setTimeout(a.position,400)})),u=Object(U.c)((function(){a.openSelected(),i.apply(void 0,arguments),setTimeout(a.position,400)})),l=Object(U.c)((function(t){(0,e.authRequired)([D.noop,function(){t.preventDefault()}])()}));return Object(d.b)(be,{ref:c,onInsertEmoji:s,onAddSticker:u,vipEnabled:!0,onClick:l,toggler:Object(d.b)(P.a,{label:"插入表情",icon:pe.a,disabled:t,onMouseEnter:a.prepare})})}));function me(){var e=Object(r.a)(["回复","",""]);return me=function(){return e},e}function ge(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}function ye(e){var t=e.dynamicImageUrl||e.staticImageUrl,n=e.id,r=e.title||"[sticker]";return'<a class="comment_sticker" href="'.concat(t,'" data-sticker-id="').concat(n,'">').concat(r,"</a>")}function Oe(e){var t=e.url,n=e.dataRawwidth,r=e.dataRawheight,o=e.title,i=t.includes(".gif")?"comment_gif":"comment_img";return'<a class="'.concat(i,"\" href='").concat(t,"' data-width='").concat(n||"","' data-height='").concat(r||"","'>[").concat(o||"图片","]</a>")}var je=function(e){Object(s.a)(n,e);var t=ge(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).zaRef=Object(f.createRef)(),e.state={active:!1,hasNoContent:!0,shown:!1,submitting:!1,value:{toHTML:Z},images:[],uploadIsFetchingNum:0,stickers:[],toggleInputStyle:!1,commentTextLength:0,showCommentCheckModal:!1},e.isClubPostPage=function(){var t=e.props,n=t.type,r=(t.replyTo||{}).resourceType;return"club_post"===n||"club_post"===r},e.handleCheckClosed=function(){e.setState({showCommentCheckModal:!1}),e.trackCommentCheckClick("返回修改"),e.input.focus()},e.handleCommentCheck=function(){e.setState({showCommentCheckModal:!1}),e.handleSubmit(!1),e.trackCommentCheckClick("继续发布")},e.handleButtonSubmit=function(){e.handleSubmit(!0,"0"!==e.props.autoCheckAb)},e.handleSubmit=e.context.authRequired((function(t,n){return e.context.realNameRequired((function(){var r=e.props,o=r.replyTo,i=r.onSubmit,a=r.onCancel,s=r.rootCommentId,u=r.isConversation,l=r.zaInfo.zaSubmitCommentId;if(!e.state.submitting){e.setState({submitting:!0});var d=e.state,f=d.images,p=d.stickers,h=e.input.toHTML();if(h||f.length||p.length){var b;h&&e.saveLocalComment();var v=h;f.length&&(v+=Oe(f[0])),p.length&&(v+=ye(p[0]));var m,g=i(v,o,{rootCommentId:s,isConversation:u},t,n);if(g.then)g.then((function(){var t;(a&&a(),e.input)?(e.input.reset(),null===(t=e.popoverControllerRef.current)||void 0===t||t.closeAll(),e.resetImage(),e.setState({value:{toHTML:Z}},(function(){return e.saveLocalComment()}))):e.saveLocalComment({toHTML:Z})})).catch((function(t){40313===t.payload.code&&e.setState({showCommentCheckModal:!0})})).finally((function(){e.setState({submitting:!1})}));else e.setState({submitting:!1}),a&&a(),e.input.reset(),null===(m=e.popoverControllerRef.current)||void 0===m||m.closeAll();w.a.trackEvent(Object(c.a)(e),Object.assign({action:"Comment",element:"Button"},l&&{id:l})),null===(b=e.zaRef.current)||void 0===b||b.trackEvent({eventType:"Click",action:"Comment",elementLocation:{type:"Button"}})}}}))()}),e.isClubPostPage()?W.V.reply_club:void 0,K.b),e.handleCommentShow=e.context.authRequired((function(){e.setState({shown:!0}),e.hiddenInput.focus()})),e.handleCommentHide=function(){e.setState({shown:!1})},e.initLocalComment=function(){var t=e.props,n=t.type,r=t.id;if(n&&r){var o=R.a.get(G)||[],i="".concat(n,"_").concat(r),a=o.find((function(e){return e.key===i})),c=a&&a.value;c&&e.setState({value:{toHTML:function(){return c}},hasNoContent:!1})}},e.saveLocalComment=function(t){var n=e.props,r=n.type,i=n.id;if(r&&i){var a=t?t.toHTML():e.state.value.toHTML(),c="".concat(r,"_").concat(i),s=(R.a.get(G)||[]).filter((function(e){return e.key!==c})),u=a?[].concat(Object(o.a)(s.slice(0,4)),[{key:c,value:a}]):s;R.a.set(G,u)}},e.handleChange=function(t){var n=e.state,r=n.stickers,o=n.images;r.length||o.length?e.setState({value:t}):e.setState({value:t,hasNoContent:t.isEmpty}),e.handleInputChange()},e.handleFocus=function(){e.setState({active:!0},e.handleInputChange)},e.handleBlur=function(){var t=e.state,n=t.stickers,r=t.images;n.length||r.length||(e.setState({active:!1}),e.handleInputChange())},e.handleMobileComment=function(){e.handleSubmit(),e.handleCommentHide()},e.handleInputChange=function(){var t,n,r=Object(m.findDOMNode)(e.input);r&&(r.getBoundingClientRect().height>40?e.setState({toggleInputStyle:!0}):e.setState({toggleInputStyle:!1}),n="innerText"in document?r.innerText.length:r.textContent.length,e.setState({commentTextLength:n}),null===(t=e.popoverControllerRef.current)||void 0===t||t.position())},e.handleImages=function(t){var n;e.setState({images:t},null===(n=e.popoverControllerRef.current)||void 0===n?void 0:n.position)},e.handleInputActive=function(t){e.setState({active:t})},e.updatePublishStatus=function(t){e.setState({hasNoContent:t})},e.resetStickers=function(){var t=e.state.value,n=void 0===t.isEmpty||t.isEmpty;e.setState({stickers:[],hasNoContent:n})},e.resetImage=function(){e.resetStickers(),e.resetUploadImg()},e.resetUploadImg=function(){var t=e.state.value,n=void 0===t.isEmpty||t.isEmpty;e.setState({images:[],hasNoContent:n})},e.insertEmoji=function(t){var n;null===(n=e.input)||void 0===n||n.handleCommand("insert-text:".concat(t))},e.addSticker=function(t){e.setState({stickers:[t],images:[],hasNoContent:!1})},e.handleImagePopoverOpen=function(){e.setState({stickers:[]})},e.focusInput=function(t){t.preventDefault(),e.input.focus()},e.popoverControllerRef=Object(f.createRef)(),e.renderInput=function(t){var n,r,o,i=t.placeholder,a=t.className,c=e.props,s=c.autoFocus,u=c.commentWithPicPermission.commentWithPic,l=e.state,f=l.images,p=l.stickers,h=l.toggleInputStyle,b=l.active,v=l.hasNoContent,m=l.commentTextLength;return Object(d.c)("div",{className:j()("CommentEditorV2-inputWrap",{"CommentEditorV2-inputWrap--change":h,"CommentEditorV2-inputWrap--active":b||!v}),onClick:function(e){e.nativeEvent.stopImmediatePropagation()},children:[Object(d.b)(A.c,{keyMap:{FOCUS_COMMENT_INPUT:"shift+c"},handlers:{FOCUS_COMMENT_INPUT:e.focusInput}}),Object(d.b)(N.a,{className:j()("CommentEditorV2-input",a),defaultValue:e.state.value.toHTML(),allowMention:!0,allowPasteRichText:!1,autoFocus:s,outputBlockType:"div",ref:function(t){e.input=t},placeholder:i,onFocus:e.handleFocus,onChange:e.handleChange,onSubmit:e.handleButtonSubmit,minRows:5}),Object(d.c)("div",{className:j()("CommentEditorV2-inputUpload",{"CommentEditorV2-inputUpload--FlexEnd":h,"CommentEditorV2-inputUpload--SpaceBetween":h&&m>980}),children:[h&&m>980&&Object(d.b)(_.a,{className:"CommentEditorV2-MaxLength",current:m,max:1e3}),Object(d.b)("div",{className:"CommentEditorV2-popoverWrap",children:Object(d.c)(ne,{ref:e.popoverControllerRef,children:[Object(d.b)(ue,{images:f,resetUploadImg:e.resetUploadImg,handleInputActive:e.handleInputActive,updatePublishStatus:e.updatePublishStatus,handleImages:e.handleImages,onPopoverOpen:e.handleImagePopoverOpen,hasPermission:u||e.isClubPostPage()}),Object(d.b)(fe,{url:(null===(n=p[0])||void 0===n?void 0:n.dynamicImageUrl)||(null===(r=p[0])||void 0===r?void 0:r.staticImageUrl),title:null===(o=p[0])||void 0===o?void 0:o.title,onReset:e.resetStickers}),Object(d.b)(ve,{onAddSticker:e.addSticker,onInsertEmoji:e.insertEmoji,preparePopoverIndex:e.preparePopoverIndex})]})})]})]})},e}return Object(a.a)(n,[{key:"trackCommentCheckClick",value:function(e){w.a.trackEvent(null,{id:7497,action:"Click",path:[{module_name:"图文弹窗"}]},{button:{text:e}})}},{key:"componentDidMount",value:function(){this.initLocalComment(),document.addEventListener("click",this.handleBlur)}},{key:"componentWillUnmount",value:function(){this.saveLocalComment(),document.removeEventListener("click",this.handleBlur)}},{key:"render",value:function(){var e=this.props,t=e.replyTo,n=e.commentNeedsReview,r=e.className,o=e.ownerAuthorIsOrg,i=e.ownerAuthorIsBrand,a=this.state,c=a.active,s=a.hasNoContent,u=a.submitting,l=a.showCommentCheckModal,f=o?"机构":"作者",p={preset:"primary",color:"blue",children:"发布",disabled:s||u},h="写下你的评论...";if(n&&(h=i?"已开启预审评论，评论由品牌筛选后公开":o?"已开启预审评论，评论由机构筛选后公开":"评论由作者筛选后显示"),t&&t.author){var b=t.author,v=b.member,m=b.mask,g=(null==v?void 0:v.name)||(null==m?void 0:m.name)||t.author.name;h=S()(me(),g,n?"，评论由".concat(f,"筛选后公开"):"")}return Object(d.c)("div",{children:[Object(d.b)(C.d,{ref:this.zaRef}),Object(d.c)("div",{className:j()(r,"CommentEditorV2--normal",{"CommentEditorV2--active":c||!s}),children:[this.renderInput({placeholder:h}),Object(d.b)(E.c,Object.assign({},p,{className:"CommentEditorV2-singleButton",onClick:this.handleButtonSubmit}))]}),l&&Object(d.b)(de,{onClose:this.handleCheckClosed,onSubmit:this.handleCommentCheck})]})}}]),n}(f.Component);je.propTypes={className:v.a.string,defaultActive:v.a.bool,replyTo:v.a.object,inCommentItem:v.a.bool,commentNeedsReview:v.a.bool,canComment:v.a.object,onCancel:v.a.func,onSubmit:v.a.func.isRequired,zaInfo:v.a.object},je.defaultProps={defaultActive:!1,replyTo:null,inCommentItem:!1,autoFocus:!0,ownerAuthorIsOrg:!1,ownerAuthorIsBrand:!1,zaInfo:{}},je.contextTypes={authRequired:v.a.func,realNameRequired:v.a.func};t.a=Object(h.compose)(g.withRouter,Object(T.a)(),Object(y.connect)((function(e){return{stickers:e.commentsV2.stickers||[],commentWithPicPermission:e.commentsV2.commentWithPicPermission||{}}}),{showNotification:K.h}))(je)},function(e,t,n){"use strict";n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return j}));var r=n(2),o=n(1),i=n(390),a=n(1297),c=n(13),s=n(14),u=n(15),l=n(16),d=n(9),f=n(3),p=n.n(f),h=n(11),b=n.n(h);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(d.a)(e);if(t){var o=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var m=function(e){Object(u.a)(n,e);var t=v(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var e=this.props,t=e.showReport,n=e.className,o=e.onReportClick,i=e.onMessageDelete;return Object(r.c)("ul",{className:b()("ActionMenu",n),children:[Object(r.b)("li",{className:"ActionMenu-item",onClick:i,children:"删除"}),t&&Object(r.b)("li",{className:"ActionMenu-item",onClick:o,children:"举报"})]})}}]),n}(o.Component);m.propsTypes={className:p.a.string,showReport:p.a.bool,onMessageDelete:p.a.func.isRequired,onReportClick:p.a.func.isRequired};var g=function(e,t){var n=e.isOpen,c=e.onToggleMenu,s=e.onDeleteClick,u=e.onReportClick,l=e.showReport;Object(o.useEffect)((function(){if(n)return window.addEventListener("wheel",c),function(){window.removeEventListener("wheel",c)}}),[n,c]);var d=Object(o.useCallback)((function(e){e.stopPropagation(),c()}),[c]);return Object(r.c)(r.a,{children:[Object(r.b)("button",{type:"button",onClick:d,"aria-label":"更多",ref:t,className:"Chat-ActionMenuPopover-Button",children:Object(r.b)(a.a,{className:"Message-status--more"})}),Object(r.b)(i.a,{isOpen:n,fixed:!0,arrowed:!0,target:null==t?void 0:t.current,children:Object(r.b)(m,{onMessageDelete:s,onReportClick:u,showReport:l})})]})},y=Object(o.forwardRef)(g),O=n(40),j=function(e){var t=e.handleDeleteClick,n=e.handleReportClick,i=e.showReport,a=Object(o.useState)(!1),c=Object(O.a)(a,2),s=c[0],u=c[1],l=Object(o.useRef)(),d=Object(o.useCallback)((function(){u((function(e){return!e}))}),[]),f=Object(o.useCallback)((function(){u(!1)}),[]),p=function(e){s&&l.current&&!l.current.contains(e.target)&&(u(!1),e.stopPropagation(),e.preventDefault())};return Object(o.useEffect)((function(){return document.addEventListener("click",p),function(){document.removeEventListener("click",p)}}),[s]),{popover:Object(r.b)(y,{ref:l,isOpen:s,onToggleMenu:d,onDeleteClick:t,onReportClick:n,showReport:i}),handleMouseLeave:f}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return r.a})),n.d(t,"a",(function(){return _}));var r=n(1103),o=n(2),i=n(13),a=n(14),c=n(15),s=n(16),u=n(9),l=n(4),d=n(1),f=n(19),p=n(3),h=n.n(p),b=n(25),v=n(76),m=n.n(v),g=n(28),y=n(1382),O=n(30),j=(n(83),n(70)),w=n(236),C=n(206),k=n(24);function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var o=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var x={answer:h.a.object.isRequired,renderThankButtonText:h.a.func,zaInfo:h.a.number},R=[].concat(Object(l.a)(Object.keys(x)),["updateAnswerThank"]),E=function(e){Object(c.a)(n,e);var t=S(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).buttonRef=Object(d.createRef)(),e.handleUpdateThanked=e.context.authRequired((function(){var t=e.props,n=t.answer,r=n.id,o=n.relationship.isThanked,i=t.zVideoId,a=t.updateAnswerThank,c=t.zaInfo,s=!o;g.a.trackEvent(e.buttonRef.current,Object.assign({action:s?"Thank":"UnThank",element:"Button"},c&&{id:c})),a(r,s,{zVideoId:i})}),k.V.thank),e}return Object(a.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.answer,r=t.renderThankButtonText,i=t.disabled,a=m()(this.props,R),c=r(n);return Object(o.c)(d.Fragment,{children:[Object(o.b)(C.c,{keyMap:{LIKE:"l"},handlers:{LIKE:function(t){e.buttonRef.current.focus(),e.handleUpdateThanked(t)}}}),Object(o.b)(O.c,Object.assign({onRef:this.buttonRef,preset:"plain",onClick:this.handleUpdateThanked,icon:y.a,label:c,disabled:i},a))]})}}]),n}(d.Component);E.contextTypes={authRequired:h.a.func},E.propTypes=x,E.defaultProps={renderThankButtonText:function(e){var t=e.relationship;return(t=void 0===t?{}:t).isThanked?"取消喜欢":"喜欢"}};var _=Object(f.compose)(Object(b.connect)(null,{updateAnswerThank:j.J}),Object(w.a)(null))(E)},,function(e,t,n){"use strict";var r=n(13),o=n(14),i=n(15),a=n(16),c=n(9),s=n(2),u=n(1),l=n(25),d=n(439),f=n(136),p=n(438),h=n(37);function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var v=function(e){Object(i.a)(n,e);var t=b(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).handleReceiveMessage=function(t){var n=e.props;(0,n.handleReceiveMessage)(t,n.currentUser.id)},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.currentUser,n=e.setChatMqttStatus,r=e.isChatMqttExisted;t&&"guest"!==t.userType&&(r||(Object(d.a)([{name:"zhihu/message/v1/im/user/".concat(t.id,"/"),onMessage:this.handleReceiveMessage}]),n(!0)))}},{key:"render",value:function(){var e=this.props.children;return Object(s.b)("div",{children:e})}}]),n}(u.Component);t.a=Object(l.connect)((function(e){return{currentUser:Object(h.b)(e),isChatMqttExisted:e.chat.global.isChatMqttExisted}}),{handleReceiveMessage:f.l,setChatMqttStatus:p.b})(v)},function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(18),a=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M4.076 16.966a4.19 4.19 0 0 1 1.05-1.76l8.568-8.569a.524.524 0 0 1 .741 0l2.928 2.927a.524.524 0 0 1 0 .74l-8.568 8.57c-.49.49-1.096.852-1.761 1.051l-3.528 1.058a.394.394 0 0 1-.49-.488l1.06-3.53zM20.558 4.83c.59.59.59 1.546 0 2.136l-1.693 1.692a.503.503 0 0 1-.712 0l-2.812-2.812a.504.504 0 0 1 0-.712l1.693-1.693a1.51 1.51 0 0 1 2.135 0l1.389 1.389z"}))};a.defaultProps={name:"Edit"},t.a=a},function(e,t,n){"use strict";var r=n(91)||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(890),i=n(844),a=n(860),c=n(847),s=n(856),u=n(843),l=n(838),d=n(836),f=(n(870),n(855)),p=n(1189),h=s.draft_tree_data_support,b=h?c:a,v=d.List,m=d.Repeat,g={insertAtomicBlock:function(e,t,n){var a=e.getCurrentContent(),c=e.getSelection(),s=u.removeRange(a,c,"backward"),d=s.getSelectionAfter(),p=u.splitBlock(s,d),g=p.getSelectionAfter(),y=u.setBlockType(p,g,"atomic"),O=i.create({entity:t}),j={key:f(),type:"atomic",text:n,characterList:v(m(O,n.length))},w={key:f(),type:"unstyled"};h&&(j=r({},j,{nextSibling:w.key}),w=r({},w,{prevSibling:j.key}));var C=[new b(j),new b(w)],k=o.createFromArray(C),S=u.replaceWithFragment(y,g,k),x=S.merge({selectionBefore:c,selectionAfter:S.getSelectionAfter().set("hasFocus",!0)});return l.push(e,x,"insert-fragment")},moveAtomicBlock:function(e,t,n,r){var o=e.getCurrentContent(),i=e.getSelection(),a=void 0;if("before"===r||"after"===r){var c=o.getBlockForKey("before"===r?n.getStartKey():n.getEndKey());a=p(o,t,c,r)}else{var s=u.removeRange(o,n,"backward"),d=s.getSelectionAfter(),f=s.getBlockForKey(d.getFocusKey());if(0===d.getStartOffset())a=p(s,t,f,"before");else if(d.getEndOffset()===f.getLength())a=p(s,t,f,"after");else{var h=u.splitBlock(s,d),b=h.getSelectionAfter(),v=h.getBlockForKey(b.getFocusKey());a=p(h,t,v,"before")}}var m=a.merge({selectionBefore:i,selectionAfter:a.getSelectionAfter().set("hasFocus",!0)});return l.push(e,m,"move-block")}};e.exports=g},function(e,t,n){"use strict";e.exports={draft_killswitch_allow_nontextnodes:!1,draft_segmented_entities_behavior:!1,draft_handlebeforeinput_composed_text:!1,draft_tree_data_support:!1}},function(e,t,n){"use strict";var r=n(844),o=n(836).Map,i={add:function(e,t,n){return a(e,t,n,!0)},remove:function(e,t,n){return a(e,t,n,!1)}};function a(e,t,n,i){var a=e.getBlockMap(),c=t.getStartKey(),s=t.getStartOffset(),u=t.getEndKey(),l=t.getEndOffset(),d=a.skipUntil((function(e,t){return t===c})).takeUntil((function(e,t){return t===u})).concat(o([[u,a.get(u)]])).map((function(e,t){var o,a;c===u?(o=s,a=l):(o=t===c?s:0,a=t===u?l:e.getLength());for(var d,f=e.getCharacterList();o<a;)d=f.get(o),f=f.set(o,i?r.applyStyle(d,n):r.removeStyle(d,n)),o++;return e.set("characterList",f)}));return e.merge({blockMap:a.merge(d),selectionBefore:t,selectionAfter:t})}e.exports=i},function(e,t,n){"use strict";var r=n(836),o=n(1178);e.exports=function(e,t,n){var i=e.getBlockMap(),a=t.getStartKey(),c=t.getStartOffset(),s=t.getEndKey(),u=t.getEndOffset(),l=i.skipUntil((function(e,t){return t===a})).takeUntil((function(e,t){return t===s})).toOrderedMap().merge(r.OrderedMap([[s,i.get(s)]])).map((function(e,t){var r=t===a?c:0,i=t===s?u:e.getLength();return o(e,r,i,n)}));return e.merge({blockMap:i.merge(l),selectionBefore:t,selectionAfter:t})}},function(e,t,n){"use strict";var r=n(844);e.exports=function(e,t,n,o){for(var i=e.getCharacterList();t<n;)i=i.set(t,r.applyEntity(i.get(t),o)),t++;return e.set("characterList",i)}},function(e,t,n){"use strict";var r=n(1180),o=n(1181),i=n(837);function a(e,t,n,a,c,s,u){var l=n.getStartOffset(),d=n.getEndOffset(),f=e.__get(c).getMutability(),p=u?l:d;if("MUTABLE"===f)return n;var h=o(t,c).filter((function(e){return p<=e.end&&p>=e.start}));1!=h.length&&i(!1);var b=h[0];if("IMMUTABLE"===f)return n.merge({anchorOffset:b.start,focusOffset:b.end,isBackward:!1});s||(u?d=b.end:l=b.start);var v=r.getRemovalRange(l,d,t.getText().slice(b.start,b.end),b.start,a);return n.merge({anchorOffset:v.start,focusOffset:v.end,isBackward:!1})}e.exports=function(e,t,n,r,o){var i=r.getStartOffset(),c=r.getEndOffset(),s=t.getEntityAt(i),u=n.getEntityAt(c-1);if(!s&&!u)return r;var l=r;if(s&&s===u)l=a(e,t,l,o,s,!0,!0);else if(s&&u){var d=a(e,t,l,o,s,!1,!0),f=a(e,n,l,o,u,!1,!1);l=l.merge({anchorOffset:d.getAnchorOffset(),focusOffset:f.getFocusOffset(),isBackward:!1})}else if(s){var p=a(e,t,l,o,s,!1,!0);l=l.merge({anchorOffset:p.getStartOffset(),isBackward:!1})}else if(u){var h=a(e,n,l,o,u,!1,!1);l=l.merge({focusOffset:h.getEndOffset(),isBackward:!1})}return l}},function(e,t,n){"use strict";e.exports={getRemovalRange:function(e,t,n,r,o){var i=n.split(" ");i=i.map((function(e,t){if("forward"===o){if(t>0)return" "+e}else if(t<i.length-1)return e+" ";return e}));for(var a,c=r,s=null,u=null,l=0;l<i.length;l++){if(e<(a=c+i[l].length)&&c<t)null!==s||(s=c),u=a;else if(null!==s)break;c=a}var d=r+n.length,f=s===r,p=u===d;return(!f&&p||f&&!p)&&("forward"===o?u!==d&&u++:s!==r&&s--),{start:s,end:u}}}},function(e,t,n){"use strict";var r=n(837);e.exports=function(e,t){var n=[];return e.findEntityRanges((function(e){return e.getEntity()===t}),(function(e,t){n.push({start:e,end:t})})),n.length||r(!1),n}},function(e,t,n){"use strict";var r=n(890),o=n(847),i=n(836),a=n(1029),c=n(837),s=n(1027),u=i.List,l=function(e,t,n,i,a,c){var s=n.first()instanceof o,l=[],d=i.size,f=n.get(a),p=i.first(),h=i.last(),b=h.getLength(),v=h.getKey(),m=s&&(!f.getChildKeys().isEmpty()||!p.getChildKeys().isEmpty());n.forEach((function(e,t){t===a?(m?l.push(e):l.push(function(e,t,n){var r=e.getText(),o=e.getCharacterList(),i=r.slice(0,t),a=o.slice(0,t),c=n.first();return e.merge({text:i+c.getText(),characterList:a.concat(c.getCharacterList()),type:i?e.getType():c.getType(),data:c.getData()})}(e,c,i)),i.slice(m?0:1,d-1).forEach((function(e){return l.push(e)})),l.push(function(e,t,n){var r=e.getText(),o=e.getCharacterList(),i=r.length,a=r.slice(t,i),c=o.slice(t,i),s=n.last();return s.merge({text:s.getText()+a,characterList:s.getCharacterList().concat(c),data:s.getData()})}(e,c,i))):l.push(e)}));var g=r.createFromArray(l);return s&&(g=function(e,t,n,r){return e.withMutations((function(t){var o=n.getKey(),i=r.getKey(),a=n.getNextSiblingKey(),c=n.getParentKey(),s=function(e,t){var n=e.getKey(),r=e,o=[];for(t.get(n)&&o.push(n);r&&r.getNextSiblingKey();){var i=r.getNextSiblingKey();if(!i)break;o.push(i),r=t.get(i)}return o}(r,e),l=s[s.length-1];if(t.get(i)?(t.setIn([o,"nextSibling"],i),t.setIn([i,"prevSibling"],o)):(t.setIn([o,"nextSibling"],r.getNextSiblingKey()),t.setIn([r.getNextSiblingKey(),"prevSibling"],o)),t.setIn([l,"nextSibling"],a),a&&t.setIn([a,"prevSibling"],l),s.forEach((function(e){return t.setIn([e,"parent"],c)})),c){var d=e.get(c).getChildKeys(),f=d.indexOf(o)+1,p=d.toArray();p.splice.apply(p,[f,0].concat(s)),t.setIn([c,"children"],u(p))}}))}(g,0,f,p)),e.merge({blockMap:g,selectionBefore:t,selectionAfter:t.merge({anchorKey:v,anchorOffset:b,focusKey:v,focusOffset:b,isBackward:!1})})};e.exports=function(e,t,n){t.isCollapsed()||c(!1);var r=e.getBlockMap(),i=s(n),u=t.getStartKey(),d=t.getStartOffset(),f=r.get(u);return f instanceof o&&(f.getChildKeys().isEmpty()||c(!1)),1===i.size?function(e,t,n,r,o,i){var c=n.get(o),s=c.getText(),u=c.getCharacterList(),l=o,d=i+r.getText().length,f=c.merge({text:s.slice(0,i)+r.getText()+s.slice(i),characterList:a(u,r.getCharacterList(),i),data:r.getData()});return e.merge({blockMap:n.set(o,f),selectionBefore:t,selectionAfter:t.merge({anchorKey:l,anchorOffset:d,focusKey:l,focusOffset:d,isBackward:!1})})}(e,t,r,i.first(),u,d):l(e,t,r,i,u,d)}},function(e,t,n){"use strict";var r=n(836),o=n(1029),i=n(837),a=r.Repeat;e.exports=function(e,t,n,r){t.isCollapsed()||i(!1);var c=n.length;if(!c)return e;var s=e.getBlockMap(),u=t.getStartKey(),l=t.getStartOffset(),d=s.get(u),f=d.getText(),p=d.merge({text:f.slice(0,l)+n+f.slice(l,d.getLength()),characterList:o(d.getCharacterList(),a(r,c).toList(),l)}),h=l+c;return e.merge({blockMap:s.set(u,p),selectionAfter:t.merge({anchorOffset:h,focusOffset:h})})}},function(e,t,n){"use strict";var r=n(836).Map;e.exports=function(e,t,n){var o=t.getStartKey(),i=t.getEndKey(),a=e.getBlockMap(),c=a.toSeq().skipUntil((function(e,t){return t===o})).takeUntil((function(e,t){return t===i})).concat(r([[i,a.get(i)]])).map(n);return e.merge({blockMap:a.merge(c),selectionBefore:t,selectionAfter:t})}},function(e,t,n){"use strict";var r=n(847),o=n(836),i=n(1030),a=(o.List,o.Map),c=function(e,t,n){if(e){var r=t.get(e);r&&t.set(e,n(r))}},s=function(e,t){var n=[];if(!e)return n;for(var r=t.get(e);r&&r.getParentKey();){var o=r.getParentKey();o&&n.push(o),r=o?t.get(o):null}return n},u=function(e,t,n){if(!e)return null;for(var r=n.get(e.getKey()).getNextSiblingKey();r&&!t.get(r);)r=n.get(r).getNextSiblingKey()||null;return r},l=function(e,t,n){if(!e)return null;for(var r=n.get(e.getKey()).getPrevSiblingKey();r&&!t.get(r);)r=n.get(r).getPrevSiblingKey()||null;return r},d=function(e,t,n,r){return e.withMutations((function(e){c(t.getKey(),e,(function(n){return n.merge({nextSibling:u(t,e,r),prevSibling:l(t,e,r)})})),c(n.getKey(),e,(function(t){return t.merge({nextSibling:u(n,e,r),prevSibling:l(n,e,r)})})),s(t.getKey(),r).forEach((function(t){return c(t,e,(function(t){return t.merge({children:t.getChildKeys().filter((function(t){return e.get(t)})),nextSibling:u(t,e,r),prevSibling:l(t,e,r)})}))})),c(t.getNextSiblingKey(),e,(function(e){return e.merge({prevSibling:t.getPrevSiblingKey()})})),c(t.getPrevSiblingKey(),e,(function(n){return n.merge({nextSibling:u(t,e,r)})})),c(n.getNextSiblingKey(),e,(function(t){return t.merge({prevSibling:l(n,e,r)})})),c(n.getPrevSiblingKey(),e,(function(e){return e.merge({nextSibling:n.getNextSiblingKey()})})),s(n.getKey(),r).forEach((function(t){c(t,e,(function(t){return t.merge({children:t.getChildKeys().filter((function(t){return e.get(t)})),nextSibling:u(t,e,r),prevSibling:l(t,e,r)})}))})),function(e,t){var n=[];if(!e)return n;for(var r=i(e,t);r&&t.get(r);){var o=t.get(r);n.push(r),r=o.getParentKey()?i(o,t):null}return n}(n,r).forEach((function(t){return c(t,e,(function(t){return t.merge({nextSibling:u(t,e,r),prevSibling:l(t,e,r)})}))}))}))},f=function(e,t,n){if(0===t)for(;t<n;)e=e.shift(),t++;else if(n===e.count())for(;n>t;)e=e.pop(),n--;else{var r=e.slice(0,t),o=e.slice(n);e=r.concat(o).toList()}return e};e.exports=function(e,t){if(t.isCollapsed())return e;var n=e.getBlockMap(),o=t.getStartKey(),c=t.getStartOffset(),u=t.getEndKey(),l=t.getEndOffset(),p=n.get(o),h=n.get(u),b=p instanceof r,v=[];if(b){var m=h.getChildKeys(),g=s(u,n);h.getNextSiblingKey()&&(v=v.concat(g)),m.isEmpty()||(v=v.concat(g.concat([u]))),v=v.concat(s(i(h,n),n))}var y=void 0;y=p===h?f(p.getCharacterList(),c,l):p.getCharacterList().slice(0,c).concat(h.getCharacterList().slice(l));var O=p.merge({text:p.getText().slice(0,c)+h.getText().slice(l),characterList:y}),j=n.toSeq().skipUntil((function(e,t){return t===o})).takeUntil((function(e,t){return t===u})).filter((function(e,t){return-1===v.indexOf(t)})).concat(a([[u,null]])).map((function(e,t){return t===o?O:null})),w=n.merge(j).filter((function(e){return!!e}));return b&&(w=d(w,p,h,n)),e.merge({blockMap:w,selectionBefore:t,selectionAfter:t.merge({anchorKey:o,anchorOffset:c,focusKey:o,focusOffset:c,isBackward:!1})})}},function(e,t,n){"use strict";var r=n(847),o=n(836),i=n(855),a=n(837),c=o.List,s=o.Map,u=function(e,t,n){if(e){var r=t.get(e);r&&t.set(e,n(r))}};e.exports=function(e,t){t.isCollapsed()||a(!1);var n=t.getAnchorKey(),o=t.getAnchorOffset(),l=e.getBlockMap(),d=l.get(n),f=d.getText(),p=d.getCharacterList(),h=i(),b=d instanceof r,v=d.merge({text:f.slice(0,o),characterList:p.slice(0,o)}),m=v.merge({key:h,text:f.slice(o),characterList:p.slice(o),data:s()}),g=l.toSeq().takeUntil((function(e){return e===d})),y=l.toSeq().skipUntil((function(e){return e===d})).rest(),O=g.concat([[n,v],[h,m]],y).toOrderedMap();return b&&(d.getChildKeys().isEmpty()||a(!1),O=function(e,t,n){return e.withMutations((function(e){var r=t.getKey(),o=n.getKey();u(t.getParentKey(),e,(function(e){var t=e.getChildKeys(),n=t.indexOf(r)+1,i=t.toArray();return i.splice(n,0,o),e.merge({children:c(i)})})),u(t.getNextSiblingKey(),e,(function(e){return e.merge({prevSibling:o})})),u(r,e,(function(e){return e.merge({nextSibling:o})})),u(o,e,(function(e){return e.merge({prevSibling:r})}))}))}(O,v,m)),e.merge({blockMap:O,selectionBefore:t,selectionAfter:t.merge({anchorKey:h,anchorOffset:0,focusKey:h,focusOffset:0,isBackward:!1})})}},function(e,t,n){"use strict";var r,o=n(836),i=n(1188),a=n(849),c=o.OrderedMap,s={getDirectionMap:function(e,t){r?r.reset():r=new i;var n=e.getBlockMap(),s=n.valueSeq().map((function(e){return a(r).getDirection(e.getText())})),u=c(n.keySeq().zip(s));return null!=t&&o.is(t,u)?t:u}};e.exports=s},function(e,t,n){"use strict";var r=n(1033),o=n(963),i=n(837),a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t?o.isStrong(t)||i(!1):t=o.getGlobalDir(),this._defaultDir=t,this.reset()}return e.prototype.reset=function(){this._lastDir=this._defaultDir},e.prototype.getDirection=function(e){return this._lastDir=r.getDirection(e,this._lastDir),this._lastDir},e}();e.exports=a},function(e,t,n){"use strict";var r=n(847),o=n(836),i=n(1030),a=n(837),c=o.OrderedMap,s=o.List,u=function(e,t,n){if(e){var r=t.get(e);r&&t.set(e,n(r))}},l=function(e,t,n,r,o){if(!o)return e;var i="after"===r,a=t.getKey(),c=n.getKey(),l=t.getParentKey(),d=t.getNextSiblingKey(),f=t.getPrevSiblingKey(),p=n.getParentKey(),h=i?n.getNextSiblingKey():c,b=i?c:n.getPrevSiblingKey();return e.withMutations((function(e){u(l,e,(function(e){var t=e.getChildKeys();return e.merge({children:t.delete(t.indexOf(a))})})),u(f,e,(function(e){return e.merge({nextSibling:d})})),u(d,e,(function(e){return e.merge({prevSibling:f})})),u(h,e,(function(e){return e.merge({prevSibling:a})})),u(b,e,(function(e){return e.merge({nextSibling:a})})),u(p,e,(function(e){var t=e.getChildKeys(),n=t.indexOf(c),r=i?n+1:0!==n?n-1:0,o=t.toArray();return o.splice(r,0,a),e.merge({children:s(o)})})),u(a,e,(function(e){return e.merge({nextSibling:h,prevSibling:b,parent:p})}))}))};e.exports=function(e,t,n,o){"replace"===o&&a(!1);var s=n.getKey(),u=t.getKey();u===s&&a(!1);var d=e.getBlockMap(),f=t instanceof r,p=[t],h=d.delete(u);f&&(p=[],h=d.withMutations((function(e){var n=t.getNextSiblingKey(),r=i(t,e);e.toSeq().skipUntil((function(e){return e.getKey()===u})).takeWhile((function(e){var t=e.getKey(),o=t===u,i=n&&t!==n,a=!n&&e.getParentKey()&&(!r||t!==r);return!!(o||i||a)})).forEach((function(t){p.push(t),e.delete(t.getKey())}))})));var b=h.toSeq().takeUntil((function(e){return e===n})),v=h.toSeq().skipUntil((function(e){return e===n})).skip(1),m=p.map((function(e){return[e.getKey(),e]})),g=c();if("before"===o){var y=e.getBlockBefore(s);y&&y.getKey()===t.getKey()&&a(!1),g=b.concat([].concat(m,[[s,n]]),v).toOrderedMap()}else if("after"===o){var O=e.getBlockAfter(s);O&&O.getKey()===u&&a(!1),g=b.concat([[s,n]].concat(m),v).toOrderedMap()}return e.merge({blockMap:l(g,t,n,o,f),selectionBefore:e.getSelectionAfter(),selectionAfter:e.getSelectionAfter().merge({anchorKey:u,focusKey:u})})}},function(e,t,n){"use strict";var r=n(836).List,o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._decorators=t.slice()}return e.prototype.getDecorations=function(e,t){var n=Array(e.getText().length).fill(null);return this._decorators.forEach((function(r,o){var i=0;(0,r.strategy)(e,(function(e,t){(function(e,t,n){for(var r=t;r<n;r++)if(null!=e[r])return!1;return!0})(n,e,t)&&(!function(e,t,n,r){for(var o=t;o<n;o++)e[o]=r}(n,e,t,o+"."+i),i++)}),t)})),r(n)},e.prototype.getComponentForKey=function(e){var t=parseInt(e.split(".")[0],10);return this._decorators[t].component},e.prototype.getPropsForKey=function(e){var t=parseInt(e.split(".")[0],10);return this._decorators[t].props},e}();e.exports=o},function(e,t,n){"use strict";var r=n(91)||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var o=n(964),i=n(1034),a=n(1192),c=n(1193),s=n(1215),u=n(1218),l=n(1250),d=n(838),f=n(1),p=n(42),h=n(1038),b=n(968),v=n(851),m=n(871),g=n(948),y=n(855),O=n(1051),j=n(969),w=n(837),C=n(849),k=v.isBrowser("IE"),S=!k,x={edit:u,composite:a,drag:s,cut:null,render:null},R=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return r.focus=function(e){var t=r.props.editorState,n=t.getSelection().getHasFocus(),o=p.findDOMNode(r.editor);if(o){var i=b.getScrollParent(o),a=e||j(i),c=a.x,s=a.y;o instanceof HTMLElement||w(!1),o.focus(),i===window?window.scrollTo(c,s):h.setTop(i,s),n||r.update(d.forceSelection(t,t.getSelection()))}},r.blur=function(){var e=p.findDOMNode(r.editor);e instanceof HTMLElement||w(!1),e.blur()},r.setMode=function(e){r._handler=x[e]},r.exitCurrentMode=function(){r.setMode("edit")},r.restoreEditorDOM=function(e){r.setState({contentsKey:r.state.contentsKey+1},(function(){r.focus(e)}))},r.setClipboard=function(e){r._clipboard=e},r.getClipboard=function(){return r._clipboard},r.update=function(e){r._latestEditorState=e,r.props.onChange(e)},r.onDragEnter=function(){r._dragCount++},r.onDragLeave=function(){r._dragCount--,0===r._dragCount&&r.exitCurrentMode()},r._blockSelectEvents=!1,r._clipboard=null,r._handler=null,r._dragCount=0,r._editorKey=n.editorKey||y(),r._placeholderAccessibilityID="placeholder-"+r._editorKey,r._latestEditorState=n.editorState,r._latestCommittedEditorState=n.editorState,r._onBeforeInput=r._buildHandler("onBeforeInput"),r._onBlur=r._buildHandler("onBlur"),r._onCharacterData=r._buildHandler("onCharacterData"),r._onCompositionEnd=r._buildHandler("onCompositionEnd"),r._onCompositionStart=r._buildHandler("onCompositionStart"),r._onCopy=r._buildHandler("onCopy"),r._onCut=r._buildHandler("onCut"),r._onDragEnd=r._buildHandler("onDragEnd"),r._onDragOver=r._buildHandler("onDragOver"),r._onDragStart=r._buildHandler("onDragStart"),r._onDrop=r._buildHandler("onDrop"),r._onInput=r._buildHandler("onInput"),r._onFocus=r._buildHandler("onFocus"),r._onKeyDown=r._buildHandler("onKeyDown"),r._onKeyPress=r._buildHandler("onKeyPress"),r._onKeyUp=r._buildHandler("onKeyUp"),r._onMouseDown=r._buildHandler("onMouseDown"),r._onMouseUp=r._buildHandler("onMouseUp"),r._onPaste=r._buildHandler("onPaste"),r._onSelect=r._buildHandler("onSelect"),r.getEditorKey=function(){return r._editorKey},r.state={contentsKey:0},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype._buildHandler=function(e){var t=this;return function(n){if(!t.props.readOnly){var r=t._handler&&t._handler[e];r&&r(t,n)}}},t.prototype._showPlaceholder=function(){return!!this.props.placeholder&&!this.props.editorState.isInCompositionMode()&&!this.props.editorState.getCurrentContent().hasText()},t.prototype._renderPlaceholder=function(){if(this._showPlaceholder()){var e={text:C(this.props.placeholder),editorState:this.props.editorState,textAlignment:this.props.textAlignment,accessibilityID:this._placeholderAccessibilityID};return f.createElement(l,e)}return null},t.prototype.render=function(){var e=this,t=this.props,n=t.blockRenderMap,o=t.blockRendererFn,a=t.blockStyleFn,s=t.customStyleFn,u=t.customStyleMap,l=t.editorState,d=t.readOnly,p=t.textAlignment,h=t.textDirectionality,b=m({"DraftEditor/root":!0,"DraftEditor/alignLeft":"left"===p,"DraftEditor/alignRight":"right"===p,"DraftEditor/alignCenter":"center"===p}),v=this.props.role||"textbox",g="combobox"===v?!!this.props.ariaExpanded:null,y={blockRenderMap:n,blockRendererFn:o,blockStyleFn:a,customStyleMap:r({},i,u),customStyleFn:s,editorKey:this._editorKey,editorState:l,key:"contents"+this.state.contentsKey,textDirectionality:h};return f.createElement("div",{className:b},this._renderPlaceholder(),f.createElement("div",{className:m("DraftEditor/editorContainer"),ref:function(t){return e.editorContainer=t}},f.createElement("div",{"aria-activedescendant":d?null:this.props.ariaActiveDescendantID,"aria-autocomplete":d?null:this.props.ariaAutoComplete,"aria-controls":d?null:this.props.ariaControls,"aria-describedby":this.props.ariaDescribedBy||this._placeholderAccessibilityID,"aria-expanded":d?null:g,"aria-label":this.props.ariaLabel,"aria-labelledby":this.props.ariaLabelledBy,"aria-multiline":this.props.ariaMultiline,autoCapitalize:this.props.autoCapitalize,autoComplete:this.props.autoComplete,autoCorrect:this.props.autoCorrect,className:m({notranslate:!d,"public/DraftEditor/content":!0}),contentEditable:!d,"data-testid":this.props.webDriverTestID,onBeforeInput:this._onBeforeInput,onBlur:this._onBlur,onCompositionEnd:this._onCompositionEnd,onCompositionStart:this._onCompositionStart,onCopy:this._onCopy,onCut:this._onCut,onDragEnd:this._onDragEnd,onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDragOver:this._onDragOver,onDragStart:this._onDragStart,onDrop:this._onDrop,onFocus:this._onFocus,onInput:this._onInput,onKeyDown:this._onKeyDown,onKeyPress:this._onKeyPress,onKeyUp:this._onKeyUp,onMouseUp:this._onMouseUp,onPaste:this._onPaste,onSelect:this._onSelect,ref:function(t){return e.editor=t},role:d?null:v,spellCheck:S&&this.props.spellCheck,style:{outline:"none",userSelect:"text",WebkitUserSelect:"text",whiteSpace:"pre-wrap",wordWrap:"break-word"},suppressContentEditableWarning:!0,tabIndex:this.props.tabIndex},f.createElement(c,y))))},t.prototype.componentDidMount=function(){this.setMode("edit"),k&&document.execCommand("AutoUrlDetect",!1,!1)},t.prototype.componentWillUpdate=function(e){this._blockSelectEvents=!0,this._latestEditorState=e.editorState},t.prototype.componentDidUpdate=function(){this._blockSelectEvents=!1,this._latestCommittedEditorState=this.props.editorState},t}(f.Component);R.defaultProps={blockRenderMap:o,blockRendererFn:g.thatReturnsNull,blockStyleFn:g.thatReturns(""),keyBindingFn:O,readOnly:!1,spellCheck:!1,stripPastedStyles:!1},e.exports=R},function(e,t,n){"use strict";var r=n(856),o=n(843),i=n(838),a=n(965),c=n(966),s=n(892),u=n(1035),l=!1,d=!1,f="",p={onBeforeInput:function(e,t){f=(f||"")+t.data},onCompositionStart:function(e){d=!0},onCompositionEnd:function(e){l=!1,d=!1,setTimeout((function(){l||p.resolveComposition(e)}),20)},onKeyDown:function(e,t){if(!d)return p.resolveComposition(e),void e._onKeyDown(t);t.which!==a.RIGHT&&t.which!==a.LEFT||t.preventDefault()},onKeyPress:function(e,t){t.which===a.RETURN&&t.preventDefault()},resolveComposition:function(e){if(!d){l=!0;var t=f;f="";var n=i.set(e._latestEditorState,{inCompositionMode:!1}),a=n.getCurrentInlineStyle(),p=c(n.getCurrentContent(),n.getSelection()),h=!t||u(n)||a.size>0||null!==p;if(h&&e.restoreEditorDOM(),e.exitCurrentMode(),t){if(r.draft_handlebeforeinput_composed_text&&e.props.handleBeforeInput&&s(e.props.handleBeforeInput(t,n)))return;var b=o.replaceText(n.getCurrentContent(),n.getSelection(),t,a,p);e.update(i.push(n,b,"insert-characters"))}else h&&e.update(i.set(n,{nativelyRenderedContent:null,forceSelection:!0}))}}};e.exports=p},function(e,t,n){"use strict";var r=n(1194);e.exports=r},function(e,t,n){"use strict";var r=n(91)||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var a=n(1036),c=n(927),s=(n(838),n(1)),u=n(871),l=n(1214),d=n(849),f=function(e,t,n,r){return u({"public/DraftStyleDefault/unorderedListItem":"unordered-list-item"===e,"public/DraftStyleDefault/orderedListItem":"ordered-list-item"===e,"public/DraftStyleDefault/reset":n,"public/DraftStyleDefault/depth0":0===t,"public/DraftStyleDefault/depth1":1===t,"public/DraftStyleDefault/depth2":2===t,"public/DraftStyleDefault/depth3":3===t,"public/DraftStyleDefault/depth4":4===t,"public/DraftStyleDefault/listLTR":"LTR"===r,"public/DraftStyleDefault/listRTL":"RTL"===r})},p=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.shouldComponentUpdate=function(e){var t=this.props.editorState,n=e.editorState;if(t.getDirectionMap()!==n.getDirectionMap())return!0;if(t.getSelection().getHasFocus()!==n.getSelection().getHasFocus())return!0;var r=n.getNativelyRenderedContent(),o=t.isInCompositionMode(),i=n.isInCompositionMode();if(t===n||null!==r&&n.getCurrentContent()===r||o&&i)return!1;var a=t.getCurrentContent(),c=n.getCurrentContent(),s=t.getDecorator(),u=n.getDecorator();return o!==i||a!==c||s!==u||n.mustForceSelection()},t.prototype.render=function(){for(var e=this.props,t=e.blockRenderMap,n=e.blockRendererFn,o=e.blockStyleFn,i=e.customStyleMap,u=e.customStyleFn,p=e.editorState,h=e.editorKey,b=e.textDirectionality,v=p.getCurrentContent(),m=p.getSelection(),g=p.mustForceSelection(),y=p.getDecorator(),O=d(p.getDirectionMap()),j=v.getBlocksAsArray(),w=[],C=null,k=null,S=0;S<j.length;S++){var x=j[S],R=x.getKey(),E=x.getType(),_=n(x),A=void 0,T=void 0,N=void 0;_&&(A=_.component,T=_.props,N=_.editable);var I=b||O.get(R),M=c.encode(R,0,0),D={contentState:v,block:x,blockProps:T,blockStyleFn:o,customStyleMap:i,customStyleFn:u,decorator:y,direction:I,forceSelection:g,key:R,offsetKey:M,selection:m,tree:p.getBlockTree(R)},L=t.get(E)||t.get("unstyled"),P=L.wrapper,z=L.element||t.get("unstyled").element,B=x.getDepth(),F="";if(o&&(F=o(x)),"li"===z)F=l(F,f(E,B,k!==P||null===C||B>C,I));var U=A||a,q={className:F,"data-block":!0,"data-editor":h,"data-offset-key":M,key:R};void 0!==N&&(q=r({},q,{contentEditable:N,suppressContentEditableWarning:!0}));var V=s.createElement(z,q,s.createElement(U,D));w.push({block:V,wrapperTemplate:P,key:R,offsetKey:M}),C=P?x.getDepth():null,k=P}for(var H=[],K=0;K<w.length;){var Q=w[K];if(Q.wrapperTemplate){var W=[];do{W.push(w[K].block),K++}while(K<w.length&&w[K].wrapperTemplate===Q.wrapperTemplate);var G=s.cloneElement(Q.wrapperTemplate,{key:Q.key+"-wrap","data-offset-key":Q.offsetKey},W);H.push(G)}else H.push(Q.block),K++}return s.createElement("div",{"data-contents":"true"},H)},t}(s.Component);e.exports=p},function(e,t,n){"use strict";var r=n(91);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var a=n(1196),c=n(1),s=n(42),u=n(837),l=n(1202),d=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype._setSelection=function(){var e=this.props.selection;if(null!=e&&e.getHasFocus()){var t=this.props,n=t.block,r=t.start,o=t.text,i=n.getKey(),a=r+o.length;if(e.hasEdgeWithin(i,r,a)){var c=s.findDOMNode(this);c||u(!1);var d=c.firstChild;d||u(!1);var f=void 0;d.nodeType===Node.TEXT_NODE?f=d:"BR"===d.tagName?f=c:(f=d.firstChild)||u(!1),l(e,f,i,r,a)}}},t.prototype.shouldComponentUpdate=function(e){var t=s.findDOMNode(this.leaf);return t||u(!1),t.textContent!==e.text||e.styleSet!==this.props.styleSet||e.forceSelection},t.prototype.componentDidUpdate=function(){this._setSelection()},t.prototype.componentDidMount=function(){this._setSelection()},t.prototype.render=function(){var e=this,t=this.props.block,n=this.props.text;n.endsWith("\n")&&this.props.isLast&&(n+="\n");var o=this.props,i=o.customStyleMap,s=o.customStyleFn,u=o.offsetKey,l=o.styleSet,d=l.reduce((function(e,t){var n={},o=i[t];return void 0!==o&&e.textDecoration!==o.textDecoration&&(n.textDecoration=[e.textDecoration,o.textDecoration].join(" ").trim()),r(e,o,n)}),{});if(s){var f=s(l,t);d=r(d,f)}return c.createElement("span",{"data-offset-key":u,ref:function(t){return e.leaf=t},style:d},c.createElement(a,null,n))},t}(c.Component);e.exports=d},function(e,t,n){"use strict";var r=n(1),o=n(42),i=n(851),a=n(837),c=i.isBrowser("IE <= 11");var s=c?r.createElement("span",{key:"A","data-text":"true"},"\n"):r.createElement("br",{key:"A","data-text":"true"}),u=c?r.createElement("span",{key:"B","data-text":"true"},"\n"):r.createElement("br",{key:"B","data-text":"true"}),l=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return r._forceFlag=!1,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.shouldComponentUpdate=function(e){var t=o.findDOMNode(this),n=""===e.children;return t instanceof Element||a(!1),n?!function(e){return c?"\n"===e.textContent:"BR"===e.tagName}(t):t.textContent!==e.children},t.prototype.componentDidMount=function(){this._forceFlag=!this._forceFlag},t.prototype.componentDidUpdate=function(){this._forceFlag=!this._forceFlag},t.prototype.render=function(){return""===this.props.children?this._forceFlag?s:u:r.createElement("span",{key:this._forceFlag?"A":"B","data-text":"true"},this.props.children)},t}(r.Component);e.exports=l},function(e,t,n){"use strict";var r=n(1198),o="Unknown",i={"Mac OS":"Mac OS X"};var a=(new r).getResult(),c=function(e){if(!e)return{major:"",minor:""};var t=e.split(".");return{major:t[0],minor:t[1]}}(a.browser.version),s={browserArchitecture:a.cpu.architecture||o,browserFullVersion:a.browser.version||o,browserMinorVersion:c.minor||o,browserName:a.browser.name||o,browserVersion:a.browser.major||o,deviceName:a.device.model||o,engineName:a.engine.name||o,engineVersion:a.engine.version||o,platformArchitecture:a.cpu.architecture||o,platformName:function(e){return i[e]||e}(a.os.name)||o,platformVersion:a.os.version||o,platformFullVersion:a.os.version||o};e.exports=s},function(e,t,n){var r;
/*!
 * UAParser.js v0.7.22
 * Lightweight JavaScript-based User-Agent string parser
 * https://github.com/faisalman/ua-parser-js
 *
 * Copyright © 2012-2019 Faisal Salman <f@faisalman.com>
 * Licensed under MIT License
 */!function(o,i){"use strict";var a="model",c="name",s="type",u="vendor",l="version",d="mobile",f="tablet",p="smarttv",h={extend:function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},b={rgx:function(e,t){for(var n,r,o,i,a,c,s=0;s<t.length&&!a;){var u=t[s],l=t[s+1];for(n=r=0;n<u.length&&!a;)if(a=u[n++].exec(e))for(o=0;o<l.length;o++)c=a[++r],"object"==typeof(i=l[o])&&i.length>0?2==i.length?"function"==typeof i[1]?this[i[0]]=i[1].call(this,c):this[i[0]]=i[1]:3==i.length?"function"!=typeof i[1]||i[1].exec&&i[1].test?this[i[0]]=c?c.replace(i[1],i[2]):void 0:this[i[0]]=c?i[1].call(this,c,i[2]):void 0:4==i.length&&(this[i[0]]=c?i[3].call(this,c.replace(i[1],i[2])):void 0):this[i]=c||void 0;s+=2}},str:function(e,t){for(var n in t)if("object"==typeof t[n]&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(h.has(t[n][r],e))return"?"===n?void 0:n}else if(h.has(t[n],e))return"?"===n?void 0:n;return e}},v={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},m={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[c,l],[/(opios)[\/\s]+([\w\.]+)/i],[[c,"Opera Mini"],l],[/\s(opr)\/([\w\.]+)/i],[[c,"Opera"],l],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i,/(bidubrowser|baidubrowser)[\/\s]?([\w\.]+)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i],[c,l],[/(konqueror)\/([\w\.]+)/i],[[c,"Konqueror"],l],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[c,"IE"],l],[/(edge|edgios|edga|edg)\/((\d+)?[\w\.]+)/i],[[c,"Edge"],l],[/(yabrowser)\/([\w\.]+)/i],[[c,"Yandex"],l],[/(Avast)\/([\w\.]+)/i],[[c,"Avast Secure Browser"],l],[/(AVG)\/([\w\.]+)/i],[[c,"AVG Secure Browser"],l],[/(puffin)\/([\w\.]+)/i],[[c,"Puffin"],l],[/(focus)\/([\w\.]+)/i],[[c,"Firefox Focus"],l],[/(opt)\/([\w\.]+)/i],[[c,"Opera Touch"],l],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[c,"UCBrowser"],l],[/(comodo_dragon)\/([\w\.]+)/i],[[c,/_/g," "],l],[/(windowswechat qbcore)\/([\w\.]+)/i],[[c,"WeChat(Win) Desktop"],l],[/(micromessenger)\/([\w\.]+)/i],[[c,"WeChat"],l],[/(brave)\/([\w\.]+)/i],[[c,"Brave"],l],[/(qqbrowserlite)\/([\w\.]+)/i],[c,l],[/(QQ)\/([\d\.]+)/i],[c,l],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[c,l],[/(baiduboxapp)[\/\s]?([\w\.]+)/i],[c,l],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[c,l],[/(MetaSr)[\/\s]?([\w\.]+)/i],[c],[/(LBBROWSER)/i],[c],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[l,[c,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[l,[c,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/android.+(line)\/([\w\.]+)\/iab/i],[c,l],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[l,[c,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[c,/(.+)/,"$1 WebView"],l],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[c,/(.+(?:g|us))(.+)/,"$1 $2"],l],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[l,[c,"Android Browser"]],[/(sailfishbrowser)\/([\w\.]+)/i],[[c,"Sailfish Browser"],l],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[c,l],[/(dolfin)\/([\w\.]+)/i],[[c,"Dolphin"],l],[/(qihu|qhbrowser|qihoobrowser|360browser)/i],[[c,"360 Browser"]],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[c,"Chrome"],l],[/(coast)\/([\w\.]+)/i],[[c,"Opera Coast"],l],[/fxios\/([\w\.-]+)/i],[l,[c,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[l,[c,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[l,c],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[c,"GSA"],l],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[c,[l,b.str,v.browser.oldsafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[c,l],[/(navigator|netscape)\/([\w\.-]+)/i],[[c,"Netscape"],l],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[c,l]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",h.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",h.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+[;l]))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",h.lowerize]]],device:[[/\((ipad|playbook);[\w\s\),;-]+(rim|apple)/i],[a,u,[s,f]],[/applecoremedia\/[\w\.]+ \((ipad)/],[a,[u,"Apple"],[s,f]],[/(apple\s{0,1}tv)/i],[[a,"Apple TV"],[u,"Apple"],[s,p]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[u,a,[s,f]],[/(kf[A-z]+)\sbuild\/.+silk\//i],[a,[u,"Amazon"],[s,f]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[[a,b.str,v.device.amazon.model],[u,"Amazon"],[s,d]],[/android.+aft([bms])\sbuild/i],[a,[u,"Amazon"],[s,p]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[a,u,[s,d]],[/\((ip[honed|\s\w*]+);/i],[a,[u,"Apple"],[s,d]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[u,a,[s,d]],[/\(bb10;\s(\w+)/i],[a,[u,"BlackBerry"],[s,d]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone|p00c)/i],[a,[u,"Asus"],[s,f]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[u,"Sony"],[a,"Xperia Tablet"],[s,f]],[/android.+\s([c-g]\d{4}|so[-l]\w+)(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[a,[u,"Sony"],[s,d]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[u,a,[s,"console"]],[/android.+;\s(shield)\sbuild/i],[a,[u,"Nvidia"],[s,"console"]],[/(playstation\s[34portablevi]+)/i],[a,[u,"Sony"],[s,"console"]],[/(sprint\s(\w+))/i],[[u,b.str,v.device.sprint.vendor],[a,b.str,v.device.sprint.model],[s,d]],[/(htc)[;_\s-]+([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[u,[a,/_/g," "],[s,d]],[/(nexus\s9)/i],[a,[u,"HTC"],[s,f]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p|vog-l29|ane-lx1|eml-l29|ele-l29)/i],[a,[u,"Huawei"],[s,d]],[/android.+(bah2?-a?[lw]\d{2})/i],[a,[u,"Huawei"],[s,f]],[/(microsoft);\s(lumia[\s\w]+)/i],[u,a,[s,d]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[a,[u,"Microsoft"],[s,"console"]],[/(kin\.[onetw]{3})/i],[[a,/\./g," "],[u,"Microsoft"],[s,d]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[a,[u,"Motorola"],[s,d]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[a,[u,"Motorola"],[s,f]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[u,h.trim],[a,h.trim],[s,p]],[/hbbtv.+maple;(\d+)/i],[[a,/^/,"SmartTV"],[u,"Samsung"],[s,p]],[/\(dtv[\);].+(aquos)/i],[a,[u,"Sharp"],[s,p]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[u,"Samsung"],a,[s,f]],[/smart-tv.+(samsung)/i],[u,[s,p],a],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[u,"Samsung"],a,[s,d]],[/sie-(\w*)/i],[a,[u,"Siemens"],[s,d]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[u,"Nokia"],a,[s,d]],[/android[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[a,[u,"Acer"],[s,f]],[/android.+([vl]k\-?\d{3})\s+build/i],[a,[u,"LG"],[s,f]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[u,"LG"],a,[s,f]],[/(lg) netcast\.tv/i],[u,a,[s,p]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[a,[u,"LG"],[s,d]],[/(lenovo)\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+))/i],[u,a,[s,f]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[a,[u,"Lenovo"],[s,f]],[/(lenovo)[_\s-]?([\w-]+)/i],[u,a,[s,d]],[/linux;.+((jolla));/i],[u,a,[s,d]],[/((pebble))app\/[\d\.]+\s/i],[u,a,[s,"wearable"]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[u,a,[s,d]],[/crkey/i],[[a,"Chromecast"],[u,"Google"],[s,p]],[/android.+;\s(glass)\s\d/i],[a,[u,"Google"],[s,"wearable"]],[/android.+;\s(pixel c)[\s)]/i],[a,[u,"Google"],[s,f]],[/android.+;\s(pixel( [23])?( xl)?)[\s)]/i],[a,[u,"Google"],[s,d]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:a\d|one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]?[\w\s]+))\s+build/i],[[a,/_/g," "],[u,"Xiaomi"],[s,d]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]?[\w\s]+))\s+build/i],[[a,/_/g," "],[u,"Xiaomi"],[s,f]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[a,[u,"Meizu"],[s,d]],[/(mz)-([\w-]{2,})/i],[[u,"Meizu"],a,[s,d]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})[\s)]/i],[a,[u,"OnePlus"],[s,d]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[a,[u,"RCA"],[s,f]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],[a,[u,"Dell"],[s,f]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[a,[u,"Verizon"],[s,f]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[u,"Barnes & Noble"],a,[s,f]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[a,[u,"NuVision"],[s,f]],[/android.+;\s(k88)\sbuild/i],[a,[u,"ZTE"],[s,f]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[a,[u,"Swiss"],[s,d]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[a,[u,"Swiss"],[s,f]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[a,[u,"Zeki"],[s,f]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[u,"Dragon Touch"],a,[s,f]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[a,[u,"Insignia"],[s,f]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[a,[u,"NextBook"],[s,f]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[u,"Voice"],a,[s,d]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[u,"LvTel"],a,[s,d]],[/android.+;\s(PH-1)\s/i],[a,[u,"Essential"],[s,d]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[a,[u,"Envizen"],[s,f]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[u,a,[s,f]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[a,[u,"MachSpeed"],[s,f]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[u,a,[s,f]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[a,[u,"Rotor"],[s,f]],[/android.+(KS(.+))\s+build/i],[a,[u,"Amazon"],[s,f]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[u,a,[s,f]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[s,h.lowerize],u,a],[/[\s\/\(](smart-?tv)[;\)]/i],[[s,p]],[/(android[\w\.\s\-]{0,9});.+build/i],[a,[u,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[l,[c,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[l,[c,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[c,l],[/rv\:([\w\.]{1,9}).+(gecko)/i],[l,c]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[c,l],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[c,[l,b.str,v.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[c,"Windows"],[l,b.str,v.os.windows.version]],[/\((bb)(10);/i],[[c,"BlackBerry"],l],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i],[c,l],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[c,"Symbian"],l],[/\((series40);/i],[c],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[c,"Firefox OS"],l],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[c,l],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[c,"Chromium OS"],l],[/(sunos)\s?([\w\.\d]*)/i],[[c,"Solaris"],l],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[c,l],[/(haiku)\s(\w+)/i],[c,l],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[l,/_/g,"."],[c,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[c,"Mac OS"],[l,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[c,l]]},g=function e(t,n){if("object"==typeof t&&(n=t,t=void 0),!(this instanceof e))return new e(t,n).getResult();var r=t||(o&&o.navigator&&o.navigator.userAgent?o.navigator.userAgent:""),i=n?h.extend(m,n):m;return this.getBrowser=function(){var e={name:void 0,version:void 0};return b.rgx.call(e,r,i.browser),e.major=h.major(e.version),e},this.getCPU=function(){var e={architecture:void 0};return b.rgx.call(e,r,i.cpu),e},this.getDevice=function(){var e={vendor:void 0,model:void 0,type:void 0};return b.rgx.call(e,r,i.device),e},this.getEngine=function(){var e={name:void 0,version:void 0};return b.rgx.call(e,r,i.engine),e},this.getOS=function(){var e={name:void 0,version:void 0};return b.rgx.call(e,r,i.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r=e,this},this};g.VERSION="0.7.22",g.BROWSER={NAME:c,MAJOR:"major",VERSION:l},g.CPU={ARCHITECTURE:"architecture"},g.DEVICE={MODEL:a,VENDOR:u,TYPE:s,CONSOLE:"console",MOBILE:d,SMARTTV:p,TABLET:f,WEARABLE:"wearable",EMBEDDED:"embedded"},g.ENGINE={NAME:c,VERSION:l},g.OS={NAME:c,VERSION:l},void 0!==t?(void 0!==e&&e.exports&&(t=e.exports=g),t.UAParser=g):void 0===(r=function(){return g}.call(t,n,t,e))||(e.exports=r);var y=o&&(o.jQuery||o.Zepto);if(y&&!y.ua){var O=new g;y.ua=O.getResult(),y.ua.get=function(){return O.getUA()},y.ua.set=function(e){O.setUA(e);var t=O.getResult();for(var n in t)y.ua[n]=t[n]}}}("object"==typeof window?window:this)},function(e,t,n){"use strict";var r=n(837),o=/\./,i=/\|\|/,a=/\s+\-\s+/,c=/^(<=|<|=|>=|~>|~|>|)?\s*(.+)/,s=/^(\d*)(.*)/;function u(e,t){var n=e.split(i);return n.length>1?n.some((function(e){return O.contains(e,t)})):function(e,t){var n=e.split(a);if(n.length>0&&n.length<=2||r(!1),1===n.length)return l(n[0],t);var o=n[0],i=n[1];return b(o)&&b(i)||r(!1),l(">="+o,t)&&l("<="+i,t)}(e=n[0].trim(),t)}function l(e,t){if(""===(e=e.trim()))return!0;var n,r=t.split(o),i=p(e),a=i.modifier,c=i.rangeComponents;switch(a){case"<":return d(r,c);case"<=":return-1===(n=y(r,c))||0===n;case">=":return f(r,c);case">":return function(e,t){return 1===y(e,t)}(r,c);case"~":case"~>":return function(e,t){var n=t.slice(),r=t.slice();r.length>1&&r.pop();var o=r.length-1,i=parseInt(r[o],10);h(i)&&(r[o]=i+1+"");return f(e,n)&&d(e,r)}(r,c);default:return function(e,t){return 0===y(e,t)}(r,c)}}function d(e,t){return-1===y(e,t)}function f(e,t){var n=y(e,t);return 1===n||0===n}function p(e){var t=e.split(o),n=t[0].match(c);return n||r(!1),{modifier:n[1],rangeComponents:[n[2]].concat(t.slice(1))}}function h(e){return!isNaN(e)&&isFinite(e)}function b(e){return!p(e).modifier}function v(e,t){for(var n=e.length;n<t;n++)e[n]="0"}function m(e,t){var n=e.match(s)[1],r=t.match(s)[1],o=parseInt(n,10),i=parseInt(r,10);return h(o)&&h(i)&&o!==i?g(o,i):g(e,t)}function g(e,t){return typeof e!=typeof t&&r(!1),e>t?1:e<t?-1:0}function y(e,t){for(var n=function(e,t){v(e=e.slice(),(t=t.slice()).length);for(var n=0;n<t.length;n++){var r=t[n].match(/^[x*]$/i);if(r&&(t[n]=e[n]="0","*"===r[0]&&n===t.length-1))for(var o=n;o<e.length;o++)e[o]="0"}return v(t,e.length),[e,t]}(e,t),r=n[0],o=n[1],i=0;i<o.length;i++){var a=m(r[i],o[i]);if(a)return a}return 0}var O={contains:function(e,t){return u(e.trim(),t.trim())}};e.exports=O},function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){if(!e)return null;var o={};for(var i in e)r.call(e,i)&&(o[i]=t.call(n,e[i],i,e));return o}},function(e,t,n){"use strict";e.exports=function(e){var t={};return function(n){return t.hasOwnProperty(n)||(t[n]=e.call(this,n)),t[n]}}},function(e,t,n){"use strict";(function(t){var r=n(1203),o=n(967),i=n(1037),a=n(837);function c(e,t){if(!e)return"[empty]";var n=function e(t,n){var r=void 0!==n?n(t):[];if(t.nodeType===Node.TEXT_NODE){var o=t.textContent.length;return document.createTextNode("[text "+o+(r.length?" | "+r.join(", "):"")+"]")}var i=t.cloneNode();1===i.nodeType&&r.length&&i.setAttribute("data-labels",r.join(", "));for(var a=t.childNodes,c=0;c<a.length;c++)i.appendChild(e(a[c],n));return i}(e,t);return n.nodeType===Node.TEXT_NODE?n.textContent:(n instanceof Element||a(!1),n.outerHTML)}function s(e,t){for(var n=e;n;){if(n instanceof Element&&n.hasAttribute("contenteditable"))return c(n,t);n=n.parentNode}return"Could not find contentEditable parent of node"}function u(e){return null===e.nodeValue?e.childNodes.length:e.nodeValue.length}function l(e,t,n,a){var c=i();if(e.extend&&o(c,t)){n>u(t)&&r.logSelectionStateFailure({anonymizedDom:s(t),extraParams:JSON.stringify({offset:n}),selectionState:JSON.stringify(a.toJS())});var l=t===e.focusNode;try{e.extend(t,n)}catch(o){throw r.logSelectionStateFailure({anonymizedDom:s(t,(function(t){var n=[];return t===c&&n.push("active element"),t===e.anchorNode&&n.push("selection anchor node"),t===e.focusNode&&n.push("selection focus node"),n})),extraParams:JSON.stringify({activeElementName:c?c.nodeName:null,nodeIsFocus:t===e.focusNode,nodeWasFocus:l,selectionRangeCount:e.rangeCount,selectionAnchorNodeName:e.anchorNode?e.anchorNode.nodeName:null,selectionAnchorOffset:e.anchorOffset,selectionFocusNodeName:e.focusNode?e.focusNode.nodeName:null,selectionFocusOffset:e.focusOffset,message:o?""+o:null,offset:n},null,2),selectionState:JSON.stringify(a.toJS(),null,2)}),o}}else{var d=e.getRangeAt(0);d.setEnd(t,n),e.addRange(d.cloneRange())}}function d(e,t,n,o){var i=document.createRange();n>u(t)&&r.logSelectionStateFailure({anonymizedDom:s(t),extraParams:JSON.stringify({offset:n}),selectionState:JSON.stringify(o.toJS())}),i.setStart(t,n),e.addRange(i)}e.exports=function(e,n,r,i,a){if(o(document.documentElement,n)){var c=t.getSelection(),s=e.getAnchorKey(),u=e.getAnchorOffset(),f=e.getFocusKey(),p=e.getFocusOffset(),h=e.getIsBackward();if(!c.extend&&h){var b=s,v=u;s=f,u=p,f=b,p=v,h=!1}var m=s===r&&i<=u&&a>=u,g=f===r&&i<=p&&a>=p;if(m&&g)return c.removeAllRanges(),d(c,n,u-i,e),void l(c,n,p-i,e);if(h){if(g&&(c.removeAllRanges(),d(c,n,p-i,e)),m){var y=c.focusNode,O=c.focusOffset;c.removeAllRanges(),d(c,n,u-i,e),l(c,y,O,e)}}else m&&(c.removeAllRanges(),d(c,n,u-i,e)),g&&l(c,n,p-i,e)}}}).call(this,n(100))},function(e,t,n){"use strict";e.exports={logSelectionStateFailure:function(){return null}}},function(e,t,n){"use strict";var r=n(1205);e.exports=function(e){return r(e)&&3==e.nodeType}},function(e,t,n){"use strict";e.exports=function(e){var t=(e?e.ownerDocument||e:document).defaultView||window;return!(!e||!("function"==typeof t.Node?e instanceof t.Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName))}},function(e,t,n){"use strict";var r=n(1207),o=n(1208);function i(e){return null==e?e:String(e)}e.exports=function(e,t){var n=void 0;if(window.getComputedStyle&&(n=window.getComputedStyle(e,null)))return i(n.getPropertyValue(o(t)));if(document.defaultView&&document.defaultView.getComputedStyle){if(n=document.defaultView.getComputedStyle(e,null))return i(n.getPropertyValue(o(t)));if("display"===t)return"none"}return e.currentStyle?i("float"===t?e.currentStyle.cssFloat||e.currentStyle.styleFloat:e.currentStyle[r(t)]):i(e.style&&e.style[r(t)])}},function(e,t,n){"use strict";var r=/-(.)/g;e.exports=function(e){return e.replace(r,(function(e,t){return t.toUpperCase()}))}},function(e,t,n){"use strict";var r=/([A-Z])/g;e.exports=function(e){return e.replace(r,"-$1").toLowerCase()}},function(e,t,n){"use strict";var r=n(1210);e.exports=function(e){var t=r(e);return{x:t.left,y:t.top,width:t.right-t.left,height:t.bottom-t.top}}},function(e,t,n){"use strict";var r=n(967);e.exports=function(e){var t=e.ownerDocument.documentElement;if(!("getBoundingClientRect"in e)||!r(t,e))return{left:0,right:0,top:0,bottom:0};var n=e.getBoundingClientRect();return{left:Math.round(n.left)-t.clientLeft,right:Math.round(n.right)-t.clientLeft,top:Math.round(n.top)-t.clientTop,bottom:Math.round(n.bottom)-t.clientTop}}},function(e,t,n){"use strict";var r="undefined"!=typeof navigator&&navigator.userAgent.indexOf("AppleWebKit")>-1;e.exports=function(e){return(e=e||document).scrollingElement?e.scrollingElement:r||"CSS1Compat"!==e.compatMode?e.body:e.documentElement}},function(e,t,n){"use strict";e.exports=function(e){return e.Window&&e instanceof e.Window?{x:e.pageXOffset||e.document.documentElement.scrollLeft,y:e.pageYOffset||e.document.documentElement.scrollTop}:{x:e.scrollLeft,y:e.scrollTop}}},function(e,t,n){"use strict";function r(){var e=void 0;return document.documentElement&&(e=document.documentElement.clientWidth),!e&&document.body&&(e=document.body.clientWidth),e||0}function o(){var e=void 0;return document.documentElement&&(e=document.documentElement.clientHeight),!e&&document.body&&(e=document.body.clientHeight),e||0}function i(){return{width:window.innerWidth||r(),height:window.innerHeight||o()}}i.withoutScrollbars=function(){return{width:r(),height:o()}},e.exports=i},function(e,t,n){"use strict";e.exports=function(e){e||(e="");var t=void 0,n=arguments.length;if(n>1)for(var r=1;r<n;r++)(t=arguments[r])&&(e=(e?e+" ":"")+t);return e}},function(e,t,n){"use strict";var r=n(1039),o=n(843),i=n(838),a=n(970),c=n(1041),s=n(1042),u=n(892),l=n(849);var d={onDragEnd:function(e){e.exitCurrentMode()},onDrop:function(e,t){var n=new r(t.nativeEvent.dataTransfer),d=e._latestEditorState,p=function(e,t){var n=null,r=null;if("function"==typeof document.caretRangeFromPoint){var o=document.caretRangeFromPoint(e.x,e.y);n=o.startContainer,r=o.startOffset}else{if(!e.rangeParent)return null;n=e.rangeParent,r=e.rangeOffset}n=l(n),r=l(r);var i=l(a(n));return s(t,i,r,i,r)}(t.nativeEvent,d);if(t.preventDefault(),e.exitCurrentMode(),null!=p){var h=n.getFiles();if(h.length>0){if(e.props.handleDroppedFiles&&u(e.props.handleDroppedFiles(p,h)))return;c(h,(function(t){t&&e.update(f(d,p,t))}))}else{var b=e._internalDrag?"internal":"external";e.props.handleDrop&&u(e.props.handleDrop(p,n,b))||(e._internalDrag?e.update(function(e,t){var n=o.moveText(e.getCurrentContent(),e.getSelection(),t);return i.push(e,n,"insert-fragment")}(d,p)):e.update(f(d,p,n.getText())))}}}};function f(e,t,n){var r=o.insertText(e.getCurrentContent(),t,n,e.getCurrentInlineStyle());return i.push(e,r,"insert-fragment")}e.exports=d},function(e,t,n){"use strict";var r={isImage:function(e){return"image"===o(e)[0]},isJpeg:function(e){var t=o(e);return r.isImage(e)&&("jpeg"===t[1]||"pjpeg"===t[1])}};function o(e){return e.split("/")}e.exports=r},function(e,t,n){"use strict";var r=n(837);e.exports=function(e){return function(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"length"in e&&!("setInterval"in e)&&"number"!=typeof e.nodeType&&(Array.isArray(e)||"callee"in e||"item"in e)}(e)?Array.isArray(e)?e.slice():function(e){var t=e.length;if((Array.isArray(e)||"object"!=typeof e&&"function"!=typeof e)&&r(!1),"number"!=typeof t&&r(!1),0===t||t-1 in e||r(!1),"function"==typeof e.callee&&r(!1),e.hasOwnProperty)try{return Array.prototype.slice.call(e)}catch(e){}for(var n=Array(t),o=0;o<t;o++)n[o]=e[o];return n}(e):[e]}},function(e,t,n){"use strict";var r={onBeforeInput:n(1219),onBlur:n(1221),onCompositionStart:n(1222),onCopy:n(1223),onCut:n(1224),onDragOver:n(1225),onDragStart:n(1226),onFocus:n(1227),onInput:n(1228),onKeyDown:n(1229),onPaste:n(1243),onSelect:n(1248)};e.exports=r},function(e,t,n){"use strict";(function(t){var r=n(1031),o=n(843),i=n(838),a=n(851),c=n(966),s=n(892),u=n(1035),l=n(849),d=n(1220),f=a.isBrowser("Firefox");function p(e,t,n,r){var a=o.replaceText(e.getCurrentContent(),e.getSelection(),t,n,r);return i.push(e,a,"insert-characters")}e.exports=function(e,n){void 0!==e._pendingStateFromBeforeInput&&(e.update(e._pendingStateFromBeforeInput),e._pendingStateFromBeforeInput=void 0);var o=e._latestEditorState,a=n.data;if(a)if(e.props.handleBeforeInput&&s(e.props.handleBeforeInput(a,o)))n.preventDefault();else{var h=o.getSelection(),b=h.getStartOffset(),v=h.getEndOffset(),m=h.getAnchorKey();if(!h.isCollapsed())return n.preventDefault(),void(a===o.getCurrentContent().getPlainText().slice(b,v)?e.update(i.forceSelection(o,h.merge({focusOffset:v}))):e.update(p(o,a,o.getCurrentInlineStyle(),c(o.getCurrentContent(),o.getSelection()))));var g,y=p(o,a,o.getCurrentInlineStyle(),c(o.getCurrentContent(),o.getSelection())),O=!1;if(O||(O=u(e._latestCommittedEditorState)),!O){var j=t.getSelection();if(j.anchorNode&&j.anchorNode.nodeType===Node.TEXT_NODE){var w=j.anchorNode.parentNode;O="SPAN"===w.nodeName&&w.firstChild.nodeType===Node.TEXT_NODE&&-1!==w.firstChild.nodeValue.indexOf("\t")}}if(!O)O=r.getFingerprint(o.getBlockTree(m))!==r.getFingerprint(y.getBlockTree(m));if(O||(g=a,O=f&&("'"==g||"/"==g)),O||(O=l(y.getDirectionMap()).get(m)!==l(o.getDirectionMap()).get(m)),O)return n.preventDefault(),void e.update(y);y=i.set(y,{nativelyRenderedContent:y.getCurrentContent()}),e._pendingStateFromBeforeInput=y,d((function(){void 0!==e._pendingStateFromBeforeInput&&(e.update(e._pendingStateFromBeforeInput),e._pendingStateFromBeforeInput=void 0)}))}}}).call(this,n(100))},function(e,t,n){"use strict";(function(t){n(1132),e.exports=t.setImmediate}).call(this,n(100))},function(e,t,n){"use strict";(function(t){var r=n(838),o=n(967),i=n(1037);e.exports=function(e,n){if(i()===document.body){var a=t.getSelection(),c=e.editor;1===a.rangeCount&&o(c,a.anchorNode)&&o(c,a.focusNode)&&a.removeAllRanges()}var s=e._latestEditorState,u=s.getSelection();if(u.getHasFocus()){var l=u.set("hasFocus",!1);e.props.onBlur&&e.props.onBlur(n),e.update(r.acceptSelection(s,l))}}}).call(this,n(100))},function(e,t,n){"use strict";var r=n(838);e.exports=function(e,t){e.setMode("composite"),e.update(r.set(e._latestEditorState,{inCompositionMode:!0})),e._onCompositionStart(t)}},function(e,t,n){"use strict";var r=n(1043);e.exports=function(e,t){e._latestEditorState.getSelection().isCollapsed()?t.preventDefault():e.setClipboard(r(e._latestEditorState))}},function(e,t,n){"use strict";var r=n(843),o=n(838),i=n(968),a=n(1043),c=n(969);e.exports=function(e,t){var n=e._latestEditorState,s=n.getSelection(),u=t.target,l=void 0;if(s.isCollapsed())t.preventDefault();else{u instanceof Node&&(l=c(i.getScrollParent(u)));var d=a(n);e.setClipboard(d),e.setMode("cut"),setTimeout((function(){e.restoreEditorDOM(l),e.exitCurrentMode(),e.update(function(e){var t=r.removeRange(e.getCurrentContent(),e.getSelection(),"forward");return o.push(e,t,"remove-range")}(n))}),0)}}},function(e,t,n){"use strict";e.exports=function(e,t){e._internalDrag=!1,e.setMode("drag"),t.preventDefault()}},function(e,t,n){"use strict";e.exports=function(e){e._internalDrag=!0,e.setMode("drag")}},function(e,t,n){"use strict";var r=n(838),o=n(851);e.exports=function(e,t){var n=e._latestEditorState,i=n.getSelection();if(!i.getHasFocus()){var a=i.set("hasFocus",!0);e.props.onFocus&&e.props.onFocus(t),o.isBrowser("Chrome < 60.0.3081.0")?e.update(r.forceSelection(n,a)):e.update(r.acceptSelection(n,a))}}},function(e,t,n){"use strict";(function(t){var r=n(856),o=n(843),i=n(927),a=n(838),c=n(851),s=n(970),u=n(849),l=c.isEngine("Gecko");e.exports=function(e){void 0!==e._pendingStateFromBeforeInput&&(e.update(e._pendingStateFromBeforeInput),e._pendingStateFromBeforeInput=void 0);var n=t.getSelection(),c=n.anchorNode,d=n.isCollapsed,f=c.nodeType!==Node.TEXT_NODE,p=c.nodeType!==Node.TEXT_NODE&&c.nodeType!==Node.ELEMENT_NODE;if(r.draft_killswitch_allow_nontextnodes){if(f)return}else if(p)return;if(c.nodeType===Node.TEXT_NODE&&(null!==c.previousSibling||null!==c.nextSibling)){var h=c.parentNode;c.nodeValue=h.textContent;for(var b=h.firstChild;null!==b;b=b.nextSibling)b!==c&&h.removeChild(b)}var v=c.textContent,m=e._latestEditorState,g=u(s(c)),y=i.decode(g),O=y.blockKey,j=y.decoratorKey,w=y.leafKey,C=m.getBlockTree(O).getIn([j,"leaves",w]),k=C.start,S=C.end,x=m.getCurrentContent(),R=x.getBlockForKey(O),E=R.getText().slice(k,S);if(v.endsWith("\n\n")&&(v=v.slice(0,-1)),v!==E){var _,A,T,N,I=m.getSelection(),M=I.merge({anchorOffset:k,focusOffset:S,isBackward:!1}),D=R.getEntityAt(k),L=D&&x.getEntity(D),P="MUTABLE"===(L&&L.getMutability()),z=P?"spellcheck-change":"apply-entity",B=o.replaceText(x,M,v,R.getInlineStyleAt(k),P?R.getEntityAt(k):null);if(l)_=n.anchorOffset,A=n.focusOffset,N=(T=k+Math.min(_,A))+Math.abs(_-A),_=T,A=N;else{var F=v.length-E.length;T=I.getStartOffset(),N=I.getEndOffset(),_=d?N+F:T,A=N+F}var U=B.merge({selectionBefore:x.getSelectionAfter(),selectionAfter:I.merge({anchorOffset:_,focusOffset:A})});e.update(a.push(m,U,z))}}}).call(this,n(100))},function(e,t,n){"use strict";var r=n(843),o=n(838),i=n(971),a=n(965),c=n(1230),s=n(851),u=n(892),l=n(1231),d=n(1233),f=n(1235),p=n(1236),h=n(1237),b=n(1238),v=n(1239),m=n(1240),g=n(1241),y=n(1242),O=i.isOptionKeyCommand,j=s.isBrowser("Chrome");e.exports=function(e,t){var n=t.which,i=e._latestEditorState;switch(n){case a.RETURN:if(t.preventDefault(),e.props.handleReturn&&u(e.props.handleReturn(t,i)))return;break;case a.ESC:return t.preventDefault(),void(e.props.onEscape&&e.props.onEscape(t));case a.TAB:return void(e.props.onTab&&e.props.onTab(t));case a.UP:return void(e.props.onUpArrow&&e.props.onUpArrow(t));case a.RIGHT:return void(e.props.onRightArrow&&e.props.onRightArrow(t));case a.DOWN:return void(e.props.onDownArrow&&e.props.onDownArrow(t));case a.LEFT:return void(e.props.onLeftArrow&&e.props.onLeftArrow(t));case a.SPACE:if(j&&O(t)){t.preventDefault();var s=r.replaceText(i.getCurrentContent(),i.getSelection()," ");return void e.update(o.push(i,s,"insert-characters"))}}var w=e.props.keyBindingFn(t);if(w)if("undo"!==w){if(t.preventDefault(),!e.props.handleKeyCommand||!u(e.props.handleKeyCommand(w,i))){var C=function(e,t){switch(e){case"redo":return o.redo(t);case"delete":return m(t);case"delete-word":return f(t);case"backspace":return v(t);case"backspace-word":return d(t);case"backspace-to-start-of-line":return l(t);case"split-block":return p(t);case"transpose-characters":return g(t);case"move-selection-to-start-of-block":return b(t);case"move-selection-to-end-of-block":return h(t);case"secondary-cut":return c.cut(t);case"secondary-paste":return c.paste(t);default:return t}}(w,i);C!==i&&e.update(C)}}else y(t,i,e.update)}},function(e,t,n){"use strict";var r=n(843),o=n(838),i=n(925),a=n(849),c=null,s={cut:function(e){var t=e.getCurrentContent(),n=e.getSelection(),s=null;if(n.isCollapsed()){var u=n.getAnchorKey(),l=t.getBlockForKey(u).getLength();if(l===n.getAnchorOffset())return e;s=n.set("focusOffset",l)}else s=n;s=a(s),c=i(t,s);var d=r.removeRange(t,s,"forward");return d===t?e:o.push(e,d,"remove-range")},paste:function(e){if(!c)return e;var t=r.replaceWithFragment(e.getCurrentContent(),e.getSelection(),c);return o.push(e,t,"insert-fragment")}};e.exports=s},function(e,t,n){"use strict";(function(t){var r=n(838),o=n(1232),i=n(1045),a=n(972),c=n(893);e.exports=function(e){var n=c(e,(function(e){var n=e.getSelection();if(n.isCollapsed()&&0===n.getAnchorOffset())return a(e,1);var r=t.getSelection().getRangeAt(0);return r=o(r),i(e,null,r.endContainer,r.endOffset,r.startContainer,r.startOffset).selectionState}),"backward");return n===e.getCurrentContent()?e:r.push(e,n,"remove-range")}}).call(this,n(100))},function(e,t,n){"use strict";var r=n(861),o=n(1044),i=n(837);function a(e,t){for(var n=1/0,r=1/0,o=-1/0,i=-1/0,a=0;a<e.length;a++){var c=e[a];0!==c.width&&1!==c.width&&(n=Math.min(n,c.top),r=Math.min(r,c.bottom),o=Math.max(o,c.top),i=Math.max(i,c.bottom))}return o<=r&&o-n<t&&i-r<t}function c(e){switch(e.nodeType){case Node.DOCUMENT_TYPE_NODE:return 0;case Node.TEXT_NODE:case Node.PROCESSING_INSTRUCTION_NODE:case Node.COMMENT_NODE:return e.length;default:return e.childNodes.length}}e.exports=function(e){e.collapsed||i(!1);var t=(e=e.cloneRange()).startContainer;1!==t.nodeType&&(t=t.parentNode);var n=function(e){var t=getComputedStyle(e),n=document.createElement("div");n.style.fontFamily=t.fontFamily,n.style.fontSize=t.fontSize,n.style.fontStyle=t.fontStyle,n.style.fontWeight=t.fontWeight,n.style.lineHeight=t.lineHeight,n.style.position="absolute",n.textContent="M";var r=document.body;r||i(!1),r.appendChild(n);var o=n.getBoundingClientRect();return r.removeChild(n),o.height}(t),s=e.endContainer,u=e.endOffset;for(e.setStart(e.startContainer,0);a(o(e),n)&&(s=e.startContainer,u=e.startOffset,s.parentNode||i(!1),e.setStartBefore(s),1!==s.nodeType||"inline"===getComputedStyle(s).display););for(var l=s,d=u-1;;){for(var f=l.nodeValue,p=d;p>=0;p--)if(!(null!=f&&p>0&&r.isSurrogatePair(f,p-1))){if(e.setStart(l,p),!a(o(e),n))break;s=l,u=p}if(-1===p||0===l.childNodes.length)break;d=c(l=l.childNodes[p])}return e.setStart(s,u),e}},function(e,t,n){"use strict";var r=n(1046),o=n(838),i=n(972),a=n(893);e.exports=function(e){var t=a(e,(function(e){var t=e.getSelection(),n=t.getStartOffset();if(0===n)return i(e,1);var o=t.getStartKey(),a=e.getCurrentContent().getBlockForKey(o).getText().slice(0,n),c=r.getBackward(a);return i(e,c.length||1)}),"backward");return t===e.getCurrentContent()?e:o.push(e,t,"remove-range")}},function(e,t,n){"use strict";e.exports={getPunctuation:function(){return"[.,+*?$|#{}()'\\^\\-\\[\\]\\\\\\/!@%\"~=<>_:;・、。〈-】〔-〟：-？！-／［-｀｛-･⸮؟٪-٬؛،؍﴾﴿᠁।၊။‐-‧‰-⁞¡-±´-¸º»¿]"}}},function(e,t,n){"use strict";var r=n(1046),o=n(838),i=n(1047),a=n(893);e.exports=function(e){var t=a(e,(function(e){var t=e.getSelection(),n=t.getStartOffset(),o=t.getStartKey(),a=e.getCurrentContent().getBlockForKey(o).getText().slice(n),c=r.getForward(a);return i(e,c.length||1)}),"forward");return t===e.getCurrentContent()?e:o.push(e,t,"remove-range")}},function(e,t,n){"use strict";var r=n(843),o=n(838);e.exports=function(e){var t=r.splitBlock(e.getCurrentContent(),e.getSelection());return o.push(e,t,"split-block")}},function(e,t,n){"use strict";var r=n(838);e.exports=function(e){var t=e.getSelection(),n=t.getEndKey(),o=e.getCurrentContent().getBlockForKey(n).getLength();return r.set(e,{selection:t.merge({anchorKey:n,anchorOffset:o,focusKey:n,focusOffset:o,isBackward:!1}),forceSelection:!0})}},function(e,t,n){"use strict";var r=n(838);e.exports=function(e){var t=e.getSelection(),n=t.getStartKey();return r.set(e,{selection:t.merge({anchorKey:n,anchorOffset:0,focusKey:n,focusOffset:0,isBackward:!1}),forceSelection:!0})}},function(e,t,n){"use strict";var r=n(838),o=n(861),i=n(972),a=n(893);e.exports=function(e){var t=a(e,(function(e){var t=e.getSelection(),n=e.getCurrentContent(),r=t.getAnchorKey(),a=t.getAnchorOffset(),c=n.getBlockForKey(r).getText()[a-1];return i(e,c?o.getUTF16Length(c,0):1)}),"backward");if(t===e.getCurrentContent())return e;var n=e.getSelection();return r.push(e,t.set("selectionBefore",n),n.isCollapsed()?"backspace-character":"remove-range")}},function(e,t,n){"use strict";var r=n(838),o=n(861),i=n(1047),a=n(893);e.exports=function(e){var t=a(e,(function(e){var t=e.getSelection(),n=e.getCurrentContent(),r=t.getAnchorKey(),a=t.getAnchorOffset(),c=n.getBlockForKey(r).getText()[a];return i(e,c?o.getUTF16Length(c,0):1)}),"forward");if(t===e.getCurrentContent())return e;var n=e.getSelection();return r.push(e,t.set("selectionBefore",n),n.isCollapsed()?"delete-character":"remove-range")}},function(e,t,n){"use strict";var r=n(843),o=n(838),i=n(925);e.exports=function(e){var t=e.getSelection();if(!t.isCollapsed())return e;var n=t.getAnchorOffset();if(0===n)return e;var a,c,s=t.getAnchorKey(),u=e.getCurrentContent(),l=u.getBlockForKey(s).getLength();if(l<=1)return e;n===l?(a=t.set("anchorOffset",n-1),c=t):c=(a=t.set("focusOffset",n+1)).set("anchorOffset",n+1);var d=i(u,a),f=r.removeRange(u,a,"backward"),p=f.getSelectionAfter(),h=p.getAnchorOffset()-1,b=p.merge({anchorOffset:h,focusOffset:h}),v=r.replaceWithFragment(f,b,d),m=o.push(e,v,"insert-fragment");return o.acceptSelection(m,c)}},function(e,t,n){"use strict";var r=n(838);e.exports=function(e,t,n){var o=r.undo(t);if("spellcheck-change"!==t.getLastChangeType())e.preventDefault(),t.getNativelyRenderedContent()?(n(r.set(t,{nativelyRenderedContent:null})),setTimeout((function(){n(o)}),0)):n(o);else{var i=o.getCurrentContent();n(r.set(o,{nativelyRenderedContent:i}))}}},function(e,t,n){"use strict";var r=n(890),o=n(844),i=n(1039),a=n(843),c=n(1244),s=n(838),u=n(1050),l=n(966),d=n(1041),f=n(892),p=n(1247);function h(e,t,n){var r=a.replaceWithFragment(e.getCurrentContent(),e.getSelection(),t);return s.push(e,r.set("entityMap",n),"insert-fragment")}e.exports=function(e,t){t.preventDefault();var n=new i(t.clipboardData);if(!n.isRichText()){var b=n.getFiles(),v=n.getText();if(b.length>0){if(e.props.handlePastedFiles&&f(e.props.handlePastedFiles(b)))return;return void d(b,(function(t){if(t=t||v){var n=e._latestEditorState,i=p(t),d=o.create({style:n.getCurrentInlineStyle(),entity:l(n.getCurrentContent(),n.getSelection())}),f=u.getCurrentBlockType(n),h=c.processText(i,d,f),b=r.createFromArray(h),m=a.replaceWithFragment(n.getCurrentContent(),n.getSelection(),b);e.update(s.push(n,m,"insert-fragment"))}}))}}var m=[],g=n.getText(),y=n.getHTML(),O=e._latestEditorState;if(!e.props.handlePastedText||!f(e.props.handlePastedText(g,y,O))){if(g&&(m=p(g)),!e.props.stripPastedStyles){var j=e.getClipboard();if(n.isRichText()&&j){if(-1!==y.indexOf(e.getEditorKey())||1===m.length&&1===j.size&&j.first().getText()===g)return void e.update(h(e._latestEditorState,j))}else if(j&&n.types.includes("com.apple.webarchive")&&!n.types.includes("text/html")&&function(e,t){return e.length===t.size&&t.valueSeq().every((function(t,n){return t.getText()===e[n]}))}(m,j))return void e.update(h(e._latestEditorState,j));if(y){var w=c.processHTML(y,e.props.blockRenderMap);if(w){var C=w.contentBlocks,k=w.entityMap;if(C){var S=r.createFromArray(C);return void e.update(h(e._latestEditorState,S,k))}}}e.setClipboard(null)}if(m.length){var x=o.create({style:O.getCurrentInlineStyle(),entity:l(O.getCurrentContent(),O.getSelection())}),R=u.getCurrentBlockType(O),E=c.processText(m,x,R),_=r.createFromArray(E);e.update(h(e._latestEditorState,_))}}}},function(e,t,n){"use strict";var r=n(91)||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=(n(844),n(860)),i=n(847),a=n(856),c=n(836),s=n(1048),u=n(855),l=n(1049),d=n(962),f=c.List,p=c.Repeat,h=a.draft_tree_data_support,b=h?i:o,v={processHTML:function(e,t){return s(e,l,t)},processText:function(e,t,n){return e.reduce((function(e,o,i){o=d(o);var a=u(),c={key:a,type:n,text:o,characterList:f(p(t,o.length))};if(h&&0!==i){var s=i-1,l=e[s]=e[s].merge({nextSibling:a});c=r({},c,{prevSibling:l.getKey()})}return e.push(new b(c)),e}),[])}};e.exports=v},function(e,t,n){"use strict";var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._uri=t}return e.prototype.toString=function(){return this._uri},e}();e.exports=r},function(e,t,n){"use strict";e.exports=function(e,t,n,r){var o=t.getStartKey(),i=t.getEndKey(),a=e.getBlockMap(),c=a.toSeq().skipUntil((function(e,t){return t===o})).takeUntil((function(e,t){return t===i})).concat([[i,a.get(i)]]).map((function(e){var t=e.getDepth()+n;return t=Math.max(0,Math.min(t,r)),e.set("depth",t)}));return a=a.merge(c),e.merge({blockMap:a,selectionBefore:t,selectionAfter:t})}},function(e,t,n){"use strict";var r=/\r\n?|\n/g;e.exports=function(e){return e.split(r)}},function(e,t,n){"use strict";var r=n(838),o=n(42),i=n(1249),a=n(837);e.exports=function(e){if(!e._blockSelectEvents&&e._latestEditorState===e.props.editorState){var t=e.props.editorState,n=o.findDOMNode(e.editorContainer);n||a(!1),n.firstChild instanceof HTMLElement||a(!1);var c=i(t,n.firstChild),s=c.selectionState;s!==t.getSelection()&&(t=c.needsRecovery?r.forceSelection(t,s):r.acceptSelection(t,s),e.update(t))}}},function(e,t,n){"use strict";(function(t){var r=n(1045);e.exports=function(e,n){var o=t.getSelection();return 0===o.rangeCount?{selectionState:e.getSelection().set("hasFocus",!1),needsRecovery:!1}:r(e,n,o.anchorNode,o.anchorOffset,o.focusNode,o.focusOffset)}}).call(this,n(100))},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var i=n(1),a=n(871),c=function(e){function t(){return r(this,t),o(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.shouldComponentUpdate=function(e){return this.props.text!==e.text||this.props.editorState.getSelection().getHasFocus()!==e.editorState.getSelection().getHasFocus()},t.prototype.render=function(){var e=this.props.editorState.getSelection().getHasFocus(),t=a({"public/DraftEditorPlaceholder/root":!0,"public/DraftEditorPlaceholder/hasFocus":e});return i.createElement("div",{className:t},i.createElement("div",{className:a("public/DraftEditorPlaceholder/inner"),id:this.props.accessibilityID,style:{whiteSpace:"pre-wrap"}},this.props.text))},t}(i.Component);e.exports=c},function(e,t,n){"use strict";var r=n(91)||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(860),i=n(847),a=n(1052),c=n(1252),s=n(1253),u=n(837),l=function(e,t){return{key:e.getKey(),text:e.getText(),type:e.getType(),depth:e.getDepth(),inlineStyleRanges:s(e),entityRanges:c(e,t),data:e.getData().toObject()}},d=function(e,t){var n=t.entityMap,c=[],s={},d={},f=0;return e.getBlockMap().forEach((function(e){e.findEntityRanges((function(e){return null!==e.getEntity()}),(function(t){var r=e.getEntityAt(t),o=a.stringify(r);d[o]||(d[o]=r,n[o]=""+f,f++)})),function(e,t,n,a){if(e instanceof o)n.push(l(e,t));else{e instanceof i||u(!1);var c=e.getParentKey(),s=a[e.getKey()]=r({},l(e,t),{children:[]});c?a[c].children.push(s):n.push(s)}}(e,n,c,s)})),{blocks:c,entityMap:n}};e.exports=function(e){var t={entityMap:{},blocks:[]};return t=function(e,t){var n=t.blocks,r=t.entityMap,o={};return Object.keys(r).forEach((function(t,n){var r=e.getEntity(a.unstringify(t));o[n]={type:r.getType(),mutability:r.getMutability(),data:r.getData()}})),{blocks:n,entityMap:o}}(e,t=d(e,t))}},function(e,t,n){"use strict";var r=n(1052),o=n(861).strlen;e.exports=function(e,t){var n=[];return e.findEntityRanges((function(e){return!!e.getEntity()}),(function(i,a){var c=e.getText(),s=e.getEntityAt(i);n.push({offset:o(c.slice(0,i)),length:o(c.slice(i,a)),key:Number(t[r.stringify(s)])})})),n}},function(e,t,n){"use strict";var r=n(861),o=n(891),i=function(e,t){return e===t},a=function(e){return!!e},c=[];e.exports=function(e){var t=e.getCharacterList().map((function(e){return e.getStyle()})).toList(),n=t.flatten().toSet().map((function(n){return function(e,t,n){var c=[],s=t.map((function(e){return e.has(n)})).toList();return o(s,i,a,(function(t,o){var i=e.getText();c.push({offset:r.strlen(i.slice(0,t)),length:r.strlen(i.slice(t,o)),style:n})})),c}(e,t,n)}));return Array.prototype.concat.apply(c,n.toJS())}},function(e,t,n){"use strict";var r=n(91)||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(860),i=n(847),a=n(961),c=n(926),s=n(856),u=n(1255),l=n(836),d=n(870),f=n(1256),p=n(1257),h=n(1258),b=n(855),v=n(837),m=s.draft_tree_data_support,g=l.List,y=l.Map,O=l.OrderedMap,j=function(e,t){var n=e.key,r=e.type,o=e.data;return{text:e.text,depth:e.depth||0,type:r||"unstyled",key:n||b(),data:y(o),characterList:w(e,t)}},w=function(e,t){var n=e.text,o=e.entityRanges,i=e.inlineStyleRanges,a=o||[];return f(h(n,i||[]),p(n,a.filter((function(e){return t.hasOwnProperty(e.key)})).map((function(e){return r({},e,{key:t[e.key]})}))))},C=function(e){return r({},e,{key:e.key||b()})},k=function(e,t,n){var o=t.map((function(e){return r({},e,{parentRef:n})}));return e.concat(o.reverse())},S=function(e,t){var n=Array.isArray(e.blocks[0].children),a=m&&!n?u.fromRawStateToRawTreeState(e).blocks:e.blocks;return m?function(e,t){return e.map(C).reduce((function(n,o,a){Array.isArray(o.children)||v(!1);var c=o.children.map(C),s=new i(r({},j(o,t),{prevSibling:0===a?null:e[a-1].key,nextSibling:a===e.length-1?null:e[a+1].key,children:g(c.map((function(e){return e.key})))}));n=n.set(s.getKey(),s);for(var u=k([],c,s);u.length>0;){var l=u.pop(),d=l.parentRef,f=d.getChildKeys(),p=f.indexOf(l.key),h=Array.isArray(l.children);if(!h){h||v(!1);break}var b=l.children.map(C),m=new i(r({},j(l,t),{parent:d.getKey(),children:g(b.map((function(e){return e.key}))),prevSibling:0===p?null:f.get(p-1),nextSibling:p===f.size-1?null:f.get(p+1)}));n=n.set(m.getKey(),m),u=k(u,b,m)}return n}),O())}(a,t):function(e,t){return O(e.map((function(e){var n=new o(j(e,t));return[n.getKey(),n]})))}(n?u.fromRawTreeStateToRawState(e).blocks:a,t)};e.exports=function(e){Array.isArray(e.blocks)||v(!1);var t=function(e){var t=e.entityMap,n={};return Object.keys(t).forEach((function(e){var r=t[e],o=r.type,i=r.mutability,a=r.data;n[e]=c.__create(o,i,a||{})})),n}(e),n=S(e,t),r=n.isEmpty()?new d:d.createEmpty(n.first().getKey());return new a({blockMap:n,entityMap:t,selectionBefore:r,selectionAfter:r})}},function(e,t,n){"use strict";var r=n(91)||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(837),i=function(e){if(!e||!e.type)return!1;var t=e.type;return"unordered-list-item"===t||"ordered-list-item"===t},a={fromRawTreeStateToRawState:function(e){var t=e.blocks,n=[];return Array.isArray(t)||o(!1),Array.isArray(t)&&t.length?(function(e,t){for(var n=[].concat(e).reverse();n.length;){var r=n.pop();t(r);var i=r.children;Array.isArray(i)||o(!1),n=n.concat([].concat(i.reverse()))}}(t,(function(e){var t=r({},e);i(e)&&(t.depth=t.depth||0,function(e){Array.isArray(e.children)&&(e.children=e.children.map((function(t){return t.type===e.type?r({},t,{depth:(e.depth||0)+1}):t})))}(e)),delete t.children,n.push(t)})),e.blocks=n,r({},e,{blocks:n})):e},fromRawStateToRawTreeState:function(e){var t={},n=[];return e.blocks.forEach((function(e){var a=i(e),c=e.depth||0,s=r({},e,{children:[]});if(!a)return t={},void n.push(s);if(t[c]=s,c>0){var u=t[c-1];return u||o(!1),void u.children.push(s)}n.push(s)})),r({},e,{blocks:n})}};e.exports=a},function(e,t,n){"use strict";var r=n(844),o=n(836).List;e.exports=function(e,t){var n=e.map((function(e,n){var o=t[n];return r.create({style:e,entity:o})}));return o(n)}},function(e,t,n){"use strict";var r=n(861).substr;e.exports=function(e,t){var n=Array(e.length).fill(null);return t&&t.forEach((function(t){for(var o=r(e,0,t.offset).length,i=o+r(e,t.offset,t.length).length,a=o;a<i;a++)n[a]=t.key})),n}},function(e,t,n){"use strict";var r=n(836).OrderedSet,o=n(861).substr,i=r();e.exports=function(e,t){var n=Array(e.length).fill(i);return t&&t.forEach((function(t){for(var r=o(e,0,t.offset).length,i=r+o(e,t.offset,t.length).length;r<i;)n[r]=n[r].add(t.style),r++})),n}},function(e,t,n){"use strict";var r=n(1260);e.exports=function(e){var t=e.getSelection();if(!t.rangeCount)return null;var n=t.getRangeAt(0),o=r(n),i=o.top,a=o.right,c=o.bottom,s=o.left;return 0===i&&0===a&&0===c&&0===s?null:o}},function(e,t,n){"use strict";var r=n(1044);e.exports=function(e){var t=r(e),n=0,o=0,i=0,a=0;if(t.length){if(t.length>1&&0===t[0].width){var c=t[1];n=c.top,o=c.right,i=c.bottom,a=c.left}else{var s=t[0];n=s.top,o=s.right,i=s.bottom,a=s.left}for(var u=1;u<t.length;u++){var l=t[u];0!==l.height&&0!==l.width&&(n=Math.min(n,l.top),o=Math.max(o,l.right),i=Math.max(i,l.bottom),a=Math.min(a,l.left))}}return{top:n,right:o,bottom:i,left:a,width:o-a,height:i-n}}},function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(18),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(e){return o.a.createElement(i.a,a({fill:"currentColor"},e),o.a.createElement("path",{d:"M4 6a2 2 0 0 1 2-2h5.75a.25.25 0 0 1 .25.25v1.5a.25.25 0 0 1-.25.25h-5.5a.25.25 0 0 0-.25.25v11.5c0 .138.112.25.25.25h11.5a.25.25 0 0 0 .25-.25v-5.5a.25.25 0 0 1 .25-.25h1.5a.25.25 0 0 1 .25.25V18a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6z",fillRule:"evenodd",clipRule:"evenodd"}),o.a.createElement("path",{d:"M18.293 1.293a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1 0 1.414l-10 10A1 1 0 0 1 12 16H9a1 1 0 0 1-1-1v-3a1 1 0 0 1 .293-.707l10-10zm-8.22 11.048a.25.25 0 0 0-.073.177v1.232c0 .138.112.25.25.25h1.232a.25.25 0 0 0 .177-.073l8.75-8.75a.25.25 0 0 0 0-.354l-1.232-1.232a.25.25 0 0 0-.354 0l-8.75 8.75z",fillRule:"evenodd",clipRule:"evenodd"}))};c.defaultProps={name:"EditSurround"},t.a=c},function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(18),a=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M12 13L8.285 9.218a.758.758 0 0 0-1.064 0 .738.738 0 0 0 0 1.052l4.249 4.512a.758.758 0 0 0 1.064 0l4.246-4.512a.738.738 0 0 0 0-1.052.757.757 0 0 0-1.063 0L12.002 13z",fillRule:"evenodd"}))};a.defaultProps={name:"ArrowDown"},t.a=a},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(1),o=n(133),i=n(25),a=n(1302),c={Question:"8413324000",Analytics:"0513324000"};t.b=function(e){var t=Object(i.useDispatch)(),n=Object(i.useSelector)((function(t){return Object(o.Wb)(t,e)})),c=Object(a.a)(["isCreator"]).isCreator;return Object(r.useEffect)((function(){c&&t(Object(o.C)(e))}),[t,e,c]),n}},function(e,t,n){"use strict";var r=n(1),o=n(588),i="element",a="text",c="empty",s="fragment",u=function(e,t){return function e(n){var o,u=n.node;return n.type=(o=u,r.isValidElement(o)?i:function(e){return"string"==typeof e||"number"==typeof e}(o)?a:function(e){return null==e||"boolean"==typeof e}(o)?c:Array.isArray(o)?s:void 0),n.type===i?n.children=r.Children.map(u.props.children,(function(t){return e({node:t,parent:n})})):n.type===s&&(n.children=r.Children.map(u,(function(t){return e({node:t,parent:n})}))),t(n),n}({node:e,parent:null})},l=function e(t,n){return[t].concat(null==(r=n(t))?[]:function(t){return e(t,n)}(r));var r},d=function(e){var t=!1;return e.reduce((function(e,n){if(e&&n&&o(String(e.node),String(n.node))){var r=(c=n,s=l(e,(function(e){return e.parent})),u=l(c,(function(e){return e.parent})),d=s.findIndex((function(e){return u.includes(e)})),[s[d],s[d-1]]);a=r[1],(i=r[0]).children.splice(i.children.indexOf(a)+1,0,{node:" "}),t=!0}var i,a,c,s,u,d;return n})),t},f=function(e){if(!e)return null;var t=[],n=u(e,(function(e){e.type===a&&""!==e.node&&t.push(e)}));return t.length&&d(t)?function e(t){return Array.isArray(t.children)?t.type===s?r.Children.map(t.children.map(e),(function(e){return e})):r.createElement(t.node.type,t.node.props,r.Children.map(t.children.map(e),(function(e){return e}))):t.node}(n):e},p=function(e){var t=e.component,n=e.children;return r.createElement(t,{children:f(n)})};p.defaultProps={component:r.Fragment||"span"},t.CJKSpace=p},function(e,t,n){"use strict";n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return v}));var r=n(7),o=n(210),i=n.n(o),a=n(35),c=n.n(a),s=n(264),u=n(84),l=n(85),d=Object(s.a)("DraftOutline"),f=function(e){return e.map((function(e){var t=e.musicId,n=e.categoryId,r=e.originDuration,o=e.volume,a=e.isMine;return i()({id:t,volume:o,duration:r,categoryId:n,source:a?"member_upload":"qqmusic"})}))},p=function(e){var t=Object(u.x)(e),n=Object(u.b)(e),r=Object(u.bb)(e);return t.map((function(e){var t=e.materialId,o=e.assetUrl,a=e.materialType,c=e.isEmptySlot,s=e.coverAudioIndex,u=s.startIndex,d=s.endIndex;return{media:c?[]:[i()({id:t,url:o,type:a===l.b.VIDEO?"video":"static"})],sentences:n.slice(u,d+1).map((function(e){var t=e.text,n=e.voiceOver,o=null==r?void 0:r[null==n?void 0:n.id];return{sentence:t,reader:{type:o?"video"===o.type?"record_video":"record":"ai",speed:(null==o?void 0:o.playbackRate)||1}}}))}}))},h=function(e){return"vessay_outline:".concat(e)},b=function(e,t){return c.a.set(h(e),function(e){var t=e.vessay,n=t.common,o=n.draftId,i=n.source,a=i.type,c=i.id,s=t.track.trackData.musicTrack,u=Object(r.decamelizeKeys)({data:p(e),extra:{draftId:o},source:{type:"".concat(a,"s"),id:c},backgroundMusics:f(s)});return d(u),u}(t))},v=function(e){var t=h(e),n=c.a.get(h(e));return c.a.delete(t),n}},,function(e,t,n){e.exports=n.p+"assets/background_blue.dc578fa3.svg"},,function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(1),o=n.n(r),i=n(131),a=Object.assign;var c=function(e){return o.a.createElement(i.a,a({width:"1.2em",height:"1.2em",viewBox:"0 0 24 24"},e),o.a.createElement("path",{d:"M19.027 10c.239.01 1.973.138 1.973 2l-.001 8.027c-.009.24-.137 1.973-2 1.973H5.003C3.138 22 3.009 20.266 3 20.027V12c0-1.862 1.733-1.99 1.972-2zm-8.481 3.004c-.475-.277-.86-.064-.86.5V18.5c0 .553.394.773.86.5l4.278-2.496c.475-.277.466-.731 0-1.003zM18 2a2 2 0 012 2v1.134a1 1 0 011.207 1.573l-1.5 1.5a1 1 0 01-1.414 0l-1.5-1.5A1 1 0 0118 5.134V4h-2a1 1 0 110-2h2zm-8 4a1 1 0 010 2H4a1 1 0 110-2h6zm2-4a1 1 0 010 2H4a1 1 0 110-2h8z",fillRule:"evenodd"}))}},function(e,t,n){"use strict";function r(e,t){return"https://www.zhihu.com/vessay/editor?type=".concat(e,"&id=").concat(t)}n.d(t,"a",(function(){return r}))},,function(e,t,n){"use strict";var r=n(13),o=n(14),i=n(15),a=n(16),c=n(9),s=n(2),u=n(1),l=n.n(u),d=n(25),f=n(3),p=n.n(f),h=n(11),b=n.n(h),v=n(19),m=n(376),g=n(370),y=n(136),O=n(1158),j=n(40),w=n(30),C=n(74),k=n(66),S=n(373),x=n(61),R="3d198a56310c02c4a83efb9f4a4c027e",E=["https://www.zhihu.com/staffService/"+R];var _=Object(u.createContext)({showModal:!1,setShowModal:function(){return null}});function A(e){var t=e.item,n=e.selected,r=e.onClick,o=Object(k.c)((function(){return r(t)}));return Object(s.b)(w.c,{label:t.name,color:n?w.a.Blue:w.a.Grey,preset:w.b.Secondary,css:{marginRight:"8px"},onClick:o},t.id)}function T(e){var t=e.senderId,n=e.showModal,r=e.onClose,o=Object(u.useState)([]),i=Object(j.a)(o,2),a=i[0],c=i[1],l=Object(u.useState)(null),f=Object(j.a)(l,2),p=f[0],h=f[1],b=Object(d.useDispatch)(),v=Object(S.b)();Object(u.useEffect)((function(){n&&v("/api/v4/customer_service/question_tag",{ignoreCode:!0}).then((function(e){var t;c((null===(t=e.payload)||void 0===t?void 0:t.data)||[])})).catch((function(){return null}))}),[n,v]);var m=Object(k.c)(Object(k.b)((function(e){v("/api/v4/customer_service/choose_question_tag",{method:"POST",body:{adminId:R,tagId:e.id},ignoreCode:!0}).catch((function(){return null})),b(Object(y.p)({contentType:x.a.text,receiverId:t,data:{text:e.name}})),r(),h(null)}),300)),g=Object(k.c)((function(e){h(e.id),m(e)}));return Object(s.b)(C.b,{css:{width:"694px",".Modal-content":{padding:"0 0 55px 0",marginTop:0}},onClose:r,children:n&&Object(s.c)(s.a,{children:[Object(s.b)("div",{css:function(e){return{padding:"12px 0 10px 20px",fontSize:"20px",lineHeight:"28px",borderBottom:"1px solid "+e.colors.GBK09A,color:e.colors.GBK02A}},children:"选个问题类型，小管家为你解答"}),a.map((function(e){return Object(s.c)(u.Fragment,{children:[Object(s.b)("div",{css:function(e){return{marginTop:"20px",paddingLeft:"20px",fontSize:"15px",lineHeight:"18px",color:e.colors.GBK03A}},children:e.categoryName}),Object(s.b)("div",{css:{marginTop:"16px",paddingLeft:"20px"},children:e.items.map((function(e){return Object(s.b)(A,{item:e,selected:p===e.id,onClick:g},e.id)}))})]},e.categoryId)}))]})})}var N=n(0),I=n(1279),M=n(175),D=n(240),L=n(978),P=n(945),z=n(243),B=n(1162),F=n(924),U=n(90),q=n(28),V=function(e){var t=e.message,n=Object(u.useRef)(),r=Object(u.useState)(!1),o=Object(j.a)(r,2),i=o[0],a=o[1];return Object(s.b)(U.Text,{ref:n,color:i?"inherit":"primary",css:{cursor:i?"text":"pointer"},onClick:function(){i||(a(!0),q.a.trackEvent(n.current,{action:"Click",id:6880}))},dangerouslySetInnerHTML:{__html:i?t.richText||t.text:t.extraContent}})};var H=function(e){var t=e.message,n=e.senderId,r=e.sendMessage,o=Object(k.c)((function(e){if("A"===e.target.tagName&&e.target.href){var t=e.target.href,o=Object(F.parse)(t.split("?")[1]).message,i=t.match(/www.zhihu.com\/inbox\/([\d\w]+)/);(null==i?void 0:i[1])&&n===i[1]&&(e.preventDefault(),r({contentType:x.a.text,receiverId:n,data:{text:o}}))}}));return Object(s.b)("div",{className:b()("TextMessage",{"TextMessage-sender":"sender"===t.userType,"TextMessage-receiver":"receiver"===t.userType}),children:t.unfriendly&&"sender"===t.userType?Object(s.b)(V,{message:t}):Object(s.b)(U.Text,{onClick:o,dangerouslySetInnerHTML:{__html:t.richText||t.text}})})},K=n(873),Q=n(150);function W(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var G=function(e){Object(i.a)(n,e);var t=W(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={previewImg:null,imageUrl:e.props.image.url},e.getImageStyle=function(){var t=e.props.image,n=t.width,r=t.height,o=r/n;return r>x.d||n>x.d?o>1?{height:"".concat(x.d,"px"),minWidth:"".concat(x.g,"px")}:o<1?{width:"".concat(x.d,"px"),minHeight:"".concat(x.g,"px"),height:x.d*o}:{height:"".concat(x.d,"px"),width:"".concat(x.d,"px")}:{maxWidth:"".concat(x.d,"px"),maxHeight:"".concat(x.d,"px"),width:n,height:r}},e.isTempUrl=function(e){return e.startsWith("blob")},e.handleImageClick=function(t){var n=e.state.imageUrl;e.isTempUrl(n)||e.setState({previewImg:t.target})},e}return Object(o.a)(n,[{key:"componentDidUpdate",value:function(){var e=this,t=this.props.image.url,n=this.state.imageUrl;t!==n&&Object(Q.loadImage)(t).then((function(){e.setState({imageUrl:t}),URL.revokeObjectURL(n)}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.imageUrl,r=t.previewImg;return Object(s.c)("div",{children:[Object(s.b)("img",{className:b()("ImageMessage",{"ImageMessage--temp":this.isTempUrl(n)}),src:Object(Q.imgUrl)(n,"hd"),onClick:this.handleImageClick,style:this.getImageStyle()}),r&&Object(s.b)(K.a,{className:"ImageMessage-ImageView",img:r,onClose:function(){return e.setState({previewImg:null})}})]})}}]),n}(u.Component);function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}G.propTypes={image:p.a.shape({width:p.a.number,height:p.a.number,url:p.a.string})};var Y=function(e){Object(i.a)(n,e);var t=Z(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props.sticker.url;return Object(s.b)("img",{className:"StickerMessage",src:Object(Q.imgUrl)(e,"xl")})}}]),n}(u.Component);Y.propTypes={sticker:p.a.shape({id:p.a.string,url:p.a.string})};var J=n(7),$=n(946),X=n(234),ee=n(859),te=function(e){var t=e.result,n=e.isInMessage,r=e.onClick,o=t.name,i=t.coverPath,a=void 0===i?"https://i1.wp.com/pic4.zhimg.com/80/v2-231f5c4e7db8b6c08493a220be85705e_hd.png?ssl=1":i,c=t.className,s=void 0===c?"":c,u=t.intro;return l.a.createElement("div",{className:b()("KfeCollection-MessageEventCard",s,{"KfeCollection-MessageEventCard--InMessage":n}),onClick:r},l.a.createElement("img",{src:a,className:"KfeCollection-MessageEventCard-cover"}),l.a.createElement("div",{className:"KfeCollection-MessageEventCard-content"},l.a.createElement("div",{className:"KfeCollection-MessageEventCard-title"},o),l.a.createElement("div",{className:"KfeCollection-MessageEventCard-text"},u)))},ne=function(e){var t=e.result,n=e.onClick,r=e.isInMessage,o=void 0!==r&&r,i=e.hasClickZA,a=void 0===i||i,c=t.token,s=t.id;return l.a.createElement(X.b,{block:"EcomMessageEventCard",content:{type:ee.e.event,id:s}},l.a.createElement(X.e,{shouldTrackClick:a,zaType:"Card",zaAction:"Unknown",zaText:"留资卡片",zaEventType:"Unknown",onClick:function(e){a&&q.a.trackEvent(e.target,{id:o?9970:10048,action:"Click",name:"留资卡片"}),n(c)}},l.a.createElement($.a,{options:[{},o?{card:{content:{id:String(s)}}}:{},{id:o?9968:10046,name:"留资卡片"}]},l.a.createElement(te,{result:t,isInMessage:o}))))};ne.propTypes={className:p.a.string,result:p.a.object.isRequired,extra:p.a.shape({ua:p.a.object,theme:p.a.string}).isRequired};var re=ne,oe=n(57),ie=n.n(oe),ae=n(128),ce=n(587);function se(){return(se=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ue(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var le,de=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(le=ce.props)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(le)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}(),["sx","variant"]),fe=new RegExp("^(".concat(de.join("|"),")$")),pe=/^m[trblxy]?$/,he=function(e){return function(t){var n={};for(var r in t)e(r||"")&&(n[r]=t[r]);return n}},be=he((function(e){return fe.test(e)})),ve=he((function(e){return pe.test(e)})),me=he((function(e){return!pe.test(e)})),ge=function(e){e.size;var t=ue(e,["size"]);return l.a.createElement(ae.Box,se({as:"svg",xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentcolor"},t))},ye=(Object(u.forwardRef)((function(e,t){return l.a.createElement(ae.Flex,se({ref:t,as:"label",tx:"forms",variant:"label"},e,{__css:{width:"100%"}}))})),Object(u.forwardRef)((function(e,t){return l.a.createElement(ae.Box,se({ref:t,as:"input",type:"text",tx:"forms",variant:"input"},e,{__css:{display:"block",width:"100%",p:2,appearance:"none",fontSize:"inherit",lineHeight:"inherit",border:"1px solid",borderRadius:"default",color:"inherit",bg:"transparent"}}))}))),Oe=function(e){return l.a.createElement(ge,e,l.a.createElement("path",{d:"M7 10l5 5 5-5z"}))},je=(Object(u.forwardRef)((function(e,t){return l.a.createElement(ae.Flex,ve(e),l.a.createElement(ae.Box,se({ref:t,as:"select",tx:"forms",variant:"select"},me(e),{__css:{display:"block",width:"100%",p:2,appearance:"none",fontSize:"inherit",lineHeight:"inherit",border:"1px solid",borderRadius:"default",color:"inherit",bg:"transparent"}})),l.a.createElement(Oe,{sx:{ml:-28,alignSelf:"center",pointerEvents:"none"}}))})),Object(u.forwardRef)((function(e,t){return l.a.createElement(ae.Box,se({ref:t,as:"textarea",tx:"forms",variant:"textarea"},e,{__css:{display:"block",width:"100%",p:2,appearance:"none",fontSize:"inherit",lineHeight:"inherit",border:"1px solid",borderRadius:"default",color:"inherit",bg:"transparent"}}))})),function(e){return l.a.createElement(ge,e,l.a.createElement("path",{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}))}),we=function(e){return l.a.createElement(ge,e,l.a.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}))},Ce=function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(je,se({},e,{__css:{display:"none","input:checked ~ &":{display:"block"}}})),l.a.createElement(we,se({},e,{__css:{display:"block","input:checked ~ &":{display:"none"}}})))},ke=(Object(u.forwardRef)((function(e,t){var n=e.className,r=e.sx,o=e.variant,i=void 0===o?"radio":o,a=ue(e,["className","sx","variant"]);return l.a.createElement(ae.Box,null,l.a.createElement(ae.Box,se({ref:t,as:"input",type:"radio"},a,{sx:{position:"absolute",opacity:0,zIndex:-1,width:1,height:1,overflow:"hidden"}})),l.a.createElement(ae.Box,se({as:Ce,"aria-hidden":"true",tx:"forms",variant:i,className:n,sx:r},be(a),{__css:{mr:2,borderRadius:9999,color:"gray","input:checked ~ &":{color:"primary"},"input:focus ~ &":{bg:"highlight"}}})))})),function(e){return l.a.createElement(ge,e,l.a.createElement("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}))}),Se=function(e){return l.a.createElement(ge,e,l.a.createElement("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}))},xe=function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(ke,se({},e,{__css:{display:"none","input:checked ~ &":{display:"block"}}})),l.a.createElement(Se,se({},e,{__css:{display:"block","input:checked ~ &":{display:"none"}}})))},Re=(Object(u.forwardRef)((function(e,t){var n=e.className,r=e.sx,o=e.variant,i=void 0===o?"checkbox":o,a=ue(e,["className","sx","variant"]);return l.a.createElement(ae.Box,null,l.a.createElement(ae.Box,se({ref:t,as:"input",type:"checkbox"},a,{sx:{position:"absolute",opacity:0,zIndex:-1,width:1,height:1,overflow:"hidden"}})),l.a.createElement(ae.Box,se({as:xe,"aria-hidden":"true",tx:"forms",variant:i,className:n,sx:r},be(a),{__css:{mr:2,borderRadius:4,color:"gray","input:checked ~ &":{color:"primary"},"input:focus ~ &":{color:"primary",bg:"highlight"}}})))})),Object(u.forwardRef)((function(e,t){var n=se({},e);return l.a.createElement(ae.Box,se({ref:t,as:"input",type:"range",tx:"forms",variant:"slider"},n,{__css:{display:"block",width:"100%",height:4,my:2,cursor:"pointer",appearance:"none",borderRadius:9999,color:"inherit",bg:"gray",":focus":{outline:"none",color:"primary"},"&::-webkit-slider-thumb":{appearance:"none",width:16,height:16,bg:"currentcolor",border:0,borderRadius:9999,variant:"forms.slider.thumb"}}}))})),Object(u.forwardRef)((function(e,t){var n=e.checked,r=ue(e,["checked"]);return l.a.createElement(ae.Box,se({ref:t,as:"button",type:"button",role:"switch",tx:"forms",variant:"switch","aria-checked":n},r,{__css:{appearance:"none",m:0,p:0,width:40,height:24,color:"primary",bg:"transparent",border:"1px solid",borderColor:"primary",borderRadius:9999,"&[aria-checked=true]":{bg:"primary"},":focus":{outline:"none",boxShadow:"0 0 0 2px"}}}),l.a.createElement(ae.Box,{"aria-hidden":!0,style:{transform:n?"translateX(16px)":"translateX(0)"},sx:{mt:"-1px",ml:"-1px",width:24,height:24,borderRadius:9999,border:"1px solid",borderColor:"primary",bg:"background",transitionProperty:"transform",transitionTimingFunction:"ease-out",transitionDuration:"0.1s",variant:"forms.switch.thumb"}}))})),function(e){var t=e.className,n=void 0===t?"":t,r=e.eventData,o=e.onClose,i=e.onSubmit,a=e.extra,c=r.token,s=r.name,d=r.intro,f=r.submitText,p=a.originPhone,h=Object(u.useState)(p),v=ie()(h,2),m=v[0],g=v[1],y=function(e){q.a.trackEvent(e.target,{id:9972,action:"Submit"}),i({token:c,phone:m})};return l.a.createElement(X.b,{block:"EcomMessageEventModal",content:{type:ee.e.event}},l.a.createElement(X.e,{zaText:"留资卡片",zaType:"Popup"},l.a.createElement($.a,{options:[{},{},{id:9971,name:"留资卡片"}]},l.a.createElement(C.b,{title:s,onClose:o,className:b()("KfeCollection-MessageEventModal",n),key:c},l.a.createElement("div",{className:"KfeCollection-MessageEventModal-intro"},d),l.a.createElement(ye,{className:"KfeCollection-MessageEventModal-phone",placeholder:"点击输入用户手机号码",value:m,onChange:function(e){g(e.target.value)},fontSize:"14px",color:"GBK02A",width:"100%"}),l.a.createElement("div",{className:"KfeCollection-MessageEventModal-buttonGroup"},l.a.createElement(X.a,{zaType:"Button",zaAction:"Unknown",zaText:"取消",onClick:function(e){q.a.trackEvent(e.target,{id:9972,action:"Cancel"}),o()}},l.a.createElement(w.c,{className:"KfeCollection-MessageEventModal-cancelButton"},"取消")),m?l.a.createElement(X.a,{zaType:"Button",zaAction:"Unknown",zaText:f||"确认报名"},l.a.createElement(w.c,{onClick:y,preset:w.b.Primary,color:w.a.Blue,type:"submit"},f||"确认报名")):l.a.createElement(w.c,{onClick:y,disabled:!m,preset:w.b.Primary,color:w.a.Blue,type:"submit"},f||"确认报名"))))))});Re.propTypes={className:p.a.string,eventData:p.a.object.isRequired,extra:p.a.shape({ua:p.a.object,theme:p.a.string,originPhone:p.a.any}).isRequired,onClose:p.a.func,onSubmit:p.a.func};var Ee=Re,_e=n(1093),Ae=n(26),Te=function(e){var t=e.senderId,n=e.message,r=e.isEcomMerchant,o=Object(d.useDispatch)(),i=Object(d.useSelector)((function(e){var t;return null===(t=e.account.accountInfo)||void 0===t?void 0:t.phoneNo})),a=Object(u.useState)({}),c=Object(j.a)(a,2),l=c[0],f=c[1],p=Object(u.useState)(!1),h=Object(j.a)(p,2),b=h[0],v=h[1],m=Object(u.useMemo)((function(){return Object(J.camelizeKeys)(n)}),[n]),g=m.ecomCard,O=void 0===g?{}:g,w=Object(u.useMemo)((function(){return function(e){var t,n=e.data,r=void 0===n?{}:n,o=e.title;return{cardData:Object.assign({},r,{name:r.name||o,coverPath:r.cover}),sendModalData:Object.assign({},r,{name:r.name||o,submitText:null==r||null===(t=r.formFields)||void 0===t?void 0:t.submitText})}}(O)}),[O]),C=function(){v(!1)};return Object(s.c)(s.a,{children:[1===O.cardType&&Object(s.b)(re,{result:Object.assign({},w.cardData,{id:m.id}),extra:{},isInMessage:!0,hasClickZA:!r||r&&"sender"===n.userType,onClick:function(){return e={type:"event",info:w.sendModalData,camelMessage:m},t=e.info,void(r&&"receiver"===n.userType?o(Object(Ae.h)("商家不能参与自己发起的活动哦")):(f(Object.assign({},t)),v(!0)));var e,t}}),2===O.cardType&&Object(s.b)(H,{message:Object.assign({},n,{text:"web 上暂不支持优惠券消息，请至 app 查看"})}),b&&Object(s.b)(Ee,{eventData:l,extra:{originPhone:i},onSubmit:function(e){return function(e){var n=e.cardType,r=e.modalData;if(1===n){var i=r.token,a=r.phone,c={receiverId:t,phone:a};o(Object(y.o)({contentType:"ecomcard",token:i,data:c})).then((function(){C()})).catch(_e.a)}}({cardType:1,modalData:e})},onClose:C})]})},Ne=n(368),Ie=function(e){return new RegExp(/https:\/\/www.zhihu.com\/inbox\/+[\s\S]*?is_ecom=1/).test(e)};var Me=function(e){var t=e.senderId,n=e.message,r=e.isEcomMerchant,o=void 0!==r&&r,i=Object(d.useDispatch)(),a=Object(X.i)().trackEvent,c=Object(u.useState)(""),l=Object(j.a)(c,2),f=l[0],p=l[1],h=Object(k.c)((function(e){if(!e)return"";var t=(new DOMParser).parseFromString(e,"text/html"),n=t.querySelectorAll("a");if(!n.length)return"";n.forEach((function(e){Ie(e.href)&&e.setAttribute("data-za-not-track-link",!0)})),p(t.querySelector("body").innerHTML)}));Object(u.useEffect)((function(){h(n.richText||n.text)}),[h,n]);var v=Object(k.c)((function(e){var r,c,s,u,l=e.target,d=l.tagName,f=l.href;if("A"===d){if(f&&!Ie(f))return;if(e.stopPropagation(),e.preventDefault(),o&&"receiver"===n.userType)return void i(Object(Ae.h)("您不可以点击自己的卡片哦"));q.a.trackEvent(e.target,{id:9969,action:"Click",name:"欢迎语卡片"},{module:[{card:{content:{type:"Message",id:String(n.id)}}}]}),a({block:"EcomWelcome",action:"Unknown",eventType:"Click",elementLocation:{type:"Text",content:{type:"Message",id:n.id}}}),r=e,s=n.id,u=n.contentType,i(Object(y.p)({contentType:u,receiverId:t,data:(c={},Object(N.a)(c,u,n[u]),Object(N.a)(c,"text",r.target.text||"问题等待配置"),c),tempMessageId:s}))}}));return Object(s.b)("div",{className:b()("TextMessage","EcomWelcomeTextMessage",{"TextMessage-sender":"sender"===n.userType,"TextMessage-receiver":"receiver"===n.userType}),children:Object(s.b)(X.b,{block:"MessageEcomWelcomeCard",content:{type:"Message",id:n.id},children:Object(s.b)(X.e,{zaType:"Card",zaAction:"Unknown",zaText:"交付欢迎语卡片",zaEventType:"Unknown",onClick:v,children:Object(s.b)(Ne.a,{trackCardShow:!0,view:{id:9968,name:"欢迎语卡片"},extra:{module:[{card:{content:{id:String(n.id)}}}]},children:Object(s.b)(U.Text,{dangerouslySetInnerHTML:{__html:f}})})})})})},De=n(176),Le=function(e){return(new Date).getTime()-Number(e)<864e5?Object(De.toSmartString)(e):Object(De.toAbsoluteDateTimeString)(e)},Pe=function(e){var t=e.time;if(!t)return null;var n=new Date(t);return Object(s.b)("time",{dateTime:n.toISOString(),children:Le(n)})},ze=Object(u.memo)(Pe),Be=function(e){var t=e.message,n=e.onRequestReport,r=e.onRequestBlock,o=Object(u.useRef)(),i=Object(u.useContext)(_),a=i.showModal,c=i.setShowModal;return Object(s.b)(U.Text,{ref:o,m:"20px auto",p:"10px 12px",bg:"GBK10A",color:"GBK07A",maxWidth:388,minHeight:40,fontSize:12,sx:{lineHeight:"20px",borderRadius:"8px",a:{color:"primary"}},dangerouslySetInnerHTML:{__html:Object(u.useMemo)((function(){return t.text.replace("https://www.zhihu.com/report?report_location=1","#report").replace("http://www.zhihu.com/defriend","#block")}),[t.text])},onClick:function(e){var t=e.target.href;t&&(e.preventDefault(),n&&t.endsWith("#report")?(n(),q.a.trackEvent(o.current,{action:"Click",id:6882})):r&&t.endsWith("#block")?(r(),q.a.trackEvent(o.current,{action:"Click",id:6883})):!function(e){return E.includes(e)}(t)?window.open(t,"_blank"):a||c(!0))}})},Fe=n(1169);function Ue(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var qe=function(e){Object(i.a)(n,e);var t=Ue(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).ref=Object(u.createRef)(),e.state={isMoreActionMenuShow:!1,isReportModalShow:!1,isShieldUserModalShown:!1},e.handleDocClick=function(t){e.state.isMoreActionMenuShow&&e.ref.current&&!e.ref.current.contains(t.target)&&(t.stopPropagation(),t.preventDefault(),e.setState({isMoreActionMenuShow:!1}))},e.toggleMoreActionMenu=function(){e.setState({isMoreActionMenuShow:!e.state.isMoreActionMenuShow})},e.handleMessageDelete=function(){var t=e.props,n=t.deleteMessage,r=t.message.id,o=t.sender.id;M.a.confirm(Object(s.b)("div",{style:{textAlign:"center"},children:"是否删除该条消息"}),{title:"删除消息"}).then((function(){return n(r,o)}),(function(){}))},e.handleReSendMessage=function(){var t=e.props,n=t.deleteLocalMessage,r=t.sender.id,o=t.sendMessage,i=t.message,a=i.id,c=i.contentType;if(c!==x.a.ecomcard)if(c!==x.a.image)n(a,r),o({contentType:c,receiverId:r,data:Object(N.a)({},c,i[c]),tempMessageId:a});else{var s=i.image.url;if(s.startsWith("blob")){var u=i.file,l=e.props,d=l.uploadImage,f=l.setImageSendFailure,p=a;d(u).then((function(e){return o({contentType:x.a.image,receiverId:r,data:{image:{height:e.payload.dataRawheight,width:e.payload.dataRawwidth,url:e.payload.src}},tempMessageId:p})})).then((function(){URL.revokeObjectURL(s)})).catch((function(){f({tempMessageId:p,receiverId:r,file:u})}))}else o({contentType:c,receiverId:r,data:Object(N.a)({},c,i[c]),tempMessageId:a})}},e.handleReSendIconClick=function(){M.a.confirm(null,{title:"是否重新发送消息"}).then((function(){e.handleReSendMessage()}),(function(){}))},e.renderMessage=function(t){var n=e.props,r=n.sender.id,o=n.isEcomMerchant,i=n.sendMessage,a=t.isEcomWelcomeCard;return t.contentType===x.a.text?a?Object(s.b)(Me,{senderId:r,message:t,isEcomMerchant:o}):Object(s.b)(H,{message:t,senderId:r,sendMessage:i}):t.contentType===x.a.image?Object(s.b)(G,{image:t.image}):t.contentType===x.a.sticker?Object(s.b)(Y,{sticker:t.sticker}):t.contentType===x.a.ecomcard?Object(s.b)(Te,{senderId:r,message:t,isEcomMerchant:o}):"web 上暂不支持此类消息，请至 app 查看"},e.toggleReportModal=function(){e.setState({isReportModalShow:!e.state.isReportModalShow})},e.renderMessageStatus=function(t){if(t===x.e.success){var n=e.state.isMoreActionMenuShow,r="receiver"===e.props.message.userType;return Object(s.b)("div",{className:"Message-status--wrapper",children:Object(s.b)(Fe.a,{ref:e.ref,isOpen:n,onToggleMenu:e.toggleMoreActionMenu,onDeleteClick:e.handleMessageDelete,onReportClick:e.toggleReportModal,showReport:!r})})}return t===x.e.loading?Object(s.b)(P.a,{className:"Message-status--loading"}):t===x.e.failure?Object(s.b)(I.a,{className:"Message-status--failure",onClick:e.handleReSendIconClick}):null},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("click",this.handleDocClick)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleDocClick)}},{key:"render",value:function(){var e=this,t=this.props,n=t.message,r=t.sender,o=t.receiver,i=n.type,a=n.userType,c=n.status,u=n.showTime,l=n.createdTime,d=n.id,f=this.state,p=f.isReportModalShow,h=f.isShieldUserModalShown,v=Object(s.b)(s.a,{children:u&&Object(s.b)("p",{className:"Message-time",children:Object(s.b)(ze,{time:l})})});if("risk_tip"===i||"tip"===i)return Object(s.c)(s.a,{children:[v,p&&Object(s.b)(z.a,{type:"message",urlToken:n.associateId,shown:!0,onClose:this.toggleReportModal}),h&&Object(s.b)(B.a,{shown:h,onClose:function(){return e.setState({isShieldUserModalShown:!1})},user:r}),Object(s.b)(Be,{message:n,onRequestReport:this.toggleReportModal,onRequestBlock:function(){e.setState({isShieldUserModalShown:!0})}})]});var m="receiver"===a?o:r;return Object(s.c)("div",{className:"Message-wrapper",children:[v,p&&Object(s.b)(z.a,{type:"message",urlToken:d,shown:!0,onClose:this.toggleReportModal}),Object(s.c)("div",{className:b()("Message",{"Message--reverse":"receiver"===a}),children:[Object(s.b)(L.a,{user:m,size:40}),Object(s.c)("div",{className:b()("Message-content",{"Message-content--reverse":"receiver"===a}),children:[this.renderMessage(n),Object(s.b)("div",{className:"Message-status",children:this.renderMessageStatus(c)})]})]})]})}}]),n}(u.Component);qe.propsTypes={message:p.a.object,sender:p.a.object,receiver:p.a.object};var Ve=Object(d.connect)(null,{deleteMessage:y.f,deleteLocalMessage:y.e,sendMessage:y.p,setImageSendFailure:y.q,uploadImage:D.b})(qe);function He(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var Ke=function(e){Object(i.a)(n,e);var t=He(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={showQuestionTagModal:!1},e.scrollToBottom=function(){e.messageBoxEle.scrollTop=e.messageBoxEle.scrollHeight},e.handleGetHistoryMessage=function(t){var n=e.props,r=n.isLoading,o=n.nextApiUrl,i=n.getHistoryMessages,a=n.senderId,c=n.isEnd;!t||r||c||i({senderId:a,nextApiUrl:o})},e.setShowQuestionTagModal=function(t){return e.setState({showQuestionTagModal:t})},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.getHistoryMessages,n=e.senderId,r=e.messages,o=e.setMessageRead,i=e.sender,a=void 0===i?{}:i;0!==r.length&&a.id?this.scrollToBottom():t({senderId:n}).catch((function(){location.href="//www.zhihu.com/messages"})),o(n)}},{key:"componentDidUpdate",value:function(e){var t=e.messages,n=void 0===t?[]:t,r=this.props,o=r.messages,i=r.setMessageRead,a=r.senderId,c=n[n.length-1]||{},s=o[o.length-1]||{};c.id!==s.id&&(this.scrollToBottom(),"sender"===s.userType&&i(a));var u=e.sender,l=(u=void 0===u?{}:u).id,d=this.props.sender;(d=void 0===d?{}:d).id!==l&&this.scrollToBottom()}},{key:"render",value:function(){var e=this,t=this.props,n=t.messages,r=t.receiver,o=t.sender,i=void 0===o?{}:o,a=t.senderId,c=t.isLoading,u=t.isEcomMerchant,l=this.state.showQuestionTagModal;return i.id?Object(s.c)(_.Provider,{value:{showModal:l,setShowModal:this.setShowQuestionTagModal},children:[Object(s.b)(g.b,{isLoading:c,onLoad:this.handleGetHistoryMessage,placeholder:Object(s.b)(m.a,{className:"MessagesBox-loading"}),isPrevDrained:!1,isDrained:!0,getContainer:function(e){return e},className:"MessagesBox",onRef:function(t){e.messageBoxEle=t},children:n.map((function(e){return Object(s.b)("div",{children:Object(s.b)(Ve,{message:e,receiver:r,sender:i,isEcomMerchant:u})},e.tempMessageId||e.id)}))}),Object(s.b)(T,{showModal:l,onClose:function(){return e.setShowQuestionTagModal(!1)},senderId:a})]}):Object(s.b)(m.a,{className:"MessagesBox-loading"})}}]),n}(u.Component);Ke.PropsTypes={senderId:p.a.string};var Qe=Object(v.compose)(Object(d.connect)((function(e,t){var n=t.senderId,r=e.chat.chats[n]||{},o=r.receiver,i=void 0===o?{}:o,a=r.sender,c=void 0===a?{}:a,s=r.messages,u=void 0===s?[]:s,l=r.isLoading,d=void 0!==l&&l,f=r.isEnd;return{receiver:i,sender:c,messages:u,isLoading:d,isEnd:void 0===f||f,nextApiUrl:r.nextApiUrl,isEcomMerchant:(e.chat.chats||{}).isEcomMerchant}}),{getHistoryMessages:y.k,setMessageRead:y.r}),Object(O.a)())(Ke),We=n(34),Ge=n(111),Ze=n.n(Ge),Ye=n(134),Je=n(244),$e=n(24),Xe=n(921),et=n(1298);function tt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var nt=function(e){Object(i.a)(n,e);var t=tt(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).checkSize=function(t){var n=e.props.showNotification;if(t.size>1024*$e.R*1024)return n("请上传小于 ".concat($e.R,"M 的图片。"),"red"),!1},e.sendImage=function(t){var n=t.file;(0,e.props.handleSendImage)(n)},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=this.props.className;return Object(s.b)(Xe.a,{accept:"image/png,image/jpeg",onRef:function(t){e.uploadInput=t},customUpload:this.sendImage,beforeUpload:this.checkSize,multiple:!0,children:Object(s.b)(et.a,{className:t})})}}]),n}(u.Component);nt.propTypes={senderId:p.a.string,className:p.a.string,handleSendImage:p.a.func};var rt=Object(d.connect)(null,{showNotification:Ae.h})(nt),ot=n(1280),it=n(990),at=n(995);function ct(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var st=function(e){Object(i.a)(n,e);var t=ct(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={isEmoticonsHidden:!0},e.toggleEmoticonPanel=function(){e.setState({isEmoticonsHidden:!e.state.isEmoticonsHidden})},e.handleSelectEmoticon=function(t,n){var r=e.props,o=r.insertEmoji,i=r.handleSendEmoticon;"emoji"===n?o(t.placeholder):i(t),e.toggleEmoticonPanel()},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props.className,t=this.state.isEmoticonsHidden;return Object(s.c)("div",{className:"EmoticonTool",children:[!t&&Object(s.b)("div",{className:"EmoticonTool--mask",onClick:this.toggleEmoticonPanel}),!t&&Object(s.b)(at.a,{className:"EmoticonTool-panel",onSelectEmoticon:this.handleSelectEmoticon}),Object(s.b)(ot.a,{className:b()("EmoticonTool-icon",e),onClick:this.toggleEmoticonPanel})]})}}]),n}(u.Component);st.propTypes={senderId:p.a.string,className:p.a.string};var ut=Object(it.a)()(st),lt=n(4),dt={0:{prefix:null,text:"免费",key:""},1:{prefix:"¥",key:"discountPrice"},2:{prefix:"¥",key:"discountPrice"},3:{suffix:"折",key:"discountRate"}},ft=function(e){var t=e.couponInfo,n=void 0===t?{}:t,r=n.couponType,o=dt[void 0===r?1:r],i=o.text||"discountPrice"===o.key?n[o.key]/100:n[o.key];return l.a.createElement("div",{className:b()("KfeCollection-MessageCouponCard-coupon")},o.prefix&&l.a.createElement("span",{className:b()("KfeCollection-MessageCouponCard-tag","tag-prefix")},o.prefix),i,o.suffix&&l.a.createElement("span",{className:b()("KfeCollection-MessageCouponCard-tag","tag-suffix")},o.suffix))},pt=function(e){var t=e.result,n=e.isInMessage,r=t.title,o=t.description,i=t.className,a=void 0===i?"KfeCollection-MessageCouponCard-orangeCoupon--light":i;return l.a.createElement("div",{className:b()("KfeCollection-MessageCouponCard",a,{"KfeCollection-MessageCouponCard--InMessage":n})},l.a.createElement("div",{className:"KfeCollection-MessageCouponCard-content"},l.a.createElement("div",{className:"KfeCollection-MessageCouponCard-title"},r),l.a.createElement("div",{className:"KfeCollection-MessageCouponCard-text"},o)),l.a.createElement(ft,{couponInfo:t}))},ht=function(e){var t=e.result,n=e.onClick,r=e.isInMessage,o=void 0!==r&&r,i=e.extra.theme,a=void 0===i?"light":i,c=t.id;return l.a.createElement(X.b,{block:"EcomMessageCouponCard",content:{type:ee.e.coupon,id:c}},l.a.createElement(X.a,{shouldTrackShow:!0,zaType:"Card",zaAction:"Unknown",zaText:"留资卡片",zaEventType:"Unknown",onClick:function(e){q.a.trackEvent(e.target,{id:10049,action:"Click",name:String(c)}),n()}},l.a.createElement($.a,{options:[{},{},{id:10047,name:String(c)}]},l.a.createElement(pt,{result:t,isInMessage:o,theme:a}))))};ht.propTypes={className:p.a.string,result:p.a.object.isRequired,extra:p.a.shape({ua:p.a.object,theme:p.a.string,styles:p.a.object}).isRequired};var bt=ht,vt=n(257),mt=n(131),gt=Object.assign;var yt=function(e){return l.a.createElement(mt.a,gt({width:"24",height:"24",fill:"none",viewBox:"0 0 26 26"},e),l.a.createElement("path",{fill:"#fff",d:"M0 0h24v24H0z",opacity:".01"}),l.a.createElement("path",{fill:"#646464",d:"M16.875 7.149c.182 1.255-.302 3.01-1.436 5.369-.328.6-.62 1.479-.597 1.768.013.169.08.316.215.448l3.042-3.042a1.626 1.626 0 012.228-.068l.747.742c.611.612.634 1.59.068 2.228l-1.483 1.487c.455.17 1 .51 1.314.982.315.471.532 1.493.532 3.177 0 .663-.532 1.273-1.236 1.273l-6.062-.015c-.25.193-.528.346-.826.453l-2.161.652a.85.85 0 01-.844-.212c-.203-.203-.318-.5-.2-.896-.003.003-6.924.018-6.924.018A1.247 1.247 0 012 20.259l.013-1.49c-.013-.77.13-1.155.314-1.435.181-.274.443-.54.63-.73l.014-.013c.445-.452 1.444-.737 2.777-.98 2.487-.454 2.875-.819 2.915-1.325.01-.131-.162-.851-.548-1.606-1.255-2.444-1.705-3.934-1.49-5.502C6.944 4.827 8.662 3 11.752 3c3.09 0 4.776 1.77 5.122 4.149zm.65 6.886l-5.272 5.282c-.271.332-.678 1.873-.678 1.873s1.582-.41 1.92-.721l5.235-5.229-1.205-1.205zM8.11 7.382C8.391 5.7 9.513 4.506 11.754 4.5c2.241-.005 3.397 1.221 3.635 2.863.129.883-.288 2.394-1.285 4.469-.439.8-.81 1.918-.758 2.57a2.12 2.12 0 00.649 1.393l-2.577 2.582c-.557.62-.79 1.614-.79 1.614l-7.125.02.012-1.334c0-.408.08-.634.36-.873.233-.2.552-.34.877-.439.451-.11.918-.208 1.372-.303 1.016-.214 1.972-.415 2.563-.706.866-.426 1.378-1.061 1.472-1.954.075-.707-.72-2.44-.72-2.44S7.85 8.956 8.111 7.382zm10.34 9.91l-2.713 2.71 4.26.008s-.056-1.624-.213-2.012c-.082-.155-.275-.458-1.335-.707zm.575-4.752a.375.375 0 01.489.036l.71.717a.376.376 0 01-.036.489l-.574.574-1.206-1.206.617-.61z",fillRule:"evenodd",clipRule:"evenodd"}))},Ot=Object.assign;var jt=function(e){return l.a.createElement(mt.a,Ot({width:"24",height:"24",fill:"none",viewBox:"0 0 24 24"},e),l.a.createElement("path",{fill:"#fff",d:"M0 0h24v24H0z",opacity:".01"}),l.a.createElement("path",{fill:"#646464",d:"M3.004 18.5a2.285 2.285 0 002.285 2.284h13.736a2.285 2.285 0 002.285-2.285v-3.732a.763.763 0 00-.759-.846h-.01a1.526 1.526 0 01.01-3.053.763.763 0 00.759-.847V6.29a2.285 2.285 0 00-2.285-2.285H5.289A2.285 2.285 0 003.004 6.29v3.732a.763.763 0 00.759.846h.015a1.526 1.526 0 01-.015 3.053.763.763 0 00-.759.846v3.732zM17.5 12.394c0 1.423.975 2.62 2.293 2.957v3.147a.768.768 0 01-.767.768H5.289a.768.768 0 01-.767-.768v-3.147a3.054 3.054 0 000-5.915V6.29c0-.424.343-.768.767-.768h13.736c.424 0 .767.344.767.768v3.147a3.054 3.054 0 00-2.293 2.958zm-3.807 0a1.535 1.535 0 11-3.07 0 1.535 1.535 0 013.07 0zm1.517 0a3.052 3.052 0 11-6.104 0 3.052 3.052 0 016.104 0z",fillRule:"evenodd",clipRule:"evenodd"}))},wt=n(235),Ct=n.n(wt),kt=n(1061),St=n.n(kt),xt=function(e){var t=e.cardList,n=e.onSend,r=e.onClose,o=e.isEvent,i=o?re:bt;return Object(s.b)(C.b,{title:o?"活动":"优惠券",onClose:r,className:"EcomCardTool-Modal",children:Object(s.b)("ul",{className:"EcomCardTool-Modal--list",children:t.map((function(e,t){return Object(s.b)("li",{className:"EcomCardTool-Modal--cardItem",children:Object(s.b)(i,{result:e,extra:{},onClick:function(){return n(Object.assign({},e,{cardType:o?1:2}))}})},e.token||t)}))})})};xt.propTypes={onClose:p.a.func.isRequired,cardList:p.a.array,onSend:p.a.func};var Rt=function(e){var t=e.senderId,n=e.className,r=e.isEvent,o=e.onHandleFirstInterActive,i=Object(d.useSelector)((function(e){return e.env.theme})),a=Object(d.useDispatch)(),c=Object(u.useState)(!1),l=Object(j.a)(c,2),f=l[0],p=l[1],h=Object(u.useState)([]),v=Object(j.a)(h,2),m=v[0],g=v[1],O=Object(k.c)((function(){a(Object(y.i)({senderId:t})).then((function(e){var t;return g(null===(t=e.payload)||void 0===t?void 0:t.data)}))})),w=Object(k.c)((function(){a(Object(y.h)()).then((function(e){var t,n,r;return n=null===(t=e.payload)||void 0===t?void 0:t.data,r=!St()(n)&&n.map((function(e){return Object.assign({},e,{className:1===(null==e?void 0:e.template.id)?"KfeCollection-MessageCouponCard-orangeCoupon--".concat(i):"KfeCollection-MessageCouponCard-blueCoupon--".concat(i),description:e.intro})}))||[],void g(Object(lt.a)(r))}))}));Object(u.useEffect)((function(){r&&O()}),[r,O]),Object(u.useEffect)((function(){r||w()}),[r,w]);var C=r?yt:jt,S=function(e){var n=e.token,r=e.cardType,i=e.id;(function(e){var n=e.token,r=e.cardType;if(o(),1===r){var i=Ze()("TempEventCard_");return a(Object(y.a)(t,i,r)),a(Object(y.n)({contentType:x.a.ecomcard,token:n,data:{receiverId:t,cardType:r},tempMessageId:i}))}return a(Object(y.n)({contentType:x.a.ecomcard,id:n,data:{receiverId:t,cardType:r}}))})({token:n||i,cardType:r}).then((function(){p(!1)})).catch(Ct.a)};return Object(s.b)(X.b,{block:"EcomMessageEcomCardTool",content:{type:"Message"},children:Object(s.b)(Ne.a,{trackCardShow:!0,view:{id:r?9975:9976,url:"fakeurl://dialogue/user.*"},children:Object(s.c)("div",{className:"EcomCardTool",children:[Object(s.b)(X.e,{shouldTrackClick:!0,zaText:r?"留资卡片":"优惠券卡片",zaType:"Button",zaEventType:"Click",children:Object(s.b)(C,{className:b()("EcomCardTool-icon",n),width:22,height:22,onClick:function(e){f||!St()(m)?(p(!f),Object(vt.a)(e,{id:r?9978:9979,action:"Click"})):a(Object(Ae.h)("请先去 ecom.zhihu.com 配置","red"))}})}),f&&Object(s.b)(xt,{isEvent:r,cardList:m,onSend:function(e){return S(e)},onClose:function(){return p(!1)}})]})})})};Rt.propTypes={senderId:p.a.string,className:p.a.string,isEvent:p.a.bool,onHandleFirstInterActive:p.a.func};var Et=Rt;function _t(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var At=function(e){Object(i.a)(n,e);var t=_t(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.senderId,n=e.insertEmoji,r=e.handleSendImage,o=e.handleSendEmoticon,i=e.onHandleFirstInterActive,a=e.isEcomMerchant;return Object(s.c)("ul",{className:"ToolBar",children:[Object(s.b)("li",{className:"ToolBar-item",children:Object(s.b)(ut,{className:"ToolBar-Icon",senderId:t,insertEmoji:n,handleSendEmoticon:o})}),Object(s.b)("li",{className:"ToolBar-item",children:Object(s.b)(rt,{className:"ToolBar-Icon",senderId:t,handleSendImage:r})}),a&&Object(s.c)(s.a,{children:[Object(s.b)("li",{className:"ToolBar-item",children:Object(s.b)(Et,{isEvent:!0,className:"ToolBar-Icon",senderId:t,onHandleFirstInterActive:i},"event")},"event"),Object(s.b)("li",{className:"ToolBar-item",children:Object(s.b)(Et,{isEvent:!1,className:"ToolBar-Icon",senderId:t,onHandleFirstInterActive:i},"coupon")},"coupon")]})]})}}]),n}(u.Component);At.propTypes={senderId:p.a.string,insertEmoji:p.a.func,handleSendImage:p.a.func,handleSendEmoticon:p.a.func,onHandleFirstInterActive:p.a.func};var Tt=Object(d.connect)((function(e){return{isEcomMerchant:(e.chat.chats||{}).isEcomMerchant}}))(At),Nt=function(e){var t=Object(u.useState)(!1),n=Object(j.a)(t,2),r=n[0],o=n[1];return r?null:Object(s.b)(It,Object.assign({},e,{dispose:function(){return o(!0)}}))},It=function(e){var t=e.endSignal,n=void 0!==t&&t,r=e.dispose,o=Object(u.useState)(0),i=Object(j.a)(o,2),a=i[0],c=i[1];Object(u.useEffect)((function(){c(Date.now())}),[]);var s=Object(k.c)((function(e){var t=e-a;t>0&&t<=6e4&&(Object(vt.a)(null,{id:9980,action:"StatusReport"}),null==r||r())}));return Object(u.useEffect)((function(){if(n){var e=Date.now();s(e)}}),[s,n]),Object(k.i)(r,6e4),null};Nt.propTypes={endSignal:p.a.bool};var Mt=Nt;function Dt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var Lt=function(e){Object(i.a)(n,e);var t=Dt(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={cursorPosition:0,firstInteractive:!1},e.inputRef=Object(u.createRef)(),e.countDownTimer=null,e.handleSetFirsetInteractive=function(){e.setState({firstInteractive:!0})},e.checkSize=function(t){var n=e.props.showNotification;return!(t.size>1024*$e.R*1024)||(n("请上传小于 ".concat($e.R,"M 的图片。"),"red"),!1)},e.handleKeyDown=function(t){var n=e.props,r=n.inputMessage,o=n.senderId,i=n.inputValue;13===t.keyCode&&(t.ctrlKey||t.metaKey)?r({senderId:o,inputValue:"".concat(i,"\n")}):13!==t.keyCode||t.shiftKey||e.handleSendTextMessage(t)},e.handleSendImage=function(t){var n;if(t&&e.checkSize(t)){var r=e.props,o=r.uploadImage,i=r.sendMessage,a=r.senderId,c=r.addTempImageMessage,s=r.setImageSendFailure,u=Ze()("TempImage_");e.handleSetFirsetInteractive(),Object(Je.a)(t).then((function(e){var n=URL.createObjectURL(e);Object(Q.loadImage)(n).then((function(r){var l=r.height,d=r.width;c(a,n,u,l,d),o(e).then((function(e){return i({contentType:x.a.image,receiverId:a,data:{image:{height:e.payload.dataRawheight,width:e.payload.dataRawwidth,url:e.payload.src}},tempMessageId:u})})).catch((function(){s({tempMessageId:u,receiverId:a,file:t})}))}))})),null===(n=e.inputRef.current)||void 0===n||n.focus()}},e.handleSendEmoticon=function(t){var n,r=t.id,o=t.dynamicImageUrl,i=t.staticImageUrl,a=t.title,c=e.props,s=c.senderId,u=c.sendMessage;e.handleSetFirsetInteractive(),u({contentType:"sticker",receiverId:s,data:{sticker:{sticker_id:r,url:o||i,title:a}}}),q.a.trackEvent(null,{id:3640,action:"Click",name:a}),null===(n=e.inputRef.current)||void 0===n||n.focus()},e.handleSendTextMessage=function(t){var n=e.props,r=n.senderId,o=n.sendMessage,i=n.inputValue,a=n.location.query,c=a.source_type,s=a.source_id;i.length>1e4?M.a.alert("发送文字不得超过 1 万字，请重新编辑后再次发送",{title:"发送失败"}):i.trim()&&(e.handleSetFirsetInteractive(),t.preventDefault(),o({contentType:x.a.text,receiverId:r,data:{text:i},sourceType:c,sourceId:s}),q.a.trackEvent(null,{id:5309,action:"Click"}))},e.insertEmoji=function(t){var n,r=e.props,o=r.inputMessage,i=r.senderId,a=r.inputValue,c=e.state.cursorPosition,s=[a.slice(0,c),t,a.slice(c)].join("");e.setState({cursorPosition:c+t.length}),o({senderId:i,inputValue:s}),q.a.trackEvent(null,{id:3641,action:"Click",name:t.slice(1,t.length-1)}),null===(n=e.inputRef.current)||void 0===n||n.focus()},e.handleBlur=function(t){e.setState({cursorPosition:t.target.selectionStart})},e.handleInputMessage=function(t){var n=e.props;(0,n.inputMessage)({senderId:n.senderId,inputValue:t.target.value})},e.handleInputRef=function(t){e.inputRef.current=t},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.inputRef.current&&(this.inputRef.current.focus(),this.inputRef.current.addEventListener("keydown",this.handleKeyDown))}},{key:"componentWillUnmount",value:function(){this.inputRef.current&&this.inputRef.current.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){var e=this.props,t=e.inputValue,n=e.senderId,r=e.sender;return(null==r?void 0:r.isForbidden)?Object(s.b)("div",{className:"InputBox",css:{justifyContent:"flex-end"},children:Object(s.b)("div",{className:"InputBox-footer",children:Object(s.c)("div",{className:"InputBox-footerDesc",css:{textAlign:"center",paddingRight:0},children:["要反馈",Object(s.b)(We.Link,{to:"/messages/3d198a56310c02c4a83efb9f4a4c027e",css:function(e){return{color:e.colors.GBK06A,fontWeight:"bold",paddingLeft:"4px"}},children:"@知乎小管家"})]})})}):Object(s.c)("div",{className:"InputBox",children:[Object(s.b)(Mt,{endSignal:this.state.firstInteractive}),Object(s.b)(Tt,{senderId:n,insertEmoji:this.insertEmoji,handleSendImage:this.handleSendImage,handleSendEmoticon:this.handleSendEmoticon,onHandleFirstInterActive:this.handleSetFirsetInteractive}),Object(s.b)(Ye.a,{multiline:!0,spread:!0,value:t,className:"InputBox-input",onRef:this.handleInputRef,onChange:this.handleInputMessage,onBlur:this.handleBlur}),Object(s.c)("div",{className:"InputBox-footer",children:[Object(s.b)("div",{className:"InputBox-footerDesc",children:"按 Enter 键发送"}),Object(s.b)(w.c,{preset:"primary",color:"blue",className:"InputBox-sendBtn",onClick:this.handleSendTextMessage,disabled:!t.trim(),children:"发送"})]})]})}}]),n}(u.Component);var Pt=Object(v.compose)(We.withRouter,Object(d.connect)((function(e,t){var n=t.senderId,r=(e.chat.chats[n]||{}).inputValue;return{inputValue:void 0===r?"":r}}),{sendMessage:y.p,inputMessage:y.m,uploadImage:D.b,addTempImageMessage:y.b,setImageSendFailure:y.q,showNotification:Ae.h}))(Lt),zt=n(781);function Bt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var Ft=function(e){Object(i.a)(n,e);var t=Bt(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={isAlertShow:!0},e.handleCloseAlert=function(){e.setState({isAlertShow:!1})},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.message,n=e.className;return this.state.isAlertShow?Object(s.c)("div",{className:b()("AbnormalAlert",n),children:[Object(s.b)("span",{className:"AbnormalAlert-message",dangerouslySetInnerHTML:{__html:t}}),Object(s.b)(zt.a,{className:"AbnormalAlert-icon",onClick:this.handleCloseAlert})]}):null}}]),n}(u.Component);Ft.propsTypes={message:p.a.object,className:p.a.string};var Ut=n(124),qt=Object.assign;var Vt=function(e){return l.a.createElement(mt.a,qt({width:"200",height:"88",fill:"none",viewBox:"0 0 200 88"},e),l.a.createElement("path",{fill:"#E3EAF1",d:"M90.78 11.188H52.292v66.743h9.43l1.259 8.04 12.754-8.04H90.78V11.189zM74.51 69.597l-7.488 4.713-.734-4.713h-5.389V19.47h21.186v50.126H74.51zM45.189 41.222H31.193c0-1.473.105-2.98.123-4.557V19.477H47.27v-4.054a4.224 4.224 0 00-1.262-2.99 4.307 4.307 0 00-3.024-1.238H18.072c.088-.277.175-.555.262-.797C19.192 7.834 21.938.002 21.938.002a13.32 13.32 0 00-7.54 2.183c-1.784 1.248-2.851 2.131-4.286 6.082-1.662 4.54-3.114 8.923-4.094 11.54C4.514 23.981.875 31.328.875 31.328a18.295 18.295 0 007.872-1.906c3.5-1.854 5.249-4.696 6.421-9.01l.28-.936h7.295v17.188c0 1.56-.14 3.067-.227 4.557H9.64a8.404 8.404 0 00-5.914 2.426 8.242 8.242 0 00-2.449 5.856h20.399a55.358 55.358 0 01-2.432 11.401 52.49 52.49 0 01-9.412 16.478A103.517 103.517 0 010 86.687s9.78 3.674 16.952-2.98c4.34-4.037 8.223-11.92 10.095-17.898a87.786 87.786 0 003.499-16.34h18.65v-4.28a3.918 3.918 0 00-1.169-2.81 4.022 4.022 0 00-2.838-1.157z"}),l.a.createElement("path",{fill:"#E3EAF1",d:"M35.222 58.361l-7.226 4.661 15.746 23.305a21.572 21.572 0 002.099-6.931 9.843 9.843 0 00-.875-6.775l-9.744-14.26zm125.555-14.01v-29.23a7322.86 7322.86 0 0029.496-1.507l2.659-.156c1.207-1.248 2.764-7.485 2.152-9.443-.228-.78-.665-2.08-1.995-1.733a103.979 103.979 0 01-13.366 2.27c-8.642 1.005-12.403 1.265-24.387 2.131-20.994 1.525-39.713 2.253-39.713 2.253a7.857 7.857 0 00.64 3.114 7.923 7.923 0 001.823 2.617 8.012 8.012 0 002.713 1.697 8.085 8.085 0 003.169.507c7.12-.294 17.494-.78 28.114-1.282v28.762h-39.941c0 2.197.881 4.303 2.449 5.857a8.406 8.406 0 005.914 2.425h31.578v22.11c0 2.772-1.452 3.725-3.849 3.794h-12.247a12.979 12.979 0 002.613 4.826 13.117 13.117 0 004.385 3.335 19.423 19.423 0 008.468.866c4.251-.208 9.272-2.581 9.272-11.158V52.633h35.252c1.067 0 2.091-.42 2.845-1.167A3.965 3.965 0 00200 48.648v-4.297h-39.223z"}),l.a.createElement("path",{fill:"#E3EAF1",d:"M133.169 24.611a7.192 7.192 0 00-2.065-1.914 7.273 7.273 0 00-5.476-.882 7.26 7.26 0 00-2.571 1.167l-1.172.85 13.296 18.279 6.998-5.06-9.01-12.44zm46.048-.617L169.455 36.8l6.997 5.198 14.119-18.522-1.172-.867a7.294 7.294 0 00-8.066-.49 7.196 7.196 0 00-2.116 1.876z"}))};function Ht(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var Kt=function(e){Object(i.a)(n,e);var t=Ht(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.senderId,n=e.getEcomProfile;(0,e.getAccountInfo)(),t&&n(t)}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.senderId,r=e.sender,o=e.warning,i=o.status,a=o.message,c=r||{},u=c.name,l=void 0===u?"":u,d=c.vipInfo,f=((void 0===d?{}:d)||{}).vipIcon;return n?Object(s.c)("div",{className:b()("ChatBox",t),children:[i&&Object(s.b)(Ft,{message:a,className:"ChatBox-alert"}),Object(s.c)("header",{className:"ChatBox-title",children:[Object(s.b)("span",{children:l}),f&&Object(s.b)("img",{src:f.url,className:"ChatBox-titleVipIcon"})]}),Object(s.b)("div",{className:"MessagesBox-wrapper",children:Object(s.b)(Qe,{senderId:n})}),Object(s.b)(Pt,{senderId:n,sender:r})]}):Object(s.b)("div",{className:"ChatBox-empty",children:Object(s.b)(Vt,{className:"ChatBox-emptyImage"})})}}]),n}(u.Component);Kt.propTypes={senderId:p.a.string,className:p.a.string};t.a=Object(d.connect)((function(e,t){var n=t.senderId,r=e.chat.chats[n]||{},o=r.receiver,i=void 0===o?{}:o,a=r.sender,c=void 0===a?{}:a,s=r.warning;return{receiver:i,sender:c,warning:void 0===s?{}:s}}),{getAccountInfo:Ut.d,getEcomProfile:y.j})(Kt)},function(e,t,n){"use strict";var r=n(13),o=n(14),i=n(15),a=n(16),c=n(9),s=n(4),u=n(2),l=n(1),d=n(25),f=n(70),p=n(395),h=n(391),b=n(325),v=n(3),m=n.n(v),g=n(132),y=n(380),O=n(1010),j=n(30),w=n(367),C=n(854),k=function(e){var t=e.upvotedFollowees,n=e.voteupCount,r=e.actionText,o=e.canClick,i=e.onClick;if(!n)return null;var a=t.length,c=a===n?"":"".concat(Object(w.formatNumber)(n)," 人");return Object(u.c)(O.CJKSpace,{children:[t.map((function(e,t){return Object(u.c)("span",{children:[t>0&&"、",Object(u.b)(C.a,{noBadge:!0,user:e,children:e.name},t)]},t)})),a>0&&n-a>0&&"等",o?Object(u.c)(j.c,{preset:"plain",onClick:i,children:[c,r]}):c+r]})};k.propTypes={voteupCount:m.a.number.isRequired,upvotedFollowees:m.a.array.isRequired,actionText:m.a.string.isRequired,canClick:m.a.bool,onClick:m.a.func},k.defaultProps={voteupCount:0,actionText:"赞了",upvotedFollowees:[]};var S=k,x=n(1130);function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var E=function(e){Object(i.a)(n,e);var t=R(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={modalShown:e.props.defaultModalShown},e.handleListHide=function(){return e.setState({modalShown:!1})},e.handleListShown=function(){return e.setState({modalShown:!0})},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.voteupCount,n=e.upvotedFollowees,r=e.openable,o=e.type,i=e.too,a=e.isFetching,c=e.isDrained,s=e.items,l=e.onLoad;if(t<=0)return null;var d,f=this.state.modalShown;return d="pin"===o?"为该".concat(y.b[o],"鼓掌"):"column"===o?"关注":"".concat(i?"也":"","赞同了该").concat(y.b[o]),Object(u.c)("span",{className:"Voters",children:[Object(u.b)(S,{canClick:r,onClick:this.handleListShown,voteupCount:t,upvotedFollowees:n,actionText:d}),Object(u.b)(g.b,{size:"fullPage",onClose:this.handleListHide,children:f&&Object(u.b)(x.a,{isFetching:a,isDrained:c,text:"column"===o?"关注了":"赞同了",items:s,voteupCount:t,onLoad:l})})]})}}]),n}(l.Component);E.propTypes={openable:m.a.bool,upvotedFollowees:m.a.array,id:m.a.oneOfType([m.a.number,m.a.string]),type:m.a.oneOf(["pin","answer","article","column"]).isRequired,defaultModalShown:m.a.bool},E.defaultProps={openable:!0,defaultModalShown:!1};var _=E;function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var T={answer:"answers",article:"articles",pin:"pins",column:"columns"};var N=function(e){Object(i.a)(n,e);var t=A(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).handleLoad=function(){var t=e.props,n=t.type,r=t.id,o=t.loadAnswerVoters,i=t.loadPinVoters,a=t.loadArticleVoters,c=t.loadColumnsFollowers;switch(n){case"answer":return o(r);case"pin":return i(r);case"article":return a(r);case"column":return c(r);default:return null}},e}return Object(o.a)(n,[{key:"render",value:function(){return Object(u.b)(_,Object.assign({onLoad:this.handleLoad},this.props))}}]),n}(l.Component);N.propsTypes=Object.assign({},_.propsTypes),N.defaultProps=Object.assign({},_.defaultProps);t.a=Object(d.connect)((function(e,t){var n=t.id,r=t.type,o=e.entities.users,i=e[T[r]]||{},a=i.voters,c=void 0===a?{}:a,u=i.concernedUpvoters,l=void 0===u?{}:u,d=c[n]||{isFetching:!1,isDrained:!1,order:"normal",ids:[]},f=d.isFetching,p=d.isDrained,h=d.order,b=d.ids,v=(l[n]||{ids:[]}).ids;return{isFetching:f,isDrained:p,order:h,items:[].concat(Object(s.a)(v),Object(s.a)(b.filter((function(e){return!v.includes(e)})))).map((function(e){return o[e]}))}}),{loadAnswerVoters:f.u,loadArticleVoters:p.e,loadPinVoters:h.f,loadColumnsFollowers:b.c})(N)},,function(e,t,n){"use strict";n.d(t,"a",(function(){return $e})),n.d(t,"b",(function(){return rt})),n.d(t,"c",(function(){return tt})),n.d(t,"d",(function(){return Ne})),n.d(t,"e",(function(){return Ie})),n.d(t,"f",(function(){return De})),n.d(t,"g",(function(){return Je})),n.d(t,"h",(function(){return at})),n.d(t,"i",(function(){return Ze})),n.d(t,"j",(function(){return Ge})),n.d(t,"k",(function(){return Te}));var r=n(57),o=n.n(r),i=n(110),a=n.n(i),c=n(1),s=n.n(c),u=n(781),l=n(1300),d=n(1262),f=n(834),p=n(1505),h=n(1515),b=n(18),v=function(e){return s.a.createElement(b.a,e,s.a.createElement("path",{d:"M15.333 19.333l-2.764 2.765a.333.333 0 0 1-.569-.236v-2.529h3.333zm0-13.333c.737 0 1.334.597 1.334 1.333V16A2.667 2.667 0 0 1 14 18.667H7.333A1.333 1.333 0 0 1 6 17.333v-10C6 6.597 6.597 6 7.333 6zm.394-1.987a2.933 2.933 0 0 1 2.93 2.791l.004.142v8.838c0 .693-.53 1.262-1.205 1.327l-.129.006V6.947a1.6 1.6 0 0 0-1.49-1.597l-.11-.004H7.333c0-.736.597-1.333 1.334-1.333h7.06z",fillRule:"evenodd"}))};v.defaultProps={name:"BlueBook"};var m=v,g=n(1434),y=n(792),O=n(1508),j=n(1509),w=n(796),C=n(1510),k=n(1511),S=n(1512),x=n(1513),R=n(1514),E=n(1279),_=n(833),A=n(179),T=n(90),N=n(369),I=n(173),M=n(932),D=n(150),L=n(5),P=n(28),z=n(234),B=n(66),F=n(839),U=n(20),q=n.n(U),V=n(21),H=n.n(V),K=n(22),Q=n.n(K),W=n(23),G=n.n(W),Z=n(17),Y=n.n(Z),J=n(42),$=n(3),X=n.n($),ee=n(235),te=n.n(ee),ne=n(1307),re=n(1153),oe=n.n(re);function ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Y()(e);if(t){var o=Y()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return G()(this,n)}}var ae="top",ce=Object.freeze({__proto__:null,LEFT:"left",RIGHT:"right",TOP:ae,BOTTOM:"bottom",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right",LEFT_TOP:"left-top",LEFT_BOTTOM:"left-bottom",RIGHT_TOP:"right-top",RIGHT_BOTTOM:"right-bottom"}),se=[ae,"bottom"],ue=["left","right"];function le(e,t,n,r){var i=r.split("-"),a=o()(i,2),c=a[0],s=a[1],u=function(e){var t=e.top,n=e.bottom,r=e.left,o=e.right;return{top:Math.max(t,0),bottom:Math.min(Math.max(n,0),window.innerHeight),left:Math.max(r,0),right:Math.min(Math.max(o,0),window.innerWidth)}}(t),l={},d={},f=c;if(se.includes(c)){var p,h,b=u.right-n.width,v=u.left;if("left"===s?(p=e.left,h=v):"right"===s?(p=e.right-n.width,h=b):(p=e.left+e.width/2-n.width/2,h=v),d.left=b>v?p<v?v:p<b?p:b:h,e.width<=n.width){var m=e.left+e.width/2;l.left=m-d.left}else l.left=n.width/2;"bottom"===c&&e.bottom+n.height>u.bottom&&e.top-n.height>u.top&&(f=ae),c===ae&&e.bottom+n.height<u.bottom&&e.top-n.height<u.top&&(f="bottom");var g=f===ae?[n.height,e.top-n.height]:[0,e.bottom],y=o()(g,2);l.top=y[0],d.top=y[1]}if(ue.includes(c)){var O,j,w=u.bottom-n.height,C=u.top;if(s===ae?(O=e.top,j=C):"bottom"===s?(O=e.bottom-n.height,j=w):(O=e.top+e.height/2-n.height/2,j=C),d.top=w>C?O<C?C:O<w?O:w:j,e.width<=n.width){var k=e.top+e.height/2;l.top=k-d.top}else l.top=n.height/2;"right"===c&&e.right+n.width>u.right&&e.left-n.width>u.left&&(f="left"),"left"===c&&e.right+n.width<u.right&&e.left-n.width<u.left&&(f="right");var S="left"===f?[n.width,e.left-n.width]:[0,e.right],x=o()(S,2);l.left=x[0],d.left=x[1]}return{arrowStyle:l,targetContainerStyle:d,placement:f}}var de=function(e){return Object(L.g)("svg",Object.assign({width:"26",height:"10",viewBox:"0 0 26 10",fill:"currentColor"},e),Object(L.g)("path",{d:"M0 0h26v1c-4.498 0-9 9-13 9S4.5 1 0 1V0z",fillRule:"evenodd"}))},fe={top:{width:"32px",height:"16px",marginTop:"-5px",transform:"translate(-50%, 0)","&::after":{left:"50%",top:"-8px"}},bottom:{width:"32px",height:"16px",marginTop:"3px",transform:"translate(-50%, -100%) rotate(180deg)","&::after":{left:"50%",bottom:"-8px"}},left:{width:"16px",height:"32px",marginLeft:"-5px",transform:"translate(0, -50%) rotate(-90deg)","&::after":{left:"-8px",top:"50%"}},right:{width:"16px",height:"32px",marginLeft:"6px",transform:"translate(-100%, -50%) rotate(90deg)","&::after":{right:"-8px",top:"50%"}}},pe={top:{marginTop:"-16px"},bottom:{marginTop:"16px"},left:{marginLeft:"-16px"},right:{marginRight:"16px"}},he={top:{transformOrigin:"bottom center",marginTop:"-8px"},bottom:{marginTop:"8px"},left:{transformOrigin:"right center",marginLeft:"-16px"},right:{marginLeft:"16px"}},be=s.a.forwardRef((function(e,t){var n=e.withArrow,r=e.arrowStyle,o=e.arrowColor,i=e.placement,a=e.fixed,c=e.style,s=e.children,u=Object(I.f)();return Object(L.g)("div",{key:"popoverContent",ref:t,css:Object(A.a)({position:"absolute",background:u.colors.GBK99C,borderRadius:"4px",zIndex:203,boxShadow:"rgba(0, 0, 0, 0.16) 0 0 20px 0"},";label:PopoverContent;"),style:Object.assign({},he[i],n&&pe[i],a&&{position:"fixed"},c)},n&&Object(L.g)(de,{css:Object(A.a)({position:"absolute",overflow:"hidden",pointerEvents:"none",fill:o||u.colors.GBK99C,"&:after":{content:'""',position:"absolute",boxSizing:"border-box",width:"24px",height:"24px",margin:"-12px",background:o||u.colors.GBK99C,transform:"rotate(45deg)",pointerEvents:"auto"}},";label:PopoverContent;"),style:Object.assign({},fe[i],r)}),"function"==typeof s?s(e):s)})),ve=Object(ne.animated)(be),me=function(e){Q()(n,e);var t=ie(n);function n(e){var r;return q()(this,n),r=t.call(this,e),"undefined"!=typeof document&&(r.element=document.createElement("div")),r}return H()(n,[{key:"componentDidMount",value:function(){document.body.appendChild(this.element)}},{key:"componentWillUnmount",value:function(){document.body.removeChild(this.element),delete this.element}},{key:"render",value:function(){if(this.element){var e=this.props,t=e.onRef,n=a()(e,["onRef"]);return Object(J.createPortal)(Object(L.g)("div",Object.assign({ref:t},n)),this.element)}return null}}]),n}(c.Component),ge=function(e){var t,n,r=e.renderChildren,i=e.children,a=e.transitionProps,s=e.springProps,u=e.onAfterEnter,l=e.onAfterLeave,d=Object(c.useState)(!1),f=o()(d,2),p=f[0],h=f[1],b=!!i,v=Object(ne.useSpring)((function(){return s.from})),m=o()(v,2),g=m[0],y=m[1],O=(t=i,n=Object(c.useRef)(),Object(c.useEffect)((function(){t&&(n.current=t)})),n.current),j=Object(ne.useTransition)(b,Object.assign({},a,{onRest:function(e,t){e.finished&&t.item&&2===e.value.p&&(l&&l(),h(!1))}}));return Object(c.useEffect)((function(){b?(h(!0),y(s.enter)):y(s.leave)}),[b]),Object(c.useLayoutEffect)((function(){p&&u&&u()}),[p]),p?Object(L.g)(me,null,j((function(e,t){return t?r({transitionStyles:e,springStyles:g,item:b?i:O}):null}))):null},ye=oe()(.25,.1,.25,1),Oe={from:{opacity:0},enter:{opacity:1,config:{duration:200,easing:ye}},leave:{opacity:0,config:{duration:300,easing:ye}}},je=function(e){var t=e.isOpen,n=e.arrowed,r=e.fixed,i=e.globalClose,a=e.target,s=e.container,u=e.boundary,l=e.placement,d=e.listenResize,f=e.customStyle,p=e.backgroundColor,h=e.transitionProps,b=e.springProps,v=e.customPosition,m=e.onClose,g=e.onAfterLeave,y=e.children,O=Object(c.useState)(l),j=o()(O,2),w=j[0],C=j[1],k=Object(c.useState)({}),S=o()(k,2),x=S[0],R=S[1],E=Object(c.useState)({}),_=o()(E,2),A=_[0],T=_[1],I=Object(c.useRef)(null),M=Object(N.b)(),D=Object(B.c)((function(){var e=function(e){var t=e.target,n=e.container,r=e.placement,o=e.fixed,i=e.boundary,a=e.element,c=e.customPosition;if(a&&t){var s=t instanceof HTMLElement?t:Object(J.findDOMNode)(t),u=document.body;n&&(u=n instanceof HTMLElement?n:Object(J.findDOMNode)(n));var l=(c||le)(s.getBoundingClientRect(),function(){var e,t,n,r,o,i,a,c,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u=arguments.length>1?arguments[1]:void 0,l=s.getElement,d=s.padding,f=void 0===d?0:d,p=s.getBoundaryInfo;if("object"==typeof f&&(o=f.top||0,i=f.bottom||0,a=f.left||0,c=f.right||0),p)return p();var h={};l?h=l():u&&(h=u);var b=h.getBoundingClientRect(),v=b.top,m=b.right,g=b.bottom,y=b.left;return{top:v+(null!==(e=o)&&void 0!==e?e:f),right:m-(null!==(t=c)&&void 0!==t?t:f),bottom:g-(null!==(n=i)&&void 0!==n?n:f),left:y+(null!==(r=a)&&void 0!==r?r:f)}}(i,u),a.getBoundingClientRect(),r);return o||(l.targetContainerStyle.left+=window.pageXOffset,l.targetContainerStyle.top+=window.pageYOffset),l}}({target:a,container:s,placement:w,fixed:r,boundary:u,element:I.current,customPosition:v});if(e){var t=e.placement,n=e.targetContainerStyle,o=e.arrowStyle;C(t),R(n),T(o)}}));Object(c.useEffect)((function(){t&&D()}),[t]),Object(c.useLayoutEffect)((function(){if(d)return window.addEventListener("resize",D),function(){window.removeEventListener("resize",D)}}),[]);var P=Object(B.c)((function(e){var n;t&&(!document.body.contains(e.target)||(null==I||null===(n=I.current)||void 0===n?void 0:n.contains(e.target))||(null==a?void 0:a.contains(e.target))||m&&m())}));Object(c.useEffect)((function(){return i&&(M.Mobile?document.addEventListener("touchstart",P):document.addEventListener("click",P)),i&&function(){M.Mobile?document.removeEventListener("touchstart",P):document.removeEventListener("click",P)}}),[i,M,P]);var z=Object(B.c)((function(){C(l),g()})),F=Object(c.useCallback)((function(e){var t=e.transitionStyles,o=e.springStyles,i=e.item;return Object(L.g)(ve,{key:"popover",ref:I,withArrow:n,arrowStyle:A,arrowColor:p,placement:w,fixed:r,style:Object.assign({},x,t,o,"function"==typeof f?f(w):f,{backgroundColor:p}),onMounted:D},i)}),[n,A,p,w,r,x,f,D]);return Object(L.g)(ge,{renderChildren:F,transitionProps:h,springProps:b,onAfterEnter:D,onAfterLeave:z},t&&y)};je.propTypes={isOpen:X.a.bool,arrowed:X.a.bool,fixed:X.a.bool,globalClose:X.a.bool,placement:X.a.oneOf(Object.values(ce)),listenResize:X.a.bool,container:X.a.object,boundary:X.a.shape({getElement:X.a.func,padding:X.a.oneOfType([X.a.number,X.a.object]),getBoundaryInfo:X.a.func}),transitionProps:X.a.shape({from:X.a.object.isRequired,enter:X.a.object.isRequired,leave:X.a.object.isRequired,config:X.a.oneOfType([X.a.object,X.a.func])}),springProps:X.a.shape({from:X.a.object.isRequired,enter:X.a.object.isRequired,leave:X.a.object.isRequired}),customStyle:X.a.oneOfType([X.a.object,X.a.func]),backgroundColor:X.a.string,customPosition:X.a.func,onClose:X.a.func,onAfterLeave:X.a.func},je.defaultProps={isOpen:!1,arrowed:!0,fixed:!1,globalClose:!1,placement:"top",listenResize:!0,transitionProps:{from:{transform:"translateY(10px)",p:1},enter:{transform:"translateY(0px)",p:0},leave:{transform:"translateY(0px)",p:2},config:function(e){return e?{tension:380,friction:20}:{duration:300}}},springProps:Oe,onClose:X.a.func,onAfterLeave:te.a};var we=je,Ce={GOLDEN:{bg:"GYL02A",color:"GYL02A",colorNoAlpha:!0},BLUE:{bg:"GBL01A",color:"GBL07A"},PURPLE:{bg:"GRD07A",color:"GRD07A"},GREY:{bg:"GBK10A",color:"GBK06A",bgNoAlpha:!0,colorNoAlpha:!0}},ke=function(e){var t=e.bg,n=e.color,r=e.bgNoAlpha,o=e.colorNoAlpha,i=Object(I.f)(),a=i.colors,c=i.colorMod;return{bg:r?a[t]:c(a[t]).alpha(.08),color:o?a[n]:c(a[n]).alpha(.72)}};var Se={name:"2q0wp1-Label",styles:"flex:0 0 auto;;label:Label;"},xe={name:"2q0wp1-Label",styles:"flex:0 0 auto;;label:Label;"},Re={name:"18mqqn8-Label",styles:"flex:0 0 auto;cursor:pointer;;label:Label;"},Ee={name:"zzd7cz-Label",styles:"margin:0 -4px;flex:0 0 auto;;label:Label;"},_e=s.a.forwardRef((function(e,t){var n=e.color,r=void 0===n?Ce.BLUE:n,o=e.iconUrl,i=e.icon,c=e.name,s=e.subText,p=e.linkText,h=e.link,b=e.expandable,v=e.isExpanded,m=e.showDeleteButton,g=e.onDelete,y=e.onClick,O=e.style,j=e.css,w=a()(e,["color","iconUrl","icon","name","subText","linkText","link","expandable","isExpanded","showDeleteButton","onDelete","onClick","style","css"]),C=Object(N.b)().Mobile,k=Object(I.f)().fontWeights,S=ke(r),x=S.bg,R=S.color,E=h&&!b?M.a:"div",_=null,P=null;return m?P=u.a:b?_=v?l.a:d.a:h&&(_=f.a),Object(L.g)(E,Object.assign({ref:t,css:Object(A.a)(Object.assign({flex:"0 1 auto",display:"flex",alignItems:"center",justifyContent:"flex-start",background:x,padding:"0 8px",height:C?28:30,borderRadius:C?14:15,textDecoration:"none",fontSize:C?13:14,lineHeight:C?"16px":"18px",color:R,overflow:"hidden"},j),";label:Label;")},h&&{href:h},{style:Object.assign({cursor:_?"pointer":"default"},O),onClick:y},w),o?Object(L.g)("img",{src:Object(D.imgUrl)(o,"m"),height:C?16:19,width:C?16:19,alt:"",css:Se}):Boolean(i)&&Object(L.g)(i,{fill:R,size:C?17:20,css:xe}),Object(L.g)(T.Flex,{overflow:"hidden",flex:"0 1 auto",mx:"4px"},Object(L.g)(T.Text,{flexShrink:0,fontWeight:k.bold,mt:C?"1px":0},c)),Boolean(s||p)&&Object(L.g)(T.Text,{flex:"0 0 auto",display:"flex",alignItems:"center",mt:C?"1px":0,mr:"4px"},s||p),Boolean(P)&&Object(L.g)(P,{fill:R,size:18,onClick:g,css:Re}),Boolean(_)&&Object(L.g)(_,{fill:R,size:C?23:26,css:Ee}))}));_e.displayName="Label";var Ae={name:"134vuwg-text",styles:"margin-left:4px;text-decoration:none;color:inherit;;label:text;"},Te=function(e){var t=e.inviter,n=a()(e,["inviter"]),r=t.name,o=t.urlToken,i=Object(L.g)(s.a.Fragment,null,"谢邀",Object(L.g)("a",{"data-za-detail-view-id":8126,href:"https://www.zhihu.com/people/".concat(o),css:Ae},"@".concat(r)));return Object(L.g)(_e,Object.assign({icon:p.a,name:i},n))};var Ne=function(e){var t=e.data,n=a()(e,["data"]),r=t.url,o=t.title;return Object(L.g)(_e,Object.assign({},n,{name:"知乎蓝宝书收录",icon:m,subText:o,link:r}))};function Ie(e){var t=e.data,n=a()(e,["data"]),r=t.name,o=t.iconUrl,i=t.linkText,c=t.link;return Object(L.g)(_e,Object.assign({},n,{color:Ce.PURPLE,name:r,subText:i,iconUrl:o,icon:g.a,link:c}))}var Me={answer:"品牌特邀",article:"特邀文章"};function De(e){var t=e.data,n=e.type,r=void 0===n?"answer":n,o=Boolean(null==t?void 0:t.subText),i=t.name,a=void 0===i?"谢邀":i,c=t.iconUrl;return Object(L.g)(_e,{iconUrl:c,icon:h.a,name:o?a:Me[r],subText:(null==t?void 0:t.subText)||"本文由品牌邀请撰写"})}var Le=["relevant","editor_recommendation","zhizhi_plan_rumour_deny","zhizhi_plan_recommend","zhizhi_plan_edu_recommend","zhizhi_plan_baby_recommend","zhizhi_plan_acg_recommend","zhizhi_plan_outing_recommend","zhizhi_plan","online_roundtable","roundtable","special","raise_hand","weekly","daily","professional"],Pe={online_roundtable:y.a,relevant:O.a,editor_recommendation:j.a,roundtable:y.a,special:w.a,raise_hand:w.a,weekly:C.a,daily:k.a,professional:S.a,zhizhi_plan_recommend:x.a,zhizhi_plan_edu_recommend:x.a,zhizhi_plan_baby_recommend:x.a,zhizhi_plan_acg_recommend:x.a,zhizhi_plan_outing_recommend:x.a,zhizhi_plan_rumour_deny:R.a,zhizhi_plan:x.a},ze={online_roundtable:"圆桌收录",relevant:"亲自答",editor_recommendation:"编辑推荐",roundtable:"圆桌收录",special:"专题收录",raise_hand:"举手行动",weekly:"周刊收录",daily:"日报收录",professional:"专业",zhizhi_plan_recommend:"致知计划",zhizhi_plan_edu_recommend:"致知计划",zhizhi_plan_baby_recommend:"致知计划",zhizhi_plan_acg_recommend:"致知计划",zhizhi_plan_outing_recommend:"致知计划",zhizhi_plan_rumour_deny:"专业辟谣",zhizhi_plan:"致知计划",science_seeking_truth_recommend:"科学求真"},Be=Object.assign({},ze,{weekly:"知乎周刊收录",daily:"知乎日报收录"}),Fe={relevant:"此回答由问题相关方亲自撰写",professional:"已有 {} 人赠与了专业徽章"},Ue={online_roundtable:"圆桌",relevant:"亲自答",editor_recommendation:"编辑推荐",roundtable:"圆桌",special:"专题收录",raise_hand:"举手行动",weekly:"周刊收录",daily:"日报收录",professional:"内容专业",zhizhi_plan_recommend:"致知计划",zhizhi_plan_edu_recommend:"致知计划之教育季",zhizhi_plan_baby_recommend:"致知计划之母婴季",zhizhi_plan_acg_recommend:"致知计划之动漫游戏季",zhizhi_plan_outing_recommend:"致知计划之未来出行季",zhizhi_plan_rumour_deny:"辟谣标识"},qe=s.a.forwardRef((function(e,t){var n=e.children,r=e.placement,i=void 0===r?"bottom":r,u=e.onClick,l=e.onPopoverClosed,d=a()(e,["children","placement","onClick","onPopoverClosed"]),f=Object(I.f)(),p=Object(c.useRef)(),h=Object(c.useState)(!1),b=o()(h,2),v=b[0],m=b[1],g=Object(c.useRef)(),y=Object(N.b)().Mobile,O=Boolean(n),j=Object(B.c)((function(e){var n,r;p.current=(r=e,(n=t)?("function"==typeof n?n(r):n.current=r,r):r)})),w=Object(B.c)((function(e){u&&u(e),O&&m(!v)})),C=Object(B.c)((function(){g.current&&clearTimeout(g.current),O&&!v&&m(!0)})),k=Object(B.c)((function(){g.current=setTimeout((function(){m(!1)}),100)}));return Object(L.g)(s.a.Fragment,null,Object(L.g)(_e,Object.assign({},d,{ref:j,expandable:O,isExpanded:v,onClick:w},!y&&{onMouseOver:C,onMouseLeave:k})),O&&Object(L.g)(we,{isOpen:v,arrowed:!0,globalClose:!0,listenResize:!0,target:p.current,placement:i,boundary:{padding:16},customStyle:{borderRadius:"8px",boxShadow:"0 -3px 10px 0 rgba(0, 0, 0, 0.1)"},backgroundColor:f.colors.GBK99C,onClose:k,onAfterLeave:l},Object(L.g)("div",{onMouseOver:C,onMouseLeave:k},n)))}));qe.displayName="ExpandableLabel";var Ve=function(e){return{icon:Pe[e],title:Be[e],shortTitle:ze[e],description:Fe[e],zaName:Ue[e]}},He=function(e,t){return e.includedInfos?e.includedInfos.find((function(e){return e.type===t})):null},Ke=function(e){var t=e.data,n=e.onLinkClick,r=t.type,o=t.icon,i=t.title,a=t.description,s=t.zaName,u=t.link,l=Object(N.b)().Mobile,d=Object(I.f)(),f=Object(c.useRef)(),p=Object(B.c)((function(e){P.a.trackEvent(f.current,{id:3771,name:"多个"},{button:{text:s}}),u&&n&&n(e,u,r)}));return Object(L.g)(_e,Object.assign({ref:f,color:Ce.GOLDEN,icon:o,name:i},u&&{zaText:!0,shouldTrackShow:!0,zaBlock:r},{subText:a,link:u,onClick:p,css:Object(A.a)({height:l?34:36,borderRadius:0,background:"none","&:hover":{background:u?d.colors.GBK10A:"none"}},";label:ContentItem;")}))},Qe=function(e){var t=e.data,n=e.onLinkClick,r=Object(N.b)().Mobile;return Object(L.g)(T.Box,{py:"8px",maxWidth:r?"calc(100vw - 34px)":"400px"},t.map((function(e){return Object(L.g)(Ke,{key:e.type,data:e,onLinkClick:n})})))},We=function(e){return Object(c.useMemo)((function(){var t=[];if(Le.forEach((function(n){var r=function(e,t){switch(t){case"online_roundtable":return e.onlineRoundtable?Object.assign({},Ve(t),{description:e.onlineRoundtable.name,link:"https://www.zhihu.com/roundtable/".concat(e.onlineRoundtable.urlToken)}):null;case"relevant":return e.relevantInfo&&e.relevantInfo.isRelevant?Ve(t):null;case"professional":return e.recognitionInfo&&e.recognitionInfo.recognizedCount?Object.assign({},Ve(t),{description:Fe[t].replace("{}",String(e.recognitionInfo.recognizedCount)),link:"#!",members:e.recognitionInfo.latestRecognizers}):null;case"zhizhi_plan":var n=e.includedInfos?e.includedInfos.find((function(e){return e.commonType===t&&!Le.includes(e.type)})):null;return n?{icon:Pe[n.type]||Pe[t],title:Be[n.type]||Be[t],shortTitle:ze[n.type]||ze[t],description:n.title,link:n.url,zaName:Ue[n.type]||n.type}:null;case"special":case"raise_hand":var r=He(e,t);if(!r)return null;var o=Ve(t);return Object.assign({},o,{title:r.subtitle||o.title,shortTitle:r.subtitle||o.shortTitle,description:r.title,link:r.url});default:var i=He(e,t);return i?Object.assign({},Ve(t),{description:i.title,link:i.url}):null}}(e,n);r&&t.push(Object.assign({type:n},r))})),!t.length)return null;var n=t.length>1&&"online_roundtable"!==t[0].type,r=t[0];return n&&(r.meta="relevant"===r.type?"及 ".concat(t.length-1," 项收录"):"等 ".concat(t.length," 项收录")),{items:t,label:r,expandable:n}}),[e])},Ge=function(e){var t=e.placement,n=void 0===t?"bottom":t,r=e.data,o=e.onExpand,i=e.onLinkClick,a=We(r),s=Object(c.useRef)(),u=Object(c.useRef)(!1);if(!a)return null;var l=a.label,d=a.items,f=a.expandable,p=l.type,h=l.icon,b=l.title,v=l.shortTitle,m=l.meta,g=l.description,y=l.link,O=l.zaName,j=Boolean(y&&!f),w=j?qe:z.e;Object(c.useLayoutEffect)((function(){P.a.setModule(s.current,{module:"Content",module_name:O}),Object(F.onViewedOnce)(s.current,(function(){P.a.trackCardShow(s.current,{id:3769,name:f?"多个":"一个"})}))}),[f,O]);var C=Object(B.c)((function(){u.current=!1})),k=Object(B.c)((function(e){f&&!u.current&&(u.current=!u.current,o&&o(a)),!f&&j&&(P.a.trackEvent(s.current,{id:3771,name:"一个"},{button:{text:O}}),i&&i(e,y,p))})),S={as:qe,zaType:"Block"};return j?S={zaText:!0,zaBlock:p,shouldTrackShow:!0}:f&&(S=Object.assign({},S,{zaText:!0,onPopoverClosed:C})),Object(L.g)(w,Object.assign({},S,{ref:s,color:Ce.GOLDEN,icon:h,name:m&&v||b,subText:m||g,link:y,placement:n,onClick:k}),f&&Object(L.g)(Qe,{data:d,onLinkClick:i}))},Ze=function(){return Object(L.g)(_e,{color:Ce.GOLDEN,icon:O.a,name:"亲自答",subText:"此回答由问题相关方亲自撰写"})},Ye=function(e){var t=e.color,n=void 0===t?Ce.GREY:t,r=e.icon,o=e.name,i=e.subText,a=e.moreLink,c=e.renderMoreIcon,u=e.description,l=Object(N.b)().Mobile,d=ke(n).color,f=null;return f=a&&c?Object(L.g)(s.a.Fragment,null,i,Object(L.g)(M.a,{href:a,css:Object(A.a)({marginLeft:i?4:0,textDecoration:"none",color:"inherit"},";label:PopoverContent;")},c)):i,Object(L.g)(T.Box,{py:"8px",maxWidth:l?"calc(100vw - 34px)":"400px"},Object(L.g)(_e,{color:n,icon:r,name:o,subText:f,css:Object(A.a)({height:l?32:36,borderRadius:0,background:"none"},";label:PopoverContent;")}),Boolean(u)&&Object(L.g)(T.Text,{lineHeight:l?"16px":"18px",fontSize:l?"13px":"14px",color:d,mx:"12px",mb:"8px"},u))},Je=function(e){var t=e.disclaimerInfo,n=t.excerpt,r=t.description,o=t.subDescription,i=n?"创作声明":r,a=n&&"内容".concat(n);return Object(L.g)(qe,{name:i,subText:a},Object(L.g)(Ye,{color:Ce.BLUE,name:i,subText:a,description:o}))},$e=function(e){var t=e.annotationDetail;if(!t)return null;var n=t.detail,r=t.member,o=t.reasonDescription||"该内容已被标记",i="strong"===t.type&&E.a,a=r?"".concat(r.name,"："):"";return Object(L.g)(qe,{color:Ce.GREY,icon:i,name:o},Object(L.g)(Ye,{icon:i,name:o,description:(n||a)&&Object(L.g)("span",{dangerouslySetInnerHTML:{__html:"".concat(a).concat(n||"未填写原因")}})}))};var Xe={name:"14z35ax-HelpIcon",styles:"vertical-align:bottom;;label:HelpIcon;"},et=function(e){var t=e.fill,n=Object(I.f)().colors.GBL05A;return Object(L.g)(_.a,{fill:t||n,size:18,css:Xe})},tt=function(e){var t=e.collapseReason;return Object(L.g)(qe,{color:Ce.GREY,name:"该回答已被折叠"},Object(L.g)(Ye,{name:"该回答已被折叠",renderMoreIcon:Object(L.g)(et,null),moreLink:"/question/20120168/answer/35704072",description:"折叠原因：".concat(t)}))},nt={color:"inherit",textDecoration:"underline"},rt=function(e){var t=e.abnormalDetail,n=void 0===t?{description:"回答建议修改",reason:""}:t,r=n.description,o=n.reasonId,i=n.reason,a=[10015,30005].includes(o)?Object(L.g)(s.a.Fragment,null,"不规范转载",Object(L.g)(M.a,{href:"https://www.zhihu.com/question/20258015",css:nt,onClick:function(e){return e.stopPropagation()}},i)):i,c=10027===o?Object(L.g)(s.a.Fragment,null,"作者修改内容或举证后，回答会重新展示。如果一周内未得到有效修改，回答会自动折叠。",Object(L.g)("br",null),"知乎严格按照公开的流程处理各类投诉，不收任何费用也不与任何中介机构合作。",Object(L.g)(M.a,{href:"https://www.zhihu.com/term/zhihu-terms#sec-report",css:nt},"投诉流程")):"作者修改内容通过后，回答会重新显示。如果一周内未得到有效修改，回答会自动折叠。";return Object(L.g)(qe,{color:Ce.GREY,name:r,subText:a},Object(L.g)(Ye,{name:r,renderMoreIcon:Object(L.g)(et,null),moreLink:"https://www.zhihu.com/question/24752645",description:c}))};var ot={name:"pf9kc0-Labels",styles:"& > div, & > a{margin-right:8px;margin-bottom:8px;};label:Labels;"},it=function(e){var t=e.answerCollapsed,n=e.answerAbnormal,r=e.commercial,o=e.thanksForInviting,i=e.positive,c=e.bluebook,s=e.annotation,u=e.disclaimer,l=e.adPromotion,d=e.campaign,f=e.limit,p=void 0===f?2:f,h=a()(e,["answerCollapsed","answerAbnormal","commercial","thanksForInviting","positive","bluebook","annotation","disclaimer","adPromotion","campaign","limit"]);if(!(t||n||r||o||i||c||s||u||l||d))return null;var b=[t||n,r||o||l||c,i,s||u,d].filter(Boolean).slice(0,p);return Object(L.g)(T.Flex,Object.assign({flexDirection:"row",flexWrap:"wrap",pt:"8px",css:ot},h),b.map((function(e,t){return Object(L.g)("div",{key:t},e)})))};it.propTypes={answerCollapsed:X.a.node,answerAbnormal:X.a.node,commercial:X.a.node,thanksForInviting:X.a.node,bluebook:X.a.node,positive:X.a.node,annotation:X.a.node,disclaimer:X.a.node,adPromotion:X.a.node,campaign:X.a.node};var at=s.a.memo(it)},function(e,t,n){"use strict";var r=n(2),o=n(11),i=n.n(o),a=n(1370);t.a=function(e){var t=e.className;return Object(r.c)("div",{className:i()("Reviewing",t),children:[Object(r.c)("div",{className:"Reviewing-top",children:[Object(r.b)(a.a,{size:16}),Object(r.b)("span",{className:"Reviewing-tip",children:"内容审核中"})]}),Object(r.b)("div",{className:"Reviewing-text",children:"内容将在审核通过后自动发布"})]})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n(32),o=n(4),i=n(13),a=n(14),c=n(15),s=n(16),u=n(9),l=n(2),d=n(1),f=n(42),p=n(11),h=n.n(p),b=n(873),v=n(150),m=n(944);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var o=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var y=function(e){Object(c.a)(n,e);var t=g(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={previewImg:null},e.handlePreview=function(t){var n=t.target,r=e.props.onPreviewImage;"function"==typeof r?r(t).catch((function(){e.setState({previewImg:n})})):e.setState({previewImg:n})},e}return Object(a.a)(n,[{key:"mount",value:function(){var e=this;this.imagesGifNode=this.root.getElementsByClassName("comment_gif"),this.imagesNode=this.root.getElementsByClassName("comment_img"),this.imagesStickerNode=this.root.getElementsByClassName("comment_sticker"),this.imgNode=this.root.getElementsByClassName("origin_image zh-lightbox-thumb"),this.imagesNodes=Array.from([].concat(Object(o.a)(this.imagesGifNode),Object(o.a)(this.imagesNode),Object(o.a)(this.imagesStickerNode),Object(o.a)(this.imgNode))).map((function(t){var n=t.dataset||{},r=n.width,o=n.height,i=n.rawwidth,a=n.rawheight,c=Number(r||i),s=Number(o||a),u=document.createElement("div");u.className="Richtext-content_img",t.parentNode.replaceChild(u,t);var l=t.getAttribute("href")||t.getAttribute("src"),d=new Image,f=t.getAttribute("class");return"comment_sticker"!==f&&u.addEventListener("click",e.handlePreview),d.className=f,d.src=l,d.dataset.original=Object(v.imgUrl)(l,"r"),d.dataset.rawwidth=c,d.onload=function(){c===s||"comment_sticker"===f?u.classList.add("Richtext-content_img-square"):c>s?u.classList.add("Richtext-content_img-square--wideShape"):u.classList.add("Richtext-content_img-square--highShape"),u.appendChild(d)},u}))}},{key:"unmount",value:function(){this.imagesNodes&&this.imagesNodes.forEach((function(e){Object(f.unmountComponentAtNode)(e)}))}},{key:"componentDidMount",value:function(){this.mount()}},{key:"componentWillUpdate",value:function(e){this.props.html!==e.html&&this.unmount()}},{key:"componentDidUpdate",value:function(e){e.html!==this.props.html&&this.mount()}},{key:"componentWillUnmount",value:function(){this.unmount()}},{key:"render",value:function(){var e=this,t=this.state.previewImg,n=this.props,o=n.html,i=n.className,a=n.prefix,c=Object(r.a)(n,["html","className","prefix"]);return Object(l.c)("div",{className:h()("CommentRichText",i),ref:function(t){return e.root=t},children:[a,Object(l.b)(m.a,Object.assign({html:o},c)),t&&Object(l.b)(b.a,{className:"CommentRichText-ImageView",img:t,onClose:function(){return e.setState({previewImg:null})}})]})}}]),n}(d.Component)},,function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(18),a=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zm-.034 2.966c1.949 0 1.485 1.807 1.485 2.211 0 .115-.785 7.79-.785 7.79h-1.4s-.785-7.623-.785-7.738c0-.416-.463-2.263 1.485-2.263zm1.057 13.522c-.294.287-.647.43-1.056.43-.41 0-.762-.142-1.058-.43a1.429 1.429 0 0 1-.443-1.07c0-.41.148-.762.443-1.057a1.443 1.443 0 0 1 1.058-.442c.409 0 .762.143 1.056.43.296.287.443.644.443 1.07 0 .427-.147.783-.443 1.07z",fillRule:"evenodd"}))};a.defaultProps={name:"Alert"},t.a=a},function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(18),a=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M7.523 13.5h8.954c-.228 2.47-2.145 4-4.477 4-2.332 0-4.25-1.53-4.477-4zM12 21a9 9 0 1 1 0-18 9 9 0 0 1 0 18zm0-1.5a7.5 7.5 0 1 0 0-15 7.5 7.5 0 0 0 0 15zm-3-8a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm6 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"}))};a.defaultProps={name:"Emotion"},t.a=a},function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(18),a=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M6 3.956v16.088C6 21.124 6.517 22 7.9 22c.326 0 .533-.087.896-.236L22 13.784c.571-.355 1.143-.87 1.143-1.784S22.57 10.571 22 10.216L8.796 2.236C8.433 2.087 8.226 2 7.9 2 6.514 2 6 2.876 6 3.956z"}))};a.defaultProps={name:"Play"},t.a=a},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(33),o=n.n(r),i=n(1),a=n.n(i);function c(e){return a.a.createElement("svg",o()({viewBox:"0 0 24 19",width:"24",height:"18",fill:"#e6eaee"},e),a.a.createElement("path",{fillRule:"evenodd",d:"M12.8 2.5c4.4 0 9.4 15.6 9.4 16H0S2.8 6 6 6.4c1.2 0 1.8 5.8 1.8 5.8s2.5-9.5 5-9.8zm7.8 3c-2 0-3-1.2-3-2.7 0-1.6 1.5-2.8 3-2.8 1.6 0 2.8 1.2 2.8 2.8 0 1.5-1.2 2.7-2.8 2.7z"}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(1),o=n.n(r);function i(e){return o.a.createElement("svg",{width:"12",height:"10",viewBox:"0 0 12 10",style:e.style},o.a.createElement("mask",{id:"ViewIcon","mask-type":"alpha",maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"12",height:"10"},o.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 4.8C12 2.56 8.72727 0 6 0C3.27273 0 0 2.56 0 4.8C0 7.04 3.27273 9.6 6 9.6C8.72727 9.6 12 7.04 12 4.8ZM3.79994 4.8C3.79994 3.58497 4.78491 2.6 5.99994 2.6C7.21496 2.6 8.19994 3.58497 8.19994 4.8C8.19994 6.01502 7.21496 7 5.99994 7C4.78491 7 3.79994 6.01502 3.79994 4.8Z",fill:"black"})),o.a.createElement("g",{mask:"url(#ViewIcon)"},o.a.createElement("rect",{x:"-2",y:"-2.8",width:"16",height:"16",fill:"#8590A6"})))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(1),o=n.n(r);function i(e){return o.a.createElement("svg",{width:"9",height:"11",viewBox:"0 0 9 11",style:e.style},o.a.createElement("path",{d:"M0 1C0 0.447715 0.447715 0 1 0H8C8.55228 0 9 0.447715 9 1V9.13148C9 9.93018 8.10985 10.4066 7.4453 9.96353L5.0547 8.3698C4.7188 8.14587 4.2812 8.14587 3.9453 8.3698L1.5547 9.96353C0.890146 10.4066 0 9.93018 0 9.13148V1Z",fill:"#8590A6"}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(1),o=n.n(r);function i(e){return o.a.createElement("svg",{width:"10",height:"12",viewBox:"0 0 10 12",style:e.style},o.a.createElement("mask",{id:"UpdateTimeIcon","mask-type":"alpha",maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"10",height:"12"},o.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.0456 3.17377C9.79834 2.8189 10.1837 1.94914 9.91402 1.14002C9.62296 0.266822 8.67913 -0.205091 7.80593 0.0859764L4.50803 1.18527C4.40079 1.21835 4.29816 1.26195 4.20137 1.31488C3.97216 1.43959 3.78091 1.6137 3.63673 1.81892C3.50452 2.00645 3.41003 2.22248 3.3643 2.45598C3.32608 2.64908 3.32175 2.85082 3.35567 3.0525C3.38728 3.24338 3.45134 3.42332 3.54198 3.58645C3.6623 3.80402 3.82732 3.98694 4.02117 4.1273C4.21884 4.27093 4.44931 4.37218 4.69922 4.4177C4.80621 4.43741 4.91575 4.44673 5.02636 4.44494C5.3467 4.45005 5.65899 4.5474 5.9257 4.7256C6.19977 4.90873 6.41338 5.16901 6.53952 5.47354L8.07925 4.83577L6.53952 5.47355C6.66566 5.77808 6.69866 6.11317 6.63436 6.43646L8.26893 6.7616L6.63436 6.43646C6.57005 6.75975 6.41132 7.05671 6.17825 7.28978C5.94517 7.52286 5.64821 7.68159 5.32492 7.7459L5.65006 9.38047L5.32492 7.7459C5.00164 7.8102 4.66654 7.7772 4.36201 7.65106L3.72423 9.19079L4.36201 7.65106C4.05748 7.52492 3.79719 7.3113 3.61406 7.03723C3.43093 6.76316 3.33319 6.44094 3.33319 6.11132C3.33319 5.19089 2.58703 4.44473 1.66659 4.44473C0.74616 4.44473 0 5.19089 0 6.11132C0 7.10019 0.293232 8.06684 0.842616 8.88906C1.392 9.71127 2.17286 10.3521 3.08645 10.7305C4.00004 11.1089 5.00533 11.208 5.97519 11.015C6.94506 10.8221 7.83593 10.3459 8.53517 9.64671C9.2344 8.94747 9.71058 8.0566 9.9035 7.08673C10.0964 6.11687 9.99741 5.11158 9.61899 4.19799C9.46794 3.83334 9.2751 3.48985 9.0456 3.17377Z",fill:"black"})),o.a.createElement("g",{mask:"url(#UpdateTimeIcon)"},o.a.createElement("rect",{x:"-3.88873",y:"-2.77719",width:"17.777",height:"17.777",fill:"#8590A6"})))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(1),o=n.n(r),i=n(131),a=Object.assign;var c=function(e){return o.a.createElement(i.a,a({width:"24",height:"24",fill:"none",viewBox:"0 0 24 24"},e),o.a.createElement("path",{d:"M11.25 4a.25.25 0 00-.25.25V11H4.25a.25.25 0 00-.25.25v1.5c0 .138.112.25.25.25H11v6.75c0 .138.112.25.25.25h1.5a.25.25 0 00.25-.25V13h6.75a.25.25 0 00.25-.25v-1.5a.25.25 0 00-.25-.25H13V4.25a.25.25 0 00-.25-.25h-1.5z",clipRule:"evenodd"}))}},function(e,t,n){e.exports=n.p+"assets/liukanshan_coin.29bf8333.svg"},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(2),o=n(90),i=n(66);function a(e){var t=Object(i.d)((function(){return n.e(9).then(n.bind(null,1446))}));return Object(r.b)(o.Box,{my:"14px",css:{minHeight:20},children:t?Object(r.b)(t,Object.assign({width:"70px",height:"20px",css:{display:"block"}},e)):null})}},function(e,t,n){"use strict";var r=n(110),o=n.n(r),i=n(1),a=n.n(i),c=function e(t){var n=function(e,t){return Object.keys(t).reduce((function(e,n){var r=e[n];if(delete e[n],r){var o=t[n],i="function"==typeof o?o(e):o;return Object.assign({},e,i,i&&i.style&&{style:Object.assign({},e.style,i.style)})}return e}),Object.assign({},e))}(t,e.mapProps),r=n.name,i=n.className,c=n.defaultClassName,s=n.size,u=n.center,l=o()(n,["name","className","defaultClassName","size","center"]),d=a.a.createElement("svg",Object.assign({className:"".concat(c," ").concat(c,"--").concat(r).concat(i?" ".concat(i):"")},l,s&&{width:s,height:s}));return u?a.a.createElement("span",{style:e.strutStyle},"​",d):d};c.defaultProps={defaultClassName:"Icon",fill:"currentColor"},c.mapProps={text:{size:"1.2em"}},c.strutStyle={display:"inline-flex",alignItems:"center"},t.a=c},,function(e,t,n){"use strict";var r=n(13),o=n(14),i=n(15),a=n(16),c=n(9),s=n(2),u=n(1),l=n.n(u),d=n(19),f=n(3),p=n.n(f),h=n(25),b=n(34),v=n(11),m=n.n(v),g=n(176),y=n(30),O=n(1371),j=n(1279),w=n(805),C=n(1436),k=n(793),S=n(1338),x=n(1343),R=n(1337),E=n(18),_=function(e){return l.a.createElement(E.a,e,l.a.createElement("path",{d:"M11.31.813c2.475.403 3.584 2.211 2.827 5.746l-.062.275-.043.173h3.689c2.17 0 3.694 1.704 3.487 3.798l-.024.197-.034.194-.145.732-.025.102-1.823 6.32c-.4 1.384-1.741 2.601-3.085 2.841l-.184.027-.126.007-.166-.001-8.152-.638-.15-.018-.149-.03-.014-.004H3.385a2.612 2.612 0 0 1-2.591-2.277l-.016-.169-.005-.165V9.615A2.612 2.612 0 0 1 3.219 7.01l.166-.006h2.904l.103-.123.476-.59c1.413-1.77 1.883-2.496 2.082-3.3l.025-.11.04-.207c.025-.153.034-.269.037-.365a1.638 1.638 0 0 1 1.52-1.524c.215-.021.463-.016.738.029zm-.324 1.936l-.012.097-.049.3c-.221 1.193-.677 2.016-2.09 3.824l-.2.253-.613.767-.21.255-.187.21V18.63l8.078.632h.032c.463-.052 1.126-.584 1.425-1.178l.062-.138.048-.14 1.809-6.259.145-.732c.2-1.007-.38-1.77-1.36-1.838l-.143-.005h-4.988a.97.97 0 0 1-.935-1.304l.022-.067.015-.046.217-.718c.817-2.888.38-3.802-.943-4.065l-.123-.022zM5.75 18.57V8.966l-2.365.001a.648.648 0 0 0-.642.553l-.007.095v8.308c0 .325.24.595.553.641l.096.007H5.75z"}))};_.defaultProps={name:"LikeOutline"};var A=_,T=function(e){return l.a.createElement(E.a,e,l.a.createElement("path",{d:"M11.93 2C6.447 2 2 6.446 2 11.93 2 17.438 6.467 22 11.93 22c.986 0 2.163-.252 3.548-.745a2.6 2.6 0 0 1 1.556-.059l2.454.67a1.936 1.936 0 0 0 2.377-2.378l-.669-2.453a2.6 2.6 0 0 1 .06-1.557c.492-1.385.744-2.562.744-3.547C22 6.467 17.437 2 11.93 2zm0 2C16.343 4 20 7.581 20 11.93c0 .725-.206 1.69-.63 2.878l-.085.268a4.6 4.6 0 0 0-.018 2.485l.638 2.344-2.344-.638a4.6 4.6 0 0 0-2.753.104c-1.188.423-2.153.629-2.877.629C7.58 20 4 16.342 4 11.93A7.93 7.93 0 0 1 11.93 4z"}))};T.defaultProps={name:"SpeechBalloonOutline"};var N=T,I=n(234),M=n(208),D=n(869),L=n(26),P=n(101),z=n(432),B=n(96),F=n(940),U=n(886),q=n(899),V=n(386),H=n(1168),K=n(1277),Q=n(24);function W(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var G=function(e){Object(i.a)(n,e);var t=W(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).zaRef=Object(u.createRef)(),e.state={isReplying:!1,deleteModal:!1},e.toggleReply=e.context.authRequired((function(){e.setState({isReplying:!e.state.isReplying})}),"club_post"===e.props.type?Q.V.reply_club:void 0,L.b),e.like=e.context.authRequired((function(t){var n=e.props;(0,n.onLike)(n.comment.id,t),e.zaRef.current.trackEvent({action:"Upvote",eventType:"Click",elementLocation:{type:"Button"}})}),Q.V.like,L.b),e.dislike=e.context.authRequired((function(){var t=e.props;(0,t.onDislike)(t.comment.id),e.zaRef.current.trackEvent({action:"UnUpvote",eventType:"Click",elementLocation:{type:"Button"}})}),Q.V.like,L.b),e.delete=function(){var t=e.props;return(0,t.onDelete)(t.comment.id)},e.feature=function(t){var n=e.props,r=n.onFeature,o=n.comment.id;r(t?"".concat(o,"_featured"):o)},e.collapse=function(){var t=e.props;(0,t.onCollapse)(t.comment.id)},e.approve=function(){var t=e.props;(0,t.onApprove)(t.comment.id)},e.reject=function(){var t=e.props;(0,t.onReject)(t.comment.id)},e.showConversation=function(t){var n=e.props;(0,n.onShowConversation)({commentId:n.comment.id,isAnchorComments:t})},e.stopReply=function(){e.setState({isReplying:!1})},e.closeReportModal=function(e){if(e){var t=e.result.payload,n=t&&t.message||t&&t.code&&"举报失败";e.commentDeleteResult&&!(e.commentDeleteResult.payload||{}).code?F.b.showModal({reportText:n}):t&&t.sarcasmRecommend||Object(B.b)(n||"举报成功")}},e.handleCloseDelete=function(){return e.setState({deleteModal:!1})},e.handleDelete=function(){return e.setState({deleteModal:!0})},e.handleClick=function(t,n){var r=e.props.parent,o=r.type,i=r.id;Object(M.c)(Object(D.a)({type:o,id:i},{utm_campaign:"routine",utm_medium:"internal",utm_source:"video",utm_content:n})),t.stopPropagation(),t.preventDefault()},e}return Object(o.a)(n,[{key:"renderRoleInfo",value:function(e,t){return"normal"===e?null:Object(s.b)("span",{className:"CommentItemV2-roleInfo",children:"ancestor"===e||"author"===e&&"question"===t?" (提问者) ":" (作者) "})}},{key:"renderReplyTo",value:function(){var e=this.props.comment,t=e.replyToAuthor,n=e.resourceType;if(!t)return null;var r=t.member,o=t.role,i=t.mask;return Object(s.c)(u.Fragment,{children:[Object(s.b)("span",{className:"CommentItemV2-reply",children:"回复"}),Object(s.b)(U.a,{noBadge:!0,noHoverCard:!0,user:r||i||{}}),this.renderRoleInfo(o,n)]})}},{key:"renderItem",value:function(){var e,t=this,n=this.props,r=n.isConversation,o=n.ownerAuthorIsOrg,i=n.parent,a=i.canComment,c=(a=void 0===a?{status:!0}:a).status,l=i.questionType,d=n.parent,f=n.commentNeedsReview,p=n.comment,h=n.onReply,b=n.status,v=n.type,E=n.canOperate,_=n.commentPattern,T=n.rootCommentId,I=n.byComment,M=n.isReverseAndStatusOpen,D=n.hasRecommend,L=n.permission.canBrandAdminEdit,P=n.showCollapsed,B=n.isMobile,Q=this.state.isReplying,W=p.id,G=p.author,Z=p.richText,Y=p.content,J=p.voteCount,$=p.replyToAuthor,X=p.isAuthor,ee=p.createdTime,te=p.featured,ne=p.voting,re=p.reviewing,oe=p.disliked,ie=p.resourceType,ae=p.childCommentCount,ce=p.allowDelete,se=p.allowVote,ue=p.canRecommend,le=p.canCollapse,de=p.collapsedReason,fe=void 0===de?"":de,pe=p.isDelete,he=p.collapsed,be=p.top,ve=he&&!P,me=ve?"该评论已被折叠":pe?function(e){var t=e.content,n=e.deleteReason;if(n){var r=JSON.stringify({button:{text:String(n.reasonId)}}).replace(/"/g,"&quot;");return'<a href="'.concat(n.url,'" target="_blank" data-za-detail-view-id="7641" data-za-extra="').concat(r,'">').concat(n.tip,"</a>")}return t}(p):Z||Y,ge=pe||ve,ye=G||{},Oe=ye.role,je=ye.mask,we=(null==G?void 0:G.member)||je,Ce=Boolean($),ke=te&&(ae>0||Ce)&&!r||I&&Ce||M&&Ce,Se=X||ce&&("question"!==v||"commercial"===l),xe=Object(s.c)("div",{className:"CommentItemV2-footer",children:[Object(s.c)(y.c,{className:m()("CommentItemV2-likeBtn",ne&&"is-liked"),preset:"plain",onClick:this.like,disabled:X||!c,children:[Object(s.b)(O.a,{style:{marginRight:5},center:!0,size:16}),J>0?J:"赞"]}),he&&fe&&Object(s.c)("div",{className:"CommentItemV2-walleTag",children:["阴阳怪气自动折叠"===fe&&Object(s.b)(j.a,{size:16,className:"CommentItemV2-walleIcon"}),fe]}),ke&&Object(s.c)(y.c,{preset:"plain",className:"CommentItemV2-talkBtn",onClick:function(){return t.showConversation(Ce)},children:[Object(s.b)(w.a,{style:{marginRight:5},center:!0,size:16}),"查看回复"]}),!X&&c&&!he&&Object(s.c)(y.c,{preset:"plain",className:m()({"CommentItemV2-hoverBtn":!Q}),onClick:this.toggleReply,children:[Object(s.b)(C.a,{style:{marginRight:5},center:!0,size:16}),Q?"取消回复":"回复"]}),ue&&!D&&E&&Object(s.c)(y.c,{className:m()({"CommentItemV2-hoverBtn":!X&&!Q}),preset:"plain",onClick:function(){return t.feature(te)},children:[Object(s.b)(k.a,{style:{marginRight:5},center:!0,size:16}),te?"取消推荐":"推荐"]}),le&&!X&&Object(s.c)(y.c,{className:m()({"CommentItemV2-hoverBtn":!X&&!Q}),preset:"plain",onClick:this.collapse,children:[Object(s.b)(S.a,{style:{marginRight:5},center:!0,size:14}),he?"取消折叠":"折叠"]}),se&&!X&&E&&Object(s.c)(y.c,{className:m()({"CommentItemV2-hoverBtn":!Q}),preset:"plain",onClick:this.dislike,disabled:!c,children:[Object(s.b)(O.a,{style:{transform:"rotate(180deg)",marginRight:5},size:16,center:!0}),oe?"取消踩":"踩"]}),X||Object(s.c)(u.Fragment,{children:[Object(s.b)(V.a,{id:W,type:"comment",className:"CommentItemV2-hoverBtn",onModalShown:function(e,n){e||t.closeReportModal(n)},modalProps:Object.assign({},Se&&{onDeleteComment:this.delete},{notification:{failure:z.a}})}),"question"===v&&"commercial"===l&&L&&Object(s.c)(y.c,{className:"CommentItemV2-hoverBtn",preset:"plain",onClick:this.reject,children:[Object(s.b)(S.a,{style:{marginRight:5},center:!0,size:16}),"隐藏"]})]}),Se&&Object(s.c)(y.c,{className:m()({"CommentItemV2-hoverBtn":!X&&!Q&&!Q}),preset:"plain",onClick:this.handleDelete,children:[Object(s.b)(x.a,{style:{marginRight:5},center:!0,size:16}),"删除"]}),Object(s.b)(F.a,{shown:this.state.deleteModal,id:W,onDelete:this.delete,onClose:this.handleCloseDelete})]});return e=Q?Object(s.c)("div",{children:[xe,Object(s.b)(H.a,{type:"comment",id:W,commentNeedsReview:f,className:"CommentItemV2-editor",defaultActive:!0,replyTo:p,onCancel:this.stopReply,onSubmit:h,rootCommentId:T,isConversation:r})]}):"reviewing"===b?Object(s.c)("div",{className:"CommentItemV2-footer",children:[Object(s.c)(y.c,{preset:"plain",onClick:this.approve,children:[Object(s.b)(R.a,{style:{marginRight:5},center:!0,size:14}),"公开"]}),Object(s.c)(y.c,{className:"CommentItemV2-hoverBtn",preset:"plain",onClick:this.handleDelete,children:[Object(s.b)(x.a,{style:{marginRight:5},center:!0,size:16}),"删除"]}),Object(s.b)(F.a,{shown:this.state.deleteModal,id:W,onDelete:this.delete,onClose:this.handleCloseDelete})]}):xe,Object(s.c)("div",{children:[Object(s.c)("div",{className:"CommentItemV2-meta",children:[we&&Object(s.b)(q.a,{className:"CommentItemV2-avatar",noHoverCard:"fixed"===_||"club_post"===v,user:we}),we&&Object(s.b)(U.a,{noBadge:!0,noHoverCard:!0,user:we}),this.renderRoleInfo(Oe,ie),this.renderReplyTo(),be&&Object(s.b)("span",{className:"CommentItemV2-officialTop",children:"官方置顶"}),re&&Object(s.b)(S.a,{className:"CommentItemV2-reviewing","data-tooltip":"".concat(!1===o?"评论未公开，由作者筛选后显示":"已开启预审评论，评论由机构筛选后公开"),center:!0,size:14}),Object(s.b)("span",{className:"CommentItemV2-time",children:Object(g.toSmartString)(ee)})]}),Object(s.c)("div",{className:"CommentItemV2-metaSibling",children:[Object(s.b)(K.a,{className:m()("CommentItemV2-content",{"CommentItemV2-shield":ge}),html:me}),"zvideo"===d.type&&B&&Object(s.c)("div",{className:"CommentItemV2-zvideoFooter",children:[Object(s.c)("div",{onClick:function(e){return t.handleClick(e,"agree")},children:[J>0&&J,ne?Object(s.b)(O.a,{style:{marginRight:20,marginLeft:5},center:!0,size:14}):Object(s.b)(A,{style:{marginRight:20,marginLeft:5},center:!0,size:14})]}),Object(s.b)("div",{onClick:function(e){return t.handleClick(e,"reply")},children:Object(s.b)(N,{center:!0,size:14})})]}),!ge&&e]})]})}},{key:"render",value:function(){var e=this.props,t=e.comment,n=e.onRef;return Object(s.c)(I.b,{content:{type:"Comment",id:String(t.id)},children:[Object(s.b)(I.d,{ref:this.zaRef}),Object(s.b)("div",{className:"CommentItemV2",ref:n,children:this.renderItem()})]})}}]),n}(u.Component);G.propTypes={comment:p.a.object.isRequired,parent:p.a.object.isRequired,commentNeedsReview:p.a.bool,type:p.a.string,isConversation:p.a.bool,onLike:p.a.func.isRequired,onShowConversation:p.a.func,onReply:p.a.func,onFeature:p.a.func,onDelete:p.a.func.isRequired,onCollapse:p.a.func,commentPattern:p.a.string,showCollapsed:p.a.bool},G.contextTypes={currentUser:p.a.object,authRequired:p.a.func};t.a=Object(d.compose)(b.withRouter,Object(h.connect)((function(e){return{isWechat:e.env.userAgent.Wechat,permission:Object(P.Z)(e),isMobile:e.env.userAgent.Mobile}})))(G)},,function(e,t,n){"use strict";var r=n(2),o=n(11),i=n.n(o),a=n(90),c=n(1173),s=n(781),u=n(367),l=n(176),d=n(30),f=n(28),p=n(235),h=n.n(p),b=n(368),v=n(102),m=n(850);t.a=function(e){var t,n,o=e.question,p=e.question,g=p.id,y=p.title,O=p.answerCount,j=p.followerCount,w=p.updatedTime,C=p.created,k=e.headerInfo,S=e.showTime,x=e.extraFooterInfo,R=e.renderItem,E=e.enableIgnore,_=e.handleIgnoreQuestion,A=void 0===_?h.a:_,T=e.zaId,N=(T=void 0===T?{}:T).titleClick,I=T.writeAnswer,M=T.cardShow,D=T.ignoreQuestion,L=e.className,P=e.button,z=e.titleLink,B=e.zaContent;if(R)return R(o);var F="/question/".concat(g),U="https://www.zhihu.com/question/".concat(g),q=k?Object(r.c)(a.Flex,{mb:12,color:"GBL05A",alignItems:"center",css:{fontSize:"15px"},children:[Object(r.b)("img",{className:i()("QuestionItem-head--avatar",{"QuestionItem-head--avatarCircle":"circle"===(null===(t=k.avatar)||void 0===t?void 0:t.shape)}),src:null===(n=k.avatar)||void 0===n?void 0:n.url}),Object(r.b)("div",{className:"QuestionItem-head--reason",children:k.reason}),k.extra&&Object(r.b)("div",{className:"QuestionItem-head--extra",children:k.extra})]}):null,V=Object(r.b)("div",{className:"QuestionItem-title",children:Object(r.b)("a",Object.assign({href:z||F,target:"_blank",rel:"noopener noreferrer","data-za-detail-view-name":"Title"},N&&{"data-za-detail-view-id":N},{children:y}))});return Object(r.b)(b.a,{module:"QuestionItem",content:B||{type:"Question",token:String(g)},trackCardShow:Boolean(M),view:{id:M},children:Object(r.c)("div",{className:i()("QuestionItem",L),children:[q,Object(r.b)(m.e,{data:o,link:z||F,lastreadTouchable:!1,title:V,children:Object(r.c)(a.Flex,{mt:20,children:[P||Object(r.b)(v.a,{className:"QuestionItem-footer--writeAnswerButton",icon:c.a,label:"写回答",href:"".concat(U,"#write"),target:"_blank","data-za-not-track-link":!0,onClick:function(e){I&&f.a.trackEvent(e.target,{id:I,action:"OpenUrl"})}}),Object(r.b)(a.Box,{ml:16,children:Object(r.b)(m.d,{children:x||["".concat(Object(u.formatNumber)(O)," 回答"),"".concat(Object(u.formatNumber)(j)," 关注"),S&&"".concat(Object(l.toRelativeString)(w||C))]})})]})}),E&&Object(r.b)(d.c,{className:"QuestionItem-ignoreButton",preset:"plain","data-tooltip":"不感兴趣","data-tooltip-preset":"white","data-tooltip-classname":"QuestionItem-ignoreButtonTooltip",color:"GBL07A",icon:s.a,onClick:function(e){A(g),f.a.trackEvent(e.target,{id:D,action:"Click"})}})]})})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(32),o=n(2),i=n(1368),a=n(1),c=n.n(a),s=n(131),u=Object.assign;var l=function(e){return c.a.createElement(s.a,u({width:"24",height:"14",viewBox:"0 0 24 14"},e),c.a.createElement("rect",{width:"24",height:"14",rx:"2"}),c.a.createElement("path",{fill:"#FFF",d:"M3.328 9.96h1.12V7.584c0-.68-.088-1.424-.144-2.064h.04l.6 1.272L6.656 9.96h1.2V4.04h-1.12V6.4c0 .672.088 1.456.152 2.072h-.04l-.592-1.28-1.72-3.152H3.328v5.92zm5.992 0h3.72v-.992h-2.536V7.384h2.08v-.992h-2.08V5.024h2.448V4.04H9.32v5.92zm5.48 0h1.448l.648-2.928c.096-.464.176-.92.256-1.368h.032c.072.448.16.904.256 1.368l.664 2.928h1.472l1.096-5.92h-1.128l-.464 2.888c-.088.616-.176 1.248-.264 1.888h-.04c-.128-.64-.248-1.28-.376-1.888l-.688-2.888h-1.008l-.688 2.888c-.128.616-.256 1.256-.376 1.888h-.032c-.088-.632-.184-1.264-.272-1.888l-.472-2.888h-1.208L14.8 9.96z"}))};function d(e){var t=e.isNewBefore,n=Object(r.a)(e,["isNewBefore"]);return t&&Object(i.a)(new Date,t)?Object(o.b)(l,Object.assign({css:{marginLeft:4},fill:"#0066FF",width:32,height:15},n)):null}},function(e,t,n){"use strict";var r=n(40),o=n(2),i=n(66),a=n(25),c=n(90),s=n(234),u=n(810),l=n(175),d=n(235),f=n.n(d),p=n(383),h=n(1055),b=n(0),v=n(1),m=n(173),g=n(135),y=n(781),O=n(911),j=function(e){var t=e.className,n=e.index,r=void 0===n?0:n,i=e.selected,a=e.onClick,u=e.onDelete,l=e.item,d=e.item,f=d.status,p=d.startTime,h=d.endTime,j=d.target,w=(j=void 0===j?{}:j).parentObject.title,C=0===f,k=Object(v.useMemo)((function(){return"".concat(Object(O.b)(p/1e3)," - ").concat(Object(O.b)(h/1e3))}),[p,h]),S=Object(o.c)(s.a,Object.assign({zaType:"Card",zaText:w,view:{elementLocation:{card:{index:r}}},as:c.Box,role:"button",className:t,width:"167px",height:"70px",color:"GBK03A",p:"8px",pb:"0",lineHeight:"normal"},C&&{onClick:a},{css:function(e){var t;return{border:"1px solid ".concat(i?"transparent":C?e.colorMod(e.colors.GBL01A).alpha(.08):e.colors.GBK09A),boxShadow:i?"inset 0 0 0 2px ".concat(e.colors.GBL01A):"none",borderRadius:"4px",":hover":(t={background:C?e.colorMod(e.colors.GBL01A).alpha(.08):e.colors.GBK10A},Object(b.a)(t,".".concat("ContributionItem-deleteButton"),{visibility:"visible"}),Object(b.a)(t,"cursor",C?"pointer":"not-allowed"),t)}},children:[Object(o.c)(c.Flex,Object.assign({},C&&{color:"GBL01A"},{fontSize:"11px",fontWeight:"600",alignItems:"center",justifyContent:"space-between",children:[Object(o.b)(c.Box,{children:k}),Object(o.b)(s.a,{zaBlock:"Delete",zaText:"删除投稿",zaType:"Button",as:c.Box,role:"button",className:"ContributionItem-deleteButton",onClick:function(e){e.stopPropagation(),null==u||u(l)},css:{cursor:"pointer",visibility:"hidden"},children:Object(o.b)(y.a,{size:12})})]})),Object(o.b)(c.Box,{mt:"4px",fontSize:"13px",css:[Object(m.d)(2),{wordBreak:"break-all"}],children:w})]}));return Object(o.b)(s.b,{block:"VideoAnswerItem",children:C?S:Object(o.b)(g.a,{toggler:S,placement:"top",arrowed:!0,toggleEvent:"hover",children:Object(o.b)(c.Box,{fontSize:"12px",p:"8px",children:"已投稿问题仅支持在回答详情页编辑"})})})},w=function(e){var t=e.className,n=e.onClick,i=e.totalCount,a=e.currentCount,l=Object(h.a)("zvideo_contribution_form:should_hide_new_tag"),d=Object(r.a)(l,2),f=d[0],p=d[1];return Object(o.c)(s.a,{zaType:"Button",zaAction:"",zaBlock:"AddVideoAnswer",zaText:"添加问题",as:c.Flex,className:t,role:"button",width:"167px",height:"70px",flexDirection:"column",color:"GBL01A",alignItems:"center",justifyContent:"center",onClick:function(e){f||p(!0),null==n||n(e)},css:function(e){return Object.assign({position:"relative",cursor:"pointer",borderRadius:"3px",border:"1px solid ".concat(e.colorMod(e.colors.GBL01A).alpha(.08)),":hover":{background:e.colorMod(e.colors.GBL01A).alpha(.08)},overflow:"hidden"},!f&&{"::after":{content:'"NEW"',position:"absolute",top:"0",right:"0",color:e.colors.GRD03A,fontSize:"8px",fontWeight:"600",width:"28px",height:"17px",lineHeight:"17px",textAlign:"center",background:e.colorMod(e.colors.GRD03A).alpha(.08),borderBottomLeftRadius:"3px"}})},children:[Object(o.b)(u.a,{size:12}),Object(o.b)(c.Box,{fontSize:"14px",fontWeight:"500",mt:"1px",children:a&&i?"继续添加 (".concat(a,"/").concat(i,")"):"添加问题"})]})};t.a=function(e){var t=e.zvideoId,n=e.showCreateButton,r=void 0!==n&&n,s=e.showSelect,u=void 0!==s&&s,d=e.onAdd,h=e.onSelect,b=Object(a.useDispatch)(),v=Object(p.o)(),m=Object(p.n)(t),g=Object(p.m)(t).answer,y=(g=void 0===g?{}:g).canContribute,O=void 0!==y&&y,C=g.totalCount,k=void 0===C?0:C,S=m.length,x=Object(i.c)((function(e){b(Object(p.k)(e.id)),b(Object(p.e)(e.id)),null==h||h(e)})),R=Object(i.c)((function(e){l.a.confirm(Object(o.b)(c.Box,{textAlign:"center",children:"已编辑的投稿内容不会被保存"}),{title:Object(o.b)(c.Box,{ml:"23px",children:"确定删除该视频投稿？"}),text:{ok:"确认删除",cancel:"继续编辑"}}).then((function(){if(e.status&&0!==e.status){var n=e.target.object.id;n&&b(Object(p.c)(t,e.id,n))}else b(Object(p.d)(t,e.id));b(Object(p.k)(null))}),f.a)}));return Object(o.c)(c.Flex,{flexWrap:"wrap",ml:"-8px",mt:"-12px",children:[m.map((function(e){return Object(o.b)(j,{selected:u&&(null==v?void 0:v.id)===e.id,onClick:function(){return x(e)},onDelete:function(){return R(e)},item:e,css:{marginLeft:"8px",marginTop:"12px"}},e.id)})),O&&S<k&&r&&Object(o.b)(w,{onClick:d,currentCount:S,totalCount:k,css:{marginLeft:"8px",marginTop:"12px"}})]})}},,function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(18),a=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M5 14a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm7 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm7 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4z",fillRule:"evenodd"}))};a.defaultProps={name:"Dots"},t.a=a},function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(18),a=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M13.25 5.5H6.868c-.755 0-1.368.613-1.368 1.368v10.264c0 .755.613 1.368 1.368 1.368h10.264c.755 0 1.368-.613 1.368-1.368V10.75H20v6.467A2.783 2.783 0 0 1 17.217 20H6.783A2.783 2.783 0 0 1 4 17.217V6.783A2.783 2.783 0 0 1 6.783 4h6.467v1.5zM8.158 13.4a1.033 1.033 0 0 1 1.744-.078l.258.37a.782.782 0 0 0 1.303-.031l1.332-2.113a1.173 1.173 0 0 1 2.01.043l2.03 3.537A1.25 1.25 0 0 1 15.748 17H8.25a1.252 1.252 0 0 1-1.085-1.873l.992-1.728zM9.5 11a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm3.75-5.5a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5zM18.5 4V2.25a.75.75 0 1 1 1.5 0V4h1.75a.75.75 0 1 1 0 1.5H20v1.75a.75.75 0 1 1-1.5 0V5.5h-1.75a.75.75 0 1 1 0-1.5h1.75zm.75 7.5a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5z"}))};a.defaultProps={name:"AddImage"},t.a=a},function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(18),a=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M9 9.185v5.63c0 .378.18.685.665.685.114 0 .187-.03.314-.083l4.621-2.793c.2-.124.4-.304.4-.624s-.2-.5-.4-.624L9.979 8.583c-.127-.053-.2-.083-.314-.083-.485 0-.665.307-.665.685z"}))};a.defaultProps={name:"TriangleArrowRight"},t.a=a},function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(18),a=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M12 11l-3.716 3.782a.758.758 0 0 1-1.064 0 .738.738 0 0 1 0-1.052l4.249-4.512a.758.758 0 0 1 1.064 0l4.246 4.512a.738.738 0 0 1 0 1.052.757.757 0 0 1-1.063 0L12.002 11z",fillRule:"evenodd"}))};a.defaultProps={name:"ArrowUp"},t.a=a},function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(33),o=n.n(r),i=n(110),a=n.n(i),c=n(1),s=n.n(c),u=n(11),l=n.n(u),d=n(1136),f=n(1137),p={close:n(1138).a,triangle:d.a,add:f.a};function h(e){var t=e.className,n=e.name,r=a()(e,["className","name"]),i=p[n];return i?s.a.createElement(i,o()({className:l()("Icon Icon--".concat(n),t)},r)):null}},function(e,t,n){"use strict";var r=n(4),o=n(1),i=n(216),a=n.n(i),c=n(25),s=n(242);t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=Object(c.useDispatch)(),n=Object(c.useSelector)((function(t){return a()(t.switches,e)}),c.shallowEqual);return Object(o.useEffect)((function(){t(Object(s.b)(e))}),[t].concat(Object(r.a)(e))),n}},function(e,t,n){e.exports=n.p+"assets/liukanshan_paper.d98ba9b2.svg"},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(94),o=n.n(r);function i(e,t,n){var r=!1,i=o()((function(){r=!1,e.apply(void 0,arguments)}),t,n);return Object.assign((function(){r=!0,i.apply(void 0,arguments)}),{cancel:i.cancel,flush:i.flush,pending:function(){return r}})}},function(e,t,n){"use strict";var r=n(32),o=n(13),i=n(14),a=n(15),c=n(16),s=n(9),u=n(2),l=n(1),d=n(19),f=n(3),p=n.n(f),h=n(25),b=n(76),v=n.n(b),m=n(26),g=n(242),y=n(70),O=n(24),j=n(988);function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var o=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var C=function(e,t){var n=e.entities.questions[t.answer.question.id];return n&&n.voteDownReason},k={loadSwitches:g.b,showNotification:m.h,updateAnswerVote:y.K,getVoteDownReason:y.k,selectVoteDownReason:y.C,setOpposeRightStatus:g.e},S=function(e){Object(a.a)(n,e);var t=w(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).handleVote=e.context.authRequired((function(t){var n=e.props,r=n.answer;(0,n.updateAnswerVote)(r.id,t,{cardType:r.cardType})}),O.V.vote),e.handleLoadVoteDownReason=function(){var t=e.props,n=t.answer;(0,t.getVoteDownReason)(n.id,n.question.id)},e.handleSelectVoteDownReason=function(t){var n=e.props,r=n.answer,o=n.selectVoteDownReason,i=n.showNotification;o(r.id,t.reasonId).then((function(e){i(e.payload.message)}))},e.handleSetShowVoteDownReason=function(t){(0,e.props.setOpposeRightStatus)(t)},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.loadSwitches;this.shouldShowVoteDownMenu&&e(["opposeRight"])}},{key:"render",value:function(){var e=this.props,t=e.answer,n=e.voteDownReason,o=e.opposeRightStatusIsOn,i=Object(r.a)(e,["answer","voteDownReason","opposeRightStatusIsOn"]);return Object(u.b)(j.a,Object.assign({count:t.voteupCount,voting:t.relationship&&t.relationship.voting,isOwner:t.relationship&&t.relationship.isAuthor,isShowVoteDownMenu:this.shouldShowVoteDownMenu&&o,onVote:this.handleVote,voteDownReason:n,onLoadVoteDownReason:this.handleLoadVoteDownReason,onSelectVoteDownReason:this.handleSelectVoteDownReason,onSetVoteDownReason:this.handleSetShowVoteDownReason},v()(i,Object.keys(k))))}},{key:"shouldShowVoteDownMenu",get:function(){return Boolean(!this.props.disabled&&this.context.currentUser)}}]),n}(l.Component);S.contextTypes={currentUser:p.a.object,authRequired:p.a.func},t.a=Object(d.compose)(Object(h.connect)((function(e,t){return{voteDownReason:C(e,t),opposeRightStatusIsOn:Object(g.d)(e)}}),k))(S)},function(e,t,n){var r=n(180),o=n(113);e.exports=function(e){return!0===e||!1===e||o(e)&&"[object Boolean]"==r(e)}},function(e,t,n){"use strict";var r=n(1104);n.o(r,"animated")&&n.d(t,"animated",(function(){return r.animated})),n.o(r,"useSpring")&&n.d(t,"useSpring",(function(){return r.useSpring})),n.o(r,"useTransition")&&n.d(t,"useTransition",(function(){return r.useTransition}))},function(e,t,n){},,function(e,t,n){"use strict";n.d(t,"a",(function(){return ne})),n.d(t,"b",(function(){return Re}));var r=n(2),o=n(25),i=n(20),a=n.n(i),c=n(21),s=n.n(c),u=n(92),l=n.n(u),d=n(22),f=n.n(d),p=n(23),h=n.n(p),b=n(17),v=n.n(b),m=n(1),g=n.n(m),y=n(42),O=n(3),j=n.n(O),w=n(235),C=n.n(w),k=n(11),S=n.n(k),x=n(234),R=n(834),E=n(839),_=n(150),A=n(28),T=n(859);function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v()(e);if(t){var o=v()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h()(this,n)}}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var M="dark",D="light",L=function(e){f()(n,e);var t=N(n);function n(){var e;a()(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),I(l()(e),"handleClick",(function(t,n){var r=e.props.onClick;A.a.trackEvent(e.node,{id:4240,action:"OpenUrl",name:n},{link:{url:t,anchor:n}}),r&&r({target:e.node})})),e}return s()(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.goodsCard.body.link;Object(E.onViewedOnce)(this.node,(function(){A.a.trackCardShow(e.node,{id:4241,name:"课程"},{link:{url:t,anchor:"课程"}})}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.theme,r=t.zaInfo,o=void 0===r?{}:r,i=t.goodsCard,a=t.className,c=n===M,s=i.header,u=s.title,l=s.subTitle,d=i.body,f=d.title,p=d.cover,h=d.coverLabel,b=d.link,v=d.desc,m=d.label,y=d.vipNote,O=i.catalog;return g.a.createElement(g.a.Fragment,null,g.a.createElement("section",{className:S()("KfeCollection-GoodsCardV2",a),"data-za-module":"Content","data-za-extra-module":JSON.stringify({card:{content:[o]}})},g.a.createElement("h1",{className:"KfeCollection-GoodsCardV2-header"},"".concat(u).concat(l?" · ".concat(l):"")),g.a.createElement(x.b,{content:Object.assign({},o,{type:T.e.paidAnswer}),block:"oldSkuCard"},g.a.createElement(x.a,{zaType:"Card",shouldTrackShow:!0,zaAction:"OpenUrl",extra:{link:{url:b}}},g.a.createElement("a",{href:b,target:"_blank",rel:"noopener noreferrer",className:"KfeCollection-GoodsCardV2-content",onClick:function(){return e.handleClick(b,f)},ref:function(t){return e.node=t}},g.a.createElement("div",{className:"KfeCollection-GoodsCardV2-cover"},g.a.createElement("img",{className:S()("KfeCollection-GoodsCardV2-cover-img",{"KfeCollection-GoodsCardV2-cover-img--dark":c}),src:Object(_.imgUrl)(p,{size:"200x0"})}),g.a.createElement("div",{className:"KfeCollection-GoodsCardV2-cover-label"},h)),g.a.createElement("div",{className:"KfeCollection-GoodsCardV2-detail"},g.a.createElement("div",null,g.a.createElement("h2",{className:"KfeCollection-GoodsCardV2-detail-title"},f),v&&g.a.createElement("p",{className:"KfeCollection-GoodsCardV2-detail-desc"},v),g.a.createElement("p",{className:"KfeCollection-GoodsCardV2-detail-label"},m)),g.a.createElement("p",{className:"KfeCollection-GoodsCardV2-detail-vipNote",dangerouslySetInnerHTML:{__html:y}}))))),O&&O.length>0&&g.a.createElement("div",{className:"KfeCollection-GoodsCardV2-catalog"},"章节目录",g.a.createElement("div",{className:"KfeCollection-GoodsCardV2-catalogSectionList"},O.map((function(e){var t=e.manuscriptUrl,n=e.sectionId,r=e.title;return g.a.createElement(x.a,{zaType:"Text",key:n,zaBlock:"catalog",extra:{link:{url:t}},zaAction:"OpenUrl"},g.a.createElement("a",{className:"KfeCollection-GoodsCardV2-catalogSectionItem",href:t,target:"_blank",rel:"noopener noreferrer",key:n,"data-za-detail-view-id":7500,"data-za-extra":JSON.stringify({button:{text:r}})},r,g.a.createElement(R.a,{className:"KfeCollection-GoodsCardV2-catalogSectionItemIcon"})))}))))))}}]),n}(g.a.Component);I(L,"propTypes",{theme:j.a.oneOf([M,D]),onClick:j.a.func}),I(L,"defaultProps",{theme:D});var P=L,z=n(30),B=n(1299),F=function(e){return-1===e.indexOf("?")?"".concat(e,"?entry=qa"):"".concat(e,"&entry=qa")};function U(e){var t=e.header,n=void 0===t?{}:t,r=e.onClick,o=n.title,i=n.subTitle,a=n.link;return g.a.createElement("a",{href:F(a),target:"_blank",rel:"noopener noreferrer",className:"KfeCollection-GoodsCardV3-header",onClick:r},g.a.createElement("div",{className:"KfeCollection-GoodsCardV3-headerTitle"},o),g.a.createElement("div",{className:"KfeCollection-GoodsCardV3-headerSubTitle"},g.a.createElement("div",null,i),g.a.createElement(B.a,{className:"KfeCollection-GoodsCardV3-headerIcon"})))}var q=function(e){var t=Object(m.useRef)(),n=e.className,r=e.zaInfo,o=void 0===r?{}:r,i=e.goodsCard,a=e.shelvesInfo,c=e.onBookshelfButtonClick,s=void 0===c?C.a:c,u=e.theme,l=void 0===u?"light":u,d=e.onClick,f=i.header,p=i.body,h=i.body,b=h.title,v=h.cover,y=h.coverLabel,O=h.link,j=h.desc,w=h.label,k=h.vipNote,N=h.icons,I=h.heatNote,M=Object(x.i)().trackEvent;Object(m.useEffect)((function(){Object(E.onViewedOnce)(t.current,(function(){A.a.trackCardShow(t.current,{id:8467,name:p.title},{button:{text:f.title}})}))}),[p,f]);var D=Object(m.useCallback)((function(e){A.a.trackEvent(e.target,{id:8468,action:"OpenUrl",name:p.title},{link:{url:f.link},button:{text:f.title}}),M({action:"OpenUrl",eventType:"Click",elementLocation:{text:f.title,block:{blockText:"newSkuCardHeader"},type:"Button",content:{type:T.e.paidAnswer}}},{link:{url:f.link}})}),[p,f,M]),L=Object(m.useCallback)((function(e){A.a.trackEvent(e.target,{id:8469,action:"OpenUrl",name:p.title},{link:{url:p.link},button:{text:f.title}}),d&&d(e)}),[p,f,d]),P=Object(m.useCallback)((function(e){var t=(null==a?void 0:a.whetherInShelf)?"去书架查看":"加入书架",n=(null==a?void 0:a.whetherInShelf)?"OpenUrl":"Collect",r={url:p.link};A.a.trackEvent(e.target,{id:8294,action:"OpenUrl",name:p.title},{link:r,button:{text:t}}),M({action:n,eventType:"Click",elementLocation:{type:"Button",text:t}},(null==a?void 0:a.whetherInShelf)?{link:{url:"https://www.zhihu.com/xen/market/vip/vip-recommend"}}:null),s(e)}),[p,s,a,M]);return g.a.createElement("section",{className:S()("KfeCollection-GoodsCardV3",n),"data-za-module":"Content","data-za-extra-module":JSON.stringify({card:{content:[o]}})},g.a.createElement(U,{header:f,onClick:D}),g.a.createElement(x.b,{content:Object.assign({},o,{type:T.e.paidAnswer}),block:"newSkuCard"},g.a.createElement(x.a,{zaType:"Card",shouldTrackShow:!0,zaAction:"OpenUrl",extra:{link:{url:O}}},g.a.createElement("a",{href:F(O),target:"_blank",rel:"noopener noreferrer",className:S()("KfeCollection-GoodsCardV3-content","KfeCollection-GoodsCardV3-content--topHeader"),onClick:L,ref:t},g.a.createElement("div",{className:"KfeCollection-GoodsCardV3-cover"},g.a.createElement("img",{className:"KfeCollection-GoodsCardV3-coverVip",src:"light"===l?null==N?void 0:N.leftTopDayIcon:null==N?void 0:N.leftTopNightIcon,alt:""}),g.a.createElement("img",{className:S()("KfeCollection-GoodsCardV3-coverImage"),src:Object(_.imgUrl)(v,{size:"200x0"})}),g.a.createElement("div",{className:"KfeCollection-GoodsCardV3-coverLabel"},y)),g.a.createElement("div",{className:"KfeCollection-GoodsCardV3-detail"},b&&g.a.createElement("h2",{className:"KfeCollection-GoodsCardV3-detailTitle"},b),j&&g.a.createElement("p",{className:"KfeCollection-GoodsCardV3-detailDescription"},j),w&&g.a.createElement("p",{className:"KfeCollection-GoodsCardV3-detailLabel"},w),I?g.a.createElement("p",{className:"KfeCollection-GoodsCardV3-detailHeatNote"},I):k&&g.a.createElement("p",{className:"KfeCollection-GoodsCardV3-detailVipNote",dangerouslySetInnerHTML:{__html:k}}),a&&g.a.createElement(z.c,{className:"KfeCollection-GoodsCardV3-bookshelfButton",preset:"plain",color:"grey",onClick:P},a.whetherInShelf?"去书架查看":"加入书架",g.a.createElement(R.a,{text:!0,center:!0})))))))};function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v()(e);if(t){var o=v()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h()(this,n)}}function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var K=function(e){f()(n,e);var t=V(n);function n(){var e;a()(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),H(l()(e),"handleObserve",(function(t){var n=e.props.logPaidAnswerProgress;t.forEach((function(t){if(0!==t.intersectionRatio){var r=t.target;e.observer.unobserve(r),n&&n()}}))})),H(l()(e),"renderCard",(function(){var t=e.props,n=t.hasPurchased,r=t.result,o=void 0===r?{}:r,i=t.theme,a=t.onBookshelfButtonClick,c=void 0===a?C.a:a,s=t.onClick,u=t.className,l=o.goodsCard,d=o.shelvesInfo,f=o.zaInfo;return n?g.a.createElement(q,{goodsCard:l,zaInfo:f,hasPurchased:n,shelvesInfo:n?d:null,onBookshelfButtonClick:c,onClick:s,theme:i,className:u}):g.a.createElement(P,{goodsCard:l,zaInfo:f,onClick:s,className:u})})),e}return s()(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.hasPurchased,r=t.logPaidAnswerProgress;n&&r&&"undefined"!=typeof window&&window.IntersectionObserver&&(this.target=Object(y.findDOMNode)(this),this.observer=new window.IntersectionObserver(this.handleObserve,{threshold:[.1]}),setTimeout((function(){e.observer.observe(e.target)})))}},{key:"componentWillUnmount",value:function(){this.observer&&this.observer.unobserve(this.target)}},{key:"render",value:function(){return this.renderCard()}}]),n}(g.a.Component);H(K,"propTypes",{result:j.a.object.isRequired,theme:j.a.string,hasPurchased:j.a.bool,onBookshelfButtonClick:j.a.func,logPaidAnswerProgress:j.a.func}),H(K,"defaultProps",{result:{goodsCard:{},btnInfo:{},progressInfo:{},zaInfo:{}}});var Q=K,W=n(63);function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v()(e);if(t){var o=v()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h()(this,n)}}function Z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Y=function(e){f()(n,e);var t=G(n);function n(){var e;a()(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),Z(l()(e),"handleClick",(function(t,n){var r=e.props.onClick;A.a.trackEvent(e.node,{id:4240,action:"OpenUrl",name:n},{link:{url:t,anchor:n}}),"function"==typeof r&&r(e.node)})),e}return s()(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.btnInfo,n=t.btnText,r=t.link;W.a.dispatch("vip/preloadVIPHybridPopup",{url:r}),Object(E.onViewedOnce)(this.node,(function(){A.a.trackCardShow(e.node,{id:4241,name:n},{link:{url:r,anchor:n}})}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.btnInfo,r=t.zaInfo,o=void 0===r?{}:r,i=t.className,a=n.btnText,c=n.link;return g.a.createElement("div",{className:S()("KfeCollection-PurchaseBtn",i)},g.a.createElement("div",{className:"KfeCollection-PurchaseBtn-mask"}),g.a.createElement(x.b,{block:"textLink",content:Object.assign({},o||{},{type:T.e.paidAnswer})},g.a.createElement(x.a,{zaType:"Text",shouldTrackShow:!0,zaAction:"OpenUrl",extra:{link:{url:c}}},g.a.createElement("a",{className:"KfeCollection-PurchaseBtn-HybridLink",href:c,target:"_blank",rel:"noopener noreferrer",onClick:function(){return e.handleClick(c,a)},ref:function(t){return e.node=t},"data-za-module":"Content","data-za-extra-module":JSON.stringify({card:{content:[o]}})},g.a.createElement("span",{className:"KfeCollection-PurchaseBtn-text"},a)," ",g.a.createElement(R.a,{className:"KfeCollection-PurchaseBtn-ArrowRight"})))))}}]),n}(g.a.Component),J=n(236),$=n(70);function X(e){var t=e.id,n=e.children,r=Object(m.useRef)(),i=Object(o.useDispatch)();return Object(m.useEffect)((function(){var e=r.current;if(t&&e){var n=e instanceof Element?e:Object(y.findDOMNode)(e);n&&Object(E.onViewedOnce)(n,(function(){return i(Object($.y)(t))}))}}),[i,t]),Object(m.cloneElement)(n,{ref:r})}X.propTypes={id:j.a.oneOfType([j.a.number,j.a.string]).isRequired};var ee=Object(J.a)(null)(X);function te(e){var t,n=e.answer,i=(Object(o.useSelector)((function(e){return Object($.z)(e,null==n?void 0:n.id)}))||{}).result;if(!i)return null;var a=null==n||null===(t=n.paidInfo)||void 0===t?void 0:t.hasPurchased,c=i.btnInfo,s=i.zaInfo;return Object(r.c)(r.a,{children:[Object(r.b)(ee,{id:n.id,children:Object(r.b)("div",{})}),!a&&c&&Object(r.b)(Y,{btnInfo:c,zaInfo:s}),Object(r.b)(Q,{className:"AnswerItem-GoodsCard",result:i,hasPurchased:a})]})}var ne=Object(J.a)(null)((function(e){var t=e.answer;return"paid"===(null==t?void 0:t.answerType)?Object(r.b)(te,{answer:t}):null})),re=n(57),oe=n.n(re);function ie(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ae(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ce=function(e){return function(e){if(!window)return null;try{var t=document.createElement("div");t.innerHTML=e;var n,r=Array.from(t.childNodes),o=oe()(r,3),i=o[0].nodeValue,a=o[1],c=a.innerText,s=a.attributes,u=o[2].nodeValue,l={},d=ie(s);try{for(d.s();!(n=d.n()).done;){var f=n.value;l[f.name]=f.value}}catch(e){d.e(e)}finally{d.f()}return i&&c&&u?{prefixText:i,content:c,status:u,linkInfo:{name:"a",attr:l}}:null}catch(e){return null}}(e)},se=function(e){var t=e.content;t=void 0===t?[]:t;var n=oe()(t,2),r=n[0],o=n[1],i=e.className,a=e.onClick;return g.a.createElement("div",{className:S()("KfeCollection-CertainEndEllipsis",i),onClick:a},g.a.createElement("div",{className:"KfeCollection-CertainEndEllipsis-start"},r),g.a.createElement("div",{className:"KfeCollection-CertainEndEllipsis-end"},o))},ue=function(e){var t=e.contentName,n=e.fallbackContent,r=e.onClick,o=Object(m.useMemo)((function(){return ce(t)}),[t]);if(null===o)return n;var i=o.prefixText,a=o.content,c=o.status,s=o.linkInfo,u=s.name,l=g.a.createElement(g.a.Fragment,null,i,g.a.createElement(u,s.attr,a.slice(0,-1))),d=g.a.createElement(g.a.Fragment,null,g.a.createElement(u,s.attr,a.slice(-1)),c);return g.a.createElement(se,{onClick:r,content:[l,d],className:"KfeCollection-PaidContentNameCertainEndEllipsis"})};var le=function(e){var t=e.introCard,n=e.RichTextComponent,r=e.className,o=e.zaInfo,i=void 0===o?{}:o,a=e.handleTrack,c=e.extra,s=void 0===c?{}:c,u=t.statement,l=t.description,d=t.contentName,f=t.authorDesc,p=s.isNewStyle,h=s.isMobile,b=Object(x.i)().trackEvent,v=function(e,t){var n=e.target,r=e.target,o=r.text,i=r.href,c=5325===t?"userName":"bookTitle";"A"===r.tagName&&(A.a.trackEvent(n,{id:t,action:"OpenUrl"},{button:{text:o},link:{url:i}}),b({action:"OpenUrl",eventType:"Click",elementLocation:{type:"Text",block:{blockText:c},content:{type:T.e.paidAnswer}}},{link:{url:i}})),a&&a(e,i)},m=function(e){return p?"".concat(e,h?"-newStyle-mobile":"-newStyle-pc"):e};return g.a.createElement("section",{className:S()(m("KfeCollection-IntroCard"),r),"data-za-module":"Content","data-za-extra-module":JSON.stringify({card:{content:[i]}})},!p&&g.a.createElement(g.a.Fragment,null,!!u&&g.a.createElement("p",null,u),!!l&&g.a.createElement("p",null,l),(!!u||!!l)&&g.a.createElement("p",{className:"KfeCollection-IntroCard-spacing"})),g.a.createElement(ue,{contentName:d,onClick:function(e){return v(e,5326)},fallbackContent:g.a.createElement("p",{onClick:function(e){return v(e,5326)},className:m("KfeCollection-IntroCard-contentName"),dangerouslySetInnerHTML:{__html:d}})}),n?g.a.createElement(n,{className:m("KfeCollection-IntroCard-authorDesc"),html:f,onClick:function(e){return v(e,5325)}}):g.a.createElement("p",{onClick:function(e){return v(e,5325)},className:m("KfeCollection-IntroCard-authorDesc"),dangerouslySetInnerHTML:{__html:f}}))},de=n(1161),fe=n(1289),pe=function(e){return g.a.createElement(fe.a,Object.assign({viewBox:"0 0 140 43"},e),g.a.createElement("defs",null,g.a.createElement("rect",{id:"zhimg_ic_primelabel_01@2x-a",width:"70",height:"30",x:"0",y:"0"})),g.a.createElement("g",{fillRule:"evenodd",transform:"translate(0 -6)"},g.a.createElement("path",{fillRule:"nonzero",d:"M80.0023638,2.63706979 L129.732029,30.638653 C135.976314,34.154746 139.822785,40.6523917 139.822785,47.6843672 L139.822785,103.687744 C139.822785,110.719509 135.976314,117.217365 129.732029,120.733248 L80.0023638,148.734831 C73.758079,152.250924 66.0649216,152.250924 59.8206368,148.734831 L10.0909714,120.733248 C3.84668657,117.217365 -7.10542736e-14,110.719509 -7.10542736e-14,103.687744 L-7.10542736e-14,47.6843672 C-7.10542736e-14,40.6523917 3.84668657,34.154746 10.0909714,30.638653 L59.8206368,2.63706979 C66.0649216,-0.879023264 73.758079,-0.879023264 80.0023638,2.63706979 Z M62.8214584,21.9369801 L62.4917192,22.1167713 L25.9257887,42.6512656 C21.4364336,45.1724346 18.6325361,49.7839786 18.5101354,54.8082708 L18.5059568,55.1514561 L18.5059568,96.2205991 C18.5059568,101.262635 21.2100909,105.930346 25.6223198,108.545528 L25.9257887,108.720635 L62.4917192,129.25513 C66.9737863,131.772206 72.4710741,131.832136 77.0014851,129.434921 L77.3312243,129.25513 L113.897155,108.720635 C118.38651,106.199617 121.190256,101.587929 121.31265,96.5637746 L121.316828,96.2205991 L121.316828,55.1514561 C121.316828,50.1092692 118.612846,45.4417025 114.200623,42.826383 L113.897155,42.6512656 L77.3312243,22.1167713 C72.8491571,19.5996952 67.3518694,19.5397648 62.8214584,21.9369801 Z M69.2442049,35.8512397 L88.2394468,68.1217272 L103.868354,54.7872625 L103.868354,94.6758324 C103.868354,97.7547043 101.333778,100.250689 98.2071383,100.250689 L40.2839921,100.24974 C37.1573717,100.249699 34.6227848,97.7537776 34.6227848,94.674925 L34.6227848,54.7872625 L50.2512033,68.1217272 L69.2442049,35.8512397 Z",mask:"url(#zhimg_ic_primelabel_01@2x-b)",opacity:".54"})))};pe.defaultProps={name:"PrivilegeLabel"};var he=pe,be=function(e){var t=e.data,n=e.className,r=e.extra,o=t||{},i=o.vipText,a=o.worthText,c=o.cardColor,s=void 0===c?0:c,u=r||{},l=u.isNewStyle,d=u.isMobile,f=function(e){return l?"".concat(e,d?"-newStyle-mobile":"-newStyle-pc"):e};return 0===s?null:g.a.createElement("div",{className:S()(f("KfeCollection-Privilege"),n)},g.a.createElement(de.a,{className:f("KfeCollection-Privilege-vipIcon")}),g.a.createElement("div",{className:f("KfeCollection-Privilege-content")},g.a.createElement("span",{className:"KfeCollection-Privilege-vipText"},i),g.a.createElement("span",null," ".concat(a))),!l&&g.a.createElement(he,{className:"KfeCollection-Privilege-label"}))},ve=function(e){var t=e.data,n=e.className,r=e.extra,o=t||{},i=o.worthText,a=o.cardColor,c=void 0===a?0:a,s=r||{},u=s.isNewStyle,l=s.isMobile;return 2!==c?null:g.a.createElement("div",{className:S()(u?l?"KfeCollection-OrdinaryLabel-newStyle-mobile":"KfeCollection-OrdinaryLabel-newStyle-pc":"KfeCollection-OrdinaryLabel",n)},g.a.createElement("div",{className:"KfeCollection-OrdinaryLabel-content"},i))},me=n(1275),ge=n(369),ye=n(173),Oe=function(e){var t=e.ua,n=void 0===t?{}:t,r=e.isDarkMode,o=void 0!==r&&r,i=e.isFixed,a=void 0!==i&&i;return g.a.createElement("div",{className:a?"KfeCollection-FabledStatement-fixed":"KfeCollection-FabledStatement"},g.a.createElement(ye.a,{isDarkMode:o,ua:n},g.a.createElement(ge.a.Provider,{value:n},g.a.createElement(me.g,{disclaimerInfo:{excerpt:"包含虚构创作",description:"创作声明",subDescription:"内容中的情节存在虚构加工，仅供参考"}}))))};function je(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v()(e);if(t){var o=v()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h()(this,n)}}function we(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ce=function(e){f()(n,e);var t=je(n);function n(){return a()(this,n),t.apply(this,arguments)}return s()(n,[{key:"render",value:function(){var e=this.props,t=e.result,n=t.introCard,r=t.vipWorthInfo,o=t.isFabled,i=void 0!==o&&o,a=t.abParam,c=e.extra,s=c.ua,u=void 0===s?{}:s,l=c.isDarkMode,d=(r||{}).cardColor,f={isNewStyle:"1"===(a||{}).paTopLabel,isMobile:Boolean(u.Mobile)},p=f.isNewStyle&&!f.isMobile&&0!==d;return g.a.createElement("div",{className:"KfeCollection-AnswerTopCard-Container"},g.a.createElement("div",{className:p?"KfeCollection-AnswerTopCard-FlexContainer":""},2===d?g.a.createElement(ve,{data:r,extra:f}):g.a.createElement(be,{data:r,className:f.isNewStyle?"":"KfeCollection-AnswerTopCard-Privilege",extra:f}),i&&f.isNewStyle&&g.a.createElement(Oe,{ua:u,isDarkMode:l,isFixed:p})),Boolean(n)&&g.a.createElement("div",null,g.a.createElement(le,{introCard:n,extra:f})))}}]),n}(g.a.Component);we(Ce,"propTypes",{className:j.a.string,result:j.a.object.isRequired}),we(Ce,"defaultProps",{result:{articleDesc:{},vipWorthInfo:{},goodsCard:{},btnInfo:{},progressInfo:{},zaInfo:{}},extra:{ua:{}}});var ke=Ce,Se=n(49),xe=function(e){var t=e.answer,n=Object(o.useSelector)((function(e){return Object($.z)(e,null==t?void 0:t.id)}))||{},i=n.isRequesting,a=n.error,c=n.result,s=Boolean(!i&&!a&&!c),u=Object(o.useDispatch)();Object(m.useEffect)((function(){s&&u(Object($.v)(t.id))}),[s,u,t.id]);var l=Object(o.useSelector)(Se.l),d=Object(ye.f)().isDarkMode;return Object(r.b)(ke,{result:c,extra:{ua:l,isDarkMode:d}})},Re=Object(J.a)(null)((function(e){var t=e.answer;return"paid"===(null==t?void 0:t.answerType)?Object(r.b)(xe,{answer:t}):null}))},function(e,t,n){"use strict";var r=n(4),o=n(40),i=n(2),a=n(1),c=n.n(a),s=n(25),u=n(34),l=n(11),d=n.n(l),f=n(1333),p=n(320),h=n.n(p),b=n(28),v=n(48),m=n.n(v),g=n(66),y=n(444),O=n(36),j=n.n(O),w=n(26),C=n(1099),k=n(377),S=n(383),x=n(911),R=n(30),E=n(24);var _=function(e){var t=e.className,n=e.text,r=e.onFiles,o=e.zaClickId,c=e.multiple,s=void 0===c||c,u=Object(a.useRef)(null);return Object(i.c)(i.a,{children:[Object(i.b)(R.c,{className:d()("VideoUploadButton",t),preset:"primary",color:"blue",onClick:function(e){o&&b.a.trackEvent(e.target,{id:o,action:"Upload"}),u.current.click()},children:n}),Object(i.b)("input",{type:"file",className:"VideoUploadButton-fileInput",ref:u,onChange:function(){return r(u.current.files,"Add")},accept:E.a.VIDEO.join(","),multiple:s})]})},A=n(1100);function T(e){b.a.trackEvent(null,{id:9382,action:"StatusReport",path:[{module:"Content"}]},{module:[{card:{content:[{type:"Zvideo",id:String(e)}]}}],status:{result:"Success",event:{action:"Upload"}}})}var N=n(1265),I=n(802),M=n(834),D=function(e){var t=e.dataTransfer;return t.items?Array.from(t.items).filter((function(e){return"file"===e.kind})).map((function(e){return e.getAsFile()})):Array.from(t.files)},L=function(){return Object(i.b)("div",{className:"VideoUploadHint-footer",children:Object(i.c)("p",{children:["请不要添加无关的视频，详情查看"," ",Object(i.b)("a",{href:"https://www.zhihu.com/question/20118966",target:"_blank",rel:"noopener noreferrer",children:"知乎视频使用规范"}),Object(i.b)("br",{}),"上传视频，即代表你同意",Object(i.b)("a",{href:"https://www.zhihu.com/term/video",target:"_blank",rel:"noopener noreferrer",children:"《知乎视频用户协议》"})]})})};var P=function(e){var t=e.onFiles,n=e.enableZVideoListSelectorEntry,r=e.multiple,o=e.onOpenZVideoList;return Object(i.c)("div",{className:"VideoUploadHint",onDragEnter:function(e){return e.preventDefault()},onDragOver:function(e){return e.preventDefault()},onDrop:function(e){e.preventDefault();var n=D(e);t(n,"Drag")},children:[Object(i.b)("div",{className:"VideoUploadHint-iconBg",children:Object(i.b)(I.a,{className:"VideoUploadHint-icon"})}),Object(i.b)("div",{className:"VideoUploadHint-title",children:"拖放要上传的视频文件"}),Object(i.b)(_,{className:"VideoUploadHint-button",text:"上传视频",onFiles:t,zaClickId:7036,multiple:r}),r&&Object(i.b)("div",{className:"VideoUploadHint-uploadHint",children:"一次最多上传 20 个视频"}),n&&Object(i.c)("div",{className:"VideoUploadHint-listEntry",onClick:function(e){b.a.trackEvent(e.target,{id:8622,action:"Click"},{button:{text:"选择已发布的视频"}}),o()},children:["选择已发布的视频 ",Object(i.b)(M.a,{center:!0})]}),Object(i.b)(L,{})]})},z=n(90),B=n(370),F=n(157),U=n(867),q=n(176),V=n(173);function H(e){var t=e.item,n=e.onCheck,r=Object(a.useState)(!1),c=Object(o.a)(r,2),s=c[0],u=c[1],l=t.id,d=t.title,f=t.description,p=t.imageUrl,h=t.publishedAt,b=t.video,v=null==b?void 0:b.duration;return Object(i.c)(z.Flex,{p:"20px 24px",justifyContent:"space-between",alignItems:"center",children:[Object(i.c)(z.Flex,{flex:1,children:[Object(i.c)(z.Box,{width:112,height:70,flexShrink:0,marginRight:"16px",css:{position:"relative",borderRadius:3,overflow:"hidden"},children:[Object(i.b)(z.Image,{width:"100%",height:"100%",src:p,alt:"",css:{objectFit:"cover"}}),Object(i.b)(z.Text,{fontSize:12,lineHeight:"14px",color:"GBK99A",css:{position:"absolute",bottom:4,right:7,textShadow:"0 0 5px rgba(0,0,0,0.5)"},children:Object(x.b)(v)})]}),Object(i.c)(z.Flex,{flexDirection:"column",justifyContent:"center",flex:1,children:[Object(i.b)(z.Text,{fontSize:14,fontWeight:500,lineHeight:"20px",color:"GBK03A",css:[Object(V.d)(1)],children:d}),Object(i.b)(z.Text,{mt:"6px",fontSize:14,lineHeight:"20px",color:"GBK04A",css:[Object(V.d)(1)],children:f}),Object(i.b)(z.Text,{mt:"8px",fontSize:13,lineHeight:"16px",color:"GBK06A",children:Object(q.toRelativeString)(h)})]})]}),Object(i.b)(U.a,{css:{marginLeft:16,flexShrink:0},checked:s,onChange:function(e){u(e.currentTarget.checked),n(l)}})]})}function K(e){var t,n=e.onClose,r=e.onSubmit,c=Object(a.useState)([]),u=Object(o.a)(c,2),l=u[0],d=u[1],f=Object(s.useSelector)((function(e){return e.zvideos.insertable}))||{},p=f.isLoading,h=f.data,b=f.paging,v=Object(s.useDispatch)(),m=Object(a.useCallback)((function(){v(Object(k.i)())}),[v]),g=Object(a.useCallback)((function(e){l.includes(e)?d(l.filter((function(t){return t!==e}))):d(l.concat([e]))}),[l]);return Object(i.c)(z.Box,{height:688,children:[Object(i.b)(z.Box,{m:"40px auto",fontSize:24,fontWeight:500,lineHeight:"30px",color:"GBK02A",textAlign:"center",children:"选择已发布的视频"}),Object(i.b)(B.b,{css:{marginBottom:100},onLoad:m,isLoading:null!=p&&p,isDrained:null!==(t=null==b?void 0:b.isEnd)&&void 0!==t&&t,getContainer:function(e){return e.parentElement.parentElement.parentElement},children:h.map((function(e,t){return Object(i.b)(F.a,{children:Object(i.b)(H,{item:e,onCheck:g})},t)}))}),Object(i.c)(z.Flex,{bg:"GBK99A",p:"32px 25px",width:"100%",height:100,justifyContent:"center",css:{position:"absolute",left:0,right:0,bottom:0},children:[Object(i.b)(R.c,{css:{flex:1},onClick:n,children:"返回"}),Object(i.b)(R.c,{disabled:0===l.length,css:{flex:1,marginLeft:18},preset:"primary",color:"blue",onClick:function(){r(l),n()},children:"添加"})]})]})}var Q=n(74),W=n(249),G=n(1159),Z=n(1117),Y=n(32),J=n(131),$=Object.assign;var X=function(e){return c.a.createElement(J.a,$({width:"16",height:"16",viewBox:"0 0 16 16"},e),c.a.createElement("g",{fill:"none",fillRule:"evenodd"},c.a.createElement("circle",{cx:"8",cy:"8",r:"8",fill:"#06F"}),c.a.createElement("path",{stroke:"#fff",d:"M4.5 8L7 10.5l4.5-5",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"})))},ee=Object.assign;var te=function(e){return c.a.createElement(J.a,ee({width:"16",height:"16",viewBox:"0 0 16 16"},e),c.a.createElement("circle",{cx:"8",cy:"8",r:"7.25",fill:"#fff",stroke:"#999",fillRule:"evenodd",strokeWidth:"1.5"}))},ne=Object.assign;var re=function(e){return c.a.createElement(J.a,ne({width:"16",height:"16",viewBox:"0 0 16 16"},e),c.a.createElement("g",{fill:"none",fillRule:"evenodd"},c.a.createElement("circle",{cx:"8",cy:"8",r:"8",fill:"#3a76d0"}),c.a.createElement("path",{stroke:"#ebebeb",d:"M4.5 8L7 10.5l4.5-5",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"})))},oe=Object.assign;var ie=function(e){return c.a.createElement(J.a,oe({width:"16",height:"16",viewBox:"0 0 16 16"},e),c.a.createElement("circle",{cx:"8",cy:"8",r:"7.25",fill:"#2e2e2e",stroke:"#646464",fillRule:"evenodd",strokeWidth:"1.5"}))},ae=function(e){var t=e.checked,n=Object(Y.a)(e,["checked"]),r=function(e,t){return e?t?re:ie:t?X:te}(Object(s.useSelector)((function(e){return"dark"===e.env.theme})),t);return Object(i.c)(i.a,{children:[Object(i.b)("input",Object.assign({type:"checkbox",checked:t},n)),Object(i.b)(r,{className:"CheckboxIcon"})]})},ce=n(1127),se=n(953);var ue=function(e){var t=e.className,n=e.imageUrl,r=e.duration,o=e.title,a=e.titleHint,c=e.titleBottom,s=e.tool;return Object(i.c)("div",{className:d()("VideoUploadItemInfo",t),children:[n&&Object(i.c)("div",{className:"VideoUploadItemInfo-imageContainer",children:[Object(i.b)("img",{className:"VideoUploadItemInfo-image",src:n,alt:""}),Object(i.b)("div",{className:"VideoUploadItemInfo-duration",children:Object(se.a)(r)})]}),Object(i.c)("div",{className:"VideoUploadItemInfo-titleContainer",children:[Object(i.b)("div",{className:"VideoUploadItemInfo-title",children:o}),Object(i.b)("div",{className:"VideoUploadItemInfo-titleHint",children:a}),c]}),Object(i.b)("div",{className:"VideoUploadItemInfo-toolContainer",children:s})]})};var le=function(e){var t=e.className,n=e.current,r=e.max;return Object(i.b)("div",{className:d()("VideoUploadProgress",t),children:Object(i.b)("div",{className:"VideoUploadProgress-current",style:{width:"".concat(n/r*100,"%")}})})},de=n(954);function fe(e){var t=e/1e3/1e3;return"".concat(t>=1?Math.round(t):t.toFixed(1),"MB")}var pe=["CHANGE_MIND","TOO_SLOW","NO_PROGRESS","OTHER"].sort((function(){return.5-Math.random()})),he={CHANGE_MIND:"我不想发了",TOO_SLOW:"上传速度太慢",NO_PROGRESS:"上传卡住了",OTHER:"其他"};var be=function(e){var t=Object(s.useDispatch)(),n=e.className,r=e.infoClassName,c=e.formClassName,u=e.video,l=e.shouldShowSyncToListCheckbox,f=void 0!==l&&l,p=e.forwardToZVideoPage,h=e.createVideoDraft,b=e.updateVideoDraft,v=e.onUploadError,m=e.onRemove,y=e.onPublish,O=e.handleVideoStateChange,w=e.shouldShowScheduledPublish,C=u.status,S=u.file,x=!!u.queryVideoId,E=Object(a.useRef)(null),_=Object(a.useRef)(null),A=Object(a.useState)(!1),T=Object(o.a)(A,2),N=T[0],I=T[1],M=Object(a.useState)(""),D=Object(o.a)(M,2),L=D[0],P=D[1],z=Object(a.useState)(""),B=Object(o.a)(z,2),F=B[0],U=B[1],q=Object(a.useState)({uploadedSize:0}),V=Object(o.a)(q,2),H=V[0],K=V[1],Y=Object(a.useState)(!1),J=Object(o.a)(Y,2),$=J[0],X=J[1],ee=Object(g.c)((function(){E.current&&(E.current.getSession("video",S).abort(),E.current=null,X(!1))}));Object(a.useEffect)((function(){"uploading"!==C||$||(E.current=new W.b({usage:"zvideo",apiRoot:j.a.fetchRoot.lens}),X(!0))}),[C,S,$]);var te=Object(g.c)((function(){if(E.current){var e=E.current.getSession("video",S);O(e.state),K(e.state),e.state.completed&&e.off("change",te)}})),ne=$&&E.current&&0===H.uploadedSize;Object(a.useEffect)((function(){ne&&E.current.getSession("video",S).on("change",te)}),[ne,S,te]);var re=Object(g.c)((function(e,t){return"uploaded"===e?null==h?void 0:h(Object.assign({},t,{isLens:!0,isPlayable:!0,thumbnail:de.a,url:"https://www.zhihu.com/video/".concat(t.id),playerUrl:"https://www.zhihu.com/video/".concat(t.id)})):"cover"===e?(ee(),null==b?void 0:b({imageUrl:t.thumbnail||de.a})):void 0})),oe=Object(g.c)((function(){if(ee(),m(),L){var e="取消时上传进度：".concat(Math.round(H.uploadedSize/S.size*100),"%"),n=F?"「".concat(e,"」").concat(F,"}"):e,r=(u||{}).id;t(Object(k.v)(L,n,r))}U(""),P("")})),ie=function(){return I(!0)},se=function(){return I(!1)},be=function(e){var t=e.target.name;P(t)},ve=Object(a.useCallback)((function(e){U(e.currentTarget.value)}),[U]),me=["uploading","uploaded"].includes(C),ge=Object(a.useMemo)((function(){return fe(S.size)}),[S.size]);return Object(i.c)("div",{className:d()("VideoUploadItem","VideoUploadItem--".concat(C),n),children:["pending"===C&&Object(i.b)(ue,{className:r,title:S.name,titleHint:"等待上传 ".concat(ge),tool:Object(i.b)(R.c,{preset:"plain",onClick:oe,children:"取消上传"})}),"uploading"===C&&Object(i.b)(ue,{className:r,title:S.name,titleHint:"UPLOADING_SUCCESS"===H.uploadingStatus?"上传完成，正在生成默认视频封面":"正在上传 ".concat(Math.round(H.uploadedSize/S.size*100),"% ").concat(fe(H.uploadedSize)," / ").concat(ge),titleBottom:Object(i.b)(le,{className:"VideoUploadItem-progress",current:H.uploadedSize,max:S.size}),tool:Object(i.b)(R.c,{className:"VideoUploadItem-toolLastButton",preset:"plain",onClick:ie,children:"取消上传"})}),$&&Object(i.b)(G.a,{ref:_,className:"VideoUploadItem-videoUploader",coverButtonText:"编辑视频封面",uploadManager:E.current,onVideoProcessStep:re,onVideoUploadError:function(e){"uploaded"!==C&&v(e)},data:{upload:{file:S}},isPin:!0}),"uploadError"===C&&Object(i.b)(ue,{className:r,title:S.name,titleHint:"上传失败，请尝试重新上传",tool:Object(i.b)(R.c,{preset:"plain",onClick:oe,children:"删除视频"})}),"uploaded"===C&&Object(i.b)(ue,{className:r,title:S.name,titleHint:"上传完成 ".concat(x?"":ge),tool:x?"":Object(i.b)(R.c,{preset:"plain",onClick:ie,children:"删除视频"})}),"published"===C&&!p&&Object(i.b)(ue,{className:r,imageUrl:u.imageUrl,duration:u.video.duration,title:u.title,titleHint:Object(i.b)("a",{href:"https://www.zhihu.com/zvideo/".concat(u.id),target:"_blank",rel:"noopener noreferrer",children:"发布成功，点击前往详情页查看"})}),me&&Object(i.b)(ce.a,{className:c,defaultVideo:u,defaultCampaignId:e.defaultCampaignId,shouldShowSyncToListCheckbox:f,shouldShowScheduledPublish:w,onRemove:ie,onSubmit:y,checkFormValid:function(){return"uploaded"!==C?"请在视频上传完成后发布":null}}),Object(i.b)(Q.b,{className:"VideoUploadItem-modal",title:"确定取消上传该视频嘛？",subtitle:"取消上传后，已上传部分不会被保留",onClose:se,children:N&&Object(i.c)("div",{className:"VideoUploadItem-modalContent",children:[Object(i.b)("p",{children:"为什么取消上传？你的建议也许能帮助我们"}),pe.map((function(e){return Object(i.c)("label",{children:[Object(i.b)(ae,{name:e,onChange:be,checked:L===e}),Object(i.b)("span",{className:"VideoUploadItem-OptionItem-Title",children:he[e]})]},e)})),"OTHER"===L&&Object(i.b)(Z.a,{className:"VideoUploadItem-feedback",placeholder:"请在这里填上你的反馈",value:F,onChange:ve,large:!0,maxLength:300}),Object(i.c)(Q.a,{direction:"horizontal",children:[Object(i.b)(R.c,{preset:"primary",onClick:se,children:"继续上传"}),Object(i.b)(R.c,{preset:"primary",onClick:oe,color:"blue",children:"取消上传"})]})]})})]})},ve=n(980),me=n(863);var ge=function(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),n=t[0],r=t[1],c=Object(s.useDispatch)(),u=Object(a.useRef)([]);Object(a.useEffect)((function(){c(Object(k.e)()).then((function(e){var t=e.payload.data;r(t)}))}),[c]);var l=Object(a.useCallback)((function(e){var t=e.index;if(!u.current[t]){u.current[t]=!0;var r=n[t];b.a.trackCardShow(null,{id:9517},{link:{url:r.url},button:{text:String(r.id)}})}}),[n]),d=Object(a.useCallback)((function(e){return Object(i.b)(z.Link,{href:e.url,target:"_blank",css:{display:"flex",flex:"0 0 100%"},"data-za-detail-view-id":9518,"data-za-extra":JSON.stringify({link:{url:e.url},button:{text:String(e.id)}}),children:Object(i.b)(me.a,{ratio:7.5,css:{width:"100%"},children:Object(i.b)(z.Image,{src:e.imageUrl,alt:"",size:"100%",css:{objectFit:"cover"}})})})}),[]);return 0===n.length?null:Object(i.b)(z.Flex,{css:{justifyContent:"center",height:"100%",overflowX:"scroll",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},children:Object(i.b)(ve.a,{items:n.slice(0,5),renderItem:d,enableArrows:!0,interval:3e3,css:{maxWidth:1e3,margin:20,borderRadius:4},onSlide:l})})};n(1120);t.a=Object(u.withRouter)((function(e){var t,n=e.type,c=void 0===n?"create":n,u=e.defaultCampaignId,l=e.enableMultipleUpload,p=void 0!==l&&l,v=e.enableZVideoListSelectorEntry,O=void 0!==v&&v,R=e.shouldShowSyncToListCheckbox,E=void 0!==R&&R,I=e.onClose,M=e.onSubmit,D=e.forwardToZVideoPage,L=void 0!==D&&D,z=e.isInModal,B=void 0!==z&&z,F=e.shouldPublish,U=void 0===F||F,q=e.showBanner,V=void 0!==q&&q,H=e.shouldShowScheduledPublish,Q=void 0!==H&&H,W=e.route,G=e.router,Z=e.location.query.videoId,Y=Object(a.useState)(Z?[{queryVideoId:Z,tempId:h()(),file:{size:0,name:"已上传视频"},status:"uploaded",imageUrl:de.a}]:[]),J=Object(o.a)(Y,2),$=J[0],X=J[1],ee=Object(a.useState)({}),te=Object(o.a)(ee,2),ne=te[0],re=te[1],oe=Object(a.useState)(!1),ie=Object(o.a)(oe,2),ae=ie[0],ce=ie[1],se=(Object(s.useSelector)((function(e){return e.zvideos.insertable}))||{}).data,ue=Object(C.a)([k.b,k.u,k.o,k.p,w.h,k.i,k.s,S.j]),le=Object(o.a)(ue,8),fe=le[0],pe=le[1],he=le[2],ve=le[3],me=le[4],ye=le[5],Oe=le[6],je=le[7],we=Object(g.c)((function(e,t){var n=Object.assign({},$[e],{status:"uploaded",videoId:t.id,imageUrl:t.thumbnail,video:{id:t.id,duration:t.duration}});return X($.map((function(t,r){return e===r?n:t}))),fe(n).then((function(t){var r=t.payload;X($.map((function(t,o){return e===o?Object.assign({},n,{id:r.id}):t})))}))}));Object(a.useEffect)((function(){Z&&we(0,{id:Z}).then((function(){return Object(y.b)(Z,{apiRoot:j.a.fetchRoot.lens})})).then((function(e){e&&X((function(t){return[Object.assign({},t[0],{imageUrl:e})]}))}))}),[Z,we]),Object(a.useEffect)((function(){var e,t=null===(e=$[0])||void 0===e?void 0:e.id;if(t){var n=Object(N.a)(Z);n&&pe(t,{vessayOutline:n})}}),[$,Z,pe]);var Ce=Object(a.useCallback)((function(e,t){var n,o,i=Object(x.a)(e,p);i.errMsg&&(me(i.errMsg,"red"),i.abortUpload)||(b.a.trackEvent(null,{id:9479,action:t,path:[{module:"Content"}]},{module:[{card:{content:[{video_count:null===(n=i.validFiles)||void 0===n?void 0:n.length}]}}]}),X([].concat(Object(r.a)($),Object(r.a)(null===(o=i.validFiles)||void 0===o?void 0:o.map((function(e){return{tempId:h()(),file:e,title:Object(A.b)(e.name),status:"pending"}}))))))}),[p,$,me]),ke=function(e){var t=Math.round(e.uploadedSize/e.fileSize*100);re({uploadProgress:t,fileSize:e.fileSize})},Se=Object(a.useCallback)((function(){(null==se?void 0:se.length)>0?ce(!0):ye().then((function(e){e.payload.data.length?ce(!0):me("还没有发布过视频")}))}),[se,ye,me]);Object(a.useEffect)((function(){if(!$.some((function(e){return"uploading"===e.status}))){var e=$.findIndex((function(e){return"pending"===e.status}));-1!==e&&X($.map((function(t,n){return n!==e?t:Object.assign({},t,{status:"uploading",uploadedSize:0})})))}}),[$,X]);var xe=Object(a.useCallback)((function(){G.setRouteLeaveHook(W,null),window.onbeforeunload=null}),[G,W]);return Object(a.useEffect)((function(){if(W&&G){if($.some((function(e){return"uploading"===e.status}))){var e,t,n=ne.uploadProgress,r=ne.fileSize,o=Math.round(1024*(null===(e=navigator)||void 0===e||null===(t=e.connection)||void 0===t?void 0:t.downlink)||1024e3);m.a.timing("VideoUpload.default.upload_cancel.downlink",o),m.a.timing("VideoUpload.default.upload_cancel.fileSize",r),m.a.timing("VideoUpload.default.upload_cancel.uploadProgress",n),G.setRouteLeaveHook(W,(function(){return"确定离开该页面？有暂未发布的视频，离开后内容将被清空"})),window.onbeforeunload=function(){return"确定离开该页面？有暂未发布的视频，离开后内容将被清空"}}else xe();return xe}}),[G,W,$,xe,ne]),ae?Object(i.b)(K,{onSubmit:M,onClose:function(){ce(!1)}}):void 0===Z&&0===$.length?Object(i.c)(i.a,{children:[V&&Object(i.b)(ge,{}),Object(i.b)(P,{onFiles:Ce,enableZVideoListSelectorEntry:O,multiple:p,onOpenZVideoList:Se})]}):L&&"published"===(null===(t=$[0])||void 0===t?void 0:t.status)?Object(i.b)("div",{className:"ZVideoUploader-published",children:Object(i.b)("span",{children:"发布成功，跳转中..."})}):Object(i.c)("div",{className:d()("ZVideoUploader-form",{"ZVideoUploader-modalForm":B}),children:[Object(i.c)("div",{className:"ZVideoUploader-titleArea",children:[Object(i.b)("span",{className:"ZVideoUploader-title",children:"insert"===c?"添加视频":"上传视频"}),p&&Object(i.b)(_,{text:"添加视频",onFiles:Ce,zaClickId:7037})]}),$.map((function(e,t){var n;return Object(i.b)(be,{className:"ZVideoUploader-videoUploadItem",video:e,forwardToZVideoPage:L,handleVideoStateChange:ke,shouldShowSyncToListCheckbox:E,shouldShowScheduledPublish:Q,defaultCampaignId:u,createVideoDraft:function(e){return we(t,e)},updateVideoDraft:function(e){return function(e,t){var n=Object.assign({},$[e],t);X($.map((function(t,r){return e===r?n:t}))),n.id&&pe(n.id,t)}(t,e)},onUploadError:function(){X($.map((function(e,n){return t!==n?e:Object.assign({},e,{status:"uploadError"})})))},onRemove:function(){X($.filter((function(e,n){return t!==n})))},onPublish:function(e,n){if(null==M||M([e.id]),null==I||I(),U){var r=e.id,o=e.publishAt,i=e.clubId;if(n&&o)return ve(r,Math.floor(o/1e3)).then((function(){me("内容已保存在草稿箱，将在 ".concat(f.a(o,"yyyy/MM/dd HH:mm")," 时间发布")),je(r),X(p?$.filter((function(e,n){return n!==t})):[])})),void T(r);he(r).then((function(){je(r),X($.map((function(n,r){return t!==r?n:Object.assign({},n,e,{status:"published"})}))),i&&Oe(r,i),T(r),L&&(b.a.trackPageShow({id:9516}),window.location.href="https://www.zhihu.com/zvideo/".concat(r))}))}}},e.tempId||e.id||(null===(n=e.video)||void 0===n?void 0:n.id))}))]})}))},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(2),o=n(1),i=n.n(o),a=n(367),c=n(881),s=n(131),u=Object.assign;var l=function(e){return i.a.createElement(s.a,u({width:"8",height:"10",fill:"none",viewBox:"0 0 8 10"},e),i.a.createElement("path",{fill:"#121212",d:"M1.315 9.302a.6.6 0 01-.915-.51v-7.52a.6.6 0 01.914-.51l6.11 3.754a.6.6 0 010 1.022l-6.11 3.764z",fillRule:"evenodd",clipRule:"evenodd"}))};function d(e){var t=e.videoId,n=e.zvideoId,i=e.title,s=e.playCount,u=void 0===s?0:s,d=e.voteupCount,f=void 0===d?0:d,p=e.isComplete,h=void 0!==p&&p,b=e.startTime,v=Number((void 0===b?0:b)/1e3),m=Object(o.useRef)(),g=Object(o.useRef)({currentTime:0}),y=Object(o.useRef)(Object(c.c)(t,"*",!0));Object(o.useEffect)((function(){var e=y.current.subscribeMessage((function(e,t){e===c.b.DOM.TIMEUPDATE&&(g.current.currentTime=t.currentTime)}));return function(){return e.unsubscribe()}}),[]);return Object(r.c)("div",{className:"VideoContributionAnswer-container",children:[Object(r.b)("div",{className:"VideoContributionAnswer-video",children:Object(r.b)("iframe",{ref:m,className:"VideoContributionAnswer-player",src:"https://www.zhihu.com/video/".concat(t),allowFullScreen:!0})}),h?null:Object(r.c)("div",{className:"VideoContributionAnswer-stateBar",onClick:function(){y.current.dispatchMessage(m.current.contentWindow,c.a.PLAYER.PAUSE,{});var e=(g.current.currentTime+v).toFixed(1);window.open("https://www.zhihu.com/zvideo/".concat(n,"?playTime=").concat(e))},children:[Object(r.c)("div",{className:"VideoContributionAnswer-state",children:[Object(r.b)("div",{className:"VideoContributionAnswer-state--title",children:i}),Object(r.c)("div",{className:"VideoContributionAnswer-state--data",children:[Object(a.cnNiceNumber)(u),"播放",f>0?" · ".concat(Object(a.cnNiceNumber)(f),"赞同"):null]})]}),Object(r.c)("div",{className:"VideoContributionAnswer-action",children:[Object(r.b)(l,{style:{marginRight:"6px"}}),"完整版"]})]})]})}},,,function(e,t,n){"use strict";var r=n(2),o=n(1),i=n(11),a=n.n(i),c=n(781),s=n(406);t.a=function(e){var t=e.show,n=e.setModal,i=e.children,u=e.className,l=e.onCancel,d=e.hideIcon,f=e.maskClosable,p=void 0===f||f,h=function(){n?n(!1):l&&l()},b=Object(o.useRef)();return Object(o.useEffect)((function(){var e=null;return t?(document.body.style.overflow="hidden",e=Object(s.a)(b.current)):document.body.style.overflow="auto",function(){e&&e()}}),[t]),Object(r.b)("div",{className:u,children:Object(r.c)("div",{ref:b,children:[Object(r.b)("div",Object.assign({className:a()({"ModalExp-background":t})},p&&{onClick:h})),Object(r.c)("div",{className:a()("ModalExp-content",{"ModalExp-modalShow":t}),onClick:function(e){e.stopPropagation()},children:[!d&&Object(r.b)(c.a,{size:24,fill:"#d3d3d3",className:"ModalExp-closeIcon",onClick:h}),i]})]})})}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n(13),o=n(14),i=n(15),a=n(16),c=n(9),s=n(2),u=n(1),l=n(3),d=n.n(l),f=n(74),p=n(30),h=n(781),b=n(1172),v=n(1272);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var g=function(e){Object(i.a)(n,e);var t=m(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.memberHashId,n=e.isModalShow,r=e.handleCloseModal;return Object(s.b)(f.b,{className:"ChatBoxModal",spread:!0,onClose:r,contentClassName:"ChatBoxModal-content",closeButton:Object(s.b)(p.c,{preset:"plain",className:"ChatBoxModal-closeButton",onClick:r,"aria-label":"关闭",children:Object(s.b)(h.a,{className:"ChatBoxModal-closeIcon"})}),children:n&&Object(s.b)(b.a,{handleReceiveMessage:this.handleReceiveMessage,children:Object(s.b)(v.a,{type:"default",senderId:t,className:"Chat-ChatBox"},t)})})}}]),n}(u.Component);g.propTypes={memberHashId:d.a.string,handleCloseModal:d.a.func,isModalShow:d.a.bool}},function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(18),a=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M2.224 21.667s4.24-1.825 4.788-2.056C15.029 23.141 22 17.714 22 11.898 22 6.984 17.523 3 12 3S2 6.984 2 11.898c0 1.86.64 3.585 1.737 5.013-.274.833-1.513 4.756-1.513 4.756zm5.943-9.707c.69 0 1.25-.569 1.25-1.271a1.26 1.26 0 0 0-1.25-1.271c-.69 0-1.25.569-1.25 1.27 0 .703.56 1.272 1.25 1.272zm7.583 0c.69 0 1.25-.569 1.25-1.271a1.26 1.26 0 0 0-1.25-1.271c-.69 0-1.25.569-1.25 1.27 0 .703.56 1.272 1.25 1.272z",fillRule:"evenodd"}))};a.defaultProps={name:"WeChat"},t.a=a},function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(18),a=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{fill:"#FB6622",d:"M15.518 3.06c8.834-.854 7.395 7.732 7.394 7.731-.625 1.439-1.673.309-1.673.309.596-7.519-5.692-6.329-5.692-6.329-.898-1.067-.029-1.711-.029-1.711zm4.131 6.985c-.661 1.01-1.377.126-1.376.126.205-3.179-2.396-2.598-2.396-2.598-.719-.765-.091-1.346-.091-1.346 4.882-.551 3.863 3.818 3.863 3.818zM5.317 7.519s4.615-3.86 6.443-1.328c0 0 .662 1.08-.111 2.797.003-.003 3.723-1.96 5.408.159 0 0 .848 1.095-.191 2.649 0 0 2.918-.099 2.918 2.715 0 2.811-4.104 6.44-9.315 6.44-5.214 0-8.026-2.092-8.596-3.102 0 0-3.475-4.495 3.444-10.33zm10.448 7.792s.232-4.411-5.71-4.207c-6.652.231-6.579 4.654-6.579 4.654.021.39.097 3.713 5.842 3.713 5.98 0 6.447-4.16 6.447-4.16zm-9.882.86s-.059-3.632 3.804-3.561c3.412.06 3.206 3.165 3.206 3.165s-.026 2.979-3.684 2.979c-3.288 0-3.326-2.583-3.326-2.583zm2.528 1.037c.672 0 1.212-.447 1.212-.998 0-.551-.543-.998-1.212-.998-.672 0-1.215.447-1.215.998 0 .551.546.998 1.215.998z",fillRule:"evenodd"}))};a.defaultProps={name:"Weibo"},t.a=a},,function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(32),o=n(2),i=n(90),a=n(3),c=n.n(a),s=n(802),u=n(1482);function l(e){var t,n,r=e.preset,a=e.deltaFixed,c=e.compareCount,l=void 0===c?null:c,d=e.originCount,f="small"===r,p=(n=void 0===d?null:d,null===(t=l)||null===n||0===t?null:(n-t)/t);if(null===p)return"--";var h=p>=0?{color:"GBL01A",icon:s.a}:{color:"GRD01A",icon:u.a},b=h.color,v=h.icon;return Object(o.c)(o.a,{children:[Object(o.b)(i.Text,{color:b,as:"span",children:Object(o.b)(v,{text:!0,center:!0})})," ",Object(o.b)(i.Text,{color:f&&b,as:"span",children:"".concat(a&&Math.abs(p)>10?"1000+":Math.abs(Math.round(1e4*p)/100),"%")})]})}function d(e){var t=e.className,n=e.textClassName,a=e.text,c=Object(r.a)(e,["className","textClassName","text"]),s="small"===c.preset;return Object(o.c)(i.Flex,{css:{fontSize:12,alignItems:"center",justifyContent:"space-between"},className:t,children:[Object(o.b)(i.Text,{className:n,color:s?"GBK06A":"GBL08A",children:a}),Object(o.b)(i.Text,{sx:{fontWeight:"bold"},css:{marginLeft:4},children:Object(o.b)(l,Object.assign({},c))})]})}d.propTypes={preset:c.a.oneOf(["normal","small"])},t.b=d},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(214),o=n(58);function i(e,t){Object(o.a)(2,arguments);var n=Object(r.a)(e),i=Object(r.a)(t);return n.getTime()===i.getTime()}},function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(18),a=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M2 18.242c0-.326.088-.532.237-.896l7.98-13.203C10.572 3.57 11.086 3 12 3c.915 0 1.429.571 1.784 1.143l7.98 13.203c.15.364.236.57.236.896 0 1.386-.875 1.9-1.955 1.9H3.955c-1.08 0-1.955-.517-1.955-1.9z",fillRule:"evenodd"}))};a.defaultProps={name:"TriangleUp"},t.a=a},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(2),o=n(90),i=n(1504),a=n(234);function c(e){var t=e.handleClick;return Object(r.c)(a.a,{as:o.Flex,zaAction:"Unknown",zaText:"全屏编辑",zaType:"Button",aliginItem:"center",fontSize:14,color:"GBL05A",pr:"20px",lineHeight:"55px",css:{cursor:"pointer"},onClick:t,children:[Object(r.b)(o.Text,{mr:"10px",children:"全屏编辑"}),Object(r.b)(i.a,{text:!0,center:!0})]})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(2),o=n(1),i=n.n(o),a=n(90),c=n(154),s={textAnswer:"textAnswer",videoAnswer:"videoAnswer"},u=[{key:s.textAnswer,name:"图文回答"},{key:s.videoAnswer,name:"视频回答"}];function l(e,t){var n=e.activeTabKey,o=e.onChange;return Object(r.b)(c.b,{children:u.map((function(e){var i=e.key,u=e.name;return Object(r.b)(c.a,{css:{padding:"0 10px",":first-of-type":{paddingLeft:20}},children:Object(r.b)(a.Text,{ref:i===s.videoAnswer?t:null,onClick:function(){return o(i)},css:function(e){return Object.assign({color:e.colors.GBK03A,cursor:"pointer"},n===i&&{fontWeight:"bold",borderBottom:"4px solid ".concat(e.colors.GBL01A)})},children:u})},i)}))})}t.b=i.a.forwardRef(l)},function(e,t,n){e.exports=n.p+"assets/logo.804f083e.png"},,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return Tr}));var r=n(40),o=n(845),i=n(13),a=n(67),c=n(14),s=n(15),u=n(16),l=n(9),d=n(2),f=n(3),p=n.n(f),h=n(1),b=n.n(h),v=n(25),m=n(19),g=n(34),y=n(11),O=n.n(y),j=n(90),w=n(371),C=n.n(w),k=n(1368),S=n(1494),x=n(1504),R=n(1506),E=n(1343),_=n(835),A=n(1507),T=n(30),N=n(83),I=n(906),M=n(246),D=n(237),L=n(376),P=n(175),z=n(176),B=n(35),F=n.n(B),U=n(368),q=n(1304),V=n(323),H=n(132),K=n(975),Q=n(28),W=n(234),G=n(1327);function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var Y=function(e){Object(s.a)(n,e);var t=Z(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).handleHide=function(){F.a.set("AnswerOrg::know",!0),e.props.onClose()},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props,t=e.shown,n=e.onClose;return Object(d.b)(H.b,{title:"机构帐号提问规则",subtitle:"这是一个「机构提问」，请在回答前了解以下规则",onClose:n,children:t&&Object(d.c)("div",{children:[Object(d.c)("ul",{className:"AnswerModal-list",children:[Object(d.b)("li",{children:"1. 提问机构如需使用你的回答，由提问机构联系你，共同商定确认使用条件。"}),Object(d.b)("li",{children:"2.「机构提问」下的回答，站内传播与社区公共提问下的回答有所区别。"}),Object(d.b)("li",{children:"3. 提问机构可能「隐藏」回答，被「隐藏」回答不在社区内流通。"})]}),Object(d.b)("a",{className:"AnswerModal-moreLink",href:"/org-intro#org-question",target:"_blank",children:"了解更多"}),Object(d.c)(H.a,{direction:"horizontal",children:[Object(d.b)(T.c,{onClick:this.handleHide,children:"不再显示"}),Object(d.b)(T.c,{color:"blue",preset:"primary",onClick:n,children:"知道了"})]})]})})}}],[{key:"getKnown",value:function(){return F.a.get("AnswerOrg::know")}}]),n}(h.Component),J=n(74);function $(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var X=function(e){Object(s.a)(n,e);var t=$(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).handleHide=function(){F.a.set("AnswerBrand::know",!0),e.props.onClose()},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props,t=e.shown,n=e.onClose;return Object(d.b)(J.b,{title:"品牌提问规则",subtitle:"这是一个「品牌提问」，请在回答前了解：",onClose:n,children:t&&Object(d.c)("div",{children:[Object(d.b)("p",{children:"「品牌提问」由品牌方管理，回答由品牌方筛选后展示，传播与社区提问有所区别。回答著作权归作者所有。"}),Object(d.b)("a",{className:"AnswerModal-moreLink",href:"/introduction/brand_question",target:"_blank",children:"了解品牌提问"}),Object(d.c)(J.a,{direction:"horizontal",children:[Object(d.b)(T.c,{onClick:this.handleHide,children:"知道了，继续回答"}),Object(d.b)(T.c,{color:"blue",preset:"primary",onClick:n,children:"取消"})]})]})})}}],[{key:"getKnown",value:function(){return F.a.get("AnswerBrand::know")}}]),n}(h.Component),ee=n(1311);n(1120);var te=function(e){var t=e.show,n=e.type,r=e.onSubmit,o=e.onClose,i=e.defaultCampaignId,a=e.enableZVideoListSelectorEntry,c=e.enableMultipleUpload;return t?Object(d.b)(J.b,{className:"ZVideoUploader-modal",onClose:o,size:"fullPage",children:Object(d.b)(ee.a,{type:n,onSubmit:r,onClose:o,defaultCampaignId:i,enableZVideoListSelectorEntry:a,enableMultipleUpload:c,shouldShowSyncToListCheckbox:!0,isInModal:!0,shouldPublish:!1})}):null},ne=n(442),re=n(940),oe=n(445),ie=n(404),ae=n(101),ce=n(70),se=n(401),ue=n(26),le=n(37),de=n(49),fe=n(425),pe=n(173),he=n(1262),be=n(1300),ve=n(242);function me(e){var t=e.title,n=e.isSecondary,r=e.customTitle,o=e.children;return Object(d.c)(j.Flex,{pl:n?"20px":0,py:"20px",justifyContent:"space-between",alignItems:"center",css:function(e){return Object.assign({},Object(pe.c)({borderTop:"1px solid ".concat(e.colors.GBK09A)}))},children:[r||Object(d.b)(j.Text,{color:"GBL05A",fontSize:14,fontWeight:"bold",children:t}),o]})}var ge=n(66),ye=n(872),Oe=n(867),je=n(134),we=n(24);function Ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var ke=function(e){Object(s.a)(n,e);var t=Ce(n);function n(e){var r;Object(i.a)(this,n),(r=t.call(this,e)).onChangeInputType=function(e){r.setState({checked:e.target.checked})},r.onChangeInputValue=function(e){r.setState({text:e.target.value})},r.submit=function(){var e=r.state.text;r.props.submitRewardText(e)};var o,a=e.tagline;return r.state={text:(o=a,o.replace(/^「/,"").replace(/」$/,"")||we.p),checked:!0},r}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.edit,r=this.state,o=r.text,i=r.checked;return Object(d.c)(H.b,{onClose:t,className:"RewardForm-rewardModal",children:[Object(d.b)("p",{className:"RewardForm-rewardTitle",children:n?"编辑赞赏描述":"开启赞赏"}),Object(d.b)(je.a,{className:"RewardForm-rewardInput",maxLength:"20",type:"text",value:o,onChange:this.onChangeInputValue}),Object(d.c)("div",{className:"RewardForm-remark",children:[!n&&Object(d.c)("label",{className:"RewardForm-protocol",children:[Object(d.b)(Oe.a,{className:"RewardForm-rewardCheckbox",onChange:this.onChangeInputType,checked:i,size:16}),"我已同意",Object(d.b)("a",{className:"RewardForm-rewardLink",href:"/terms/tipjar",children:"《知乎赞赏功能使用协议》"})]}),Object(d.b)("p",{className:"RewardForm-prompting",children:"还可以输入".concat(20-o.length,"个字")})]}),Object(d.b)(T.c,{className:O()("RewardForm-rewardSubmit",{"RewardForm-rewardSubmit-disabled":!i}),onClick:this.submit,disabled:!i,children:"确定"})]})}}]),n}(h.Component);ke.propTypes={onClose:p.a.func,submitRewardText:p.a.func,edit:p.a.bool,tagline:p.a.string},ke.defaultProps={tagline:we.p};var Se=n(381),xe=n(73),Re=n.n(xe);function Ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var _e=Object(h.createContext)({updateFormData:function(){},formData:{}}),Ae=function(e){var t=function(t){Object(s.a)(r,t);var n=Ee(r);function r(){var e;Object(i.a)(this,r);for(var t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return(e=n.call.apply(n,[this].concat(o))).state={},e.answerFormDataProps={updateFormData:function(t){return e.setState(t)},getFormData:function(){return e.state}},e}return Object(c.a)(r,[{key:"render",value:function(){return Object(d.b)(_e.Provider,{value:this.answerFormDataProps,children:Object(d.b)(e,Object.assign({},this.props,this.answerFormDataProps))})}}]),r}(h.Component);return Re()(t,e)},Te=function(e){var t,n=Object(le.b)(e),r=Object.values(e.entities.answers).filter((function(e){var t;return(null===(t=e.author)||void 0===t?void 0:t.urlToken)===(n&&n.urlToken)}))[0]||{};return null==r||null===(t=r.rewardInfo)||void 0===t?void 0:t.tagline};function Ne(e){var t=e.answer,n=(t=void 0===t?{}:t).rewardInfo,o=(n=void 0===n?{}:n).isRewardable,i=void 0!==o&&o,a=e.question,c=a.id,s=a.relationship.isAnonymous,u=e.isAnswerRewardable,l=Object(h.useState)(!1),f=Object(r.a)(l,2),p=f[0],b=f[1],m=Object(v.useSelector)(Te),g=Object(h.useState)(!1),y=Object(r.a)(g,2),O=y[0],j=y[1],w=Object(h.useContext)(_e),C=w.getFormData,k=w.updateFormData,S=Object(v.useDispatch)(),x=C().rewardTagline,R=Object(h.useState)(i||x),E=Object(r.a)(R,2),_=E[0],A=E[1];return Object(h.useEffect)((function(){k({rewardTagline:m})}),[m,k]),Object(h.useEffect)((function(){u&&(F.a.get("rewardNotication")||(j(!0),F.a.set("rewardNotication",!0)))}),[u]),Object(ge.i)((function(){return j(!1)}),O?2e3:null),u?Object(d.c)(d.a,{children:[Object(d.b)(ye.a,{checked:_,onChange:function(e){if(!s)return!e.target.checked||x?(k({rewardTagline:""}),A(!1),void Object(Se.n)(c,!1)):void b(!0);S(Object(ue.h)("匿名回答无法开启赞赏，请先取消匿名","red"))},forceControlled:!0}),p&&Object(d.b)(ke,{submitRewardText:function(e){k({rewardTagline:e}),A(!0),S(Object(Se.n)()),b(!1)},onClose:function(){return b(!1)},tagline:x,edit:!1})]}):null}var Ie=n(874),Me={allowed:"允许规范转载",need_payment:"允许付费转载",disallowed:"禁止转载"},De=function(e){var t=e.checked,n=e.onChange,r=e.text,o=e.disabled;return Object(d.c)(j.Flex,{ml:"16px",alignItems:"center",as:"label",children:[Object(d.b)(Ie.a,{disabled:o,size:13,checked:t,onChange:n}),Object(d.b)(j.Text,{ml:"4px",fontSize:13,children:r})]})};function Le(e){var t=e.currentUser,n=Object(h.useContext)(_e),o=n.updateFormData,i=(0,n.getFormData)().reshipmentSettings,a=Object(h.useState)("allowed"),c=Object(r.a)(a,2),s=c[0],u=c[1],l="disallowed"!==s;Object(h.useEffect)((function(){i?u(i):t.caEnabled&&u("need_payment")}),[i,t]);var f=function(e){"need_payment"!==e||t.caEnabled||window.open("/copyright/invite"),u(e),o({reshipmentSettings:e})};return Object(d.c)(d.a,{children:[Object(d.b)(me,{title:"允许转载",children:Object(d.b)(ye.a,{checked:l,onChange:function(){f(l?"disallowed":t.caEnabled?"need_payment":"allowed")},forceControlled:!0})}),Object(d.b)(me,{title:"转载设置",isSecondary:!0,children:Object(d.b)(j.Flex,{css:{opacity:l?1:.3},children:Object.keys(Me).map((function(e){return"disallowed"===e||"need_payment"===e&&t.isOrg?null:Object(d.b)(De,{disabled:!l,text:Me[e],checked:e===s,onChange:function(t){t.target.checked&&f(e)}},e)}))})})]})}function Pe(e){var t=e.isAnonymous,n=e.handleToggleAnonymous,r=e.isSmall;return Object(d.b)(ye.a,{css:r?{transform:"scale(0.5)"}:{},checked:t,onChange:n,forceControlled:!0})}var ze=n(887);function Be(e){var t=e.isSmall,n=Object(h.useContext)(_e),r=n.updateFormData,o=(0,n.getFormData)().pushActivity,i=Object(ze.a)();Object(h.useEffect)((function(){r({pushActivity:void 0===o||o})}),[o,r]);return Object(d.b)(ye.a,{css:t?{transform:"scale(0.5)"}:{},checked:o,onChange:function(e){var t=e.target.checked;Q.a.trackEvent(null,{id:8361,action:"Click"},{button:{text:t?"开":"关"}}),t?r({pushActivity:!0}):(Q.a.trackCardShow(null,{id:8362}),i.confirm("设置后，关注你的其他用户将无法在「首页 - 关注」阅读这篇回答",{title:"关闭推送给关注者吗",ok:"关闭推送"}).then((function(){Q.a.trackEvent(null,{id:8363,action:"Click"}),r({pushActivity:!1})})).catch((function(){})))},forceControlled:!0})}var Fe=n(0),Ue={all:"开放评论",censor:"预审评论",nobody:"关闭评论"},qe={all:"允许任何人评论",follower:"允许关注我的人评论",followee:"允许我关注的人评论",paid:"付费用户可评论",censor:"答主筛选显示",nobody:"禁止评论"},Ve=function(e){var t=e.checked,n=e.onChange,r=e.text,o=e.disabled;return Object(d.c)(j.Flex,{ml:"16px",alignItems:"center",as:"label",children:[Object(d.b)(Ie.a,{size:12,checked:t,onChange:n,disabled:o}),Object(d.b)(j.Text,{ml:"4px",fontSize:13,children:r})]})};function He(){var e=Object(v.useSelector)(le.h),t=Object(h.useContext)(_e),n=t.updateFormData,o=(0,t.getFormData)().commentPermission,i=Object(h.useState)("all"),a=Object(r.a)(i,2),c=a[0],s=a[1],u="all"!==c;Object(h.useEffect)((function(){o&&s(o)}),[o]);var l=function(e){e!==c&&(s(e),e&&n({commentPermission:e}))},f=e?Ue:Object.keys(qe).filter((function(e){if("paid"!==e)return"follower"!==e})).reduce((function(e,t){return Object.assign({},e,Object(Fe.a)({},t,qe[t]))}),{});return Object(d.c)(d.a,{children:[Object(d.b)(me,{title:"评论限制",children:Object(d.b)(ye.a,{checked:u,onChange:function(){l(u?"all":Object.keys(f)[1])},forceControlled:!0})}),Object(d.b)(me,{title:"限制类型",isSecondary:!0,children:Object(d.b)(j.Flex,{justifyContent:"space-between",css:{opacity:u?1:.3},children:Object.keys(f).map((function(e){return"all"===e?null:Object(d.b)(Ve,{text:f[e],checked:e===c,onChange:function(t){t.target.checked&&l(e)},disabled:!u},e)}))})})]})}var Ke=n(1261),Qe=n(374),We=n(1334),Ge=function(e){var t=e.questionId,n=e.currentUser,r=Object(v.useSelector)((function(e){return e.question.bio})),o=Object(v.useSelector)((function(e){return e.topic.bios})),i=(r[t]||{result:{type:"headline"}}).result;return"topic"===i.type&&(i.bio=o[i.topic.id]||i.bio),i.bio&&"headline"!==i.type?i.bio:n.headline?Object(d.b)(Qe.a,{inline:!0,html:(i||{}).bio||n.headline}):""};function Ze(e){var t=e.question,n=e.currentUser,o=Object(h.useState)(!1),i=Object(r.a)(o,2),a=i[0],c=i[1];return Object(d.c)(d.a,{children:[Object(d.c)(j.Flex,{maxWidth:454,color:"GBL05A",alignItems:"center",css:{cursor:"pointer"},onClick:function(){c(!0)},children:[Object(d.b)(Ke.a,{size:20}),Object(d.b)(j.Text,{ml:"5px",fontSize:13,color:"GBK06A",css:[Object(pe.d)(1)],children:Object(d.b)(Ge,{questionId:t.id,currentUser:n})})]}),Object(d.b)(We.a,{shown:a,question:t,onClose:function(){return c(!1)}})]})}var Ye=n(579),Je=n(1015);function $e(e){var t=e.setScheduledPublish,n=Object(h.useRef)(),r=new Date;return Object(d.b)(Je.a,{css:function(e){return{fontSize:13,color:e.colors.GBL05A}},onRef:n,value:r,min:r,max:Ye.a(r,7),onChange:function(e,r){t(!0,e),Q.a.setModule(n.current,{module:"Unknown",module_name:r.date?"日期":r.hours?"小时":r.minutes?"分钟":void 0}),Q.a.trackEvent(n.current,{action:"Click",id:5731,name:"回答"})}})}var Xe=n(4),et=n(833),tt=n(797),nt=function(e){var t=e.openModal,n=e.handleHelpClick,r=function(e){n(e)};return Object(d.b)(J.b,{title:"什么是「创作声明」？",subtitle:"",onClose:function(){r(!1)},className:"DisclaimerEntry-helpWrap",children:t&&Object(d.c)("div",{children:[Object(d.c)("div",{className:"DisclaimerEntry-helpContent",children:[Object(d.b)("span",{className:"DisclaimerEntry-helpContentBold",children:"「创作声明」"}),"是为自己创作的添加个人声明的工具。当你在创作特定内容（如内容存在虚构或剧透等情节）时，可设置创作声明，该声明将会展示在回答或文章开头。创作声明表达的是创作者对内容负责的态度。知乎鼓励创作者设置创作声明，以方便知友更好地辨识和理解内容信息。你也可以在编辑内容时，关闭创作声明。"]}),Object(d.b)("button",{className:"DisclaimerEntry-helpBtn",onClick:function(){r(!1)},children:"我知道了"})]})})},rt={type:"none",description:"无声明"},ot=function(){var e=Object(h.useState)(!1),t=Object(r.a)(e,2),n=t[0],o=t[1];return Object(d.c)(d.a,{children:[Object(d.c)(j.Flex,{color:"GBL05A",alignItems:"center",children:[Object(d.b)(j.Text,{mr:"4px",fontSize:14,fontWeight:"bold",children:"创作声明"}),Object(d.b)(et.a,{text:!0,center:!0,css:{cursor:"pointer"},onClick:function(){o(!0),Q.a.trackEvent(null,{id:5604,action:"Click"}),Q.a.trackEvent(void 0,{id:7840,action:"Click"})}})]}),Object(d.b)(nt,{openModal:n,handleHelpClick:function(){return o(!1)}})]})},it=function(e){var t=e.question,n=e.answer,r=e.isSmall,o=e.positionStatus,i=Object(h.useContext)(_e),a=i.getFormData,c=i.updateFormData,s=Object(v.useDispatch)(),u=Object(v.useSelector)((function(e){return e.question.disclaimers[t.id]})),l=a().disclaimerType,f=null==u?void 0:u.find((function(e){return e.type===l})),p=Object(v.useSelector)((function(e){return Object(ce.d)(e,null==n?void 0:n.id)})),b=(null==u?void 0:u.length)>0&&(!(null==n?void 0:n.id)||p);Object(h.useEffect)((function(){p&&c(function(e){var t,n,r,o,i="open"===(null==e||null===(t=e.disclaimerInfo)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.status);return{isDisclaimerChecked:i,disclaimerType:i?null==e||null===(r=e.disclaimerInfo)||void 0===r||null===(o=r[0])||void 0===o?void 0:o.type:"none"}}(p))}),[Boolean(p)]),Object(h.useEffect)((function(){u||s(Object(ae.M)(t.id))}),[]);return b?Object(d.b)(N.c,{positionStatus:o,toggler:Object(d.c)(j.Flex,Object.assign({alignItems:"center",color:"GBL05A",fontSize:r?12:13,css:{position:"relative",cursor:"pointer"}},r&&{marginLeft:"8px",padding:"0 10px",height:20,bg:"GBK10A",css:{borderRadius:10}},{children:[Object(d.b)(j.Text,{mr:"4px",color:r?"GBL05A":"GBK06A",children:(null==f?void 0:f.description)||rt.description}),Object(d.b)(tt.a,{text:!0,center:!0})]})),menuClassName:"AnswerItem-selfMenu",itemClassName:"AnswerItem-selectMenuItem",children:[].concat(Object(Xe.a)(u),[rt]).map((function(e){return Object(d.b)(I.a,{onClick:function(){return function(e){c({isDisclaimerChecked:"none"!==e.type,disclaimerType:e.type})}(e)},checked:e.type===l,children:e.description},e.type)}))}):null};function at(e){var t,n=e.question,r=e.answer,o=e.isVideoAnswer,i=e.handleToggleAnonymous,a=e.positionStatus,c=e.isReediting,s=e.setScheduledPublish,u=e.canScheduledPublish,l=e.settingExpanded,f=e.handleExpand,p=e.isFullScreen,b=e.inEditor,m=Object(v.useDispatch)(),g=Object(v.useSelector)(le.b),y=Object(v.useSelector)((function(e){return e.switches})).isAnswerRewardable;Object(h.useEffect)((function(){void 0===y&&m(Object(ve.b)(["isAnswerRewardable"]))}),[m,y]);var O=null==n||null===(t=n.relationship)||void 0===t?void 0:t.isAnonymous,w="show"===Object(de.n)("gue_anonymous"),C=(n||{}).questionType,k=g&&!g.isOrg,S=k&&("normal"===C||"commercial"===C&&w||O)&&!o,x=Boolean(n||r)&&!(null==r?void 0:r.id);return o&&c?null:Object(d.c)(j.Box,Object.assign({p:"0 20px",width:"100%"},p&&{mx:"auto",maxWidth:688},{bg:"GBK99A",css:function(e){return Object.assign({position:"relative"},l?Object(pe.c)({borderTop:"1px solid ".concat(e.colors.GBK09A)}):{boxShadow:"0 -1px 3px ".concat(e.colorMod(e.colors.GBK02B).alpha(.12))},(b&&!l||!b&&l)&&{height:0,overflow:"hidden"})},children:[Object(d.c)(j.Flex,{py:"13px",justifyContent:"space-between",alignItems:"center",css:function(e){return Object.assign({},Object(pe.c)({borderBottom:"1px solid ".concat(e.colors.GBK09A)}))},children:[Object(d.c)(j.Flex,{alignItems:"center",children:[Object(d.b)(j.Text,{mr:"4px",fontSize:15,fontWeight:"bold",color:"GBK03A",children:"发布设置"}),!l&&!o&&Object(d.c)(d.a,{children:[Object(d.c)(j.Flex,{ml:"16px",alignItems:"center",children:[Object(d.b)(ot,{}),Object(d.b)(it,{isSmall:!0,question:n,answer:r,positionStatus:a})]}),S&&!c&&Object(d.c)(j.Flex,{ml:"16px",alignItems:"center",children:[Object(d.b)(j.Text,{fontSize:14,fontWeight:"bold",color:"GBL05A",children:"匿名发布"}),Object(d.b)(Pe,{isSmall:!0,isAnonymous:O,answer:r,handleToggleAnonymous:i})]}),!c&&Object(d.c)(j.Flex,{ml:"16px",alignItems:"center",children:[Object(d.b)(j.Text,{fontSize:14,fontWeight:"bold",color:"GBL05A",children:"推送给关注者"}),Object(d.b)(Be,{isSmall:!0})]})]})]}),Object(d.c)(W.a,{as:j.Flex,zaAction:"Unknown",zaText:l?"收起":"全部设置",zaType:"Button",alignItems:"center",color:"GBL05A",css:{cursor:"pointer"},onClick:f,children:[Object(d.b)(j.Text,{fontSize:14,mr:"4px",children:l?"收起":"全部设置"}),l?Object(d.b)(he.a,{size:20,center:!0}):Object(d.b)(be.a,{size:20,center:!0})]})]}),Object(d.c)("div",{css:{maxHeight:l?"auto":0,overflowY:"hidden"},children:[!o&&Object(d.b)(me,{customTitle:Object(d.b)(ot,{}),children:Object(d.b)(it,{question:n,answer:r,positionStatus:a})}),S&&!c&&Object(d.b)(me,{title:"匿名发布",children:Object(d.b)(Pe,{isAnonymous:O,answer:r,handleToggleAnonymous:i})}),!c&&u&&Object(d.b)(me,{title:"定时发布",children:Object(d.b)($e,{setScheduledPublish:s})}),!c&&k&&Object(d.b)(me,{title:"编辑一句话介绍 / 话题经验",children:Object(d.b)(Ze,{question:n,currentUser:g})}),(n||r)&&!o&&y&&Object(d.b)(me,{title:"开启赞赏",children:Object(d.b)(Ne,{question:n,answer:r,isAnswerRewardable:!0})}),x&&!o&&Object(d.b)(me,{title:"推送给关注者",children:Object(d.b)(Be,{})}),!c&&Object(d.c)(d.a,{children:[Object(d.b)(Le,{currentUser:g}),Object(d.b)(He,{})]})]})]}))}var ct=n(808);function st(e){var t=e.type,n=e.textCount,r=e.draftStatus,o=e.removeDraft,i=e.handleSubmit,a=e.isReediting,c=e.scheduledPublishAt,s=e.onCancelEdit,u=e.draft,l=e.canSubmit,f=e.isFullScreen;return Object(d.c)(j.Flex,Object.assign({justifyContent:"space-between",alignItems:"center",p:"10px 20px",width:"100%"},f&&{mx:"auto",maxWidth:688},{bg:"GBK99A",css:function(e){return{boxShadow:"0 -1px 3px ".concat(e.colorMod(e.colors.GBK02B).alpha(.12))}},children:[Object(d.c)(j.Flex,{alignItems:"center",children:[Object(d.b)(j.Text,{width:86,height:34,lineHeight:"34px",textAlign:"center",fontSize:14,color:"GBK99A",bg:"GBL01A",css:{borderRadius:3,cursor:l?"pointer":"not-allowed",opacity:l?1:.3},onClick:i,children:a?"提交修改":c?"定时发送":"发布".concat("answer"===t?"回答":"文章")}),a&&Object(d.b)(j.Text,{color:"GBL07A",ml:"10px",onClick:s,css:{cursor:"pointer"},children:u?"保存草稿并离开":"取消"})]}),Object(d.c)(j.Text,{fontSize:14,color:"GBL05A",children:[n?"共 ".concat(n," 字"):"",n&&r?"，":"",r,r&&Object(d.b)(ct.a,{text:!0,center:!0,css:{marginLeft:8,cursor:"pointer"},onClick:o})]})]}))}var ut=n(959),lt=function(e){var t=e.shown,n=e.onClose;return Object(d.b)(J.b,{onClose:n,title:"该问题暂时只支持客户端进行回答",children:t&&Object(d.b)("div",{className:"SlideshowEditBlockModal",children:Object(d.b)(T.c,{preset:T.b.Primary,color:T.a.Blue,onClick:n,children:"知道了"})})})};lt.propTypes={shown:p.a.bool.isRequired,onClose:p.a.func.isRequired};var dt=lt,ft=n(1389),pt=n(452),ht=n(1333),bt=n(370),vt=n(944),mt=n(131),gt=Object.assign;var yt=function(e){return b.a.createElement(mt.a,gt({width:"150",height:"120",viewBox:"0 0 150 120"},e),b.a.createElement("path",{fill:"#EBEEF5",d:"M102 30.998A2.996 2.996 0 0098.998 28H50.002A2.996 2.996 0 0047 30.998v58.147l.193-.125c1.453-.939 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.939 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.939 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.939 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.939 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.413-.913 3.363-.94 4.807-.075V30.998zm-1.508 60.542c-.464-.3-1.209-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.209-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.209-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.209-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.209-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.209-.298-1.67 0l-4.316 2.79A1.997 1.997 0 0144 93V30.997A5.996 5.996 0 0150.002 25h48.996A5.996 5.996 0 01105 30.998V93a2 2 0 01-.396 1.2l-4.112-2.66z"}),b.a.createElement("path",{fill:"#F7F8FA",d:"M55 38.999c0-.552.439-.999.999-.999H75c.552 0 .999.439.999.999V58a.993.993 0 01-.999.999H56a.993.993 0 01-.999-.999V39zm25 .501c0-.828.675-1.5 1.498-1.5h11.004c.827 0 1.498.666 1.498 1.5 0 .828-.675 1.5-1.498 1.5H81.498A1.495 1.495 0 0180 39.5zm0 9c0-.828.675-1.5 1.498-1.5h11.004c.827 0 1.498.666 1.498 1.5 0 .828-.675 1.5-1.498 1.5H81.498A1.495 1.495 0 0180 48.5zm0 9c0-.828.675-1.5 1.498-1.5h11.004c.827 0 1.498.666 1.498 1.5 0 .828-.675 1.5-1.498 1.5H81.498A1.495 1.495 0 0180 57.5zm-25 9c0-.828.677-1.5 1.505-1.5h35.99a1.499 1.499 0 110 3h-35.99A1.499 1.499 0 0155 66.5zm0 9c0-.828.665-1.5 1.505-1.5h24.99a1.499 1.499 0 110 3h-24.99A1.499 1.499 0 0155 75.5z"}))};function Ot(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var jt={current:"当前草稿",saved:"自动保存",published:"发布过的版本"},wt=function(e){Object(s.a)(n,e);var t=Ot(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).formatDate=function(e){return ht.a("current"===e.versionType?1e3*e.updatedAt:1e3*e.createdAt,"yyyy-MM-dd HH:mm")},e.handleDraftClick=function(e){e.preventDefault()},e}return Object(c.a)(n,[{key:"renderCurrentDraft",value:function(){var e=this.props,t=e.currentDraft,n=e.onRevert,r=t.isFetching,o=t.data;return Object(d.c)("div",{className:"DraftHistory-main",children:[r&&Object(d.b)(L.a,{className:"DraftHistory-loading"}),!r&&o&&Object(d.c)(h.Fragment,{children:[o.draft.title&&Object(d.b)("div",{className:"DraftHistory-draftTitle",children:o.draft.title}),Object(d.b)(vt.a,{className:"DraftHistory-draft",html:o.draft.content,onClick:this.handleDraftClick}),Object(d.c)("div",{className:"DraftHistory-actions",children:[Object(d.c)("div",{className:"DraftHistory-meta",children:[this.formatDate(o)," ",jt[o.versionType]]}),Object(d.b)(T.c,{className:"DraftHistory-revert",disabled:"current"===o.versionType,onClick:function(){return n(o)},children:"恢复此版本"})]})]})]})}},{key:"render",value:function(){var e=this,t=this.props,n=t.history,r=t.currentVersion,o=t.currentDraft,i=t.getHistory,a=t.onSelect;return n?n.isFetching&&!n.items?Object(d.b)("div",{className:"DraftHistory",children:Object(d.b)(L.a,{className:"DraftHistory-loading"})}):Object(d.c)("div",{className:"DraftHistory",children:[Object(d.c)("div",{className:"DraftHistory-side",children:[Object(d.b)("div",{className:"DraftHistory-title",children:"历史版本"}),Object(d.b)(bt.b,{className:"DraftHistory-history",getContainer:function(e){return e},isLoading:n.isFetching,isDrained:n.isDrained,onLoad:i,children:Object(d.b)("div",{children:n.items&&n.items.map((function(t,n){return Object(d.c)("a",{href:"#",className:O()("DraftHistory-version",{"DraftHistory-version--selected":r&&t.versionType===r.versionType&&t.id===r.id}),onClick:function(e){e.preventDefault(),a(t)},children:[Object(d.b)("div",{className:"DraftHistory-versionDate",children:e.formatDate(t)}),Object(d.b)("div",{className:"DraftHistory-versionType",children:jt[t.versionType]})]},n)}))})})]}),n.items&&!n.items.length&&Object(d.b)("div",{className:"DraftHistory-main",children:Object(d.c)("div",{className:"DraftHistory-empty",children:[Object(d.b)(yt,{className:"DraftHistory-emptyIcon"}),Object(d.b)("div",{className:"DraftHistory-emptyText",children:"还没有历史版本"})]})}),o&&this.renderCurrentDraft()]}):null}}]),n}(h.Component);wt.propTypes={history:p.a.object,currentVersion:p.a.object,currentDraft:p.a.object,onSelect:p.a.func,onRevert:p.a.func};var Ct=wt;function kt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var St=function(e){Object(s.a)(n,e);var t=kt(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={currentVersion:null},e.getHistory=function(){var t=e.props,n=t.type,r=t.id;(0,t.getHistory)(n,r)},e.handleSelect=function(t){e.setState({currentVersion:t})},e.handleRevert=function(t){var n=e.props,r=n.revert,o=n.onReverted;r(t.versionType,t.id).then((function(){o&&o(t)}))},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.type,n=e.id;(0,e.getHistory)(t,n)}},{key:"componentDidUpdate",value:function(e,t){var n=this.props,r=n.drafts,o=n.getDraft,i=this.state.currentVersion,a=t.currentVersion;!i||a&&a.versionType===i.versionType&&a.id===i.id||r["".concat(i.versionType,"_").concat(i.id)]||o(i.versionType,i.id)}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.type,n=e.id;(0,e.reset)(t,n)}},{key:"render",value:function(){var e=this.props,t=e.history,n=e.drafts,r=this.state.currentVersion;return Object(d.b)(Ct,{history:t,currentVersion:r,currentDraft:r?n["".concat(r.versionType,"_").concat(r.id)]:null,getHistory:this.getHistory,onSelect:this.handleSelect,onRevert:this.handleRevert})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.history&&e.history.items&&e.history.items.length&&!t.currentVersion?{currentVersion:e.history.items[0]}:null}}]),n}(h.Component);St.propTypes={type:p.a.string.isRequired,id:p.a.number.isRequired,onReverted:p.a.func};var xt=Object(v.connect)((function(e,t){var n=t.type,r=t.id;return{history:e.draftHistory.history["".concat(n,"_").concat(r)],drafts:e.draftHistory.drafts}}),{getHistory:pt.c,getDraft:pt.b,revert:pt.e,reset:pt.d})(St);function Rt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var Et=function(e){Object(s.a)(n,e);var t=Rt(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).handleReverted=function(t){var n=e.props,r=n.onClose,o=n.onReverted;o&&o(t),r&&r(),Q.a.trackEvent(null,{id:5016,action:"Click"})},e.handleClose=function(){var t=e.props.onClose;t&&t(),Q.a.trackEvent(null,{id:5015,action:"Click"})},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props,t=e.shown,n=e.type,r=e.id;return Object(d.b)(J.b,{className:"DraftHistoryModal",size:"fullPage",onClose:this.handleClose,children:t&&Object(d.b)(xt,{type:n,id:r,onReverted:this.handleReverted})})}}]),n}(h.Component);Et.propTypes={shown:p.a.bool.isRequired,onClose:p.a.func,type:p.a.string.isRequired,id:p.a.number.isRequired,onReverted:p.a.func},Et.defaultProps={shown:!0};var _t=Et,At=Object(h.forwardRef)((function(e,t){var n,o=e.type,i=e.id,a=e.getId,c=e.handleReverted,s=Object(h.useState)(!1),u=Object(r.a)(s,2),l=u[0],f=u[1],p=Object(ge.c)((function(){return f(!0)})),b=Object(ge.c)((function(){return f(!1)}));return Object(h.useImperativeHandle)(t,(function(){return{handleOpen:p,handleClose:b}}),[p,b]),Object(d.b)(_t,{shown:l,onClose:function(){return f(!1)},type:o,id:null!==(n=null==a?void 0:a())&&void 0!==n?n:i,onReverted:c})})),Tt=function(e){var t=e.type,n=e.id,r=e.syncDraft,o=e.getId,i=e.shouldShowToolbarButton,a=void 0===i?function(){return!0}:i,c={};c.draftModalRef=Object(h.createRef)(null);return{initialize:function(e){Object.assign(c,e)},handleCommand:function(e){return"toggle-draft-history-modal"===e?(c.draftModalRef.current.handleOpen(),"handled"):"not-handled"},components:[Object(d.b)(At,{type:t,id:n,getId:o,ref:c.draftModalRef,handleReverted:function(e){c.getEditorRef().props.resetWithValue(e.draft.content)}},"draft_history_modal")],toolbar:{section:"menu",label:"历史版本",icon:ft.a,onClick:function(){r.flush(),c.draftModalRef.current.handleOpen(),Q.a.trackEvent(null,{id:5013,action:"Click",name:"历史版本入口"})},shouldShow:a}}},Nt=n(18),It=function(e){return b.a.createElement(Nt.a,e,b.a.createElement("path",{d:"M17 3a1 1 0 0 1 .89 1.458l-.058.097-1.537 2.305C19.405 8.202 21.5 11 21.5 14.43 21.5 19.093 17.609 22 12 22s-9.5-2.907-9.5-7.571c0-3.43 2.096-6.227 5.205-7.569L6.168 4.555a1 1 0 0 1 .72-1.55L7 3h10zm-5 5c-4.273 0-7.5 2.761-7.5 6.429C4.5 17.826 7.37 20 12 20s7.5-2.174 7.5-5.571C19.5 10.76 16.273 8 12 8zm2.47.97l1.06 1.06a.25.25 0 0 1 0 .354L12.914 13h2.336a.25.25 0 0 1 .25.25v1.5a.25.25 0 0 1-.25.25H13v1h2.25a.25.25 0 0 1 .25.25v1.5a.25.25 0 0 1-.25.25H13v.75a.25.25 0 0 1-.25.25h-1.5a.25.25 0 0 1-.25-.25V18H8.75a.25.25 0 0 1-.25-.25v-1.5a.25.25 0 0 1 .25-.25H11v-1H8.75a.25.25 0 0 1-.25-.25v-1.5a.25.25 0 0 1 .25-.25h2.336L8.47 10.384a.25.25 0 0 1 0-.354l1.06-1.06a.25.25 0 0 1 .354 0l1.94 1.939a.25.25 0 0 0 .353 0l1.94-1.94a.25.25 0 0 1 .353 0zM15.13 5H8.868l.668 1h4.928l.667-1z"}))};It.defaultProps={name:"Income"};var Mt=It,Dt=n(900),Lt=n(901),Pt=n(1110),zt=n(1083),Bt=Object(h.forwardRef)((function(e,t){var n=e.getStore,o=e.getContentInfo,i=Object(h.useState)(!1),a=Object(r.a)(i,2),c=a[0],s=a[1],u=o(),l=u.id,f=u.type;Object(h.useImperativeHandle)(t,(function(){return{setShowUserProfitCardSelector:s}}),[]);var p=function(){return Object(zt.a)(n().getEditorState()).filter((function(e){return"ad-link-card"===e.getType()}))};return Object(d.b)(d.a,{children:Object(d.b)(J.b,{className:"UserProfitCardSelector",size:"large",onClose:function(){s(!1)},children:c&&Object(d.b)("div",{className:"UserProfitCardSelector-content",children:Object(d.b)(K.a,{className:"UserProfitCardSelector-iframe",src:"https://www.zhihu.com/selection/profit-selector?contentId=".concat(l,"&contentType=").concat(f),onMessage:function(e){var t=n().getEditorRef();if("ProfitCardSelector/submitProfitCardInfo"===(null==e?void 0:e.type)&&(null==e?void 0:e.payload)){var r=e.payload,o=r.type,i=r.id,a=r.url;if(r.preventClose||s(!1),"inserLinkCard"===o&&t.props.handleCommand("insert-link-card:".concat(a)),"insertMCNLinkCard"===o){if(Object(zt.a)(n().getEditorState()).filter((function(e){return"mcn-link-card"===e.getType()})).size>=30)return void P.a.alert(null,{title:"一篇内容最多可添加 ".concat(30," 个商品")});t.props.handleCommand("insert-mcn-link-card:".concat(i))}if("insertAdLinkCard"===o){if(i.startsWith("ZhiTask_"))if(p().filter((function(e){return e.getData().id.startsWith("ZhiTask_")})).size>=5)return void P.a.alert("一篇内容最多可添加 ".concat(5," 个「知+自选」卡片"));if(i.startsWith("fee_"))if(p().filter((function(e){return e.getData().id.startsWith("fee_")})).size>=1)return void P.a.alert("一篇内容最多可添加 ".concat(1," 个「付费回答」卡片"));t.props.handleCommand("insert-ad-link-card:".concat(i))}}}})})})})})),Ft=function(e){var t=e.shouldDisabled,n=e.shouldShow,r=void 0===n?function(){return!0}:n,o=e.getContentInfo,i=void 0===o?function(){}:o,a={};return a.containerRef=Object(h.createRef)(),{initialize:function(e){Object.assign(a,e)},toolbar:{label:"用户收益",icon:Mt,shouldShow:r,shouldDisabled:function(){return!!(null==t?void 0:t())||null},section:Dt.a.CUSTOM_MAIN,toolType:Pt.b.ENTITY,onClick:function(){a.containerRef.current.setShowUserProfitCardSelector(!0),Q.a.trackEvent(null,{id:6097,action:"Click"})},priority:1},toolbarV2:{label:"赚佣金",text:"赚佣金",icon:Mt,shouldShow:r,shouldDisabled:function(){return!!t()||null},section:Lt.a.BUSINESS_MEDIA,toolType:Pt.b.ENTITY,onClick:function(){a.containerRef.current.setShowUserProfitCardSelector(!0),Q.a.trackEvent(null,{id:6097,action:"Click"})},priority:1},components:Object(d.b)(Bt,{ref:a.containerRef,getStore:function(){return a},getContentInfo:i})}},Ut=function(e){return b.a.createElement(Nt.a,e,b.a.createElement("path",{d:"M9.586 3a1 1 0 0 1 .707.293l1.414 1.414a1 1 0 0 0 .707.293H21a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h6.586zM4 11v6.75c0 .138.112.25.25.25h15.5a.25.25 0 0 0 .25-.25V11H4zm0-2h16V7.25a.25.25 0 0 0-.25-.25h-8.164a1 1 0 0 1-.707-.293L9.464 5.293A1 1 0 0 0 8.757 5H4.25a.25.25 0 0 0-.25.25V9z"}))};Ut.defaultProps={name:"Folder"};var qt=Ut;var Vt=function(e){var t=e.shown,n=e.onClose,r=e.onSubmit,o=Object(h.useCallback)((function(e){var t=e.type,o=e.payload;"browser/closeCurrentPage"!==t?"editor/submitAttachment"!==t||r(o.files):n()}),[r,n]);return Object(d.b)(J.b,{className:"BaiduFileSelector",size:"large",onClose:n,children:t&&Object(d.b)("div",{className:"BaiduFileSelector-content",children:Object(d.b)(K.a,{className:"BaiduFileSelector-iframe",src:"https://www.zhihu.com/appview/editor/attachment/baidu",onMessage:o})})})},Ht=Object(h.forwardRef)((function(e,t){var n=Object(h.useState)(!1),o=Object(r.a)(n,2),i=o[0],a=o[1];return Object(h.useImperativeHandle)(t,(function(){return{setBaiduFileSelectorShown:a}}),[]),Object(d.b)(Vt,{shown:i,onClose:function(){return a(!1)},onSubmit:function(t){a(!1),e.onSubmit(t)}})})),Kt=function(){var e={},t=function(t){e.getEditorRef().props.handleCommand("insert-file-link-card:".concat(JSON.stringify(t)))},n=function(){return Object(zt.a)(e.getEditorState()).filter((function(e){return"file-link-card"===e.getType()}))};return e.containerRef=Object(h.createRef)(),{initialize:function(t){Object.assign(e,t)},components:Object(d.b)(Ht,{handleSubmit:t,ref:e.containerRef,onSubmit:t}),toolbar:{section:Dt.a.CUSTOM_MAIN,label:"上传附件",icon:qt,toolType:Pt.b.ENTITY,onClick:function(){n().size>=10?P.a.alert(null,{title:"一篇内容最多可添加 ".concat(10," 个附件")}):e.containerRef.current.setBaiduFileSelectorShown(!0)},priority:2},toolbarV2:{section:Lt.a.BUSINESS_MEDIA,label:"上传附件",text:"网盘",icon:qt,toolType:Pt.b.ENTITY,onClick:function(){n().size>=10?P.a.alert(null,{title:"一篇内容最多可添加 ".concat(10," 个附件")}):e.containerRef.current.setBaiduFileSelectorShown(!0)},priority:2}}},Qt=n(1505),Wt=n(857),Gt=function(e){var t=e.className,n=e.onClose,r=e.shown,o=e.allInviters,i=e.onChoose;return Object(d.b)(H.b,{title:"添加「谢邀」卡片",subtitle:"选择邀请人，添加感谢他的卡片",onClose:n,className:t,css:{width:"536px"},children:r&&o.map((function(e){return Object(d.c)(j.Flex,{css:{padding:"12px 0"},children:[Object(d.b)(Wt.a,{author:e}),Object(d.b)(T.c,{color:"color",preset:"blue",css:{height:"32px",marginLeft:"auto"},onClick:function(){Q.a.trackEvent(null,{id:7682,action:"Click"}),i&&i(e)},children:"选择"})]},e.id)}))})},Zt=n(1081),Yt=function(e){var t=e.shown,n=e.hasShown,r=e.children,o=Object(h.useRef)(n),i=Object(h.useRef)(t);return Object(h.useEffect)((function(){!t&&i.current&&(o.current=!0),i.current=t}),[t]),t&&!o.current&&r},Jt=function(e){var t=e.className,n=e.shown,o=e.hasShown,i=e.inviters,a=e.onConfirm,c=e.onCancel,s=Object(h.useState)(n),u=Object(r.a)(s,2),l=u[0],f=u[1],p=Object(h.useRef)(n);return Object(h.useEffect)((function(){p.current!==n&&f(n),p.current=n}),[n]),(null==i?void 0:i.length)>0&&Object(d.b)(Yt,{shown:l,hasShown:o,children:Object(d.c)(j.Flex,{className:t,pb:"12px",px:"16px",mx:"-20px",mb:"16px",color:"GBK05A",alignItems:"center",sx:{borderBottom:"1px solid",borderColor:"GBK09A",fontSize:"15px",lineHeight:"20px",position:"relative",zIndex:"0"},children:[i.map((function(e,t){return Object(d.b)(j.Image,{src:i[0].avatarUrl,size:24,sx:{borderRadius:"50%",border:"2px solid",borderColor:"GBK99A",position:"relative",zIndex:i.length-t,marginLeft:t?"-14px":"0"}},e.id)})),Object(d.b)(j.Text,{ml:"8px",children:i[0].name+(i.length>1?"等 ".concat(i.length," 人"):"")}),"邀请你回答",Object(d.b)(j.Text,{color:"primary",ml:"16px",css:{cursor:"pointer"},onClick:function(){Q.a.trackEvent(null,{id:7683,action:"Click",path:[{module_name:1===i.length?"0":"1"}]},{button:{text:"添加谢邀"}}),a&&a(i)},children:"添加谢邀"}),Object(d.b)(j.Text,{ml:"16px",css:{cursor:"pointer"},onClick:function(){f(!1),Q.a.trackEvent(null,{id:7683,action:"Click",path:[{module_name:1===i.length?"0":"1"}]},{button:{text:"忽略"}}),c&&c()},children:"忽略"})]})})};var $t=Object(h.forwardRef)((function(e,t){var n=e.getAllInviters,o=e.inviterQuery,i=e.getStore,a=e.getInitialThankInviterInfo,c=Object(h.useState)(!1),s=Object(r.a)(c,2),u=s[0],l=s[1],f=Object(h.useState)(a()),p=Object(r.a)(f,2),b=p[0],v=p[1],m=Object(h.useState)(null),g=Object(r.a)(m,2),y=g[0],O=g[1],j=Object(ge.c)((function(){return l(!1)}));return Object(h.useImperativeHandle)(t,(function(){return{openInviterListModal:function(){return l(!0)},getInvitersData:function(){return y},getThankInviterInfo:function(){return b}}}),[y,b]),Object(h.useEffect)((function(){n().then((function(e){var t=e.payload;O(t.data);var n=i();n.setEditorState(n.getEditorState())}))}),[]),Object(d.c)(d.a,{children:[b&&Object(d.b)(Zt.a,{css:{marginBottom:16,marginTop:"4px !important"},showDeleteButton:!0,item:{isLabeled:!0},inviter:b,onDelete:function(){v(null)}}),(null==y?void 0:y.length)>0&&Object(d.b)(Jt,{hasShown:Boolean(o)||Boolean(b),shown:!b,inviters:y,onConfirm:function(e){(null==e?void 0:e.length)&&(1!==e.length?l(!0):v(e[0]))}}),Object(d.b)(Gt,{onClose:j,shown:u,allInviters:y,onChoose:function(e){v(e),j()}})]})})),Xt=function(e){var t=e.getShouldShowToolbarButton,n=e.getAllInviters,r=e.inviterQuery,o=e.getInitialThankInviterInfo,i={},a=Object(h.createRef)(null);return{initialize:function(e){Object.assign(i,e)},componentsBeforeEditor:[{component:Object(d.b)($t,{getAllInviters:n,inviterQuery:r,ref:a,getStore:function(){return i},getInitialThankInviterInfo:o}),priority:0}],getExtraPluginData:function(){var e,t,n;return t=o,n=null===(e=a.current)||void 0===e?void 0:e.getThankInviterInfo(),t?n?n.id===t.id?{}:{thankInviterStatus:"open",thankInviter:n.id}:{thankInviterStatus:"close"}:n?{thankInviterStatus:"open",thankInviter:n.id}:{}},toolbar:{label:"添加谢邀",section:Dt.a.CUSTOM_MAIN,priority:3,icon:Qt.a,onClick:function(){a.current.openInviterListModal()},shouldShow:t,shouldDisabled:function(){var e,t,n;return Boolean(!(null===(e=a.current)||void 0===e||null===(t=e.getInvitersData())||void 0===t?void 0:t.length)||(null===(n=a.current)||void 0===n?void 0:n.getThankInviterInfo()))}},toolbarV2:{label:"添加谢邀",section:Lt.a.BUSINESS_MEDIA,text:"谢邀",icon:Qt.a,priority:3,onClick:function(){a.current.openInviterListModal()},shouldShow:t,shouldDisabled:function(){var e,t,n;return Boolean(!(null===(e=a.current)||void 0===e||null===(t=e.getInvitersData())||void 0===t?void 0:t.length)||(null===(n=a.current)||void 0===n?void 0:n.getThankInviterInfo()))}}}},en=n(1024),tn=n(1294),nn=n(7),rn=n(1012),on=n(373),an=n(798),cn=function(e){var t=e.tab,n=e.tabType,o=e.tabChange,i=e.searchPublicList,a=Object(h.useState)(""),c=Object(r.a)(a,2),s=c[0],u=c[1];return Object(d.c)(j.Flex,{alignItems:"center",justifyContent:"space-between",css:function(e){return{height:"50px",padding:"0 20px",boxShadow:"inset 0px -0.5px 0px ".concat(e.colors.GBK09A)}},children:[Object(d.b)(j.Flex,{children:t.map((function(e){return Object(d.b)("div",{className:O()("MaterialLibraryHeader-classify",{active:n===e.type}),onClick:function(){o(e.type)},children:e.name},e.type)}))}),"public"===n&&Object(d.b)(j.Box,{width:"198px",children:Object(d.b)(je.a,{className:"MaterialLibraryHeader-search materials_library_public_search",placeholder:"搜索公共素材库",onChange:function(e){u(e.target.value)},after:Object(d.b)(an.a,{text:!0,onClick:function(){i({keyword:s,isFirst:!0})}}),onKeyUp:function(e){13===e.keyCode&&i({keyword:s,isFirst:!0})}})})]})};cn.propTypes={tab:p.a.array,tabType:p.a.string,tabChange:p.a.func,searchPublicList:p.a.func};var sn=cn,un=n(827),ln=n(781),dn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fn=function(e){return b.a.createElement(Nt.a,dn({fill:"currentColor"},e),b.a.createElement("path",{d:"M9.586 3a1 1 0 0 1 .707.293l1.414 1.414a1 1 0 0 0 .707.293H21a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h6.586zm-.122 2.293A1 1 0 0 0 8.757 5H4.25a.25.25 0 0 0-.25.25v12.5c0 .138.112.25.25.25h15.5a.25.25 0 0 0 .25-.25V7.25a.25.25 0 0 0-.25-.25h-8.164a1 1 0 0 1-.707-.293L9.464 5.293zM14.75 11a.25.25 0 0 1 .25.25v1.5a.25.25 0 0 1-.25.25H13v1.75a.25.25 0 0 1-.25.25h-1.5a.25.25 0 0 1-.25-.25V13H9.25a.25.25 0 0 1-.25-.25v-1.5a.25.25 0 0 1 .25-.25H11V9.25a.25.25 0 0 1 .25-.25h1.5a.25.25 0 0 1 .25.25V11h1.75z",fillRule:"evenodd",clipRule:"evenodd"}))};fn.defaultProps={name:"FolderPlus"};var pn=fn,hn=function(e){var t=e.type,n=e.className,o=e.inputShowName,i=void 0===o?"":o,a=e.resetInput,c=e.folderId,s=e.getFoldersList,u=e.navActiveId,l=Object(on.b)(),f=Object(h.useRef)(),p=Object(h.useState)(i),b=Object(r.a)(p,2),v=b[0],m=b[1];return Object(d.b)("input",{ref:f,type:"text",className:O()("MaterialLibrary-input-module",n),placeholder:"请输入文件名称",autoFocus:"autofocus",onChange:function(e){var t=e.target.value;m(t)},value:v,onBlur:function(){a&&a(""),"add"!==t&&v&&l("/api/v4/materials/pc_editor/folders/".concat(c),{method:"PUT",body:{name:v}}).then((function(){var e;null===(e=f.current)||void 0===e||e.blur(),s&&s(null,u)})).catch((function(e){var t,n,r;P.a.alert((null===(t=e.payload)||void 0===t?void 0:t.message)||(null===(n=e.payload)||void 0===n||null===(r=n.error)||void 0===r?void 0:r.message)||"网络错误，稍后重试吧!")}))},onKeyUp:function(e){var t;13===e.keyCode&&(null===(t=f.current)||void 0===t||t.blur())}})};hn.propTypes={inputShowName:p.a.string,resetInput:p.a.func};var bn=hn,vn=function(e){var t,n=e.folders,o=void 0===n?{}:n,i=e.navActiveId,a=e.getFoldersList,c=e.navClick,s=Object(on.b)(),u=Object(h.useState)(""),l=Object(r.a)(u,2),f=l[0],p=l[1],b=Object(h.useState)(""),v=Object(r.a)(b,2),m=v[0],g=v[1],y=function(e,t){"nav-edit"===e?(p(t.id),g(t.name)):"nav-delete"===e&&P.a.confirm(Object(d.c)("div",{className:"MaterialLibrary-alert",children:[Object(d.b)("h2",{children:"是否删除已选择分类？"}),Object(d.b)("p",{children:"分类中的图片将归入未分类中"})]}),{text:{ok:"删除",cancel:"取消"}}).then((function(){s("/api/v4/materials/pc_editor/folders/".concat(t.id),{method:"DELETE",body:{delete_material:!1}}).then((function(e){var t,n;(null===(t=e.payload)||void 0===t?void 0:t.success)?(P.a.alert("已成功删除分组，该分组的图片已移动至「我的图片-未分类」"),a()):P.a.alert((null===(n=e.payload)||void 0===n?void 0:n.message)||"网络错误，稍后重试吧！")}))}),(function(){}))};return(null==o?void 0:o.hidden)?null:Object(d.c)("div",{className:"MaterialLibraryNav",children:[Object(d.c)("div",{className:"MaterialLibraryNav-nav",children:[Object(d.c)(j.Flex,{className:"MaterialLibraryNav-Mine",justifyContent:"space-between",alignItems:"center",children:[Object(d.c)(j.Flex,{justifyContent:"space-between",alignItems:"center",children:[Object(d.b)(un.a,{className:"nav-icon"}),null==o?void 0:o.name]}),Object(d.b)("div",{className:"nav-num",children:null==o?void 0:o.materialCount})]}),null==o||null===(t=o.child)||void 0===t?void 0:t.map((function(e){return Object(d.c)(j.Flex,{className:O()("MaterialLibraryNav-Folder",{active:i===e.id}),justifyContent:"space-between",alignItems:"center",onClick:function(){c(e.id)},children:[Object(d.c)(j.Flex,{justifyContent:"space-between",alignItems:"center",children:[Object(d.b)(qt,{className:"nav-icon"}),f!==e.id&&Object(d.b)("div",{className:"nav-name",children:e.name})]}),f!==e.id&&Object(d.b)("div",{className:O()("nav-num",{"disable-hover":!e.supportEdit&&!e.supportDelete}),children:e.materialCount||0}),f!==e.id&&(e.supportEdit||e.supportDelete)&&Object(d.c)(j.Flex,{className:"nav-handle",children:[e.supportEdit&&Object(d.b)(W.a,{as:j.Flex,zaType:"Button",zaText:"编辑",alignItems:"center",justifyContent:"center",onClick:function(t){t.stopPropagation(),y("nav-edit",e)},width:"16px",height:"16px",css:function(e){return{borderRadius:"12px",backgroundColor:e.colors.GBK99A,cursor:"pointer"}},children:Object(d.b)(Ke.a,{fill:"currentColor",size:10})}),e.supportDelete&&Object(d.b)(W.a,{as:j.Flex,zaType:"Button",zaText:"删除",alignItems:"center",justifyContent:"center",onClick:function(t){t.stopPropagation(),y("nav-delete",e)},width:"16px",height:"16px",css:function(e){return{marginLeft:"4px",borderRadius:"12px",backgroundColor:e.colors.GBK99A,cursor:"pointer"}},children:Object(d.b)(ln.a,{fill:"currentColor",size:10})})]}),f===e.id&&Object(d.b)(bn,{folderId:e.id,navActiveId:i,inputShowName:m,getFoldersList:a,resetInput:function(e){p(e)}})]},e.id)}))]}),Object(d.c)(j.Flex,{className:"MaterialLibraryNav-Add",justifyContent:"space-between",alignItems:"center",onClick:function(){var e;(null==o||null===(e=o.child)||void 0===e?void 0:e.length)>15?P.a.alert("分组已达上限，请删除已有的分类后再行添加"):P.a.confirm(Object(d.c)("div",{className:"MaterialLibrary-alert",children:[Object(d.b)("h2",{children:"添加分类"}),Object(d.b)(bn,{type:"add",className:"MaterialLibraryNav-input-module"})]}),{text:{ok:"添加",cancel:"取消"}}).then((function(){var e,t=null===(e=document.querySelector(".MaterialLibrary-input-module"))||void 0===e?void 0:e.value;s("/api/v4/materials/pc_editor/folders",{method:"POST",body:{name:t,material_type:"image"}}).then((function(){a()})).catch((function(e){var t,n,r;P.a.alert((null===(t=e.payload)||void 0===t?void 0:t.message)||(null===(n=e.payload)||void 0===n||null===(r=n.error)||void 0===r?void 0:r.message)||"网络错误，稍后重试吧!")}))}),(function(){}))},children:[Object(d.b)(pn,{className:"nav-icon"}),"添加分类"]})]})};vn.propTypes={folders:p.a.object,getFoldersList:p.a.func,navClick:p.a.func};var mn=vn,gn=n(32),yn=n(1001),On=n(244),jn=n(255),wn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cn=function(e){return b.a.createElement(Nt.a,wn({fill:"currentColor"},e),b.a.createElement("path",{d:"M6 20h12a2 2 0 0 0 2-2V8.828a2 2 0 0 0-.586-1.414l-2.828-2.828A2 2 0 0 0 15.172 4H6a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2zm.5-2h11a.5.5 0 0 0 .5-.5V9.207a.5.5 0 0 0-.146-.353l-2.708-2.708A.5.5 0 0 0 14.793 6H6.5a.5.5 0 0 0-.5.5v11a.5.5 0 0 0 .5.5zm4.086-9.886a2 2 0 0 1 2.828 0l2.44 2.44a.5.5 0 0 1 0 .707l-.708.707a.5.5 0 0 1-.707 0L13 10.528V13.5a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-2.972l-1.438 1.44a.5.5 0 0 1-.707 0l-.708-.707a.5.5 0 0 1 0-.708l2.44-2.439zM7.5 15a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-9z",fillRule:"evenodd",clipRule:"evenodd"}))};Cn.defaultProps={name:"UpLoad"};var kn=Cn,Sn=function(e){var t=e.handleUploadImage,n=Object(h.useRef)();return Object(d.c)(d.a,{children:[Object(d.b)("input",{css:{display:"none"},ref:n,type:"file",onChange:t,accept:"image/*",multiple:!0}),Object(d.c)(W.a,{zaType:"Button",zaText:"本地上传图片",as:j.Flex,role:"button",width:"96px",height:"96px",fontSize:"12px",color:"GBL05A",alignItems:"center",justifyContent:"center",flexDirection:"column",ml:"14px",mb:"10px",onClick:function(){return n.current.click()},css:function(e){return{verticalAlign:"top",display:"inline-flex",cursor:"pointer",borderRadius:"2px",backgroundColor:e.colorMod(e.colors.GBL05A).alpha(.08)}},children:[Object(d.b)(kn,{}),Object(d.b)(j.Box,{children:"本地上传"})]})]})},xn=n(1286),Rn=Object.assign;var En=function(e){return b.a.createElement(mt.a,Rn({width:"20",height:"20",viewBox:"0 0 20 20"},e),b.a.createElement("path",{d:"M8.524 14.597a1.374 1.374 0 01-.999.403c-.377 0-.737-.133-1.002-.406l-3.612-3.725a1.476 1.476 0 01.006-2.05 1.386 1.386 0 011.997.01l2.614 2.704 7.56-7.774a1.385 1.385 0 011.998 0 1.482 1.482 0 010 2.055l-8.562 8.783z",fillRule:"evenodd",clipRule:"evenodd"}))},_n=function(){return Object(d.b)(j.Box,{color:"GBK02A",width:"96px",css:function(e){return{position:"absolute",left:"4px",bottom:"4px",width:"32px",height:"16px",lineHeight:"16px",textAlign:"center",fontSize:"12px",background:e.colorMod(e.colors.GBK02A).alpha(.8),color:e.colors.GBK99B,borderRadius:"2px"}},children:"GIF"})},An=function(){return Object(d.b)(j.Box,{color:"GBK02A",width:"96px",css:function(e){return{position:"absolute",left:"4px",bottom:"4px",width:"48px",height:"16px",lineHeight:"16px",textAlign:"center",fontSize:"12px",background:e.colors.GBL05A,color:e.colors.GBK99A,borderRadius:"2px",zIndex:1}},children:"已删除"})},Tn=function(e){var t=e.data,n=e.tabType,r=e.chooseImage,o=e.insertImageSingle,i=e.getLatestList,a=Object(on.b)();return Object(d.c)(j.Box,{color:"GBK02A",width:"96px",css:{display:"inline-block",marginBottom:"10px",marginLeft:"14px",verticalAlign:"top"},children:[Object(d.c)(j.Box,{width:"96px",height:"96px",css:function(e){return{borderRadius:"2px",cursor:"pointer",position:"relative",backgroundColor:e.colorMod(e.colors.GBK02A).alpha(.08),"&:hover > .MaterialLibrary-imgListItemHover":{display:"flex"}}},children:[Object(d.b)(j.Image,{src:null==t?void 0:t.origin,loading:"lazy",size:"100%",css:{position:"absolute",left:0,right:0,objectFit:"cover",borderRadius:"inherit",opacity:(null==t?void 0:t.deleted)?"0.3":"1"}}),Object(d.c)("div",{className:"MaterialLibrary-imgListItemHover",children:[Object(d.b)(W.a,{as:j.Flex,zaType:"Button",zaText:"添加图片",alignItems:"center",justifyContent:"center",title:"添加",onClick:function(){o(t)},width:"24px",height:"24px",css:function(e){return{borderRadius:"2px",position:"absolute",top:"2px",right:"2px",backgroundColor:e.colors.GBL01A,display:(null==t?void 0:t.deleted)?"none":"flex"}},children:Object(d.b)(xn.a,{fill:"currentColor",size:18})}),(null==t?void 0:t.deleted)?Object(d.b)(W.a,{as:j.Flex,zaType:"Button",zaText:"选择图片",alignItems:"center",justifyContent:"center",title:"选择",onClick:function(){P.a.confirm(Object(d.c)("div",{className:"MaterialLibrary-alert",children:[Object(d.b)("h2",{children:"是否从最近使用删除图片？"}),Object(d.b)("p",{children:"插入至内容中的图片不会受到影响"})]}),{text:{ok:"删除",cancel:"取消"}}).then((function(){a("/api/v4/materials/pc_editor/recently-materials",{method:"DELETE",body:{material_type:"image",material_ids:[null==t?void 0:t.materialId]}}).then((function(e){var t,n;(null===(t=e.payload)||void 0===t?void 0:t.success)?i({isFirst:!0}):P.a.alert((null===(n=e.payload)||void 0===n?void 0:n.message)||"网络错误，稍后重试吧！")}))}),(function(){}))},width:"24px",height:"24px",css:function(e){return{borderRadius:"2px",position:"absolute",bottom:"2px",right:"2px",backgroundColor:e.colors.GBL01A}},children:Object(d.b)(ct.a,{fill:"currentColor",size:18})}):Object(d.b)(W.a,{as:j.Flex,zaType:"Button",zaText:"选择图片",alignItems:"center",justifyContent:"center",title:"选择",onClick:function(){r("latest"===n?t.materialId:t.uniqueId)},width:"24px",height:"24px",css:function(e){return{borderRadius:"2px",position:"absolute",bottom:"2px",right:"2px",border:"2px solid ".concat(e.colors.GBK99A)}}})]}),(null==t?void 0:t.checked)&&Object(d.b)(W.a,{as:j.Flex,zaType:"Button",zaText:"选择图片",alignItems:"center",justifyContent:"center",title:"添加",onClick:function(){r("latest"===n?t.materialId:t.uniqueId)},width:"24px",height:"24px",css:function(e){return{borderRadius:"2px",position:"absolute",bottom:"4px",right:"4px",backgroundColor:e.colors.GBL01A,color:e.colors.GBK99A}},children:Object(d.b)(En,{fill:"currentColor",size:13})}),"dynamic"===t.subtype&&Object(d.b)(_n,{}),t.deleted&&Object(d.b)(An,{})]}),Object(d.b)(j.Box,{mt:"4px",fontSize:"10px",lineHeight:"20px",css:Object(pe.d)(1),title:"文件名称",children:null==t?void 0:t.name})]})};Tn.propTypes={data:p.a.string,tabType:p.a.string,chooseImage:p.a.func,insertImageSingle:p.a.func,getLatestList:p.a.func};var Nn=Tn,In=function(e){var t=e.tabType,n=(e.onLoad,e.checkboxValue),o=e.handleAllData,i=e.keywordCatch,a=e.isEmpty,c=e.isPageError,s=Object(h.useState)("all"),u=Object(r.a)(s,2);u[0],u[1];return Object(d.c)(j.Flex,{justifyContent:"space-between",css:{padding:"10px 20px 10px 8px"},children:[Object(d.c)("div",{children:[!1,i&&"public"===t&&!a&&!c&&Object(d.c)(j.Box,{color:"GBK03A",width:"200px",css:{margin:"0px 12px",fontSize:"12px"},children:["以下为「",i,"」相关搜索内容"]})]}),"private"===t||"latest"===t||"public"===t?Object(d.c)(j.Flex,{alignItems:"center",css:function(e){return{fontSize:"13px",color:e.colors.GBL04A}},children:[Object(d.b)(Oe.a,{type:"checkbox",checked:n,onChange:function(e){o(e.target.checked)},size:15,style:{marginRight:"5px"}}),"本页全选"]}):Object(d.b)("div",{})]})};In.propTypes={tabType:p.a.string,onLoad:p.a.func,checkboxValue:p.a.bool,handleAllData:p.a.func,keywordCatch:p.a.string,isEmpty:p.a.bool};var Mn=In,Dn=n(178),Ln=function(e){var t,n,r,o=e.dataList,i=e.getFoldersList,a=e.getLatestList,c=e.navActiveId,s=e.folders,u=e.sourceType,l=e.sourceId,f=e.isMine,p=e.tabType,b=e.insertImage,v=e.onClose,m=Object(on.b)(),g=null==s||null===(t=s.child)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.id,y=Object(h.useMemo)((function(){return o.filter((function(e){return!0===e.checked}))}),[o]),w=function(e){var t=[];return y.forEach((function(n){"latest"===p||e?t.push(n.materialId):t.push(n.uniqueId)})),t};return Object(d.c)(j.Flex,{css:{padding:"13px 20px"},children:[Object(d.b)("button",{className:O()("MaterialLibrary-handleButton insert",{active:y.length>0}),css:function(e){return{background:e.colorMod(e.colors.GBL01A).alpha(.3)}},onClick:function(){var e=[];y.forEach((function(t){e.push(null==t?void 0:t.origin)})),b(e),m("/api/v4/materials/pc_editor/recently-materials",{method:"POST",body:{source_type:u,source_id:String(l),material_type:"image",material_ids:w(!0)}}),v()},children:"插入选择图片"}),f&&y.length>0&&(null==s||null===(r=s.child)||void 0===r?void 0:r.length)>1&&Object(d.b)("button",{className:"MaterialLibrary-handleButton change",onClick:function(){var e,t,n;0!==y.length&&(g=null==s||null===(e=s.child)||void 0===e||null===(t=e[0])||void 0===t?void 0:t.id,P.a.confirm(Object(d.c)("div",{className:"MaterialLibrary-alert",children:[Object(d.c)("h2",{children:["为已选择共 ",y.length," 张图片分类"]}),Object(d.b)(Dn.b,{buttonClassName:"MaterialLibraryContent-select",listClassName:"MaterialLibraryContent-option",onChange:function(e){g=e},children:null==s||null===(n=s.child)||void 0===n?void 0:n.map((function(e){var t=e.name,n=e.id;return Object(d.b)(Dn.a,{value:n,text:t,children:t},n)}))})]}),{text:{ok:"确定",cancel:"取消"}}).then((function(){m("/api/v4/materials/pc_editor/material-move",{method:"POST",body:{folder_id:c,target_folder_id:g,folder_material_ids:w()}}).then((function(e){var t,n;(null===(t=e.payload)||void 0===t?void 0:t.success)?i(null,c):P.a.alert((null===(n=e.payload)||void 0===n?void 0:n.message)||"网络错误，稍后重试吧！")}))}),(function(){})))},children:"变更分类"}),(f||"latest"===p)&&y.length>0&&Object(d.b)("button",{className:"MaterialLibrary-handleButton delete",onClick:function(){0!==y.length&&P.a.confirm(Object(d.c)("div",{className:"MaterialLibrary-alert",children:[Object(d.c)("h2",{children:["是否删除已选择共 ",y.length," 张图片？"]}),Object(d.b)("p",{children:"插入至内容中的图片不会受到影响"})]}),{text:{ok:"删除",cancel:"取消"}}).then((function(){var e=f?"/api/v4/materials/pc_editor/folders/".concat(c,"/materials"):"/api/v4/materials/pc_editor/recently-materials";m(e,{method:"DELETE",body:Object(Fe.a)({material_type:"image"},"latest"===p?"material_ids":"folder_material_ids",w())}).then((function(e){var t,n;(null===(t=e.payload)||void 0===t?void 0:t.success)?"latest"===p?a({isFirst:!0}):i(null,c):P.a.alert((null===(n=e.payload)||void 0===n?void 0:n.message)||"网络错误，稍后重试吧！")}))}),(function(){}))},children:"删除图片"})]})};Ln.propTypes={dataList:p.a.array};var Pn=Ln,zn={private:"上传图片",latest:"上传图片",public:"搜索其他内容"},Bn=function(e){var t=e.tabType,n=e.dataList,r=e.onLoad,o=e.isMine,i=e.folders,a=e.getFoldersList,c=e.getLatestList,s=e.navActiveId,u=e.insertImage,l=e.isLoading,f=e.isFetching,p=e.sourceType,h=e.sourceId,b=e.keywordCatch,v=e.isPageError,m=e.handleUploadImage,g=e.refreshImageList,y=e.clickHanlder,O=e.insertImageSingle,w=e.handleAllData,C=e.chooseImage,k=e.checkboxValue,S=e.uploadImageRef,x=e.onClose,R=e.restProps,E={private:"图片库为空，请上传个人图片吧",public:"没有找到".concat(b?"「"+b+"」":"","相关内容"),latest:"最近使用为空，请搜索网络素材或上传图片"};return Object(d.c)(j.Flex,{flexDirection:"column",width:"100%",children:[Object(d.b)(Mn,{tabType:t,onLoad:r,checkboxValue:k,handleAllData:w,keywordCatch:b,isEmpty:0===n.length&&!l,isPageError:v}),0===n.length&&!l&&!v&&Object(d.c)(d.a,{children:[Object(d.b)("input",{css:{display:"none"},ref:S,type:"file",onChange:m,accept:"image/*",multiple:!0}),Object(d.b)(yn.a.EI1A,{image:"default",content:E[t],buttonText:zn[t],buttonOnClick:y})]}),!l&&!f&&v&&Object(d.b)(yn.a.EI1A,{image:"loadingError",content:"网络连接失败",buttonText:"刷新页面",buttonOnClick:g}),n.length>0&&Object(d.c)(bt.b,Object.assign({css:{flex:1,overflow:"auto"},getContainer:function(e){return e},onLoad:r,isLoading:l},R,{children:[o&&Object(d.b)(Sn,{handleUploadImage:m},n.length),n.map((function(e,n){return Object(d.b)(Nn,{data:e,tabType:t,chooseImage:C,insertImage:u,insertImageSingle:O,getLatestList:c},n)})),Object(d.b)("i",{className:"MaterialLibraryList-placeholder"}),Object(d.b)("i",{className:"MaterialLibraryList-placeholder"}),Object(d.b)("i",{className:"MaterialLibraryList-placeholder"}),Object(d.b)("i",{className:"MaterialLibraryList-placeholder"}),Object(d.b)("i",{className:"MaterialLibraryList-placeholder"}),Object(d.b)("i",{className:"MaterialLibraryList-placeholder"})]})),f&&Object(d.b)("div",{className:"MaterialLibraryList-loading",children:"加载中..."}),(null==n?void 0:n.length)>0&&Object(d.b)(Pn,{dataList:n,getFoldersList:a,getLatestList:c,navActiveId:s,folders:i,sourceType:p,sourceId:h,isMine:o,tabType:t,insertImage:u,onClose:x})]})},Fn=function(e){var t=e.tabType,n=e.materialList,o=e.onLoad,i=e.isMine,a=void 0!==i&&i,c=e.folders,s=e.getFoldersList,u=e.getLatestList,l=e.navActiveId,f=e.insertImage,p=e.tabChange,b=e.isLoading,v=e.isFetching,m=e.sourceType,g=e.sourceId,y=e.keywordCatch,O=e.isPageError,j=e.onClose,w=Object(gn.a)(e,["tabType","materialList","onLoad","isMine","folders","getFoldersList","getLatestList","navActiveId","insertImage","tabChange","isLoading","isFetching","sourceType","sourceId","keywordCatch","isPageError","onClose"]),C=Object(on.b)(),k=Object(h.useRef)(),S=Object(h.useState)(n||[]),x=Object(r.a)(S,2),R=x[0],E=x[1],_=Object(h.useState)(!1),A=Object(r.a)(_,2),T=A[0],N=A[1];Object(h.useEffect)((function(){var e=Object(Xe.a)(n);N(!1),E(e)}),[n,E]);return Object(d.b)(Bn,{tabType:t,dataList:R,onLoad:o,isMine:a,folders:c,getFoldersList:s,getLatestList:u,navActiveId:l,insertImage:f,isLoading:b,isFetching:v,sourceType:m,sourceId:g,keywordCatch:y,isPageError:O,handleUploadImage:function(e){var t=e.target.files;if(null==t?void 0:t.length)if((null==t?void 0:t.length)>100)P.a.alert("添加图片请不要超过 100 张哦~");else for(var n=[],r=function(e){Object(On.a)(t[e]).then((function(r){Object(jn.a)(r).then((function(r){var o;(n=n.concat({name:null===(o=t[e])||void 0===o?void 0:o.name,source:null==r?void 0:r.original_hash})).length===t.length&&function(e){C("/api/v4/materials/pc_editor/folders/".concat(l,"/materials"),{method:"POST",body:{material_type:"image",materials:e}}).then((function(e){var t,n;(null===(t=e.payload)||void 0===t?void 0:t.success)?s(null,l):P.a.alert((null===(n=e.payload)||void 0===n?void 0:n.message)||"网络错误，稍后重试吧！")})).catch((function(e){var t,n,r;P.a.alert((null===(t=e.payload)||void 0===t?void 0:t.message)||(null===(n=e.payload)||void 0===n||null===(r=n.error)||void 0===r?void 0:r.message)||"网络错误，稍后重试吧!")}))}(n)}))}))},o=0;o<t.length;o++)r(o)},refreshImageList:function(){"latest"===t?u({isFirst:!0}):s(null,l)},clickHanlder:function(){"private"===t?k.current.click():"latest"===t?p("private"):document.querySelector(".materials_library_public_search").focus()},insertImageSingle:function(e){f([null==e?void 0:e.origin]),C("/api/v4/materials/pc_editor/recently-materials",{method:"POST",body:{source_type:m,source_id:String(g),material_type:"image",material_ids:[null==e?void 0:e.materialId]}}),j()},handleAllData:function(e){var t=Object(Xe.a)(R);t.forEach((function(t){!0!==t.deleted&&(t.checked=e)})),N(e),E(t)},chooseImage:function(e){var n=Object(Xe.a)(R),r=n.find((function(n){return("latest"===t?n.materialId:n.uniqueId)===e}));r.checked=!(null==r?void 0:r.checked),E(n)},checkboxValue:T,uploadImageRef:k,onClose:j,restProps:w})};Fn.propTypes={imgList:p.a.array,onLoad:p.a.func,navActiveId:p.a.any};var Un=Fn,qn=[{type:"public",name:"公共素材"},{type:"private",name:"个人素材"},{type:"latest",name:"最近使用"}],Vn=function(e){var t=e.isShow,n=void 0!==t&&t,o=e.onClose,i=e.sourceType,a=e.sourceId,c=e.insertImage,s=Object(on.b)(),u=Object(h.useState)("public"),l=Object(r.a)(u,2),f=l[0],p=l[1],b=Object(h.useState)([]),v=Object(r.a)(b,2),m=v[0],g=v[1],y=Object(h.useState)([]),O=Object(r.a)(y,2),w=O[0],C=O[1],k=Object(h.useState)(!0),S=Object(r.a)(k,2),x=S[0],R=S[1],E=Object(h.useState)(!0),_=Object(r.a)(E,2),A=_[0],T=_[1],N=Object(h.useState)(!1),I=Object(r.a)(N,2),M=I[0],D=I[1],L=Object(h.useState)(""),z=Object(r.a)(L,2),B=z[0],F=z[1],U=Object(h.useState)(""),q=Object(r.a)(U,2),V=q[0],H=q[1],K=Object(h.useState)(""),Q=Object(r.a)(K,2),W=Q[0],G=Q[1],Z=Object(h.useState)(!1),Y=Object(r.a)(Z,2),$=Y[0],X=Y[1],ee=function(e,t){var n,r=Object(nn.camelizeKeys)(e||{});R(!1),T(!1),D(null==r||null===(n=r.paging)||void 0===n?void 0:n.isEnd);var o=w.concat((null==r?void 0:r.data)||[]);C(t?(null==r?void 0:r.data)||[]:o)},te=function(e,t){var n;(R(!1),T(!1),t)?X(!0):P.a.alert((null==e?void 0:e.message)||(null==e||null===(n=e.error)||void 0===n?void 0:n.message)||"网络错误，稍后重试吧!")},ne=function(e){var t=e.id,n=e.isFirst;R(!0),T(n),X(!1),s("/api/v4/materials/pc_editor/folders/".concat(t||W,"/materials?offset=").concat(n?0:null==w?void 0:w.length,"&limit=24")).then((function(e){ee(e.payload,n)})).catch((function(e){te(e.payload,n)}))},re=function(e){var t=e.id,n=e.subType,r=e.isFirst,o=e.keyword;R(!0),T(r),X(!1),o?H(o):r&&H(""),F(n),s(Object(rn.a)("/api/v4/materials/pc_editor/folders/".concat(t||W,"/search"),{offset:r?0:null==w?void 0:w.length,limit:24,keyword:r?o:o||V,source_type:i,source_id:a,sub_type:n||B})).then((function(e){ee(e.payload,r)})).catch((function(e){te(e.payload,r)}))},oe=function(e,t){s("/api/v4/materials/pc_editor/folders?type=".concat(e||f,"&material_type=image")).then((function(n){var r,o,i,a,c,s,u,l=Object(nn.camelizeKeys)((null===(r=n.payload)||void 0===r?void 0:r.data)||{});(g(l),G(t||(null==l||null===(o=l.child)||void 0===o||null===(i=o[0])||void 0===i?void 0:i.id)),"public"===e)?re({id:t||(null==l||null===(a=l.child)||void 0===a||null===(c=a[0])||void 0===c?void 0:c.id),isFirst:!0}):ne({id:t||(null==l||null===(s=l.child)||void 0===s||null===(u=s[0])||void 0===u?void 0:u.id),isFirst:!0})})).catch((function(e){te(e.payload,!0)}))},ie=function(e){var t=e.isFirst;R(!0),T(t),X(!1),s(Object(rn.a)("/api/v4/materials/pc_editor/recently-materials",{offset:t?0:null==w?void 0:w.length,limit:24,material_type:"image"})).then((function(e){ee(e.payload,t)})).catch((function(e){te(e.payload,t)}))},ae=function(e){x||(p(e),C([]),R(!0),T(!0),H(""),"latest"===e?ie({isFirst:!0}):oe(e))};return Object(h.useEffect)((function(){oe(f)}),[]),n?Object(d.b)(J.b,{css:{minWidth:"746px"},contentClassName:"MaterialLibrary-Modal-content",onClose:o,children:Object(d.c)("div",{children:[Object(d.b)(sn,{tab:qn,tabType:f,tabChange:ae,searchPublicList:re}),Object(d.c)("div",{className:"MaterialLibrary-content",children:["private"===f&&Object(d.b)(mn,{folders:m,navActiveId:W,navClick:function(e){C([]),G(e),ne({id:e,isFirst:!0})},getFoldersList:oe}),Object(d.b)(j.Flex,{overflow:"hidden",flex:"1",children:Object(d.b)(Un,{tabType:f,materialList:w,isMine:"private"===f,css:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",alignContent:"flex-start",height:"100%",marginLeft:"-14px",padding:"0 20px 0"},isLoading:x,isFetching:A,isDrained:M,onLoad:"public"===f?re:"latest"===f?ie:ne,folders:m,getFoldersList:oe,getLatestList:ie,navActiveId:W,insertImage:c,tabChange:ae,sourceType:i,sourceId:a,keywordCatch:V,isPageError:$,onClose:o})})]})]})}):null};Vn.propTypes={isShow:p.a.bool,sourceType:p.a.string,sourceId:p.a.number,onClose:p.a.func,insertImage:p.a.func};var Hn=Vn,Kn=function(e,t){var n=e.sourceType,o=e.sourceId,i=e.insertImage,a=Object(h.useState)(!1),c=Object(r.a)(a,2),s=c[0],u=c[1],l=Object(ge.c)((function(){return u(!1)})),f=Object(ge.c)((function(){return u(!0)}));return Object(h.useImperativeHandle)(t,(function(){return{onOpen:f,onClose:l}}),[f,l]),s?Object(d.b)(Hn,{isShow:s,onClose:l,sourceType:n,sourceId:o,insertImage:i}):null};Kn.propType={sourceType:p.a.string.isRequired,sourceId:p.a.number.isRequired,insertImage:p.a.func.isRequired};var Qn=Object(h.forwardRef)(Kn),Wn=function(e){var t=e.sourceType,n=e.sourceId,r=b.a.createRef(null),o={},i=!1,a=null;return{initialize:function(e){Object.assign(o,e)},components:[Object(d.b)(Qn,{ref:r,sourceType:t,sourceId:n,insertImage:function(e){var t;t=function(){for(var t=0;t<e.length;t++)n={value:e[t]},i?a=Object(en.a)(a,"image","IMMUTABLE",{upload:n,size:"normal"}):o.setEditorState(Object(en.a)(o.getEditorState(),"image","IMMUTABLE",{upload:n,size:"normal"}));var n},i=!0,a=o.getEditorState(),t(),o.setEditorState(a),i=!1}},"material_library")],toolbarV2:[{section:Lt.a.BASIC_MEDIA,parentName:"image",label:"图片库",text:Object(d.c)(j.Flex,{alignItems:"center",css:{position:"relative",width:"66px"},children:["图片库",Object(d.b)(tn.a,{css:function(e){return{position:"absolute",top:"2px",right:"-11px",fill:"".concat(e.colors.GBL01A)}},isNewBefore:new Date(2021,6,1)})]}),priority:2,onClick:function(){var e;null===(e=r.current)||void 0===e||e.onOpen()}}]}},Gn=n(1151),Zn=n(1173),Yn=n(958),Jn=n(1328),$n=n.n(Jn),Xn=n(402),er={editableInit:"Editable.Init",editableEdit:"Editable.Edit",draftLoad:"DraftLoad",draftSave:"DraftSave",addAnswer:"AddAnswer"},tr=function(e,t){var n=e.isToolbarSticky,r=e.useNewEditorSetting,o=e.answer,i=e.isFullscreen,a=e.toolbarMenuAttention,c=e.scheduledPublishAt,s=e.initialScheduledPublishAt,u=e.placeholder,l=e.draft,f=e.defaultValue,p=e.isLegacyVideoAnswer,b=e.defaultVideo,v=e.question,m=e.videoAnswerEditable,g=e.videoAnswerPublished,y=e.editableReady,j=e.handleChangeContent,w=e.handleAfterChangeContent,C=e.handleFocusWithAuth,k=e.handleSelectText,S=e.handleSubmit,x=e.handleError,R=e.handleLoadStart,E=e.handleLoadEnd,_=e.handleUploadStart,A=e.handleUploadEnd,T=e.handleUploadError,N=e.handleBeforeVideoUpload,I=e.onMCNLinkCardEdit,D=e.isVideoAnswer,L=e.handleInsertZVideo,P=e.getToolbarSidePlugins,z=e.getToolbarMenuPlugins,B=e.createEditorPlugins,F=e.getEditorBeforePlugins,U=e.setUseScheduledPublish,q=Object(h.useRef)(null);return Object(d.b)(Gn.b,{name:er.editableEdit,children:Object(d.b)(Xn.a,{className:O()("AnswerForm-editor","AnswerForm-container",{isToolbarSticky:n,useNewEditorSetting:r}),ref:t,allowDragAndDrop:!0,allowLinkCard:!0,allowMention:!0,allowToolbar:!0,allowUploadDocument:!0,allowVideoTitleChange:!D,allowReference:!0,allowImageEditor:!0,allowZVideo:!D,allowTable:!D,allowCatalog:!D,catalogEnabled:Object(Yn.a)(o,"answer"),allowHeaderThree:!1,allowToolbarSticky:!i,toolbarStickyOffset:we.i,onInsertZVideo:L,getToolbarSidePlugins:P,getToolbarMenuPlugins:z,getEditorBeforePlugins:F,toolbarMenuAttention:a,createEditorPlugins:B,toolbarProps:{menuCallout:c&&s&&Object(d.c)(M.b,{className:"AnswerForm-scheduledPublishCallout",onClose:function(){U(!1),Q.a.trackEvent(t,{action:"Click",id:5734,name:"回答"})},children:["发布时间：",Object(d.b)(Je.a,{onRef:q,value:s,min:s,max:Ye.a(s,7),onChange:function(e,t){U(!0,e),Q.a.setModule(q.current,{module:"Unknown",module_name:t.date?"日期":t.hours?"小时":t.minutes?"分钟":void 0}),Q.a.trackEvent(q.current,{action:"Click",id:5731,name:"回答"})}}),Object(d.c)("a",{href:"/draft?type=answer&filter=schedule",target:"_blank","data-za-detail-view-id":5732,"data-za-detail-view-name":"回答",style:{marginLeft:"2em"},children:[Object(d.b)(Zn.a,{text:!0,center:!0})," 管理待发布内容"]})]})},minRows:r?6:3,placeholder:u,defaultValue:l?l.editableContent:f,videoAnswerEditable:m,videoAnswerPublished:g,isLegacyVideoAnswer:p,defaultVideo:b,onReady:y,onChange:j,onAfterChange:w,onFocus:C,onSelectText:k,onSubmit:S,onError:x,onLoadStart:R,onLoadEnd:E,onUploadStart:_,onUploadEnd:A,onUploadError:T,onBeforeVideoUpload:N,logo:$n.a,location:v.title,editingContentType:"answer",onMCNLinkCardEdit:I,useToolbarV2:r,useEditableV2:!0})})};tr.propTypes={isToolbarSticky:p.a.bool.isRequired,useNewEditorSetting:p.a.bool.isRequired,answer:p.a.object.isRequired,isFullscreen:p.a.bool.isRequired,toolbarMenuAttention:p.a.string,scheduledPublishAt:p.a.number,initialScheduledPublishAt:p.a.number,placeholder:p.a.string.isRequired,draft:p.a.object,defaultValue:p.a.string,isLegacyVideoAnswer:p.a.bool,defaultVideo:p.a.object,question:p.a.object,videoAnswerEditable:p.a.bool,videoAnswerPublished:p.a.bool,editableReady:p.a.func.isRequired,handleChangeContent:p.a.func.isRequired,handleAfterChangeContent:p.a.func.isRequired,handleFocusWithAuth:p.a.func.isRequired,handleSelectText:p.a.func.isRequired,handleSubmit:p.a.func.isRequired,handleError:p.a.func.isRequired,handleLoadStart:p.a.func.isRequired,handleLoadEnd:p.a.func.isRequired,handleUploadStart:p.a.func.isRequired,handleUploadEnd:p.a.func.isRequired,handleUploadError:p.a.func.isRequired,handleBeforeVideoUpload:p.a.func.isRequired,handleMCNLinkCardEdit:p.a.func.isRequired,isVideoAnswer:p.a.bool.isRequired,handleInsertZVideo:p.a.func.isRequired,getToolbarSidePlugins:p.a.func.isRequired,createEditorPlugins:p.a.func.isRequired,getToolbarMenuPlugins:p.a.func.isRequired,getEditorBeforePlugins:p.a.func.isRequired,setUseScheduledPublish:p.a.func.isRequired};var nr=Object(h.forwardRef)(tr),rr=n(236),or=n(931),ir=n(834);function ar(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var cr={type:"none",description:"无声明"},sr=function(e){Object(s.a)(n,e);var t=ar(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={openModal:!1},e.handleChange=function(t){e.props.onChange(t.target.checked),Q.a.trackEvent(null,{id:5603,action:"Click"})},e.handleHelpClick=function(t){e.setState({openModal:t}),Q.a.trackEvent(null,{id:5604,action:"Click"}),Q.a.trackEvent(Object(a.a)(e),{id:7840,action:"Click"})},e.handleHelpClose=function(t){e.setState({openModal:t})},e.handleReshipmentDisclaimers=function(t){e.props.onChange(t),Q.a.trackEvent(Object(a.a)(e),{id:7831,action:"Click"},{button:{text:t.description}})},e.handleStatementClick=function(){Q.a.trackEvent(Object(a.a)(e),{id:7841,action:"Click"})},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){Q.a.trackCardShow(null,{id:5602})}},{key:"componentDidUpdate",value:function(e,t){this.state.openModal&&!t.openModal&&Q.a.trackCardShow(null,{id:7843})}},{key:"renderReshipmentDisclaimers",value:function(){var e=this,t=this.props,n=t.disclaimers,r=t.disclaimerChecked;return[].concat(Object(Xe.a)(n),[cr]).map((function(t){return Object(d.b)(I.a,{onClick:function(){return e.handleReshipmentDisclaimers(t)},checked:t.type===r,children:t.description},t.type)}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.disclaimers,r=t.disclaimerChecked,o=n.find((function(e){return e.type===r}));return Object(d.c)("div",{className:"DisclaimerEntry",children:[Object(d.b)("span",{className:"DisclaimerEntry-help",onClick:function(){return e.handleHelpClick(!0)},children:Object(d.b)(et.a,{className:"DisclaimerEntry-helpIcon",text:!0,center:!0})}),Object(d.b)(nt,{openModal:this.state.openModal,handleHelpClick:function(t){return e.handleHelpClose(t)}}),Object(d.b)(N.c,{toggler:Object(d.b)(T.c,{preset:"plain",onRef:function(t){e.settingsTogglerEl=t},className:"DisclaimerEntry-selfMenu",children:Object(d.c)("span",{onClick:function(){return e.handleStatementClick()},children:["创作声明：",(null==o?void 0:o.description)||cr.description,Object(d.b)(ir.a,{center:!0,text:!0,className:"DisclaimerEntry-arrow"})]})}),menuClassName:"AnswerItem-selfMenu",itemClassName:"AnswerItem-selectMenuItem",children:this.renderReshipmentDisclaimers()})]})}}]),n}(h.Component),ur=function(e){var t=e.question,n=e.answer,r=Object(v.useDispatch)(),o=Object(v.useSelector)((function(e){return Object(ce.d)(e,null==n?void 0:n.id)})),i=Object(v.useSelector)((function(e){return e.question.disclaimers[t.id]})),a=Object(h.useContext)(_e),c=a.getFormData,s=a.updateFormData,u=c(),l=u.isDisclaimerChecked,f=u.disclaimerType,p=(null==i?void 0:i.length)>0&&(!(null==n?void 0:n.id)||o);return Object(h.useEffect)((function(){o&&s(function(e){var t,n,r,o,i="open"===(null==e||null===(t=e.disclaimerInfo)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.status);return{isDisclaimerChecked:i,disclaimerType:i?null==e||null===(r=e.disclaimerInfo)||void 0===r||null===(o=r[0])||void 0===o?void 0:o.type:"none"}}(o))}),[Boolean(o)]),Object(h.useEffect)((function(){i||r(Object(ae.M)(t.id))}),[]),p?Object(d.b)(sr,{disclaimers:i,checked:l,disclaimerChecked:f,onChange:function(e){s({isDisclaimerChecked:"none"!==e.type,disclaimerType:e.type})}}):Object(d.b)(j.Box,{width:"157px",mr:"40px"})},lr=n(450);function dr(e){var t=e.shown,n=e.onClose;return Object(d.b)(J.b,{title:"商业声明",subtitle:"",onClose:n,children:t&&Object(d.c)(j.Box,{children:[Object(d.b)(j.Text,{fontSize:15,lineHeight:"22px",color:"GBK02A",children:"「商业声明」是为自己创作的内容添加商业声明的工具。当你创作的内容中包含商业推广信息时，建议进行声明，选择「本内容含有商业推广」，并选择具体推广方式。对商业推广信息的正确声明有助于内容展示。"}),Object(d.b)(T.c,{preset:"primary",color:"blue",onClick:n,css:{width:166,height:32,lineHeight:"32px",fontSize:14,margin:"25px 0 0 93px"},children:"知道了"})]})})}var fr=n(809),pr=function(e){var t=e.checked,n=e.onChange,r=e.text;return Object(d.c)(j.Flex,{flex:1,alignItems:"center",as:"label",css:{cursor:"pointer"},children:[Object(d.b)(Ie.a,{size:16,checked:t,onChange:n}),Object(d.b)(j.Text,{ml:"8px",fontSize:"15px",lineHeight:"21px",children:r})]})},hr=function(e){var t=e.text,n=e.checked,r=e.onClick,o=e.showCheckIcon,i=Object(gn.a)(e,["text","checked","onClick","showCheckIcon"]);return Object(d.c)(j.Flex,Object.assign({justifyContent:"space-between",alignItems:"center",px:"12px",height:30,lineHeight:"30px",fontSize:14,color:n?"GBL01A":"GBK06A",css:function(e){return Object.assign({cursor:"pointer",borderRadius:15,backgroundColor:n?e.colorMod(e.colors.GBL01A).alpha(.08):"transparent"},{border:"1px solid ".concat(n?"transparent":e.colors.GBK09A)})}},i,{onClick:r,children:[Object(d.b)(j.Text,{children:t}),n&&o&&Object(d.b)(fr.a,{text:!0,center:!0})]}))};function br(e){var t=e.shown,n=e.onClose,o=e.isCurrentReported,i=e.commercialTypes,a=e.currentSelectedTypes,c=e.setCommercialReportInfo,s=Object(h.useState)(!1),u=Object(r.a)(s,2),l=u[0],f=u[1],p=Object(h.useState)([]),b=Object(r.a)(p,2),v=b[0],m=b[1];Object(h.useEffect)((function(){f(o)}),[o]),Object(h.useEffect)((function(){m(a)}),[a]);return t?Object(d.b)(J.b,{title:"商业推广",subtitle:"",onClose:n,children:Object(d.c)(j.Box,{children:[Object(d.c)(j.Flex,{justifyContent:"space-between",alignItems:"center",children:[Object(d.b)(pr,{checked:!l,onChange:function(){return f(!1)},text:"本内容不含商业推广"}),Object(d.b)(pr,{checked:l,onChange:function(){return f(!0)},text:"本内容含有商业推广"})]}),l&&Object(d.c)(j.Box,{mt:"20px",children:[Object(d.b)(j.Text,{mb:"10px",fontSize:15,lineHeight:"21px",color:"GBK02A",children:"推广方式（必选）"}),Object(d.b)(j.Flex,{flexWrap:"wrap",children:i.map((function(e){var t=e.value,n=e.name;return Object(d.b)(hr,{flexShrink:0,mb:"10px",mr:"8px",text:n,checked:v.includes(t),onClick:function(){return function(e){if(v.includes(e)){var t=v.filter((function(t){return t!==e}));m(t)}else m(v.concat([e]))}(t)}},t)}))})]}),Object(d.c)(H.a,{direction:"horizontal",css:{marginTop:32},children:[Object(d.b)(T.c,{onClick:n,color:"grey",children:"取消"}),Object(d.b)(T.c,{disabled:l&&0===v.length,preset:"primary",color:"blue",onClick:function(){c({isCurrentReported:l,currentSelectedTypes:v}),n()},children:"确认"})]})]})}):null}var vr=function(e){var t,n=e.question,o=e.answerId,i=n.relationship.isAnonymous,a=Object(v.useDispatch)(),c=Object(h.useContext)(_e).updateFormData,s=Object(v.useSelector)((function(e){return e.commercialReport})),u=(s||{}).commercialTypes,l=void 0===u?[]:u,f=(null==s||null===(t=s.answers)||void 0===t?void 0:t[o])||{},p=f.isCommercialReported,b=f.selectedCommercialTypes,m=void 0===b?[]:b,g=Object(h.useState)(!1),y=Object(r.a)(g,2),O=y[0],w=y[1],C=Object(h.useState)([]),k=Object(r.a)(C,2),S=k[0],x=k[1],R=Object(h.useState)(!1),E=Object(r.a)(R,2),_=E[0],A=E[1],T=Object(h.useState)(!1),N=Object(r.a)(T,2),I=N[0],M=N[1];Object(h.useEffect)((function(){(0===l.length||o)&&a(Object(lr.b)("answer",o))}),[]),Object(h.useEffect)((function(){o&&(w(p),x(m.map((function(e){return e.value}))))}),[o,p,JSON.stringify(m)]);return 0===l.length?null:Object(d.c)(j.Flex,{px:"24px",pb:"12px",mx:"auto",width:"100%",maxWidth:694,css:{opacity:i?.3:1},children:[Object(d.c)(j.Flex,{fontSize:14,color:"GBL05A",children:[Object(d.b)(et.a,{text:!0,center:!0,onClick:function(){return M(!0)},css:{cursor:"pointer"}}),Object(d.c)(j.Text,{ml:"10px",color:"#606a80",children:["商业声明：本内容",O&&!i?"含有":"不含","商业推广"]})]}),Object(d.c)(j.Flex,{fontSize:14,ml:"8px",color:"#8490a8",css:{cursor:"pointer"},onClick:function(){i?a(Object(ue.h)("匿名回答无法添加商业推广，请先取消匿名","red")):A(!0)},children:[Object(d.b)(Zn.a,{text:!0,center:!0}),Object(d.b)(j.Text,{ml:"4px",children:"修改"})]}),Object(d.b)(br,{onClose:function(){return A(!1)},shown:_,isCurrentReported:O,commercialTypes:l,currentSelectedTypes:S,setCommercialReportInfo:function(e){var t=e.isCurrentReported,r=e.currentSelectedTypes;c({commercialReportInfo:{isReport:t,commercialTypes:r}}),w(t),x(r),a(Object(lr.c)({questionId:n.id,isCommercialReported:t}))}}),Object(d.b)(dr,{onClose:function(){return M(!1)},shown:I})]})},mr=function(e){var t,n=Object(le.b)(e),r=Object.values(e.entities.answers).filter((function(e){var t;return(null===(t=e.author)||void 0===t?void 0:t.urlToken)===(n&&n.urlToken)}))[0]||{};return null==r||null===(t=r.rewardInfo)||void 0===t?void 0:t.tagline},gr=function(e){var t=e.answer,n=(t=void 0===t?{}:t).rewardInfo,o=(n=void 0===n?{}:n).isRewardable,i=void 0!==o&&o,a=e.question,c=a.id,s=a.relationship.isAnonymous,u=Object(h.useState)(!1),l=Object(r.a)(u,2),f=l[0],p=l[1],b=Object(v.useSelector)((function(e){return e.switches})).isAnswerRewardable,m=Object(v.useSelector)(mr),g=Object(h.useState)(!1),y=Object(r.a)(g,2),O=y[0],j=y[1],w=Object(h.useContext)(_e),C=w.getFormData,k=w.updateFormData,S=Object(h.useState)(i),x=Object(r.a)(S,2),R=x[0],E=x[1],_=Object(v.useDispatch)(),A=C().rewardTagline;return Object(h.useEffect)((function(){k({rewardTagline:m})}),[m,k]),Object(h.useEffect)((function(){_(Object(ve.b)(["isAnswerRewardable"]))}),[_]),Object(h.useEffect)((function(){b&&(F.a.get("rewardNotication")||(j(!0),F.a.set("rewardNotication",!0)))}),[b]),Object(ge.i)((function(){return j(!1)}),O?2e3:null),b?Object(d.c)("div",{className:"AnswerForm-openRewardButton",children:[Object(d.c)("label",{className:"AnswerForm-openRewardLabel",htmlFor:"AnswerForm-openRewardInput",children:[Object(d.b)(Oe.a,{className:"AnswerForm-openRewardCheckbox",checked:R,onChange:function(e){if(!s)return!e.target.checked||A?(k({rewardTagline:""}),E(!1),void Object(Se.n)(c,!1)):void p(!0);_(Object(ue.h)("匿名回答无法开启赞赏，请先取消匿名","red"))},id:"AnswerForm-openRewardInput",size:16}),"开启赞赏"]}),f&&Object(d.b)(ke,{submitRewardText:function(e){k({rewardTagline:e}),E(!0),_(Object(Se.n)()),p(!1)},onClose:function(){return p(!1)},tagline:A,edit:!1}),O&&Object(d.b)("span",{className:"AnswerForm-Notication",children:"你的回答可以开启赞赏了"})]}):null},yr=function(e){var t=e.answer,n=Object(h.useContext)(_e),r=n.updateFormData,o=(0,n.getFormData)().pushActivity,i=Object(ze.a)(),a=!(null==t?void 0:t.id);Object(h.useEffect)((function(){a&&r({pushActivity:!0})}),[a,r]);return a?Object(d.c)("label",{htmlFor:"pushFollowSwitch",css:{display:"flex",alignItems:"center"},children:[Object(d.b)(Oe.a,{checked:o,onChange:function(e){var t=e.target.checked;Q.a.trackEvent(null,{id:8361,action:"Click"},{button:{text:t?"开":"关"}}),t?r({pushActivity:!0}):(Q.a.trackCardShow(null,{id:8362}),i.confirm("设置后，关注你的其他用户将无法在「首页 - 关注」阅读这篇回答",{title:"关闭推送给关注者吗",ok:"关闭推送"}).then((function(){Q.a.trackEvent(null,{id:8363,action:"Click"}),r({pushActivity:!1})})).catch((function(){})))},id:"pushFollowSwitch",size:16}),Object(d.b)(j.Text,{fontSize:"14px",color:"GBL05A",ml:"9px",children:"推送给我的关注者"})]}):null},Or=Object(rr.a)(null)((function(e){var t=e.answer,n=e.question,r=Object(or.a)();return Object(d.c)(d.a,{children:[Object(d.c)("div",{className:"AnswerForm-footerContent AnswerForm-container",children:[Object(d.b)(ur,{answer:t,question:n}),Object(d.b)(gr,{answer:t,question:n}),Object(d.b)(yr,{answer:t,question:n})]}),r&&Object(d.b)(vr,{answerId:null==t?void 0:t.id,question:n})]})})),jr=n(825),wr=n(824),Cr=function(e){var t=e.question,n=Object(v.useSelector)(le.b);return t.relationship.isAnonymous?Object(d.b)(Wt.a,{className:"AnswerAdd-info",noLink:!0,author:we.h}):n&&n.isOrg?Object(d.b)(Wt.a,{className:"AnswerAdd-info",noLink:!0,author:n}):Object(d.b)(Wt.a,{className:"AnswerAdd-info",noLink:!0,author:n,children:Object(d.b)(j.Text,{color:"GBK04A",children:Object(d.b)(Ge,{questionId:t.id,currentUser:n})})})};function kr(e){var t=e.question,n=e.handleHistoryVersion,r=e.handleImportDoc,o=Object(h.useRef)();return Object(d.b)(d.a,{children:Object(d.c)(j.Flex,{p:"11px 20px",justifyContent:"space-between",mx:"auto",width:"100%",maxWidth:688,children:[Object(d.b)(Cr,{question:t}),Object(d.c)(j.Flex,{justifyContent:"center",alignItems:"center",p:"7px 12px",height:34,fontSize:14,fontWeight:500,color:"GBL05A",bg:"GBK10A",css:{borderRadius:3},children:[Object(d.c)(W.a,{as:j.Text,zaAction:"Unknown",zaText:"文档导入",zaType:"Button",pr:"8px",css:function(e){return{cursor:"pointer",borderRight:"1px solid ".concat(e.colors.GBK08A)}},onClick:r,children:[Object(d.b)(jr.a,{center:!0,text:!0,css:{marginRight:4}}),"文档导入"]}),Object(d.b)(N.c,{arrowed:!1,toggler:Object(d.b)(T.c,{preset:"plain",onRef:o,children:Object(d.b)(wr.a,{css:{paddingLeft:8,position:"relative",top:1}})}),children:Object(d.b)(W.a,{as:N.b,zaAction:"Unknown",zaText:"历史版本",zaType:"Button",onClick:n,css:{padding:"10px 20px"},children:"历史版本"})})]})]})})}function Sr(){var e=Object(o.a)(["草稿保存于",""]);return Sr=function(){return e},e}function xr(){var e=Object(o.a)(["草稿保存于",""]);return xr=function(){return e},e}function Rr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var Er={allowed:"允许规范转载",need_payment:"允许付费转载",disallowed:"禁止转载"},_r=function(e){Object(s.a)(n,e);var t=Rr(n);function n(e,r){var o;Object(i.a)(this,n),(o=t.call(this,e,r)).editableReady=function(){var e,t,n,r,i=o.props,a=i.reporter,c=i.draft;(null===(e=(t=o).cancelEditableStatscTimeout)||void 0===e||e.call(t),a.reportSuccess(er.editableInit),c)&&(null===(n=(r=o).cancelDraftLoadStatscTimeout)||void 0===n||n.call(r),a.reportSuccess(er.draftLoad))},o.onCompositionStart=function(){o.composition=!0,o.syncDraft.cancel()},o.onCompositionEnd=function(){o.composition=!1,o.prevValue&&o.syncDraft(o.prevValue),o.prevValue=null},o.onChangeContent=function(e){o.loggingDeltaTime||(o.loggingDeltaTime=!0,o.startCompositionTime=Math.floor((new Date).getTime()/1e3)),o.hasEdited=!0,o.setState({content:e,isEmpty:e.isEmpty,isTyping:!0}),o.composition?o.prevValue=e:o.syncDraft(e)},o.onInsertDoc=function(){return o.editable.handleKeyCommand("insert-doc")},o.onAfterChangeContent=function(e){var t=e.getSelection().getIsBackward(),n=document.getSelection();if(n.rangeCount){var r=n.getRangeAt(0).cloneRange();r.collapse(t);var o=r.getBoundingClientRect();if(0===o.height){var i=r.commonAncestorContainer;1===i.nodeType&&(o=i.getBoundingClientRect())}if(0!==o.height){var a=o.bottom-(window.innerHeight-117);a>0&&window.scrollBy(0,a)}}},o.onDeleteDraftModalShow=function(){o.setState({deleteDraftModalShown:!0})},o.onDeleteDraft=function(){var e=o.props,t=e.isReediting,n=e.activeTabKey;t||(n===G.a.videoAnswer?o.editable.clearAllContent():o.editable.reset(),o.setState({draft:"",content:{toHTML:function(){return""}},isEmpty:!0})),o.deleteDraft();var r=o.props.onDeleteDraft;r&&r()},o.onDeleteDraftModalHide=function(){o.setState({deleteDraftModalShown:!1})},o.checkVideoSectionReady=function(e){if(!e)return P.a.alert("没有上传视频，请上传后提交",{title:"无视频"}),!1;var t=e.videoId,n=e.isOriginal;if(t){if("zvideo"===e.type&&null==n)return P.a.alert("没有视频类型，请选择视频为原创或转载后提交",{title:"无视频类型"}),!1}else{var r=o.editable.checkVideoStatus();if(r.isUploading)return P.a.alert("视频上传中，请上传完成后提交",{title:"视频上传中"}),!1;if(r.hasError)return P.a.alert("视频上传失败，请重新上传后提交",{title:"上传失败"}),!1}return!0},o.checkEditorContentReady=function(){return o.editable.hasVideo("upload")?(o.handleError("video-uploading"),!1):o.editable.hasImage("upload")?(o.handleError("image-uploading"),!1):o.editable.hasImage("error")||o.editable.hasVideo("error")&&!o.editable.hasVideo("error-review")?(P.a.alert("草稿中含有上传失败的内容，请更改后重新提交",{title:"上传失败"}),!1):!o.editable.hasVideo("error-review")&&!o.editable.hasVideo("censor")||(P.a.alert("视频中包含未通过审核的信息，请更改后重新提交",{title:"视频未通过审核"}),!1)},o.getSubmitData=function(e,t,n){var r,i=o.state,c=i.reshipmentSettings,s=i.commentPermission,u=i.scheduledPublishAt,l=o.props,f=l.answer,p=l.disclaimers,h=l.settings,b=l.isReediting,v=l.getFormData,m=l.isOffice,g=l.useNewEditorSetting,y={content:t},O=v(),j=O.isDisclaimerChecked,w=O.disclaimerType,C=O.commercialReportInfo,x=O.rewardTagline,R=O.pushActivity,E=O.commentPermission,_=O.reshipmentSettings;if(!b)if(g){var A=o.props.currentUser.caEnabled?"need_payment":"allowed";y.reshipmentSettings=_||A,y.commentPermission=E||"all"}else y.reshipmentSettings=c||"allowed",y.commentPermission=s||"all";if(e)return{content:t,attachment:n,reshipmentSettings:y.reshipmentSettings,commentPermission:y.commentPermission};if(y.rewardSetting={canReward:Boolean(x),tagline:x},p&&p.length&&(!f||h)&&(y.disclaimerStatus=j?"open":"close",y.disclaimerType=w||"none"),m&&(y.commercialReportInfo=C),u){if(Q.a.trackEvent(Object(a.a)(o),{action:"Click",id:5733,name:"回答"}),k.a(u,S.a(new Date,30)))return void P.a.alert(Object(d.b)("div",{style:{textAlign:"center"},children:"只能设置 30 分钟后的定时时间"}),{title:"定时发布"});y.publishAt=Math.floor(u/1e3)+0}return void 0!==R&&(y.pushActivity=R),y.tableOfContentsEnabled=o.editable.hasCatalog(),Object.assign(y,null===(r=o.editable)||void 0===r?void 0:r.getExtraPluginData()),y},o.canSubmit=function(){var e,t,n=null===(e=o.editable)||void 0===e?void 0:e.toHTML(),r=o.isVideoAnswer?null===(t=o.editable)||void 0===t?void 0:t.getAttachment():null;return o.isVideoAnswer?Boolean(r||n):Boolean(n)},o.handleSubmit=o.context.authRequired((function(){var e=o.props.reporter;e.reportRequest(er.addAnswer);try{var t=o.props,n=t.answer,r=t.isReediting,i=t.onSubmit,c=t.showNotification,s=t.question,u=s.id,l=s.questionType,d=t.currentUser,f=t.updateSettingsDisclaimer,p=t.loadLabel,h=t.onCancel;if(!o.editable)return h(),void e.reportSuccess(er.addAnswer);if(!o.canSubmit())return void e.reportSuccess(er.addAnswer);var b=o.editable.toHTML(),v=o.isVideoAnswer?o.editable.getAttachment():null;if(o.isVideoAnswer&&!o.checkVideoSectionReady(v))return void e.reportSuccess(er.addAnswer);if(!o.checkEditorContentReady())return void e.reportSuccess(er.addAnswer);var m=o.getSubmitData(o.isVideoAnswer,b,v);Promise.resolve(i(m)).then((function(){n&&m.disclaimerStatus&&f(n.id,m.disclaimerStatus,m.disclaimerType),n&&p("answer",n.id)})).then((function(){Q.a.trackCardShow(null,{id:7879}),r||Q.a.trackEvent(null,{id:4931,action:"StatusReport"},{module:[{card:{content:[{type:"Answer",parent_token:String(u),author_member_hash_id:d.id}]}}],status:{result:"Success",event:{action:"Submit"}}})})).then((function(){"commercial"===l&&c("已发布！由品牌筛选后进入推荐区。")})).then((function(){e.reportSuccess(er.addAnswer)})).catch((function(t){var n;t.status&&"5"!==(null===(n=t.status)||void 0===n?void 0:n.toString()[0])||(e.reportFail(er.addAnswer),e.reportToSentry(er.addAnswer,t)),r||Q.a.trackEvent(Object(a.a)(o),{id:4931,action:"StatusReport"},{status:{result:"Fail",event:{action:"Submit"}}})}));var g=r?"Edit":"Answer";"Answer"===g&&Q.a.trackEvent(Object(a.a)(o),{id:4930}),Q.a.trackEvent(Object(a.a)(o),{action:g,is_intent:!1})}catch(t){throw e.reportFail(er.addAnswer),e.reportToSentry(er.addAnswer,t),t}})),o.onCancel=function(){var e=o.props.onCancel;o.editable.hasVideo("upload")?o.handleError("video-uploading-draft"):o.editable.hasImage("upload")?o.handleError("image-uploading-draft"):(o.hasEdited&&o.syncDraftImmediately(),e&&e())},o.onFocus=function(){"org"===o.props.question.questionType&&o.shouldAnswerOrgQuestionModalShow&&o.handleAnswerOrgQuestionModalShow(),o.setState({focusing:!0})},o.onFocusWithAuth=function(){return o.onFocusAuthChecked?o.onFocus():(o.onFocusAuthChecked=!0,o.context.authRequired(o.onFocus)())},o.onSelectText=function(e){o.setState({selectedText:e.replace(/\s/g,"")})},o.onLoadStart=function(){o.setState({loadingShown:!0})},o.onLoadEnd=function(){o.setState({loadingShown:!1})},o.handleInsertZVideo=function(){o.setState({showZVideoUploader:!0})},o.getAllInviters=function(){var e=o.props,t=e.question;return(0,e.fetchAllInviters)(t.id)},o.getToolbarSidePlugins=function(){var e=o.state,t=e.isFullscreen,n=e.isLeaveActive;return(!t||n)&&Object(d.b)(M.a,{icon:Object(d.b)(x.a,{text:!0}),className:"AnswerForm-enterFullscreenButton",onClick:o.toggleFullscreen},"enterFullscreen")},o.getToolbarMenuPlugins=function(){var e=o.state.scheduledPublishAt;return Object(d.b)(h.Fragment,{children:o.canUseScheduledPublish&&Object(d.c)(M.c,{onClick:function(){o.setUseScheduledPublish(!e),Q.a.trackEvent(Object(a.a)(o),{action:"Click",id:5730,name:"回答"})},children:[Object(d.b)(R.a,{text:!0}),e?"取消定时发布":"定时发布"]})})},o.setUseScheduledPublish=function(e,t){if(e)if(t)o.setState({scheduledPublishAt:t});else{var n=S.a(new Date,30);o.setState({initialScheduledPublishAt:n,scheduledPublishAt:n})}else P.a.confirm("取消后，当前设定的定时发布将不会生效，确定要取消发布吗？",{title:"取消定时发布",text:{cancel:"我再想想"}}).then((function(){o.setState({scheduledPublishAt:void 0}),Q.a.trackEvent(Object(a.a)(o),{action:"Click",id:5737,name:"回答"})})).catch((function(){Q.a.trackEvent(Object(a.a)(o),{action:"Click",id:5736,name:"回答"})})),Q.a.trackCardShow(Object(a.a)(o),{id:5735,name:"回答"})},o.getEditorState=function(){return o.editable.state.editorState?o.editable.state.editorState:o.editable.getEditorState()},o.toggleFullscreen=function(){var e=o.state.isFullscreen,t=function(){var e=o.scroller.querySelector(".Editable");return e?e.offsetTop:0};o.scrollTop=e?o.scroller.scrollTop-t():Math.max(-o.scroller.getBoundingClientRect().top,0),o.setState({isFullscreen:!e},(function(){o.state.isFullscreen?o.scrollTop>0&&(o.scroller.scrollTop=o.scrollTop+t()):window.scrollTo(0,o.scroller.getBoundingClientRect().top-document.documentElement.getBoundingClientRect().top+o.scrollTop)}))},o.exitFullscreen=function(){o.cloneEditor.resetWithValue(o.getCloneContent());o.fullscreenContent.addEventListener("animationend",(function e(){o.fullscreenContent.removeEventListener("animationend",e),o.setState({isLeaveActive:!1}),o.toggleFullscreen()})),o.setState({isLeaveActive:!0})},o.handleFullscreenRef=function(e){e?V.hide():(V.show(),o.setState({isToolbarSticky:!1}))},o.handleScroll=function(){o.isHandleScrollPending||(o.isHandleScrollPending=!0,requestAnimationFrame((function(){var e=o.state,t=e.isFullscreen,n=e.isToolbarSticky,r=!1;if(t&&o.scroller){var i=o.scroller.querySelector(".Editable-toolbar");r=!!i&&o.scroller.scrollTop===i.offsetTop}r!==n&&o.setState({isToolbarSticky:r}),o.isHandleScrollPending=!1})))},o.handleUploadStart=function(){o.setState({isUploading:!0})},o.handleUploadEnd=function(){o.setState({isUploading:!1})},o.handleUploadError=function(e,t){switch(t){case"video":o.handleError("video-upload-error");break;case"image":o.handleError("image-upload-error",e)}},o.handleAnswerOrgQuestionModalShow=function(){o.setState({answerModalShown:!0}),o.shouldAnswerOrgQuestionModalShow=!1},o.handleAnswerModalHide=function(){o.setState({answerModalShown:!1})},o.syncDraftImmediately=o.props.reporter.reportFailFromFunc(er.draftSave,(function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.state.content,n=o.props.reporter,r=t.toHTML(),i=o.state.lastUpdatedTime,c=Math.floor((new Date).getTime()/1e3);e=!i||o.startCompositionTime-i>180?c-o.startCompositionTime:c-i,o.setState({isTyping:!1});var s,u=o.props.answer,l=(u=void 0===u?{}:u).attachment;s=o.videoAnswerEditable||"zvideo"===(null==l?void 0:l.type)?"video_answer":"video"===(null==l?void 0:l.type)?"video_answer_v2":"normal";var d=o.isVideoAnswer?t.getAttachment():null,f=o.isVideoAnswer?Boolean(d||r):Boolean(r);f?n.reportAllFromPromise(er.draftSave,o.updateDraft(r,e,s,d).then((function(e){e.payload&&e.payload.updatedTime&&o.setState({lastUpdatedTime:e.payload.updatedTime}),o.loggingDeltaTime=!1,delete o.startCompositionTime})).then((function(){Q.a.trackEvent(Object(a.a)(o),{action:"AutoSave"})}))):(o.deleteDraft(),n.reportSuccess(er.draftSave))})),o.syncDraft=Object(q.a)(o.syncDraftImmediately,2e3),o.updateDraft=function(){for(var e=o.props,t=e.question.id,n=e.draft,r=e.addDraft,i=e.updateDraft,a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return n?i.apply(void 0,[t].concat(c)):r.apply(void 0,[t].concat(c))},o.focus=function(){o.editable&&o.editable.focus()},o.hasVideo=function(){return!!o.editable&&o.editable.hasVideo()},o.hasADLinkCard=function(){return!!o.editable&&o.editable.hasADLinkCard()},o.hasFeeConsultCard=function(){return!!o.editable&&o.editable.hasFeeConsultCard()},o.hasMCNLinkCard=function(){return!!o.editable&&o.editable.hasMCNLinkCard()},o.hasCommercialReport=function(){var e=o.props.getFormData().commercialReportInfo;return null==e?void 0:e.isReport},o.handleChangeCommentPermission=function(e,t){var n=void 0===t?e:t;o.setState({commentPermission:n})},o.handleReshipmentSettings=function(e){"need_payment"!==e||o.props.currentUser.caEnabled||window.open("/copyright/invite"),o.setState({reshipmentSettings:e})},o.handleError=function(e,t){Object(fe.b)(e,t,o.props.showNotification)},o.handleBeforeVideoUpload=function(){var e=o.props.question;return!e.relationship||!e.relationship.isAnonymous},o.handleReverted=function(e){o.editable.resetWithValue(e.draft.content)},o.getDraftStatus=function(){var e=o.props.draft,t=o.state,n=t.isTyping,r=t.dateNow;return e?e.updating||n?"草稿保存中…":e.updated&&r<1e3*e.updatedTime+6e4?"草稿已保存":e.updateFailed?Object(d.b)("span",{className:"AnswerForm-draftStatus--failed",children:"草稿保存失败"}):C()(xr(),Object(z.toRelativeString)(e.updatedTime)):""},o.handleSettingExpand=function(){var e=o.state.settingExpanded;o.setState({settingExpanded:!e},(function(){var t=o.expandedSettingsRef;if(o.state.isFullscreen){o.scroller.scrollTo(0,e?-(null==t?void 0:t.offsetTop):null==t?void 0:t.offsetTop)}else{var n=o.expandedSettingsRef;window.scrollTo(0,e?-(null==n?void 0:n.offsetTop):null==n?void 0:n.offsetTop)}e&&o.focus()}))},o.handleEditGGRCard=function(e){var t=e.type,n=e.payload,r=o.state.mcnEditingGood,i=o.props.updateLinkCard;"goodsEditor/submitNewGoodsInfo"!==t?"goodsEditor/closeGoodsEditor"!==t||o.setState({mcnEditingGood:null}):i(Object.assign({},r,{title:null==n?void 0:n.title})).finally((function(){o.setState({mcnEditingGood:null}),o.editable.handleCommand("edit-mcn-link-card:".concat(r.id))}))},o.showDraftHistoryModal=function(){o.editable.handleCommand("toggle-draft-history-modal")},o.createEditorPlugins=function(){var e;return[Tt({type:"question",id:o.props.question.id,syncDraft:o.syncDraft}),Xt({getShouldShowToolbarButton:function(){return!o.isVideoAnswer},getAllInviters:o.getAllInviters,inviterQuery:o.props.inviterQuery,getInitialThankInviterInfo:function(){return o.props.thankInviterInfo}}),Ft({shouldDisabled:function(){return o.props.question.relationship.isAnonymous},shouldShow:function(){return o.props.showUserProfitButton&&!o.isVideoAnswer},getContentInfo:function(){var e;return{type:"answer",id:null===(e=o.props.answer)||void 0===e?void 0:e.id}}}),Kt(),Wn({questionId:null===(e=o.props.question)||void 0===e?void 0:e.id})]},o.renderRichInput=function(){var e=o.props,t=e.useNewEditorSetting,n=e.answer,r=(n=void 0===n?{}:n).attachment,i=e.answer,a=e.question,c=e.isReediting,s=e.isPuQuestion,u=e.draft,l=e.defaultValue,f=o.state,p=f.isToolbarSticky,h=f.isFullscreen,b=f.toolbarMenuAttention,v=f.scheduledPublishAt,m=f.initialScheduledPublishAt,g="".concat(c?"修改":"写","回答...");if("commercial"===a.questionType&&!s){g="这是一个「".concat("品牌提问","」，请在回答前了解：「").concat("品牌提问","」由品牌方管理，回答由品牌方筛选后展示，传播与社区提问有所区别。回答著作权归作者所有。")}o.isVideoAnswer&&(g="详细介绍下视频（选填）");var y,O=o.videoAnswerEditable||"video_answer"===(null==u?void 0:u.type)||"zvideo"===(null==r?void 0:r.type);if(u)y=u.attachment;else if("zvideo"===(null==r?void 0:r.type))y=r.zvideo;else if("video"===(null==r?void 0:r.type)){var j;y=Object.assign({},null===(j=r.video)||void 0===j?void 0:j.videoInfo,{videoId:r.attachmentId})}var w={isToolbarSticky:p,useNewEditorSetting:t,ref:function(e){return o.editable=e},answer:i,question:a,isFullscreen:h,toolbarMenuAttention:b,scheduledPublishAt:v,initialScheduledPublishAt:m,placeholder:g,draft:u,defaultValue:l,isLegacyVideoAnswer:O,defaultVideo:y,videoAnswerEditable:o.videoAnswerEditable,videoAnswerPublished:o.videoAnswerPublished,editableReady:o.editableReady,handleChangeContent:o.onChangeContent,handleAfterChangeContent:o.onAfterChangeContent,handleFocusWithAuth:o.onFocusWithAuth,handleSelectText:o.onSelectText,handleSubmit:o.handleSubmit,handleError:o.handleError,handleLoadStart:o.onLoadStart,handleLoadEnd:o.handleLoadEnd,handleUploadStart:o.handleUploadStart,handleUploadEnd:o.handleUploadEnd,handleUploadError:o.handleUploadError,handleBeforeVideoUpload:o.handleBeforeVideoUpload,handleMCNLinkCardEdit:function(e,t){o.setState({mcnEditingGood:t})},isVideoAnswer:o.isVideoAnswer,handleInsertZVideo:o.handleInsertZVideo,getToolbarSidePlugins:o.getToolbarSidePlugins,createEditorPlugins:o.createEditorPlugins,getToolbarMenuPlugins:o.getToolbarMenuPlugins,getEditorBeforePlugins:o.getEditorBeforePlugins,setUseScheduledPublish:o.setUseScheduledPublish};return Object(d.b)(nr,Object.assign({},w))};var c=o.props,s=c.defaultValue,u=c.draft,l=u?u.editableContent:s,f=u?u.updatedTime:0;return o.state={draft:l,content:{toHTML:function(){return""}},isEmpty:!l,isTyping:!1,reshipmentSettings:null,commentPermission:null,answerModalShown:!1,focusing:!1,selectedText:null,loadingShown:!1,isUploading:!1,rewardNotication:!0,checked:e.isRewardable,isFullscreen:!1,isToolbarSticky:!1,isLeaveActive:!1,toolbarMenuAttention:null,dateNow:0,rewardModalShown:!1,lastUpdatedTime:f,showZVideoUploader:!1,mcnEditingGood:null,initialScheduledPublishAt:void 0,scheduledPublishAt:void 0,thankInviterInfo:e.thankInviterInfo||e.inviterFromNotification,footerPositionStatus:"",settingExpanded:!1},o.hasEdited=!1,o}return Object(c.a)(n,[{key:"canUseScheduledPublish",get:function(){var e=this.props,t=e.currentUser,n=e.isReediting,r=e.activeTabKey;return t&&t.autoSendingCreations&&r===G.a.textAnswer&&!n}}]),Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.reporter,o=t.draft;n.reportRequest(er.editableInit),this.cancelEditableStatscTimeout=n.reportFailAfterTimeout(er.editableInit),o&&(n.reportRequest(er.draftLoad),this.cancelDraftLoadStatscTimeout=n.reportFailAfterTimeout(er.draftLoad)),this.shouldAnswerOrgQuestionModalShow=!Y.getKnown(),this.onFocusAuthChecked=!1;var i=this.props,a=i.fillCurrentUserIfNeeded,c=i.getUserProfitPermission,s=a(["lastCommentPermission","caEnabled","autoSendingCreations","mcn_user_info"]);c(),Promise.resolve(s).then((function(){ne.a.getActionsByNames(["a_draft_history",e.canUseScheduledPublish&&"auto_pub_answer"].filter(Boolean)).then((function(t){var n=Object(r.a)(t,1)[0];n&&(e.setState({toolbarMenuAttention:n.description}),ne.a.markAsShown(n),"auto_pub_answer"===n.guide_name&&Q.a.trackCardShow(e,{id:5738}))})),Q.a.trackCardShow(e,{id:5729,name:"回答"})})),document.addEventListener("compositionstart",this.onCompositionStart),document.addEventListener("compositionend",this.onCompositionEnd),window.onbeforeunload=function(){return e.state.isUploading||e.composition||e.syncDraft.pending()||e.props.draft&&e.props.draft.updating?"草稿尚未保存完毕，确定离开此页？":void 0},this.setState({dateNow:Date.now()}),this.reRenderTimer=setInterval((function(){return e.setState({dateNow:Date.now()})}),6e4);var u=this.props,l=u.answer,d=u.settings,f=u.loadSettings;l&&!d&&f(l.id),this.props.imperativeRef&&(this.props.imperativeRef.current={focus:this.focus.bind(this),hasVideo:this.hasVideo.bind(this),hasADLinkCard:this.hasADLinkCard.bind(this),hasMCNLinkCard:this.hasMCNLinkCard.bind(this),hasFeeConsultCard:this.hasFeeConsultCard.bind(this),toggleFullscreen:this.toggleFullscreen,hasCommercialReport:this.hasCommercialReport,hasEditorContent:function(){return!e.state.isEmpty}})}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.reporter,n=this.state,r=e.currentUser,o={};if(n.reshipmentSettings||void 0===r.caEnabled||(o.reshipmentSettings=r.caEnabled?"need_payment":"allowed"),n.commentPermission||void 0===r.lastCommentPermission||(o.commentPermission=r.lastCommentPermission),Object.keys(o).length&&this.setState(o),!this.draftLoaded&&!this.state.draft&&!this.props.draft&&e.draft){t.reportRequest(er.draftLoad);var i=e.draft.editableContent;i&&(this.setState({draft:i,isEmpty:!i}),this.editable&&!this.editable.toHTML()&&this.editable.resetWithValue(i)),t.reportSuccess(er.draftLoad),this.draftLoaded=!0}}},{key:"componentDidUpdate",value:function(e){var t=this,n=this.state,r=n.focusing,o=n.thankInviterInfo,i=this.props,a=i.tagline,c=i.inviterFromNotification;if(a){var s=F.a.get("rewardNotication");r&&!s&&(this.setState({rewardNotication:!1}),F.a.set("rewardNotication",!0),this.timeout=setTimeout((function(){t.setState({rewardNotication:!0})}),2e3))}o||!c||e.inviterFromNotification||this.setState({thankInviterInfo:c})}},{key:"componentWillUnmount",value:function(){this.syncDraft.cancel(),document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd),window.onbeforeunload=null,this.timeout&&clearTimeout(this.timeout),this.reRenderTimer&&clearInterval(this.reRenderTimer),this.props.imperativeRef&&(this.props.imperativeRef.current=null)}},{key:"getCloneContent",value:function(){return this.getEditorState().getCurrentContent()}},{key:"deleteDraft",value:function(){var e=this.props,t=e.question,n=e.draft,r=e.deleteDraft;n&&r(t.id)}},{key:"renderReshipmentSettings",value:function(e){var t=this;return Object.keys(Er).map((function(n){return Object(d.b)(I.a,{onClick:function(){return t.handleReshipmentSettings(n)},checked:n===e,children:Er[n]},n)}))}},{key:"renderFooter",value:function(){var e=this,t=this.props,n=t.draft,r=t.isReediting,o=t.question.commercial,i=t.answer,a=t.question,c=t.useNewEditorSetting,s=t.handleToggleAnonymous,u=this.state,l=u.commentPermission,f=u.focusing,p=u.isEmpty,h=u.isTyping,b=u.isFullscreen,v=u.loadingShown,m=u.reshipmentSettings,g=u.selectedText,y=u.dateNow,j=u.scheduledPublishAt,w=null;if(v)w=Object(d.b)(L.a,{count:3});else if(g)w="".concat(g.length," 个字");else if(n){var k=null;k=n.updating||h?"草稿保存中…":n.updated&&y<1e3*n.updatedTime+6e4?"草稿已保存":n.updateFailed?Object(d.b)("span",{className:"AnswerForm-draftStatus--failed",children:"草稿保存失败"}):C()(Sr(),Object(z.toRelativeString)(n.updatedTime)),w=Object(d.c)("div",{children:[Object(d.b)(T.c,{preset:"plain",className:"AnswerForm-delete","aria-label":"删除草稿","data-tooltip":"删除草稿",onClick:this.onDeleteDraftModalShow,icon:E.a}),k]})}else o&&o.tip&&o.tip.message&&(w=o.tip.message);var S=Object(d.b)("div",{className:O()("AnswerForm-footer",{"AnswerForm-footer--hidden":!b&&!f&&p,useNewEditorSetting:c}),children:c?Object(d.c)(d.a,{children:[Object(d.b)(at,{question:a,answer:i,isVideoAnswer:this.isVideoAnswer,handleToggleAnonymous:s,isFullScreen:b,positionStatus:this.state.footerPositionStatus,isReediting:r,setScheduledPublish:this.setUseScheduledPublish,canScheduledPublish:this.canUseScheduledPublish,handleExpand:this.handleSettingExpand,settingExpanded:this.state.settingExpanded}),Object(d.b)(st,{isFullScreen:b,type:"answer",questionId:a.id,textCount:null==g?void 0:g.length,draftStatus:this.getDraftStatus(),removeDraft:this.onDeleteDraftModalShow,isReediting:r,scheduledPublishAt:j,onCancelEdit:this.onCancel,draft:n,handleSubmit:this.handleSubmit,canSubmit:this.canSubmit()})]}):Object(d.c)(d.a,{children:[Object(d.c)("div",{className:"AnswerForm-footerContent AnswerForm-container",children:[Object(d.b)("div",{className:"AnswerForm-status",children:w}),Object(d.c)("div",{className:"AnswerForm-footerRight",children:[r?Object(d.b)("a",{className:"AnswerForm-cancel",onClick:this.onCancel,children:n?"保存草稿并离开":"取消"}):Object(d.c)(N.c,{toggler:Object(d.b)(T.c,{preset:"plain",onRef:function(t){e.settingsTogglerEl=t},icon:_.a,label:"设置"}),reversed:!0,menuClassName:"AnswerItem-selfMenu",itemClassName:"AnswerItem-selectMenuItem",children:[this.renderReshipmentSettings(m),Object(d.b)(N.a,{}),Object(d.b)(re.c,{onChange:this.handleChangeCommentPermission,current:l})]}),Object(d.b)(T.c,{className:"AnswerForm-submit",preset:"primary",color:"blue",onClick:this.handleSubmit,children:r?"提交修改":j?"定时发送":"提交回答"})]})]}),!this.isVideoAnswer&&Object(d.b)(Or,{answer:i,question:a})]})});return!b?Object(d.b)(D.a,{bottom:!0,container:function(){return e.form},children:S}):S}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.isReediting,o=t.question,i=t.currentUser,a=t.answer,c=t.answer,s=(c=void 0===c?{}:c).answerType,u=t.activeTabKey,l=t.handleTabChange,f=t.useNewEditorSetting,p=this.state,b=p.deleteDraftModalShown,v=p.isFullscreen,m=p.isLeaveActive,g=p.showZVideoUploader,y=p.mcnEditingGood;return Object(d.b)(U.a,{module:"AnswerEditView",content:{type:"Answer",parent_token:String(o.id),author_member_hash_id:i.id},children:Object(d.c)("form",{ref:function(t){e.form=t},className:O()("AnswerForm",n),onSubmit:function(e){return e.preventDefault()},noValidate:!0,children:[v&&Object(d.b)("div",{className:O()("AnswerForm-fullscreenBackdrop",{isLeaveActive:m})}),Object(d.c)("div",{className:O()({"AnswerForm-fullscreenContent":v,isLeaveActive:m}),ref:function(t){return e.fullscreenContent=t},children:[f&&v&&Object(d.c)(j.Box,{bg:"GBK99A",css:{position:"relative",boxShadow:"0 0 32px rgba(0, 0, 0, 0.06);"},children:[Object(d.b)("div",{className:"AnswerForm-container",ref:this.handleFullscreenRef,children:Object(d.c)(j.Flex,{justifyContent:"space-between",alignItems:"center",children:[r?Object(d.b)(j.Box,{fontSize:15,fontWeight:"bold",lineHeight:"21px",color:"GBK03A",children:this.videoAnswerPublished?"本回答为视频回答":"本回答为图文回答"}):Object(d.b)(G.b,{activeTabKey:u,onChange:l}),Object(d.c)(W.a,{as:j.Flex,zaAction:"Unknown",zaText:"退出全屏编辑",zaType:"Button",aliginItem:"center",fontSize:14,color:"GBL05A",lineHeight:"55px",onClick:this.toggleFullscreen,css:{cursor:"pointer"},children:[Object(d.b)(j.Text,{mr:"10px",children:"退出全屏编辑"}),Object(d.b)(A.a,{text:!0,center:!0})]})]})}),Object(d.b)(kr,{question:o,handleImportDoc:this.onInsertDoc,handleHistoryVersion:this.showDraftHistoryModal})]}),Object(d.c)("div",{className:O()({"AnswerForm-fullscreenScroller":v,useNewEditorSetting:f}),ref:function(t){return e.scroller=t},onScroll:this.handleScroll,children:[v&&!f&&Object(d.c)("div",{className:"AnswerForm-container",ref:this.handleFullscreenRef,children:[Object(d.b)("div",{className:"AnswerForm-title",children:o.title}),r?this.videoAnswerPublished?Object(d.b)("div",{css:function(e){return{padding:"4px 0 20px 20px",fontWeight:"bold",fontSize:15,lineHeight:"21px",color:e.colors.GBK03A}},children:"本回答为视频回答"}):null:Object(d.b)(G.b,{activeTabKey:u,onChange:l})]}),f&&!v&&Object(d.b)(kr,{question:o,handleImportDoc:this.onInsertDoc,handleHistoryVersion:this.showDraftHistoryModal}),v&&!f&&Object(d.c)(T.c,{className:"AnswerForm-exitFullscreenButton",onClick:this.exitFullscreen,onMouseDown:function(e){return e.preventDefault()},children:[Object(d.b)(A.a,{text:!0,center:!0})," 退出全屏"]}),this.renderRichInput(),f&&Object(d.b)("div",{ref:function(t){e.expandedSettingsRef=t},children:Object(d.b)(at,{inEditor:!0,question:o,answer:a,isVideoAnswer:this.isVideoAnswer,handleToggleAnonymous:this.props.handleToggleAnonymous,isReediting:r,setScheduledPublish:this.setUseScheduledPublish,canScheduledPublish:this.canUseScheduledPublish,handleExpand:this.handleSettingExpand,settingExpanded:this.state.settingExpanded,isFullScreen:v})})]}),this.renderFooter()]}),v&&Object(h.cloneElement)(this.renderRichInput(),{readOnly:!0,className:"AnswerForm-cloneEditor",defaultValue:this.getCloneContent(),allowToolbarSticky:!1,toolbarMenuAttention:null,ref:function(t){return e.cloneEditor=t}}),"org"===o.questionType&&Object(d.b)(Y,{shown:this.state.answerModalShown,onClose:this.handleAnswerModalHide}),"commercial"===o.questionType&&Object(d.b)(X,{shown:this.state.answerModalShown,onClose:this.handleAnswerModalHide}),Object(d.b)(ut.a,{title:"清除草稿",subtitle:r?"你确定要清除保存的草稿并取消编辑吗？":"你确定要清除保存的草稿吗？",shown:b,onCancel:this.onDeleteDraftModalHide,onSubmit:this.onDeleteDraft}),g&&Object(d.b)(te,{show:g,enableZVideoListSelectorEntry:!0,showFooter:!0,type:"insert",onClose:function(){e.setState({showZVideoUploader:!1})},onSubmit:function(t){e.setState({showZVideoUploader:!1}),e.editable.handleCommand("insert-zvideo-card:".concat(JSON.stringify(t)))}}),Object(d.b)(H.b,{className:"AnswerForm-MCNEditor",title:"编辑商品",onClose:function(){e.setState({mcnEditingGood:null})},children:Boolean(y)&&Object(d.b)(K.a,{className:"AnswerForm-MCNEditorIframe",src:"https://www.zhihu.com/selection/goods-editor?title=".concat(y.title,"&originTitle=").concat(y.originTitle,"&source=").concat(y.source,"&sourceId=").concat(y.sourceId,"&productTypeName=").concat(y.productTypeName),onMessage:this.handleEditGGRCard})}),Object(d.b)(dt,{onClose:function(){e.props.onCancel()},shown:"slideshow"===s})]})})}},{key:"videoAnswerPublished",get:function(){var e=this.props.answer,t=(e=void 0===e?{}:e).attachment;return["zvideo","video"].includes(null==t?void 0:t.type)}},{key:"videoAnswerEditable",get:function(){return this.props.activeTabKey===G.a.videoAnswer}},{key:"isVideoAnswer",get:function(){return this.videoAnswerPublished||this.videoAnswerEditable}}]),n}(h.Component);_r.propTypes={activeTabKey:p.a.string,handleTabChange:p.a.func,question:p.a.object,isReediting:p.a.bool,defaultValue:p.a.string,getFormData:p.a.func,reporter:p.a.object},_r.defaultProps={isReediting:!1},_r.contextTypes={authRequired:p.a.func};var Ar={addDraft:ae.b,updateDraft:ae.ib,deleteDraft:ae.j,showNotification:ue.h,fillCurrentUserIfNeeded:le.e,loadSettings:ce.x,updateSettingsDisclaimer:ce.L,loadLabel:se.e,getUserProfitPermission:oe.b,updateLinkCard:ie.c,fetchAllInviters:ae.o},Tr=Object(m.compose)(g.withRouter,Object(v.connect)((function(e,t){var n,r,o=e.entities,i=o.questions,a=o.drafts,c=void 0===a?{}:a,s=e.question,u=t.location.query.inviter,l=Object(le.b)(e),d=Object(ae.d)(e,t.question.id),f=u&&(null==d||null===(n=d.find)||void 0===n?void 0:n.call(d,(function(e){return e.id===u})));return{question:i[t.question.id]||t.question,draft:c["question_".concat(t.question.id)],currentUser:l,isPuQuestion:Boolean(s&&s.brand&&s.brand.isPuQuestion),disclaimers:s.disclaimers[t.question.id],settings:t.answer?e.answers.settings[t.answer.id]:null,showUserProfitButton:e.userProfit.permission.visible,thankInviterInfo:null===(r=Object(se.c)(e,t.answer))||void 0===r?void 0:r.thankInviterInfo,allInviters:d,inviterQuery:u,inviterFromNotification:f,isOffice:Object(de.e)(e),useNewEditorSetting:"1"===Object(de.a)(e,"editor")}}),Ar),Ae,Gn.e)(_r)},function(e,t,n){"use strict";n.d(t,"a",(function(){return G}));var r=n(407),o={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function i(e){return function(t){var n=t||{},r=n.width?String(n.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}var a={date:i({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:i({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:i({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},c={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function s(e){return function(t,n){var r,o=n||{};if("formatting"===(o.context?String(o.context):"standalone")&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,a=o.width?String(o.width):i;r=e.formattingValues[a]||e.formattingValues[i]}else{var c=e.defaultWidth,s=o.width?String(o.width):e.defaultWidth;r=e.values[s]||e.values[c]}return r[e.argumentCallback?e.argumentCallback(t):t]}}function u(e){return function(t,n){var r=String(t),o=n||{},i=o.width,a=i&&e.matchPatterns[i]||e.matchPatterns[e.defaultMatchWidth],c=r.match(a);if(!c)return null;var s,u=c[0],l=i&&e.parsePatterns[i]||e.parsePatterns[e.defaultParseWidth];return s="[object Array]"===Object.prototype.toString.call(l)?function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}(l,(function(e){return e.test(u)})):function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}(l,(function(e){return e.test(u)})),s=e.valueCallback?e.valueCallback(s):s,{value:s=o.valueCallback?o.valueCallback(s):s,rest:r.slice(u.length)}}}var l,d={code:"en-US",formatDistance:function(e,t,n){var r;return n=n||{},r="string"==typeof o[e]?o[e]:1===t?o[e].one:o[e].other.replace("{{count}}",t),n.addSuffix?n.comparison>0?"in "+r:r+" ago":r},formatLong:a,formatRelative:function(e,t,n,r){return c[e]},localize:{ordinalNumber:function(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:s({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:s({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return Number(e)-1}}),month:s({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:s({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:s({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(l={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e,t){var n=String(e),r=t||{},o=n.match(l.matchPattern);if(!o)return null;var i=o[0],a=n.match(l.parsePattern);if(!a)return null;var c=l.valueCallback?l.valueCallback(a[0]):a[0];return{value:c=r.valueCallback?r.valueCallback(c):c,rest:n.slice(i.length)}}),era:u({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:u({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:u({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:u({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:u({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}},f=n(413),p=n(75),h=n(414),b=n(58);function v(e){Object(b.a)(1,arguments);var t=1,n=Object(p.a)(e),r=n.getUTCDay(),o=(r<t?7:0)+r-t;return n.setUTCDate(n.getUTCDate()-o),n.setUTCHours(0,0,0,0),n}function m(e){Object(b.a)(1,arguments);var t=Object(p.a)(e),n=t.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var o=v(r),i=new Date(0);i.setUTCFullYear(n,0,4),i.setUTCHours(0,0,0,0);var a=v(i);return t.getTime()>=o.getTime()?n+1:t.getTime()>=a.getTime()?n:n-1}function g(e){Object(b.a)(1,arguments);var t=m(e),n=new Date(0);n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0);var r=v(n);return r}var y=n(174);function O(e,t){Object(b.a)(1,arguments);var n=t||{},r=n.locale,o=r&&r.options&&r.options.weekStartsOn,i=null==o?0:Object(y.a)(o),a=null==n.weekStartsOn?i:Object(y.a)(n.weekStartsOn);if(!(a>=0&&a<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var c=Object(p.a)(e),s=c.getUTCDay(),u=(s<a?7:0)+s-a;return c.setUTCDate(c.getUTCDate()-u),c.setUTCHours(0,0,0,0),c}function j(e,t){Object(b.a)(1,arguments);var n=Object(p.a)(e,t),r=n.getUTCFullYear(),o=t||{},i=o.locale,a=i&&i.options&&i.options.firstWeekContainsDate,c=null==a?1:Object(y.a)(a),s=null==o.firstWeekContainsDate?c:Object(y.a)(o.firstWeekContainsDate);if(!(s>=1&&s<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var u=new Date(0);u.setUTCFullYear(r+1,0,s),u.setUTCHours(0,0,0,0);var l=O(u,t),d=new Date(0);d.setUTCFullYear(r,0,s),d.setUTCHours(0,0,0,0);var f=O(d,t);return n.getTime()>=l.getTime()?r+1:n.getTime()>=f.getTime()?r:r-1}function w(e,t){Object(b.a)(1,arguments);var n=t||{},r=n.locale,o=r&&r.options&&r.options.firstWeekContainsDate,i=null==o?1:Object(y.a)(o),a=null==n.firstWeekContainsDate?i:Object(y.a)(n.firstWeekContainsDate),c=j(e,t),s=new Date(0);s.setUTCFullYear(c,0,a),s.setUTCHours(0,0,0,0);var u=O(s,t);return u}var C=n(127),k="midnight",S="noon",x="morning",R="afternoon",E="evening",_="night";function A(e,t){var n=e>0?"-":"+",r=Math.abs(e),o=Math.floor(r/60),i=r%60;if(0===i)return n+String(o);var a=t||"";return n+String(o)+a+Object(C.a)(i,2)}function T(e,t){return e%60==0?(e>0?"-":"+")+Object(C.a)(Math.abs(e)/60,2):N(e,t)}function N(e,t){var n=t||"",r=e>0?"-":"+",o=Math.abs(e);return r+Object(C.a)(Math.floor(o/60),2)+n+Object(C.a)(o%60,2)}var I={G:function(e,t,n){var r=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){var r=e.getUTCFullYear(),o=r>0?r:1-r;return n.ordinalNumber(o,{unit:"year"})}return h.a.y(e,t)},Y:function(e,t,n,r){var o=j(e,r),i=o>0?o:1-o;if("YY"===t){var a=i%100;return Object(C.a)(a,2)}return"Yo"===t?n.ordinalNumber(i,{unit:"year"}):Object(C.a)(i,t.length)},R:function(e,t){var n=m(e);return Object(C.a)(n,t.length)},u:function(e,t){var n=e.getUTCFullYear();return Object(C.a)(n,t.length)},Q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Object(C.a)(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Object(C.a)(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){var r=e.getUTCMonth();switch(t){case"M":case"MM":return h.a.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){var r=e.getUTCMonth();switch(t){case"L":return String(r+1);case"LL":return Object(C.a)(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){var o=function(e,t){Object(b.a)(1,arguments);var n=Object(p.a)(e),r=O(n,t).getTime()-w(n,t).getTime();return Math.round(r/6048e5)+1}(e,r);return"wo"===t?n.ordinalNumber(o,{unit:"week"}):Object(C.a)(o,t.length)},I:function(e,t,n){var r=function(e){Object(b.a)(1,arguments);var t=Object(p.a)(e),n=v(t).getTime()-g(t).getTime();return Math.round(n/6048e5)+1}(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):Object(C.a)(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):h.a.d(e,t)},D:function(e,t,n){var r=function(e){Object(b.a)(1,arguments);var t=Object(p.a)(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var r=t.getTime(),o=n-r;return Math.floor(o/864e5)+1}(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):Object(C.a)(r,t.length)},E:function(e,t,n){var r=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){var o=e.getUTCDay(),i=(o-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return Object(C.a)(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(o,{width:"short",context:"formatting"});case"eeee":default:return n.day(o,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){var o=e.getUTCDay(),i=(o-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return Object(C.a)(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(o,{width:"narrow",context:"standalone"});case"cccccc":return n.day(o,{width:"short",context:"standalone"});case"cccc":default:return n.day(o,{width:"wide",context:"standalone"})}},i:function(e,t,n){var r=e.getUTCDay(),o=0===r?7:r;switch(t){case"i":return String(o);case"ii":return Object(C.a)(o,t.length);case"io":return n.ordinalNumber(o,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){var r,o=e.getUTCHours();switch(r=12===o?S:0===o?k:o/12>=1?"pm":"am",t){case"b":case"bb":case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,n){var r,o=e.getUTCHours();switch(r=o>=17?E:o>=12?R:o>=4?x:_,t){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){var r=e.getUTCHours()%12;return 0===r&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return h.a.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):h.a.H(e,t)},K:function(e,t,n){var r=e.getUTCHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):Object(C.a)(r,t.length)},k:function(e,t,n){var r=e.getUTCHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):Object(C.a)(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):h.a.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):h.a.s(e,t)},S:function(e,t){return h.a.S(e,t)},X:function(e,t,n,r){var o=(r._originalDate||e).getTimezoneOffset();if(0===o)return"Z";switch(t){case"X":return T(o);case"XXXX":case"XX":return N(o);case"XXXXX":case"XXX":default:return N(o,":")}},x:function(e,t,n,r){var o=(r._originalDate||e).getTimezoneOffset();switch(t){case"x":return T(o);case"xxxx":case"xx":return N(o);case"xxxxx":case"xxx":default:return N(o,":")}},O:function(e,t,n,r){var o=(r._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+A(o,":");case"OOOO":default:return"GMT"+N(o,":")}},z:function(e,t,n,r){var o=(r._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+A(o,":");case"zzzz":default:return"GMT"+N(o,":")}},t:function(e,t,n,r){var o=r._originalDate||e,i=Math.floor(o.getTime()/1e3);return Object(C.a)(i,t.length)},T:function(e,t,n,r){var o=(r._originalDate||e).getTime();return Object(C.a)(o,t.length)}};function M(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}}function D(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}}var L={p:D,P:function(e,t){var n,r=e.match(/(P+)(p+)?/),o=r[1],i=r[2];if(!i)return M(e,t);switch(o){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;case"PPPP":default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",M(o,t)).replace("{{time}}",D(i,t))}},P=n(213),z=["D","DD"],B=["YY","YYYY"];function F(e){return-1!==z.indexOf(e)}function U(e){return-1!==B.indexOf(e)}function q(e,t,n){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"))}var V=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,H=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,K=/^'([^]*?)'?$/,Q=/''/g,W=/[a-zA-Z]/;function G(e,t,n){Object(b.a)(2,arguments);var o=String(t),i=n||{},a=i.locale||d,c=a.options&&a.options.firstWeekContainsDate,s=null==c?1:Object(y.a)(c),u=null==i.firstWeekContainsDate?s:Object(y.a)(i.firstWeekContainsDate);if(!(u>=1&&u<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var l=a.options&&a.options.weekStartsOn,h=null==l?0:Object(y.a)(l),v=null==i.weekStartsOn?h:Object(y.a)(i.weekStartsOn);if(!(v>=0&&v<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!a.localize)throw new RangeError("locale must contain localize property");if(!a.formatLong)throw new RangeError("locale must contain formatLong property");var m=Object(p.a)(e);if(!Object(r.a)(m))throw new RangeError("Invalid time value");var g=Object(P.a)(m),O=Object(f.a)(m,g),j={firstWeekContainsDate:u,weekStartsOn:v,locale:a,_originalDate:m},w=o.match(H).map((function(e){var t=e[0];return"p"===t||"P"===t?(0,L[t])(e,a.formatLong,j):e})).join("").match(V).map((function(n){if("''"===n)return"'";var r=n[0];if("'"===r)return Z(n);var o=I[r];if(o)return!i.useAdditionalWeekYearTokens&&U(n)&&q(n,t,e),!i.useAdditionalDayOfYearTokens&&F(n)&&q(n,t,e),o(O,n,a.localize,j);if(r.match(W))throw new RangeError("Format string contains an unescaped latin alphabet character `"+r+"`");return n})).join("");return w}function Z(e){return e.match(K)[1].replace(Q,"'")}},function(e,t,n){"use strict";var r=n(32),o=n(13),i=n(14),a=n(15),c=n(16),s=n(9),u=n(2),l=n(3),d=n.n(l),f=n(1),p=n(74),h=n(25),b=n(120),v=n(151),m=n(101),g=n(30),y=n(376),O=n(20),j=n.n(O),w=n(21),C=n.n(w),k=n(22),S=n.n(k),x=n(23),R=n.n(x),E=n(17),_=n.n(E),A=n(1365),T=n(11),N=n.n(T),I=n(5);function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var o=_()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return R()(this,n)}}var D=function(e){S()(n,e);var t=M(n);function n(){var e;j()(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).handleChange=function(t){e.props.onChange(t)},e}return C()(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.children,r=e.name,o=e.type,i=e.value,a=e.checked,c=JSON.stringify(i);return Object(I.g)("label",{className:N()("CheckItem",t)},Object(I.g)("input",{className:"CheckItem-input",type:o,name:r,value:c,onChange:this.handleChange,checked:a}),Object(I.g)("div",{className:"CheckItem-box"},Object(I.g)("div",{className:"CheckItem-inner"},n),Object(I.g)(A.a,{className:"CheckItem-icon",size:20})))}}]),n}(f.Component);D.propTypes={name:d.a.string,onChange:d.a.func,checked:d.a.bool,className:d.a.string,type:d.a.string,value:d.a.any},D.defaultProps={name:"checkitems",type:"checkbox"};var L=D,P=n(810),z=n(134),B=n(387),F=n(1102),U=n(857),q=n(374);function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var o=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var H=function(e){Object(a.a)(n,e);var t=V(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={value:null},e.handleModify=function(){e.setState({modifying:!0})},e.handleChange=function(t){e.setState({value:t.target.value})},e.handleCancel=function(){e.setState({value:null,modifying:!1})},e.handleSubmit=function(t){t.preventDefault(),e.props.onBioChange(e.state.value),e.handleCancel()},e.handleSelect=function(){e.props.onSelect(e.props.value)},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.user,n=e.bio,r=e.title,o=e.checked,i=e.rich,a=this.state,c=a.modifying,s=a.value;return c?Object(u.c)("div",{className:"TopicBioItem",children:[Object(u.b)("div",{className:"TopicBioItem-title",children:r}),Object(u.c)("form",{onSubmit:this.handleSubmit,children:[Object(u.b)("div",{className:"TopicBioItem-inner",children:Object(u.b)(U.a,{className:"TopicBioItem-authorInfo",noLink:!0,author:t,children:Object(u.b)(z.a,{className:"TopicBioItem-input",defaultValue:n,onChange:this.handleChange,placeholder:r,autoFocus:!0})})}),Object(u.c)("div",{className:"TopicBioItem-inputFooter",children:[Object(u.b)(B.a,{current:s?s.length:0,max:40}),Object(u.c)("div",{className:"TopicBioItem-actions",children:[Object(u.b)(g.c,{preset:"plain",type:"reset",onClick:this.handleCancel,children:"取消"}),Object(u.b)(g.c,{preset:"primary",color:"blue",type:"submit",children:"保存"})]})]})]})]}):n?Object(u.c)("div",{className:"TopicBioItem",children:[Object(u.b)("div",{className:"TopicBioItem-title",children:r}),Object(u.b)(L,{name:"topic-bio",type:"radio",onChange:this.handleSelect,value:this.props.value,checked:o,children:Object(u.b)(U.a,{noLink:!0,author:t,className:"TopicBioItem-authorInfo",children:Object(u.c)("div",{children:[i?Object(u.b)(q.a,{inline:!0,className:"TopicBioItem-bio",html:n}):Object(u.b)("span",{className:"TopicBioItem-bio",children:n}),Object(u.b)(F.a,{className:"TopicBioItem-modifyButton",onClick:this.handleModify})]})})})]}):Object(u.b)("div",{className:"TopicBioItem",children:Object(u.c)(g.c,{className:"TopicBioItem-addButton",size:"spread",preset:"link",onClick:this.handleModify,children:[Object(u.b)(P.a,{text:!0,center:!0})," 添加",r]})})}}]),n}(f.Component);H.propTypes={user:d.a.object.isRequired,title:d.a.node.isRequired,value:d.a.object.isRequired,onBioChange:d.a.func.isRequired,onSelect:d.a.func.isRequired,checked:d.a.bool.isRequired};var K=H;function Q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var o=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var W=function(e,t){var n=e.type,r=e.topic,o=(r=void 0===r?{}:r).id,i=t.type,a=t.topic,c=(a=void 0===a?{}:a).id;return n===i&&o===c},G=function(e){Object(a.a)(n,e);var t=Q(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={value:null},e.handleSelect=function(t){return e.setState({value:t})},e.handleChoose=function(){return e.props.onBioChoose(e.state.value)},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this;if(this.props.isFetching)return Object(u.b)("div",{className:"TopicBios-loading",children:Object(u.b)(y.a,{})});var t=this.props,n=t.user,r=t.question.topics,o=t.bios,i=t.currentBio,a=t.onHeadlineUpdate,c=t.onBioUpdate,s=this.state.value||i,l={type:"headline"};return Object(u.c)("div",{children:[Object(u.c)("div",{className:"TopicBioItems",children:[Object(u.b)(K,{title:"一句话介绍",user:n,bio:n.headline,value:l,onBioChange:a,onSelect:this.handleSelect,checked:W(s,l),rich:!0}),r.map((function(t){var r={type:"topic",topic:{id:t.id}};return Object(u.b)(K,Object.assign({title:"在 ".concat(t.name," 话题下的话题经验"),user:n},function(e,t){return e.find((function(e){return e.topic.id===t}))}(o,t.id),{value:r,onBioChange:function(e){return c(t.id,e)},onSelect:e.handleSelect,checked:W(s,r)}),t.id)}))]}),Object(u.b)(p.a,{children:Object(u.b)(g.c,{color:"blue",preset:"primary",onClick:this.handleChoose,children:"完成"})})]})}}]),n}(f.Component);G.propTypes={onHeadlineUpdate:d.a.func.isRequired,onBioUpdate:d.a.func.isRequired,onBioChoose:d.a.func.isRequired,question:d.a.object.isRequired,user:d.a.object.isRequired};var Z=G;function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var o=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var J=function(e){Object(a.a)(n,e);var t=Y(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).handleUpdateHeadline=function(t){e.props.updateProfile(null,{headline:t})},e.handleUpdateBio=function(t,n){e.props.updateBio(t,n)},e.handleBioChoose=function(t){t&&e.props.chooseBio(e.props.question.id,t),e.props.onClose()},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.props.loadBios(this.props.question.id)}},{key:"render",value:function(){return Object(u.b)(Z,Object.assign({onHeadlineUpdate:this.handleUpdateHeadline,onBioUpdate:this.handleUpdateBio,onBioChoose:this.handleBioChoose},this.props))}}]),n}(f.Component);J.contextTypes={currentUser:d.a.object},J.propTypes={question:d.a.object.isRequired};var $=Object(h.connect)((function(e,t){var n=e.currentUser,r=e.question.bio,o=e.entities,i=o.questions,a=o.users,c=e.topic.bios,s=t.question.id,u=i[s],l=(r[s]||{result:{type:"headline"}}).result;return{isFetching:c.isFetching,currentBio:{type:l.type,topic:l.topic},bios:u.topics.map((function(e){return{topic:e,bio:c[e.id]}})),question:u,user:a[n]}}),{updateProfile:b.m,updateBio:v.hb,chooseBio:m.e,loadBios:m.E})(J);function X(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var o=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var ee=function(e){Object(a.a)(n,e);var t=X(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.shown,n=e.onClose,o=Object(r.a)(e,["shown","onClose"]);return Object(u.b)(p.b,{title:"编辑话题经验",subtitle:Object(u.c)("span",{children:["可以填写你从事的职业、取得的资格或过往经历，",Object(u.b)("br",{}),"让你在这个问题下的回答更具说服力。"]}),onClose:n,size:"large",hotKeyClosable:!1,maskClosable:!1,children:t&&Object(u.b)($,Object.assign({},o,{onClose:n}))})}}]),n}(f.Component);ee.propTypes=Object.assign({shown:d.a.bool.isRequired,onClose:d.a.func.isRequired},$.propTypes);t.a=ee},function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var r=n(20),o=n.n(r),i=n(21),a=n.n(i),c=n(22),s=n.n(c),u=n(23),l=n.n(u),d=n(17),f=n.n(d),p=n(77),h=n.n(p),b=n(1),v=n(11),m=n.n(v),g=n(30),y=n(5);function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var o=f()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l()(this,n)}}var j=function(e){s()(n,e);var t=O(n);function n(){var e;o()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).handleClick=function(){var t=e.props;(0,t.onSelect)(t.page)},e}return a()(n,[{key:"render",value:function(){var e=this.props,t=e.text,n=e.isCurrent,r=e.className;return Object(y.g)(g.c,{preset:g.b.Plain,className:m()("PaginationButton",{"PaginationButton--current":n},r),onClick:this.handleClick,disabled:n},t)}}]),n}(b.Component);function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var o=f()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l()(this,n)}}var C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Array.from({length:t},(function(t,n){return n+e}))},k=function(e){s()(n,e);var t=w(n);function n(){return o()(this,n),t.apply(this,arguments)}return a()(n,[{key:"render",value:function(){var e,t=this.props,n=t.onSelect,r=t.className,o=t.clickCallback,i=this.props.current,a=this.props.total,c=o&&(e=o,function(){e.apply(void 0,arguments)})||n,s=function(e,t){var n="...";return t<=5?C(1,t):e>t-3?[1,n].concat(h()(C(t-3,3)),[t]):e<=3?[1].concat(h()(C(2,3)),[n,t]):[1,n].concat(h()(C(e-Math.floor(1.5),3)),[n,t])}(i,a);return Object(y.g)("div",{className:m()("Pagination",r)},i>1&&i<=a&&Object(y.g)(j,{className:"PaginationButton-prev",onSelect:c,text:"上一页",page:i-1}),s.map((function(e,t){return"number"==typeof e?Object(y.g)(j,{onSelect:c,text:e,page:e,key:t,isCurrent:i===e}):Object(y.g)("button",{disabled:!0,key:t,className:"PaginationButton PaginationButton--ellipsis"},e)})),i>0&&i<a&&Object(y.g)(j,{className:"PaginationButton-next",onSelect:c,text:"下一页",page:i+1}))}}]),n}(b.Component);k.defaultProps={current:1,total:1,onSelect:function(){}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var r=n(13),o=n(14),i=n(15),a=n(16),c=n(9),s=n(2),u=n(1),l=n(19),d=n(25),f=n(1056),p=n.n(f),h=n(320),b=n.n(h),v=n(159),m=n(448);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}function y(e,t){var n=t.os,r=t.id,o=t.sessionId,i=t.type;return e.replace("__OS__",n).replace("__REQUESTID__",o).replace("__SESSIONID__",o).replace("__ATOKEN__",r).replace("__AID__",r).replace("__PAGETYPE__",i)}var O=function(e){Object(i.a)(n,e);var t=g(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={urls:null,logged:!1},e.handleObserve=function(t){t&&e.log()},e.log=function(){e.state.logged||Promise.resolve(e.state.urls||e.load().then((function(t){return t?(t=e.normalize(t),e.setState({urls:t}),t):[]}))).then((function(e){return e.forEach((function(e){return e&&Object(v.c)(e)}))})).then((function(){return e.setState({logged:!0})}))},e.load=function(){var t=e.props,n=t.type,r=t.id;return(0,t.loadBrandEntityTrackUrl)({type:n,id:r}).then((function(e){return e&&e.payload&&e.payload.data}))},e.normalize=function(t){var n=b()(),r=e.props,o=r.ua,i=r.id,a=r.type,c=encodeURIComponent("其他");o.Android?c="android":o.iOS&&(c="ios");var s={os:c,id:i,sessionId:n,type:a};return t.map((function(e){return y(e,s)}))},e}return Object(o.a)(n,[{key:"render",value:function(){return!this.state.logged&&Object(s.b)(p.a,{rootMargin:"0px 0px 0px 0px",onChange:this.handleObserve})}}]),n}(u.Component),j=Object(l.compose)(Object(d.connect)((function(e){return{ua:e.env.userAgent}}),{loadBrandEntityTrackUrl:m.b}))(O)},function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(18),a=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M1 11.5C1 15 7 19 12 19s11-4 11-7.5S17 4 12 4 1 8 1 11.5zm11 5c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm-3-5c0 1.66 1.34 3 3 3s3-1.34 3-3-1.34-3-3-3-3 1.34-3 3z",fillRule:"evenodd"}))};a.defaultProps={name:"Eye"},t.a=a},function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(18),a=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M17.007 11.504c0 .65-.13 1.26-.36 1.83l3 3.073S23 14.136 23 11.504C23 8.008 17.255 4 11.995 4c-1.4 0-2.741.25-3.982.701l2.161 2.16c.57-.23 1.18-.36 1.831-.36a5.004 5.004 0 0 1 5.002 5.003zM2.57 4.342l2.067 2.075C3.499 7.258 1 9.119 1 11.504c0 3.336 5.79 7.503 11.005 7.503 1.55 0 3.031-.3 4.382-.84l.42.42 2.125 2.118s.782.571 1.314 0-.074-1.305-.074-1.305L3.955 3.183s-.76-.742-1.385-.19c-.626.554 0 1.35 0 1.35zm4.963 4.96l1.55 1.552c-.05.21-.08.43-.08.65 0 1.66 1.341 3.001 3.002 3.001.22 0 .44-.03.65-.08l1.551 1.551c-.67.33-1.41.53-2.2.53a5.004 5.004 0 0 1-5.003-5.002c0-.79.2-1.53.53-2.201zm4.312-.78l3.151 3.152.02-.16c0-1.66-1.34-3.001-3.001-3.001l-.17.01z",opacity:".9",fillRule:"evenodd"}))};a.defaultProps={name:"EyeSlash"},t.a=a},,,,,function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(18),a=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M16.464 4s.051-2-1.479-2H9C7.194 2 7.465 4 7.465 4H4.752c-2.57 0-2.09 3.5 0 3.5l1.213 13.027S5.965 22 7.475 22h8.987c1.502 0 1.502-1.473 1.502-1.473l1.2-13.027c2.34 0 2.563-3.5 0-3.5h-2.7zM8.936 18.5l-.581-9h1.802v9H8.936zm4.824 0v-9h1.801l-.61 9H13.76z",fillRule:"evenodd"}))};a.defaultProps={name:"Trash"},t.a=a},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n(38),n(572),n(77),n(858),n(57),n(63),n(7),n(943);var r=n(842);n(936);var o=function(e){var t=e.adjson,n=e.style,o=e.template,i=e.data,a=Object(r.d)(t,"ads[0]",{}),c=Object(r.d)(t,"ads",[]),s=Object(r.d)(a,"creatives[0]",{}),u=Object(r.d)(a,"creatives",[]),l=!!n&&n.toLocaleLowerCase().indexOf("download")>-1;return{ad:a,ads:c,creatives:u,creative:s,style:n,isDownload:l,template:o,oldAd:i.ad}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return m}));var r=n(858),o=n.n(r),i=n(110),a=n.n(i),c=n(7),s=n(842),u=n(943);function l(e){var t=e.oldData,n=e.adjson;if("{}"!==JSON.stringify(n))return u.g[Object(s.d)(n,"ads[0].style")];var r,o,i=Object(s.d)(t.ad,"creatives[0].appPromotionUrl");return"".concat((r=Object(s.d)(t,"ad.adVerb"),o={singlePu:"PROMOTE_SMALL_IMAGE_CARD_PU",single:"PROMOTE_SMALL_IMAGE_CARD",word:"PROMOTE_WORD",multiple:"PROMOTE_MULTI_IMAGES_CARD"},Object.keys(o).find((function(e){return o[e]===r})))).concat(i?"Download":"")}function d(e){var t=e.oldData,n=e.adjson;return"{}"!==JSON.stringify(n)?u.d[Object(s.d)(n,"ads[0].style")]:u.e[Object(s.d)(t,"ad.style")]}function f(e){var t,n,r=e.oldData,o=e.adjson;return"{}"!==JSON.stringify(o)?u.h[Object(s.d)(o,"ads[0].style")]:(t=Object(s.d)(r,"ad.adVerb"),n={small:"PROMOTE_SUBJECT_CARD_SMALL_IMAGE",multiple:"PROMOTE_SUBJECT_CARD_MULTI_IMAGE"},Object.keys(n).find((function(e){return n[e]===t})))}function p(e){var t=e.oldData,n=e.adjson;return"{}"!==JSON.stringify(n)?Object(s.d)(n,"ads[0].experimentInfo"):Object(s.d)(t,"ad.experimentInfo")}function h(e){var t=e.oldData,n=e.adjson;return"{}"!==JSON.stringify(n)?Object(s.d)(n,"ads[0].webExperiment"):Object(s.d)(t,"ad.webExperiment")}function b(e){var t=e.ad,n=e.related,r=(t.partyId,t.creatives),i=t.downloadSilent,c=void 0!==i&&i,u=t.isNewWebview,l=void 0!==u&&u,d=t.isSpeeding,f=t.cdnMap,p=t.displayAdvertisingTag,h=a()(t,["partyId","creatives","downloadSilent","isNewWebview","isSpeeding","cdnMap","displayAdvertisingTag"]),b=Object(s.d)(r[0],"canvas"),v={displayAdvertisingTag:p,downloadSilent:c,isNewWebview:l,isCdnSpeeding:d,cdnMap:f},m=r.map((function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.voteupCount,r=t.commentCount,i=t.followerCount,c=t.answerCount,u=e.landingUrl,l=e.appPromotionUrl,d=e.deepUrl,f=e.packageName,p=e.title,h=e.nativeUrl,b=void 0===h?"":h,v=e.window,m=e.imageRatioExtra,g=e.brand,y=void 0===g?{}:g,O=e.thumbnailExtraInfo,j=e.cta,w=(j=void 0===j?{}:j).value,C=void 0===w?"":w,k=e.description,S=e.protoInfo,x=e.image,R=e.gallery,E=void 0===R?[]:R,_=e.thirdSdkInfo,A=e.showNum,T=void 0===A?{}:A,N=e.recommend,I=a()(e,["landingUrl","appPromotionUrl","deepUrl","packageName","title","nativeUrl","window","imageRatioExtra","brand","thumbnailExtraInfo","cta","description","protoInfo","image","gallery","thirdSdkInfo","showNum","recommend"]),M=Object(s.d)(S,"contentType"),D=y.name,L=y.logo,P=Object(s.d)(E,"length")>=2?E.map((function(e){return e.url})):[x],z=E&&E.map((function(e){return{image:e.url,desc:e.description}})),B=o()({landingUrl:u,appPromotionUrl:l,deepUrl:d,packageName:f,title:p,nativeUrl:b,window:v,imageRatioExtra:m,desc:k,cta:C,imgs:P,brandName:D,brandLogo:L,recommend:N,gallery:E,galleries:z},I),F=o()({contentType:M,voteupNum:n,commentNum:r,followNum:i,answerNum:c},T),U={asset:B,protoInfo:F,videoInfo:O,thirdSdkInfo:_};return U}(e,n)}));return o()({},h,{canvas:b,creatives:m,expand:v})}function v(e){var t=e.type,n=e.oldData,r=e.adjson;switch(t){case"large":case"intext":return d({oldData:n,adjson:r});case"subject":return f({oldData:n,adjson:r});case"bonus":case"pccard":return function(e){var t=e.adjson;if("{}"!==JSON.stringify(t))return u.h[Object(s.d)(t,"ads[0].style")]}({adjson:r});case"mfeed":return function(e){var t=e.oldData,n=e.adjson;return"{}"!==JSON.stringify(n)?u.f[Object(s.d)(n,"ads[0].style")]:{PROMOTE_SMALL_IMAGE_CARD:"small",PROMOTE_MULTI_IMAGES_CARD:"multiple",PROMOTE_WORD:"word",PROMOTE_URL_CARD:"large",PROMOTE_CARD:"small"}[Object(s.d)(t,"ad.adVerb")]}({oldData:n,adjson:r});default:return l({oldData:n,adjson:r})}}function m(e,t){if(["large","intext","recommend"].includes(t)&&function(e){return!e||!(e.ad||e.adjson)}(e))return null;var n=Object(c.camelizeKeys)(e),r=Object(s.d)(e,"adjson"),i=Object(c.camelizeKeys)(Object(s.t)(r)),a=v({type:t,oldData:n,adjson:i}),u=p({oldData:n,adjson:i}),l=h({oldData:n,adjson:i});return{data:n,adjson:r?function(e,t){return{ads:e.ads.map((function(e){return o()({adjsonStr:t},e)}))}}(i,r):function(e,t){var n=e.related,r=void 0===n?{}:n,i=e.adList,a=e.ad;return{ads:(i||[{ad:a}]).map((function(e){var n=e.ad;return o()({adjsonStr:t},b({ad:n,related:r}))}))}}(n,r),style:a,experimentInfo:u,webExperiment:l}}},function(e,t,n){e.exports=n.p+"assets/creator_entrance.a883e0a5.png"},function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(18),a=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M2 6a4 4 0 0 1 4-4h12a4 4 0 0 1 4 4v12a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V6zm13.96 2.2l-5.008 5.008-2.651-2.652-1.768 1.768 4.42 4.42 6.776-6.777L15.96 8.2z",fillRule:"evenodd"}))};a.defaultProps={name:"CheckboxOn"},t.a=a},function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(18),a=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M5 6v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1H6a1 1 0 0 0-1 1zM2 6a4 4 0 0 1 4-4h12a4 4 0 0 1 4 4v12a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V6z"}))};a.defaultProps={name:"CheckboxOff"},t.a=a},,function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n(13),o=n(14),i=n(15),a=n(16),c=n(9),s=n(2),u=n(3),l=n.n(u),d=n(1),f=n(1335),p=n(12),h=n(6);function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var v=function(e){Object(i.a)(n,e);var t=b(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.isDrained,n=e.page,r=e.prePage,o=e.onLoad,i=e.isNextLoaded;t||o(Object(h.c)(n),r),i||o(Object(h.c)(n+1),r)}},{key:"componentWillReceiveProps",value:function(e){var t=e.isFetching,n=e.isDrained,r=e.isNextLoaded,o=e.page,i=e.prePage,a=e.onLoad,c=e.total;n||t||a(Object(h.c)(o),i),!r&&o<c&&o!==this.props.page&&a(Object(h.c)(o+1),i)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.total,r=e.page,o=e.onPaginationClick,i=e.isFetching,a=e.placeholder;return Object(s.c)("div",{children:[t,i&&a,n>1&&Object(s.b)(f.a,{current:r,total:n,clickCallback:o})]})}}]),n}(d.Component);v.propTypes={isFetching:l.a.bool.isRequired,isDrained:l.a.bool.isRequired,onLoad:l.a.func.isRequired,total:l.a.number,page:l.a.number,prePage:l.a.number,placeholder:l.a.node,onPaginationClick:l.a.func.isRequired,isNextLoaded:l.a.bool},v.defaultProps={prePage:p.b,page:1}},function(e,t,n){e.exports=n.p+"assets/liukanshan_loudspeaker.292ada3b.svg"},,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return ut}));var r=n(2),o=n(1),i=n.n(o),a=n(25),c=n(29),s=n(19),u=n(11),l=n.n(u),d=n(156),f=n(1128),p=n(13),h=n(14),b=n(67),v=n(15),m=n(16),g=n(9),y=n(40),O=n(32),j=n(3),w=n.n(j),C=n(210),k=n.n(C),S=n(28),x=n(840),R=n(367),E=n(141);function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(g.a)(e);if(t){var o=Object(g.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(m.a)(this,n)}}function A(){return n.e(43).then(n.bind(null,2620))}var T=function(e){Object(v.a)(n,e);var t=_(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return Object(r.b)(E.a,Object.assign({getComponent:A},this.props))}}]),n}(o.Component),N=n(37),I=n(101),M=n(935),D=n(235),L=n.n(D);var P=Object(a.connect)((function(e){return{animate:e.question.laterQuestions.globalWriteAnimate}}),{setLaterQuestionAnimate:I.fb})((function(e){var t=e.className,n=e.count,i=e.onClick,a=void 0===i?L.a:i,c=e.animate,s=e.setLaterQuestionAnimate,u=Object(o.useRef)(null),d=Object(M.c)({from:{scale:1},to:[{scale:c?1.2:1},{scale:1}],delay:200}),f=Object(o.useCallback)((function(){s(!1),window.clearTimeout(u.current),u.current=null}),[s]),p=Object(M.e)(c,null,{from:{opacity:0,left:-450},enter:{opacity:1,left:49},leave:{opacity:0},tension:250,friction:20,onRest:function(){u.current||(u.current=setTimeout(f,5e3))}}),h=Object(o.useCallback)((function(e){f(),a(e)}),[a,f]);return Object(r.c)(M.a.a,{className:l()("GlobalWriteAnswerLater",t),href:"/question/later",target:"_blank",title:"稍后答",onClick:h,"data-za-detail-view-id":5370,style:{transform:d.scale.interpolate((function(e){return"scale(".concat(e,")")}))},children:[Object(r.c)("div",{className:"GlobalWrite-navWrapper",children:[Object(r.b)("div",{className:"GlobalWrite-navTitle",children:"稍后答"}),Boolean(n)&&Object(r.b)("div",{className:"GlobalWrite-navNumber",children:Object(R.formatNumber)(n)})]}),p.map((function(e){var t=e.item,n=e.key,o=e.props;return t&&Object(r.b)(M.a.div,{className:"GlobalWriteAnswerLater-popover",style:o,onClick:f,children:Object(r.b)("div",{className:"GlobalWriteAnswerLater-popoverText",children:"添加的稍后答都在这里哦~"})},n)}))]})})),z=n(131),B=Object.assign;var F=function(e){return i.a.createElement(z.a,B({width:"40",height:"40",viewBox:"0 0 40 40"},e),i.a.createElement("g",{fill:"#06F",fillRule:"evenodd"},i.a.createElement("circle",{cx:"20",cy:"20",r:"20",opacity:".12"}),i.a.createElement("path",{d:"M23.487 10.463c1.896 0 2.583.193 3.277.555a3.824 3.824 0 011.607 1.573c.371.678.569 1.35.569 3.206v8.472c0 1.855-.198 2.527-.569 3.205a3.824 3.824 0 01-1.607 1.573c-.694.363-1.381.556-3.277.556h-6.96c-1.895 0-2.583-.193-3.276-.556a3.824 3.824 0 01-1.608-1.573c-.37-.678-.568-1.35-.568-3.205v-8.472c0-1.855.197-2.528.568-3.206.37-.678.915-1.21 1.608-1.573.693-.362 1.38-.556 3.277-.556h6.959zm0 2.08h-6.96c-1.407 0-1.836.081-2.273.31a1.72 1.72 0 00-.735.72c-.234.427-.317.847-.317 2.224v8.472c0 1.377.083 1.796.317 2.224.172.316.412.551.735.72.437.229.866.31 2.274.31h6.959c1.407 0 1.836-.081 2.274-.31a1.72 1.72 0 00.735-.72c.234-.428.317-.847.317-2.224v-8.472c0-1.377-.083-1.797-.317-2.225a1.72 1.72 0 00-.735-.72c-.438-.228-.867-.309-2.274-.309zm-1.991 9.778v1.873h-5.955V22.32h5.955zm2.977-3.328v1.872h-8.932v-1.872h8.932zm0-3.33v1.873h-8.932v-1.872h8.932z",fillRule:"nonzero"})))},U=Object.assign;var q=function(e){return i.a.createElement(z.a,U({width:"40",height:"40",viewBox:"0 0 40 40"},e),i.a.createElement("g",{fill:"none",fillRule:"evenodd"},i.a.createElement("circle",{cx:"20",cy:"20",r:"20",fill:"#F4C807",opacity:".12"}),i.a.createElement("path",{d:"M6 6h28v28H6z"}),i.a.createElement("path",{fill:"#F4C807",d:"M20.406 11.772l-2.172 2.176h-2.29c-1.438 0-1.875.085-2.322.324-.33.176-.575.422-.751.752-.24.448-.324.886-.324 2.326v7.12c0 1.44.085 1.878.324 2.326.176.33.421.576.75.752.421.225.834.314 2.08.323l7.35.001c1.438 0 1.876-.084 2.323-.324.33-.176.575-.422.751-.752.24-.448.324-.886.324-2.326v-4.905l2.172-2.175v7.08c0 1.94-.202 2.643-.58 3.352a3.95 3.95 0 01-1.643 1.645c-.708.379-1.41.58-3.346.58h-7.108c-1.936 0-2.639-.201-3.347-.58a3.95 3.95 0 01-1.642-1.645c-.378-.71-.58-1.413-.58-3.352v-7.12c0-1.94.202-2.643.58-3.352a3.95 3.95 0 011.642-1.645c.708-.379 1.41-.58 3.347-.58h4.462zm6.908-2.053c.384.116.747.338 1.168.759l.188.189c.42.421.642.785.758 1.17a1.98 1.98 0 010 1.163c-.116.385-.337.749-.758 1.17l-6.9 6.911c-.62.622-.827.81-1.078 1.004-.251.193-.496.34-.784.47-.288.131-.553.226-1.392.48l-1.088.332a1.303 1.303 0 01-1.625-1.629l.33-1.09c.255-.84.35-1.104.48-1.393.13-.29.277-.534.47-.785.193-.252.381-.46 1.001-1.081l6.9-6.911c.42-.421.784-.643 1.168-.76a1.97 1.97 0 011.162 0zm-3.204 4.096l-4.797 4.805c-.547.548-.709.723-.852.91-.112.146-.19.276-.265.443-.097.214-.175.44-.4 1.182l-.094.31.31-.095c.74-.225.965-.303 1.179-.4.167-.076.297-.154.442-.266.187-.143.361-.305.909-.853l4.797-4.805-1.23-1.23zm2.546-2.43c-.109.033-.23.11-.443.324l-.874.875 1.228 1.231.875-.876c.213-.213.29-.334.323-.444a.24.24 0 000-.153c-.033-.11-.11-.23-.323-.445l-.189-.188c-.213-.214-.334-.291-.443-.325a.238.238 0 00-.154 0z",fillRule:"nonzero"})))},V=Object.assign;var H=function(e){return i.a.createElement(z.a,V({width:"40",height:"40",viewBox:"0 0 40 40"},e),i.a.createElement("g",{fill:"#26BFBF",fillRule:"evenodd"},i.a.createElement("circle",{cx:"20",cy:"20",r:"20",opacity:".12"}),i.a.createElement("path",{d:"M21.987 11.686v2.169h-6.125c-1.43 0-1.863.064-2.297.306-.332.128-.574.383-.74.702-.255.447-.332.893-.332 2.297v7.018c0 1.442.09 1.876.332 2.297.166.345.408.587.74.766.434.23.868.319 2.297.319h7.018c1.43 0 1.863-.077 2.297-.32.345-.165.587-.408.766-.74.216-.408.296-.816.305-2.054l.001-6.316.025.025h2.17v6.074c0 1.914-.217 2.616-.587 3.318a3.92 3.92 0 01-1.634 1.62c-.689.383-1.403.575-3.317.575h-7.018c-1.915 0-2.616-.204-3.318-.575a3.891 3.891 0 01-1.62-1.62c-.384-.702-.575-1.404-.575-3.318v-7.018c0-1.914.204-2.629.574-3.318a3.996 3.996 0 011.62-1.633c.703-.383 1.404-.574 3.318-.574h6.1zm1.889 6.954c1.059 1.06 1.059 2.807 0 3.88l-.039.038a2.719 2.719 0 01-3.879 0l-2.45-2.553a.801.801 0 00-1.123 0l-.05.052c-.32.357-.32.893 0 1.212a.75.75 0 00.726.217c.51-.128 1.047.23 1.149.74a.946.946 0 01-.727 1.148 2.649 2.649 0 01-2.527-.74 2.796 2.796 0 010-3.905l.038-.025c1.098-1.085 2.808-1.085 3.892 0l2.463 2.488a.764.764 0 001.11 0l.038-.025a.855.855 0 000-1.187.876.876 0 00-.74-.217c-.51.128-1.02-.204-1.148-.727-.128-.51.204-1.021.727-1.149l.013-.013a2.703 2.703 0 012.527.766zm4.338-9.315v2.578h2.578v1.722h-2.578v2.59h-1.723v-2.602h-2.59v-1.71h2.59V9.325h1.723z",fillRule:"nonzero"})))},K=Object.assign;var Q=function(e){return i.a.createElement(z.a,K({width:"40",height:"40",viewBox:"0 0 40 40"},e),i.a.createElement("g",{fill:"#FF9607",fillRule:"evenodd"},i.a.createElement("circle",{cx:"20",cy:"20",r:"20",opacity:".12"}),i.a.createElement("path",{d:"M24.233 24.777v-9.555c0-.942-.748-1.706-1.67-1.706H13.61c-.922 0-1.67.764-1.67 1.707v9.554c0 .943.748 1.707 1.67 1.707h8.954c.921 0 1.669-.764 1.669-1.707zm3.478-10.349a2.302 2.302 0 013.297.243c.367.434.57.989.57 1.563v7.532c0 1.32-1.047 2.389-2.337 2.389a2.308 2.308 0 01-1.53-.583l-1.475-1.306v.512c0 2.073-1.644 3.753-3.672 3.753H13.61c-2.028 0-3.672-1.68-3.672-3.753v-9.555c0-2.074 1.644-3.754 3.672-3.754h8.954c2.028 0 3.672 1.68 3.672 3.754v.51l1.475-1.305zm-1.475 7.13l2.786 2.466a.33.33 0 00.219.083.338.338 0 00.334-.341v-7.532a.346.346 0 00-.082-.223.329.329 0 00-.47-.035l-2.787 2.466v3.116z",fillRule:"nonzero"})))},W=n(1384),G=n.n(W),Z=n(1385),Y=n.n(Z),J=n(1386),$=n.n(J),X=n(1387),ee=n.n(X);function te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(g.a)(e);if(t){var o=Object(g.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(m.a)(this,n)}}var ne={answer:[F,G.a,"#ffc601"],article:[q,Y.a,"#ff6084"],pin:[H,$.a,"#25c7c7"],video:[Q,ee.a,'"ff9015']};function re(e){var t=e.preset,n=e.type,o=Object(O.a)(e,["preset","type"]);if("old"===t){var i=Object(y.a)(ne[n],1)[0];return Object(r.b)(i,Object.assign({},o))}var a=Object(y.a)(ne[n],3),c=a[1],s=a[2];return Object(r.b)("div",{className:"GlobalWrite-iconContainer",css:function(e){return{background:e.colorMod(s).alpha(.12),"&:hover":{background:e.colorMod(s).alpha(.22)}}},children:Object(r.b)("img",{className:"GlobalWrite-icon",src:c,alt:""})})}var oe={answer:{id:2744,action:"OpenUrl",elementName:"Answer"},article:{id:2752,action:"OpenUrl",elementName:"Post"},pin:{id:2753,action:"Click",elementName:"Pin"},draft:{id:2750,action:"OpenUrl"}},ie=function(e){Object(v.a)(n,e);var t=te(n);function n(){var e;Object(p.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={loadWritePin:!1,showWritePin:!1},e.openWritePin=e.context.authRequired((function(){return e.context.realNameRequired((function(){e.createClickButtonHandler("pin")(),e.setState({loadWritePin:!0,showWritePin:!0})}))()})),e.closeWritePin=function(){e.setState({showWritePin:!1})},e.openUploadVideo=e.context.authRequired((function(){return e.context.realNameRequired((function(){window.open("/zvideo/upload-video")}))()})),e.createClickButtonHandler=function(t){return e.context.realNameRequired((function(){var n=oe[t],r=n.action,o=n.elementName,i=n.id;S.a.trackEvent(Object(b.a)(e),k()({id:i,action:r,element_name:o},Boolean),"draft"===t?{link:{url:"https://www.zhihu.com".concat(e.props.creatorQuestionRightPass?"/creator/manage/creation/draft":"/draft")}}:null),"answer"===t?window.open(e.props.currentUser.isOrg?"/organization/question/recommend#recommend":e.props.creatorQuestionRightPass?"/creator/featured-question/invited":"/question/waiting"):"article"===t&&(window.open("//zhuanlan.zhihu.com/write"),S.a.trackEvent(Object(b.a)(e),{id:8038,action:"OpenUrl"},{link:{url:"https://zhuanlan.zhihu.com/write"}}))}))},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.currentUser,n=e.fillCurrentUserIfNeeded,r=e.laterQuestionsCount,o=e.getLaterQuestionsCount,i=e.imperativeRef,a=e.withComponent;n([a&&"draftCount","organization"===t.userType&&"isOrgCreatepinWhiteUser"].filter(Boolean)),a&&null===r&&o(),i&&(i.current={createClickHandler:this.createClickButtonHandler,openUploadVideo:this.openUploadVideo,openWritePin:this.openWritePin})}},{key:"render",value:function(){var e=this,t=this.props,n=t.currentUser,o=t.laterQuestionsCount,i=t.withComponent,a=t.preset,c=this.state,s=c.loadWritePin,u=c.showWritePin,d=(n||{}).draftCount,f=n&&(!n.isOrg||n.isOrg&&n.isOrgCreatepinWhiteUser);if(!i)return Object(r.b)(r.a,{children:s&&Object(r.b)(T,{show:u,onClose:this.closeWritePin})});var p=x.d;return"new"===a&&(p="div"),Object(r.c)(p,{className:l()("GlobalWrite","GlobalWrite--".concat(a)),children:[Object(r.c)("div",{className:"GlobalWrite-navTop",children:[Object(r.c)("a",{className:"GlobalWrite-topItem",target:"_blank",rel:"noopener noreferrer",title:"回答",onClick:this.createClickButtonHandler("answer"),children:[Object(r.b)(re,{preset:a,type:"answer",className:"GlobalWrite-navIcon"}),Object(r.b)("div",{className:"GlobalWrite-topTitle",children:"回答问题"}),n.isOrg&&Object(r.b)("div",{className:"GlobalWrite-exposeMore",children:"曝光更多"})]}),Object(r.c)("div",{className:"GlobalWrite-topItem",onClick:function(t){S.a.trackEvent(t.target,{id:8619,action:"Add"}),e.openUploadVideo()},children:[Object(r.b)(re,{preset:a,type:"video",className:"GlobalWrite-navIcon"}),Object(r.b)("div",{className:"GlobalWrite-topTitle",children:"发视频"})]}),Object(r.c)("a",{className:"GlobalWrite-topItem",target:"_blank",rel:"noopener noreferrer",title:"写文章",onClick:this.createClickButtonHandler("article"),children:[Object(r.b)(re,{preset:a,type:"article",className:"GlobalWrite-navIcon"}),Object(r.b)("div",{className:"GlobalWrite-topTitle",children:"写文章"})]}),f&&Object(r.c)("div",{className:"GlobalWrite-topItem",onClick:this.openWritePin,children:[Object(r.b)(re,{preset:a,type:"pin",className:"GlobalWrite-navIcon"}),Object(r.b)("div",{className:"GlobalWrite-topTitle",children:"写想法"})]})]}),Object(r.c)("div",{className:"GlobalWrite-navBottom",children:[null!==o&&Object(r.b)(P,{className:"GlobalWrite-answerLater",count:o}),Object(r.b)("a",{className:"GlobalWrite-navDraft",href:this.props.creatorQuestionRightPass?"/creator/manage/creation/draft":"/draft",target:"_blank",rel:"noopener noreferrer",title:"草稿",onClick:this.createClickButtonHandler("draft"),"data-za-not-track-link":!0,children:Object(r.c)("div",{className:"GlobalWrite-navWrapper",children:[Object(r.b)("div",{className:"GlobalWrite-navTitle",children:"草稿箱"}),Boolean(d)&&Object(r.b)("div",{className:"GlobalWrite-navNumber",children:Object(R.formatNumber)(d)})]})})]}),s&&Object(r.b)(T,{show:u,onClose:this.closeWritePin})]})}}]),n}(o.Component);ie.defaultProps={preset:"old",withComponent:!0},ie.contextTypes={authRequired:w.a.func,realNameRequired:w.a.func};var ae=Object(a.connect)((function(e){var t;return{currentUser:Object(N.b)(e),laterQuestionsCount:null===(t=e.question)||void 0===t?void 0:t.laterQuestions.count}}),{fillCurrentUserIfNeeded:N.e,getLaterQuestionsCount:I.t})(ie),ce=n(102),se=n(791),ue=n(18),le=function(e){return i.a.createElement(ue.a,e,i.a.createElement("path",{d:"M5.74 4h12.52c.961 0 1.74.775 1.74 1.73V16.27c0 .955-.779 1.73-1.74 1.73h-3.825l-1.658 2.044a1 1 0 0 1-1.554 0l-1.658-2.044H5.74C4.78 18 4 17.224 4 16.27V5.73C4 4.775 4.778 4 5.74 4zM12 16a.976.976 0 0 0 .705-.287.951.951 0 0 0 .295-.712.954.954 0 0 0-.295-.714A.976.976 0 0 0 12 14a.962.962 0 0 0-.705.295A.961.961 0 0 0 11 15c0 .284.098.522.295.713A.975.975 0 0 0 12 16zm1.278-4.924a36.81 36.81 0 0 0 1.023-.975c.19-.193.354-.422.492-.688.138-.266.207-.575.207-.928 0-.448-.12-.864-.363-1.246a2.517 2.517 0 0 0-1.029-.906C13.164 6.111 12.652 6 12.072 6c-.624 0-1.17.133-1.638.399-.468.265-.824.6-1.068 1.005-.244.405-.366.804-.366 1.2 0 .19.077.368.231.531a.747.747 0 0 0 .567.246c.38 0 .638-.234.774-.703.144-.449.32-.788.528-1.019.208-.23.532-.345.972-.345.376 0 .683.114.921.342.238.229.357.51.357.841 0 .17-.039.328-.117.473a1.782 1.782 0 0 1-.288.396c-.114.118-.3.294-.555.526a9.71 9.71 0 0 0-.696.688c-.172.194-.31.418-.414.673a2.391 2.391 0 0 0-.156.906c0 .278.071.488.213.63a.716.716 0 0 0 .525.211c.4 0 .638-.216.714-.648.044-.203.077-.345.099-.426.022-.081.053-.162.093-.243.04-.081.101-.17.183-.268.082-.098.191-.21.327-.34z",fillRule:"evenodd"}))};le.defaultProps={name:"HelpBubble"};var de=le,fe=n(1562),pe=function(e){return i.a.createElement(ue.a,e,i.a.createElement("path",{d:"M19 19.5H5a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v10.5a2 2 0 0 1-2 2zm0-12a.5.5 0 0 0-.5-.5h-13a.5.5 0 0 0-.5.5v2a.5.5 0 0 0 .5.5h3.75c1 0 1 2 2.75 2s1.75-2 2.75-2h3.75a.5.5 0 0 0 .5-.5v-2z",fillRule:"evenodd"}))};pe.defaultProps={name:"Balance"};var he=pe,be=function(e){return i.a.createElement(ue.a,e,i.a.createElement("path",{d:"M21.515 10.131c-1.1.567-1.471.996-1.471 1.869s.388 1.348 1.471 1.869c.356.26.485.429.485.934v2.803c0 .766-.647 1.394-1.471 1.394H3.47C2.663 19 2 18.387 2 17.606v-2.803c0-.26.08-.674.517-.934.615-.2 1.456-.613 1.456-1.869 0-.965-.793-1.578-1.472-1.869-.452-.23-.485-.52-.485-.934V6.394C2.016 5.628 2.663 5 3.487 5H20.53C21.337 5 22 5.613 22 6.394v2.803c0 .398 0 .628-.485.934zM10.5 12c0 .834.672 1.5 1.5 1.5.834 0 1.5-.672 1.5-1.5 0-.834-.672-1.5-1.5-1.5-.834 0-1.5.672-1.5 1.5zm5 0c0 .834.672 1.5 1.5 1.5.834 0 1.5-.672 1.5-1.5 0-.834-.672-1.5-1.5-1.5-.834 0-1.5.672-1.5 1.5zm-10 0c0 .834.672 1.5 1.5 1.5.834 0 1.5-.672 1.5-1.5 0-.834-.672-1.5-1.5-1.5-.834 0-1.5.672-1.5 1.5z"}))};be.defaultProps={name:"Coupon"};var ve=be,me=n(1645),ge=n(789),ye=n(1646),Oe=n(1647),je=n(1481),we=n(1173),Ce=n(1648),ke=n(1649),Se=Object.assign;var xe=function(e){return i.a.createElement(z.a,Se({width:"18",height:"18",viewBox:"0 0 18 18"},e),i.a.createElement("path",{d:"M9 1.5c2.835 0 5.152 2.195 5.247 4.949l.003.176v.253A2.25 2.25 0 0115.75 9v2.25a2.25 2.25 0 01-1.5 2.122v.257c0 .547-.2 1.073-.557 1.482l-.102.109-1.06 1.06a.75.75 0 01-1.124-.99l.063-.07 1.06-1.061a.75.75 0 00.213-.432l.007-.098V13.5H12a.75.75 0 01-.75-.75V7.5a.75.75 0 01.75-.75h.75v-.125C12.75 4.628 11.076 3 9 3 6.98 3 5.34 4.541 5.254 6.464l-.004.286H6a.75.75 0 01.743.648l.007.102v5.25a.75.75 0 01-.648.743L6 13.5H4.5a2.25 2.25 0 01-2.245-2.096l-.005-.154V9c0-.98.626-1.814 1.5-2.122v-.253C3.75 3.79 6.105 1.5 9 1.5z",fillRule:"evenodd"}))},Re=[{key:"star",number:void 0,label:"我的收藏",url:"/collections/mine",icon:se.a,visible:!0},{key:"questionList",number:void 0,label:"我关注的问题",icon:de,visible:!0},{key:"invite",number:void 0,label:"我的邀请",url:"/question/invited",icon:fe.a,visible:!0},{key:"balance",number:void 0,label:"我的余额",url:"/balance",icon:he,visible:!1},{key:"coupon",number:void 0,label:"我的礼券",url:"/coupon",icon:ve,visible:!1},{key:"service",number:void 0,label:"站务中心",url:"/community",icon:me.a,visible:!0},{key:"help-center",number:void 0,label:"帮助中心",url:"/help-center",icon:xe,visible:!0},{key:"copyright",number:void 0,label:"版权服务中心",url:"/copyright",icon:ge.a,visible:!0}],Ee=[{key:"live",number:void 0,label:"Live",url:"/lives",icon:ye.a,color:"#ffcf00",visible:!0},{key:"pub",number:void 0,label:"书店",url:"/pub/",icon:Oe.a,color:"#43d480",visible:!0},{key:"org",number:void 0,label:"圆桌",url:"/roundtable",icon:je.a,color:"#0066FF",visible:!0},{key:"edit",number:void 0,label:"专栏",url:"//zhuanlan.zhihu.com",icon:we.a,color:"#0f88eb",visible:!0},{key:"infinity",number:void 0,label:"付费咨询",url:"/consult",icon:Ce.a,color:"#5478f0",visible:!0},{key:"wiki",number:void 0,label:"百科",url:"/wiki",icon:ke.a,color:"#5868D1",visible:!0}];function _e(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(g.a)(e);if(t){var o=Object(g.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(m.a)(this,n)}}var Ae=function(e){Object(v.a)(n,e);var t=_e(n);function n(){var e;Object(p.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).handleLog=function(e,t,n){var r=Ee.find((function(e){return e.url===n})).label;S.a.trackEvent(e.target,{action:"OpenUrl",element:"Link",name:t,id:2745},{button:{text:r},link:{url:n}})},e}return Object(h.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.categoryData,o=t.children,i=n.filter((function(e){return e.visible})).map((function(t){var n=t.key,o=t.label,i=t.url,a=t.color,c=t.icon;return Object(r.b)("li",{className:"GlobalSideBar-categoryItem",children:Object(r.c)(ce.a,{preset:"plain",href:i,target:"_blank",title:o,onClick:function(t){return e.handleLog(t,n,i)},style:{color:a},"data-za-not-track-link":!0,children:[Object(r.b)("span",{className:"GlobalSideBar-categoryIcon",children:Object(r.b)(c,{})}),Object(r.b)("span",{className:"GlobalSideBar-categoryLabel",children:o})]})},n)}));return Object(r.c)(x.d,{className:"GlobalSideBar-category",children:[o,Object(r.b)("ul",{className:"GlobalSideBar-categoryList",children:i})]})}}]),n}(o.Component);function Te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(g.a)(e);if(t){var o=Object(g.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(m.a)(this,n)}}var Ne=function(e){Object(v.a)(n,e);var t=Te(n);function n(){var e;Object(p.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).createClickButtonHandler=function(e){return function(t){S.a.trackEvent(t.target,{action:"OpenUrl",id:2746},{button:{text:e}})}},e}return Object(h.a)(n,[{key:"componentDidUpdate",value:function(e){var t=function(e){return e.navData.filter((function(e){return e.visible})).length};this.props.onHeightChange&&t(e)!==t(this.props)&&this.props.onHeightChange()}},{key:"render",value:function(){var e=this,t=this.props.navData.filter((function(e){return e.visible})).map((function(t){var n=t.key,o=t.label,i=t.icon,a=t.url,c=t.number;return Object(r.b)("li",{className:l()("GlobalSideBar-navItem","GlobalSideBar-".concat(n,"Item")),children:Object(r.c)(ce.a,{preset:"plain",to:a,target:"_blank",className:"GlobalSideBar-navLink",activeClassName:"GlobalSideBar-navLink--active",onClick:e.createClickButtonHandler(o),"data-za-not-track-link":!0,children:[Object(r.b)(i,{className:"GlobalSideBar-navIcon",size:18}),Object(r.b)("span",{className:"GlobalSideBar-navText",children:o}),"number"==typeof c&&Object(r.b)("span",{className:"GlobalSideBar-navNumber",children:Object(R.formatNumber)(c)})]})},n)}));return Object(r.b)(x.d,{children:Object(r.b)("ul",{className:"GlobalSideBar-navList",children:t})})}}]),n}(o.Component);var Ie=function(e){var t=e.items.filter((function(e){return e.visible}));return t.length?Object(r.b)("div",{className:"GlobalBalance",children:t.map((function(e){return Object(r.b)("a",{className:"GlobalBalance-item",href:e.url,target:"_blank",rel:"noopener noreferrer",children:e.label},e.key)}))}):null},Me=n(1359);var De=function(e){var t=e.position,n=e.delay,o=e.onLoadBanner,i=e.onHideImage,a=e.onHeightChange;return Object(r.b)(Me.a,{location:t,delay:n,onLoadBanner:o,onHideImage:i,onHeightChange:a,isMobile:!1})},Le=n(980);var Pe=function(e){var t=e.defaultItems,n=e.onHeightChange,i=Object(o.useState)(t.map((function(e){return Object.assign({},e,{status:"loading"})}))),a=Object(y.a)(i,2),c=a[0],s=a[1],u=Object(o.useCallback)((function(e,t){s(c.map((function(n){return e(n)?t(n):n})))}),[c]);return Object(r.b)(Le.a,{className:"GlobalSideBar-carouselAD",items:c.filter((function(e){return"hidden"!==e.status})),loopStyle:"startover",resetOffsetWhenItemsLengthChange:!0,renderItem:function(e){var t=e.position,o=e.delay;return Object(r.b)(De,{position:t,delay:o,onLoadBanner:function(e){u((function(e){return e.position===t}),(function(t){return Object.assign({},t,{status:e?"loaded":"hidden"})}))},onHideImage:function(){u((function(e){return e.position===t}),(function(e){return Object.assign({},e,{status:"hidden"})}))},onHeightChange:n},t)},interval:5e3,css:{".Carousel-bullets":{bottom:17}},onBulletClick:function(e,t){S.a.trackEvent(null,{id:9512,name:String(t+1)})}})};function ze(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(g.a)(e);if(t){var o=Object(g.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(m.a)(this,n)}}var Be=function(){return n.e(26).then(n.bind(null,2621))},Fe=function(e){Object(v.a)(n,e);var t=ze(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return Object(r.b)(E.a,Object.assign({getComponent:Be},this.props))}}]),n}(o.Component),Ue=n(931),qe={url:"https://www.zhihu.com/knowledge-plan/education?utm_source=global_event_banner",imageUrl:"https://pic4.zhimg.com/80/v2-f37157090d166b6f23fa4e401e76c553_r.png",startTime:1584892800,endTime:1585151999,officePreview:!1,zaCardShowId:8227,zaClickId:8228};var Ve=function(){var e=Object(o.useRef)(),t=function(){var e=qe,t=e.startTime,n=e.endTime,r=e.officePreview,o=Object(Ue.a)()&&r||Date.now()>=1e3*t&&Date.now()<=1e3*n;return Object.assign({},e,{enable:o})}(),n=t.url,i=t.imageUrl,a=t.zaCardShowId,c=t.zaClickId,s=t.enable;return Object(o.useEffect)((function(){a&&s&&S.a.trackCardShow(null,{id:a})}),[a,s]),s?Object(r.b)(x.d,{css:{display:"flex",flexDirection:"column"},children:Object(r.b)("a",{href:n,target:"_blank",rel:"noopener noreferrer",ref:e,"data-za-detail-view-id":c,css:{fontSize:0},children:Object(r.b)("img",{src:i,width:"100%",alt:""})})}):null},He=n(236),Ke=n(403);function Qe(e){var t=e.split(" ")[0].split("-"),n=Object(y.a)(t,3),r=n[0],o=n[1],i=n[2],a=e.split(" ")[1].split(":"),c=Object(y.a)(a,2),s=c[0],u=c[1];return new Date(r,o-1,i,s,u)}var We=Object(He.a)(null)((function(){var e=Object(o.useRef)(),t=Object(a.useDispatch)(),n=function(){var e=Object(a.useSelector)((function(e){var t,n;return null===(t=e.topstory)||void 0===t||null===(n=t.banner)||void 0===n?void 0:n.right})),t=Object(Ue.a)();if(!e)return null;var n=Qe(e.startTime),r=Qe(e.endTime),o=Date.now(),i=o>n.getTime()&&o<r.getTime(),c=t&&"1"===e.officePreview;return i||c?e:null}();if(Object(o.useEffect)((function(){t(Object(Ke.g)("right"))}),[t]),Object(o.useEffect)((function(){S.a.trackCardShow(null,{id:8227})}),[n]),!n)return null;var i=n.url,c=n.imageUrl;return Object(r.b)("a",{href:i,target:"_blank",rel:"noopener noreferrer",ref:e,"data-za-detail-view-id":8228,css:{fontSize:0,margin:"10px 10px -4px"},children:Object(r.b)("img",{src:c,width:"100%",height:"100%",alt:""})})})),Ge=n(1118),Ze=n(834),Ye=Object.assign;var Je=function(e){return i.a.createElement(z.a,Ye({width:"24",height:"24",viewBox:"0 0 24 24"},e),i.a.createElement("path",{d:"M12 2c5.523 0 10 4.477 10 10 0 1.49-.326 2.902-.91 4.172v4.464a.455.455 0 01-.454.455h-4.464A9.963 9.963 0 0112 22C6.477 22 2 17.523 2 12S6.477 2 12 2zm0 1.818a8.182 8.182 0 103.753 15.454h3.52v-3.52A8.182 8.182 0 0012 3.819zm0 4.546a3.636 3.636 0 110 7.272 3.636 3.636 0 010-7.272z",fillRule:"evenodd"}))},$e=n(396),Xe=function(){var e=Object(a.useDispatch)(),t=Object(o.useState)(1),n=Object(y.a)(t,2),i=n[0],c=n[1],s=Object(a.useSelector)((function(e){return e.club.explore.joinedClubs}))||{},u=s.data,l=void 0===u?[]:u,d=s.paging,f=(d=void 0===d?{}:d).totals,p=void 0===f?0:f,h=Math.ceil(p/4);Object(o.useEffect)((function(){e(Object($e.c)(!0,8))}),[e]),Object(o.useEffect)((function(){4*i!==l.length&&i!==h||e(Object($e.c)())}),[l.length,e,i,h]);var b=Object(o.useCallback)((function(e){window.open("/club/".concat(e))}),[]),v=Object(o.useCallback)((function(e){c("left"===e?1===i?1:i-1:i===h?h:i+1)}),[c,h,i]);if(0===l.length)return null;var m=l.slice(4*(i-1),4*i);return Object(r.c)("div",{className:"ClubSliderList",children:[Object(r.c)("div",{className:"ClubSliderList-header",children:[Object(r.b)(Je,{className:"ClubSliderList-icon",size:17}),Object(r.b)("span",{children:"我的圈子"})]}),Object(r.b)("div",{className:"ClubSliderList-list",children:m.map((function(e){return Object(r.c)("div",{onClick:function(){return b(e.id)},className:"ClubSliderList-item",children:[Object(r.b)("div",{className:"ClubSliderList-img",children:Object(r.b)("img",{src:e.avatar})}),Object(r.b)("span",{className:"ClubSliderList-name",children:e.name})]},e.id)}))}),p>0&&Object(r.c)("div",{className:"ClubSliderList-pagination",children:[Object(r.b)("button",{className:"ClubSliderList-arrow",onClick:function(){return v("left")},children:Object(r.b)(Ge.a,{center:!0,text:!0})}),Object(r.b)("span",{children:"".concat(i,"/").concat(h)}),Object(r.b)("button",{className:"ClubSliderList-arrow",onClick:function(){return v("right")},children:Object(r.b)(Ze.a,{center:!0,text:!0})})]})]})},et=n(1361),tt=n(1084),nt=n(1263),rt=n(1357),ot=n(368),it=n(24),at=function(e,t){return e.map((function(e){var n=t.find((function(t){return t.key===e.key}));return n?Object.assign({},e,n):e}))},ct=function(e){return e.topstory&&e.topstory.sidebar},st=Object(c.createSelector)(ct,N.h,(function(e,t){return at(Ee,[e&&{key:"pub",number:e.latestAddedBookCount},e&&{key:"org",number:e.latestRoundtableCount},{key:"infinity",visible:!t}].filter(Boolean))})),ut=Object(s.compose)(Object(He.a)(null),Object(ot.b)({module:"RightSideBar"}))(Object(o.memo)(lt));function lt(e){var t=e.preset,n=void 0===t?"old":t,i=e.omit,c=(i=void 0===i?{}:i).noNav,s=i.noWrite,u=i.noClub,p=i.noCreator,h=i.noBanner,b=i.noCategory,v=i.noAd,m=i.noCarouselAd,g=void 0===m||m,y=i.noBalance,O=void 0===y||y,j=i.noFooter,w=i.noAppBanner,C=Object(a.useDispatch)(),k=Object(a.useSelector)(ct),S=Object(a.useSelector)(N.b),x=Object(a.useSelector)(st),R=Object(nt.b)(nt.a.Question),E=function(e,t,n){return at(Re,[e&&{key:"star",number:e.unreadItemCountOfFollowedFavlist},t&&{key:"questionList",url:"/people/".concat(t.urlToken||t.id,"/following/questions"),number:t.followingQuestionCount},{key:"invite",url:n?"/creator/featured-question/invited":"/question/waiting?type=invite"},e&&{key:"balance",visible:!0},e&&{key:"coupon",visible:e.needShowGiftCertificate}].filter(Boolean))}(k,S,R),_=Object(a.useSelector)(N.h),A=Object(o.useRef)(null),T=!_&&!c;Object(o.useEffect)((function(){!k&&S&&C(Object(Ke.f)()),T&&C(Object(N.e)(["followingQuestionCount"]))}),[]);var I=Object(o.useCallback)((function(){var e,t;null===(e=A.current)||void 0===e||null===(t=e.check)||void 0===t||t.call(e)}),[]),M=tt.a;return"new"===n&&(M="div"),Object(r.c)(M,{className:l()("GlobalSideBar","GlobalSideBar--".concat(n)),offset:it.i+10,ref:A,children:[!s&&Object(r.b)(ae,{preset:n,creatorQuestionRightPass:R}),!u&&S&&Object(r.b)(Xe,{}),!p&&Object(r.b)(rt.a,{className:"GlobalSideBar-creator",iconStyle:"small",onHeightChange:I,showWallEProtectLink:"new"!==n}),_&&Object(r.b)(Fe,{}),!h&&Object(r.b)(Ve,{}),!b&&Object(r.b)(Ae,{categoryData:x,children:Object(r.b)(We,{})}),!O&&Object(r.b)(Ie,{items:E.filter((function(e){return["balance","coupon"].includes(e.key)}))}),!g&&Object(r.b)(Pe,{defaultItems:[{position:"new_home_up",key:"new_home_up",delay:0},{position:"new_home_bottom",key:"new_home_bottom",delay:1e3}],onHeightChange:I}),!v&&Object(r.b)(De,{position:"new_home_up",onHeightChange:I}),T&&Object(r.b)(Ne,{navData:E,onHeightChange:I}),!_&&!v&&Object(r.b)(De,{position:"new_home_bottom",delay:1e3,onHeightChange:I}),!w&&Object(r.b)(et.a,{type:"home"}),!j&&Object(r.b)(d.a,{children:Object(r.b)(f.a,{showHelpCenter:!T})})]})}},,function(e,t,n){"use strict";var r=n(40),o=n(2),i=n(1),a=n.n(i),c=n(25),s=n(90),u=n(11),l=n.n(u),d=n(1020),f=n(133),p=n(37),h=n(1263),b=n(131),v=Object.assign;var m=function(e){return a.a.createElement(b.a,v({width:"16",height:"16",viewBox:"0 0 16 16"},e),a.a.createElement("path",{d:"M8 3l.737.339.428.187.377.158.326.127c.15.055.282.1.395.133.55.161 1.297.157 2.237-.014l-.002 3.784c0 3.07-2.52 4.76-4.498 5.286-1.977-.527-4.498-2.216-4.498-5.286L3.5 3.93c.94.17 1.686.175 2.237.014C6.187 3.812 6.941 3.497 8 3zm2.38 3.066L7.599 8.834 6.32 7.566a.4.4 0 00-.554.554l1.55 1.55a.5.5 0 00.568 0l3.05-3.05a.4.4 0 00-.554-.554z"}))},g=n(13),y=n(14),O=n(15),j=n(16),w=n(9),C=n(840),k=n(795),S=n(834),x=n(28),R=n(1346),E=n.n(R);function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(w.a)(e);if(t){var o=Object(w.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(j.a)(this,n)}}var A=function(e){Object(O.a)(n,e);var t=_(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(y.a)(n,[{key:"componentDidMount",value:function(){x.a.trackCardShow(this,{id:4783})}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.linkClassName,r=e.hintClassName,a=e.children,c=e.title,s=e.entranceMessage,u=e.showRedDot,d=e.zaClickId,f="small"===e.iconStyle;return Object(o.b)(C.d,{className:l()("CreatorEntrance",t),children:Object(o.c)("a",{className:l()("CreatorEntrance-link",n,{"CreatorEntrance-Link--smallIcon":f}),href:"/creator",target:"_blank","data-za-detail-view-id":d,children:[Object(o.c)("div",{className:l()("CreatorEntrance-hint",r,{"CreatorEntrancePage-hint--smallIcon":f}),children:[f?Object(o.c)(i.Fragment,{children:[Object(o.b)(k.a,{className:"CreatorEntrance-creatorIcon"}),Object(o.b)("div",{className:"CreatorEntrance-text",children:Object(o.b)("div",{className:"CreatorEntrance-indexPageTitle",children:c})})]}):Object(o.c)(i.Fragment,{children:[Object(o.b)("img",{className:"CreatorEntrance-image",src:E.a,alt:"zhihu creator icon"}),Object(o.c)("div",{className:"CreatorEntrance-text",children:[Object(o.b)("div",{className:"CreatorEntrance-title",children:c}),Object(o.b)("div",{className:"CreatorEntrance-entranceMessage",children:s})]})]}),u&&Object(o.b)("div",{className:"CreatorEntrance-seen"}),Object(o.b)(S.a,{className:l()("CreatorEntrance-arrow",{"CreatorEntrance-arrow--smallIcon":f})})]}),a]})})}}]),n}(i.Component);A.defaultProps={iconStyle:"large"};var T=A,N=n(1323);function I(e){var t=e.onHeightChange,n=Object(h.b)(h.a.Analytics),r=Object(c.useSelector)((function(e){return e.creator.creatorStatistics}));Object(i.useEffect)((function(){n&&t&&t()}),[t,n]);var a=Object(c.useDispatch)();Object(i.useEffect)((function(){a(Object(f.lb)())}),[a]);var s=r||{},u=s.yesterdayReadCount,p=s.theDayBeforeYesterdayReadCount,b=s.yesterdayUpvotedCount,v=s.theDayBeforeYesterdayUpvotedCount;return Object(o.c)("div",{className:"ProfileSideCreator-analytics",children:[Object(o.c)("div",{className:"ProfileSideCreator-readCountItem",children:[Object(o.b)("div",{className:"ProfileSideCreator-readCountTitle",children:"昨日阅读（播放）数"}),Object(o.b)("div",{className:l()("ProfileSideCreator-readCountNumber",{"ProfileSideCreator-readCountNumber__isNull":null===u}),children:null===u?"计算中":Object(d.a)(u)}),Object(o.b)(N.b,{textClassName:"ProfileSideCreator-countDeltaText",deltaFixed:!0,originCount:u,compareCount:p,text:"较前日"})]}),Object(o.c)("div",{className:"ProfileSideCreator-readCountItem",children:[Object(o.b)("div",{className:"ProfileSideCreator-readCountTitle",children:"昨日赞同数"}),Object(o.b)("div",{className:l()("ProfileSideCreator-readCountNumber",{"ProfileSideCreator-readCountNumber__isNull":null===b}),children:null===b?"计算中":Object(d.a)(b)}),Object(o.b)(N.b,{textClassName:"ProfileSideCreator-countDeltaText",deltaFixed:!0,originCount:b,compareCount:v,text:"较前日"})]})]})}function M(e){return Object(o.c)(s.Link,Object.assign({href:"/creator/explore/wall-e",target:"_blank",display:"flex",alignItems:"center",fontSize:"12px",color:"GBL05A"},e,{children:["瓦力保镖为你的创作提供持续保护",Object(o.b)(m,{size:17,center:!0,css:{marginLeft:2}})]}))}t.a=function(e){var t=e.className,n=e.iconStyle,a=void 0===n?"large":n,u=e.showWallEProtectLink,l=void 0===u||u,d=e.onHeightChange,h=Object(i.useState)(!1),b=Object(r.a)(h,2),v=b[0],m=b[1],g=Object(c.useDispatch)(),y=Object(c.useSelector)(p.h),O=Object(c.useSelector)(f.ec),j=Object(c.useSelector)((function(e){return e.creator.applyStatus}));if(Object(i.useEffect)((function(){y||g(Object(f.ib)()).catch((function(){return null})).then((function(){m(!0)}))}),[g,y]),!v||0===j.creatorStatus||y)return null;var w=O?{zaClickId:6848,title:Object(o.c)(s.Flex,{css:{justifyContent:"space-between"},children:["创作中心",Object(o.b)(s.Text,{as:"span",sx:{color:"GBL01A"},children:"去开通"})]})}:{zaClickId:2288,title:Object(o.c)(s.Box,{children:["创作中心",j.level&&Object(o.c)(s.Text,{as:"span",sx:{color:"GBL01A",marginLeft:"8px"},children:["Lv ",j.level]})]}),entranceMessage:j.entranceMsg||"查看详细",children:Object(o.c)(o.a,{children:[Object(o.b)(I,{onHeightChange:d}),l&&"small"===a&&Object(o.b)(s.Box,{width:"100%",px:"8px",py:"10px",sx:{borderTop:"1px solid",borderColor:"GBK10A"},children:Object(o.b)(M,{})}),l&&"small"!==a&&Object(o.b)(s.Box,{width:"100%",px:"20px",children:Object(o.b)(M,{py:"12px",sx:{borderTop:"1px solid",borderColor:"GBK10A"}})})]})},C=w.title,k=w.entranceMessage,S=w.children,x=w.zaClickId;return Object(o.b)(T,{className:t,hintClassName:"ProfileSideCreator-creatorEntranceHint",title:C,entranceMessage:k,showRedDot:j.notification&&j.notification.accessed>0,zaClickId:x,iconStyle:a,children:S})}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return H}));var r=n(33),o=n.n(r),i=n(20),a=n.n(i),c=n(21),s=n.n(c),u=n(23),l=n.n(u),d=n(17),f=n.n(d),p=n(92),h=n.n(p),b=n(22),v=n.n(b),m=n(1),g=n.n(m),y=n(3),O=n.n(y),j=n(7),w=n(1344),C=n(1345),k=n(1366),S=n(842),x=n(28),R=n(41),E=n.n(R),_=n(951),A=n(1374),T="https://www.zhihu.com",N={qihoo_pc_js:"".concat(T,"/inner_bottom_360.html"),baidu_pc_js:"u6083616",default:"".concat(T,"/inner_bottom.html")},I={qihoo_pc_js:"".concat(T,"/inner_top_360.html"),baidu_pc_js:"u6083615",default:"".concat(T,"/inner_top.html")},M={qihoo_pc_js:"".concat(T,"/inner_top_360.html"),baidu_pc_js:"u6083615",default:"".concat(T,"/inner_top.html")},D={qihoo_pc_js:"".concat(T,"/inner_bottom_360.html"),baidu_pc_js:"u6083616",default:"".concat(T,"/inner_bottom.html")},L={qihoo_pc_js:"".concat(T,"/home_top_360.html"),baidu_pc_js:"u6083587",default:"".concat(T,"/home_top.html")},P={qihoo_pc_js:"".concat(T,"/home_bottom_360.html"),baidu_pc_js:"u6083608",default:"".concat(T,"/home_bottom.html")},z="".concat(T,"/home_bottom.html"),B={new_answer_down_sticky:N,new_answer_up:I,new_question_up:M,new_question_down_sticky:D,new_home_up:L,new_home_bottom:P},F="https://www.zhihu.com/commercial_api/banners_v3/",U={new_home_up:"home_up",new_home_bottom:"home_bottom",new_answer_up:"answer_up",new_answer_down_sticky:"answer_down_sticky",new_question_up:"question_up",new_question_down_sticky:"question_down_sticky"},q=n(936),V=function(e){function t(){var e,n;a()(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=l()(this,(e=f()(t)).call.apply(e,[this].concat(o)))).state={item:null},n.getAdsenseSource=function(e){var t=n.props.location,r=n.state.item.template,o=B[t];return o[r||e]||o.default||z},n.trackImpression=function(){var e=n.state.item;if(e){var t=Object(w.a)(e).ad,r=t.impressionTracks,o=t.debugTracks,i={impressionTracks:r,viewTracks:t.viewTracks,debugTracks:o};Object(q.d)(n.card,i)}},n.loadBannerRequest=function(e){var t=e.id,r=e.location,o=e.query,i=e.onLoadBanner;Object(S.k)({id:t,location:r,query:o,url:"".concat(F).concat(U[r])}).then((function(e){i(e),e&&n.setState({item:Object(C.b)({adjson:e},"pccard")})}))},n.load=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.props,t=e.delay;clearTimeout(n.loadTimeout),t>0?n.loadTimeout=setTimeout((function(){n.loadBannerRequest(e)}),t):n.loadBannerRequest(e)},n.handleIframeLoad=function(){setTimeout(n.props.onHeightChange,300)},n.handleImageLoad=function(){var e=n.state.item;if(e){n.debugTracks("image_onload"),n.trackImpression();var t=Object(w.a)(e).creative,r=Object(S.d)(t,"asset.landingUrl","");x.a.trackEvent(h()(n),{action:"Load"},{link:{url:r}}),setTimeout(n.props.onHeightChange,300)}},n.debugTracks=function(e){var t=n.state.item;if(t){var r=Object(w.a)(t).ad.debugTracks,o=void 0===r?[]:r,i={et:e},a=E.a.stringify(i);o.map((function(e){return e?Object(S.r)(a?"".concat(e).concat(e.includes("?")?"&":"?").concat(a):e):null}))}},n.handleClose=function(){var e=n.state.item;if(e){var t=Object(w.a)(e).ad.closeTracks,r=void 0===t?[]:t;Object(q.b)(r),n.hideImage()}},n.handleLog=function(e){var t=n.state.item,r=Object(w.a)(t),o=r.ad,i=r.creative,a=o.clickTracks,c=void 0===a?[]:a,s=Object(S.d)(i,"asset.landingUrl","");x.a.trackEvent(e.target,{action:"OpenUrl",url:window.location.href},{link:{url:s}}),Object(q.a)(c)},n.hideImage=function(){var e=n.card.offsetHeight;n.card.style.height="".concat(e,"px"),n.timeout=setTimeout((function(){n.card.classList.add("Pc-card--hidden"),n.card.style.height=0,n.timeout=setTimeout((function(){n.props.onHideImage(),n.props.onHeightChange()}),300)}),17)},n}return v()(t,e),s()(t,[{key:"componentDidMount",value:function(){this.load()}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.id,r=t.location,o=e.id,i=e.location;n===o&&r===i||(clearTimeout(this.timeout),this.setState({item:null}),this.load(e))}},{key:"render",value:function(){var e=this,t=this.state.item;if(!t)return null;var n=Object(w.a)(t),r=n.ad,o=void 0===r?{displayAdvertisingTag:"",template:""}:r,i=n.creative,a=void 0===i?{asset:{}}:i,c=o.expand.displayAdvertisingTag,s=o.template,u=a.asset,l=u.imgs,d=void 0===l?[]:l,f=u.landingUrl,p=void 0===f?"":f,h={title:"third_ad",className:"Banner-adsense",src:this.getAdsenseSource(s),adId:this.getAdsenseSource(s),scrolling:"no",frameBorder:"0",onLoad:this.handleIframeLoad};return g.a.createElement("div",{className:"Pc-card Card",ref:function(t){e.card=t}},g.a.createElement("a",{className:"Banner-link",href:p,target:"_blank",onClick:this.handleLog},Object(S.j)(s)?g.a.createElement(k.a,{value:h,template:s}):g.a.createElement(g.a.Fragment,null,c&&g.a.createElement("div",{className:"Banner-adTag"},"广告"),g.a.createElement("img",{className:"Banner-image",src:d[0],alt:"广告",onLoad:this.handleImageLoad,onError:function(){return e.debugTracks("image_onerror")},ref:function(t){e.image=t}}))),this.props.isMobile||g.a.createElement("div",{className:"Pc-card-button-close ",onClick:this.handleClose,"data-tooltip":"不再显示","data-tooltip-position":"bottom"},g.a.createElement(A.c,{name:"close",className:"Pc-card-button-close-svg "})))}}]),t}(m.Component);function H(e){return g.a.createElement(_.a,null,g.a.createElement(V,o()({},e,{data:Object(j.camelizeKeys)(e.data)})))}V.propTypes={id:O.a.string,location:O.a.string.isRequired,onLoadBanner:O.a.func,onHideImage:O.a.func,onHeightChange:O.a.func,isMobile:O.a.bool},V.defaultProps={isMobile:!1,onLoadBanner:function(){},onHideImage:function(){},onHeightChange:function(){}}},,function(e,t,n){"use strict";var r=n(13),o=n(14),i=n(15),a=n(16),c=n(9),s=n(2),u=n(3),l=n.n(u),d=n(1),f=n(840);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var h={unregistered:{url:"http://zhi.hu/BDXoI",qrcode:n(1143)},home:{url:"http://zhi.hu/BDXoI",qrcode:n(1143)},question:{url:"http://zhi.hu/BDXoI",qrcode:n(1143)}},b=function(e){Object(i.a)(n,e);var t=p(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"renderContent",value:function(){var e=this.props.type;return Object(s.b)(f.d,{className:"AppBanner",children:Object(s.b)("a",{className:"AppBanner-link",href:h[e].url,children:Object(s.c)("div",{className:"AppBanner-layout",children:[Object(s.b)("img",{className:"AppBanner-qrcode",src:h[e].qrcode,alt:"QR Code of Downloading Zhihu App"}),Object(s.c)("div",{className:"AppBanner-content",children:[Object(s.b)("div",{className:"AppBanner-title",children:"下载知乎客户端"}),Object(s.b)("div",{className:"AppBanner-description",children:"与世界分享知识、经验和见解"})]})]})})})}},{key:"render",value:function(){return this.context.currentUser?null:this.renderContent()}}]),n}(d.Component);b.contextTypes={currentUser:l.a.object},b.propTypes={type:l.a.oneOf(Object.keys(h)),getSidebar:l.a.func},b.defaultProps={type:"unregistered",getSidebar:function(){return null}};t.a=b},,,,function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(18),a=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm-2.762-5.37c.243.246.452.37.78.37.33 0 .576-.203.827-.443.25-.24 7.052-7.054 7.052-7.054a.988.988 0 0 0-.311-1.354.973.973 0 0 0-1.345.315l-6.222 6.077-2.31-2.418a.971.971 0 0 0-1.368-.19.988.988 0 0 0-.188 1.377s2.841 3.074 3.085 3.32z",fillRule:"evenodd"}))};a.defaultProps={name:"CheckCircle"},t.a=a},function(e,t,n){"use strict";var r=n(33),o=n.n(r),i=n(57),a=n.n(i),c=n(1),s=n.n(c);var u={baidu_pc_js:function(e){var t=e.value,n=void 0===t?{}:t,r=n.className,o=n.adId,i=n.onLoad,u=Object(c.useState)("_".concat(Math.random().toString(36).slice(2))),l=a()(u,1)[0];function d(){var e;(e=document.getElementById("baidu-ad-js"))||((e=document.createElement("script")).setAttribute("src","//cpro.baidustatic.com/cpro/ui/cm.js"),e.setAttribute("defer","defer"),e.setAttribute("id","baidu-ad-js"),document.body.appendChild(e)),window.slotbydup=window.slotbydup||[],window.slotbydup.push({id:o,container:l}),i&&i()}return Object(c.useEffect)((function(){d()}),[d]),s.a.createElement("div",{className:r},s.a.createElement("div",{id:l}))},goole_pc_js:function(e){var t=e.value;return s.a.createElement("iframe",o()({},t,{title:"google广告"}))},maozhua_pc_js:function(e){var t=e.value,n=void 0===t?{}:t;return s.a.createElement("iframe",o()({},n,{title:"猫爪广告"}))},ruoying_pc_js:function(e){var t=e.value,n=void 0===t?{}:t;return s.a.createElement("iframe",o()({},n,{title:"若影广告"}))}};t.a=function(e){var t=e.template,n=u[t];return s.a.createElement(n,e)}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(75),o=n(58);function i(e,t){Object(o.a)(2,arguments);var n=Object(r.a)(e),i=Object(r.a)(t);return n.getTime()<i.getTime()}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(75),o=n(58);function i(e,t){Object(o.a)(2,arguments);var n=Object(r.a)(e),i=Object(r.a)(t);return n.getTime()>i.getTime()}},function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(18),a=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M18 8c.1-3.308-2.592-6-5.9-6-3.308 0-6 2.692-6 6v2H5.002C4 10 4 11 4 11v9s0 2 2 2h12c2 0 2-1.97 2-1.97V11s0-1-1-1h-1V8zm-6-4c2.143.018 4.005 1.597 4 4v2H8V7.996C8.013 5.562 9.857 3.982 12 4z",fillRule:"evenodd"}))};a.defaultProps={name:"Lock"},t.a=a},function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(18),a=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M14.445 9h5.387s2.997.154 1.95 3.669c-.168.51-2.346 6.911-2.346 6.911s-.763 1.416-2.86 1.416H8.989c-1.498 0-2.005-.896-1.989-2v-7.998c0-.987.336-2.032 1.114-2.639 4.45-3.773 3.436-4.597 4.45-5.83.985-1.13 3.2-.5 3.037 2.362C15.201 7.397 14.445 9 14.445 9zM3 9h2a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V10a1 1 0 0 1 1-1z",fillRule:"evenodd"}))};a.defaultProps={name:"Like"},t.a=a},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return u}));var r=n(1301),o=(n(1282),n(33)),i=n.n(o),a=n(1),c=n.n(a);n(1136),n(1138);n(1137);n(1139),n(1140),n(1141),n(1142);function s(e){return c.a.createElement("svg",i()({xmlns:"http://www.w3.org/2000/svg"},e,{viewBox:"0 0 12 10"}),c.a.createElement("g",{fill:"none",fillRule:"evenodd",transform:"translate(-2 -3)"},c.a.createElement("rect",{width:"16",height:"16"}),c.a.createElement("rect",{width:"12",height:"2",x:"2",y:"3",fill:"#9FADC7",fillRule:"nonzero",rx:"1"}),c.a.createElement("rect",{width:"12",height:"2",x:"2",y:"7",fill:"#9FADC7",fillRule:"nonzero",rx:"1"}),c.a.createElement("rect",{width:"7",height:"2",x:"2",y:"11",fill:"#9FADC7",fillRule:"nonzero",rx:"1"})))}function u(e){return c.a.createElement("svg",i()({xmlns:"http://www.w3.org/2000/svg"},e,{viewBox:"0 0 12 12"}),c.a.createElement("path",{fill:"#9FADC7",d:"M3,2.66666667 L13,2.66666667 C13.5522847,2.66666667 14,3.11438192 14,3.66666667 L14,12.6600825 C14,13.2123673 13.5522847,13.6600825 13,13.6600825 C12.7827311,13.6600825 12.5713728,13.5893212 12.3979007,13.4585037 L8.60209931,10.596043 C8.24569125,10.3272712 7.75430875,10.3272712 7.39790069,10.596043 L3.60209931,13.4585037 C3.16114346,13.791034 2.53410906,13.7031377 2.2015788,13.2621819 C2.07076131,13.0887097 2,12.8773515 2,12.6600825 L2,3.66666667 C2,3.11438192 2.44771525,2.66666667 3,2.66666667 Z",transform:"translate(-2 -2)"}))}n(1283),n(1284),n(1285),t.c=r.a},,,function(e,t,n){"use strict";var r=n(13),o=n(14),i=n(15),a=n(16),c=n(9),s=n(2),u=n(3),l=n.n(u),d=n(1),f=n(25),p=n(11),h=n.n(p),b=n(1163),v=n(30),m=n(865),g=n(243),y=n(67),O=n(805),j=n(28),w=n(26),C=n(1319),k=n(24);function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var x=function(e){Object(i.a)(n,e);var t=S(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={modalShown:!1},e.handleSendMessage=function(){var t=e.props,n=t.onModalOpen,r=t.user.allowMessage,o=t.dispatch,i=t.doNotCheckAllowMessageSetting;r||void 0===r&&i?(e.setState({modalShown:!0}),n&&n()):o(Object(w.h)(k.T.blocked,"red")),j.a.trackEvent(Object(y.a)(e),{action:"Message",element:"Button",is_intent:!0})},e.handleCloseModal=function(){var t=e.props.onModalClose;e.setState({modalShown:!1}),t&&t()},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.user,n=e.preset,r=e.color,o=e.icon,i=e.label,a=e.className,c=e.tooltip,u=e.tooltipPreset,l=this.state.modalShown,d="3d198a56310c02c4a83efb9f4a4c027e"===t.id;return Object(s.c)(s.a,{children:[Object(s.b)(v.c,{preset:n,color:r,className:a,icon:o,label:i,onClick:this.context.authRequired(this.handleSendMessage,d?k.V.serviceAccountMessage:k.V.message),"data-tooltip":c,"data-tooltip-preset":u}),Object(s.b)(C.a,{memberHashId:t.id,handleCloseModal:this.handleCloseModal,isModalShow:l})]})}}]),n}(d.Component);x.propTypes={onModalOpen:l.a.func,onModalClose:l.a.func},x.defaultProps={preset:"outline",color:"grey",icon:O.a,label:"发私信",doNotCheckAllowMessageSetting:!1},x.contextTypes={authRequired:l.a.func};var R=Object(f.connect)()(x),E=n(120);function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var A=function(e){Object(i.a)(n,e);var t=_(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={reportModalShown:!1},e.handleShieldUser=function(){var t=e.props,n=t.user.urlToken,r=t.updateUserBlocking,o=t.showNotification;r(n,!1).then((function(){return o("屏蔽已取消")}))},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.user,r=t.user,o=r.urlToken,i=r.isBlocking,a=r.isOrg,c=t.className,u=t.buttonClassName,l=t.onModalOpen,d=t.onModalClose,f=this.context.authRequired,p=this.state.reportModalShown,y=h()("MemberButtonGroup",c);return i?Object(s.c)("div",{className:y,children:[Object(s.c)(v.c,{className:u,preset:"primary",color:"red",onClick:this.handleShieldUser,children:[Object(s.b)(b.a,{center:!0,text:!0})," 已屏蔽"]}),!a&&Object(s.c)(v.c,{className:u,onClick:f((function(){e.setState({reportModalShown:!0}),l&&l()}),k.V.report),children:["举报用户",Object(s.b)(g.a,{shown:p,onClose:function(){e.setState({reportModalShown:!1}),d&&d()},type:"member",urlToken:o,zaEnabled:!0})]})]}):Object(s.c)("div",{className:y,children:[Object(s.b)(m.a,{id:o,type:n.type,gender:n.gender,isFollowing:n.isFollowing,className:u,preset:m.a.PRESETS.primary}),Object(s.b)(R,{user:n,className:u,onModalOpen:l,onModalClose:d})]})}}]),n}(d.Component);A.contextTypes={authRequired:l.a.func},A.propTypes={user:l.a.object.isRequired,buttonClassName:l.a.string,onModalOpen:l.a.func,onModalClose:l.a.func};t.a=Object(f.connect)(null,{updateUserBlocking:E.n,showNotification:w.h})(A)},,,,,function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(18),a=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M2 8.437C2 5.505 4.294 3.094 7.207 3 9.243 3 11.092 4.19 12 6c.823-1.758 2.649-3 4.651-3C19.545 3 22 5.507 22 8.432 22 16.24 13.842 21 12 21 10.158 21 2 16.24 2 8.437z",fillRule:"evenodd"}))};a.defaultProps={name:"Heart"},t.a=a},,function(e,t,n){e.exports=n.p+"assets/MenuAnswer.b921bb5b.png"},function(e,t,n){e.exports=n.p+"assets/MenuArticle.238665f9.png"},function(e,t,n){e.exports=n.p+"assets/MenuPin.22db5689.png"},function(e,t,n){e.exports=n.p+"assets/MenuVideo.bf386b99.png"},,function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(18),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(e){return o.a.createElement(i.a,a({fill:"currentColor"},e),o.a.createElement("path",{d:"M12.75 6a.25.25 0 0 1 .25.25v4.969a.5.5 0 0 0 .213.41l4.156 2.908a.25.25 0 0 1 .061.349l-.86 1.228a.25.25 0 0 1-.348.062l-5.009-3.506a.5.5 0 0 1-.213-.41V6.25a.25.25 0 0 1 .25-.25h1.5z"}),o.a.createElement("path",{d:"M12 2c5.523 0 10 4.477 10 10s-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2zm0 2a8 8 0 1 0 0 16 8 8 0 0 0 0-16z",fillRule:"evenodd",clipRule:"evenodd"}))};c.defaultProps={name:"Time"},t.a=c},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(75),o=n(58);function i(e){Object(o.a)(1,arguments);var t=Object(r.a)(e),n=t.getDay();return n}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(75),o=n(58);function i(e){var t,n;if(Object(o.a)(1,arguments),e&&"function"==typeof e.forEach)t=e;else{if("object"!=typeof e||null===e)return new Date(NaN);t=Array.prototype.slice.call(e)}return t.forEach((function(e){var t=Object(r.a)(e);(void 0===n||n>t||isNaN(t))&&(n=t)})),n||new Date(NaN)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(75),o=n(58);function i(e){var t,n;if(Object(o.a)(1,arguments),e&&"function"==typeof e.forEach)t=e;else{if("object"!=typeof e||null===e)return new Date(NaN);t=Array.prototype.slice.call(e)}return t.forEach((function(e){var t=Object(r.a)(e);(void 0===n||n<t||isNaN(t))&&(n=t)})),n||new Date(NaN)}},function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(18),a=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M13.8 4.903h-3.6v.943c0 .314-.082.609-.228.864H13.8V4.903zm3.6 0h2.85c.414 0 .75.333.75.735v.337a.742.742 0 0 1-.75.735H17.4V4.903zm-10.8 0H3.75a.742.742 0 0 0-.75.735v.337c0 .404.336.735.75.735h3.082a1.721 1.721 0 0 1-.232-.864v-.943zM3 9.252c0-.407.335-.735.75-.735h16.5c.414 0 .75.33.75.737v10.274a.742.742 0 0 1-.75.736H3.75A.74.74 0 0 1 3 19.53V9.252zm4.5 1.975v1.807h1.8v-1.807H7.5zm0 4.516v1.807h1.8v-1.807H7.5zm3.6 0v1.807h1.8v-1.807h-1.8zm3.6 0v1.807h1.8v-1.807h-1.8zm-3.6-4.516v1.807h1.8v-1.807h-1.8zm3.6 0v1.807h1.8v-1.807h-1.8zM7.5 4.893c0-.494.4-.893.9-.893.497 0 .9.4.9.893V6.72c0 .494-.4.894-.9.894a.898.898 0 0 1-.9-.894V4.893zm7.2 0c0-.494.4-.893.9-.893.497 0 .9.4.9.893V6.72c0 .494-.4.894-.9.894a.898.898 0 0 1-.9-.894V4.893z"}))};a.defaultProps={name:"Calendar"},t.a=a},function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(18),a=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-1.25a8.75 8.75 0 1 0 0-17.5 8.75 8.75 0 0 0 0 17.5zm0-2.431a1.17 1.17 0 0 1-.846-.344 1.143 1.143 0 0 1-.354-.856c0-.328.118-.61.354-.847.236-.235.518-.353.846-.353.328 0 .61.115.846.344.236.23.354.515.354.856 0 .342-.118.626-.354.856-.236.229-.518.344-.846.344zm1.534-6.228c-.163.154-.755.587-.843 1.532-.09.518-.377.777-.857.777a.86.86 0 0 1-.63-.254c-.17-.17-.255-.421-.255-.755 0-.419 0-1.055.684-1.895.206-.231.485-.506.835-.825.307-.28 1.158-.941 1.152-1.674a1.357 1.357 0 0 0-.428-1.01c-.286-.273-.655-.41-1.106-.41-.528 0-.917.138-1.166.414-.25.277-.46.684-.634 1.222-.163.563-.472.845-.928.845a.896.896 0 0 1-.68-.295c-.185-.197-.278-.41-.278-.64 0-.473.147-.952.44-1.438.292-.486.72-.888 1.28-1.207C10.683 6.16 11.339 6 12.087 6c.696 0 2.318.166 3.078 1.487.291.459.436.957.436 1.495 0 .423-.134 1.218-.839 1.94-.228.23-.637.62-1.227 1.169z",fillRule:"evenodd"}))};a.defaultProps={name:"HelpOutline"},t.a=a},function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(18),a=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M10.241 19.313a.97.97 0 0 0-.77.2 7.908 7.908 0 0 1-3.772 1.482.409.409 0 0 1-.38-.637 5.825 5.825 0 0 0 1.11-2.237.605.605 0 0 0-.227-.59A7.935 7.935 0 0 1 3 11.25C3 6.7 7.03 3 12 3s9 3.7 9 8.25-4.373 9.108-10.759 8.063z",fillRule:"evenodd"}))};a.defaultProps={name:"Comment"},t.a=a},,,function(e,t,n){"use strict";var r=n(125);t.__esModule=!0,t.default=function(e,t){e.classList?e.classList.add(t):(0,o.default)(e,t)||("string"==typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))};var o=r(n(1401));e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")},e.exports=t.default},function(e,t,n){"use strict";function r(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}e.exports=function(e,t){e.classList?e.classList.remove(t):"string"==typeof e.className?e.className=r(e.className,t):e.setAttribute("class",r(e.className&&e.className.baseVal||"",t))}},function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(18),a=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M20.044 3H3.956C2.876 3 2 3.517 2 4.9c0 .326.087.533.236.896L10.216 19c.355.571.87 1.143 1.784 1.143s1.429-.572 1.784-1.143l7.98-13.204c.149-.363.236-.57.236-.896 0-1.386-.876-1.9-1.956-1.9z",fillRule:"evenodd"}))};a.defaultProps={name:"TriangleDown"},t.a=a},,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(1),o=n(34),i=Object(r.createContext)({}),a=n(126);t.a=Object(o.withRouter)((function(e){var t=e.to,n=e.router,o=Object(r.useContext)(i);return o.url||(o.url=t),Object(r.useEffect)((function(){Object(a.isAbsoluteUrl)(t)?window.location.replace(t):n.replace(t)}),[n,t]),null}))},,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(18),a=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M13.362 19.12l-1.951 1.73-.014.012a.595.595 0 0 1-.84-.078L9.178 19.12H7.481a2.985 2.985 0 0 1-2.966-3.292l.708-6.962c.151-1.489.348-2.183.789-2.891a3.963 3.963 0 0 1 1.635-1.481C8.395 4.126 9.103 4 10.596 4h5.923a2.985 2.985 0 0 1 2.966 3.292l-.708 6.962c-.151 1.488-.348 2.182-.789 2.89a3.963 3.963 0 0 1-1.635 1.482c-.748.367-1.456.494-2.949.494h-.042zm1.21-6.804a.198.198 0 0 1-.197-.23l.24-1.566a.199.199 0 0 1 .197-.169h1.01a.797.797 0 0 0 .795-.773.624.624 0 0 0-.624-.625h-.884a.198.198 0 0 1-.195-.233l.302-1.75a.676.676 0 0 0-.662-.789.9.9 0 0 0-.886.743l-.334 1.865a.199.199 0 0 1-.196.164h-1.62a.198.198 0 0 1-.196-.234l.314-1.748a.673.673 0 0 0-.659-.79.9.9 0 0 0-.886.743l-.334 1.865a.199.199 0 0 1-.195.164H8.51a.797.797 0 0 0-.795.773c0 .345.28.625.624.625h.942a.198.198 0 0 1 .197.23l-.24 1.566a.199.199 0 0 1-.197.17H7.979a.797.797 0 0 0-.794.772c0 .345.279.625.623.625h.959a.198.198 0 0 1 .196.23l-.308 1.968a.678.678 0 0 0 .666.78c.43 0 .796-.313.863-.74l.323-2.07a.199.199 0 0 1 .197-.168h1.64a.198.198 0 0 1 .196.23l-.306 1.96a.685.685 0 0 0 .673.788.883.883 0 0 0 .872-.748l.322-2.062a.199.199 0 0 1 .197-.168h1.01a.809.809 0 0 0 .805-.779.618.618 0 0 0-.618-.619h-.924zm-1.518-1.735l-.24 1.566a.199.199 0 0 1-.196.17h-1.623a.198.198 0 0 1-.197-.23l.24-1.567a.199.199 0 0 1 .197-.169h1.623a.198.198 0 0 1 .196.23z",fillRule:"evenodd"}))};a.defaultProps={name:"Hashtag"},t.a=a},function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(18),a=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M2.931 7.89c-1.067.24-1.275 1.669-.318 2.207l5.277 2.908 8.168-4.776c.25-.127.477.198.273.39L9.05 14.66l.927 5.953c.18 1.084 1.593 1.376 2.182.456l9.644-15.242c.584-.892-.212-2.029-1.234-1.796L2.93 7.89z",fillRule:"evenodd"}))};a.defaultProps={name:"Share"},t.a=a},function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(18),a=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M22.959 17.22c-1.686-3.552-5.128-8.062-11.636-8.65-.539-.053-1.376-.436-1.376-1.561V4.678c0-.521-.635-.915-1.116-.521L1.469 10.67a1.506 1.506 0 0 0-.1 2.08s6.99 6.818 7.443 7.114c.453.295 1.136.124 1.135-.501V17a1.525 1.525 0 0 1 1.532-1.466c1.186-.139 7.597-.077 10.33 2.396 0 0 .396.257.536.257.892 0 .614-.967.614-.967z",fillRule:"evenodd"}))};a.defaultProps={name:"Reply"},t.a=a},,function(e,t,n){"use strict";var r=n(13),o=n(14),i=n(15),a=n(16),c=n(9),s=n(2),u=n(3),l=n.n(u),d=n(1),f=n(90),p=n(176),h=n(367),b=n(1370),v=n(850),m=n(897),g=n(894),y=n(865),O=n(883),j=n(854),w=n(368);function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var k=function(e){Object(i.a)(n,e);var t=C(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={commentPattern:"fixed",commentsShown:!1,commentsAutoFocus:!0},e.handleCommentsShown=function(t,n){e.setState(n)},e.handleCommentsHide=function(){e.setState({commentsShown:!1})},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.preset,r=t.favlist,o=t.favlist,i=o.id,a=o.type,c=o.title,u=o.updatedTime,l=o.answerCount,d=o.followerCount,w=o.isFollowing,C=o.isPublic,k=o.creator,S=void 0===k?{}:k,x=o.commentCount,R=t.status,E=t.action,_=t.lastreadTouchable,A=t.zaInfos,T=A.follow,N=A.options,I=t.renderOptions,M=this.state,D=M.commentsShown,L=M.commentsAutoFocus,P=M.commentPattern,z="/collection/".concat(i),B=Object(s.b)("a",{href:z,target:"_blank",rel:"noopener noreferrer",children:c});if(n===v.c.plain)return Object(s.b)(v.e,{data:r,link:z,title:B});var F={id:i,type:a};return n===v.c.default?Object(s.b)(v.e,{data:r,link:z,title:Object(s.c)(f.Flex,{alignItems:"center",children:[B,!C&&Object(s.b)(f.Text,{color:"GBL05A",ml:".3em",children:Object(s.b)(b.a,{center:!0,size:18})})]}),meta:R||Object(s.c)(v.d,{children:["".concat(Object(p.toDateString)(u)," 更新"),"".concat(Object(h.formatNumber)(l)," 条内容"),"".concat(Object(h.formatNumber)(d)," 人关注")]}),extra:E}):Object(s.c)(v.e,{data:r,link:z,onRef:function(t){e.contentItem=t},title:B,lastreadTouchable:_,children:[Object(s.c)(v.b,{children:[Object(s.c)("div",{children:[Object(s.b)("span",{children:"关注数："}),Object(h.formatNumber)(d)]}),Object(s.c)("div",{children:[Object(s.b)("span",{children:"最后更新于："}),Object(p.toDateString)(u)]}),Object(s.c)("div",{children:[Object(s.b)("span",{children:"作者："}),Object(s.b)(j.a,{user:S})]})]},"favlist-item-cells"),Object(s.c)(v.a,{children:[Object(s.b)(y.a,Object.assign({},F,{isFollowing:w,zaId:T})),Object(s.b)(m.a,{onClick:this.handleCommentsShown,commentsShown:D,count:x}),Object(s.b)(O.a,Object.assign({},F,{title:c,authorName:S&&S.name})),I&&I((function(){return e.contentItem}),N)]},"favlist-item-actions"),Object(s.b)(g.a,{parent:r,commentPattern:P,shown:D,autoFocus:L,onClose:this.handleCommentsHide})]})}}]),n}(d.Component);k.propTypes={preset:l.a.oneOf(Object.values(v.c)),zaInfos:l.a.shape({follow:l.a.number,options:l.a.number}),renderOptions:l.a.func},k.defaultProps={preset:v.c.default,zaInfos:{}},t.a=Object(w.b)((function(e){var t=e.favlist,n=e.trackCardShow,r=void 0===n||n;return{module:"CollectionItem",card:{content:{type:"Collection",token:String(t.id),item_num:t.answerCount,follower_num:t.followerCount,publish_timestamp:1e3*t.updateTime,author_member_hash_id:(t.creator||{}).id}},trackCardShow:r}}))(k)},,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(32),o=n(13),i=n(14),a=n(15),c=n(16),s=n(9),u=n(2),l=n(1),d=n(11),f=n.n(d);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var o=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var h=function(e){Object(a.a)(n,e);var t=p(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.alt,o=Object(r.a)(e,["className","alt"]);return Object(u.b)("img",Object.assign({className:f()("ImageAlias",t),alt:n},o))}}]),n}(l.Component);t.a=h},,function(e,t,n){"use strict";var r=n(32),o=n(13),i=n(14),a=n(15),c=n(16),s=n(9),u=n(2),l=n(1),d=n(11),f=n.n(d),p=n(34),h=n(30);function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var o=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var v=function(e){Object(a.a)(n,e);var t=b(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.to,n=e.className,o=e.children,i=Object(r.a)(e,["to","className","children"]),a=f()("QuestionMainAction",n);return t?Object(u.b)(p.Link,Object.assign({to:t,className:a},i,{children:o})):Object(u.b)(h.c,Object.assign({className:a},i,{children:o}))}}]),n}(l.Component);t.a=v},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(18),a=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M10.786 8.41a8.938 8.938 0 0 0-3.968-2.528c-.305-1.719.814-3.337 2.442-3.741 1.221-.405 2.646.101 3.46 1.011 1.045 1.38.915 3.64.814 4.348-.102 1.315-1.221 3.034-1.323 3.135-.305-.809-.814-1.517-1.425-2.225zm-2.442 2.832c-1.526.202-3.052 1.01-4.171 2.123-1.12-.404-1.934-1.314-2.137-2.427-.316-2.427 1.526-3.64 2.849-3.842 1.628-.371 2.849.505 4.07 1.415 1.146 1.012 2.035 2.63 2.035 2.73-.916-.202-1.832-.1-2.646 0zm4.986.303c.509-.607.931-1.586 1.12-2.225.318-1.039.61-3.134.203-4.651 1.323-1.011 3.154-1.011 4.477.303 1.235 1.146 1.017 2.933.814 3.438-.663 1.581-1.933 2.326-3.256 2.832-1.221.404-3.256.303-3.358.303zm-2.645 1.011c-.51.607-.916 1.416-1.221 2.326-.407 1.314-.643 3.06-.102 4.55-1.323 1.011-3.256 1.011-4.477-.202-1.198-1.124-1.018-2.932-.814-3.438.599-1.605 1.933-2.326 3.256-2.831.916-.304 3.256-.405 3.358-.405zm9.259-1.82c1.017.404 1.933 1.315 2.035 2.427.233 2.57-1.526 3.64-2.849 3.842-1.526 0-2.85-.505-4.07-1.415-1.018-.81-2.035-2.528-2.035-2.63.916.203 1.831.102 2.645 0 1.628-.404 3.053-1.112 4.274-2.224zm-6.716 4.854c1.065 1.08 2.442 2.022 4.07 2.528.306 1.719-.814 3.235-2.442 3.741-1.22.405-2.645-.101-3.46-1.011-1.1-1.481-1.017-3.54-.915-4.247.102-1.315 1.221-3.034 1.323-3.135.305.708.721 1.44 1.424 2.124z"}))};a.defaultProps={name:"Org"},t.a=a},function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(18),a=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M16.036 4.994a1 1 0 0 0-.997-.995H9.032a.996.996 0 0 0-.997.996V12H5.03c-1.1 0-1.36.633-.578 1.416l6.878 6.878c.39.39 1.026.385 1.412 0l6.878-6.88c.782-.78.523-1.415-.58-1.415h-3.004V4.994z"}))};a.defaultProps={name:"SolidArrowDown"},t.a=a},,,,,,,,,function(e,t,n){"use strict";n.d(t,"b",(function(){return u}));var r=n(40),o=n(2),i=n(1),a=n(235),c=n.n(a),s=Object(i.createContext)([!0,c.a,c.a]);s.displayName="DisplayPriorityContext";var u=function(){return Object(i.useContext)(s)},l=function(e){var t=e.children,n=e.readyStatus,r=e.shownStatus,a=e.index,c=e.setReadyStatusList,u=Object(i.useRef)(n);Object(i.useEffect)((function(){u.current=n}),[n]);var l=Object(i.useCallback)((function(){"pending"===u.current&&c((function(e){return e.map((function(e,t){return t===a?"resolved":e}))}))}),[c,a]),d=Object(i.useCallback)((function(){"pending"===u.current&&c((function(e){return e.map((function(e,t){return t===a?"rejected":e}))}))}),[c,a]),f=Object(i.useMemo)((function(){return[r,l,d]}),[r,l,d]);return Object(o.b)(s.Provider,{value:f,children:t})};t.a=function(e){var t=e.children,n=Object(i.useState)((function(){return i.Children.map(t,(function(){return"pending"}))})),a=Object(r.a)(n,2),c=a[0],s=a[1],u=Object(i.useMemo)((function(){var e=!1;return c.map((function(t){return!e&&("rejected"!==t&&(e=!0,"pending"!==t))}))}),[c]);return Object(o.b)(o.a,{children:i.Children.map(t,(function(e,t){return Object(o.b)(l,{readyStatus:c[t],shownStatus:u[t],index:t,setReadyStatusList:s,children:e},t)}))})}},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(174),o=n(443),i=n(58);function a(e,t){Object(i.a)(2,arguments);var n=Object(r.a)(t);return Object(o.a)(e,6e4*n)}},,,,,,function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=s(n(1659)),i=s(n(1)),a=s(n(3)),c=(s(n(1660)),n(1661));function s(e){return e&&e.__esModule?e:{default:e}}a.default.any,a.default.func,a.default.node;var u=function(e){function t(n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,o));return i.performAppear=function(e,t){i.currentlyTransitioningKeys[e]=!0,t.componentWillAppear?t.componentWillAppear(i._handleDoneAppearing.bind(i,e,t)):i._handleDoneAppearing(e,t)},i._handleDoneAppearing=function(e,t){t.componentDidAppear&&t.componentDidAppear(),delete i.currentlyTransitioningKeys[e];var n=(0,c.getChildMapping)(i.props.children);n&&n.hasOwnProperty(e)||i.performLeave(e,t)},i.performEnter=function(e,t){i.currentlyTransitioningKeys[e]=!0,t.componentWillEnter?t.componentWillEnter(i._handleDoneEntering.bind(i,e,t)):i._handleDoneEntering(e,t)},i._handleDoneEntering=function(e,t){t.componentDidEnter&&t.componentDidEnter(),delete i.currentlyTransitioningKeys[e];var n=(0,c.getChildMapping)(i.props.children);n&&n.hasOwnProperty(e)||i.performLeave(e,t)},i.performLeave=function(e,t){i.currentlyTransitioningKeys[e]=!0,t.componentWillLeave?t.componentWillLeave(i._handleDoneLeaving.bind(i,e,t)):i._handleDoneLeaving(e,t)},i._handleDoneLeaving=function(e,t){t.componentDidLeave&&t.componentDidLeave(),delete i.currentlyTransitioningKeys[e];var n=(0,c.getChildMapping)(i.props.children);n&&n.hasOwnProperty(e)?i.keysToEnter.push(e):i.setState((function(t){var n=r({},t.children);return delete n[e],{children:n}}))},i.childRefs=Object.create(null),i.state={children:(0,c.getChildMapping)(n.children)},i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){this.currentlyTransitioningKeys={},this.keysToEnter=[],this.keysToLeave=[]},t.prototype.componentDidMount=function(){var e=this.state.children;for(var t in e)e[t]&&this.performAppear(t,this.childRefs[t])},t.prototype.componentWillReceiveProps=function(e){var t=(0,c.getChildMapping)(e.children),n=this.state.children;for(var r in this.setState({children:(0,c.mergeChildMappings)(n,t)}),t){var o=n&&n.hasOwnProperty(r);!t[r]||o||this.currentlyTransitioningKeys[r]||this.keysToEnter.push(r)}for(var i in n){var a=t&&t.hasOwnProperty(i);!n[i]||a||this.currentlyTransitioningKeys[i]||this.keysToLeave.push(i)}},t.prototype.componentDidUpdate=function(){var e=this,t=this.keysToEnter;this.keysToEnter=[],t.forEach((function(t){return e.performEnter(t,e.childRefs[t])}));var n=this.keysToLeave;this.keysToLeave=[],n.forEach((function(t){return e.performLeave(t,e.childRefs[t])}))},t.prototype.render=function(){var e=this,t=[],n=function(n){var r=e.state.children[n];if(r){var a="string"!=typeof r.ref,c=e.props.childFactory(r),s=function(t){e.childRefs[n]=t};c===r&&a&&(s=(0,o.default)(r.ref,s)),t.push(i.default.cloneElement(c,{key:n,ref:s}))}};for(var a in this.state.children)n(a);var c=r({},this.props);return delete c.transitionLeave,delete c.transitionName,delete c.transitionAppear,delete c.transitionEnter,delete c.childFactory,delete c.transitionLeaveTimeout,delete c.transitionEnterTimeout,delete c.transitionAppearTimeout,delete c.component,i.default.createElement(this.props.component,c,t)},t}(i.default.Component);u.displayName="TransitionGroup",u.propTypes={},u.defaultProps={component:"span",childFactory:function(e){return e}},t.default=u,e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=!("undefined"==typeof window||!window.document||!window.document.createElement);t.default=r,e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.nameShape=void 0,t.transitionTimeout=function(e){var t="transition"+e+"Timeout",n="transition"+e;return function(e){if(e[n]){if(null==e[t])return new Error(t+" wasn't supplied to CSSTransitionGroup: this can cause unreliable animations and won't be supported in a future version of React. See https://fb.me/react-animation-transition-group-timeout for more information.");if("number"!=typeof e[t])return new Error(t+" must be a number (in milliseconds)")}return null}};o(n(1));var r=o(n(3));function o(e){return e&&e.__esModule?e:{default:e}}t.nameShape=r.default.oneOfType([r.default.string,r.default.shape({enter:r.default.string,leave:r.default.string,active:r.default.string}),r.default.shape({enter:r.default.string,enterActive:r.default.string,leave:r.default.string,leaveActive:r.default.string,appear:r.default.string,appearActive:r.default.string})])},,function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(18),a=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M10.47 12.47l1.06 1.06a.25.25 0 0 1 0 .354L6.413 19h4.337a.25.25 0 0 1 .25.25v1.5a.25.25 0 0 1-.25.25h-7.5a.25.25 0 0 1-.25-.25v-7.5a.25.25 0 0 1 .25-.25h1.5a.25.25 0 0 1 .25.25v4.335l5.116-5.115a.25.25 0 0 1 .354 0zM20.75 3a.25.25 0 0 1 .25.25v7.5a.25.25 0 0 1-.25.25h-1.5a.25.25 0 0 1-.25-.25V6.413l-5.116 5.117a.25.25 0 0 1-.354 0l-1.06-1.06a.25.25 0 0 1 0-.354L17.585 5H13.25a.25.25 0 0 1-.25-.25v-1.5a.25.25 0 0 1 .25-.25h7.5z"}))};a.defaultProps={name:"FullscreenEnter"},t.a=a},function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(18),a=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M19.722 18a.249.249 0 0 1-.242-.2 1 1 0 0 0-.906-.797L18.5 17h-.875a5.135 5.135 0 0 1-.527 1.003L17 18c1.524 0 2.783 1.237 2.974 2.72a.25.25 0 0 1-.249.28h-1.503a.249.249 0 0 1-.242-.2 1 1 0 0 0-.906-.797L17 20H7c-.465 0-.855.375-.967.818a.243.243 0 0 1-.237.182H4.385c-.266 0-.386-.12-.374-.262a3 3 0 0 1 2.876-2.736h.014a5.162 5.162 0 0 1-.527-1.001L5.5 17c-.465 0-.855.374-.967.818a.243.243 0 0 1-.237.182H2.885c-.266 0-.386-.12-.374-.262a3 3 0 0 1 2.876-2.736L5.5 15H6L6 14.895a4.736 4.736 0 0 1-3.684-5.329l.03-.173.442-2.365a3 3 0 0 1 1.94-5.017.25.25 0 0 1 .27.25v1.514a.249.249 0 0 1-.2.245A1 1 0 1 0 5.98 5.2a.25.25 0 0 1 .245-.2h1.514a.25.25 0 0 1 .25.271 3 3 0 0 1-3.342 2.708l-.334 1.782a2.735 2.735 0 0 0 2.089 3.172 5.012 5.012 0 0 1 1.076-1.637 2.006 2.006 0 0 1-.426-1.754 1.972 1.972 0 0 1 1.492-1.491A2.003 2.003 0 0 1 11 10h2a2.002 2.002 0 0 1 2.457-1.949c.741.164 1.328.75 1.492 1.492.148.669-.039 1.299-.426 1.754a5.021 5.021 0 0 1 1.077 1.64 2.903 2.903 0 0 0 2.248-3.406l-.031-.139-.357-1.427a3 3 0 0 1-3.448-2.692.251.251 0 0 1 .25-.273h1.515c.118 0 .22.083.243.198a1 1 0 1 0 1.178-1.178.248.248 0 0 1-.198-.243V2.263c0-.148.126-.264.273-.251A3.001 3.001 0 0 1 21.27 6.96l.486 1.946a4.906 4.906 0 0 1-3.759 5.992c.002.033.002.068.002.102h.5c1.524 0 2.783 1.236 2.975 2.72a.25.25 0 0 1-.25.28h-1.503zM13.5 12h-3C9.12 12 8 13.344 8 15c0 1.614 1.061 2.929 2.391 2.997L10.5 18h3c1.38 0 2.5-1.344 2.5-3 0-1.614-1.061-2.929-2.392-2.997L13.5 12z",fillRule:"evenodd"}))};a.defaultProps={name:"Crab"},t.a=a},function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(18),a=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M12.9 11.433v-5.1a.9.9 0 1 0-1.8 0v6a.9.9 0 0 0 .9.9h4.8a.9.9 0 1 0 0-1.8h-3.9zM2.652 8.246a3.3 3.3 0 0 1 4.43-4.851 10.241 10.241 0 0 0-4.43 4.851zm14.266-4.851a3.3 3.3 0 0 1 4.43 4.851 10.241 10.241 0 0 0-4.43-4.851zM12 21.333a9 9 0 1 1 0-18 9 9 0 0 1 0 18z",fillRule:"evenodd"}))};a.defaultProps={name:"Clock"},t.a=a},function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(18),a=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M10.75 13a.25.25 0 0 1 .25.25v7.5a.25.25 0 0 1-.25.25h-1.5a.25.25 0 0 1-.25-.25v-4.337L3.883 21.53a.25.25 0 0 1-.354 0l-1.06-1.06a.25.25 0 0 1 0-.354L7.585 15 3.25 15a.25.25 0 0 1-.25-.25v-1.5a.25.25 0 0 1 .25-.25h7.5zm9.72-10.53l1.06 1.06a.25.25 0 0 1 0 .354l-5.117 5.115L20.75 9a.25.25 0 0 1 .25.25v1.5a.25.25 0 0 1-.25.25h-7.5a.25.25 0 0 1-.25-.25v-7.5a.25.25 0 0 1 .25-.25h1.5a.25.25 0 0 1 .25.25v4.335l5.116-5.115a.25.25 0 0 1 .354 0z"}))};a.defaultProps={name:"FullscreenExit"},t.a=a},function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(18),a=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M15.465 4.544l2.272.406c.67.12 1.193.644 1.313 1.313l.406 2.272c.042.231.132.45.266.643l1.32 1.894a1.624 1.624 0 0 1 0 1.856l-1.32 1.894a1.624 1.624 0 0 0-.266.643l-.406 2.272a1.624 1.624 0 0 1-1.313 1.313l-2.272.406c-.231.042-.45.132-.643.266l-1.894 1.32a1.624 1.624 0 0 1-1.856 0l-1.894-1.32a1.624 1.624 0 0 0-.643-.266l-2.272-.406a1.624 1.624 0 0 1-1.313-1.313l-.406-2.272a1.624 1.624 0 0 0-.266-.643l-1.32-1.894a1.624 1.624 0 0 1 0-1.856l1.32-1.894c.134-.193.224-.412.266-.643l.406-2.272c.12-.67.644-1.193 1.313-1.313l2.272-.406c.231-.042.45-.132.643-.266l1.894-1.32a1.624 1.624 0 0 1 1.856 0l1.894 1.32.643.266zM12 14.187c.526 0 .977-.209 1.351-.625.375-.416.562-.916.562-1.501V8.659c0-.584-.187-1.085-.562-1.501-.374-.416-.825-.625-1.35-.625-.527 0-.978.209-1.352.625a2.166 2.166 0 0 0-.562 1.501v3.402c0 .585.187 1.085.562 1.501.374.416.825.625 1.351.625zm3.436-3.159a.373.373 0 0 0-.278-.121c-.107 0-.199.04-.277.121a.402.402 0 0 0-.117.289v.82c0 .79-.27 1.466-.812 2.027-.54.562-1.191.843-1.952.843-.76 0-1.412-.281-1.953-.843a2.818 2.818 0 0 1-.81-2.027v-.82a.402.402 0 0 0-.118-.289.373.373 0 0 0-.277-.121c-.107 0-.2.04-.278.121a.401.401 0 0 0-.117.289v.82c0 .944.303 1.765.91 2.463.606.698 1.356 1.098 2.248 1.2v1.94c-.002.22.13.33.395.33s.397-.11.395-.33V15.8c.892-.102 1.642-.502 2.248-1.2.607-.698.91-1.52.91-2.463v-.82a.401.401 0 0 0-.117-.289z",fillRule:"evenodd"}))};a.defaultProps={name:"LabelRelevant"},t.a=a},function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(18),a=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M12.868 2.899l6.597 3.8c.537.31.868.881.868 1.5v7.602c0 .619-.33 1.19-.868 1.5l-6.597 3.8c-.537.31-1.199.31-1.736 0l-6.597-3.8a1.731 1.731 0 0 1-.868-1.5V8.199c0-.619.33-1.19.868-1.5l6.597-3.8a1.74 1.74 0 0 1 1.736 0zm-2.614 11.85a.29.29 0 0 1 .255.148l1.239 2.207a.289.289 0 0 0 .504 0l1.24-2.207a.29.29 0 0 1 .254-.148l2.52.023a.29.29 0 0 0 .253-.434l-1.284-2.192a.288.288 0 0 1 0-.292l1.284-2.192a.288.288 0 0 0-.253-.434l-2.52.023a.29.29 0 0 1-.255-.148l-1.239-2.207a.289.289 0 0 0-.504 0l-1.24 2.207a.29.29 0 0 1-.254.148l-2.52-.023a.29.29 0 0 0-.253.434l1.284 2.192a.288.288 0 0 1 0 .292L7.48 14.338a.288.288 0 0 0 .253.434l2.52-.023z",fillRule:"evenodd"}))};a.defaultProps={name:"LabelEditorRecommendation"},t.a=a},function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(18),a=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M3.85 5.266c1.093-.4 2.175-.6 3.245-.6 1.338 0 2.675.313 4.01.939a.6.6 0 0 1 .346.543v10.31a.24.24 0 0 1-.342.216c-1.337-.626-2.675-.94-4.014-.94-1.186 0-2.387.246-3.604.738a.6.6 0 0 1-.824-.557V6.957a1.8 1.8 0 0 1 1.182-1.69zm9.045.339c1.335-.626 2.672-.938 4.01-.938 1.07 0 2.152.2 3.246.6a1.8 1.8 0 0 1 1.182 1.69v8.958a.6.6 0 0 1-.824.557c-1.217-.492-2.418-.737-3.604-.737-1.339 0-2.677.313-4.014.94a.24.24 0 0 1-.342-.218V6.148a.6.6 0 0 1 .346-.543zm4.01 11.282c1.311 0 2.619.27 3.918.806.419.172.62.656.45 1.081a.813.813 0 0 1-1.065.457c-1.108-.457-2.207-.684-3.303-.684-1.08 0-2.163.22-3.254.664h.001a1.8 1.8 0 0 1-.649.121l-2.079.001c-.195 0-.39-.04-.568-.12-1.094-.445-2.18-.666-3.261-.666-1.096 0-2.195.227-3.303.684a.813.813 0 0 1-1.065-.457.834.834 0 0 1 .45-1.081c1.3-.536 2.607-.806 3.918-.806a10.009 10.009 0 0 1 3.391.604 3 3 0 0 0 1.025.18l.973.001a3 3 0 0 0 1.028-.18 10.01 10.01 0 0 1 3.393-.604z",fillRule:"evenodd"}))};a.defaultProps={name:"LabelWeekly"},t.a=a},function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(18),a=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M10.037 3.2h3.926c2.377 0 3.24.248 4.109.712a4.846 4.846 0 0 1 2.016 2.016c.464.87.712 1.732.712 4.109v3.926c0 2.377-.248 3.24-.712 4.109a4.846 4.846 0 0 1-2.016 2.016c-.87.464-1.732.712-4.109.712h-3.926c-2.377 0-3.24-.248-4.109-.712a4.846 4.846 0 0 1-2.016-2.016c-.464-.87-.712-1.732-.712-4.109v-3.926c0-2.377.248-3.24.712-4.109a4.846 4.846 0 0 1 2.016-2.016c.87-.464 1.732-.712 4.109-.712zM12 17.61a1.027 1.027 0 0 0 0-2.053A3.557 3.557 0 1 1 15.557 12a1.027 1.027 0 1 0 2.053 0A5.61 5.61 0 1 0 12 17.61z",fillRule:"evenodd"}))};a.defaultProps={name:"LabelDaily"},t.a=a},function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(18),a=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M15.712 4.011l2.435.435a1.74 1.74 0 0 1 1.407 1.407l.435 2.435c.044.247.141.482.285.688l1.414 2.03a1.74 1.74 0 0 1 0 1.989l-1.414 2.029a1.74 1.74 0 0 0-.285.688l-.435 2.435a1.74 1.74 0 0 1-1.407 1.407l-2.435.435a1.74 1.74 0 0 0-.688.285l-2.03 1.414a1.74 1.74 0 0 1-1.989 0l-2.029-1.414a1.74 1.74 0 0 0-.688-.285l-2.435-.435a1.74 1.74 0 0 1-1.407-1.407l-.435-2.435a1.74 1.74 0 0 0-.285-.688l-1.414-2.03a1.74 1.74 0 0 1 0-1.989l1.414-2.029a1.74 1.74 0 0 0 .285-.688l.435-2.435a1.74 1.74 0 0 1 1.407-1.407l2.435-.435a1.74 1.74 0 0 0 .688-.285l2.03-1.414a1.74 1.74 0 0 1 1.989 0l2.029 1.414.688.285zM11.875 8.84a4.21 4.21 0 1 0 0 8.42 4.21 4.21 0 0 0 0-8.42zm2.086 4.044l-.8.815.19 1.152c.063.386-.149.555-.487.37l-.989-.545-.988.544c-.332.183-.551.025-.486-.37l.188-1.15-.8-.816c-.268-.274-.192-.54.186-.598l1.106-.168.494-1.047c.166-.352.432-.359.601 0l.494 1.047 1.106.168c.37.057.46.319.185.598zm2.066-6.143h-2.65a.298.298 0 0 0-.291.217l-.817 1.504s1.75.098 2.782 1.027l1.22-2.298a.268.268 0 0 0 .062-.164c0-.158-.137-.286-.306-.286zM11.73 8.46l-.816-1.503a.298.298 0 0 0-.292-.217h-2.65c-.169 0-.306.128-.306.286a.27.27 0 0 0 .062.164l1.22 2.298c1.033-.929 2.782-1.027 2.782-1.027z"}))};a.defaultProps={name:"LabelProfessional"},t.a=a},function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(18),a=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M12.3 3a9.3 9.3 0 1 1 0 18.6 9.3 9.3 0 0 1 0-18.6zM7.209 9.9v2.075a.729.729 0 0 1 .194 1.43l-.104.022-.09.006v1.055l.008.109c.037.248.2.461.43.562l.103.036 8.725 2.365.098.02a.733.733 0 0 0 .801-.535l.02-.095.006-.097v-1.96a.729.729 0 0 1-.099-1.452l.099-.007-.008-.11a.733.733 0 0 0-.444-.566l-.105-.034L7.71 10.47l-.106-.03c-.233-.078-.361-.207-.39-.436L7.21 9.9zm7.277 4.993a.729.729 0 1 1-.001 1.458.729.729 0 0 1 0-1.458zm-2.55-2.188a1.094 1.094 0 1 1-.002 2.187 1.094 1.094 0 0 1 .002-2.187zm-2.422-1.07a.6.6 0 1 1 0 1.2.6.6 0 0 1 0-1.2zM12.925 7.2l-.108-.116a1.663 1.663 0 0 0-1.813-.355l-.14.067L7.554 8.56l-.089.057c-.41.307-.332.987.136 1.183l.1.032 8.806 2.156.058.007a.22.22 0 0 0 .19-.32l-.03-.043-2.024-2.363a.723.723 0 0 1-.379.107.703.703 0 0 1-.712-.694c0-.144.045-.278.122-.389l.063-.079-.87-1.014z",fillRule:"evenodd"}))};a.defaultProps={name:"Cheese"},t.a=a},function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(18),a=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M12.3 3a9.3 9.3 0 1 1 0 18.6 9.3 9.3 0 0 1 0-18.6zm4.5 15H7.2v.6h9.6V18zm-9.99-5.785l-.394 1.082c-.028.078.008.167.084.213l.04.02.678.247-.162.443 8.989 3.272.161-.444.678.247c.087.032.18.004.226-.063l.019-.036.393-1.082L6.81 12.215zm.25-.673l-.045.11 10.713 3.899c.326-.897-.162-1.906-1.097-2.311l-.119-.047-7.05-2.567c-.971-.353-2.02.056-2.403.916zm6.467-5.502l-1.462 4.895 2.255.821 2.026-4.69a1.5 1.5 0 1 0-2.82-1.026z",fillRule:"evenodd"}))};a.defaultProps={name:"Stamp"},t.a=a},function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(18),a=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M15.712 4.011l2.435.435a1.74 1.74 0 0 1 1.407 1.407l.435 2.435c.044.247.141.482.285.688l1.414 2.03a1.74 1.74 0 0 1 0 1.989l-1.414 2.029a1.74 1.74 0 0 0-.285.688l-.435 2.435a1.74 1.74 0 0 1-1.407 1.407l-2.435.435a1.74 1.74 0 0 0-.688.285l-2.03 1.414a1.74 1.74 0 0 1-1.989 0l-2.029-1.414a1.74 1.74 0 0 0-.688-.285l-2.435-.435a1.74 1.74 0 0 1-1.407-1.407l-.435-2.435a1.74 1.74 0 0 0-.285-.688l-1.414-2.03a1.74 1.74 0 0 1 0-1.989l1.414-2.029a1.74 1.74 0 0 0 .285-.688l.435-2.435a1.74 1.74 0 0 1 1.407-1.407l2.435-.435a1.74 1.74 0 0 0 .688-.285l2.03-1.414a1.74 1.74 0 0 1 1.989 0l2.029 1.414.688.285zM7.874 14.585l-.551 1.838a.204.204 0 0 0 .255.254l1.836-.55c.347-.105.662-.293.918-.548l4.46-4.462a.273.273 0 0 0 0-.385l-1.524-1.524a.273.273 0 0 0-.386 0l-4.46 4.461c-.256.256-.444.57-.548.916zm8.581-6.317l-.723-.723a.786.786 0 0 0-1.111 0l-.882.88a.262.262 0 0 0 0 .371l1.465 1.465a.262.262 0 0 0 .37 0l.881-.881a.786.786 0 0 0 0-1.112z",fillRule:"evenodd"}))};a.defaultProps={name:"BadgeWrite"},t.a=a},,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(13),o=n(14),i=n(15),a=n(16),c=n(9),s=n(2),u=n(1),l=n(25),d=n(40),f=n(67),p=n(3),h=n.n(p),b=n(11),v=n.n(b),m=n(94),g=n.n(m),y=n(28),O=n(177),j=n(30),w=n(134),C=n(798),k=n(840),S=n(920),x=n(135),R=n(376),E=n(368),_=n(913),A=n(1453),T=n(34),N=n(367),I=n(374),M=n(1080),D=n(1022);function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var P=function(e,t){return e&&e.replace(new RegExp(null==t?void 0:t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),(function(e){return"<em>".concat(e,"</em>")}))},z=function(e){Object(i.a)(n,e);var t=L(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={mounted:!1},e.handleInvite=function(){var t=e.props,n=t.user.urlToken,r=t.onInvite;y.a.trackEvent(Object(f.a)(e),{id:3314}),r(n)},e.getContainer=function(){return document.querySelector(".Modal-content .QuestionInvitation-content")},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.setState({mounted:!0})}},{key:"render",value:function(){var e=this.props,t=e.user,n=e.contributionsCount,r=e.topic,o=e.isInvited,i=e.keyword,a=e.reason,c=t.name,u=Object.assign({},t,{name:Object(s.b)(I.a,{inline:!0,html:P(c,i)})}),l=Object(s.b)(D.a,{user:u,status:a||(n?Object(s.c)("div",{children:["在话题 ",Object(s.b)(M.a,{topic:r})," 下有 ",Object(s.c)(T.Link,{to:"/people/".concat(t.urlToken,"/answers/topic/").concat(r.id),children:[Object(N.formatNumber)(n)," 个回答"]})]}):Object(s.b)(I.a,{html:t.headline})),action:Object(s.b)(j.c,{color:o?void 0:"blue",disabled:o,onClick:this.handleInvite,children:o?"已邀请":"邀请回答"}),meta:null}),d={module:"UserItem",index:this.props.index,content:{member_hash_id:t.id},view:{id:i?4436:4437},extra:{search:{raw_query:i||""}},trackCardShow:!0};return this.state.mounted?Object(s.b)(E.a,Object.assign({getContainer:this.getContainer},d,{children:l})):l}}]),n}(u.Component),B=n(850),F=n(31);function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var q=function(e){Object(i.a)(n,e);var t=U(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).handleClick=function(){var t=e.props,n=t.questionId,r=t.closeAutoInvite,o=t.openAutoInvite;return"close"===t.item.status?(y.a.trackEvent(null,{id:3313}),o(n)):r(n)},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props.item,t=void 0===e?{}:e,n=t.avatar,r=t.description,o=t.status,i=t.title,a="close"===o;return Object(s.b)(B.e,{data:t,image:Object(s.b)(O.a,{size:38,url:n}),title:i,meta:Object(s.b)(B.d,{children:r}),className:"AutoInviteItem-wrapper--desktop",extra:Object(s.b)(j.c,{preset:"link",className:a?"AutoInviteItem-button--closed":"AutoInviteItem-button--open",onClick:this.handleClick,children:a?"开启邀请":"已开启"})})}}]),n}(u.Component);q.propTypes={questionId:h.a.number.isRequired,item:h.a.object};var V=Object(l.connect)(null,{openAutoInvite:F.S,closeAutoInvite:F.d})(q),H=n(1113);function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var Q=function(e){var t=e.user;return Object(s.b)("div",{className:"InviteeItem",children:Object(s.c)("div",{className:"InviteeItem-content",children:[Object(s.b)(O.a,{url:t.avatarUrl,size:32,className:"InviteeItem-image"}),Object(s.b)("h4",{className:"InviteeItem-title",children:t.name})]})})},W=function(e){Object(i.a)(n,e);var t=K(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={expanded:!1,keyword:null},e.onChange=g()((function(t){e.props.onChange(t)}),300),e.handleChange=function(t){var n=t.target.value;e.setState({keyword:n}),n&&e.onChange(n)},e.handleExpand=function(){y.a.trackEvent(Object(f.a)(e),{action:"LoadMore",element:"Button"}),e.setState({expanded:!0})},e.handleInvite=function(t){var n=e.state.keyword;return(0,e.props.onInvite)(t,n)},e}return Object(o.a)(n,[{key:"renderHeader",value:function(){var e=this.props,t=e.invitees,n=(e.expandCount,Object(s.b)(w.a,{className:"QuestionInvitation-input",placeholder:"搜索你想邀请的人",onChange:this.handleChange,after:Object(s.b)(C.a,{size:18,fill:"grey"}),"data-tooltip":"也可以搜索职业、公司等资料","data-tooltip-position":"bottom"})),r=[t.length?Object(s.c)("span",{children:["你已邀请 ",Object(s.b)(x.a,{toggler:Object(s.c)(j.c,{className:"Invitees-toggler",preset:"plain",children:[Object(s.b)("span",{className:"Invitees-togglerUsers",children:t.slice(0,2).map((function(e,t){return Object(s.c)("span",{children:[0===t?"":"、",Object(s.b)("span",{children:e.name})]},t)}))}),t.length>2&&" 等 ".concat(t.length," 人")]}),toggleEvent:"hover",targetClassName:"Invitees-popover",arrowed:!0,children:Object(s.b)("div",{className:"Invitees",children:t.map((function(e){return Object(s.b)(Q,{user:e},e.urlToken)}))})})]}):Object(s.b)("h2",{className:"QuestionInvitation-title",children:"你可以邀请下面用户，快速获得回答"}),n],o=Object(d.a)(r,2),i=o[0],a=o[1];return Object(s.b)(H.a,{header:i,options:a})}},{key:"render",value:function(){var e=this,t=this.props,n=t.isFetching,r=t.isDrained,o=t.items,i=t.searchItems,a=t.expandCount,c=t.autoInvitationItem,u=t.question,l=(u=void 0===u?{}:u).id,d=this.state,f=d.expanded,p=d.keyword,h=p?i:o,b=Boolean((void 0===a||a>0)&&!p&&h.length&&c&&c.status),m=b?a-1:a,g=!m||f,y=a?k.d:"div";return Object(s.c)(y,{className:"QuestionInvitation",children:[this.renderHeader(),n?Object(s.b)("div",{className:v()("QuestionInvitation-content","QuestionInvitation-content--centered"),children:Object(s.b)(R.a,{})}):Object(s.c)("div",{className:v()("QuestionInvitation-content",{"QuestionInvitation-content--centered":!h.length}),children:[h.length?Object(s.b)(E.a,{module:"UserList",children:Object(s.c)(S.b,{children:[b&&Object(s.b)(V,{questionId:l,item:c}),(g?h:h.slice(0,m)).map((function(t){return Object(s.b)(S.a,{className:v()({"List-item--mobile":!1}),children:Object(s.b)(z,Object.assign({},t,{keyword:p,onInvite:e.handleInvite}))},t.user.urlToken)}))]})}):Object(s.c)(_.k,{children:[Object(s.b)(_.f,{}),Object(s.b)("div",{children:r?"没有可以邀请的人":"没有找到你想邀请的人"})]}),h.length>m&&!g&&Object(s.b)(A.a,{onClick:this.handleExpand,children:"更多推荐结果"})]})]})}}]),n}(u.Component);W.propTypes={expandCount:h.a.number,items:h.a.array,searchItems:h.a.array,onInvite:h.a.func.isRequired};var G=Object(E.b)({module:"InvitationFrame"})(W),Z=n(101);function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var J=function(e){Object(i.a)(n,e);var t=Y(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).handleChange=function(t){var n=e.props,r=n.question.id;(0,n.loadItems)(r,"invitationCandidates",{keyword:t})},e.handleInvite=function(t,n){e.props.updateInvitation(e.props.question.id,t,n?"search":"normal")},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.question,n=t.id,r=t.status,o=(r=void 0===r?{}:r).isLocked,i=r.isClose,a=r.isEvaluate,c=r.isSuggest,s=e.loadItems,u=e.loadAutoInvitation;e.isDrained||o||i||a||c||(s(n,"invitationCandidates"),s(n,"invitees"),u(n))}},{key:"render",value:function(){var e=this.props.question.status,t=e.isLocked,n=e.isClose,r=e.isEvaluate,o=e.isSuggest;return t||n||r||o?null:Object(s.b)(G,Object.assign({onChange:this.handleChange,onInvite:this.handleInvite},this.props))}}]),n}(u.Component);t.a=Object(l.connect)((function(e,t){var n=t.question.id,r=e.entities,o=r.users,i=r.topics,a=e.question,c=a.invitationCandidates,s=a.invitees,u=a.autoInvitation,l=function(e){var t=e.member,n=e.isInvited,r=e.topicContributions,a=e.reason,c=r&&r.sort((function(e,t){return t.contributionsCount-e.contributionsCount}))[0]||{},s=c.topic,u=c.contributionsCount;return{user:o[t],topic:i[s],isInvited:n,contributionsCount:u,reason:a}},d=c[n]||{isFetching:!1,isDrained:!1,items:[],searchItems:[]},f=d.isFetching,p=d.isDrained,h=d.items,b=d.searchItems,v=(s[n]||{items:[]}).items;return{isFetching:f,isDrained:p,items:h.map(l),searchItems:b.map(l),invitees:v.map((function(e){return o[e]})),autoInvitationItem:u[n]}}),{loadItems:Z.O,updateInvitation:Z.jb,loadAutoInvitation:Z.D})(J)},,,,function(e,t,n){"use strict";var r=n(2),o=n(1),i=n.n(o),a=n(131),c=Object.assign;var s=function(e){return i.a.createElement(a.a,c({viewBox:"0 0 15 15"},e),i.a.createElement("g",{fill:"#ffab2e",fillRule:"evenodd"},i.a.createElement("path",{d:"M10.925 14.302c.173.13.408.13.58-.002a.514.514 0 00.175-.572l-1.323-4.296 3.435-2.456c.175-.13.25-.36.185-.572a.5.5 0 00-.468-.36H9.275L7.96 1.754c-.064-.21-.21-.354-.46-.354-.14 0-1.027 3.53-.988 6.32.04 2.788.98 3.85.98 3.85l3.433 2.732z"}),i.a.createElement("path",{d:"M7.5 1.4a.47.47 0 00-.474.354l-1.318 4.29H1.49a.499.499 0 00-.467.36.523.523 0 00.185.572l3.42 2.463-1.307 4.286c-.066.21.004.44.176.572.172.13.407.132.58.003l3.42-2.734L7.5 1.4z"})))},u=Object.assign;var l=function(e){return i.a.createElement(a.a,u({width:"15",height:"15",viewBox:"0 0 15 15"},e),i.a.createElement("g",{fillRule:"evenodd"},i.a.createElement("path",{fill:"#d7d8d9",d:"M10.925 14.302c.173.13.408.13.58-.002a.514.514 0 00.175-.572l-1.323-4.296 3.435-2.456c.175-.13.25-.36.185-.572a.5.5 0 00-.468-.36H9.275L7.96 1.754c-.064-.21-.21-.354-.46-.354-.14 0-1.027 3.53-.988 6.32.04 2.788.98 3.85.98 3.85l3.433 2.732z"}),i.a.createElement("path",{fill:"#ffab2e",d:"M7.5 1.4a.47.47 0 00-.474.354l-1.318 4.29H1.49a.499.499 0 00-.467.36.523.523 0 00.185.572l3.42 2.463-1.307 4.286c-.066.21.004.44.176.572.172.13.407.132.58.003l3.42-2.734L7.5 1.4z"})))},d=Object.assign;var f=function(e){return i.a.createElement(a.a,d({viewBox:"0 0 15 15"},e),i.a.createElement("g",{fill:"#d7d8d9",fillRule:"evenodd"},i.a.createElement("path",{d:"M10.925 14.302c.173.13.408.13.58-.002a.514.514 0 00.175-.572l-1.323-4.296 3.435-2.456c.175-.13.25-.36.185-.572a.5.5 0 00-.468-.36H9.275L7.96 1.754c-.064-.21-.21-.354-.46-.354-.14 0-1.027 3.53-.988 6.32.04 2.788.98 3.85.98 3.85l3.433 2.732z"}),i.a.createElement("path",{d:"M7.5 1.4a.47.47 0 00-.474.354l-1.318 4.29H1.49a.499.499 0 00-.467.36.523.523 0 00.185.572l3.42 2.463-1.307 4.286c-.066.21.004.44.176.572.172.13.407.132.58.003l3.42-2.734L7.5 1.4z"})))};t.a=function(e){var t=e.score;if(0===t)return null;var n=Math.round(2*t)/2;return Object(r.b)("div",{className:"Rating",children:Array.from({length:5}).map((function(e,t){var o=function(e,t){return t>=e+1?s:t>=e+.5?l:f}(t,n);return Object(r.b)(o,{size:15},t)}))})}},,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(18),a=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M9.676 11.252c-.243.433-.542.85-.494 1.237.189 1.509 2.938 1.807 3.746 2.816.59.736.835 1.852.892 3.725.01.303 0 .97-.867.97H1.933c-.915 0-.925-.643-.915-.936.062-1.877.292-3.02.895-3.76.812-.994 3.743-1.267 3.872-2.872.03-.361-.246-.74-.493-1.18C3.917 8.802 3.39 4 7.466 4s3.506 4.941 2.21 7.252zm8.073.79l.002.641c1.57 1.766 4.47 1.307 4.851 3.166.125.61.328 1.538.384 3.232.009.284.014.919-.905.919-.92 0-5.523-.021-6.875-.019 0-2.806-.144-5.987-2.707-6.285.537-.331 1.725-.504 2.178-1.013l.002-.64c-.881.118-2.679-.541-2.679-.541.61-.64.747-1.387 1.192-4.317.355-2.93 2.835-2.903 3.022-2.903.187 0 2.667-.027 3.028 2.903.439 2.93.577 3.677 1.186 4.317 0 0-1.797.659-2.68.54z",fillRule:"evenodd"}))};a.defaultProps={name:"Users"},t.a=a},,,,,function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(18),a=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M4 10V8a1 1 0 1 1 2 0v2h2a1 1 0 0 1 0 2H6v2a1 1 0 0 1-2 0v-2H2a1 1 0 0 1 0-2h2zm10.455 2c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm-7 6c0-2.66 4.845-4 7.272-4C17.155 14 22 15.34 22 18v1.375c0 .345-.28.625-.625.625H8.08a.625.625 0 0 1-.625-.625V18z",fillRule:"evenodd"}))};a.defaultProps={name:"Invite"},t.a=a},,,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return u}));var r=n(4),o=n(1054),i=n(367),a=function(e){return{name:"description",property:"og:description",content:e}},c=function(e,t){var n=[];if(e&&e.content){var r=Object(o.c)(e.content,100);r&&n.push(a(r))}if(t){var i=t.map((function(e){return e.name})).join(",");i&&n.push({name:"keywords",content:i})}return n},s=function(e,t){var n=[];if(e&&e.detail){var i=Object(o.c)(e.detail,100);i&&n.push(a(i))}else t&&t.content&&n.push.apply(n,Object(r.a)(c(t)));if(e.topics){var s=e.topics.map((function(e){return e.name})).join(",");if(s){var u={name:"keywords",content:s};n.push(u)}}return n},u=function(e){if(e){var t=e.headline,n=void 0===t?"":t,r=e.answerCount,o=void 0===r?0:r,c=e.voteupCount,s=void 0===c?0:c,u="".concat(n," 回答数 ").concat(Object(i.formatNumber)(o),"，获得 ").concat(Object(i.formatNumber)(s)," 次赞同");return[a(u)]}return[]}},function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(18),a=function(e){return o.a.createElement(i.a,e,o.a.createElement("g",{fillRule:"evenodd"},o.a.createElement("path",{d:"M4.125 21h15.75c.621 0 1.125-.593 1.125-1.324 0-.73-.504-1.323-1.125-1.323H4.125c-.621 0-1.125.593-1.125 1.323C3 20.407 3.504 21 4.125 21z"}),o.a.createElement("path",{d:"M15.69 3.826c0-.457-.418-.826-.92-.826H9.23c-.508 0-.92.37-.92.827V9.64H5.538c-1.015 0-1.255.526-.533 1.175l6.344 5.709a1 1 0 0 0 1.302 0l6.344-5.71c.722-.648.483-1.175-.535-1.175h-2.77V3.826z",fillRule:"nonzero"})))};a.defaultProps={name:"StickyUnset"},t.a=a},function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(18),a=function(e){return o.a.createElement(i.a,e,o.a.createElement("g",{fillRule:"evenodd"},o.a.createElement("path",{d:"M4.125 3h15.75C20.496 3 21 3.593 21 4.324c0 .73-.504 1.323-1.125 1.323H4.125C3.504 5.647 3 5.054 3 4.324 3 3.593 3.504 3 4.125 3z"}),o.a.createElement("path",{d:"M15.69 20.174c0 .457-.418.826-.92.826H9.23c-.508 0-.92-.37-.92-.827V14.36H5.538c-1.015 0-1.255-.526-.533-1.175l6.344-5.709a1 1 0 0 1 1.302 0l6.344 5.71c.722.648.483 1.175-.535 1.175h-2.77v5.813z",fillRule:"nonzero"})))};a.defaultProps={name:"StickySet"},t.a=a},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(18),a=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M5.74 4h12.52c.961 0 1.74.775 1.74 1.73V16.27c0 .955-.779 1.73-1.74 1.73h-3.825l-1.658 2.044a1 1 0 0 1-1.554 0l-1.658-2.044H5.74C4.78 18 4 17.224 4 16.27V5.73C4 4.775 4.778 4 5.74 4zM7 8.98c0 .554.449.996 1.003.996h4.994A.992.992 0 0 0 14 8.981a.997.997 0 0 0-1.003-.995H8.003A.992.992 0 0 0 7 8.98zm0 4c0 .554.446.996.995.996h8.01a.993.993 0 0 0 .995-.995.993.993 0 0 0-.995-.995h-8.01A.993.993 0 0 0 7 12.98z",fillRule:"evenodd"}))};a.defaultProps={name:"Community"},t.a=a},function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(18),a=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M13.693 10.354l1.634-7.542c.195-.901-.16-1.083-.798-.39l-9.18 9.97c-.638.693-.377 1.254.582 1.254h5.376l-1.634 7.542c-.195.901.16 1.083.798.39l9.18-9.97c.638-.693.377-1.254-.582-1.254h-5.376z"}))};a.defaultProps={name:"Live"},t.a=a},function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(18),a=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M16 17.649V2.931a.921.921 0 0 0-.045-.283.943.943 0 0 0-1.182-.604L4.655 5.235A.932.932 0 0 0 4 6.122v14.947c0 .514.421.931.941.931H19.06c.52 0 .941-.417.941-.93V7.292a.936.936 0 0 0-.941-.931h-.773v12.834a.934.934 0 0 1-.83.924L6.464 21.416c-.02.002 2.94-.958 8.883-2.881a.932.932 0 0 0 .653-.886z",fillRule:"evenodd"}))};a.defaultProps={name:"Ebook"},t.a=a},function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(18),a=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M11.267 10.188h-2.69a.26.26 0 0 0-.261.26v.508c0 .149.117.26.262.26h2.896v1.54H8.578a.26.26 0 0 0-.262.259v.508c0 .15.117.26.262.26h2.896v2.31c0 .139.119.257.265.257h.522a.258.258 0 0 0 .265-.257v-2.31h2.896a.26.26 0 0 0 .262-.26v-.508a.257.257 0 0 0-.262-.26h-2.896v-1.54h2.896a.26.26 0 0 0 .262-.26v-.507a.257.257 0 0 0-.262-.26h-2.69l2.51-2.636a.26.26 0 0 0-.004-.366l-.423-.413a.253.253 0 0 0-.36.01L12 9.418 9.545 6.784a.248.248 0 0 0-.36-.011l-.423.413a.264.264 0 0 0-.004.366l2.509 2.636zM12 19.973c-1.101 0-2.16-.15-3.152-.43-.532.18-5.27 2.177-4.743 1.179.527-.998 1.58-2.746.806-3.25C3.11 15.936 2 13.822 2 11.486 2 6.8 6.477 3 12 3s10 3.8 10 8.487-4.477 8.486-10 8.486z"}))};a.defaultProps={name:"Infinity"},t.a=a},function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(18),a=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M21 9.749v9.91c0 .74-.604 1.341-1.35 1.341H4.35C3.604 21 3 20.4 3 19.659V9.319c0-.503.283-.963.733-1.193l4.892-2.5V3.341c0-.74.604-1.341 1.35-1.341.267 0 .527.078.749.225l9.675 6.408c.375.249.601.668.601 1.116zM8.297 8.307L5.372 9.802A.223.223 0 0 0 5.25 10v8.54c0 .124.1.224.225.224h8.586a.223.223 0 1 0 .124-.41l-4.959-3.259a1.339 1.339 0 0 1-.601-1.116V8.506a.224.224 0 0 0-.328-.199z"}))};a.defaultProps={name:"KnowledgeBase"},t.a=a},,,,,,,,function(e,t,n){"use strict";var r=i(n(1658)),o=i(n(1500));function i(e){return e&&e.__esModule?e:{default:e}}e.exports={TransitionGroup:o.default,CSSTransitionGroup:r.default}},function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=u(n(1)),i=u(n(3)),a=u(n(1500)),c=u(n(1662)),s=n(1502);function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}s.nameShape.isRequired,i.default.bool,i.default.bool,i.default.bool,(0,s.transitionTimeout)("Appear"),(0,s.transitionTimeout)("Enter"),(0,s.transitionTimeout)("Leave");var f=function(e){function t(){var n,r;l(this,t);for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=r=d(this,e.call.apply(e,[this].concat(a))),r._wrapChild=function(e){return o.default.createElement(c.default,{name:r.props.transitionName,appear:r.props.transitionAppear,enter:r.props.transitionEnter,leave:r.props.transitionLeave,appearTimeout:r.props.transitionAppearTimeout,enterTimeout:r.props.transitionEnterTimeout,leaveTimeout:r.props.transitionLeaveTimeout},e)},d(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){return o.default.createElement(a.default,r({},this.props,{childFactory:this._wrapChild}))},t}(o.default.Component);f.displayName="CSSTransitionGroup",f.propTypes={},f.defaultProps={transitionAppear:!1,transitionEnter:!0,transitionLeave:!0},t.default=f,e.exports=t.default},function(e,t){e.exports=function(){for(var e=arguments.length,t=[],n=0;n<e;n++)t[n]=arguments[n];if(0!==(t=t.filter((function(e){return null!=e}))).length)return 1===t.length?t[0]:t.reduce((function(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}))}},function(e,t,n){e.exports=n(59)(27)},function(e,t,n){"use strict";t.__esModule=!0,t.getChildMapping=function(e){if(!e)return e;var t={};return r.Children.map(e,(function(e){return e})).forEach((function(e){t[e.key]=e})),t},t.mergeChildMappings=function(e,t){function n(n){return t.hasOwnProperty(n)?t[n]:e[n]}e=e||{},t=t||{};var r={},o=[];for(var i in e)t.hasOwnProperty(i)?o.length&&(r[i]=o,o=[]):o.push(i);var a=void 0,c={};for(var s in t){if(r.hasOwnProperty(s))for(a=0;a<r[s].length;a++){var u=r[s][a];c[r[s][a]]=n(u)}c[s]=n(s)}for(a=0;a<o.length;a++)c[o[a]]=n(o[a]);return c};var r=n(1)},function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=f(n(1400)),i=f(n(1402)),a=f(n(1663)),c=n(1664),s=f(n(1)),u=f(n(3)),l=n(42),d=n(1502);function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var b=[];c.transitionEnd&&b.push(c.transitionEnd),c.animationEnd&&b.push(c.animationEnd);u.default.node,d.nameShape.isRequired,u.default.bool,u.default.bool,u.default.bool,u.default.number,u.default.number,u.default.number;var v=function(e){function t(){var n,r;p(this,t);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return n=r=h(this,e.call.apply(e,[this].concat(i))),r.componentWillAppear=function(e){r.props.appear?r.transition("appear",e,r.props.appearTimeout):e()},r.componentWillEnter=function(e){r.props.enter?r.transition("enter",e,r.props.enterTimeout):e()},r.componentWillLeave=function(e){r.props.leave?r.transition("leave",e,r.props.leaveTimeout):e()},h(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){this.classNameAndNodeQueue=[],this.transitionTimeouts=[]},t.prototype.componentWillUnmount=function(){this.unmounted=!0,this.timeout&&clearTimeout(this.timeout),this.transitionTimeouts.forEach((function(e){clearTimeout(e)})),this.classNameAndNodeQueue.length=0},t.prototype.transition=function(e,t,n){var r=(0,l.findDOMNode)(this);if(r){var a=this.props.name[e]||this.props.name+"-"+e,s=this.props.name[e+"Active"]||a+"-active",u=null,d=void 0;(0,o.default)(r,a),this.queueClassAndNode(s,r);var f=function(e){e&&e.target!==r||(clearTimeout(u),d&&d(),(0,i.default)(r,a),(0,i.default)(r,s),d&&d(),t&&t())};n?(u=setTimeout(f,n),this.transitionTimeouts.push(u)):c.transitionEnd&&(d=function(e,t){return b.length?b.forEach((function(n){return e.addEventListener(n,t,!1)})):setTimeout(t,0),function(){b.length&&b.forEach((function(n){return e.removeEventListener(n,t,!1)}))}}(r,f))}else t&&t()},t.prototype.queueClassAndNode=function(e,t){var n=this;this.classNameAndNodeQueue.push({className:e,node:t}),this.rafHandle||(this.rafHandle=(0,a.default)((function(){return n.flushClassNameAndNodeQueue()})))},t.prototype.flushClassNameAndNodeQueue=function(){this.unmounted||this.classNameAndNodeQueue.forEach((function(e){e.node.scrollTop,(0,o.default)(e.node,e.className)})),this.classNameAndNodeQueue.length=0,this.rafHandle=null},t.prototype.render=function(){var e=r({},this.props);return delete e.name,delete e.appear,delete e.enter,delete e.leave,delete e.appearTimeout,delete e.enterTimeout,delete e.leaveTimeout,delete e.children,s.default.cloneElement(s.default.Children.only(this.props.children),e)},t}(s.default.Component);v.displayName="CSSTransitionGroupChild",v.propTypes={},t.default=v,e.exports=t.default},function(e,t,n){"use strict";var r=n(125);t.__esModule=!0,t.default=void 0;var o,i=r(n(1501)),a="clearTimeout",c=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-u)),r=setTimeout(e,n);return u=t,r},s=function(e,t){return e+(e?t[0].toUpperCase()+t.substr(1):t)+"AnimationFrame"};i.default&&["","webkit","moz","o","ms"].some((function(e){var t=s(e,"request");if(t in window)return a=s(e,"cancel"),c=function(e){return window[t](e)}}));var u=(new Date).getTime();(o=function(e){return c(e)}).cancel=function(e){window[a]&&"function"==typeof window[a]&&window[a](e)};var l=o;t.default=l,e.exports=t.default},function(e,t,n){"use strict";var r=n(125);t.__esModule=!0,t.default=t.animationEnd=t.animationDelay=t.animationTiming=t.animationDuration=t.animationName=t.transitionEnd=t.transitionDuration=t.transitionDelay=t.transitionTiming=t.transitionProperty=t.transform=void 0;var o,i,a,c,s,u,l,d,f,p,h,b=r(n(1501)),v="transform";if(t.transform=v,t.animationEnd=a,t.transitionEnd=i,t.transitionDelay=l,t.transitionTiming=u,t.transitionDuration=s,t.transitionProperty=c,t.animationDelay=h,t.animationTiming=p,t.animationDuration=f,t.animationName=d,b.default){var m=function(){for(var e,t,n=document.createElement("div").style,r={O:function(e){return"o"+e.toLowerCase()},Moz:function(e){return e.toLowerCase()},Webkit:function(e){return"webkit"+e},ms:function(e){return"MS"+e}},o=Object.keys(r),i="",a=0;a<o.length;a++){var c=o[a];if(c+"TransitionProperty"in n){i="-"+c.toLowerCase(),e=r[c]("TransitionEnd"),t=r[c]("AnimationEnd");break}}!e&&"transitionProperty"in n&&(e="transitionend");!t&&"animationName"in n&&(t="animationend");return n=null,{animationEnd:t,transitionEnd:e,prefix:i}}();o=m.prefix,t.transitionEnd=i=m.transitionEnd,t.animationEnd=a=m.animationEnd,t.transform=v=o+"-"+v,t.transitionProperty=c=o+"-transition-property",t.transitionDuration=s=o+"-transition-duration",t.transitionDelay=l=o+"-transition-delay",t.transitionTiming=u=o+"-transition-timing-function",t.animationName=d=o+"-animation-name",t.animationDuration=f=o+"-animation-duration",t.animationTiming=p=o+"-animation-delay",t.animationDelay=h=o+"-animation-timing-function"}var g={transform:v,end:i,property:c,timing:u,delay:l,duration:s};t.default=g},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return Oe}));var r=n(2),o=n(156),i=n(424),a=n(0),c=n(40),s=n(1),u=n(3),l=n.n(u),d=n(25),f=n(30),p=n(74),h=n(37),b=n(101),v=n(26),m=n(415),g=[{value:"标点或格式错误",text:"标点或格式错误"},{value:"不构成提问",text:"不构成提问"},{value:"包含主观判断",text:"包含主观判断"},{value:"缺乏可信来源",text:"缺乏可信来源"},{value:"other",text:"其他"}],y=[{title:"为什么修改问题？",subtitle:"请选择修改理由"},{title:"修改问题",subtitle:"描述精确的问题更易得到解答"},{title:"其他",subtitle:"请对你的举报补充说明"}],O=l.a.shape({level:l.a.oneOf(["error","warning"]),text:l.a.string}),j=n(388),w=n.n(j),C="form.setInput",k="form.setState",S="form.setErrors",x="ui.setState",R="reset",E={step:0,title:"",detail:{toHTML:function(){return""}},topics:[],reason:g[0].value,otherReason:"",onceChanged:!1,videoQuestionConfirmShown:!1,videoQuestionConfirmAllowContinue:!1,videoQuestionConfirmTitle:"",videoQuestionConfirmText:"",uploadModalShown:!1,errors:{title:null,detail:null,reason:null,topics:null}};function _(e,t){var n=t.type,r=t.payload;switch(n){case C:var o,i=Object(c.a)(r,2),s=i[0],u=i[1];return Object.assign({},e,(o={},Object(a.a)(o,s,u),Object(a.a)(o,"onceChanged",function(e,t){var n=Object(c.a)(t,2),r=n[0],o=n[1];if(e.onceChanged)return!0;var i=e[r];return"reason"===r?1===e.step&&e.reason===o:"topics"===r?!w()(o,i):i!==o}(e,r)),o));case k:return Object.assign({},e,r);case S:return Object.assign({},e,{errors:Object.assign({},e.errors,r)});case x:var l=Object(c.a)(r,2),d=l[0],f=l[1];return Object.assign({},e,Object(a.a)({},d,f));case R:return Object.assign({},E);default:return e}}var A=function(e,t){var n=Object(s.useRef)();Object(s.useEffect)((function(){n.current=t}));var r=Object(s.useState)(e),o=Object(c.a)(r,2),i=o[0],a=o[1];return Object(s.useEffect)((function(){e!==i&&(n.current([e,i]),a(e))}),[e,i]),null},T=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.errors;if(!t||"title"===t){var o=e.title,i=null;0!==o.length||n?o.length>51?i={level:"error",text:"问题标题超出 ".concat(o.length-51," 个字")}:o.length>0&&o.length<3?i={level:"error",text:"问题字数太少了吧"}:o.length>0&&-1===o.indexOf("?")&&-1===o.indexOf("？")?i={level:"error",text:"你还没有给问题添加问号"}:(o.match(/(\?|？)/g)||[]).length>1&&(i={level:"warning",text:"多个问题建议拆分"}):i={level:"error",text:"问题标题不能为空"},r=Object.assign({},r,{title:i})}if(!t||"reason"===t){var a=e.reason,c=e.otherReason,s=null;a&&("other"!==a||c)||(s={level:"error",text:a?"必填":"必选"}),r=Object.assign({},r,{reason:s})}if((!t||"topics"===t)&&e.topics){var u=e.topics,l=null;0!==u.length||n||(l={level:"error",text:"至少添加一个话题"}),r=Object.assign({},r,{topics:l})}return r},N=n(834),I=n(152),M=function(e){var t=e.onSelect,n=Object(I.b)();return Object(r.b)("div",{children:g.map((function(e){return Object(r.c)("div",{css:{display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer",lineHeight:"48px",boxShadow:"inset 0 -1px 0 0 ".concat(n.colors.GBK10A),"&:last-child":{marginBottom:"16px"}},onClick:function(){return t(e.value)},children:[e.text,Object(r.b)(N.a,{css:{fill:n.colors.GBL05A}})]},e.value)}))})};M.propTypes={onSelect:l.a.func.isRequired};var D=M,L=function(e){var t=e.title,n=e.text,o=e.shown,i=e.allowConfirm,a=void 0===i||i,c=e.onSubmit,s=e.onClose,u=e.buttonText,l=void 0===u?{}:u;return Object(r.b)(p.b,{title:t,onClose:s,children:o&&Object(r.c)("div",{color:"GBK03A",css:{margin:"50px 16px 0",fontSize:"20px",textAlign:"center"},children:[n,Object(r.c)(p.a,{children:[a&&Object(r.b)(f.c,{preset:"primary",color:"blue",onClick:c,children:l.ok||"确认"}),Object(r.b)(f.c,{onClick:s,children:l.cancel||"取消"})]})]})})};L.propTypes={title:l.a.string,text:l.a.string,shown:l.a.bool,allowConfirm:l.a.bool,onSubmit:l.a.func.isRequired,onClose:l.a.func.isRequired,buttonText:l.a.shape({ok:l.a.string,cancel:l.a.string})};var P=L,z=n(90),B=n(134),F=n(32),U=function(e){var t=e.children,n=e.css,o=Object(F.a)(e,["children","css"]);return Object(r.b)(z.Flex,Object.assign({alignItems:"center",mb:"8px",color:"GBL05A",css:n},o,{children:t}))},q=function(e){var t=e.children,n=e.css,o=Object(F.a)(e,["children","css"]);return Object(r.b)(z.Box,Object.assign({ml:"auto",css:n},o,{children:t}))},V=function(e){var t=e.children,n=e.css,o=Object(F.a)(e,["children","css"]);return Object(r.b)(z.Text,Object.assign({as:"span",color:"GBK03A",css:n},o,{children:t}))},H=function(e){var t=e.before,n=e.after,o=e.headerLabel,i=e.headerRight,a=e.children,c=Object(F.a)(e,["before","after","headerLabel","headerRight","children"]),s=o||i;return Object(r.c)(z.Box,Object.assign({mb:"12px",css:{"& .Popover":{display:"block"},"& .TagInput":{lineHeight:0}}},c,{children:[t,s&&Object(r.c)(U,{children:[o&&Object(r.b)(V,{children:o}),i&&Object(r.b)(q,{children:i})]}),a,n]}))};H.Header=U,H.HeaderLabel=V,H.HeaderRight=q;var K=H,Q={warning:"GYL01A",error:"GRD03A"},W=function(e){var t=e.children,n=e.level,o=Object(F.a)(e,["children","level"]);return Object(r.b)(z.Text,Object.assign({as:"span",color:Q[n]},o,{children:t}))},G=function(e){return Object(r.b)(i.a,{message:"一个未知的错误信息 ".concat(typeof e.children),children:Object(r.b)(W,Object.assign({},e))})},Z=W,Y=function(e){var t=e.onInputRef,n=e.title,o=e.onChange,i=e.onBlur,a=e.titleError,u=e.before,l=e.after,d=Object(s.useState)(!1),f=Object(c.a)(d,2),p=f[0],h=f[1],b=null;if(p){var v=51-n.length;v>=0?v<10&&(b="还可以输入 ".concat(v," 个字")):b=Object(r.c)(Z,{level:"error",children:["问题标题超出 ",-v," 个字"]})}else a&&(b=Object(r.b)(Z,{level:a.level,children:a.text}));var m=Object(s.useCallback)((function(e){h(!0),o&&o(e)}),[o]),g=Object(s.useCallback)((function(e){h(!1),i&&i(e)}),[i]),y=Object(s.useRef)();return Object(s.useEffect)((function(){setTimeout((function(){var e;return null===(e=y.current)||void 0===e?void 0:e.focus()}),60)}),[]),Object(r.c)(r.a,{children:[Object(r.b)(K,{children:Object(r.c)(z.Flex,{children:[u,Object(r.b)(B.a,{css:{border:"0 none",fontSize:"15px"},onRef:function(e){y.current=e,t(e)},required:!0,multiline:!0,spread:!0,large:!0,rows:2,placeholder:"问题标题",value:n,onChange:m,onBlur:g}),l]})}),b&&Object(r.b)(K,{headerRight:b})]})};Y.propTypes={onInputRef:l.a.func,title:l.a.string,titleError:O,onChange:l.a.func,onBlur:l.a.func};var J=Y,$=n(831),X=n(832),ee=n(828),te=n(246),ne=n(425),re=n(402),oe=function(e){var t=e.onEditableRef,n=e.defaultValue,o=e.onChange,i=e.detailError,a=e.isAnonymous,u=Object(d.useDispatch)(),l=Object(s.useCallback)((function(){return u(v.h.apply(void 0,arguments))}),[u]),f=Object(s.useRef)(),p=Object(s.useState)(!1),h=Object(c.a)(p,2),b=h[0],m=h[1],g=Object(s.useCallback)((function(){f.current&&f.current.handleKeyCommand("insert-image")}),[]),y=Object(s.useCallback)((function(){f.current&&f.current.handleKeyCommand("insert-video")}),[]),O=Object(s.useCallback)((function(e,t){Object(ne.b)(e,t,l,v.c)}),[l]),j=Object(s.useCallback)((function(e,t){switch(t){case"video":O("video-upload-error");break;case"image":O("image-upload-error",e)}}),[O]);return Object(r.c)(r.a,{children:[Object(r.b)(K,{mb:"16px",headerLabel:"问题描述（可选）：",headerRight:Object(r.c)(r.a,{children:[Object(r.b)(te.a,{label:"".concat(b?"收起":"展开","工具栏"),isActive:b,icon:$.a,onClick:function(){return m(!b)}}),Object(r.b)(te.a,{label:"插入图片",icon:X.a,onClick:g}),Object(r.b)(te.a,{label:"上传视频",icon:ee.a,onClick:y})]}),marginTop:"24px",children:Object(r.b)(re.a,{ref:function(e){f.current=e,t&&t(e)},allowDragAndDrop:!0,allowLinkCard:!0,minRows:2,allowToolbar:b,allowVideoTitleChange:!0,allowHeaderThree:!1,placeholder:"问题背景、条件等详细信息",defaultValue:n,onError:O,onUploadError:j,onChange:o,onBeforeVideoUpload:function(){return!a},editingContentType:"question"})}),i&&Object(r.b)(K,{headerRight:Object(r.b)(Z,{level:i.level,children:i.text})})]})};oe.propTypes={onEditableRef:l.a.func,defaultValue:l.a.string,detailError:O,onChange:l.a.func.isRequired,isAnonymous:l.a.bool};var ie=oe,ae=n(441),ce=n(398),se=function(e){var t=e.topic;return Object(r.b)(ae.a,{css:{marginRight:"8px"},children:Object(r.b)("a",{target:"_blank",rel:"noopener noreferrer",href:"//www.zhihu.com/topic/".concat(t.id||t.urlToken),children:t.name})})};function ue(e){var t=e.topics,n=void 0===t?[]:t,o=e.onChange,i=e.permitEditTopics,a=Object(s.useState)(null),u=Object(c.a)(a,2),l=u[0],d=u[1],f=Object(s.useState)(n),p=Object(c.a)(f,2),h=p[0],b=p[1],v=Object(s.useState)(!1),m=Object(c.a)(v,2),g=m[0],y=m[1],O=Object(s.useCallback)((function(e){var t;b(e);var n=null===(t=T({topics:e},"topics"))||void 0===t?void 0:t.topics;d(n),o&&o(e,n)}),[o]);return Object(r.c)(K,{mb:"24px",children:[l&&Object(r.b)(Z,{as:"div",level:l.level,children:l.text}),i?Object(r.b)(ce.a,{actived:g,value:h,onChange:O,onToggleActived:function(){return y(!g)}}):h.map((function(e){return Object(r.b)(se,{topic:e},e.name)}))]})}ue.propTypes={topics:l.a.arrayOf(l.a.object),onChange:l.a.func,permitEditTopics:l.a.bool};var le=ue,de=n(34),fe=n(178),pe=function(e){var t=e.onInputRef,n=e.questionType,o=e.reason,i=e.otherReason,a=e.onReasonChange,c=e.onInputChange,s=e.reasonError,u=Object(I.b)(),l=Boolean(!o&&s),d=Boolean("other"===o&&!i&&s);return Object(r.b)("div",{className:"EditQuestionReasonInput",children:Object(r.b)(K,{mb:"0",before:Object(r.c)(K.Header,{mb:"0",children:[Object(r.b)(fe.b,{css:{marginRight:"8px"},needsReposition:!0,plain:!0,text:o?null:"请选择一个修改理由",value:o,onChange:a,children:g.map((function(e){return Object(r.b)(fe.a,{value:e.value,text:e.text},e.value)}))}),l&&Object(r.b)(Z,{level:s.level,children:s.text}),!["org","commercial"].includes(n)&&Object(r.b)(K.HeaderRight,{children:Object(r.b)(de.Link,{className:"EditQuestion-whyEdit",target:"blank",to:"/question/19550238/answer/95068125",children:"为什么问题可以被公共编辑？"})})]}),children:"other"===o&&Object(r.b)(z.Box,{css:d&&{"& input::placeholder":{color:u.colors.GRD03A}},children:Object(r.b)(B.a,{onRef:t,spread:!0,large:!0,value:i,placeholder:"请输入修改理由（必填）",onChange:c})})})})};pe.propTypes={onInputRef:l.a.func,questionType:l.a.string.isRequired,reason:l.a.string,otherReason:l.a.string,reasonError:O,onReasonChange:l.a.func,onInputChange:l.a.func};var he=pe;function be(e){if(!e)return"提交修改时发生未知错误";if("string"==typeof e)return e;var t=e.status,n=e.message,r=e.name;return n?["Network request failed","Failed to fetch"].some((function(e){return n.indexOf(e)>-1}))?"提交修改时发生网络请求错误":n.startsWith("request http")?"提交修改时发生错误".concat(t?"："+t:""):"提交修改时发生错误：".concat(n):"提交修改时发生错误：".concat(r||"Unknown")}function ve(e){var t=e.onSuccess,n=e.onFailure,r=Object(d.useSelector)((function(e){var t=e.notification;return t[v.c]||t.updateQuestion}));return Object(s.useEffect)((function(){if(r){var e=r.id,o=r.code,i=r.text;e?t(e):n(function(e,t){switch(e){case 103003:return["title",{level:"error",text:"已经存在的问题"}];case 103001:return["detail",{level:"error",text:"过长的补充说明"}];default:return["overall",{text:be(t)}]}}(o,i))}}),[r]),null}ve.propTypes={onSuccess:l.a.func.isRequired,onFailure:l.a.func.isRequired};var me=function(e){return["title","reason","topics"].find((function(t){var n;return"error"===(null===(n=e[t])||void 0===n?void 0:n.level)}))};function ge(e){var t=e.onClose,n=e.show,o=e.id,i=e.title,u=e.detail,l=e.topics,g=e.questionType,O=e.isAnonymous,j=e.brand,w=e.permitEditTopics,N=Object(d.useSelector)(h.b),I=Object(d.useDispatch)(),M=Object(s.useCallback)((function(){return I(v.h.apply(void 0,arguments))}),[I]),L=Object(s.useRef)({titleInput:null,editable:null,reasonInput:null}),z=function(e){var t;if("title"===e)null===(t=L.current.titleInput)||void 0===t||t.focus();else if("reason"===e){var n;null===(n=L.current.reasonInput)||void 0===n||n.focus()}},B=Object(s.useReducer)(_,Object.assign({},E,{title:i,detail:u,topics:l})),F=Object(c.a)(B,2),U=F[0],q=F[1],V=U.step,H=U.title,K=U.reason,Q=U.otherReason,W=U.onceChanged,Z=U.uploadModalShown,Y=U.videoQuestionConfirmShown,$=U.videoQuestionConfirmAllowContinue,X=U.videoQuestionConfirmTitle,ee=U.videoQuestionConfirmText,te=U.errors,ne=te.title,re=te.detail,oe=te.reason,ae=te.overall;A(n,(function(e){Object(c.a)(e,1)[0]&&q({type:k,payload:{title:i,detail:{toHTML:function(){return u}},topics:l,onceChanged:!1}})}));var ce=Object(s.useCallback)((function(){q({type:R}),M("问题修改成功！"),t()}),[M,t]),se=Object(s.useCallback)((function(e){var t=Object(c.a)(e,2),n=t[0],r=t[1];q({type:S,payload:Object(a.a)({},n,r)}),z(n)}),[]),ue=Object(s.useMemo)((function(){return me(te)}),[te]),de=Object(s.useCallback)((function(e){var t=e.target.value;q({type:C,payload:["title",t]})}),[]),fe=Object(s.useCallback)((function(){q({type:S,payload:T({title:H},"title")})}),[H]),pe=Object(s.useCallback)((function(e){q({type:C,payload:["detail",e]})}),[]),be=Object(s.useCallback)((function(e,t){q({type:C,payload:["topics",e]}),q({type:S,payload:{topics:t}})}),[]),ge=Object(s.useCallback)((function(e){q({type:k,payload:{reason:e,step:1}}),"other"===e&&setTimeout((function(){return z("reason")}))}),[]),ye=Object(s.useCallback)((function(e){var t=e.target.value;q({type:C,payload:["otherReason",t]}),"reason"===ue&&t&&q({type:S,payload:{reason:null}})}),[ue]),Oe=Object(s.useCallback)((function(){var e;(null===(e=L.current.editable)||void 0===e?void 0:e.hasVideo("upload"))?q({type:x,payload:["uploadModalShown",!0]}):t()}),[t]),je=function(){var e=U.title,t=U.detail,n=U.topics,r=U.reason,i=U.otherReason,a={question:{title:e},meta:{reason:"other"===r?i:r}},c=t.toHTML();c!==u&&(a.question.detail=c),n!==l&&(a.question.topicUrlTokens=n.map((function(e){return e.urlToken||e.id}))),Object.keys(a.question).length>0&&I(Object(b.lb)(o,a))},we=function(){q({type:x,payload:["videoQuestionConfirmShown",!1]})},Ce=function(){q({type:x,payload:["uploadModalShown",!1]})},ke=Object(s.useCallback)((function(){Ce(),t()}),[t]),Se=Boolean(!W||ue),xe=0===V,Re=xe?y[0]:{css:{width:"595px","& .Modal-content":{paddingBottom:ae?0:"32px"}}};return Object(r.c)(r.a,{children:[Object(r.b)(ve,{onSuccess:ce,onFailure:se}),Object(r.b)(p.b,Object.assign({footer:ae&&Object(r.b)(G,{level:"error",children:ae.text}),onClose:Oe,hotKeyClosable:!1,maskClosable:!1},Re,{children:n&&(xe?Object(r.b)(D,{onSelect:ge}):Object(r.c)("div",{className:"QuestionAsk",children:[Object(r.b)(P,{title:X,text:ee,shown:Y,allowConfirm:$,onSubmit:function(){we(),je()},onClose:we,buttonText:{ok:"发布",cancel:"继续编辑"}}),Object(r.b)(P,{text:"关闭弹窗将丢失上传中的视频内容",shown:Z,onSubmit:ke,onClose:Ce}),Object(r.c)("form",{onSubmit:function(e){return e.preventDefault()},noValidate:!0,children:[Object(r.b)(J,{onInputRef:function(e){return L.current.titleInput=e},title:H,onChange:de,onBlur:fe,titleError:ne,before:Object(r.b)(m.a,{isAnonymous:O,questionType:g,brand:j,css:{flexShrink:0,marginTop:"3px",marginRight:"16px"}})}),Object(r.b)(ie,{onEditableRef:function(e){return L.current.editable=e},defaultValue:u,onChange:pe,detailError:re,isAnonymous:O}),Object(r.b)(le,{topics:l,onChange:be,permitEditTopics:w}),Object(r.b)(he,{onInputRef:function(e){return L.current.reasonInput=e},questionType:g,reason:K,otherReason:Q,reasonError:oe,onReasonChange:ge,onInputChange:ye}),Object(r.b)(p.a,{css:{marginTop:ae?"16px":"25px"},children:Object(r.b)(f.c,{preset:"primary",color:"blue",disabled:Se,onClick:function(){var e=T(U);q({type:S,payload:e});var t=me(e);if(t)z(t);else{var n=L.current.editable;if(!function(e,t){return e.hasVideo("upload")?(t("请等待视频上传完成后发布","red",v.c),!0):!!e.hasImage("upload")&&(t("请等待图片上传完成后发布","red",v.c),!0)}(n,M)){var r=function(e,t){return e.hasVideo()&&!t.isOrg?{videoQuestionConfirmShown:!0,videoQuestionConfirmAllowContinue:!0,videoQuestionConfirmText:"包含视频的编辑将在审核完成后生效，是否继续？"}:e.hasImage("error")||e.hasVideo("error")&&!e.hasVideo("error-review")?{videoQuestionConfirmShown:!0,videoQuestionConfirmAllowContinue:!1,videoQuestionConfirmTitle:"上传失败",videoQuestionConfirmText:"草稿中含有上传失败的内容，请更改后重新提交"}:e.hasVideo("error-review")||e.hasVideo("censor")?{videoQuestionConfirmShown:!0,videoQuestionConfirmAllowContinue:!1,videoQuestionConfirmTitle:"视频未通过审核",videoQuestionConfirmText:"视频中包含未通过审核的信息，请更改后重新提交"}:null}(n,N);r?q({type:k,payload:r}):je()}}},children:"提交修改"})})]})]}))}))]})}ge.propTypes={id:l.a.number,title:l.a.string,detail:l.a.string,topics:l.a.arrayOf(l.a.object),show:l.a.bool,onClose:l.a.func,isAnonymous:l.a.bool,brand:l.a.object,permitEditTopics:l.a.bool},ge.defaultProps={onClose:function(){}};var ye=ge;function Oe(e){return Object(r.b)(o.a,{children:Object(r.b)(i.a,{children:Object(r.b)(ye,Object.assign({},e))})})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return N}));var r=n(13),o=n(14),i=n(15),a=n(16),c=n(9),s=n(2),u=n(1),l=n(3),d=n.n(l),f=n(11),p=n.n(f),h=n(1371),b="TopicVoteCheckbox";function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var m=[0,1,2,3,4,5,6,7].map((function(e){return Object(s.b)("div",{className:"".concat(b,"-Sparkle")},e)}));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var y={Recommend:function(e){Object(i.a)(n,e);var t=v(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.onChange,r=e.checked,o=e.onClick,i=e.tooltipPosition;return Object(s.c)("div",Object.assign({className:p()(b,"".concat(b,"--recommend"),t),"data-tooltip":"推荐"},i&&{"data-tooltip-position":i},{children:[Object(s.b)("input",{id:"topic-recommend",type:"checkbox",checked:r,onChange:n,onClick:o}),Object(s.c)("label",{htmlFor:"topic-recommend",children:[Object(s.b)(h.a,{size:19}),m]})]}))}}]),n}(u.Component),Against:function(e){Object(i.a)(n,e);var t=g(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.onChange,r=e.checked,o=e.onClick,i=e.tooltipPosition;return Object(s.c)("div",Object.assign({className:p()(b,"".concat(b,"--against"),t),"data-tooltip":"不推荐"},i&&{"data-tooltip-position":i},{children:[Object(s.b)("input",{id:"topic-against",type:"checkbox",checked:r,onChange:n,onClick:o}),Object(s.b)("label",{htmlFor:"topic-against",children:Object(s.b)(h.a,{size:19})})]}))}}]),n}(u.Component)};function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var j=function(e){return e.stopPropagation()},w=function(e){Object(i.a)(n,e);var t=O(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.noAnimation,n=e.status,r=e.onVoteChange,o=e.tooltipPosition;return Object(s.b)("span",{className:"VotableTopicCard",onClick:j,children:Object(s.c)("span",{className:p()("VotableTopicCard-RecommendStatus",{"VotableTopicCard-VoteActions--noAnimation":t}),children:[Object(s.b)(y.Recommend,{className:"".concat("VotableTopicCard","-VoteCheckbox"),checked:"like"===n,onChange:function(e){r(e,"recommend")},tooltipPosition:o}),Object(s.b)(y.Against,{className:"".concat("VotableTopicCard","-VoteCheckbox"),checked:"dislike"===n,onChange:function(e){r(e,"unrecommend")},tooltipPosition:o})]})})}}]),n}(u.Component);w.propTypes={noAnimation:d.a.bool.isRequired,status:d.a.oneOf(["like","dislike","none"]).isRequired,noBorder:d.a.bool.isRequired,onVoteChange:d.a.func.isRequired,tooltipPosition:d.a.string};var C=w,k=n(28),S=n(367),x=n(24);function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var E="Upvote",_="UnUpvote",A="Downvote",T="UnDownvote",N=function(e){Object(i.a)(n,e);var t=R(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={noAnimation:!!e.props.metaInfo.vote&&"none"!==e.props.metaInfo.vote.status},e.handleVoteChange=e.context.authRequired((function(t,n){var r=e.props,o=r.metaInfo.vote.status,i=r.onUpdateVoteTopic;e.state.noAnimation&&e.setState({noAnimation:!1});var a={actionType:"",voteFor:"",method:""};"recommend"===n?"like"===o?(a.actionType=_,a.voteFor="like",a.method="DELETE"):(a.actionType=E,a.voteFor="like",a.method="POST"):"dislike"===o?(a.actionType=T,a.voteFor="dislike",a.method="DELETE"):(a.actionType=A,a.voteFor="dislike",a.method="POST"),a.actionType&&(k.a.trackEvent(t.target,{action:a.actionType,id:4176}),i(a))}),x.V.vote),e}return Object(o.a)(n,[{key:"renderVotableTopicCard",value:function(){var e=this.state.noAnimation,t=this.props,n=t.tooltipPosition,r=t.metaInfo,o=(r=void 0===r?{}:r).vote,i=(o=void 0===o?{}:o).status;return Object(s.b)(C,{noBorder:!0,status:i,noAnimation:e,onVoteChange:this.handleVoteChange,tooltipPosition:n})}},{key:"renderReviewCardExtraInfo",value:function(){var e=this.props,t=e.metaInfo,n=t.vote,r=t.meta.title,o=e.ReviewCardExtraInfoComponent,i=e.reviewerCountFormatter;if(!o)return null;var a,c=n.totalVotes,u=n.ratio,l=n.ratioStatus,d=n.status,f=(10*u).toFixed(1),p=i(c);return a="none"===d?"你推荐么？":"like"===d?"已推荐":"不推荐",Object(s.b)(o,{reviewerCount:p,insufficientText:a,percent:f,ratioStatus:l,title:r})}},{key:"render",value:function(){return Object(s.c)(u.Fragment,{children:[this.renderReviewCardExtraInfo(),this.props.children,this.renderVotableTopicCard()]})}}]),n}(u.Component);N.propTypes={onUpdateVoteTopic:d.a.func.isRequired,metaInfo:d.a.shape({meta:d.a.object.isRequired,vote:d.a.shape({status:d.a.oneOf(["none","dislike","like"]).isRequired})}),ReviewCardExtraInfoComponent:d.a.oneOfType([d.a.func,d.a.string,d.a.object]).isRequired,reviewerCountFormatter:d.a.func.isRequired,tooltipPosition:d.a.string},N.defaultProps={reviewerCountFormatter:function(e){return Object(S.cnNiceNumber)(e).trim()}},N.contextTypes={authRequired:d.a.func}},,,,,,,,,function(e,t,n){"use strict";var r=n(13),o=n(14),i=n(15),a=n(16),c=n(9),s=n(2),u=n(1),l=n(25),d=n(798),f=n(186),p=n(266),h=n(101);function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var v=function(e){Object(i.a)(n,e);var t=b(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={value:"",items:[]},e.handleChange=function(t){var n=e.props.dispatch;e.setState({value:t});var r=t.match(/^https:\/\/www.zhihu.com\/question\/(\d+)/);r?n(Object(h.V)(r[1])).then((function(t){var n=t.payload;e.setState({items:[{name:n.title,urlToken:n.id}]})})):Object(p.b)(t).then((function(t){e.setState({items:t})}))},e.handleSelect=function(t,n){var r=e.props,o=r.dispatch,i=r.question.id,a=r.onSubmitted,c=n.urlToken,s=o(Object(h.g)(i,c));a&&a({id:c},s)},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this.state,t=e.value,n=e.items;return Object(s.b)("div",{className:"QuestionRedirectionCreator",children:Object(s.b)("div",{className:"QuestionRedirectionCreator-content",children:Object(s.b)(f.b,{value:t,items:n,inputProps:{spread:!0,large:!0,after:Object(s.b)(d.a,{fill:"grey",size:20})},menuProps:{targetClassName:"QuestionRedirectionCreator-menu"},onChange:this.handleChange,onSelect:this.handleSelect})})})}}]),n}(u.Component);t.a=Object(l.connect)()(v)},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(858),o=n.n(r),i=n(110),a=n.n(i),c=n(7),s=n(842),u=n(1345);function l(e){var t=e.id,n=e.adZoneId,r=e.template,o=void 0===r?"":r,i=e.style,a=void 0===i?"":i,c=e.impressionTracks,s=e.viewTracks,u=e.clickTracks,l=e.closeTracks,d=e.effectTracks,f=void 0===d?[]:d,p=e.debugTracks,h=void 0===p?[]:p,b=e.conversionTracks,v=e.videoTracks,m=void 0===v?[]:v,g=e.extraConversionTracks,y=void 0===g?[]:g,O=e.conversionTrackJs,j=void 0===O?[]:O,w=e.zaAdInfo,C=e.zaAdInfoJson,k=void 0===C?"":C,S=e.creatives,x=e.prefetch,R=void 0===x?{}:x,E=e.expand,_=void 0===E?{}:E,A=e.canvas,T=void 0===A?{}:A,N=e.experimentInfo,I=void 0===N?"":N;return{id:t,adZoneId:n,template:o,style:a,impressionTracks:c,viewTracks:s,clickTracks:u,closeTracks:l,effectTracks:f,debugTracks:h,conversionTracks:b,videoTracks:m,extraConversionTracks:y,conversionTrackJs:j,zaAdInfo:w,zaAdInfoJson:k,creatives:function(e){return e.map((function(e){return function(e){var t=e.id,n=void 0===t?"":t,r=e.asset,o=e.videoInfo,i=void 0===o?{playlis:{hd:{},ld:{},sd:{}}}:o,a=e.protoInfo,c=void 0===a?{}:a,s=e.thirdSdkInfo,u=void 0===s?"":s,l=e.videoWatchNum,d=void 0===l?"":l;return{id:n,asset:function(e){var t=e.brandName,n=e.brandLogo,r=e.title,o=e.desc,i=void 0===o?"":o,a=e.imgs,c=void 0===a?[]:a,s=e.gif,u=void 0===s?"":s,l=e.landingUrl,d=e.nativeUrl,f=void 0===d?"":d,p=e.appPromotionUrl,h=void 0===p?"":p,b=e.deepUrl,v=void 0===b?"":b,m=e.imgSize,g=e.recommends,y=void 0===g?[{}]:g,O=e.footer,j=e.cta,w=e.resource,C=void 0===w?{}:w,k=e.activity,S=void 0===k?{}:k,x=e.sponsor,R=void 0===x?{}:x,E=e.window,_=void 0===E?{}:E,A=e.appInfo,T=void 0===A?{}:A,N=e.recommend,I=void 0===N?{}:N,M=e.videoSpec,D=void 0===M?{}:M,L=e.imageRatioExtra,P=void 0===L?{}:L,z=e.packageName,B=e.icon,F=e.galleries;return{brandName:t,brandLogo:n,title:r,desc:i,imgs:c,gif:u,landingUrl:l,nativeUrl:f,appPromotionUrl:h,deepUrl:v,imgSize:m,recommends:y,footer:O,cta:j,resource:C,activity:S,sponsor:R,window:_,appInfo:T,recommend:I,videoSpec:D,imageRatioExtra:P,packageName:z,icon:B,galleries:void 0===F?[{}]:F}}(r),videoInfo:i,protoInfo:c,thirdSdkInfo:u,videoWatchNum:d}}(e)}))}(S),prefetch:R,expand:_,canvas:T,experimentInfo:I}}var d={PROMOTE_ARTICLE:"发表了一篇文章",PROMOTE_QUESTION:"提了一个问题"};function f(e){var t=e.ad,n=(t.partyId,t.creatives),r=t.downloadSilent,i=void 0!==r&&r,c=t.isNewWebview,u=void 0!==c&&c,l=t.isSpeeding,f=t.cdnMap,p=t.displayAdvertisingTag,h=t.adVerb,b=t.loadTracks,v=t.closeTrack,m=a()(t,["partyId","creatives","downloadSilent","isNewWebview","isSpeeding","cdnMap","displayAdvertisingTag","adVerb","loadTracks","closeTrack"]),g=Object(s.d)(t,"creatives[0].impressionTracks",[]),y=Object(s.d)(t,"creatives[0].clickTracks",[]),O={displayAdvertisingTag:p,downloadSilent:i,isNewWebview:u,isCdnSpeeding:l,cdnMap:f},j=d[h],w=n.map((function(e){return function(e,t){var n=Object(s.d)(e,"target",{}),r=n.voteupCount,i=n.commentCount,c=n.followerCount,u=n.answerCount,l=a()(n,["voteupCount","commentCount","followerCount","answerCount"]),d=e.landingUrl,f=e.appPromotionUrl,p=e.deepUrl,h=e.packageName,b=e.title,v=e.nativeUrl,m=void 0===v?"":v,g=e.window,y=e.imageRatioExtra,O=e.brand,j=void 0===O?{}:O,w=e.thumbnailExtraInfo,C=e.cta,k=(C=void 0===C?{}:C).value,S=void 0===k?"":k,x=e.button,R=e.description,E=(e.protoInfo,e.image),_=e.gallery,A=void 0===_?[]:_,T=e.thirdSdkInfo,N=(e.showNum,e.recommend),I=e.contentType,M=a()(e,["landingUrl","appPromotionUrl","deepUrl","packageName","title","nativeUrl","window","imageRatioExtra","brand","thumbnailExtraInfo","cta","button","description","protoInfo","image","gallery","thirdSdkInfo","showNum","recommend","contentType"]),D=j.name,L=j.logo,P=Object(s.d)(A,"length")>=2?A.map((function(e){return e.url})):[E],z=A&&A.map((function(e){return{image:e.url,desc:e.description}}));return{asset:o()({landingUrl:d,appPromotionUrl:f,deepUrl:p,packageName:h,title:b,nativeUrl:m,window:g,imageRatioExtra:y,desc:R,cta:x||S,imgs:P,brandName:D,brandLogo:L,recommend:N,gallery:A,galleries:z,icon:t},M),protoInfo:o()({voteupNum:r,commentNum:i,contentType:I,answerNum:u,followNum:c,target:JSON.stringify(n)},l),videoInfo:w,thirdSdkInfo:T}}(e,j)}));return o()({viewTracks:g,impressionTracks:b,closeTracks:[v],clickTracks:y,creatives:w,expand:O},m)}function p(e){if(!e||!e.ad&&!e.adjson)return null;var t=Object(c.camelizeKeys)(e),n=Object(s.d)(e,"adjson"),r=Object(c.camelizeKeys)(Object(s.t)(n)),i=Object(u.a)({oldData:t,adjson:r});return{data:t,adjson:n?function(e,t){if(!e.ads)return null;var n=e.ads;return{ads:(void 0===n?[]:n).map((function(e){return o()({adjsonStr:t},l(e))}))}}(r,n):function(e,t){return{ads:[{ad:e.ad}].map((function(e){var n=e.ad;return o()({adjsonStr:t},f({ad:n}))}))}}(t,n),experimentInfo:i}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";(function(e){var r=n(13),o=n(14),i=n(15),a=n(16),c=n(9),s=n(2),u=n(1),l=n(25),d=n(2563),f=n(101),p=n(159);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var b=function(t){Object(i.a)(a,t);var n=h(a);function a(){var t;Object(r.a)(this,a);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return(t=n.call.apply(n,[this].concat(i))).getTrackUrls=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=t.props,i=o.pageType,a=o.advancedStyle,c=a.viewTracks,s=a.clickTracks,u="view"===n?c:s,l=Object.assign({},{eru:encodeURIComponent(e.location.href),ct:1,pt:"question"===i?1:2,rt:1},r),d=Object.keys(l).map((function(e){return"&".concat(e,"=").concat(l[e])})).join("");return u.map((function(e){return"".concat(e).concat(d)}))},t.handleViewTrack=function(e){t.getTrackUrls("view",e).forEach(p.c)},t.handleClickTrack=function(e){t.getTrackUrls("click",e).forEach(p.c)},t}return Object(o.a)(a,[{key:"componentWillMount",value:function(){var e=this.props,t=e.questionId;(0,e.loadBrandQuestionAdvancedStyle)(t)}},{key:"componentDidUpdate",value:function(e){var t=e.advancedStyle,n=(t=void 0===t?{}:t).cardType,r=this.props,o=r.advancedStyle,i=(o=void 0===o?{}:o).cardType,a=r.onLoad;!n&&i&&"function"==typeof a&&a()}},{key:"render",value:function(){var e=this.props,t=e.brand,n=e.advancedStyle;return n&&n.id?Object(s.b)(d.a,{brand:t,advancedStyle:n,handleViewTrack:this.handleViewTrack,handleClickTrack:this.handleClickTrack,isMobileView:!1}):null}}]),a}(u.Component);t.a=Object(l.connect)((function(e){var t=e.question;return{brand:t.brand,advancedStyle:t.advancedStyle}}),{loadBrandQuestionAdvancedStyle:f.G})(b)}).call(this,n(100))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(18),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(e){return o.a.createElement(i.a,a({fill:"currentColor"},e),o.a.createElement("path",{d:"M6.824 2.934l-3.36 3.359a1 1 0 0 0 0 1.414l3.36 3.359a.25.25 0 0 0 .353 0l1.06-1.06a.25.25 0 0 0 0-.354L6.587 8H13a5 5 0 0 1 0 10H4.25a.25.25 0 0 0-.25.25v1.5c0 .138.112.25.25.25H13a7 7 0 1 0 0-14H6.586l1.652-1.652a.25.25 0 0 0 0-.353l-1.06-1.06a.25.25 0 0 0-.354 0z"}))};c.defaultProps={name:"Undo"},t.a=c},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(18),a=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M12 2a10 10 0 1 0 0 20c5.523 0 10-4.477 10-10S17.523 2 12 2zm2.081 15.497c-.407.163-.818.318-1.231.464a3.224 3.224 0 0 1-1.069.161c-.624 0-1.107-.15-1.452-.457a1.471 1.471 0 0 1-.518-1.156c0-.183.013-.369.038-.559.026-.187.068-.402.125-.642l.644-2.276c.054-.205.102-.412.145-.618.037-.177.056-.356.057-.536 0-.29-.06-.493-.179-.607-.121-.115-.35-.171-.687-.171a1.814 1.814 0 0 0-.513.076 7.067 7.067 0 0 0-.45.15l.171-.702c.398-.163.8-.31 1.21-.441.387-.123.75-.184 1.093-.184.619 0 1.096.15 1.432.45.334.297.503.686.503 1.163 0 .1-.012.274-.035.523-.02.232-.062.462-.13.686l-.64 2.268a7.016 7.016 0 0 0-.143.622 3.374 3.374 0 0 0-.06.53c0 .303.068.508.202.617.135.108.369.164.701.164.156 0 .331-.027.53-.08.198-.056.337-.103.427-.144l-.17.7zM13.97 8.29c-.292.275-.68.424-1.08.416a1.55 1.55 0 0 1-1.085-.416 1.331 1.331 0 0 1-.45-1.011c0-.393.15-.733.45-1.013.302-.281.665-.42 1.085-.42.421 0 .781.139 1.08.42.298.28.447.62.447 1.013 0 .396-.15.732-.447 1.011z",fillRule:"evenodd"}))};a.defaultProps={name:"Info"},t.a=a},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(18),a=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M19.49 14.362l-2.03-1.83 1.116-1.137a1.352 1.352 0 0 1 1.921-.009c.535.535.54 1.4.01 1.94l-1.016 1.036zm-4.883 4.935a2.3 2.3 0 0 1-1.12.63l-1.136.264c-.29.058-.668-.105-.56-.56l.27-1.158a2.3 2.3 0 0 1 .599-1.09l3.809-3.84 2.03 1.829-3.892 3.925zM4.06 5H19.94C20.526 5 21 5.448 21 6s-.474 1-1.059 1H4.06C3.474 7 3 6.552 3 6s.474-1 1.059-1zM4 11h9a1 1 0 0 1 0 2H4a1 1 0 0 1 0-2zm0 6h4a1 1 0 0 1 0 2H4a1 1 0 0 1 0-2z",fillRule:"evenodd"}))};a.defaultProps={name:"Preview"},t.a=a},,,,,,,,,,function(e,t,n){e.exports=n.p+"assets/placeholder.765f50e5.svg"},function(e,t,n){e.exports=n.p+"assets/liukanshan_desert.547bd049.svg"},function(e,t,n){e.exports=n.p+"assets/empty.2df52de0.png"},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(2),o=n(11),i=n.n(o),a=n(378),c=n(840),s=n(102),u=n(980),l=n(24),d={question:"提问",answer:"回答",post:"文章",live:"Live",ebook:"电子书"},f=function(e){var t=e.src,n=e.style;return Object(r.b)("div",{className:"AdvancedViewer-imgField",style:Object.assign({},n,t?{backgroundImage:"url(".concat(t,")"),backgroundSize:"cover",backgroundPosition:"center"}:{})})};function p(e){var t=e.isMobileView,n=e.advancedStyle,o=(n=void 0===n?{}:n).cardType,i=n.url,c=n.material,s=e.handleViewTrack,p=e.handleClickTrack;if(!(null==c?void 0:c.length))return null;var h=function(e){return"function"==typeof p?{onClick:function(){p(e)}}:{}},b=function(e,t){return Object(r.c)("a",Object.assign({className:"AdvancedViewer-commodityItem",target:"_blank",rel:"noopener noreferrer",href:i},h({etu:i,pi:t+1}),{children:[Object(r.b)("img",{src:e.image,role:"presentation"}),e.mainTitle&&Object(r.c)("div",{className:"AdvancedViewer-commodityIntro",children:[Object(r.b)("span",{className:"AdvancedViewer-mainTitle",children:e.mainTitle}),Object(r.b)("span",{className:"AdvancedViewer-subTitle",children:e.subTitle})]})]}),"AdvancedViewer-commodity-".concat(t))};if("image"===o)return Object(r.b)("a",Object.assign({className:"AdvancedViewer-material AdvancedViewer-image",target:"_blank",rel:"noopener noreferrer",href:i},h({etu:i}),{children:Object(r.b)(f,{src:c[0].image,style:t?{width:375,height:156.25}:{}})}));if("image_text"===o)return Object(r.c)("a",Object.assign({className:"AdvancedViewer-material AdvancedViewer-imageText",target:"_blank",rel:"noopener noreferrer",href:i},h({etu:i}),{children:[t&&Object(r.b)("div",{className:"AdvancedViewer-intro",children:c[0].intro}),Object(r.b)(f,{src:c[0].image}),!t&&Object(r.b)("div",{className:"AdvancedViewer-intro",children:c[0].intro})]}));if("commodity"===o)return c.length&&Object(r.b)("div",{className:"AdvancedViewer-material AdvancedViewer-commodity",children:t?c.map(b):Object(r.b)(u.a,{items:c,renderItem:b})});if("recommended"===o){var v=function(e,t){return Object(r.c)("a",Object.assign({className:"AdvancedViewer-recommendedItem",href:e.url,target:"_blank",rel:"noopener noreferrer"},h({etu:e.url,pi:t+1}),{children:[Object(r.c)("div",{className:"AdvancedViewer-summary",children:[Object(r.c)("div",{className:"AdvancedViewer-wrap",children:[Object(r.b)("div",{className:"AdvancedViewer-title",children:e.title}),e.intro&&Object(r.b)("div",{className:"AdvancedViewer-desc",children:e.intro.replace(/<[\s\S]*?>/g,"")})]}),Object(r.c)("span",{className:"AdvancedViewer-data",children:[d[e.type]," · ",e.statisticText]})]}),Object(r.b)(f,{src:e.image||l.o})]}))};return Object(r.b)("div",{className:"AdvancedViewer-material AdvancedViewer-recommended",children:c.map((function(e,t){return s?Object(r.b)(a.a,Object.assign({},(n={pi:t+1},"function"==typeof s?{onChange:function(e,t){e.isIntersecting&&(t.disconnect(),s(n))}}:{}),{children:v(e,t)}),t):v(e,t);var n}))})}return null}function h(e){var t,n=e.isMobileView,o=e.brand,u=o.name,l=o.logo,d=e.advancedStyle,f=(d=void 0===d?{}:d).brandRecommendText,h=d.buttonText,b=d.url,v=d.cardType,m=e.handleViewTrack,g=e.handleClickTrack,y=function(e){return"function"==typeof g?{onClick:function(){g(e)}}:{}},O=u&&u.charCodeAt(u.length-1),j=O>=0&&O<=128?"".concat(u," "):u,w=n&&"recommended"!==v,C=f||"".concat(j,"的品牌推荐"),k=Object(r.c)(c.d,{className:i()("AdvancedViewer",{"is-mobile":n}),children:[!w&&Object(r.b)(c.b,{className:"AdvancedViewer-header",children:Object(r.b)("span",{className:"AdvancedViewer-headerText",children:C})}),Object(r.b)("div",{className:"AdvancedViewer-content",children:Object(r.b)(p,Object.assign({},e))}),!n&&v&&"recommended"!==v&&Object(r.b)("div",{className:"AdvancedViewer-footer",children:Object(r.b)(s.a,Object.assign({className:"AdvancedViewer-button",target:"_blank",to:b},y({etu:b}),{children:h||"了解更多"}))}),w&&Object(r.c)("div",{className:"AdvancedViewer-footer",children:[Object(r.c)("div",{className:"AdvancedViewer-brand",children:[Object(r.b)("img",{className:"AdvancedViewer-logo",src:l,role:"presentation"}),Object(r.b)("span",{className:"AdvancedViewer-brandName",children:C})]}),Object(r.b)(s.a,Object.assign({className:"AdvancedViewer-button",target:"_blank",to:b},y({etu:b}),{children:h||"查看详情"}))]})]});return m?Object(r.b)(a.a,Object.assign({},"function"==typeof m?{onViewed:function(){m(t)}}:{},{children:k})):k}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var r=n(2),o=n(34),i=n(40),a=n(13),c=n(14),s=n(15),u=n(16),l=n(9),d=n(1),f=n.n(d),p=n(3),h=n.n(p),b=n(25),v=n(234),m=n(109),g=n.n(m),y=n(122),O=n.n(y),j=n(368),w=n(176),C=n(78),k=n(2208),S=n.n(k);var x=function(){return Object(r.b)(C.a,{title:"该内容仅作者可见",subtitle:"",errorImage:S.a})},R=n(19),E=n(101),_=n(236),A=Object(r.b)(g.a,{meta:[{name:"robots",content:"noindex"}]}),T=Object(R.compose)(Object(_.a)(null))((function(e){var t=e.entity,n=t.type,o=t.id,i=t.isVisible,a=t.isCollapsed,c=t.suggestEdit,s=void 0===c?{}:c,u=t.adminClosedComment,l="";"question"===n?l=o:"answer"===n&&(l=t.question.id);var d=Object(b.useSelector)((function(e){return Object(E.bb)(e,{id:l})}));if(d){var f=d.status,p=d.adminClosedComment,h=d.isMuted,v=d.visibleOnlyToAuthor,m=d.reviewInfo,g=void 0===m?{}:m;if((null==f?void 0:f.isClose)||(null==f?void 0:f.isSuggest)||(null==f?void 0:f.isEvaluate)||p||h||v||g.editIsReviewing)return A}return"question"===n&&d.redirection?Object(r.b)("link",{rel:"canonical",href:"https://www.zhihu.com/question/".concat(d.redirection.to.id)}):"answer"===n&&((null==s?void 0:s.status)||a||u||!i)?A:"article"!==n||!(null==s?void 0:s.status)&&!u&&i?"":A})),N=n(1570),I=n(114),M=n(37),D=n(529),L=n(70),P=n(26),z=n(105),B=n(30),F=n(132),U=n(49);function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var V=function(e){Object(s.a)(n,e);var t=q(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).handleToggleAnonymousConfirm=function(){var t=e.props,n=t.question.id,r=t.updateQuestionAnonymous;(0,t.onClose)(),r(n)},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.props.fillCurrentUserIfNeeded(["mcn_user_info"])}},{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.question,o=e.shown,i=e.isMCNUser,a=e.isOffice,c=n.relationship.isAnonymous;return Object(r.b)(F.b,{title:c?"确认取消匿名身份？":"确认使用匿名身份？",onClose:t,size:"default",children:o&&Object(r.c)("div",{children:[c?Object(r.b)("div",{className:"Anonymous-confirm",children:Object(r.b)("p",{children:"取消匿名身份后， 提问、回答、赞同和关注将以实名显示。"})}):Object(r.c)("div",{className:"Anonymous-confirm",children:[Object(r.b)("p",{children:"使用匿名身份后："}),Object(r.c)("ul",{children:[Object(r.b)("li",{children:"提问、回答、赞同、关注会显示为匿名"}),Object(r.b)("li",{children:"除提问者本人，不能匿名编辑问题"}),Object(r.b)("li",{children:"不能邀请别人回答问题"}),Object(r.b)("li",{children:"不能使用视频功能"}),Object(r.b)("li",{children:"不能将回答同步到圈子"}),i&&Object(r.b)("li",{children:"不能使用商品信息发布功能"}),a&&Object(r.b)("li",{children:"不包含商业推广和进行商业声明"})]})]}),Object(r.c)(F.a,{direction:"horizontal",children:[Object(r.b)(B.c,{onClick:t,color:"grey",children:"取消"}),Object(r.b)(B.c,{preset:"primary",color:"blue",onClick:this.handleToggleAnonymousConfirm,children:"确认"})]})]})})}}]),n}(d.Component);V.propTypes={question:h.a.object.isRequired};var H=Object(b.connect)((function(e){var t,n=Object(M.b)(e);return{isMCNUser:2===(null==n||null===(t=n.mcnUserInfo)||void 0===t?void 0:t.status),isOffice:Object(U.e)(e)}}),{updateQuestionAnonymous:E.mb,fillCurrentUserIfNeeded:M.e})(V),K=Object(o.withRouter)((function(e){var t=e.params.id,n=Object(b.useSelector)((function(e){return e.entities.questions[t]})),o=Object(b.useSelector)((function(e){return Object.keys(e.entities.answers).filter((function(n){var r;return(null===(r=e.entities.answers[n].question)||void 0===r?void 0:r.id)===Number(t)})).map((function(t){return e.entities.answers[t]}))})),i=Object(b.useSelector)((function(e){return e.env.userAgent.origin}));if(!/googlebot/i.test(i))return null;var a=o.map((function(e){var n=e.excerpt,r=e.createdTime,o=e.voteupCount,i=e.author.name,a=e.id;return n?{"@type":"Answer",text:n,dateCreated:new Date(1e3*r).toISOString(),upvoteCount:o,url:"https://www.zhihu.com/question/".concat(t,"/answer/").concat(a),author:{"@type":"Person",name:i}}:null})).filter(Boolean),c=n.title,s=n.excerpt,u=n.answerCount,l=n.created,d=n.author.name;return(null==a?void 0:a.length)&&c?Object(r.b)("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify({"@context":"https://schema.org","@type":"QAPage",mainEntity:{"@type":"Question",name:c,text:s||c,answerCount:u,dateCreated:new Date(1e3*l).toISOString(),author:{"@type":"Person",name:d},suggestedAnswer:a}})}}):null})),Q=n(157),W=n(2209),G=n.n(W);function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var Y=function(e){Object(s.a)(n,e);var t=Z(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={time:e.props.seconds},e.handleClearInterval=function(){e.interval&&clearInterval(e.interval)},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval((function(){e.setState({time:e.state.time-1},(function(){if(0===e.state.time){e.handleClearInterval();var t=e.props.id;location.href="/question/".concat(t)}}))}),1e3)}},{key:"componentWillUnmount",value:function(){this.handleClearInterval()}},{key:"render",value:function(){var e=this.props,t=e.title,n=e.destination,o=this.state.time;return Object(r.b)(Q.b,{title:t,subtitle:"".concat(o," 秒后自动跳转至").concat(n),errorImage:G.a})}}]),n}(d.Component);Y.defaultProps={seconds:5,destination:"回答所在的问题页",title:"该回答已被删除"};var J=n(845),$=n(371),X=n.n($),ee=n(1300),te=n(237),ne=n(221),re=n(28),oe=n(981),ie=n(1129),ae=n(156),ce=n(1081),se=n(1336),ue=n(0),le=n(11),de=n.n(le),fe=n(177),pe=n(372),he="SpecialQuestionAuthor";function be(e){var t=e.author,n=e.className,i=e.isMobile,a=t.avatarUrl,c=t.name,s=t.badge,u=t.badgeV2;return Object(r.b)("div",{className:de()("".concat(he,"-Wrapper"),n),children:Object(r.c)(o.Link,{className:de()("".concat(he),Object(ue.a)({},"ROOT_CLASS--mobile",i)),to:"/".concat(t.isOrg?"org":"people","/").concat(t.urlToken||t.id),children:[Object(r.b)(fe.a,{size:i?22:28,url:a,alt:c,round:!0}),Object(r.b)("span",{className:"".concat(he,"-Author"),children:t.name}),Object(r.b)(pe.c,{className:"".concat(he,"-Badge"),badge:u||s,size:i?16:18}),Object(r.b)("span",{className:"".concat(he,"-Suffix"),children:"的提问"})]})})}be.propTypes={author:h.a.object.isRequired,isMobile:h.a.bool};var ve=n(1491),me=(n(2104),n(247)),ge=n(839),ye=n(35),Oe=n.n(ye),je=n(857);function we(e){var t=e.question,n=e.isAuthorCurrentUser,o=e.hasExtraContent,a=t.author,c=Object(d.useState)(!1),s=Object(i.a)(c,2),u=(s[0],s[1],Object(d.useRef)(),Object(d.useRef)());return Object(d.useEffect)((function(){;""}),[n]),Object(d.useEffect)((function(){Object(ge.onViewedOnce)(u.current,(function(){re.a.trackCardShow(u.current,{id:7064})}))}),[]),Object(r.c)("div",{className:de()("QuestionAuthor",{"QuestionAuthor--hasExtraContent":o}),ref:u,children:[Object(r.b)(je.a,{preset:"plain",author:a,zaId:7063,zaExtra:{link:{url:"//www.zhihu.com/people/".concat(a.urlToken)}},noHeadline:!0}),""]})}var Ce=n(32),ke=n(90),Se=n(367),xe=n(150),Re=n(863),Ee=n(846),_e=n(131),Ae=Object.assign;var Te=function(e){return f.a.createElement(_e.a,Ae({width:"99",height:"99",viewBox:"0 0 99 99"},e),f.a.createElement("path",{fill:"currentColor",d:"M118.269 98.6a4.063 4.063 0 01-2.54-.893L69.501 60.79l-44.83 36.055a4.06 4.06 0 01-4.972.1 4.2 4.2 0 01-1.419-4.834L29.43 61.626c.801-2.153 3.175-3.234 5.29-2.423 2.12.812 3.191 3.216 2.39 5.366l-5.897 16.387 35.73-28.735a4.053 4.053 0 015.09-.008l38.454 30.708-13.8-45.548a4.2 4.2 0 011.421-4.524L129.74 8.185H97.734L51.044 41.93A4.068 4.068 0 0145.31 41c-1.33-1.863-.918-4.466.917-5.815L93.995.648a4.067 4.067 0 012.408-.79h45.412a4.11 4.11 0 013.887 2.823 4.2 4.2 0 01-1.385 4.64L105.371 37.69l16.82 55.522a4.193 4.193 0 01-1.6 4.658 4.066 4.066 0 01-2.322.73M16.219 18.143a3.63 3.63 0 01-2.935-1.468c-1.16-1.577-.784-3.772.834-4.9L30.328.514c1.62-1.13 3.869-.765 5.028.812 1.16 1.577.785 3.772-.834 4.9L18.314 17.488a3.669 3.669 0 01-2.095.655M32.28 29.114a3.46 3.46 0 01-2.005-6.277L84.62-15.959a3.45 3.45 0 014.815.814 3.46 3.46 0 01-.812 4.822L34.28 28.474a3.435 3.435 0 01-2 .64M3.407 7.171c-1.053 0-2.092-.53-2.757-1.53-1.104-1.655-.764-3.97.757-5.17l2.202-1.737c1.52-1.2 3.648-.831 4.751.823 1.104 1.656.764 3.971-.757 5.171L5.4 6.466a3.204 3.204 0 01-1.994.705",fillRule:"evenodd"}))};function Ne(){var e=Object(J.a)(["收录",""," · ","知友推荐"]);return Ne=function(){return e},e}var Ie=function(e){var t,n=e.items,o=null==n||null===(t=n[0])||void 0===t?void 0:t.image;return Object(r.b)(ke.Box,{css:function(e){return{flex:"0 0 44px",borderRadius:"4px",position:"relative","::after":{content:'""',position:"absolute",top:4,bottom:4,borderRadius:"inherit",right:"-4px",background:"".concat(e.colorMod(e.colors.GBK09A).alpha(.8)),width:"10px",zIndex:0}}},children:Object(r.b)(Re.a,{bg:"GBK09C",ratio:1,css:{zIndex:1},children:o&&Object(r.b)(ke.Image,{size:"100%",src:Object(xe.imgUrl)(o,"100w"),css:{borderRadius:"inherit",objectFit:"cover"}})})})},Me=function(e){return[{width:"33px",right:"10px",zIndex:3},{width:"29px",right:"5px",zIndex:2},{width:"24px",right:0,zIndex:1}][e]},De=function(e){var t=e.items,n=null==t?void 0:t.map((function(e){return e.image}));return Object(r.b)(ke.Box,{css:{flex:"0 0 44px",borderRadius:"4px"},children:Object(r.b)(Re.a,{ratio:1,children:(null==n?void 0:n.length)>0&&n.map((function(e,t){return Object(r.b)(ke.Box,{css:Object.assign({borderRadius:"inherit",position:"absolute",bottom:0},Me(t)),children:Object(r.b)(Re.a,{bg:"GBK09C",ratio:3/4,css:{zIndex:1},children:e&&Object(r.b)(ke.Image,{size:"100%",src:Object(xe.imgUrl)(e,"100w"),css:{borderRadius:"inherit",objectFit:"cover",boxShadow:"0.5px 0 2px 0 rgba(0, 0, 0, 0.1)"}})})},t)}))})})},Le=function(e){var t=e.questionId,n=e.isInAnswerPage,o=Object(Ce.a)(e,["questionId","isInAnswerPage"]),a=Object(b.useSelector)((function(e){return Object(E.cb)(e,t)})),c=Object(b.useDispatch)(),s=Object(ve.b)(),u=Object(i.a)(s,3),l=u[0],f=u[1],p=u[2];if(Object(d.useEffect)((function(){a||c(Object(E.W)(t)).catch(p)}),[a,t,p,c]),Object(d.useEffect)((function(){a&&("not found"!==a.message?f():p())}),[a,p,f]),!a||"not found"===a.message||!l)return null;var h=a.name,v=a.num,m=a.upvoteNum,g=a.rankFieldType,y=a.items,O=a.urlToken,w=2===g,C=w?De:Ie;return Object(r.b)(j.a,{module:"Content",view:{id:8766,name:n?"answer":"question"},content:{token:O,parent_token:String(t)},trackCardShow:!0,children:Object(r.b)("div",{"data-za-extra":JSON.stringify({button:{text:h}}),css:{position:"relative",zIndex:0},children:Object(r.c)(ke.Flex,Object.assign({as:Ee.a,my:"14px",py:"8px",px:"12px",alignItems:"center",css:function(e){return{backgroundImage:"linear-gradient(to left, ".concat(e.colorMod(e.colors.GBL01A).alpha(.1),", ").concat(e.colorMod(e.colors.GBL01A).alpha(.04),")"),backgroundColor:e.colors.GBK99C,borderRadius:"5px",position:"relative",overflow:"hidden"}},"data-za-detail-view-id":"8767","data-za-detail-view-name":n?"answer":"question","data-za-extra":JSON.stringify({button:{text:h}}),href:"https://www.zhihu.com/blue-star/ranking/".concat(O,"?origin_from=").concat(n?"answer":"question")},o,{children:[Object(r.b)(Te,{css:function(e){return{position:"absolute",width:"40.5px",height:"49.5px",top:-5,right:-1,color:e.colors.GBK99A}}}),Object(r.b)(C,{items:y}),Object(r.c)(ke.Flex,{ml:"14px",alignItems:"center",children:[Object(r.b)(ke.Text,{color:"GBK02A",fontWeight:"bold",css:{fontSize:"17px",lineHeight:"18px"},children:"小蓝星 · ".concat(h)}),Object(r.b)(ke.Text,{color:"GBK05A",css:{fontSize:"14px",lineHeight:"16px",marginLeft:"10px"},children:w?X()(Ne(),Object(Se.cnNiceNumber)(v),w?"部影视":"个商品",Object(Se.cnNiceNumber)(m)):"来自知友的真实反馈"})]})]}))})})},Pe=n(441),ze=n(1080);function Be(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var Fe=function(e){Object(s.a)(n,e);var t=Be(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props.item;return Object(r.b)(Pe.a,{className:"QuestionTopic",children:Object(r.b)(ze.a,{noHoverCard:!1,topic:e})})}}]),n}(d.Component),Ue=Object(j.b)((function(e){return{module:"TopicItem",content:{type:"Topic",token:e.item.id},trackCardShow:!0}}))(Fe),qe=n(1770),Ve=n(1262),He=n(873),Ke=n(944),Qe=n(1054),We=n(1173),Ge=function(e){var t=e.text,n=Object(Ce.a)(e,["text"]);return Object(r.b)(B.c,Object.assign({preset:"plain"},n,{icon:We.a,label:t||"修改"}))};function Ze(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var Ye=function(e){Object(s.a)(n,e);var t=Ze(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props.tips;return Object(r.b)("div",{className:"QuestionReviewInfo",children:Object(r.b)("p",{children:e})})}}]),n}(d.PureComponent);Ye.propsTypes={tips:h.a.string};function Je(e){var t,n,o=e.html,a=e.excerpt,c=e.thumbnailInfo,s=e.collapsed,u=e.onExpand,l=e.editable,f=e.onEdit,p=e.isVisible,h=e.isAuthor,b=a.length<o.length,v=(b||a.length>=75)&&s,m=!h&&!p,g=Object(d.useMemo)((function(){var e;return null==c||null===(e=c.thumbnails)||void 0===e?void 0:e.find((function(e){return"video"===e.type}))}),[c]),y=null==c||null===(t=c.thumbnails)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.url,O=Object(d.useState)(null),j=Object(i.a)(O,2),w=j[0],C=j[1];return Object(r.b)("div",{css:{minHeight:"10px"},children:Object(r.c)("div",{className:de()("QuestionRichText",{"QuestionRichText--expandable":b,"QuestionRichText--collapsed":s,"QuestionRichText--video":g&&s}),onClick:function(e){v&&"function"==typeof u&&u(e);var t=e.target;"IMG"===t.tagName&&t.classList.contains("zh-lightbox-thumb")&&C(t)},children:[g&&s&&Object(r.b)("div",{className:"QuestionRichText--wrapImgae",children:Object(r.b)("img",{src:y,alt:"video",className:"QuestionRichText--image"})}),!m&&Object(r.c)("div",{children:[v?Object(r.b)("span",{children:Object(Qe.b)(a,75)}):Object(r.b)(Ke.a,{itemProp:"text",tag:"span",html:o}),v&&Object(r.c)(B.c,{preset:"plain",className:"QuestionRichText-more",children:["显示全部 ",Object(r.b)(Ve.a,{center:!0})]})]}),l&&!v&&Object(r.b)(Ge,{onClick:f}),w&&Object(r.b)(He.a,{img:w,onClose:function(){return C(null)}})]})})}function $e(e){var t=e.reviewInfo,n=e.thumbnailInfo,o=e.html,i=e.excerpt,a=(t||{}).tips,c=Object(d.useMemo)((function(){var e;return null==n||null===(e=n.thumbnails)||void 0===e?void 0:e.find((function(e){return"video"===e.type}))}),[n]),s=Boolean(o&&i);return Object(r.c)("div",{children:[a&&c&&Object(r.b)(Ye,{tips:a}),s?Object(r.b)(Je,Object.assign({},e)):null]})}var Xe=n(208),et=n(67),tt=n(175),nt=n(1991),rt=n(2198),ot=n(545),it=n(102);function at(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var ct=function(e){Object(s.a)(n,e);var t=at(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).getRenderProps=function(){var t=e.props,n=t.draft,o=t.question,i=o.id,a=o.relationship,c=(a=void 0===a?{}:a).myAnswer;return c?c.isDeleted?{icon:Object(r.b)(nt.a,{size:17,className:"QuestionButton-icon"}),text:"撤销删除",props:{onClick:e.handleRestoreAnswer}}:{icon:Object(r.b)(rt.a,{size:17,className:"QuestionButton-icon"}),text:"查看回答",props:{to:"/question/".concat(i,"/answer/").concat(c.answerId),onClick:e.handleFocusAnswer},Wrapper:it.a}:{icon:Object(r.b)(We.a,{size:16,center:!0,className:"QuestionButton-icon"}),text:n?"编辑回答":"写回答",props:{onClick:e.handleAddAnswer}}},e.handleFocusAnswer=function(){var t=document.querySelector(".AnswerCard");t&&(t.classList.add("is-focus"),e.timeout&&clearTimeout(e.timeout),e.timeout=setTimeout((function(){return t.classList.remove("is-focus")}),300))},e.handleRestoreAnswer=function(){var t=e.props,n=t.question,r=n.relationship.myAnswer,o=n.id,i=t.restoreAnswer,a=t.showNotification;r.isDeleted&&i(o,r.answerId).then((function(){return a("已撤销删除回答")}))},e.handleAddAnswer=e.context.authRequired((function(t){var n=e.props,r=n.draft,o=n.question.reviewInfo,i=(o=void 0===o?{}:o).tips,a=n.zaId,c=n.cancelScheduledPublish,s=t.currentTarget,u=function(){i?e.props.showNotification(i,"red"):(a&&re.a.trackEvent(null,{id:a}),re.a.trackEvent(Object(et.a)(e),{action:r&&r.editableContent?"Edit":"Answer",is_intent:!0,name:s.textContent}),e.context.startAddAnswer())};r&&r.schedule?tt.a.confirm("如果继续编辑该回答，原定时发送设置将会失效，需重新设置定时发送时间，是否继续编辑？",{title:"编辑回答",text:{ok:"继续编辑",cancel:"我再想想"}}).then((function(){c(e.props.question.id).then(u)}),(function(){})):u()})),e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){Object(ot.b)()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,o=e.size,i=e.preset,a=e.color,c=void 0===a?"blue":a,s=e.onClick,u=this.getRenderProps(),l=u.icon,f=u.text,p=u.props,h=u.Wrapper,b=void 0===h?B.c:h,v=Object(r.c)(d.Fragment,{children:[l,f]});return Object(r.b)(b,Object.assign({},p,s&&{onClick:s},{color:c,size:o,preset:i,className:n,children:t||v}))}}]),n}(d.Component);ct.contextTypes={authRequired:h.a.func,startAddAnswer:h.a.func};var st=Object(R.compose)(o.withRouter,Object(b.connect)((function(e,t){return{draft:Object(E.n)(e,{id:t.params.id}),question:Object(E.bb)(e,{id:t.params.id})}}),{restoreAnswer:L.A,cancelScheduledPublish:L.e,showNotification:P.h}))(ct),ut=n(865),lt=n(869),dt=n(1088);function ft(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var pt={follow_question:dt.b.follow,write_answer:dt.b.write_answer},ht=function(e){Object(s.a)(n,e);var t=ft(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).createOpenInAppHandler=function(t){var n=e.props,r=n.question.id,o=n.isSpecialQuestionOrAnswer;return function(){o?location.href="zhihu://question/".concat(r,"?utm_app_name=zhihu_check&utm_content=").concat(t):Object(Xe.c)(Object(lt.a)({type:"question",id:r},{launch_button:pt[t]}))}},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props,t=e.question,n=e.question,o=n.relationship,i=n.relationship.isAuthor,a=n.isNormal,c=n.status,s=(c=void 0===c?{}:c).isLocked,u=n.questionType,l=n.isMuted,d=n.id,f=e.shouldOia,p=e.inTopBar,h="commercial"===u&&l;return Object(r.c)("div",{className:"QuestionButtonGroup",children:[i&&h?Object(r.b)(it.a,{preset:"primary",a:!0,to:"https://e.zhihu.com",color:"green",children:"推广问题"}):Object(r.b)(ut.a,Object.assign({id:d,zaId:p?3408:3309,type:"question",preset:"primary",isFollowing:(o&&{}.hasOwnProperty.call(o,"isFollowing")?o:t).isFollowing,disabled:h},f&&{onClick:this.createOpenInAppHandler("follow_question")})),a&&!s&&Object(r.b)(st,Object.assign({color:"blue",zaId:p?3409:3311},f&&{onClick:this.createOpenInAppHandler("write_answer")}))]})}}]),n}(d.Component),bt=Object(R.compose)(o.withRouter,Object(b.connect)((function(e,t){var n;return{shouldOia:Object(U.h)(e),isSpecialQuestionOrAnswer:Object(U.j)(e,{type:"question",id:null===(n=t.question)||void 0===n?void 0:n.id})}})))(ht),vt=n(20),mt=n.n(vt),gt=n(21),yt=n.n(gt),Ot=n(22),jt=n.n(Ot),wt=n(23),Ct=n.n(wt),kt=n(17),St=n.n(kt),xt=n(5);function Rt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=St()(e);if(t){var o=St()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ct()(this,n)}}var Et=function(e){jt()(n,e);var t=Rt(n);function n(){var e;mt()(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={count:Math.round(e.props.count)},e.next=function(){var t=e.props.onEnd,n=e.state.count-1;e.setState({count:n}),0===n&&(clearInterval(e.handle),t&&t())},e}return yt()(n,[{key:"componentDidMount",value:function(){this.state.count<=0||(this.handle=setInterval(this.next,this.props.interval))}},{key:"componentWillUnmount",value:function(){clearInterval(this.handle)}},{key:"render",value:function(){var e=this.state.count;return Object(xt.g)("span",null,e)}}]),n}(d.Component);Et.propTypes={count:h.a.number.isRequired,interval:h.a.number,onEnd:h.a.func},Et.defaultProps={interval:1e3};var _t=Et,At=n(781),Tt=n(215),Nt=n(47),It=n(374),Mt=n(854),Dt=n(1537);function Lt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var Pt=function(e){Object(s.a)(n,e);var t=Lt(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={redirectionLoading:!1,redirectionHidden:!1,invitersHidden:!1,invitationModalShown:!1},e.redirect=function(){var t=e.props,n=t.router,r=t.location.query,o=t.question,i=o.id,a=o.redirection;a&&a.to&&a.to.id&&"1"!==r.nr&&n.push("/question/".concat(a.to.id,"?rf=").concat(i))},e.handleRedirectionClose=function(){e.setState({redirectionHidden:!0,invitersHidden:!0}),e.timeout=setTimeout((function(){e.setState({invitersHidden:!1})}),1e3)},e.handleCloseInviters=function(){e.setState({invitersHidden:!0})},e.handleDeleteInviters=function(t){var n=e.props,r=n.question.id;(0,n.deleteInviters)(r),e.handleCloseInviters(),re.a.trackEvent(t.target,{action:"Ignore"})},e.handleCancelAnonymous=function(){(0,e.props.onInvitationTipClose)(),e.context.toggleAnonymous(!1)},e.handleInvite=function(t){e.setState({invitersHidden:!0,invitationModalShown:!0}),re.a.trackEvent(t.target,{action:"Invite",is_intent:!0})},e.handleInvitationModalHide=function(){e.setState({invitationModalShown:!1})},e}return Object(c.a)(n,[{key:"componentWillMount",value:function(){Object(Nt.isBrowser)()&&this.nextQuestion(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.props.question.id!==e.question.id&&this.nextQuestion(e)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout)}},{key:"nextQuestion",value:function(e){var t=this,n=this.context.currentUser,r=e.location.query,o=e.question.id,i=e.fromQuestion,a=e.loadItems,c=e.loadQuestion;clearTimeout(this.timeout),this.setState({redirectionLoading:!1,redirectionHidden:!1,invitersHidden:!1}),n&&"guest"!==n.userType&&a(o,"inviters"),r.rf&&/^\d+$/.test(r.rf)&&!i&&(this.setState({redirectionLoading:!0}),c(Number(r.rf)).catch((function(){})).then((function(){t.setState({redirectionLoading:!1})})))}},{key:"revokeRedirection",value:function(e){var t=this.props,n=t.router,r=t.question.id;(0,t.revokeQuestionRedirection)(e).then((function(){n[e===r?"replace":"push"]("/question/".concat(e))})),this.handleRedirectionClose()}},{key:"renderCommercialMuteStatus",value:function(){var e=this.props.question,t=e.questionType,n=e.isMuted;return e.relationship.isAuthor&&"commercial"===t&&n?Object(r.b)("div",{className:"QuestionStatus-bar",children:Object(r.c)("div",{className:"QuestionStatus-bar-inner",children:[Object(r.c)("div",{className:"QuestionStatus-bar-commercialMuted",children:["该品牌提问尚未激活，无法在社区内流通。请"," ",Object(r.b)("a",{href:"https://e.zhihu.com",target:"_blank",rel:"noopener noreferrer",children:"前往广告平台"})," ","进行设置。"]}),Object(r.b)("p",{children:"未激活的品牌提问页可以添加回答，但相关动态不在社区内流通，包括不会出现在知乎首页、用户主页，也不会被搜索到。当与该品牌提问关联的广告开始投放时，提问被激活，并开始流通。"})]})}):null}},{key:"renderMute",value:function(){var e=this.props,t=e.isMuteSpecial,n=e.isMuteFreeze;return t?Object(r.b)("div",{className:"QuestionStatus-bar",children:Object(r.c)("div",{className:"QuestionStatus-bar-inner",children:[Object(r.b)("strong",{children:"问题已解散"}),Object(r.b)("p",{children:"当前问题下的回答暂时无法查看。"})]})}):n?Object(r.b)("div",{className:"QuestionStatus-bar",children:Object(r.c)("div",{className:"QuestionStatus-bar-inner",children:[Object(r.b)("strong",{children:"问题已冻结"}),Object(r.b)("p",{children:"除浏览外不开放其他用户互动功能。"})]})}):null}},{key:"renderBar",value:function(){var e=this.props.question.status.unnormalDetails;return e&&Object(r.b)("div",{className:"QuestionStatus-bar",children:Object(r.c)("div",{className:"QuestionStatus-bar-inner",children:[Object(r.c)("strong",{children:[e.description,"。"]}),Object(r.c)("em",{children:["原因：",e.reason,"。"]}),1033!==e.reasonId&&Object(r.b)(It.a,{html:e.note})]})})}},{key:"renderNotification",value:function(){var e=this,t=this.props,n=t.location.query,o=t.question,i=o.id,a=o.redirection,c=o.relationship,s=(c=void 0===c?{}:c).myAnswer,u=t.inviters,l=t.fromQuestion,d=t.isAnswerPage,f=this.state,p=f.redirectionLoading,h=f.redirectionHidden,b=f.invitersHidden,v=null,m=null;if(!p)if(a&&a.to&&a.to.id&&!h){var g=a.to,y=g.id,O=g.title,w="1"!==n.nr&&!d;v=w?"redirect-countdown":"redirect",m=Object(r.c)("div",{className:"QuestionStatus-notification-inner",children:[Object(r.c)("div",{className:"QuestionStatus-notification-content",children:[w?Object(r.c)("span",{children:["此问题将在 ",Object(r.b)(_t,{count:5,onEnd:this.redirect})," ","秒后跳转至"]}):Object(r.b)("span",{children:"此问题已重定向至"})," ",Object(r.b)(it.a,{preset:"plain",to:"/question/".concat(y,"?rf=").concat(i),children:O})]}),Object(r.c)("div",{className:"QuestionStatus-notification-actions",children:[Object(r.b)(B.c,{preset:"plain",className:"QuestionStatus-notification-primary",onClick:function(){return e.revokeRedirection(i)},children:"撤销重定向"}),Object(r.b)("div",{className:"QuestionStatus-notification-divider"}),Object(r.b)(B.c,{preset:"plain",onClick:this.handleRedirectionClose,children:"关闭"})]})]})}else if(l&&l.redirection&&l.redirection.to&&l.redirection.to.id&&l.redirection.to.id===i&&!h){var C=l.id,k=l.title;v="redirect-from",m=Object(r.c)("div",{className:"QuestionStatus-notification-inner",children:[Object(r.c)("div",{className:"QuestionStatus-notification-content",children:["从问题"," ",Object(r.b)(it.a,{preset:"plain",to:"/question/".concat(C,"?nr=1"),children:k})," ","跳转而来"]}),Object(r.c)("div",{className:"QuestionStatus-notification-actions",children:[Object(r.b)(B.c,{preset:"plain",className:"QuestionStatus-notification-primary",onClick:function(){return e.revokeRedirection(C)},children:"撤销重定向"}),Object(r.b)("div",{className:"QuestionStatus-notification-divider"}),Object(r.b)(B.c,{preset:"plain",onClick:this.handleRedirectionClose,children:"关闭"})]})]})}else u&&u.length&&!b&&!s&&(m=Object(r.b)(j.a,{module:"InvitationCard",trackCardShow:!0,children:Object(r.c)("div",{className:"QuestionStatus-notification-inner",children:[Object(r.c)("div",{className:"QuestionStatus-notification-content",children:[u.map((function(e,t){return Object(r.c)("span",{children:[0!==t&&"、",Object(r.b)(Mt.a,{user:e,noBadge:!0,noHoverCard:!0,"data-za-detail-view-element_name":"User"})]},e.urlToken)}))," ","邀请你回答此问题"]}),Object(r.c)("div",{className:"QuestionStatus-notification-actions",children:[Object(r.b)(B.c,{preset:"plain",className:"QuestionStatus-notification-primary",onClick:this.handleInvite,children:"邀请别人"}),Object(r.b)("div",{className:"QuestionStatus-notification-divider"}),Object(r.b)(B.c,{preset:"plain",onClick:this.handleDeleteInviters,children:"忽略邀请"})]}),Object(r.b)("div",{children:Object(r.b)(B.c,{className:"QuestionStatus-notification-closeButton",preset:"plain",onClick:this.handleCloseInviters,icon:At.a})})]})}));return Object(r.b)(Tt.a,{className:"QuestionStatus-notification",notification:m?{key:v,text:m}:null})}},{key:"renderInvitationTip",value:function(){var e=this.props,t=e.invitationTipShown,n=e.onInvitationTipClose;return Object(r.b)(Tt.a,{className:"QuestionStatus-notification",notification:t?{text:Object(r.c)("div",{className:"QuestionStatus-notification-inner",children:[Object(r.b)("div",{className:"QuestionStatus-notification-content",children:"在匿名状态下无法邀请他人回答"}),Object(r.c)("div",{className:"QuestionStatus-notification-actions",children:[Object(r.b)(B.c,{preset:"plain",className:"QuestionStatus-notification-primary",onClick:this.handleCancelAnonymous,children:"取消匿名"}),Object(r.b)("div",{className:"QuestionStatus-notification-divider"}),Object(r.b)(B.c,{preset:"plain",onClick:n,children:"关闭"})]})]})}:null})}},{key:"render",value:function(){var e=this.props.question,t=this.state.invitationModalShown;return Object(r.c)("div",{className:"QuestionStatus",children:[this.renderCommercialMuteStatus(),this.renderMute(),this.renderBar(),this.renderNotification(),this.renderInvitationTip(),Object(r.b)(F.b,{size:"fullPage",onClose:this.handleInvitationModalHide,children:t&&Object(r.b)(Dt.a,{question:e})})]})}}]),n}(d.Component);Pt.contextTypes={currentUser:h.a.object,toggleAnonymous:h.a.func};var zt=Object(R.compose)(Object(_.a)({replacement:null}),o.withRouter,Object(b.connect)((function(e,t){var n=e.entities.questions,r=e.question.inviters,o=t.location.query,i=t.question.id,a={isMuteSpecial:Object(E.C)(t.question),isMuteFreeze:Object(E.B)(t.question),inviters:r[i]};if(o.rf&&/^\d+$/.test(o.rf)){var c=n[Number(o.rf)];c&&(a.fromQuestion=c)}return a}),{loadItems:E.O,loadQuestion:E.Q,revokeQuestionRedirection:E.eb,deleteInviters:E.k}))(Pt),Bt=n(74),Ft=n(976),Ut=n(4),qt=n(1130);function Vt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var Ht=function(e){Object(s.a)(n,e);var t=Vt(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).load=function(){var t=e.props,n=t.parent.id;(0,t.loadQuestionFollowers)(n)},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props,t=e.parent.followerCount,n=e.isFetching,o=e.isDrained,i=e.items,a=e.currentUser;return Object(r.b)(qt.a,{currentUser:a,isFetching:n,isDrained:o,items:i,voteupCount:t,onLoad:this.load,text:"关注了"})}}]),n}(d.Component),Kt=Object(b.connect)((function(e,t){var n=t.parent.id,r=e.entities.users,o=e.question,i=o.followers,a=o.concernedFollowers,c=i[n]||{isFetching:!1,isDrained:!1,order:"normal",ids:[]},s=c.isFetching,u=c.isDrained,l=c.order,d=c.ids,f=(a[n]||{ids:[]}).ids;return{isFetching:s,isDrained:u,order:l,items:[].concat(Object(Ut.a)(f),Object(Ut.a)(d.filter((function(e){return!f.includes(e)})))).map((function(e){return r[e]})),currentUser:Object(M.b)(e)}}),{loadQuestionFollowers:E.T})(Ht),Qt=n(274);function Wt(){var e=Object(J.a)(["","也关注了该问题"]);return Wt=function(){return e},e}function Gt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var Zt=function(e){Object(s.a)(n,e);var t=Gt(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={followersShown:!1},e.showFollowers=function(){e.setState({followersShown:!0})},e.closeFollowers=function(){e.setState({followersShown:!1})},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props,t=e.question,n=e.currentUser,o=e.concernedFollowers,i=t.followerCount,a=t.visitCount,c=this.state.followersShown;return Object(r.c)("div",{className:"QuestionFollowStatus",children:[Object(r.c)(Ft.a,{divider:!0,className:"QuestionFollowStatus-counts",children:[n?Object(r.b)(Ft.a.Item,{tag:B.c,preset:"plain",onClick:this.showFollowers,name:"关注者",value:i}):Object(r.b)(Ft.a.Item,{name:"关注者",value:i}),Object(r.b)(Ft.a.Item,{name:"被浏览",value:a})]}),Boolean(o&&o.length)&&Object(r.c)(B.c,{preset:"plain",className:"QuestionFollowStatus-people",onClick:this.showFollowers,children:[Object(r.b)("span",{className:"QuestionFollowStatus-people-tip",children:X()(Wt(),1===o.length?o[0].name:"他们")}),o.map((function(e){return Object(r.b)(Mt.a,{user:e,avatar:!0,avatarProps:{size:26,round:!0},noLink:!0,noBadge:!0,noHoverCard:!0},e.id)}))]}),Object(r.b)(Bt.b,{size:"fullPage",onClose:this.closeFollowers,children:c&&Object(r.b)(Kt,{parent:t})})]})}}]),n}(d.Component),Yt=Object(R.compose)(o.withRouter,Object(b.connect)((function(e,t){var n=t.params;return{currentUser:Object(M.b)(e),concernedFollowers:Object(E.f)(e,{id:n.id})}}),{loadQuestionConcernedFollowers:E.S}),Object(Qt.a)({shouldLoad:function(e){return e.currentUser&&!e.concernedFollowers},load:function(e){return e.loadQuestionConcernedFollowers(e.params.id)}}))(Zt),Jt=n(809),$t=n(806),Xt=n(1562),en=n(1297),tn=n(83),nn=n(24),rn=n(959),on=n(883),an=n(243),cn=n(1780),sn=n(41),un=n(1397),ln=n(1092),dn=n(54);function fn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var pn=function(e){Object(s.a)(n,e);var t=fn(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={commentsShown:!1},e.handleCommentsShow=function(){var t=e.props,n=t.question.reviewInfo.tips,r=t.handleReviewingNotification;n?r():(re.a.trackEvent(Object(et.a)(e),{action:"Comment",element:"Button",is_intent:!0}),e.setState({commentsShown:!0}))},e.handleCommentsClose=function(){e.setState({commentsShown:!1})},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.router,n=e.router.location,r=n.pathname,o=n.search,i=Boolean(/^\/question\/(\d*)$/.test(r)),a=Object(sn.parse)(location.search.slice(1)).answer_deleted_redirect;if(i&&"true"!==a){var c=Object(dn.a)(location.hash);this.setState({byComment:c}),c&&(t.replace("".concat(r).concat(o)),this.handleCommentsShow())}}},{key:"componentWillReceiveProps",value:function(e){this.props.question.id!==e.question.id&&this.setState({commentsShown:!1})}},{key:"render",value:function(){var e=this.props,t=e.question,n=e.textStyle,o=e.isMuteSpecial,i=t.commentCount,a=t.adminClosedComment,c=this.state.commentsShown,s="",u=i&&!a;return s="textNumber"===n?u?"评论 ".concat(Object(Se.formatNumber)(i)):"":u?"".concat(Object(Se.formatNumber)(i)," 条评论"):"添加评论",Object(r.c)("div",{className:"QuestionHeader-Comment",children:[Object(r.b)(B.c,{preset:"plain",onClick:this.handleCommentsShow,icon:un.a,label:s,disabled:o}),Object(r.b)(F.b,{size:"fullPage",onClose:this.handleCommentsClose,children:c&&Object(r.b)(ln.a,{type:"question",parent:t,byComment:this.state.byComment,commentNeedsReview:"censor"===t.commentPermission})})]})}}]),n}(d.Component);pn.propTypes={question:h.a.object.isRequired,handleReviewingNotification:h.a.func.isRequired};var hn=Object(R.compose)(o.withRouter,Object(b.connect)((function(e,t){return{isMuteSpecial:Object(E.C)(t.question)}})))(pn),bn=n(38),vn=n.n(bn),mn=n(52),gn=n(1371);var yn=function(e){var t=Object(d.useRef)(null),n=e.authRequired,o=e.questionId,i=Object(b.useDispatch)(),a=Object(b.useSelector)((function(e){return Object(E.bb)(e,{id:o})})),c=a.relationship,s=c.voting,u=c.isFollowing,l=a.voteupCount,f=a.canVote;Object(d.useEffect)((function(){re.a.trackCardShow(t.current,{name:String(l),id:7228})}),[]);var p=function(){if(!u){var e="0"===String(s);return i(Object(E.nb)(o,e))}},h=de()("GoodQuestionAction-commonBtn",{"GoodQuestionAction-highLightBtn":"1"===String(s)}),v=n(Object(mn.a)(vn.a.mark((function e(){var n;return vn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(Object(E.qb)(o,s));case 2:return e.next=4,p();case 4:n="0"===String(s)?"Upvote":"UnUpvote",re.a.trackEvent(t.current,{action:n,name:String(l),id:7229});case 6:case"end":return e.stop()}}),e)}))));return Object(r.b)("div",{className:"GoodQuestionAction",children:f&&Object(r.b)(B.c,{onRef:function(e){return t.current=e},className:h,preset:"plain",onClick:v,icon:gn.a,label:l>0?"好问题 ".concat(l):"好问题"})})},On=n(1370),jn=n(455),wn={true:{title:"确定解锁问题编辑？",subtitle:"该问题编辑已锁定，解锁后可被其他用户编辑，要解锁编辑吗？",confirmText:"解锁问题编辑"},false:{title:"确定锁定问题编辑？",subtitle:"锁定后，其他用户将不可编辑你提出的问题",confirmText:"锁定问题编辑"}};function Cn(e){var t=e.showModal,n=e.showEncourageAuthorEditLock,o=e.handleConfirmEditLock,a=e.handleEditLockShown,c=n?"编辑已锁定":"锁定编辑",s=Object(d.useRef)(),u=Object(d.useState)(!1),l=Object(i.a)(u,2),f=l[0],p=l[1];Object(d.useEffect)((function(){Oe.a.get("question::hasSeenShowEditLockHint")||Object(jn.b)([Object(jn.a)(3e3).then((function(){Oe.a.set("question::hasSeenShowEditLockHint",!0),p(!0)})),Object(jn.a)(3e3).then((function(){p(!1)}))])}),[]),Object(d.useEffect)((function(){Object(ge.onViewedOnce)(s.current,(function(){re.a.trackCardShow(s.current,{id:7666},{button:{text:c}})}))}),[c]);var h=Object(d.useCallback)((function(){re.a.trackEvent(s.current,{id:7669,action:"Click"},{button:{text:c}}),a()}),[a,c]),b=function(e){var t=e?wn[n].confirmText:"取消";re.a.trackEvent(null,{id:7678,action:"Select",name:t},{button:{text:c}}),e?o():a()};return Object(r.c)(r.a,{children:[Object(r.b)(B.c,{preset:"plain",onClick:h,label:c,icon:On.a,onRef:s}),Object(r.b)(me.a,{className:"QuestionEditLockMenu-Hint",isOpen:f,target:s.current,placement:"top",children:"锁定后问题不可被其他用户编辑"}),Object(r.b)(rn.a,Object.assign({needCancel:!1,showButtonHorizontal:!0,showConfirmButtonRight:!0,onCancel:function(){return b(!1)},onSubmit:function(){return b(!0)},shown:t},wn[n]))]})}function kn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var Sn={invitationShown:!1,reportShown:!1,editLockShown:!1,lockTipsShown:!1,deleteShown:!1,redirectionCreatorShown:!1},xn=[{key:"all",name:"开放评论"},{key:"censor",name:"预审评论"},{key:"nobody",name:"关闭评论"}],Rn=[{key:"open",name:"开放回答"},{key:"censor",name:"预审回答"}],En=function(e){Object(s.a)(n,e);var t=kn(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state=Sn,e.handleReviewingNotification=function(){var t=e.props.question.reviewInfo.tips;e.props.showNotification(t,"red")},e.handleInvite=e.context.authRequired((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.eventId,r=void 0===n?3312:n;re.a.trackEvent(null,{id:r});var o,i=e.props,a=i.question,c=a.relationship.isAnonymous,s=a.status,u=(s=void 0===s?{}:s).isLocked,l=s.isClose,d=s.isEvaluate,f=s.isSuggest,p=a.reviewInfo,h=(p=void 0===p?{}:p).tips,b=i.onInvitationTipShow;h?e.handleReviewingNotification():c?b():(u?o="锁定":l?o="关闭":(d||f)&&(o="建议修改"),o?e.props.showNotification("该问题已被".concat(o,"，不能邀请人回答此问题"),"red"):e.handleInvitationShow())}),nn.V.invite),e.handleInvitationShow=function(){return e.setState({invitationShown:!0})},e.handleInvitationHide=function(){return e.setState({invitationShown:!1})},e.handleReport=function(){e.setState({reportShown:!e.state.reportShown})},e.handleEditLockShown=function(){e.setState({editLockShown:!e.state.editLockShown})},e.handleLockClick=function(){return e.props.question.status.isLocked?e.handleUpdateQuestionLocked():e.handleLockTipsShow()},e.handleOpenStatusChange=function(t){var n=e.props;(0,n.updateBrandQuestionOpenStatus)(n.question.id,t)},e.handleUpdateQuestionLocked=function(){var t=e.props,n=t.question.id;(0,t.updateQuestionLocked)(n)},e.handleLockTipsShow=function(){return e.setState({lockTipsShown:!0})},e.handleLockTipsHide=function(){return e.setState({lockTipsShown:!1})},e.handleDelete=function(){return e.setState({deleteShown:!0})},e.handleDeleteModalClose=function(){return e.setState({deleteShown:!1})},e.handleConfirmDelete=function(){e.handleDeleteModalClose();var t=e.props,n=t.question,r=n.id,o=n.questionType,i=t.deleteQuestion,a=t.deleteBrandQuestion;return("commercial"===o?a:i)(r).then((function(){location.href="/"}))},e.handleConfirmEditLock=function(){e.handleEditLockShown();var t=e.props;(0,t.toggleQuestionEditLock)(t.question.id)},e.handleRedirectionCreatorShow=function(){e.props.question.reviewInfo.tips?e.handleReviewingNotification():e.setState({redirectionCreatorShown:!0})},e.handleRedirectionCreatorClose=function(){e.setState({redirectionCreatorShown:!1})},e.handleRedirectionCreated=function(t,n){var r=e.props,o=r.router,i=r.question.id,a=t.id;e.handleRedirectionCreatorClose(),n.then((function(){o.push("/question/".concat(a,"?rf=").concat(i))}))},e.handleCommentPermissionChange=function(t){var n=e.props;(0,n.updateQuestionPermission)(n.question.id,t)},e.handleShareMenuTogglerClick=function(){var t=e.props.question.reviewInfo;return!(t=void 0===t?{}:t).tips||(e.handleReviewingNotification(),!1)},e.toggleAnonymous=function(){var t=e.props,n=t.question.reviewInfo,r=n.tips,o=n.editTips,i=t.isCurrentAnswerCommercialReported;r?e.handleReviewingNotification():o?e.props.showNotification(o,"red"):i?e.props.showNotification("已经进行商业声明的内容不能启用匿名","red"):e.context.toggleAnonymous()},e.getQuestionStatus=function(){return Object(dt.c)(e.props.question.status)},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.getHandleInvite;e&&e(this.handleInvite)}},{key:"componentWillReceiveProps",value:function(e){this.props.question.id!==e.question.id&&this.setState(Sn)}},{key:"renderCommercialMenuItems",value:function(e){var t=this,n=this.props,o=n.permission.canBrandAdminEdit,i=n.question,a=i.status,c=(a=void 0===a?{}:a).isLocked,s=i.commentPermission,u=i.brandOpenStatus,l=i.brand,f=(l=void 0===l?{}:l).isPuQuestion;if(!o)return null;var p=xn,h=Rn;return Object(r.c)(d.Fragment,{children:[p.map((function(n){var o=n.key,i=n.name,a=!s&&"all"===o||s===o;return Object(r.c)(tn.b,{className:e,onClick:function(){return t.handleCommentPermissionChange(o)},children:[a&&Object(r.b)(Jt.a,{className:"MenuItem-icon",text:!0,center:!0})," ",i]},o)})),Object(r.b)("li",{className:"Menu-divider"}),(f&&(h=[{key:"open",name:"开放回答"}]),Object(r.c)(r.a,{children:[!c&&h.map((function(n){var o=n.key,i=n.name,a=u===o;return Object(r.c)(tn.b,{className:e,onClick:function(){return!a&&t.handleOpenStatusChange(o)},children:[a&&Object(r.b)(Jt.a,{className:"MenuItem-icon",text:!0,center:!0})," ",i]},o)})),!f&&Object(r.b)(tn.b,{className:e,onClick:t.handleLockClick,children:c?"开放回答":"关闭回答"}),Object(r.b)("li",{className:"Menu-divider"})]}))]})}},{key:"renderMobileMenuItems",value:function(e){var t=this.props,n=t.question.id,o=t.shouldOia;return e.map((function(e){var t=e.text,i=e.handler;return Object(r.b)(tn.b,{onClick:o?function(){return Object(Xe.c)(Object(lt.a)({type:"question",id:n},{utm_content:"invite"}))}:i,children:t},t)}))}},{key:"renderLogMenuItem",value:function(){var e=this.props,t=e.question.id;return e.shouldOia?Object(r.b)(tn.b,{onClick:function(){return Object(Xe.c)(Object(lt.a)({type:"question",id:t}))},children:"查看问题日志"}):Object(r.b)(tn.b,{tag:it.a,a:!0,to:"/question/".concat(t,"/log"),children:"查看问题日志"})}},{key:"render",value:function(){var e=this.state,t=e.invitationShown,n=e.reportShown,o=e.editLockShown,i=e.lockTipsShown,a=e.deleteShown,c=e.redirectionCreatorShown,s=this.props,u=s.question,l=s.question,d=l.id,f=l.title,p=l.answerCount,h=l.collapsedAnswerCount,b=l.relationship,v=b.isAuthor,m=b.isAnonymous,g=l.questionType,y=l.isEditable,O=l.author.urlToken,j=l.showEncourageAuthorEditLock,w=s.isMuteSpecial,C=s.isMuteFreeze,k=s.publicEditPermission,S=(k=void 0===k?{}:k).isQuestionRedirectEditable,x=s.currentUserUrlToken,R=s.permission.canBrandAdminEdit,E=s.editQuestionButton,_=this.context.currentUser,A="commercial"===g,T=_&&!v,N=_&&v&&"boolean"==typeof j,I=A?R:Boolean(v&&0===p&&0===h),M=[T&&{text:"举报",icon:$t.a,handler:this.handleReport}].filter(Boolean),D=O===x,L=Object(dt.e)(y,D,S),P=this.shouldShowAnonymousMenuItem,z=P||this.shouldShowMenu,U=de()("QuestionHeader-menu-item",{"QuestionHeader-menu-item--com":A});return Object(r.c)("div",{className:"QuestionHeaderActions",children:[Object(r.b)(B.c,{color:"grey",style:{marginRight:16},onClick:this.handleInvite,label:"邀请回答",icon:Xt.a,disabled:w||C}),Object(r.b)(yn,{questionId:d,authRequired:this.context.authRequired}),Object(r.b)(hn,{question:u,handleReviewingNotification:this.handleReviewingNotification}),Object(r.b)(on.a,{id:d,title:f,href:"/question/".concat(d),onTogglerClick:this.handleShareMenuTogglerClick,type:"question",disabled:w||C}),E,N&&Object(r.b)(Cn,{showModal:o,showEncourageAuthorEditLock:j,handleEditLockShown:this.handleEditLockShown,handleConfirmEditLock:this.handleConfirmEditLock}),z&&Object(r.c)(tn.c,{toggler:Object(r.b)(B.c,{preset:"plain","aria-label":"更多",icon:en.a}),menuClassName:"QuestionHeader-menu",itemClassName:U,children:[!1,P&&Object(r.b)(tn.b,{onClick:this.toggleAnonymous,children:m?"取消匿名身份":"使用匿名身份"}),A&&this.renderCommercialMenuItems(U),I&&Object(r.b)(tn.b,{onClick:this.handleDelete,children:"删除问题"}),L&&!_.isOrg&&"normal"===g&&Object(r.b)(tn.b,{onClick:this.handleRedirectionCreatorShow,children:"问题重定向"}),!A&&this.renderLogMenuItem(),M.map((function(e){var t=e.text,n=e.handler,o=e.disabled;return Object(r.b)(tn.b,{onClick:n,disabled:o,children:"举报问题"},t)}))]}),Object(r.b)(an.a,{type:"question",urlToken:d,shown:n,status:this.getQuestionStatus(),onClose:this.handleReport,zaEnabled:!0}),Object(r.b)(F.b,{size:"fullPage",onClose:this.handleInvitationHide,children:t&&Object(r.b)(Dt.a,{question:u})}),Object(r.b)(rn.a,{title:A?"关闭回答":"锁定问题",subtitle:"".concat(A?"关闭":"锁定","后该问题将无法添加新回答，你确定要").concat(A?"关闭":"锁定","吗？"),shown:i,onCancel:this.handleLockTipsHide,onSubmit:this.handleUpdateQuestionLocked}),Object(r.b)(F.b,{size:"large",title:"问题重定向",onClose:this.handleRedirectionCreatorClose,children:c&&Object(r.b)(cn.a,{question:u,onSubmitted:this.handleRedirectionCreated})}),Object(r.b)(rn.a,{title:"删除问题",subtitle:"你确定要删除这个问题吗？相关的评论也将被删除。",onCancel:this.handleDeleteModalClose,onSubmit:this.handleConfirmDelete,shown:a})]})}},{key:"shouldShowAnonymousMenuItem",get:function(){var e=this.context.currentUser;if(e&&!e.isOrg){var t=this.props,n=t.question,r=n.questionType,o=n.relationship.isAnonymous,i=t.allowCommercialAnonymousAnswer;if(o)return!0;if("normal"===r)return!0;if("commercial"===r&&i)return!0}return!1}},{key:"shouldShowMenu",get:function(){var e=this.props,t=e.question.questionType,n=e.permission.canBrandAdminEdit,r="commercial"===t;return!r||!(!r||!n)}}]),n}(d.PureComponent);En.contextTypes={currentUser:h.a.object,authRequired:h.a.func,toggleAnonymous:h.a.func};var _n=Object(R.compose)(o.withRouter,Object(b.connect)((function(e,t){return{shouldOia:Object(U.h)(e),isMuteSpecial:Object(E.C)(t.question),isMuteFreeze:Object(E.B)(t.question),publicEditPermission:e.publicEditPermission,currentUserUrlToken:e.currentUser,permission:Object(E.Z)(e),allowCommercialAnonymousAnswer:"show"===Object(U.a)(e,"gue_anonymous"),isCurrentAnswerCommercialReported:Object(E.A)(e,t.question)}}),{deleteQuestion:E.l,deleteBrandQuestion:E.i,updateQuestionLocked:E.ob,toggleQuestionEditLock:E.gb,showNotification:P.h,updateQuestionPermission:E.pb,updateBrandQuestionOpenStatus:E.hb}))(En);function An(e){var t=e.brand,n=e.noDivider,o=t.name,i=t.logo,a=t.target,c=t.description,s=t.typeDescription,u=a?"a":"div";return Object(r.c)("div",{className:de()("BrandQuestionSymbol",{"is-mobile":!1}),children:[Object(r.c)(u,Object.assign({className:"BrandQuestionSymbol-brandLink"},a&&{href:"/".concat("organization"===a.userType?"org":"people","/").concat(a.urlToken)},{children:[Object(r.b)("img",{role:"presentation",src:i,className:"BrandQuestionSymbol-logo"}),Object(r.b)("span",{className:"BrandQuestionSymbol-name",children:o}),a&&Object(r.b)(pe.c,{badge:a.badge})]})),Object(r.b)("span",{css:{marginLeft:5},children:c}),Boolean(s)&&Object(r.b)("span",{className:"BrandQuestionSymbol-typeDesc",children:s}),!n&&Object(r.b)("div",{className:"BrandQuestionSymbol-divider"})]})}var Tn=n(1333);function Nn(e,t){var n=new Date(e),r=new Date(t),o=Date.UTC(n.getFullYear(),n.getMonth(),n.getDate()),i=Date.UTC(r.getFullYear(),r.getMonth(),r.getDate());return Math.floor((i-o)/864e5)}var In=Object.assign;var Mn=function(e){return f.a.createElement(_e.a,In({viewBox:"0 0 72 18"},e),f.a.createElement("g",{fillRule:"evenodd"},f.a.createElement("rect",{width:"72",height:"18",rx:"2"}),f.a.createElement("text",{fill:"#FFF",fontSize:"12",fontWeight:"500"},f.a.createElement("tspan",{x:"19",y:"13"},"有奖问答")),f.a.createElement("path",{fill:"#FFF",d:"M13.4 5.8H11a.4.4 0 01-.4-.3l.1-.4 1.6-1.7c.4-.4 1-.5 1.6-.2.5.3.8 1 .7 1.5-.2.6-.7 1-1.3 1zm0-1.9L13 4l-.7.8h1c.3 0 .5-.2.5-.4 0-.3-.2-.5-.5-.5zM10 6.4v1.5H5.8a.8.8 0 110-1.5H10zm.8 0h4.3a.8.8 0 010 1.5H11V6.4zM10 8.7v6H8.4c-.8 0-1.1-.2-1.5-.4-.3-.1-.5-.4-.7-.7-.2-.3-.3-.7-.3-1.5v-.9c0-.8.1-1.1.3-1.5l.7-.7c.4-.2.7-.3 1.5-.3h1.7zm.8 0h1.7c.8 0 1.1.1 1.5.3l.7.7c.2.4.3.7.3 1.5v1c0 .7-.1 1-.3 1.4-.2.3-.4.6-.7.7-.4.2-.7.3-1.5.3h-1.7V8.7zm-3.3-3c-.6 0-1.1-.4-1.3-1-.1-.5.2-1.2.7-1.5.5-.3 1.2-.2 1.6.2l1.6 1.7s.1.3 0 .4c0 .2-.2.2-.3.3H7.6zM8 4a.4.4 0 00-.5 0c-.2 0-.4.3-.3.5 0 .2.2.3.4.3h1L8 4z",fillRule:"nonzero"})))};function Dn(e){var t=["一","二","三"],n=function(){var t=e.question,n=t.id,i=t.prize,a=i.endTime,c=i.rule,s=i.status;return Object(r.c)("div",{className:"BrandQuestionPrizes-tips",children:[Object(r.c)("div",{className:"BrandQuestionPrizes-tip",children:[Object(r.c)("span",{className:"BrandQuestionPrizes-tipTitle",children:["活动时间","："]}),Tn.a(new Date(1e3*a),"yyyy-MM-dd HH:mm")," 截止"]}),Object(r.c)("div",{className:"BrandQuestionPrizes-tip",children:[Object(r.c)("span",{className:"BrandQuestionPrizes-tipTitle",children:["活动规则","："]}),c]}),Object(r.c)("div",{className:"BrandQuestionPrizes-tip",children:[Object(r.c)("span",{className:"BrandQuestionPrizes-tipTitle",children:["获奖公示","："]}),"ongoing"===s&&"获奖名单将在活动结束后公布","finished"===s&&"品牌开奖中，即将公布获奖名单","awarded"===s&&Object(r.b)(o.Link,{target:"_blank",to:"/organization/question/".concat(n,"/winners"),children:"查看获奖名单"}),!1]}),Object(r.c)("div",{className:"BrandQuestionPrizes-rule",children:["品牌方为本问题设置了有奖问答，添加回答即视为参与活动，并同意遵守",Object(r.b)("a",{className:"BrandQuestionPrizes-ruleLink",href:"https://www.zhihu.com/organization/ophelp/norm/53",target:"_blank",rel:"noopener noreferrer",children:"《有奖问答活动管理办法》"})]})]})},i=e.handleToggle,a=e.expanded,c=e.question,s=c.id,u=c.prize,l=c.relationship,d=(l=void 0===l?{}:l).isAuthor,f=c.permission,p=(f=void 0===f?{}:f).isSuperUser;if(!u||!u.status)return null;var h=u.endTime,b=u.prizes,v=u.status,m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,n=new Date(t),r=Math.floor(n.getTime()/1e3),o=e-r;if(o<0)return null;var i,a=0,c=1,s=60*c,u=60*s,l=24*u;if(o>l){var d=new Date(1e3*e);a=Nn(n,d),i="天"}else o>u?(a=Math.floor(o/u),i="小时"):o>s?(a=Math.floor(o/s),i="分钟"):(a=o,i="秒");return{quantity:a,unit:i}}(h);return Object(r.c)("div",{className:de()("BrandQuestionPrizes",{"is-mobile":!1}),children:[Object(r.c)("div",{className:"BrandQuestionPrizes-info",children:[Object(r.c)("div",{className:"BrandQuestionPrizes-bar",onClick:i,children:[Object(r.c)("div",{className:"BrandQuestionPrizes-desc",children:[Object(r.c)("div",{className:"BrandQuestionPrizes-symbol",children:[Object(r.b)(Mn,{alt:"logo",width:72,height:18,fill:"ongoing"===v?"#ff9607":"#999999"}),"ongoing"===v&&Object(r.c)("span",{children:["距离结束还有",Object(r.b)("em",{children:m.quantity}),m.unit]}),"finished"===v&&"待开奖","awarded"===v&&"已开奖"]}),Object(r.c)("div",{className:"BrandQuestionPrizes-name",children:["奖品：",b[0].name,b.length>1&&"等"]})]}),Object(r.c)("div",{className:"BrandQuestionPrizes-images",children:[b.map((function(e,t){var n=e.imageUrl;return n&&Object(r.b)("img",{src:n,role:"presentation"},"BrandQuestionPrizes-images".concat(t))})),Object(r.b)(Ve.a,{text:!0,center:!0,fill:"#9fadc7"})]})]}),a&&Object(r.b)("div",{className:"BrandQuestionPrizes-detail",children:b.map((function(e,n){var o=e.imageUrl,i=e.name,a=e.value,c=e.quantity;return Object(r.c)("div",{className:"BrandQuestionPrizes-prize",children:[Object(r.c)("div",{className:"BrandQuestionPrizes-intro",children:[o&&Object(r.b)("img",{className:"BrandQuestionPrizes-prizeImage",src:o,role:"presentation"}),Object(r.c)("div",{className:"BrandQuestionPrizes-prizeInfo",children:[Object(r.c)("div",{className:"BrandQuestionPrizes-prizeName",children:[b.length>1&&"".concat(t[n],"等奖："),i]}),Object(r.c)("div",{className:"BrandQuestionPrizes-prizeValue",children:["价值 ¥ ",a]})]})]}),Object(r.c)("div",{className:"BrandQuestionPrizes-prizeQuantity",children:[c," 份"]})]},"BrandQuestionPrizes-prize".concat(n))}))}),a&&!1]}),a&&n(),a&&Object(r.b)("hr",{className:"BrandQuestionPrizes-split"}),(p||d)&&Object(r.c)(it.a,{className:"BrandQuestionPrizes-edit",to:"/organization/question/".concat(s,"/setting/").concat("finished"===v?"winners":"prize"),children:["ongoing"===v&&"编辑有奖回答","finished"===v&&"填写获奖名单"]})]})}var Ln=n(394);function Pn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var zn=function(e){Object(s.a)(n,e);var t=Pn(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e=this,t=this.props.question,n=t.id,o=t.permission,i=void 0===o?{}:o,a=i.isSuperUser,c=i.canBrandAdminEdit,s=i.haveCard;return c||a?Object(r.b)(tn.c,{className:"BrandQuestionSettingMenu",toggler:Object(r.b)(B.c,{children:"设置样式"}),children:Object(r.c)(d.Fragment,{children:[Object(r.b)(tn.b,{className:"BrandQuestionSettingMenu-item",onClick:function(){e.context.router.push("/organization/question/".concat(n,"/setting/topbanner"))},children:"设置提问头图"}),Object(r.b)(tn.b,{className:"BrandQuestionSettingMenu-item",onClick:function(){e.context.router.push("/organization/question/".concat(n,"/setting/prize"))},children:"编辑有奖问答"}),s&&Object(r.b)(tn.b,{className:"BrandQuestionSettingMenu-item",onClick:function(){e.context.router.push("/organization/question/".concat(n,"/setting/advanced"))},children:"编辑品牌推荐"})]})}):null}}]),n}(d.Component);zn.contextTypes={currentUser:h.a.object,router:h.a.object};var Bn=Object(R.compose)(Object(b.connect)((function(e,t){return{question:e.entities.questions[t.question.id]}})),Object(Ln.a)())(zn),Fn=n(810),Un=n(1062),qn=n(391);function Vn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var Hn=function(e){Object(s.a)(n,e);var t=Vn(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).handleFollow=function(){var t=e.props.pin,n=(t=void 0===t?{}:t).author.isFollowing?1977:1976;e.handleTrack(n)},e.handleTrack=function(t){var n=e.props.pin,r=(n=void 0===n?{}:n).author;re.a.trackEvent(Object(et.a)(e),{id:t},{button:{text:r.name}})},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.target,r=n.type,o=n.id,i=t.getPinContents;"pin"===r&&i(o,{failsafe:!0}).then((function(t){var n=t.payload,r=(void 0===n?{}:n).author,o=(r=void 0===r?{}:r).name;re.a.trackCardShow(e,{id:1969},{button:{text:o}})}))}},{key:"render",value:function(){var e=this,t=this.props.pin;if(!t||!t.content)return null;var n=t.author,o=t.id,i=t.content[0].content.replace(/<a.*class="hash_tag".*?<\/a>/g,""),a=n||{},c=a.type,s=a.urlToken,u=a.isFollowing,l="https://www.zhihu.com/pin/".concat(o);return Object(r.c)("div",{className:"QuestionRelatedCard",children:[Object(r.b)("div",{className:"QuestionRelatedCard-title",children:"相关报道"}),Object(r.c)("div",{className:"QuestionRelatedCard-content",children:[Object(r.b)("span",{dangerouslySetInnerHTML:{__html:Object(Un.truncateHTML)(i,110).content}}),l&&Object(r.b)("a",{className:"QuestionRelated-jump",href:l,onClick:function(){e.handleTrack(1975)},children:"查看详情"})]}),s&&Object(r.c)("div",{className:"QuestionRelatedCard-footer",children:[Object(r.c)("div",{children:["来自",Object(r.b)("a",{className:"QuestionRelatedCard-from",href:"https://www.zhihu.com/people/".concat(s),target:"_blank",rel:"noopener noreferrer",onClick:function(){e.handleTrack(1971)},children:n.name})]}),Object(r.b)("div",{onClick:this.handleFollow,children:Object(r.c)(ut.a,{className:"QuestionRelatedCard-follow",type:c,id:s,isFollowing:u,children:[Object(r.b)(Fn.a,{text:!0,center:!0},"icon"),"关注机构"]})})]})]})}}]),n}(d.Component);Hn.propTypes={target:h.a.shape({type:h.a.string,id:h.a.string}).isRequired};var Kn=Object(R.compose)(Object(b.connect)((function(e,t){return{pin:Object(qn.g)(e,t.target.id)}}),{getPinContents:qn.e}),Object(j.b)((function(e){return{module:"PinItem",card:{content:{type:"Pin",id:e.target.id}}}})))(Hn);function Qn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var Wn=function(e){Object(s.a)(n,e);var t=Qn(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props.question.author;return Object(r.b)("div",{className:"OrgQuestionSymbol",children:Object(r.c)("div",{className:de()("OrgQuestionSymbol-inner",{"OrgQuestionSymbol-inner--mobile":!1}),children:[Object(r.c)("div",{className:"OrgQuestionSymbol-main QuestionHeader-main",children:[Object(r.b)("div",{className:"OrgQuestionSymbol-avatar",children:Object(r.b)(Mt.a,{user:e,avatar:!0,avatarProps:{size:38}})}),Object(r.c)("div",{className:"OrgQuestionSymbol-name",children:[Object(r.b)(Mt.a,{user:e})," 的提问"]})]}),Object(r.b)("div",{className:"OrgQuestionSymbol-tip",children:Object(r.b)(it.a,{preset:"plain",a:!0,to:"/org-intro#org-question",target:"_blank",children:"了解机构提问"})})]})})}}]),n}(d.Component),Gn=n(137),Zn=n(840),Yn=n(1451),Jn=n(159);function $n(){var e=Object(J.a)(["","人评价"]);return $n=function(){return e},e}var Xn=function(e){var t=e.percent,n=e.reviewerCount,o=e.ratioStatus,i=e.title;return Object(r.c)("div",{className:"QuestionTopicReviewCardExtraInfo-cardTitleContainer",children:[Object(r.b)("h3",{className:"QuestionTopicReviewCardExtraInfo-cardTitle",children:i}),"normal"===o?Object(r.c)("div",{children:[" ",Object(r.b)("span",{className:"QuestionTopicReviewCardExtraInfo-percentNum",children:"".concat((10*t).toFixed(),"%")})," ",Object(r.c)("span",{children:["知友推荐 · ",X()($n(),n)]})]}):Object(r.b)("span",{children:"  推荐数据积累中"})]})};Xn.propType={percent:h.a.number.isRequired,reviewerCount:h.a.string.isRequired};var er=Xn,tr=n(31),nr=n(1771),rr=Object(R.compose)(Object(b.connect)(null,(function(e,t){var n=t.metaInfo.id,r=t.questionId;return{onUpdateVoteTopic:function(t){var o=t.voteFor,i=t.method;return e(Object(tr.hb)({questionId:r,id:n,voteFor:o,method:i}))}}})),o.withRouter)(nr.a);function or(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var ir=function(e){Object(s.a)(n,e);var t=or(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).trackReviewCardOpenUrl=function(e){re.a.trackEvent(e.target,{id:4175,action:"OpenUrl",name:name})},e.renderUnpublishedCard=function(t,n,o){return Object(r.c)(Zn.d,{className:"QuestionHeaderTopicMeta",children:[e.renderCardImage("QuestionHeaderTopicMeta-SideImg"),Object(r.c)("div",{className:"QuestionHeaderTopicMeta-Content",children:[Object(r.c)("div",{className:"QuestionHeaderTopicMeta-UnpublishedTitleContainer",children:[Object(r.b)("h3",{className:"QuestionHeaderTopicMeta-UnpublishedTitle",children:t}),"  ",Object(r.c)("span",{className:"QuestionHeaderTopicMeta-Info QuestionHeaderTopicMeta-UnpublishedInfo",children:["暂无评分",Boolean(n)&&" · ".concat(n," 上映")]})]}),Object(r.b)("div",{className:"QuestionHeaderTopicMeta-Info QuestionHeaderTopicMeta-UnpublishedInfo",dangerouslySetInnerHTML:{__html:o}})]})]})},e}return Object(c.a)(n,[{key:"renderCardImage",value:function(e){var t=this.props,n=t.meta,o=t.meta.meta,i=o.title,a=o.avatar,c=n.avatarUrl,s=n.category;return Object(r.b)(Yn.a,{className:de()("".concat(e),{"QuestionHeaderTopicMeta-SideImg--goods":"n_goods"===s}),src:a||c,alt:i})}},{key:"renderTopReviewCard",value:function(){var e=this.props,t=e.meta,n=e.questionId,o=t.meta,i=o.title,a=o.summary,c=o.description2,s=o.description1,u=o.pubInfo,l=t.excerpt,d=a||l||c||s;if(1===u.status||2===u.status){var f=u.pubDate;return this.renderUnpublishedCard(i,f,d)}return Object(r.b)(Zn.d,{className:"QuestionHeaderTopicMeta",children:Object(r.c)("div",{className:"QuestionHeaderTopicMeta-CardMain",children:[this.renderCardImage("QuestionHeaderTopicMeta-SideImg"),Object(r.b)("div",{className:"QuestionHeaderTopicMeta-Content",children:Object(r.b)(rr,{metaInfo:t,questionId:n,ReviewCardExtraInfoComponent:er,reviewerCountFormatter:Se.formatNumber,children:Object(r.b)("div",{className:"QuestionHeaderTopicMeta-Info",dangerouslySetInnerHTML:{__html:d}})})})]})})}},{key:"render",value:function(){var e=this.props.meta;if(!e)return null;var t=e.category,n=e.id,o=e.vote,i=e.isVote,a=o&&i;if(!a)return null;var c=["like","dislike"].includes(o.status);return Object(r.b)(j.a,Object.assign({module:"TopicItem",moduleName:t},a&&{view:{id:4174,name:c?"已评价":"未评价"}},{card:{content:Object.assign({type:"Topic"},Object(Jn.a)("topic",n),{sub_type:"MetaCard"})},trackCardShow:!0,children:Object(r.b)("a",{href:"/topic/".concat(n),target:"_blank",rel:"noopener noreferrer","data-za-not-track-link":!0,onClick:this.trackReviewCardOpenUrl,children:this.renderTopReviewCard()})}))}}]),n}(d.PureComponent),ar=Object(_.a)(null)(ir),cr=function(e){var t=Object(Gn.default)({},e),n=Object(ve.b)(),o=Object(i.a)(n,2),a=o[0],c=o[1];return Object(d.useEffect)((function(){c()}),[]),a?Object(r.b)(ar,Object.assign({},t)):null},sr=Object.assign;var ur=function(e){return f.a.createElement(_e.a,sr({viewBox:"0 0 24 24"},e),f.a.createElement("path",{d:"M17.248 6.5H13.11a.71.71 0 01-.657-.446.731.731 0 01.154-.787l2.812-3.045a2.395 2.395 0 012.926-.392c.95.558 1.527 1.767 1.243 2.844A2.431 2.431 0 0117.248 6.5zm-.114-3.357a.798.798 0 00-.572.24l-1.265 1.474h1.95c.447 0 .695-.44.695-.893a.815.815 0 00-.808-.821zM11.286 7.61v2.857H3.429a1.429 1.429 0 010-2.857h7.857zm1.428 0h7.857a1.429 1.429 0 010 2.857h-7.857V7.611zm-1.428 4.286V22.61H6.23c-.892 0-1.215-.093-1.541-.267a1.817 1.817 0 01-.756-.756c-.175-.326-.267-.65-.267-1.54V14.46c0-.892.092-1.215.267-1.541.174-.326.43-.582.756-.756.326-.174.649-.267 1.54-.267h5.056zm1.428 0h5.055c.892 0 1.215.093 1.541.267.326.174.582.43.756.756.175.326.267.65.267 1.54v5.587c0 .892-.092 1.215-.267 1.541-.174.326-.43.582-.756.756-.326.174-.649.267-1.54.267h-5.056V11.897zM6.752 6.5a2.431 2.431 0 01-2.341-1.826c-.284-1.077.293-2.286 1.243-2.844a2.395 2.395 0 012.926.392l2.812 3.045a.731.731 0 01.153.787.711.711 0 01-.656.446H6.752zm.686-3.117a.798.798 0 00-.976-.13c-.317.185-.585.637-.49.996a.81.81 0 00.78.608h1.951L7.438 3.383z"}))};function lr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var dr=function(e){Object(s.a)(n,e);var t=lr(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={remainedTime:null},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.totalCountdownTime,r=t.onFinish;"number"==typeof n?(this.setState({remainedTime:n}),this.timer=setInterval((function(){e.setState({remainedTime:e.state.remainedTime-5})}),5e3)):"function"==typeof r&&r()}},{key:"componentDidUpdate",value:function(){var e=this.props.onFinish;this.state.remainedTime<=0&&(clearInterval(this.timer),"function"==typeof e&&e())}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"renderCountdownTime",value:function(){var e=this.state.remainedTime;if(e<60)return Object(r.c)(d.Fragment,{children:["距结束不足 ",Object(r.b)("span",{children:"1"})," 分钟"]});var t,n,o=(t=e,n=Math.floor(t/60),{hours:Math.floor(n/60),minutes:n%60}),i=o.hours,a=o.minutes;return 0===i?Object(r.c)(d.Fragment,{children:["距结束还有 ",Object(r.b)("span",{children:a})," 分钟"]}):Object(r.c)(d.Fragment,{children:["距结束还有 ",Object(r.b)("span",{children:i})," 小时"," ",a>0&&Object(r.c)(d.Fragment,{children:[Object(r.b)("span",{children:a})," 分钟"]})]})}},{key:"render",value:function(){var e=this.props.className;return null===this.state.remainedTime?Object(r.b)("div",{className:e,children:"距结束还有"}):Object(r.b)("div",{className:e,children:this.renderCountdownTime()})}}]),n}(d.Component);function fr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}dr.propTypes={totalCountdownTime:h.a.number.isRequired,onFinish:h.a.func};var pr=function(e){Object(s.a)(n,e);var t=fr(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={expanded:!1,bodyHeight:0},e.contentRef=Object(d.createRef)(),e.handleExpand=function(){var t=e.contentRef.current;e.setState({expanded:!0,bodyHeight:"".concat(t.offsetHeight+1,"px")}),re.a.trackEvent(Object(et.a)(e),{id:5036,action:"Expand"})},e.handleCollapse=function(){e.setState({expanded:!1,bodyHeight:0}),re.a.trackEvent(Object(et.a)(e),{id:5037,action:"Fold"})},e.handleClickHeader=function(){e.state.expanded?e.handleCollapse():e.handleExpand()},e.handleCountdownFinish=function(){var t=e.props;(0,t.removeBrandQuestionRedPacket)(t.questionId)},e}return Object(c.a)(n,[{key:"renderCountdown",value:function(){var e=this.props.redPacket,t=e.countDownType,n=e.countDownValue,o="".concat("CommercialAnswerRedPacket","-countdown");return 2===t?Object(r.b)(dr,{className:o,totalCountdownTime:n,onFinish:this.handleCountdownFinish}):Object(r.c)("div",{className:o,children:["还剩 ",Object(r.b)("span",{children:Object(Se.cnNiceNumber)(n)}),"个红包"]})}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.redPacket,o=n.title,i=n.image,a=n.iconText,c=n.content,s=this.state,u=s.expanded,l=s.bodyHeight;return Object(r.b)(j.a,{view:{id:5035},trackCardShow:!0,children:Object(r.c)("div",{className:de()("CommercialAnswerRedPacket",t,Object(ue.a)({},"".concat("CommercialAnswerRedPacket","--expanded"),u)),children:[Object(r.c)("div",{className:"".concat("CommercialAnswerRedPacket","-header"),onClick:this.handleClickHeader,children:[Object(r.c)("div",{className:"".concat("CommercialAnswerRedPacket","-main"),children:[Object(r.c)("div",{className:"".concat("CommercialAnswerRedPacket","-subtitle"),children:[Object(r.c)("div",{className:"".concat("CommercialAnswerRedPacket","-badge"),children:[Object(r.b)("span",{children:Object(r.b)(ur,{size:11})}),Object(r.b)("span",{children:a})]}),this.renderCountdown()]}),Object(r.b)("div",{className:"".concat("CommercialAnswerRedPacket","-title"),children:o})]}),Object(r.b)("div",{className:"".concat("CommercialAnswerRedPacket","-image"),children:Object(r.b)("img",{src:Object(xe.imgUrl)(i,"xl")})}),Object(r.b)("div",{className:"".concat("CommercialAnswerRedPacket","-icon"),children:u?Object(r.b)(ee.a,{size:20}):Object(r.b)(Ve.a,{size:20})})]}),Object(r.b)("div",{className:"".concat("CommercialAnswerRedPacket","-body"),style:{height:l},children:Object(r.b)("div",{ref:this.contentRef,className:"".concat("CommercialAnswerRedPacket","-content"),dangerouslySetInnerHTML:{__html:c}})})]})})}}]),n}(d.Component),hr=Object(b.connect)(null,{removeBrandQuestionRedPacket:E.db})(pr),br=n(834),vr=Object(_.a)(null)((function(e){var t,n,o,i=e.id,a=e.question,c=function(e,t){var n=Object(b.useSelector)((function(t){var n,r;return null==t||null===(n=t.question)||void 0===n||null===(r=n.questionBanners)||void 0===r?void 0:r[e]})),r=Object(b.useDispatch)();return Object(d.useEffect)((function(){t&&r(Object(E.u)(e))}),[t,r,e]),n}(i,null==a?void 0:a.isBannered),s=null==c||null===(t=c[0])||void 0===t||null===(n=t.imagePc)||void 0===n?void 0:n[0],u=null==c||null===(o=c[0])||void 0===o?void 0:o.verbPc;if(Object(d.useEffect)((function(){s&&re.a.trackCardShow(null,{id:7707},{button:{text:u}})}),[s,u]),!s)return null;var l=c[0],f=l.targetLinkPc,p=l.entryVerbPc,h=l.imagePc,v=h[0].url,m=h[0].color;return f&&u&&p&&v?Object(r.b)(ke.Link,{className:"Card",css:{display:"block",fontSize:0,marginBottom:16},href:f,onClick:function(e){re.a.trackEvent(e.target,{id:7708,action:"OpenUrl"},{link:{url:f},button:{text:u}})},target:"_blank",children:Object(r.c)("div",{className:"BackgroundContainer",css:function(e){return{background:"".concat(e.colorMod(m).alpha(1))}},children:[Object(r.c)("div",{className:"BackgroundContainer-content",children:[Object(r.b)(ke.Image,{src:v,css:{height:"100%",width:"100%",objectFit:"cover"}}),Object(r.b)("div",{className:"BackgroundContainer-modal",css:function(e){return{background:"linear-gradient(270deg, ".concat(e.colorMod(m).alpha(1),", ").concat(e.colorMod(m).alpha(.2),")")}}})]}),Object(r.c)("div",{className:"ContentContainer",children:[Object(r.b)("div",{children:u}),Object(r.c)("div",{className:"ContentContainer-title",children:[Object(r.b)("div",{children:p}),Object(r.b)(br.a,{size:24,center:!0})]})]})]})}):null}));function mr(){var e=Object(J.a)(["","提问："]);return mr=function(){return e},e}function gr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var yr=function(e){Object(s.a)(n,e);var t=gr(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={collapsed:!0,editShown:!1,invitationTipShown:!1,brandQuestionPrizesExpanded:!1},e.getHandleInvite=function(t){t&&(e.handleInvite=t)},e.handleExpand=function(){e.setState({collapsed:!1}),re.a.trackEvent(null,{id:6783,action:"Click"})},e.handleCollapse=function(){e.setState({collapsed:!0,shareMenuPositionStatus:"normal"})},e.handleEditShow=e.context.authRequired((function(){var t=(e.props.question.reviewInfo||{}).editTips;t?e.props.showNotification(t,"red"):e.setState({editShown:!0})})),e.handleEditClose=function(){e.setState({editShown:!1})},e.handleInvitationShow=function(){e.setState({invitationModalShown:!0})},e.handleInvitationHide=function(){e.setState({invitationModalShown:!1})},e.handleInvitationTipShow=function(){e.setState({invitationTipShown:!0})},e.handleInvitationTipClose=function(){e.setState({invitationTipShown:!1})},e.handleRedirectionCreatorShow=function(){e.setState({redirectionCreatorShown:!0})},e.handleRedirectionCreatorClose=function(){e.setState({redirectionCreatorShown:!1})},e.handleRedirectionCreated=function(t,n){var r=e.props,o=r.router,i=r.question.id,a=t.id;e.handleRedirectionCreatorClose(),n.then((function(){o.push("/question/".concat(a,"?rf=").concat(i))}))},e.handleDelete=function(){var t=e.props,n=t.question.id,r=t.isCommercialQuestion,o=t.deleteQuestion,i=t.deleteBrandQuestion;return r?i(n).then((function(){location.href="/"})):o(n).then((function(){location.href="/"}))},e.handleConfirmDelete=function(){e.handleDeleteModalClose(),e.handleDelete()},e.handleDeleteModalShow=function(){e.setState({deleteModalShown:!0})},e.handleDeleteModalClose=function(){e.setState({deleteModalShown:!1})},e.handlePositionStatusChange=function(t){e.setState({shareMenuPositionStatus:t})},e.handleUpdateQuestionLocked=function(){var t=e.props,n=t.question.id;(0,t.updateQuestionLocked)(n)},e.handleLockTipsShow=function(){return e.setState({lockTipsShown:!0})},e.handleLockTipsHide=function(){return e.setState({lockTipsShown:!1})},e.handleBrandQuestionPrizesToggle=function(){e.setState({brandQuestionPrizesExpanded:!e.state.brandQuestionPrizesExpanded})},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=(e.isAnswerPage,e.question.id),n=e.isCommercialQuestion,r=e.loadBrand,o=e.loadQuestionCommercialBanner,i=e.loadBrandQuestionRedPacket,a=e.loadBrandQuestionPermission,c=e.loadBrandQuestionOpenStatus,s=e.loadBrandQuestionAdvancedStyle,u=e.loadBrandQuestionPrize,l=this.context.currentUser;this.context.currentUser&&Object(oe.c)("question",t,oe.a),n&&(r(t),o(t),s(t),i(t).then((function(e){e&&e.payload||u(t)})),l&&"guest"!==l.userType&&(a(t),c(t)))}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.question.id,r=t.isAnswerPage,o=e.question,i=o.id,a=o.relationship.isAnonymous,c=e.isAnswerPage;!this.state.collapsed&&e.question&&this.props.question&&e.question.detail.length!==this.props.question.detail.length&&this.setState({collapsed:!0,editShown:!1}),n===i&&r===c||this.setState({collapsed:!0,invitationTipShown:!1}),a||this.setState({invitationTipShown:!1})}},{key:"componentDidUpdate",value:function(e,t){var n=this.state.collapsed,r=t.collapsed;if(n&&!r){var o=this.container.getBoundingClientRect().top;window.scrollTo(0,window.pageYOffset+o-document.documentElement.clientHeight)}}},{key:"renderEditModal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.permitEditTopics,n=this.props,o=n.question,i=n.brand,a=o.id,c=o.title,s=o.editableDetail,u=o.topics,l=o.questionType,d=o.relationship.isAnonymous,f=this.state.editShown;return Object(r.b)(qe.a,{id:a,title:c,detail:s,topics:u,questionType:l,isAnonymous:d,show:f,onClose:this.handleEditClose,brand:i,permitEditTopics:t})}},{key:"renderFooter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.permitEditQuestion,n=e.permitEditTopics,o=this.props,i=o.question,a=o.isCommercialQuestion,c=this.state.collapsed,s=this.context.currentUser,u=a&&!0;return Object(r.c)("div",{className:"QuestionHeader-footer",children:[Object(r.b)("div",{className:"QuestionHeader-footer-inner",children:Object(r.c)("div",{className:"QuestionHeader-main QuestionHeader-footer-main",children:[Object(r.b)(bt,{question:i}),u&&Object(r.b)(Bn,{question:i}),Object(r.b)(_n,{question:i,onInvitationTipShow:this.handleInvitationTipShow,getHandleInvite:this.getHandleInvite,editQuestionButton:t&&Object(r.b)(Ge,{onClick:this.handleEditShow,text:"修改问题"})}),Object(r.b)("div",{className:"QuestionHeader-actions",children:!c&&Object(r.c)(B.c,{preset:"plain",onClick:this.handleCollapse,children:["收起 ",Object(r.b)(ee.a,{center:!0})]})})]})}),s&&this.renderEditModal({permitEditTopics:n})]})}},{key:"renderSpecialQuestionAuthor",value:function(){var e=this.props.question.author;return Object(r.c)(d.Fragment,{children:[Object(r.b)(be,{className:"QuestionHeader-specialQuestionAuthor",author:e}),Object(r.b)("div",{className:"QuestionHeader-topicDivider"})]})}},{key:"render",value:function(){var e=this,t=this.props,n=t.location,o=t.question,a=t.isAnswerPage,c=t.isCommercialQuestion,s=t.isOrgQuestion,u=t.isAuthorCurrentUser,l=t.brand,d=t.publicEditPermission,f=t.meta,p=t.permission.canBrandAdminEdit,h=o.title,b=o.detail,v=o.topics,m=void 0===v?[]:v,g=o.author,y=o.showAuthor,O=o.showEncourageAuthor,w=o.excerpt,C=o.thumbnailInfo,k=o.isEditable,S=o.id,x=o.reviewInfo,R=o.relatedCards,E=void 0===R?[]:R,_=o.annotationDetail,A=o.redPacket,T=o.isVisible,N=o.relationship.isAuthor,I=this.state,M=I.collapsed,D=I.invitationTipShown,L=I.brandQuestionPrizesExpanded,P=Object(i.a)(f,1)[0],z=m.map((function(e){return{name:e.name,id:e.id}})),B=d||{},F=B.isQuestionEditable,U=B.isQuestionTopicEditable,q=Object(dt.e)(k,u,F)||p,V=Object(dt.e)(k,u,U)||p,H=this.renderFooter({permitEditQuestion:q,permitEditTopics:V});return Object(r.c)("div",{"data-zop-question":JSON.stringify({title:h,topics:z,id:S,isEditable:k}),children:[Object(r.b)(ae.a,{children:Object(r.b)(zt,{question:o,location:n,invitationTipShown:D,onInvitationTipClose:this.handleInvitationTipClose,isAnswerPage:a})}),c&&(!M||!a)&&Object(r.b)(se.a,{type:o.type,id:o.id}),Object(r.b)(j.a,{module:"QuestionDescription",card:{content:{type:"Question",token:String(S)}},children:Object(r.c)("div",{children:[!1===T&&N&&Object(r.c)("div",{className:"QuestionReviewing",children:[Object(r.b)("div",{className:"QuestionReviewing-title",children:"内容审核中"}),Object(r.b)("div",{className:"QuestionReviewing-text",children:"内容将在审核通过后自动发布"})]}),Object(r.c)("div",{className:"QuestionHeader",ref:function(t){e.container=t},children:[Object(r.c)("div",{className:"QuestionHeader-content",children:[Object(r.c)("div",{className:"QuestionHeader-main",children:[Object(r.b)(vr,{id:S,question:o}),Object(r.c)("div",{className:"QuestionHeader-tags",children:[c&&Object(r.b)(An,{brand:l}),Object(r.c)("div",{className:"QuestionHeader-topics",children:[Boolean(y&&!(c&&(null==l?void 0:l.name)))&&this.renderSpecialQuestionAuthor(),m.map((function(e){return Object(r.b)(Ue,{item:e},e.id)}))]})]}),Object(r.c)("h1",{className:"QuestionHeader-title",children:[s&&X()(mr(),g.name),h]}),Boolean(!y&&!s&&!c&&O)&&Object(r.b)(we,{question:o,isAuthorCurrentUser:u,hasExtraContent:this.hasExtraContentUnderAuthor}),Object(r.b)(ce.a,{item:o,annotationProps:_&&{annotationDetail:_}}),E[0]&&Object(r.b)(Kn,{target:E[0]}),A&&Object(r.b)(hr,{questionId:S,redPacket:A}),Object(r.b)(Dn,{question:o,expanded:L,handleToggle:this.handleBrandQuestionPrizesToggle}),Object(r.c)(ve.a,{children:[Object(r.b)(Le,{questionId:S,isInAnswerPage:a}),!c&&Object(r.b)(cr,{meta:P,questionId:S})]}),Object(r.b)($e,{html:b,reviewInfo:x,excerpt:w,thumbnailInfo:C,collapsed:M,onExpand:this.handleExpand,onEdit:this.handleEditShow,isVisible:T,isAuthor:N})]}),Object(r.b)("div",{className:"QuestionHeader-side",children:Object(r.b)("div",{className:"QuestionHeader-follow-status",children:Object(r.b)(Yt,{question:o})})})]}),M?H:Object(r.b)(te.a,{bottom:!0,container:function(){return e.container},onPositionStatusChange:this.handlePositionStatusChange,children:H}),s&&Object(r.b)(Wn,{question:o})]})]})}),Object(r.b)(ie.a,{children:Object(r.c)("div",{className:"QuestionHeader-content",children:[Object(r.b)("div",{className:"QuestionHeader-main",children:Object(r.b)("h1",{className:"QuestionHeader-title",onClick:function(){Object(ne.scrollTo)(window,{top:0,behavior:"smooth"})},children:h})}),Object(r.b)(j.a,{module:"ToolBar",card:{content:{type:"Question",token:String(S)}},children:Object(r.b)("div",{className:"QuestionHeader-side",children:Object(r.b)(bt,{question:o,inTopBar:!0})})})]})})]})}},{key:"hasExtraContentUnderAuthor",get:function(){var e=this.props,t=e.question,n=e.isCommercialQuestion,r=e.meta,o=t.relatedCards,a=void 0===o?[]:o,c=t.annotationDetail,s=t.redPacket,u=t.prize,l=Object(i.a)(r,1)[0];return c||a[0]||s||(null==u?void 0:u.status)||l&&!n}}]),n}(d.PureComponent);yr.contextTypes={authRequired:h.a.func,currentUser:h.a.object},yr.propTypes={question:h.a.object,location:h.a.object,isAnswerPage:h.a.bool};var Or=Object(R.compose)(o.withRouter,Object(b.connect)((function(e,t){var n=e.question.brand,r=e.publicEditPermission,o=e.currentUser,i=t.question,a=i.questionType,c=i.author;return{brand:n,publicEditPermission:r,currentUserUrlToken:o,permission:Object(E.Z)(e),isCommercialQuestion:"commercial"===a,isOrgQuestion:"org"===a,isAuthorCurrentUser:Object(M.i)(e,c)}}),{loadBrand:E.F,updateQuestionLocked:E.ob,deleteQuestion:E.l,deleteBrandQuestion:E.i,showNotification:P.h,loadQuestionCommercialBanner:E.R,loadBrandQuestionRedPacket:E.L,loadBrandQuestionPermission:E.J,loadBrandQuestionOpenStatus:E.I,loadBrandQuestionAdvancedStyle:E.G,loadBrandQuestionPrize:E.K}))(yr),jr=n(1151);function wr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}function Cr(e){var t=e.toString();return 1===t.length?"0".concat(t):t}var kr=function(e){var t=Object(w.parseInputTime)(e);return t?"".concat(t.getFullYear(),"-").concat(Cr(t.getMonth()+1),"-").concat(Cr(t.getDate()),"T").concat(Cr(t.getHours()),":").concat(Cr(t.getMinutes()),":").concat(Cr(t.getSeconds())):""};function Sr(){var e=document.querySelector("#js-answerAddCard");e?e.scrollIntoView({block:"end"}):window.scrollTo(0,0)}var xr=function(e){Object(s.a)(n,e);var t=wr(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={anonymousConfirmShown:!1,answering:!1,hideIsMutedCover:!1,signFlowModalShown:!1},e.editableStatscReporter=Object(jr.c)("AnswerPage"),e.getPublicEditPermission=function(){var t=e.props,n=t.question,r=t.currentUserUrlToken,o=t.getPublicEditPermission,i=O()(n,"author.urlToken","");O()(n,"isEditable",!1)&&r&&i!==r&&o()},e.handleToggleAnonymous=function(){var t=e.props,n=t.showNotification,r=t.reward.question,o=void 0===r?{}:r,i=t.id;i&&o[i]&&o[i].isRewardable?n("已开启赞赏的回答无法设为匿名，请先关闭赞赏","red"):e.setState({anonymousConfirmShown:!e.state.anonymousConfirmShown})},e.startAddAnswer=function(){var t=e.props,n=t.params.answerId,r=t.location.query.group_id;n||r?(e.context.router.push("/question/".concat(e.props.id)),setTimeout(e.focusAddAnswer)):e.focusAddAnswer()},e.endAddAnswer=function(){e.setState({answering:!1})},e.focusAddAnswer=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Sr(),e.setState({answering:Date.now()},(function(){t&&setTimeout(Sr)}))},e}return Object(c.a)(n,[{key:"getChildContext",value:function(){return{toggleAnonymous:this.handleToggleAnonymous,startAddAnswer:this.startAddAnswer,endAddAnswer:this.endAddAnswer}}},{key:"componentDidMount",value:function(){var e=this;Object(jr.d)();var t,n=this.props,r=n.question,o=n.answer,i=n.currentUser;(!(t=null==o?void 0:o.updatedTime)||Date.now()-1e3*t>6e4)&&Object(I.loadScript)("https://zz.bdstatic.com/linksubmit/push.js",{crossOrigin:void 0}),Promise.resolve(r?this.fetchDraft():this.fetchQuestionAndDraft()).then((function(){var t=e.props.draft;if(!e.props.params.answerId){var n="#draft"===location.hash||"#write"===location.hash;(t&&!t.schedule||!t&&n)&&e.focusAddAnswer(n)}})),this.getPublicEditPermission(),i&&"guest"!==i.userType||this.setState({signFlowModalShown:!0})}},{key:"componentDidUpdate",value:function(e){this.props.params.id!==e.params.id&&this.fetchQuestionAndDraft()}},{key:"componentWillUnmount",value:function(){this.subscription&&this.subscription.unsubscribe(),this.scrollSubscription&&this.scrollSubscription.unsubscribe()}},{key:"fetchQuestionAndDraft",value:function(){var e=this.props,t=e.id,n=e.loadQuestion;return Promise.all([n(t),this.fetchDraft()])}},{key:"fetchDraft",value:function(){var e,t=this.props.loadDraft;return this.context.currentUser&&(e=t(this.props.params.id)),this.setState({anonymousConfirmShown:!1}),e}},{key:"renderMeta",value:function(){var e=this.props.question,t=Object(dt.d)(e);return Object.keys(t).map((function(e){return Object(r.b)("meta",{itemProp:e,content:t[e]},e)}))}},{key:"renderJSONLD",value:function(){var e=this.props,t=e.location,n=e.question,o=e.answer,a=e.params.answerId,c=e.ua;if(!/baiduspider/i.test(c.origin))return null;var s=Boolean(a),u=s?o:n;if(u){var l=s?[u.createdTime,u.updatedTime]:[u.created,u.updatedTime],d=Object(i.a)(l,2),f=d[0],p=d[1],h=kr(f),b=kr(p);return Object(r.b)("script",{type:"application/ld+json",children:'\n        {\n          "@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",\n          "@id": "https://www.zhihu.com'.concat(t.pathname,'",\n          "appid": "否",\n          "pubDate": "').concat(h,'",\n          "upDate": "').concat(b,'"\n        }')})}}},{key:"handleSignFlowModalClose",value:function(){this.setState({signFlowModalShown:!1})}},{key:"render",value:function(){var e,t=this,n=this.props,o=n.location,i=n.params,a=n.children,c=n.question,s=n.router.location.query,u=n.meta,l=n.answer,f=n.firstAnswer,p=Boolean(i.answerId);if(!c)return Object(r.b)("div",{});if("true"===s.answer_deleted_redirect)return Object(r.b)(Y,{id:c.id});var h=c.questionType,b=c.isMuted,m=c.title,y=c.relationship,O=y.isAuthor,w=y.myAnswer,C=c.visibleOnlyToAuthor;if(!p&&!O&&C||p&&(null==l?void 0:l.visibleOnlyToAuthor)&&!(null==l||null===(e=l.relationship)||void 0===e?void 0:e.isAuthor))return Object(r.b)(x,{});var k=this.state,S=k.anonymousConfirmShown,R=k.answering,E=k.hideIsMutedCover,_=k.signFlowModalShown,A=p?l:c;return Object(r.b)(v.b,{content:{type:"Question",token:String(null==c?void 0:c.id)},children:Object(r.b)(j.a,{module:"QuestionItem",card:{content:{type:"Question",token:String(c.id)}},children:Object(r.c)("div",{className:"QuestionPage",itemScope:!0,itemType:"http://schema.org/Question",children:[Object(r.b)(K,{}),A&&Object(r.b)(T,{entity:A}),_&&Object(r.b)(z.b,{maskClosable:!1,showQrcodeFirst:!0,defaultType:"login",onClose:function(){t.handleSignFlowModalClose()}}),Object(r.b)(g.a,Object.assign({title:m},!p&&{meta:Object(N.c)(c,f)})),this.renderMeta(),this.renderJSONLD(),"commercial"===h&&b&&!E&&O&&Object(r.b)("div",{className:"QuestionPage-commercialIsMutedCover",onClick:function(){t.setState({hideIsMutedCover:!0})}}),C&&O&&!p&&Object(r.b)("div",{className:"QuestionPage-visibleYourself",children:"仅自己可见"}),Object(r.b)(Or,{meta:u,question:c,location:o,onToggleAnonymous:this.handleToggleAnonymous,isAnswerPage:p}),Object(r.b)(jr.a.Provider,{value:this.editableStatscReporter,children:Object(d.cloneElement)(d.Children.only(a),{question:c,answering:R})}),Object(r.b)(H,{question:c,myAnswer:w,shown:S,onClose:this.handleToggleAnonymous})]})})})}}]),n}(d.PureComponent);xr.fetchData=function(e){var t=e.dispatch,n=e.getState,r=e.params,o=r.id,i=r.answerId;return n().env.userAgent.isBot?Promise.all([t(Object(E.X)(o,i)),t(Object(E.Y)(o)),t(Object(E.Q)(o))]):t(Object(E.Q)(o))},xr.contextTypes={router:h.a.object,currentUser:h.a.object,authRequired:h.a.func},xr.childContextTypes={toggleAnonymous:h.a.func,startAddAnswer:h.a.func,endAddAnswer:h.a.func};var Rr=Object(b.connect)((function(e,t){var n=t.params,r=n.id,o=n.answerId,i=e.question.meta,a=e.entities.drafts,c=void 0===a?{}:a,s=e.env,u=s.referer,l=s.userAgent,d=e.reward,f=void 0===d?{}:d,p=e.currentUser,h=Boolean(o);return Object.assign({id:r,meta:i[r]||[],question:Object(E.bb)(e,{id:r}),reward:f,draft:c["question_".concat(r)],referer:u,ua:l,currentUserUrlToken:p,currentUser:Object(M.b)(e)},h?{answer:Object(L.c)(e,{id:o})}:{firstAnswer:Object(L.j)(e,{id:r})})}),{loadQuestion:E.Q,loadDraft:E.N,updateQuestionAnonymous:E.mb,showNotification:P.h,getPublicEditPermission:D.b})(xr),Er=n(370),_r=n(1355),Ar=n(1293);var Tr=function(e){var t=e.className,n=e.type,o=n.icon,i=n.text,a=e.active,c=void 0!==a&&a,s=e.onClick;return Object(r.c)("div",{className:de()("QuestionType",t,{"QuestionType--active":c}),onClick:s,children:[Object(r.b)(o,{className:"QuestionType-icon",size:18}),i]})},Nr=n(541);var Ir=Object(b.connect)((function(e,t){var n=t.location.query.type;return{allWaitingQuestions:e.question.waitingQuestions,defaultType:Nr.b.find((function(e){return e.queryName===n}))||Nr.b[0]}}),{getWaitingQuestions:E.x,getWaitingInvitedQuestions:E.w,deleteWaitingQuestion:E.m,setLaterQuestionAnimate:E.fb,ignoreToolsQuestionInvite:E.z})((function(e){var t=e.allWaitingQuestions,n=e.defaultType,a=e.getWaitingQuestions,c=e.getWaitingInvitedQuestions,s=e.deleteWaitingQuestion,u=e.ignoreToolsQuestionInvite,l=Object(d.useRef)(null),f=Object(d.useState)(n.name),p=Object(i.a)(f,2),h=p[0],b=p[1],v=Object(d.useState)(Nr.b.reduce((function(e,t){var n=t.name;return Object.assign({},e,Object(ue.a)({},n,0))}),{})),m=Object(i.a)(v,2),y=m[0],O=m[1],j=t[h].paging,w=function(){return c((null==j?void 0:j.next)?j.next:"notifications/v3/timeline/entry/invite?invite_with_time_slice=1&limit=20&offset=0")},C=Object(d.useState)(new Set),k=Object(i.a)(C,2),S=k[0],x=k[1],R=t[h],E=R.isEnd,_=R.isLoading,A=R.questions.filter((function(e){var t=Object(Nr.a)(e,h).question,n=t.ignoreId,r=t.id;return!S.has(n||r)}));return Object(r.c)("div",{className:"QuestionWaiting",children:[Object(r.b)(g.a,{title:"等你来答"}),Object(r.c)(Zn.d,{className:"QuestionWaiting-mainColumn",children:[Object(r.b)(te.a,{offset:62,children:function(e){var n=e.isFixed;return Object(r.c)("div",{className:de()("QuestionWaiting-typesContainer",{"QuestionWaiting-typesContainer--fixed":n}),children:[n&&Object(r.b)("div",{className:"QuestionWaiting-typesTopper"}),Object(r.b)("div",{className:de()("QuestionWaiting-types",{"QuestionWaiting-types--fixed":n}),children:Nr.b.map((function(e){return Object(r.b)(o.Link,{to:e.queryName?"/question/waiting?type=".concat(e.queryName):"/question/waiting","data-za-detail-view-id":5362,"data-za-extra":JSON.stringify({button:{text:e.text}}),children:Object(r.b)(Tr,{className:"QuestionWaiting-type",type:e,active:e.name===h,onClick:function(){return function(e){O(Object.assign({},y,Object(ue.a)({},h,window.pageYOffset)));var n=e.name,r=e.request,o=r.endpoint,i=r.query;t[e.name].questions.length||("invite"!==e?a({type:n,endpoint:o,query:i}):w()),b(n),window.scrollTo(0,y[n])}(e)}})},e.name)}))})]})}}),Object(r.b)(Er.b,{ref:l,className:"QuestionWaiting-questions",onLoad:function(){"invite"===h?w():a({type:h,endpoint:n.request.endpoint,query:n.request.query,offset:A.length})},isLoading:_,placeholder:Object(r.b)(Er.a,{className:"QuestionWaiting-placeholder"}),isDrained:E,children:A.map((function(e){var t,n=Object(Nr.a)(e,h),o=n.question,i=n.headerInfo,a=n.extraFooter,c=n.showTime,d=n.button,f=n.titleLink,p=n.zaContent;return Object(r.b)(Ar.a,{className:"QuestionWaiting-questionItem",question:o,headerInfo:i,extraFooterInfo:a,showTime:c,enableIgnore:!0,handleIgnoreQuestion:(t=o.ignoreId||o.id,function(){x(new Set(S).add(t)),"invite"===h?u(t):s(t),l.current.maybeRun()}),button:d,titleLink:f,zaContent:p,zaId:{titleClick:5364,expand:5365,cardShow:5363,writeAnswer:5367,ignoreQuestion:5366}},e.id)}))})]}),Object(r.b)(_r.a,{omit:{noBanner:!0,noCategory:!0}})]})})),Mr=n(18),Dr=function(e){return f.a.createElement(Mr.a,e,f.a.createElement("path",{d:"M12.004 4.15a7.85 7.85 0 1 1-5.772 13.17.85.85 0 0 1 1.25-1.153 6.15 6.15 0 1 0-1.559-5.087l1.208.343a.542.542 0 0 1 .112.996l-2.597 1.42a.542.542 0 0 1-.732-.21l-1.44-2.561a.542.542 0 0 1 .62-.787l1.182.334a7.852 7.852 0 0 1 7.728-6.465zm-.178 3.792c.385 0 .7.31.7.69l-.003 3.495 2.564 1.693c.315.207.425.671.185.977-.24.305-.69.33-.99.126 0 0-2.53-1.663-2.844-1.9-.315-.236-.315-.551-.315-.551l.003-3.84c0-.38.315-.69.7-.69z",fillRule:"evenodd"}))};Dr.defaultProps={name:"Later"};var Lr=Dr,Pr=n(808),zr=n(235),Br=n.n(zr);var Fr=function(e){var t=e.className,n=e.titleClassName,o=e.sourceClassName,a=e.hideButtonClassName,c=e.question,s=c.id,u=c.title,l=c.detail,f=c.excerpt,p=c.isDeleted,h=e.mainSource,b=e.subSource,v=e.mainTool,m=e.subTool,g=e.zaId,y=void 0===g?{}:g,O=e.onMouseEnter,w=void 0===O?Br.a:O,C=e.onMouseLeave,k=void 0===C?Br.a:C,S=e.onExpand,x=void 0===S?Br.a:S,R=e.onCollapse,E=void 0===R?Br.a:R,_="https://www.zhihu.com/question/".concat(s),A=Object(d.useState)(!0),T=Object(i.a)(A,2),N=T[0],I=T[1],M=Object(d.useCallback)((function(e){I(!0),E(e),re.a.trackEvent(e.target,{id:y.collapse,action:"Collapse"})}),[I,E,y]),D=Object(d.useCallback)((function(e){I(!1),x(e),re.a.trackEvent(e.target,{id:y.expand,action:"Expand"})}),[I,x,y]);return p?Object(r.c)("div",{className:de()("ListQuestionItem","ListQuestionItem--deleted",t),children:[Object(r.b)("div",{className:"ListQuestionItem-hint",children:"该问题已被删除"}),Object(r.b)("div",{className:"ListQuestionItem-mainTool",children:v})]}):Object(r.b)(j.a,{module:"QuestionItem",card:{content:{type:"Question",token:String(s)}},trackCardShow:Boolean(y.cardShow),view:{id:y.cardShow},children:Object(r.c)("div",{className:de()("ListQuestionItem",t),onMouseEnter:w,onMouseLeave:k,children:[(h||b)&&Object(r.c)("div",{className:de()("ListQuestionItem-source",o),children:[h&&Object(r.b)("div",{className:"ListQuestionItem-mainSource",children:h}),b&&Object(r.b)("div",{className:"ListQuestionItem-subSource",children:b})]}),Object(r.b)("a",{className:de()("ListQuestionItem-title",n,{"ListQuestionItem-title--noDetail":!l}),href:_,target:"_blank",rel:"noopener noreferrer","data-za-detail-view-id":y.titleClick,children:u}),l&&Object(r.b)($e,{className:"ListQuestionItem-RichText",html:l,reviewInfo:{},excerpt:f,collapsed:N,onExpand:D,editable:!1}),Object(r.c)("div",{className:"ListQuestionItem-tool",children:[Object(r.c)("div",{className:"ListQuestionItem-mainTool",children:[Object(r.b)(it.a,{className:"ListQuestionItem-writeAnswerButton",color:"blue",icon:We.a,label:"写回答",href:"".concat(_,"#write"),target:"_blank","data-za-not-track-link":!0,onClick:function(e){re.a.trackEvent(e.target,{id:y.writeAnswer,action:"Answer"})}}),v]}),(m||!m&&!N)&&Object(r.c)("div",{className:"ListQuestionItem-subTool",children:[m,!N&&Object(r.c)("div",{className:de()("ListQuestionItem-hideButton",a),onClick:M,children:["收起",Object(r.b)(ee.a,{className:"ToolsQuestionItem-hideButtonIcon",center:!0})]})]})]})]})})},Ur=n(2210),qr=n.n(Ur);function Vr(e){var t=e.laterQuestions,n=e.getLaterQuestions,a=e.updateLaterQuestion,c=Object(d.useRef)(null),s=Object(d.useState)(new Set),u=Object(i.a)(s,2),l=u[0],f=u[1],p=t.count,h=t.isEnd,b=t.isLoading,v=t.questions.filter((function(e){return!l.has(e.id)}));return Object(r.c)("div",{className:"QuestionLater",children:[Object(r.c)(Zn.d,{className:"QuestionLater-mainColumn",children:[Object(r.c)("div",{className:"QuestionLater-title",children:[Object(r.b)(Lr,{className:"QuestionLater-titleIcon",size:30}),"我的稍后答",Boolean(p)&&Object(r.b)("div",{className:"QuestionLater-titleNumber",children:p})]}),!b&&0===v.length&&Object(r.c)("div",{className:"QuestionLater-empty",children:[Object(r.b)("img",{className:"QuestionLater-emptyImage",src:qr.a,alt:""}),Object(r.c)("div",{className:"QuestionLater-emptyText",children:["还没有稍后答，",Object(r.b)(o.Link,{className:"QuestionLater-emptyLink",to:"/question/waiting",children:"看看为你推荐的问题"})]})]}),Object(r.b)(Er.b,{ref:c,className:"QuestionLater-questions",onLoad:function(){return n(20,v.length)},isLoading:b,placeholder:Object(r.b)(Er.a,{className:"QuestionLater-placeholder"}),isDrained:h,children:v.map((function(e){return Object(r.b)(Fr,{className:"QuestionLater-questionItem",question:e,zaId:{titleClick:5372,expand:5373,cardShow:5375,writeAnswer:5374},mainTool:Object(r.c)(d.Fragment,{children:[Object(r.c)(B.c,{className:de()("QuestionLater-deletingButton"),preset:"outline",color:"grey",onClick:function(t){f(new Set(l).add(e.id)),a(e.id,!1),c.current.maybeRun(),re.a.trackEvent(t.target,{id:5376,action:"Delete"})},children:[Object(r.b)(Pr.a,{size:22}),"移除"]}),!e.isDeleted&&Object(r.c)("div",{className:"QuestionLater-info",children:[Object(Se.formatNumber)(e.answerCount)," 个回答"," · ",Object(Se.formatNumber)(e.visitCount)," 个浏览"]})]})},e.id)}))})]}),Object(r.b)(_r.a,{omit:{noWrite:!0,noCreator:!0,noBanner:!0,noCategory:!0}})]})}Vr.fetchData=function(e){return(0,e.dispatch)(Object(E.t)())};var Hr=Object(b.connect)((function(e){return{laterQuestions:e.question.laterQuestions}}),{getLaterQuestions:E.s,updateLaterQuestion:E.kb})(Vr),Kr=n(1338);var Qr=function(e){var t=e.users,n=void 0===t?[]:t;return 0===n.length?null:1===n.length?Object(r.b)(Mt.a,{user:n[0]}):2===n.length?Object(r.c)(d.Fragment,{children:[Object(r.b)(Mt.a,{user:n[0]})," 和 ",Object(r.b)(Mt.a,{user:n[1]})]}):3===n.length?Object(r.c)(d.Fragment,{children:[Object(r.b)(Mt.a,{user:n[0]}),"、",Object(r.b)(Mt.a,{user:n[1]})," 和"," ",Object(r.b)(Mt.a,{user:n[2]})]}):n.length>3?Object(r.c)(d.Fragment,{children:[Object(r.b)(Mt.a,{user:n[0]}),"、",Object(r.b)(Mt.a,{user:n[1]})," 和"," ",Object(r.b)(Mt.a,{user:n[2]})," 等 ",n.length," 人"]}):null};var Wr=function(e){var t=e.user,n=t.isFollowed,o=t.isFollowing,i=t.gender,a=null;return n&&o?a="互相关注":o&&(a="你关注了".concat(function(e){return 0===e?"她":1===e?"他":"TA"}(i))),a?Object(r.b)("div",{className:"RelationLabel",children:a}):null},Gr=n(360),Zr=Gr.a[0];function Yr(e){var t=e.allInvitedQuestions,n=e.getInvitedQuestions,o=e.ignoreInvitedQuestion,a=e.updateLaterQuestion,c=Object(d.useRef)(null),s=Object(d.useState)(Zr),u=Object(i.a)(s,2),l=u[0],f=u[1],p=Object(d.useState)(new Set),h=Object(i.a)(p,2),b=h[0],v=h[1],m=Object(d.useState)(new Set),g=Object(i.a)(m,2),y=g[0],O=g[1],j=Object(d.useState)(Gr.a.reduce((function(e,t){var n=t.name;return Object.assign({},e,Object(ue.a)({},n,0))}),{})),w=Object(i.a)(j,2),C=w[0],k=w[1],S=t[l.name],x=S.isEnd,R=S.isLoading,E=S.questions.filter((function(e){var t=e.question;return!b.has(t.id)}));return Object(r.c)("div",{className:"QuestionInvited",children:[Object(r.c)(Zn.d,{className:"QuestionInvited-mainColumn",children:[Object(r.c)("div",{className:"QuestionInvited-title",children:["邀请回答",Boolean(t.total.count)&&Object(r.b)("div",{className:"QuestionInvited-titleNumber",children:t.total.count-C.total})]}),Object(r.b)("div",{className:"QuestionInvited-tabs",children:Gr.a.map((function(e){return Object(r.c)("div",{className:de()("QuestionInvited-tab",{"QuestionInvited-tab--active":e.name===l.name}),onClick:function(){return function(e){t[e.name].questions.length||n(e,20,0),re.a.trackEvent(null,{id:5377},{button:{text:e.text}}),f(e)}(e)},children:[Object(r.b)("div",{className:"QuestionInvited-tabTitle",children:e.text}),Object(r.b)("div",{className:"QuestionInvited-tabMeta",children:t[e.name].count-C[e.name]})]},e.name)}))}),Object(r.b)(Er.b,{ref:c,className:"QuestionInvited-questions",onLoad:function(){return n(l,20,E.length)},isLoading:R,placeholder:Object(r.b)(Er.a,{className:"QuestionInvited-placeholder"}),isDrained:x,children:E.map((function(e){var t=e.inviters,n=e.question;return Object(r.b)(Fr,{className:"QuestionInvited-questionItem",question:n,zaId:{titleClick:5378,expand:5379,cardShow:5380,writeAnswer:5381},mainSource:Object(r.c)("div",{className:"QuestionInvited-questionItemMainSource",children:[Object(r.b)(Qr,{users:t})," 邀请你回答"]}),subSource:1===t.length&&Object(r.b)(Wr,{user:t[0]}),mainTool:Object(r.c)(d.Fragment,{children:[Object(r.c)(B.c,{className:de()("QuestionInvited-deletingButton"),preset:"outline",color:"grey",onClick:function(e){v(new Set(b).add(n.id)),k(Object.assign({},C,Object(ue.a)({total:C.total+1},l.name,C[l.name]+1))),o(n.id),c.current.maybeRun(),re.a.trackEvent(e.target,{id:5382,action:"Ignore"})},children:[Object(r.b)(Kr.a,{size:18}),"忽略"]}),Object(r.c)(B.c,{className:de()("QuestionInvited-laterButton",{"QuestionInvited-laterButton--active":y.has(n.id)}),preset:"outline",color:"grey",onClick:function(e){var t=!y.has(n.id),r=new Set(y);t?r.add(n.id):r.delete(n.id),O(r),a(n.id,t),re.a.trackEvent(e.target,{id:5383,action:t?"Add":"UnAdd"})},children:[y.has(n.id)?null:Object(r.b)(Lr,{}),y.has(n.id)?"已添加":"稍后答"]}),Object(r.c)("div",{className:"QuestionInvited-info",children:[Object(Se.formatNumber)(n.answerCount)," 个回答"," · ",Object(Se.formatNumber)(n.visitCount)," 个浏览"]})]})},n.id)}))})]}),Object(r.b)(_r.a,{omit:{noWrite:!0,noCreator:!0,noBanner:!0,noCategory:!0}})]})}Yr.fetchData=function(e){return(0,e.dispatch)(Object(E.r)())};var Jr=Object(b.connect)((function(e){return{allInvitedQuestions:e.question.invitedQuestions}}),{getInvitedQuestions:E.q,ignoreInvitedQuestion:E.y,updateLaterQuestion:E.kb})(Yr),$r=n(920),Xr=n(1453),eo=n(112),to=n.n(eo),no=n(33),ro=n.n(no),oo=n(110),io=n.n(oo),ao=n(951),co=n(1344),so=n(1781),uo=n(936),lo=n(1301),fo=function(e){function t(){var e,n;mt()(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Ct()(this,(e=St()(t)).call.apply(e,[this].concat(o)))).state={display:!1},n.handleCloseByDocument=function(e){e.target.closest("div")&&"Pc-word-card-sign-label"!==e.target.closest("div").className&&n.setState({display:!1})},n.handleClick=function(){n.setState((function(e){return{display:!e.display}}));var e=n.sign.querySelector(".Pc-word-card-sign-label").getBoundingClientRect(),t=e.left,r=e.top,o=e.width,i=e.height+15,a=Math.floor(o/2);n.sign.querySelector(".Pc-word-card-sign-popup").style.top="".concat(r+i,"px"),n.sign.querySelector(".Pc-word-card-sign-popup").style.left="".concat(t-a,"px")},n.handleClose=function(){n.props.onClose&&n.props.onClose()},n.handleRef=function(e){n.sign=e},n}return jt()(t,e),yt()(t,[{key:"componentDidMount",value:function(){document.addEventListener("click",this.handleCloseByDocument)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleCloseByDocument)}},{key:"render",value:function(){return f.a.createElement("div",{className:"Pc-word-card-sign",ref:this.handleRef},f.a.createElement("div",{className:"Pc-word-card-sign-label",onClick:this.handleClick},"广告​",f.a.createElement(lo.a,{name:"triangle",className:"Pc-word-card-sign-svg"})),f.a.createElement("div",{className:"Pc-word-card-sign-popup ".concat(this.state.display?"Pc-word-card-sign-popup--isShowed":"Pc-word-card-sign-popup--isHidden")},f.a.createElement("span",{className:"Pc-word-card-sign-popup-arrow"}),f.a.createElement("div",{className:"Pc-word-card-sign-popup-menu"},f.a.createElement("button",{type:"button",onClick:this.handleClose},"不感兴趣"),f.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"/promotion-intro"},"知乎广告介绍"))))}}]),t}(d.Component);fo.propTypes={onClose:h.a.func};var po=function(e){function t(){var e,n;mt()(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Ct()(this,(e=St()(t)).call.apply(e,[this].concat(o)))).state={display:!0},n.handleClick=function(e){e.stopPropagation();var t=Object(co.a)(n.props).ad.clickTracks;Object(uo.a)(t)},n.handleClose=function(){var e=Object(co.a)(n.props).ad.closeTracks;Object(uo.b)(e).then((function(){n.setState((function(e){return{display:!e.display}})),n.props.onClose&&n.props.onClose()}))},n.handleRef=function(e){n.root=e},n}return jt()(t,e),yt()(t,[{key:"componentDidMount",value:function(){if(this.root&&!this.props.preview){var e=Object(co.a)(this.props).ad,t=e.impressionTracks,n=e.debugTracks,r={impressionTracks:t,viewTracks:e.viewTracks,debugTracks:n};Object(uo.d)(this.root,r),Object(uo.c)(n,!!this.props.data.adjson)}}},{key:"render",value:function(){if(!this.state.display)return null;var e=Object(co.a)(this.props),t=e.ad,n=e.creative,r=t.expand.displayAdvertisingTag,o=n.asset,i=o.title,a=o.desc,c=o.cta,s=o.landingUrl,u=o.brandName,l=o.brandLogo;return f.a.createElement("div",{className:"Pc-word",ref:this.handleRef},f.a.createElement("div",{className:"Pc-word-card"},f.a.createElement(ho,{href:s,onClick:this.handleClick},f.a.createElement(bo,{data:{name:u,logo:l}})),r&&f.a.createElement(fo,{onClose:this.handleClose}),f.a.createElement(ho,{href:s,onClick:this.handleClick},f.a.createElement("h2",{className:"Pc-word-card-title"},i),f.a.createElement("div",{className:"Pc-word-card-content  "},a&&f.a.createElement(f.a.Fragment,null,f.a.createElement("span",null,a),f.a.createElement("span",{className:"Pc-word-card-content-cta  "},c))))))}}]),t}(d.Component);function ho(e){var t=e.children,n=io()(e,["children"]);return f.a.createElement("a",ro()({target:"_blank"},n),t)}function bo(e){var t=e.data,n=t.name,r=t.logo;return f.a.createElement("div",{className:"Pc-word-card-brand"},f.a.createElement("div",{className:"Pc-word-card-brand-wrapper"},f.a.createElement("img",{width:"20",height:"20",src:r,alt:"logo"}),f.a.createElement("span",null,n)))}function vo(e){var t=Object(so.a)(e.data);return t&&t.adjson?f.a.createElement(ao.a,null,f.a.createElement(po,ro()({},e,t))):null}po.propTypes={data:h.a.object.isRequired,onClose:h.a.func};var mo=n(879),go=n(1126),yo=n(6);var Oo={isDrained:!1,isFetching:!1,ids:[]};function jo(e,t){var n=t.id,r=t.resource;return e.question[r][n]||Oo}var wo=function(e){var t=e.item,n=Object(Ce.a)(e,["item"]);return Object(r.b)(mo.a,{children:Object(r.b)(go.a,Object.assign({editable:!0,expanded:!0,relatedTo:"question",answer:t,zaInfos:{cardShow:4351,index:String(n.dataZaIndex)}},n))},t.id)},Co=function(e,t,n){var r=t.relationship,o=r.canCollapseAnswers,i=r.canStickAnswers,a=t.hasPublishingDraft,c=e.map((function(e,t){return wo({item:e,canCollapse:o,canStick:i,hasPublishingDraft:a,itemProp:0===t?"acceptedAnswer":"suggestedAnswer",dataZaIndex:t})}));return n?c:Object(ae.b)(2,c)},ko=function(e,t){return e.map((function(e){return t[e]})).filter((function(e){return e&&!e.isDelete}))},So=Object(Nt.isBrowser)()?to()(ko,(function(e,t){return"".concat(e.join(","),"-").concat(t.length)})):ko;function xo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var Ro=function(e){Object(s.a)(n,e);var t=xo(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).load=function(){var t=e.props,n=t.isFetching,r=t.id,o=t.loadNotificationAnswers;n||o(r)},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.isDrained,n=e.id,r=e.items,o=e.router;r.length||o.replace(location.pathname),(t||r.length)&&Object(E.P)(n)}},{key:"render",value:function(){var e=this.props,t=e.question,n=t.id,o=t.answerCount,i=e.question,a=e.items,c=e.isFetching,s=e.isDrained;return Object(r.c)("div",{className:"QuestionAnswers-answers",children:[Object(r.b)(Zn.d,{children:Object(r.c)(Xr.a,{to:"/question/".concat(n),children:["查看全部 ",Object(Se.formatNumber)(o)," 条回答"]})}),Object(r.c)(Zn.d,{children:[Object(r.c)($r.b,{children:[Co(a,i),c&&Object(r.b)(Er.a,{className:"List-item"})]}),!s&&!c&&Object(r.b)(Xr.a,{onClick:this.load,children:"更多"})]}),Object(r.b)(Zn.d,{children:Object(r.c)(Xr.a,{to:"/question/".concat(n),children:["查看全部 ",Object(Se.formatNumber)(o)," 条回答"]})})]})}}]),n}(d.PureComponent),Eo=Object(R.compose)(o.withRouter,Object(b.connect)((function(e,t){var n=jo(e,{id:t.id,resource:"notificationAnswers"}),r=n.isFetching,o=n.isDrained,i=n.ids;return{isFetching:r,isDrained:o,items:So(i,e.entities.answers)}}),{loadNotificationAnswers:E.P}))(Ro),_o=n(913),Ao=n(178),To=n(1155);function No(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var Io=[{text:"默认排序",value:"default"},{text:"".concat("按","时间排序"),value:"updated"}],Mo={updatedAnswers:"updated",answers:"default"};var Do=function(e){Object(s.a)(n,e);var t=No(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).handleResourceChange=function(t){e.props.router.push("/question/".concat(e.props.question.id).concat("default"===t?"":"/answers/".concat(t)))},e}return Object(c.a)(n,[{key:"componentWillReceiveProps",value:function(e){JSON.stringify(this.props.permission)!==JSON.stringify(e.permission)&&this.loadQuestionAnswerCount(e)}},{key:"loadQuestionAnswerCount",value:function(e){var t=e.question,n=t.id,r=t.questionType,o=e.permission.canBrandAdminEdit,i=e.loadBrandQuestionAnswerCount;"commercial"===r&&o&&i(n)}},{key:"renderAnswerListHeader",value:function(){var e=this.props,t=e.resource,n=e.question,o=n.id,i=n.answerCount,a=n.questionType,c=n.brand,s=(c=void 0===c?{}:c).isPuQuestion,u=e.commonAnswerCount,l=e.hiddenAnswerCount,d=e.permission.canBrandAdminEdit,f=s?"":"，由品牌推荐";return"commercial"===a&&void 0!==s?d?Object(r.c)("div",{className:"QuestionAnswers-navs",children:[Object(r.c)(B.c,{preset:"plain",className:de()("QuestionAnswers-nav",{"is--active":["answers","updatedAnswers"].includes(t)}),onClick:function(){location.href="/question/".concat(o)},children:[Object(Se.formatNumber)(u)," 个回答",f]}),Object(r.c)(B.c,{preset:"plain",className:de()("QuestionAnswers-nav",{"is--active":"hiddenAnswers"===t}),onClick:function(){location.href="/question/".concat(o,"/answers/hidden")},children:[Object(Se.formatNumber)(l)," 个隐藏回答"]})]}):Object(r.c)("span",{children:[Object(Se.formatNumber)(i)," 个回答 ",f]}):Object(r.c)("span",{children:[Object(Se.formatNumber)(i)," 个回答"]})}},{key:"render",value:function(){var e=this.props,t=e.resource,n=e.children;return Object(r.b)(Zn.d,{className:"AnswersNavWrapper",children:Object(r.b)(To.a,Object.assign({title:this.renderAnswerListHeader()},{options:"hiddenAnswers"===t?Object(r.b)("span",{children:"按时间排序"}):Object(r.b)(Ao.b,{listClassName:"Answers-select",needsReposition:!0,plain:!0,value:Mo[t],onChange:this.handleResourceChange,children:Io.map((function(e){var t=e.value,n=e.text;return Object(r.b)(Ao.a,{value:t,text:n},t)}))})},{children:n}))})}}]),n}(d.PureComponent),Lo=Object(R.compose)(o.withRouter,Object(b.connect)((function(e){var t=e.question;return{commonAnswerCount:t.commonAnswerCount,hiddenAnswerCount:t.hiddenAnswerCount,permission:Object(E.Z)(e)}}),{loadBrandQuestionAnswerCount:E.H}))(Do),Po=n(1350),zo=n(12);function Bo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var Fo=function(e){Object(s.a)(n,e);var t=Bo(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).handlePaginationClick=function(t){e.props.router.push("".concat(location.pathname,"?page=").concat(t))},e.handleUpdatedAnswersLoad=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:zo.b,r=e.props,o=r.question.id,i=r.loadItems;i(o,"updatedAnswers",{offset:t,limit:n})},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.question.id,n=e.page,r=e.isDrained,o=e.items,i=e.loadItems;!r&&o.length<zo.b&&i(t,"updatedAnswers",{offset:Object(yo.c)(n)+o.length,limit:zo.b-o.length})}},{key:"render",value:function(){var e=this.props,t=e.isFetching,n=e.isDrained,o=e.isNextLoaded,i=e.isCurrentLoaded,a=e.page,c=e.items,s=e.total,u=e.question,l=e.isMuteSpecial;return n&&!c.length?Object(r.b)(Zn.d,{className:"Answers-none",children:Object(r.c)(_o.k,{children:[Object(r.b)(_o.b,{}),Object(r.b)("div",{children:l?"回答暂时无法查看":"还没有回答"})]})}):Object(r.b)(Po.a,{isFetching:t,isDrained:a>=s?n:i,isNextLoaded:o,page:a,total:s,placeholder:Object(r.b)(Er.a,{className:"List-item"}),onPaginationClick:this.handlePaginationClick,onLoad:this.handleUpdatedAnswersLoad,children:Co(c,u)})}}]),n}(d.PureComponent),Uo=Object(R.compose)(o.withRouter,Object(b.connect)((function(e,t){var n=t.page,r=jo(e,{id:t.question.id,resource:"updatedAnswers"}),o=r.isFetching,i=r.isDrained,a=r.ids,c=Object(yo.d)(n,a),s=c.total,u=c.isCurrentLoaded,l=c.isNextLoaded,d=c.items;return{isMuteSpecial:Object(E.C)(t.question),isFetching:o,isDrained:i,total:s,isNextLoaded:l,isCurrentLoaded:u,items:So(d,e.entities.answers).filter((function(e){return!e.isDelete}))}}),{loadItems:E.O}))(Fo),qo=n(597),Vo=n.n(qo);function Ho(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var Ko=function(e){Object(s.a)(n,e);var t=Ho(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).handleLoad=function(){var t=e.props,n=t.question.id,r=t.loadItems,o=t.isFetching,i=t.isDrained,a=t.resource;i||o||r(n,void 0===a?"answers":a,{limit:5})},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.question.id,n=e.isDrained,r=e.items,o=e.loadItems;!n&&r.length<5&&o(t,"answers",{offset:r.length,limit:5})}},{key:"render",value:function(){var e=this,t=this.props,n=t.adverts,o=t.isBot,i=t.isFetching,a=t.isDrained,c=t.items,s=t.question,u=s.relationship,l=u.canCollapseAnswers,d=u.canStickAnswers,f=s.hasPublishingDraft,p=[0].concat(Object(Ut.a)(Object.keys(n||{}).map(Number).sort((function(e,t){return e-t})))),h={canCollapse:l,canStick:d,hasPublishingDraft:f};return Object(r.b)("div",{children:Object(r.b)(Er.b,{onRef:function(t){e.listEl=t},isLocal:!0,isLoading:i,isDrained:a,onLoad:this.handleLoad,placeholder:Object(r.b)(Er.a,{className:"List-item"}),children:o?c.map((function(e,t){return wo(Object.assign({item:e,itemProp:0===t?"acceptedAnswer":"suggestedAnswer",dataZaIndex:t},h))})):Object(ae.b)(2,Vo()(p.map((function(e,t){var o,i=p[t+1],a=(i?c.slice(e,i):c.slice(e)).map((function(n,r){var o=e+r+t;return wo(Object.assign({item:n,itemProp:0===o?"acceptedAnswer":"suggestedAnswer",dataZaIndex:o},h))}));return i?[].concat(Object(Ut.a)(a),[(o=n[i],o?Object(r.b)(vo,{data:o}):null)]):a}))))})})}}]),n}(d.Component),Qo=Object(R.compose)(Object(b.connect)((function(e,t){var n=jo(e,{id:t.question.id,resource:"answers"}),r=n.isFetching,o=n.isDrained,i=n.ids,a=o||r?i:i.slice(0,Math.max(5,i.length-5));return{isBot:e.env.userAgent.isBot,isFetching:r,isDrained:o,items:So(a,e.entities.answers).filter((function(e){return e&&!e.isDelete})),adverts:Object(E.c)(e)}}),{loadItems:E.O}))(Ko);function Wo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var Go=function(e){Object(s.a)(n,e);var t=Wo(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).handlePaginationClick=function(t){e.props.router.push("".concat(location.pathname,"?page=").concat(t))},e.handleHiddenAnswersLoad=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:zo.b,r=e.props,o=r.question.id,i=r.loadItems;i(o,"hiddenAnswers",{offset:t,limit:n})},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.question.id,n=e.page,r=e.isDrained,o=e.items,i=e.loadItems;!r&&o.length<zo.b&&i(t,"hiddenAnswers",{offset:Object(yo.c)(n)+o.length,limit:zo.b-o.length})}},{key:"render",value:function(){var e=this.props,t=e.isFetching,n=e.isDrained,o=e.isNextLoaded,i=e.isCurrentLoaded,a=e.page,c=e.items,s=e.total,u=e.question;return Object(r.b)(Po.a,{isFetching:t,isDrained:a>=s?n:i,isNextLoaded:o,page:a,total:s,placeholder:Object(r.b)(Er.a,{className:"List-item"}),onPaginationClick:this.handlePaginationClick,onLoad:this.handleHiddenAnswersLoad,children:Co(c,u)})}}]),n}(d.PureComponent),Zo=Object(R.compose)(o.withRouter,Object(b.connect)((function(e,t){var n=t.page,r=jo(e,{id:t.question.id,resource:"hiddenAnswers"}),o=r.isFetching,i=r.isDrained,a=r.ids,c=Object(yo.d)(n,a,zo.b);return Object.assign({isFetching:o,isDrained:i},c,{items:So(c.items,e.entities.answers).filter((function(e){return!e.isDelete}))})}),{loadItems:E.O}))(Go);function Yo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var Jo=function(e){Object(s.a)(n,e);var t=Yo(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.question,n=t.id,r=t.relationship.isAuthor,o=e.resource,i=e.router;"collapsedAnswers"!==o||r||i.push("/question/".concat(n))}},{key:"render",value:function(){var e=this.props,t=e.resource,n=e.question,o=e.question,i=o.questionType,a=o.answerCount,c=o.reviewInfo.tips,s=o.isVisible,u=e.location;if(e.isMuteSpecial||!s)return Object(r.b)(Zn.d,{className:"Answers-none",children:Object(r.c)(_o.k,{children:[Object(r.b)(_o.b,{}),Object(r.b)("div",{children:"回答暂时无法查看"})]})});if("commercial"!==i&&!a){if(c)return null;var l=n.status||{},d=l.isClose,f=l.isLocked,p=l.isSuggest;return d||f||p?null:Object(r.b)(Zn.d,{className:"Answers-none",children:Object(r.c)(_o.k,{children:[Object(r.b)(_o.b,{}),Object(r.c)("div",{children:["暂时还没有回答，开始",Object(r.b)(st,{preset:"plain",className:"QuestionAnswers-answerLink",children:"写第一个回答"})]})]})})}return Object(r.b)("div",{id:"QuestionAnswers-answers",className:"QuestionAnswers-answers","data-zop-feedlistmap":"answers"===t?"0,0,1,0":"0,0,1",children:Object(r.c)(Lo,{question:n,resource:t,children:["updatedAnswers"===t&&Object(r.b)(Uo,{question:n,page:Number(u.query.page)||1}),"answers"===t&&Object(r.b)(Qo,{question:n}),"hiddenAnswers"===t&&Object(r.b)(Zo,{question:n,page:Number(u.query.page)||1})]})})}}]),n}(d.PureComponent),$o=Object(R.compose)(Object(j.b)({module:"ContentList"}),o.withRouter,Object(b.connect)((function(e,t){return{isMuteSpecial:Object(E.C)(t.question)}})))(Jo),Xo=n(1657),ei=n(833),ti=n(1102),ni=n(1327),ri=n(1332),oi=n(1326),ii=n(1334);function ai(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var ci=function(e){Object(s.a)(n,e);var t=ai(n);function n(){var e,r;Object(a.a)(this,n);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return(r=t.call.apply(t,[this].concat(i))).state={topicBiosModalShown:!1,activeTabKey:"video_answer"===(null===(e=r.props.draft)||void 0===e?void 0:e.draftType)?ni.a.videoAnswer:ni.a.textAnswer,showAttention:!1},r.answerFormRef=Object(d.createRef)(),r.videoAnswerTabRef=Object(d.createRef)(),r.handleSubmit=function(e){var t=r.props,n=t.currentUser,o=t.question.id,i=t.addAnswer,a=t.scheduledPublish,c=t.validateScheduledPublish,s=t.loadDraft;if(e.publishAt){var u=a(o,e);return u.then((function(){r.context.endAddAnswer(),s(o)})),u}var l=function(){return i(o,e)};return n.autoSendingCreations?c(o).then(l,(function(e){if(e&&e.payload&&e.payload.message&&400===e.status)return tt.a.confirm(e.payload.message,{title:"提醒",text:{ok:"确定发布",cancel:"我再想想"}}).then(l,(function(){}))})):l()},r.focus=function(){r.answerFormRef.current.focus()},r.handleToggleAnonymous=function(){var e=r.context.toggleAnonymous,t=r.props,n=t.showNotification,o=t.question.relationship.isAnonymous,i=t.isOffice;if(o||!r.answerFormRef.current.hasVideo()){if(o||!r.answerFormRef.current.hasMCNLinkCard())return!o&&r.answerFormRef.current.hasADLinkCard()?r.answerFormRef.current.hasFeeConsultCard()?n("不能使用匿名身份插入付费咨询卡片","red"):void n("不能使用匿名身份插入推荐卡片","red"):void(!o&&r.answerFormRef.current.hasCommercialReport()&&i?n("已经进行商业声明的内容不能启用匿名","red"):e());n("不能使用匿名身份推荐商品","red")}else n("匿名不能使用视频功能，如需启用匿名请删除草稿中的视频","red")},r.handleTopicBiosModalShown=function(){return r.setState({topicBiosModalShown:!0})},r.handleTopicBiosModalHide=function(){return r.setState({topicBiosModalShown:!1})},r.handleTabChange=function(e){var t=r.state,n=t.activeTabKey,o=t.showAttention;if(e!==n){var i=r.props,a=i.question.relationship.isAnonymous,c=i.showNotification;if(e===ni.a.videoAnswer){if(o&&r.setState({showAttention:!1}),a)return void c("视频回答不支持匿名","red");r.answerFormRef.current.hasEditorContent()&&(Oe.a.get("answerContentSync")||(c("图文回答内容已同步至视频描述"),Oe.a.set("answerContentSync",!0)))}r.setState({activeTabKey:e})}},r}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.question.id;(0,t.getBio)(n),this.props.answering&&setTimeout(this.focus),Oe.a.get("videoAnswerGuided")||this.state.activeTabKey===ni.a.videoAnswer||(this.setState({showAttention:!0}),this.animateTimerId=setTimeout((function(){e.setState({showAttention:!1}),Oe.a.set("videoAnswerGuided",!0)}),5e3))}},{key:"componentWillUnmount",value:function(){clearTimeout(this.animateTimerId)}},{key:"componentWillReceiveProps",value:function(e){this.props.answering!==e.answering&&this.focus()}},{key:"renderBio",value:function(){var e=this.props,t=e.currentUser,n=e.questionBio;return n.bio&&"headline"!==n.type?Object(r.b)("span",{className:"AnswerAdd-bio",children:n.bio}):t.headline?Object(r.b)(It.a,{className:"AnswerAdd-bio",inline:!0,html:(n||{}).bio||t.headline}):null}},{key:"renderAuthor",value:function(){var e=this.props,t=e.currentUser,n=e.question.relationship.isAnonymous,o=e.question;return n?Object(r.b)(je.a,{className:"AnswerAdd-info",noLink:!0,author:nn.h}):t&&t.isOrg?Object(r.b)(je.a,{className:"AnswerAdd-info",noLink:!0,author:t}):Object(r.c)(je.a,{className:"AnswerAdd-info",noLink:!0,author:t,children:[this.renderBio(),Object(r.b)(ti.a,{className:"AnswerAdd-topicBiosButton",text:"编辑话题经验",onClick:this.handleTopicBiosModalShown}),Object(r.b)(ii.a,{shown:this.state.topicBiosModalShown,question:o,onClose:this.handleTopicBiosModalHide})]})}},{key:"render",value:function(){var e,t=this.state,n=t.activeTabKey,o=t.showAttention,i=this.props,a=i.currentUser,c=i.question,s=c.relationship.isAnonymous,u=c.questionType,l=i.question,d=i.allowCommercialAnonymousAnswer,f=i.useNewEditorSetting,p=a&&!a.isOrg&&("normal"===u||"commercial"===u&&d||s)&&n===ni.a.textAnswer;return Object(r.c)("div",{className:"AnswerAdd",css:{position:"relative"},children:[f?Object(r.c)(ke.Flex,{justifyContent:"space-between",css:function(e){return{borderBottom:"1px solid ".concat(e.colors.GBK09A),".Tabs":{border:"none"}}},children:[Object(r.b)(ni.b,{ref:this.videoAnswerTabRef,activeTabKey:n,onChange:this.handleTabChange}),Object(r.b)(oi.a,{handleClick:null===(e=this.answerFormRef.current)||void 0===e?void 0:e.toggleFullscreen})]}):Object(r.b)(ni.b,{ref:this.videoAnswerTabRef,activeTabKey:n,onChange:this.handleTabChange}),Object(r.b)(me.a,{placement:"bottom",isOpen:o,target:this.videoAnswerTabRef.current,children:"Web 也可以发布视频回答了"}),!f&&Object(r.c)("div",{className:"AnswerAdd-header",children:[this.renderAuthor(),p&&Object(r.b)(B.c,{className:"AnswerAdd-toggleAnonymous",preset:"plain",onClick:this.handleToggleAnonymous,children:s?"使用实名身份回答":"使用匿名身份回答"})]}),Object(r.b)(ri.a,{activeTabKey:n,handleTabChange:this.handleTabChange,handleToggleAnonymous:this.handleToggleAnonymous,imperativeRef:this.answerFormRef,question:l,onSubmit:this.handleSubmit})]})}}]),n}(d.Component);ci.contextTypes={toggleAnonymous:h.a.func.isRequired,endAddAnswer:h.a.func};var si=Object(R.compose)(o.withRouter,Object(b.connect)((function(e,t){var n=e.question.bio,r=e.topic.bios,o=e.answers.newAnswer,i=e.entities.drafts,a=void 0===i?{}:i,c=t.question.id,s=(n[c]||{result:{type:"headline"}}).result;return"topic"===s.type&&(s.bio=r[s.topic.id]||s.bio),{currentUser:Object(M.b)(e),questionBio:s,newAnswer:o,allowCommercialAnonymousAnswer:"show"===Object(U.a)(e,"gue_anonymous"),isOffice:Object(U.e)(e),draft:a["question_".concat(c)],useNewEditorSetting:"1"===Object(U.a)(e,"editor")}}),{showNotification:P.h,addAnswer:L.a,scheduledPublish:L.B,validateScheduledPublish:L.M,loadDraft:E.N,getBio:E.p}))(ci);function ui(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var li=function(e){Object(s.a)(n,e);var t=ui(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.question,r=n.id,o=n.relationship.myAnswer,i=void 0===o?{}:o,a=t.router,c=e.question,s=c.id,u=c.relationship.myAnswer,l=void 0===u?{}:u;r===s&&i.answerId!==l.answerId&&(re.a.trackEvent(this,{action:"StatusReport"},{status:{result:"Success",event:{action:"Answer"}}}),a.push("/question/".concat(r,"/answer/").concat(l.answerId)),Oe.a.set("answer::justPublished",!0))}},{key:"render",value:function(){if(!this.context.currentUser)return null;var e=this.props,t=e.question,n=e.question,o=n.relationship.myAnswer,i=n.isNormal,a=n.status,c=(a=void 0===a?{}:a).isClose,s=a.isLocked,u=a.isSuggest,l=n.hasPublishingDraft,d=e.answering;return o?null:u?Object(r.c)("div",{className:"QuestionAnswers-answerTip",children:["被建议修改的问题不允许添加新的回答。",Object(r.b)(it.a,{preset:"plain",to:"/question/21290061",children:"问题为什么会被建议修改？"})]}):s?Object(r.c)("div",{className:"QuestionAnswers-answerTip",children:["该问题目前已经被锁定，无法添加新答案。",Object(r.b)(it.a,{preset:"plain",to:"/question/19604313",children:"问题为什么会被锁定？"})]}):c?Object(r.c)("div",{className:"QuestionAnswers-answerTip",children:["被关闭的问题不允许添加新的回答。",Object(r.b)(it.a,{className:"QuestionAnswers-iconLink",preset:"plain",to:"/question/21290061","data-tooltip":"为什么部分问题会被「关闭」「建议修改」？",icon:ei.a})]}):l?Object(r.b)(Zn.d,{className:"QuestionAnswers-answerTipCard",children:"你创建的回答正在发布中…"}):i?Object(r.b)(Xo.CSSTransitionGroup,{className:"QuestionAnswers-statusWrapper",transitionEnterTimeout:300,transitionLeaveTimeout:300,transitionName:"expand",component:"div",children:d&&Object(r.c)(Zn.d,{className:"QuestionAnswers-answerAdd",id:"js-answerAddCard",children:[Object(r.b)("a",{name:"draft"}),Object(r.b)(si,{question:t,answering:d})]})}):null}}]),n}(d.PureComponent);li.contextTypes={currentUser:h.a.object};var di=Object(o.withRouter)(li);function fi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var pi=function(e){Object(s.a)(n,e);var t=fi(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.children,o=Object(Ce.a)(e,["className","children"]);return Object(r.b)("div",Object.assign({},o,{className:de()("QuestionMainDivider",t),children:Object(r.b)("span",{className:"QuestionMainDivider-inner",children:n})}))}}]),n}(d.Component);function hi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var bi=function(e){Object(s.a)(n,e);var t=hi(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={opened:!1},e.handleLoad=function(){var t=e.props,n=t.question.id;return(0,t.loadItems)(n,"collapsedAnswers")},e.handleOpen=function(){e.handleLoad(),e.setState({opened:!0})},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isDrained,n=e.isFetching,o=e.items,i=e.question,a=e.question,c=a.collapsedAnswerCount,s=a.questionType,u=this.state.opened,l="org"===s,d="".concat(Object(Se.formatNumber)(c)," 个回答被").concat(l?"隐藏":"折叠"),f=Object(r.b)(it.a,{preset:"plain",to:l?"/org-intro#org-question":"/question/20120168",target:"_blank",children:"为什么？"});return u?Object(r.c)(Zn.d,{children:[Object(r.c)(pi,{children:[d,"（",f,"）"]}),Object(r.c)($r.b,{children:[Co(o,i),n&&Object(r.b)(Er.a,{className:"List-item"})]}),!t&&!n&&Object(r.b)(Xr.a,{onClick:this.handleLoad,children:"更多"})]}):Object(r.c)("div",{className:"CollapsedAnswers-bar",style:{},children:[Object(r.b)(B.c,{preset:"plain",onClick:this.handleOpen,children:d}),"（",f,"）"]})}}]),n}(d.Component);bi.contextTypes={currentUser:h.a.object};var vi=Object(b.connect)((function(e,t){var n=jo(e,{id:t.question.id,resource:"collapsedAnswers"}),r=n.isFetching,o=n.isDrained,i=n.ids;return{isFetching:r,isDrained:o,items:So(i,e.entities.answers)}}),{loadItems:E.O})(bi),mi=n(1359),gi=n(1361),yi=n(1128);function Oi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var ji=function(e){Object(s.a)(n,e);var t=Oi(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props.question,t=e.id,n=e.title,o=e.answerCount,i=e.followerCount,a="/question/".concat(t);return Object(r.c)("div",{className:"SimilarQuestions-item",itemProp:"zhihu:similarQuestion",itemType:"http://schema.org/Question",itemScope:!0,children:[Object(r.b)("meta",{itemProp:"name",content:n}),Object(r.b)("meta",{itemProp:"url",content:"https://www.zhihu.com".concat(a)}),Object(r.b)("meta",{itemProp:"answerCount",content:o}),Object(r.b)("meta",{itemProp:"zhihu:followerCount",content:i}),Object(r.b)(it.a,{preset:"plain",to:a,target:"_blank",children:n})," ",Object(Se.formatNumber)(o)," 个回答"]})}}]),n}(d.Component),wi=Object(j.b)((function(e){var t=e.question;return{module:"QuestionItem",content:{type:"Question",token:String(t.id),author_member_hash_id:(t.author||{}).id},trackCardShow:!0}}))(ji);function Ci(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var ki=function(e){Object(s.a)(n,e);var t=Ci(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.question.id;(0,e.loadSimilarQuestions)(t)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.question.id,r=t.loadSimilarQuestions,o=e.question.id;n!==o&&r(o)}},{key:"componentDidUpdate",value:function(e){!e.items&&this.props.items&&this.props.onLoad&&this.props.onLoad()}},{key:"render",value:function(){var e=this.props.items;return e&&e.length?Object(r.c)(Zn.d,{children:[Object(r.b)(Zn.b,{className:"SimilarQuestions-title",children:"相关问题"}),Object(r.b)(Zn.c,{className:"SimilarQuestions-list",children:e.map((function(e){return Object(r.b)(wi,{question:e},e.id)}))})]}):null}}]),n}(d.Component),Si=Object(R.compose)(Object(b.connect)((function(e,t){return{items:e.question.similarQuestions[t.question.id]}}),{loadSimilarQuestions:E.Y}),Object(j.b)({module:"RelatedQuestions"}))(ki),xi=n(7),Ri=n(1647);function Ei(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var _i=function(e){Object(s.a)(n,e);var t=Ei(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={hideDescription:!1},e.handleRef=function(t){e.title=t},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.title.offsetWidth<this.title.scrollWidth&&this.setState({hideDescription:!0})}},{key:"render",value:function(){var e=this.props,t=e.link,n=e.title,o=e.description,i=e.meta,a=e.imageUrl,c=this.state.hideDescription;return Object(r.c)(it.a,{preset:"plain",a:!0,to:t,className:"RelatedCommodities-item",target:"_blank",children:[Object(r.b)("img",{className:"RelatedCommodities-image",src:Object(xe.imgUrl)(a,{quality:90,size:"250x0"}),alt:"live"}),Object(r.c)("div",{className:"RelatedCommodities-content",children:[Object(r.b)("div",{className:de()("RelatedCommodities-subject",{"RelatedCommodities-subject-two":c}),style:{},ref:this.handleRef,"data-tooltip":n,children:n}),c||Object(r.b)("div",{className:"RelatedCommodities-description",children:o}),Object(r.b)("div",{className:"RelatedCommodities-meta",children:i})]})]})}}]),n}(d.Component),Ai=n(1541);function Ti(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var Ni=function(e){Object(s.a)(n,e);var t=Ti(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).handleListen=function(e){var t="".concat(e.target.closest("a").href,"?extra_auto_play=1");e.preventDefault(),e.stopPropagation(),re.a.trackEvent(e.target,{action:"OpenUrl",element_name:"Play"},{link:{url:t}}),window.open(t,"_blank")},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props.item;switch(e.type){case"live":var t=e.id,n=e.subject,o=e.reviewScore,i=e.seats,a=(e.startsAt,e.speaker.member),c=a.name,s=a.avatarUrl;return Object(r.b)(_i,{link:"/lives/".concat(t),imageUrl:s,title:n,description:c,meta:Object(r.c)("div",{className:"RelatedCommodities-scoreWrapper",children:[Object(r.b)(Ai.a,{score:o}),Boolean(i&&i.taken)&&"".concat(i.taken," 人参与"),!1]})});case"remix_album":case"podcast":case"remix":var u=e.id,l=e.artwork,d=e.title,f=e.author,p=(f=void 0===f?{}:f).user,h=e.trackCount,b="/remix/albums/".concat(u);return Object(r.b)(_i,{link:b,imageUrl:l,title:d,description:p&&p.name,meta:Object(r.c)("div",{className:"RelatedCommodities-remixMeta",children:[Object(r.c)("div",{children:["共 ",Object(Se.formatNumber)(h)," 节课"]}),Object(r.b)(B.c,{className:"RelatedCommodities-remixListen",onClick:this.handleListen,preset:"plain",children:"试听"})]})});case"special":var v=e.id,m=e.subject,g=e.liveCount,y=e.liveMemberCount,O=e.speakers,j=e.artworkMobile,w=O.slice(0,2).map((function(e){return e.member.name})).join("、");return Object(r.b)(_i,{link:"/lives/specials/".concat(v),imageUrl:j,title:m,description:"".concat(w).concat(O.length>=2?" 等":""),meta:"".concat(Object(Se.formatNumber)(g)," 场 Live, ").concat(Object(Se.formatNumber)(y)," 次参与")});case"book":var C=e.id,k=e.title,S=e.cover,x=e.authorName,R=e.readCount;return Object(r.b)(_i,{link:"/pub/book/".concat(C),imageUrl:S,title:k,description:x,meta:Object(r.c)("div",{className:"RelatedCommodities-bookMeta",children:["".concat(Object(Se.formatNumber)(R)," 人读过"),Object(r.c)("span",{className:"RelatedCommodities-bookRead",children:[Object(r.b)(Ri.a,{width:13,height:14,center:!0}),"阅读"]})]})});default:return null}}}]),n}(d.Component),Ii=Object(j.b)((function(e){var t=e.item,n=e.index;if("book"===t.type)return{module:"EBookItem",index:n,content:{type:"EBook",token:String(t.id)},trackCardShow:!0};var r="special"===t.type?"LiveAlbum":Object(xi.pascalize)(t.type);return{module:"".concat(r,"Item"),index:n,content:Object.assign({type:r,id:t.id},"live"===t.type&&{author_member_hash_id:t.speaker.member.id}),trackCardShow:!0}}))(Ni);function Mi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var Di=function(e){Object(s.a)(n,e);var t=Mi(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.question.id,n=e.answer;(0,e.loadRelatedCommodities)(t,n&&n.id)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.question.id,r=t.loadRelatedCommodities,o=e.question.id;n!==o&&r(o)}},{key:"componentDidUpdate",value:function(e){!e.items&&this.props.items&&this.props.onLoad&&this.props.onLoad()}},{key:"render",value:function(){var e=this.props.items;return e&&e.length?Object(r.c)(Zn.d,{children:[Object(r.b)(Zn.b,{className:"RelatedCommodities-title",children:"相关推荐"}),Object(r.b)(Zn.c,{className:"RelatedCommodities-list",children:e.slice(0,3).map((function(e){return Object(r.b)(Ii,{item:e},e.id)}))})]}):null}}]),n}(d.Component),Li=Object(R.compose)(Object(b.connect)((function(e,t){var n=e.question.relatedCommodities[t.question.id];return{attachedInfo:(n||[]).attachedInfo,items:n}}),{loadRelatedCommodities:E.X}),Object(j.b)((function(e){return{attachedInfoBytes:e.attachedInfo,module:"ContentList",moduleName:"相关推荐"}})))(Di),Pi=n(1842),zi=n(120),Bi=n(1377);function Fi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var Ui=function(e){Object(s.a)(n,e);var t=Fi(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).goToBrand=function(){var t=e.props.brand.target;t&&(location.href="/org/".concat(t.urlToken))},e}return Object(c.a)(n,[{key:"componentWillReceiveProps",value:function(e){var t=this.props.brand,n=e.brand,r=e.loadProfile;t&&n&&t.name!==n.name&&n.target&&n.target.urlToken&&r(n.target.urlToken,!1)}},{key:"render",value:function(){var e=this.props,t=e.brand,n=t.logo,o=t.name,i=t.target,a=t.isPuQuestion,c=e.brandMember,s=this.context.currentUser,u=a?"关于大咖":"关于品牌";return Object(r.c)(Zn.d,{className:de()({MobileBrandQuestionAuthor:!1}),children:[Object(r.b)(Zn.b,{className:"BrandQuestionAuthor-header",children:Object(r.b)("span",{className:"BrandQuestionAuthor-headerText",children:u})}),Object(r.c)(Zn.c,{className:de()("BrandQuestionAuthor",i&&"is-clickable"),onClick:this.goToBrand,children:[Object(r.b)("img",{src:n,className:"BrandQuestionAuthor-icon",alt:"brand"}),Object(r.c)("div",{className:"BrandQuestionAuthor-content",children:[Object(r.c)("div",{className:"BrandQuestionAuthor-name",children:[o,i&&i.urlToken&&Object(r.b)(pe.c,{css:{marginLeft:3},badge:i.badge})]}),i&&i.headline&&Object(r.b)("div",{className:"BrandQuestionAuthor-intro",children:i.headline})]})]}),c&&c.id&&s&&s.id!==c.id&&Object(r.b)(Bi.a,{className:"BrandQuestionAuthor-buttons",user:c})]})}}]),n}(d.Component);Ui.contextTypes={currentUser:h.a.object};var qi=Object(b.connect)((function(e){var t=e.entities,n=e.question.brand,r={};return n&&n.target&&n.target.urlToken&&(r=t.users[n.target.urlToken]||{}),{brand:n,brandMember:r}}),{loadBrand:E.F,loadProfile:zi.h})(Ui);function Vi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}function Hi(e){var t=e.text,n=e.from,o=e.score;return Object(r.c)("span",{children:[n||t,o&&Object(r.b)("strong",{children:o})]})}var Ki=function(e){Object(s.a)(n,e);var t=Vi(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"renderCardImage",value:function(){var e=this.props.meta,t=e.avatar,n=e.title;return t?Object(r.b)(Yn.a,{className:de()("QuestionSidebarTopicMeta-cardImage"),src:t,alt:n}):null}},{key:"renderGoodsCard",value:function(){var e=this.props.meta.title;return Object(r.c)("div",{className:"QuestionSidebarTopicMeta-cardMain QuestionSidebarTopicMeta-goods",children:[this.renderCardImage(),Object(r.b)("div",{className:"QuestionSidebarTopicMeta-cardContent",children:Object(r.b)("h3",{className:"QuestionSidebarTopicMeta-cardTitle",children:e})})]})}},{key:"renderGeneralCard",value:function(){var e=this.props.meta,t=e.title,n=e.description1,o=e.description2,i=function(e){var t=e.scores,n=void 0===t?[]:t,r=e.tags,o=void 0===r?[]:r;return n.length>0?n:o.length>0?o:[]}(e),a=i.length?i.map((function(e,t){return Object(r.b)(Hi,Object.assign({},e),t)})):o;return Object(r.c)("div",{className:"QuestionSidebarTopicMeta-cardMain",children:[this.renderCardImage(),Object(r.c)("div",{className:"QuestionSidebarTopicMeta-cardContent",children:[Object(r.b)("h3",{className:"QuestionSidebarTopicMeta-cardTitle",children:t}),n&&Object(r.b)("div",{className:"QuestionSidebarTopicMeta-cardDesc",children:n}),a&&Object(r.b)("div",{className:"QuestionSidebarTopicMeta-cardScore",children:a})]})]})}},{key:"renderCard",value:function(){return"n_goods"===this.props.meta.category?this.renderGoodsCard():this.renderGeneralCard()}},{key:"renderModule",value:function(){var e=this.props,t=e.meta,n=e.excerpt,o=e.metaCardDisplay,i=t.summary||n;return Object(r.c)(Zn.d,{children:[this.renderCard(),"normal"===o&&Object(r.c)("div",{className:"QuestionSidebarTopicMeta-cardMore",children:[i&&Object(r.b)("div",{className:"QuestionSidebarTopicMeta-cardMoreInner",dangerouslySetInnerHTML:{__html:i}}),Object(r.c)("div",{className:"QuestionSidebarTopicMeta-cardLink",children:["查看更多",Object(r.b)(br.a,{center:!0})]})]})]})}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.meta,o=e.metaCardDisplay;if(!n||"none"===o)return null;var i=n.category;return Object(r.b)(j.a,{module:"TopicItem",moduleName:i,card:{content:Object.assign({type:"Topic"},Object(Jn.a)("topic",t),{sub_type:"MetaCard"})},trackCardShow:!0,children:Object(r.b)("a",{href:"/topic/".concat(t),target:"_blank",rel:"noopener noreferrer",children:this.renderModule()})})}}]),n}(d.PureComponent);function Qi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}Ki.propTypes={id:h.a.string.isRequired,excerpt:h.a.string,meta:h.a.shape({category:h.a.string,avatar:h.a.string,title:h.a.string,description1:h.a.string,description2:h.a.string,summary:h.a.string,scores:h.a.arrayOf(h.a.shape({url:h.a.string,score:h.a.string,from:h.a.string})),tags:h.a.arrayOf(h.a.shape({text:h.a.string}))}).isRequired,metaCardDisplay:h.a.oneOf(["normal","none"])};var Wi=function(e){Object(s.a)(n,e);var t=Qi(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.params.id,n=e.items,r=e.loadQuestionMetaTopics;n||r(t)}},{key:"render",value:function(){var e=this.props,t=e.items,n=e.questionId;if(!t||!t.length)return null;var o=t.filter((function(e){return e&&e.meta}));if(!o||o.length<1)return null;var i=o[0],a=i.vote,c=i.isVote,s="normal";return a&&c&&(s="none"),Object(r.b)("div",{className:"QuestionSidebarTopicMeta",children:Object(r.b)(Ki,Object.assign({metaCardDisplay:s},i,{questionId:n}))})}}]),n}(d.Component),Gi=Object(R.compose)(o.withRouter,Object(b.connect)((function(e,t){var n=t.params;return{questionId:n.id,items:Object(E.ab)(e,{id:n.id})}}),{loadQuestionMetaTopics:E.U}),Object(_.a)(null))(Wi),Zi=n(250),Yi=Object(R.compose)(Object(_.a)(null),Object(Zi.b)(),Object(b.connect)(null,{getReadingMembership:E.v}))((function(e){var t=e.getReadingMembership,n=e.isLogin,o=Object(d.useState)(!1),a=Object(i.a)(o,2),c=a[0],s=a[1],u=Object(d.useState)(!1),l=Object(i.a)(u,2),f=l[0],p=l[1];Object(d.useEffect)((function(){n&&t().then((function(e){var t=e.payload;p(t.isHaveRight)})).catch((function(){}))}),[t,n]);var h=function(){s(!c)};return f&&Object(r.c)(r.a,{children:[Object(r.c)(Zn.d,{className:"ReadingMembership",onClick:h,children:[Object(r.c)("div",{className:"ReadingMembership-banner",children:[Object(r.b)("div",{children:"领取读书会会员体验卡"}),Object(r.c)("div",{children:["海量电子书免费读 ",Object(r.b)(br.a,{size:22})]})]}),Object(r.b)("img",{src:"https://pic3.zhimg.com/80/v2-ba02e89d92407e3e2491a27af5ace660_hd.jpeg"})]}),Object(r.b)(Bt.b,{className:"ReadingMembership-modal",onClose:h,children:c&&Object(r.c)("div",{className:"ReadingMembership-content",children:[Object(r.b)("img",{src:"https://pic2.zhimg.com/80/v2-8f8b9ff43e407c160bfc2d6352c662b6_hd.jpeg"}),Object(r.c)("div",{className:"ReadingMembership-title",children:[Object(r.b)("div",{children:"登录知乎 App 领取"}),Object(r.b)("div",{children:"读书会会员 7 天体验卡"})]}),Object(r.c)("div",{className:"ReadingMembership-qrcode",children:[Object(r.b)("div",{children:"知乎读书会会员，海量电子书免费读"}),Object(r.b)("img",{src:"https://pic2.zhimg.com/80/v2-e3a03af184c11dc3526218de74977fd5_hd.png",alt:"知乎二维码"}),Object(r.b)("div",{children:"扫码下载知乎 App"})]})]})})]})})),Ji=n(1084);function $i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var Xi=function(e){Object(s.a)(n,e);var t=$i(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).onHeightChange=function(){e.dynamicSticky&&e.dynamicSticky.check()},e}return Object(c.a)(n,[{key:"componentWillMount",value:function(){var e=this.props,t=e.question,n=t.id,r=t.questionType,o=e.loadBrand;"commercial"===r&&o(n)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.brand,n=e.brand,r=e.loadProfile;t&&n&&t.name!==n.name&&n.target&&r(n.target.urlToken,!1)}},{key:"render",value:function(){var e=this,t=this.props,n=t.question,o=t.question,i=o.id,a=o.questionType,c=t.brand;return Object(r.c)(Ji.a,{className:"Question-sideColumn Question-sideColumn--sticky",onRef:function(t){e.sidebar=t},offset:nn.i+10,ref:function(t){e.dynamicSticky=t},children:["commercial"===a&&Object(r.b)(Pi.a,{questionId:i,pageType:"question",onLoad:this.onHeightChange}),"commercial"===a&&c&&Object(r.b)(qi,{brand:c}),"commercial"!==a&&Object(r.b)(gi.a,{type:"question",getSidebar:function(){return e.sidebar}}),"normal"===a&&Object(r.b)("div",{className:"Card",children:Object(r.b)(mi.a,{isMobile:!1,id:"question/".concat(i),location:"new_question_up",query:{question_token:i},onHeightChange:this.onHeightChange})}),Object(r.b)(Gi,{}),Object(r.b)(Yi,{}),"normal"===a&&Object(r.b)(Si,{question:n,onLoad:this.onHeightChange}),"normal"===a&&Object(r.b)(Li,{question:n,onLoad:this.onHeightChange}),"normal"===a&&Object(r.b)("div",{className:"Card",children:Object(r.b)(mi.a,{isMobile:!1,id:"question/".concat(i),location:"new_question_down_sticky",query:{question_token:i},delay:500,onHeightChange:this.onHeightChange})}),"commercial"===a&&Object(r.b)(gi.a,{type:"question",getSidebar:function(){return e.sidebar}}),Object(r.b)(yi.a,{})]})}}]),n}(d.Component),ea=Object(R.compose)(Object(_.a)(null),Object(j.b)({module:"RightSideBar"}),Object(b.connect)((function(e){return{brand:e.question.brand}}),{loadBrand:E.F,loadProfile:zi.h}))(Xi);function ta(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var na=function(e){Object(s.a)(n,e);var t=ta(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"renderAnswers",value:function(){var e=this.props,t=e.resource,n=e.question,o=n.questionType,i=n.collapsedAnswerCount,a=n.answerCount,c=n.isNormal,s=n.status,u=(s=void 0===s?{}:s).isLocked,l=e.question,d=e.location,f=e.answering,p=e.invitationShowCount,h=e.isDrained,b=e.isMuteSpecial,v=e.isMuteFreeze,m="updatedAnswers"===t||h,g="commercial"!==o&&!a;return Object(r.c)("div",{children:[Object(r.b)(di,{question:l,answering:f}),Boolean(p)&&!b&&!v&&Object(r.b)(Dt.a,{expandCount:p,question:l}),Object(r.b)($o,{resource:t,question:l,location:d}),c&&!u&&"updatedAnswers"!==t&&h&&!g&&Object(r.b)(j.a,{module:"BottomBar",children:Object(r.b)(Zn.d,{children:Object(r.b)(st,{className:"QuestionAnswers-answerButton",size:"spread"})})}),m&&i>0&&!b&&Object(r.b)(vi,{question:l})]})}},{key:"render",value:function(){var e=this.props,t=e.question,n=e.isNormalNotification,o=e.notificationId,i=e.location;return Object(r.c)("div",{className:"Question-main",children:[Object(r.b)("div",{className:"Question-mainColumn",children:n?Object(r.b)(Eo,{location:i,question:t,id:o}):this.renderAnswers()}),Object(r.b)(ae.a,{children:Object(r.b)(ea,{question:t})})]})}}]),n}(d.PureComponent);na.fetchData=function(e){var t=e.params.id,n=e.route.resource,r=e.location.query,o=r.group_id,i=r.page,a=r.qc,c=e.dispatch,s=e.getState;if(!a&&o)return c(Object(E.P)(o));var u=s(),l=u.env.userAgent,d=Object(U.d)(u),f=5;return l.isBot?f=20:d&&(f=4),c(Object(E.O)(t,n,{offset:Object(yo.c)(Number(i)||1),limit:f}))};var ra=Object(b.connect)((function(e,t){var n=t.params.id,r=t.route.resource,o=t.location.query,i=o.group_id,a=o.qc,c=e.currentUser,s=!a&&i,u=jo(e,{id:n,resource:r}).isDrained,l=Object(E.bb)(e,{id:n}),d=l.answerCount,f=l.relationship.isAnonymous;return{isNormalNotification:s,notificationId:i,resource:r,question:l,isDrained:u,invitationShowCount:c&&!f&&d<4?d?5:3:0,isBot:e.env.userAgent.isBot,isHuman:Object(U.c)(e),currentUser:Object(M.b)(e),canOia:Object(U.d)(e),shouldOia:Object(U.h)(e),shouldSpecialOia:Object(U.i)(e),referer:Object(U.g)(e),isMuteSpecial:Object(E.C)(l),isMuteFreeze:Object(E.B)(l),ua:Object(U.l)(e),draft:Object(E.n)(e,{id:n})}}))(na),oa=n(1417),ia=n(206),aa=n(133);function ca(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var sa=function(e){Object(s.a)(n,e);var t=ca(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={contentRef:null},e.contentRef=Object(d.createRef)(),e.handleCloseComment=function(){var t=e.props,n=t.location,r=n.pathname,o=n.search,i=t.byComment,a=t.router;i&&a.replace({pathname:r,search:o})},e.handleCloseEditing=function(){var t=e.props,n=t.location,r=n.pathname,o=n.query,i=n.hash,a=t.router;"#draft"===i&&a.replace({pathname:r,query:o})},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.answer.id,n=e.loadContentRightsNotification;this.context.currentUser&&Object(oe.c)("answer",t,oe.a),this.setState({contentRef:this.contentRef.current}),Oe.a.get("answer::justPublished")&&(Oe.a.delete("answer::justPublished"),n("answer",t))}},{key:"render",value:function(){var e,t=this.props,n=t.question,o=n.id,i=n.relationship,a=i.canCollapseAnswers,c=i.canStickAnswers,s=n.hasPublishingDraft,u=t.answer,l=t.location.hash,d=t.isSearchSpecialSource,f=t.hasLoadedDraft;return(null==u||null===(e=u.question)||void 0===e?void 0:e.id)!==o||u.isDelete?Object(r.b)(oa.a,{to:"/question/".concat(o)}):Object(r.b)(Zn.d,{className:"AnswerCard",children:Object(r.b)("div",{className:"QuestionAnswer-content",ref:this.contentRef,tabIndex:0,children:Object(r.b)(ia.d.Provider,{value:this.state.contentRef,children:Object(r.b)(go.a,{relatedTo:"answer",answer:u,byComment:Object(dn.a)(l),onCloseComment:this.handleCloseComment,onCloseEditing:this.handleCloseEditing,canCollapse:a,canStick:c,editing:f&&"#draft"===l,editable:!0,canAbstract:!0,expanded:d||!0,hasPublishingDraft:s,itemProp:"mainEntityOfPage",showReviewingLabel:!0,isSearchSpecialSource:d})})})})}}]),n}(d.Component);sa.contextTypes={currentUser:h.a.object};var ua=Object(R.compose)(o.withRouter,Object(b.connect)((function(e,t){var n,r,o=e.question,i=(o=void 0===o?{}:o).draftStatus,a=t.answer;return{hasLoadedDraft:!1===(null==i||null===(n=i[null==a||null===(r=a.question)||void 0===r?void 0:r.id])||void 0===n?void 0:n.loading)}}),{loadAnswer:L.o,loadContentRightsNotification:aa.eb}))(sa);function la(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var da=function(e){Object(s.a)(n,e);var t=la(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.isDrained,n=e.items;t||n.length||this.loadItems()}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.question.id,n=e.question.id,r=e.isDrained,o=e.items;n!==t&&!r&&o.length<2&&this.loadItems()}},{key:"loadItems",value:function(){var e=this.props,t=e.question.id,n=e.loadItems;return n(t,"answers",{limit:3})}},{key:"render",value:function(){var e=this.props,t=e.question.relationship.canCollapseAnswers,n=e.items,o=e.isWechat;return Boolean(n.length)&&Object(r.b)(Zn.d,{className:"MoreAnswers",children:Object(r.b)($r.b,{title:"更多回答","data-zop-feedlist":!0,children:n.map((function(e){return Object(r.b)(mo.a,{children:Object(r.b)(go.a,{relatedTo:"question",answer:e,canCollapse:t,lastreadTouchable:!0,blockReading:!o})},e.id)}))})})}}]),n}(d.Component),fa=Object(b.connect)((function(e,t){var n=t.question.id,r=t.answerId,o=e.entities.answers,i=e.question.answers[n]||{ids:[],isDrained:!1},a=i.ids;return{isDrained:i.isDrained,items:a.filter((function(e){return e!==Number(r)})).slice(0,2).map((function(e){return o[e]})),isWechat:e.env.userAgent.Wechat}}),{loadAnswer:L.o,loadItems:E.O})(da),pa=n(956),ha=n(1010),ba=n(1557),va=n(97);function ma(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var ga=function(e){Object(s.a)(n,e);var t=ma(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props,t=e.items,n=e.author;return t&&t.length?Object(r.c)("div",{className:"AnswerAuthor-item",children:[Object(r.b)("span",{className:"AnswerAuthor-item-icon",children:Object(r.b)(ba.a,{text:!0,center:!0})}),Object(r.b)("div",{className:"AnswerAuthor-item-value",children:Object(r.c)(ha.CJKSpace,{children:[t.slice(0,3).map((function(e,t){return Object(r.c)("span",{children:[0!==t&&"、",Object(r.b)(Mt.a,{user:e,noBadge:!0,noHoverCard:!0,children:e.name})]},e.urlToken)})),"也关注了",nn.N[n.gender]]})})]}):null}}]),n}(d.Component);ga.propTypes={author:h.a.object.isRequired};var ya=Object(R.compose)(Object(b.connect)((function(e,t){var n=t.author;return Object.assign({currentUser:Object(M.b)(e)},n&&function(e,t){var n=t.urlToken||t.id,r=e.people.mutualsByUser[n]||{isDrained:!1,isFetching:!1,ids:[]};return{isDrained:r.isDrained,isFetching:r.isFetching,items:r.ids.map((function(t){var n=Object(va.c)(e,{id:t});return n.code?null:n})).filter(Boolean)}}(e,{urlToken:n.urlToken}))}),{loadItems:zi.f}),Object(Qt.a)({shouldLoad:function(e){return e.currentUser&&e.author&&e.author.urlToken&&e.currentUser.urlToken!==e.author.urlToken&&!e.isDrained},load:function(e){return e.loadItems(e.author.urlToken,"mutuals")}}))(ga),Oa=n(899),ja=n(886);function wa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var Ca=function(e){return e&&void 0!==e.answerCount&&"undefined"!=typeof articlesCount&&"undefined"!=typeof followerCount&&void 0!==e.badge};var ka=function(e){Object(s.a)(n,e);var t=wa(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.nextItem()}},{key:"componentWillReceiveProps",value:function(e){this.props.answer.author.urlToken!==e.answer.author.urlToken&&this.nextItem(e)}},{key:"componentDidUpdate",value:function(e){!e.user&&this.props.user&&this.props.onLoad&&this.props.onLoad()}},{key:"nextItem",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.answer.author.urlToken,n=e.loadProfile,r=e.isDrained;t&&(r||n(t))}},{key:"render",value:function(){var e,t=this.props,n=t.user,o=t.isSelf;if(!n)return null;var i=n.urlToken,a=n.isOrg,c=n.headline,s=n.badge,u=n.badgeV2,l=n.answerCount,d=n.articlesCount,f=n.followerCount,p=pe.e(u||s),h=p.identity,b=p.bestAnswerer,v=p.baike,m=a?"org":"people";return Object(r.c)(Zn.d,{className:"AnswerAuthor",children:[Object(r.b)(Zn.b,{className:"AnswerAuthor-title",children:"关于作者"}),Object(r.b)(Zn.c,{children:Object(r.c)("div",{className:"AnswerAuthor-user",children:[Object(r.b)("div",{className:"AnswerAuthor-user-avatar",children:Object(r.b)(Oa.a,{user:n,avatarProps:{size:60},noHoverCard:!0})}),Object(r.c)("div",{className:"AnswerAuthor-user-content",children:[Object(r.b)("div",{className:"AnswerAuthor-user-name",children:Object(r.b)(ja.a,{user:n,noBadge:!0,noHoverCard:!0})}),c&&Object(r.b)("div",{className:"AnswerAuthor-user-headline",children:Object(r.b)(It.a,{html:c})})]})]})}),Object(r.c)(Zn.c,{children:[h&&Object(r.c)("div",{className:"AnswerAuthor-item",children:[Object(r.b)("a",{className:"AnswerAuthor-item-icon",href:"/account/verification/intro",target:"_blank",children:Object(r.b)(pe.a,{center:!0,size:19})}),Object(r.b)("div",{className:"AnswerAuthor-item-value",children:h.slice(0,2).map((function(e){return e.description})).join("，")})]}),Boolean(null==b||null===(e=b.topics)||void 0===e?void 0:e.length)&&Object(r.c)("div",{className:"AnswerAuthor-item",children:[Object(r.b)("span",{className:"AnswerAuthor-item-icon",children:Object(r.b)(pe.b,{center:!0,size:19})}),Object(r.c)("div",{children:[Object(r.b)(pa.a,{topics:b.topics,user:n,noHoverCard:!0}),"的优秀答主"]})]}),Boolean(v)&&Object(r.c)("div",{className:"AnswerAuthor-item",children:[Object(r.b)("span",{className:"AnswerAuthor-item-icon",children:Object(r.b)(pe.d,{center:!0,size:19})}),Object(r.b)("div",{children:v.description})]}),n&&!o&&Object(r.b)(ya,{author:n})]}),i&&Object(r.c)(Zn.c,{children:[Object(r.b)("div",{className:"AnswerAuthor-counts",children:Object(r.c)(Ft.a,{children:[Object(r.b)(Ft.a.Item,{tag:it.a,preset:"plain",to:"/".concat(m,"/").concat(i,"/answers"),name:"回答",value:l,"data-za-detail-view-element_name":"Answer"}),Object(r.b)(Ft.a.Item,{tag:it.a,preset:"plain",to:"/".concat(m,"/").concat(i,"/posts"),name:"文章",value:d,"data-za-detail-view-element_name":"Post"}),Object(r.b)(Ft.a.Item,{tag:it.a,preset:"plain",to:"/".concat(m,"/").concat(i,"/followers"),name:"关注者",value:f,"data-za-detail-view-element_name":"Follower"})]})}),!o&&Object(r.b)(Bi.a,{className:"AnswerAuthor-buttons",user:n})]})]})}}]),n}(d.Component),Sa=Object(b.connect)((function(e,t){var n=t.answer,r=n.author,o=n.author.urlToken,i=e.entities.users,a=o?i[o]:r;return{currentUser:Object(M.b)(e),isDrained:Ca(a),user:a,isSelf:Object(M.i)(e,a)}}),{loadProfile:zi.h})(ka),xa=n(850),Ra=n(1438);function Ea(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var _a=function(e){Object(s.a)(n,e);var t=Ea(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).load=function(){var t=e.props,n=t.answer.id;(0,t.loadAnswerFavlists)(n)},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props,t=e.items,n=e.count,o=e.isFetching,i=e.isDrained;return Object(r.c)("div",{className:"AnswerFavlists",children:[Object(r.b)("div",{className:"AnswerFavlists-header",children:Object(r.c)("div",{className:"AnswerFavlists-title",children:["被收藏 ",Object(Se.formatNumber)(n)," 次"]})}),!(i&&!t.length)&&Object(r.b)(Er.b,{className:"AnswerFavlists-list",isLocal:!0,isLoading:o,isDrained:i,onLoad:this.load,getContainer:function(e){return e},placeholder:Object(r.b)(Er.a,{className:"AnswerFavlists-item",small:!0}),children:t.map((function(e){var t=e.id,n=e.type,o=e.creator,i=e.isFollowing,a=e.answerCount,c=e.followerCount;return Object(r.b)($r.a,{children:Object(r.b)(Ra.a,{favlist:e,action:Object(r.b)(ut.a,{preset:"primary",id:t,type:n,isFollowing:i}),status:Object(r.c)(xa.d,{children:[Object(r.c)("span",{children:["由"," ",Object(r.b)(Mt.a,{user:o,noBadge:!0,noHoverCard:!0,target:"_blank"})," ","创建"]}),Object(r.c)("span",{children:[Object(Se.formatNumber)(a)," 条内容"]}),Object(r.c)("span",{children:[Object(Se.formatNumber)(c)," 人关注"]})]})})},t)}))})]})}}]),n}(d.Component),Aa=Object(R.compose)(Object(b.connect)((function(e,t){var n=t.answer.id,r=e.entities.favlists,o=e.answers.favlists[n]||{isFetching:!1,isDrained:!1,totals:0,ids:[]};return{items:o.ids.map((function(e){return r[e]})),count:o.totals,isFetching:o.isFetching,isDrained:o.isDrained}}),{loadAnswerFavlists:L.s}),Object(j.b)({module:"CollectionList"}))(_a),Ta=n(1022);function Na(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var Ia=function(e){Object(s.a)(n,e);var t=Na(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).load=function(){var t=e.props,n=t.answer.id;(0,t.loadAnswerCopyrightApplicants)(n)},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props,t=e.items,n=e.count,o=e.isFetching,i=e.isDrained;return Object(r.c)("div",{className:"AnswerCopyrightApplicants",children:[Object(r.b)("div",{className:"AnswerCopyrightApplicants-header",children:Object(r.c)("div",{className:"AnswerCopyrightApplicants-title",children:["授权转载 ",Object(Se.formatNumber)(n)," 次"]})}),!(i&&!t.length)&&Object(r.b)(Er.b,{className:"AnswerCopyrightApplicants-list",isLocal:!0,isLoading:o,isDrained:i,onLoad:this.load,getContainer:function(e){return e},placeholder:Object(r.b)(Er.a,{className:"AnswerCopyrightApplicants-item",small:!0}),children:t.map((function(e){var t=e.applier,n=e.accountType,o=e.accountUsername,i=e.createdAt;return Object(r.b)("div",{className:"AnswerCopyrightApplicants-item",children:Object(r.b)(Ta.a,{user:t,meta:"".concat(n," ").concat(o),status:null,action:Object(r.c)("div",{className:"AnswerCopyrightApplicants-time",children:["申请于 ",Object(w.toDateString)(i)]})})},"".concat(t.name,".").concat(i))}))})]})}}]),n}(d.Component),Ma=Object(b.connect)((function(e,t){var n=t.answer.id,r=e.entities.copyrightApplicants,o=e.answers.copyrightApplicants[n]||{isFetching:!1,isDrained:!1,totals:0,ids:[]};return{items:o.ids.map((function(e){return r[e]})),count:o.totals,isFetching:o.isFetching,isDrained:o.isDrained}}),{loadAnswerCopyrightApplicants:L.r})(Ia);function Da(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var La=function(e){Object(s.a)(n,e);var t=Da(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props.copyrightApplicant,t=e.applier,n=e.accountType,o=e.accountUsername,i=e.createdAt;return Object(r.c)("div",{className:"AnswerInfo-copyright-applicant",children:[Object(r.b)(Mt.a,{user:t,noBadge:!0,noHoverCard:!0,target:"_blank"}),"，",n," ",o]},"".concat(t.name,".").concat(i))}}]),n}(d.Component);function Pa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var za=function(e){Object(s.a)(n,e);var t=Pa(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props.copyrightApplicants;return Object(r.b)(Zn.c,{className:"AnswerInfo-copyright-applicants",children:e.map((function(e,t){return Object(r.b)(La,{copyrightApplicant:e},t)}))},"content")}}]),n}(d.Component);function Ba(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var Fa=function(e){Object(s.a)(n,e);var t=Ba(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props.favlist,t=e.id,n=e.title,o=e.followerCount,i=e.creator;return Object(r.c)("div",{className:"AnswerInfo-favlist",children:[Object(r.b)("div",{className:"AnswerInfo-favlist-title",children:Object(r.b)(it.a,{preset:"plain",a:!0,to:"/collection/".concat(t),target:"_blank","data-za-detail-view-element_name":"Collection",title:n,children:n})}),Object(r.c)("div",{className:"AnswerInfo-favlist-author",children:[Object(r.b)(Mt.a,{user:i,noBadge:!0,noHoverCard:!0,target:"_blank","data-za-detail-view-element_name":"Author"})," ","创建"]}),Object(r.c)("div",{className:"AnswerInfo-favlist-followers",children:[Object(Se.formatNumber)(o)," 人关注"]})]},t)}}]),n}(d.Component),Ua=Object(j.b)((function(e){var t=e.favlist;return{module:"CollectionItem",content:{type:"Collection",token:String(t.id),follower_num:t.followerCount,author_member_hash_id:t.creator.id},trackCardShow:!0}}))(Fa);function qa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var Va=function(e){Object(s.a)(n,e);var t=qa(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props.favlists;return Object(r.b)(Zn.c,{className:"AnswerInfo-favlists",children:e.map((function(e){return Object(r.b)(Ua,{favlist:e},e.id)}))},"content")}}]),n}(d.Component),Ha=Object(j.b)({module:"CollectionList"})(Va);function Ka(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var Qa=function(e){Object(s.a)(n,e);var t=Ka(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={copyrightApplicantsModalShown:!1,favlistsModalShown:!1},e.handleCopyrightApplicantsModalShow=function(){re.a.trackEvent(Object(et.a)(e),{action:"Click",element:"Button",name:"转载授权"}),e.setState({copyrightApplicantsModalShown:!0})},e.handleCopyrightApplicantsModalHide=function(){e.setState({copyrightApplicantsModalShown:!1})},e.handleFavlistsModalShow=function(){re.a.trackEvent(Object(et.a)(e),{action:"Click",element:"Button",name:"被收藏"}),e.setState({favlistsModalShown:!0})},e.handleFavlistsModalClose=function(){e.setState({favlistsModalShown:!1})},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.answer.id,n=e.copyrightApplicants,r=e.favlists,o=e.loadAnswerCopyrightApplicants,i=e.loadAnswerFavlists;n.length||r.length||(o(t),i(t))}},{key:"componentDidUpdate",value:function(e){this.props.onLoad&&(!e.copyrightApplicants.length&&this.props.copyrightApplicants.length||!e.favlists.length&&this.props.favlists.length)&&this.props.onLoad()}},{key:"render",value:function(){var e=this.props,t=e.answer,n=e.copyrightApplicants,o=e.copyrightApplicantCount,i=e.favlists,a=e.favlistCount,c=this.state,s=c.favlistsModalShown,u=c.copyrightApplicantsModalShown;return n.length||i.length?Object(r.c)(Zn.d,{children:[Boolean(n.length)&&[Object(r.c)(Zn.b,{className:"AnswerInfo-title",children:["授权转载"," ",Object(r.b)(B.c,{preset:"plain",onClick:this.handleCopyrightApplicantsModalShow,children:Object(Se.formatNumber)(o)})," ","次"]},"header"),Object(r.b)(za,{copyrightApplicants:n.slice(0,5)},"content")],Boolean(i.length)&&[Object(r.c)(Zn.b,{className:"AnswerInfo-title",children:["被收藏"," ",Object(r.b)(B.c,{preset:"plain",onClick:this.handleFavlistsModalShow,children:Object(Se.formatNumber)(a)})," ","次"]},"header"),Object(r.b)(Ha,{favlists:i.slice(0,5)},"content")],Object(r.b)(Bt.b,{size:"fullPage",onClose:this.handleFavlistsModalClose,children:s&&Object(r.b)(Aa,{answer:t})}),Object(r.b)(Bt.b,{size:"fullPage",onClose:this.handleCopyrightApplicantsModalHide,children:u&&Object(r.b)(Ma,{answer:t})})]}):null}}]),n}(d.Component),Wa=Object(b.connect)((function(e,t){var n=t.answer.id,r=e.entities,o=r.copyrightApplicants,i=r.favlists,a=e.answers.copyrightApplicants[n]||{totals:0,ids:[]},c=e.answers.favlists[n]||{totals:0,ids:[]};return{copyrightApplicants:a.ids.map((function(e){return o[e]})),copyrightApplicantCount:a.totals,favlists:c.ids.map((function(e){return i[e]})),favlistCount:c.totals}}),{loadAnswerCopyrightApplicants:L.r,loadAnswerFavlists:L.s})(Qa);function Ga(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var Za=function(e){Object(s.a)(n,e);var t=Ga(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).onHeightChange=function(){e.dynamicSticky&&e.dynamicSticky.check()},e}return Object(c.a)(n,[{key:"shouldComponentUpdate",value:function(e){return e.answer.id!==this.props.answer.id}},{key:"render",value:function(){var e=this,t=this.props,n=t.question,o=t.question,i=o.id,a=o.questionType,c=t.answer,s=Object(L.n)(c)||Object(L.l)(c);return Object(r.c)(Ji.a,{className:"Question-sideColumn Question-sideColumn--sticky",onRef:function(t){e.sidebar=t},offset:nn.i+10,ref:function(t){e.dynamicSticky=t},children:[Object(r.b)(gi.a,{type:"question",getSidebar:function(){return e.sidebar}}),s||"normal"===a&&437329650!==i&&Object(r.b)("div",{className:"Question-sideColumnAdContainer",children:Object(r.b)(mi.a,{isMobile:!1,id:"question/".concat(i,"/answer/").concat(c.id),location:"new_answer_up",query:{question_token:i,answer_token:c.id},onHeightChange:this.onHeightChange})}),"commercial"===a&&Object(r.b)(Pi.a,{questionId:i}),c.author&&Object(r.b)(Sa,{answer:c,onLoad:this.onHeightChange}),Object(r.b)(Gi,{}),Object(r.b)(Wa,{answer:c,onLoad:this.onHeightChange}),Object(r.b)(Yi,{}),s||"normal"===a&&Object(r.b)(Si,{question:n,onLoad:this.onHeightChange}),s||"normal"===a&&Object(r.b)(Li,{answer:c,question:n,onLoad:this.onHeightChange}),s||"normal"===a&&437329650!==i&&Object(r.b)("div",{children:Object(r.b)(mi.a,{isMobile:!1,id:"question/".concat(i,"/answer/").concat(c.id),location:"new_answer_down_sticky",query:{question_token:i,answer_token:c.id},delay:1e3,onHeightChange:this.onHeightChange})}),Object(r.b)(yi.a,{})]})}}]),n}(d.Component),Ya=Object(R.compose)(Object(_.a)(null),Object(j.b)((function(e){var t=e.answer;return{module:"RightSideBar",content:Object.assign({},t.author&&{member_hash_id:t.author.id})}})))(Za);function Ja(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var $a=function(e){Object(s.a)(n,e);var t=Ja(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props,t=e.to,n=e.itemNum,o=e.questionType;e.bottom;return Object(r.b)(Zn.d,{className:de()("ViewAll",{"ViewAll--bottom":!1}),children:Object(r.b)(Xr.a,{className:"ViewAll-QuestionMainAction",to:t,"data-za-detail-view-element_name":"ViewAll",style:{},children:"commercial"===o?"查看 ".concat(Object(Se.formatNumber)(n)," 个品牌推荐的回答"):"查看全部 ".concat(Object(Se.formatNumber)(n)," 个回答")})})}}]),n}(d.Component),Xa=Object(j.b)((function(e){return{module:"MessageItem",content:{item_num:e.itemNum}}}))($a),ec=n(1101),tc=Object.assign;var nc=function(e){return f.a.createElement(_e.a,tc({width:"60",height:"60",viewBox:"0 0 60 60",xmlnsXlink:"http://www.w3.org/1999/xlink"},e),f.a.createElement("defs",null,f.a.createElement("path",{id:"id-911829636-a",d:"M0 .061h37.628V58.6H0z"})),f.a.createElement("g",{fill:"none",fillRule:"evenodd"},f.a.createElement("g",{transform:"translate(9 1.139)"},f.a.createElement("mask",{id:"id-911829636-b",fill:"#fff"},f.a.createElement("use",{xlinkHref:"#id-911829636-a"})),f.a.createElement("path",{fill:"#464646",d:"M35.195 19.446c-.1 3.708-.17 6.787-.21 9.256 0 .21 0 .42-.01.63-.03 2.229-.12 4.628-.27 7.197-.14 2.649-.75 4.668-1.829 6.057-1.09 1.29-4.178 2.05-9.286 2.27-5.288.24-9.366.16-12.235-.23-2.69-.39-4.578-1.15-5.668-2.3v.02c-.98-1.13-1.47-2.069-1.47-2.808 0-.07-.01-.13-.03-.18l-.02-.04c-.27-1.24-.26-3.3.02-6.168.1-.88.19-1.78.27-2.689v-.02c.03-.37.07-.74.11-1.11.33-3.528.65-7.296.96-11.305.1-1.23.24-2.339.42-3.329.43-2.348 1.11-4.058 2.029-5.117.03-.03.05-.05.06-.08.33-.32.68-.56 1.05-.73a.59.59 0 00.32-.34.49.49 0 00-.02-.47.538.538 0 00-.34-.32.532.532 0 00-.33-.02l.09-.24c.69-1.819 1.48-3.468 2.369-4.958 1.919 1.23 3.518 2.47 4.808 3.729-.11.09-.18.22-.19.38-.01.16.03.3.14.42.11.14.25.22.41.23.31.03.61.05.9.06h.07c1.569 0 2.978-.05 4.248-.16.11-.01.22-.02.31-.02.03.11.09.22.19.32l.02.02c.12.11.27.15.45.14.769-.05 1.499-.11 2.168-.16.75-.06 1.45-.13 2.08-.2-.03.07-.05.13-.07.2-1.03 2.858-.98 5.297.13 7.316.45.83 1.09 1.59 1.909 2.28-.14.03-.28.06-.43.1-.17.04-.29.14-.37.29-.08.15-.1.3-.06.46.04.16.14.28.29.37l.04.04c.13.05.27.06.41.02.6-.15 1.15-.3 1.65-.45.05-.01.08-.03.109-.04 2.07-.65 3.679-1.43 4.828-2.34.04.86.03 2.2-.02 4.019zM26.31 1.583l3.458 3.898c-.63.13-1.3.25-2.019.36a.88.88 0 00-.17.02c-1.31.17-2.939.32-4.888.45a43.655 43.655 0 013.619-4.728zm3.538 5.408c.03-.01.06-.02.09-.02-.03.01-.06.03-.09.04v-.02zm.78 6.287c.11.22.17.46.17.73-.15-.12-.24-.36-.27-.73h.1zm.41-4.548c.01.03.02.05.02.08h-.02a.554.554 0 01-.06-.28c.01.07.03.13.06.2zm.37 1.8c.03 0 .05.01.08.04.03.14.05.28.06.43-.13-.16-.18-.32-.14-.47zm.27-3.72h.08c.03.05.05.11.08.16l-.29-.04c.04-.04.08-.08.13-.12zm-2.17 2.97c.04-.23.08-.47.12-.72.01-.14.03-.27.04-.39.03.04.04.09.04.14 0 .25-.07.57-.2.97zm-.95-1.9c.03-.05.06-.1.09-.14l.02-.02c.13-.13.27-.25.41-.34.04-.03.08-.05.12-.08-.01.03-.03.05-.04.08-.03.05-.05.09-.08.14-.04.03-.08.05-.13.08-.13.09-.26.19-.39.28zm3.51 6.737c.19-.13.37-.2.55-.2-.05.07-.14.16-.27.28-.05.05-.11.1-.18.16h-.45c.07-.06.15-.11.22-.16.05-.03.09-.05.13-.08zm.36-8.206c-.04.01-.07.03-.1.04-.03-.03-.05-.05-.06-.08.05-.01.11 0 .16.04zm.09 1.86c.01.01.02.03.02.04h-.07l.05-.04zm.16-1.66c.07.08.13.17.2.26-.05.03-.11.05-.16.08-.07-.11-.14-.2-.23-.28.07-.03.14-.05.19-.06zm.719 4.808c-.03.03-.12.05-.25.08-.11-.03-.16-.09-.16-.18.03 0 .16.03.41.1zm0-5.318c-.05 0-.09.01-.13.02-.03-.01-.05-.02-.08-.02.07-.01.14-.01.21 0zm1.04 2.25c-.04.05-.1.13-.18.22-.03-.03-.06-.05-.07-.08a.66.66 0 01-.08-.32c.01 0 .12.06.33.18zm.43 3.028c.23-.21.38-.36.45-.44.01.07.02.13.02.18 0 .03-.01.06-.02.1-.05.09-.14.2-.27.32-.04.04-.1.09-.18.15.01-.11.02-.18.02-.19 0-.04-.01-.08-.02-.12zm.819-4.118c-.07-.07-.14-.13-.23-.2a.492.492 0 00-.06-.17c.11.11.21.24.29.37zm-.49 6.547l-.06.04c-.03.03-.07.06-.1.11.05-.07.09-.14.14-.19.04-.04.08-.09.12-.14.18-.19.3-.36.37-.51.04-.05.07-.1.1-.14-.15.28-.34.56-.57.83zm.96-2.1h.08c-.01.09-.04.19-.08.3 0-.09-.01-.19-.02-.3h.02zm-3.339.72l.37.25h.06l-.3.1c-.03-.03-.08-.14-.13-.35zM2.968 33.03c-.23 2.4-.28 4.258-.15 5.578-.93-.53-1.45-1.66-1.57-3.399-.13-1.889.5-3.178 1.88-3.878-.05.57-.11 1.13-.16 1.7zm33.387-18.702c1.25-1.53 1.579-3.589.99-6.158a6.06 6.06 0 00-.23-.79c-.39-1.06-1.06-1.769-2-2.138-1-.45-2.339-.48-4.018-.09L26.779.262a.62.62 0 00-.28-.18.62.62 0 00-.33 0c-.11.03-.2.09-.29.18a46.626 46.626 0 00-4.358 5.598c-1.17.09-2.49.15-3.949.16-1.55-1.68-3.638-3.329-6.257-4.948a.607.607 0 00-.47-.08c-.17.03-.3.11-.39.26-1.15 1.8-2.139 3.838-2.969 6.127-.18.49-.35.98-.51 1.49-1.049 1.21-1.809 3.149-2.279 5.828-.17.98-.31 2.059-.4 3.228-.31 4.049-.63 7.857-.969 11.406l-.06.62c-2.349.79-3.429 2.568-3.249 5.337.19 2.73 1.19 4.299 2.989 4.709.12.89.71 1.939 1.76 3.138 1.209 1.36 3.358 2.26 6.427 2.69 1.11.149 2.399.249 3.858.319-.03 2.16-.14 3.318-.34 7.476-.6.18-.94.36-1.01.55a.94.94 0 00-.14.5c-.01.01-.01.04 0 .09-.03.21-.01.58.04 1.09.22.499.92.749 2.11.749.75 0 1.29-.12 1.6-.35.31-.23.48-.64.49-1.23.009-.59-.1-.939-.33-1.029l.569-7.786c.82 0 1.69-.01 2.599-.04l-.82 7.866c-.09-.01-.17.28-.24.87-.04.59.08 1 .35 1.23.29.23.81.34 1.57.34 1.21 0 1.979-.25 2.299-.74.11-.51.17-.88.18-1.1.01-.04.01-.07 0-.08.03-.19 0-.35-.08-.5-.04-.19-.42-.36-1.15-.51.45-4.148.79-5.307 1.02-7.476 5.567-.26 8.926-1.17 10.076-2.729 1.23-1.54 1.919-3.788 2.079-6.747.15-2.59.25-5.008.28-7.257.01-.21.01-.41.01-.61.04-2.45.11-5.528.21-9.236.05-1.86.06-3.23.02-4.099-.01-.27-.02-.5-.04-.69-.01-.15-.03-.27-.05-.37z",mask:"url(#id-911829636-b)"})),f.a.createElement("path",{fill:"#FFF",d:"M36.748 6.98c.72-.11 1.39-.23 2.02-.36l-3.46-3.898A43.702 43.702 0 0031.69 7.45c1.95-.13 3.579-.28 4.888-.45a.88.88 0 01.17-.02m2.1 1.15v.02c.03-.01.06-.03.09-.04-.03 0-.06.01-.09.02m-.9.61c.05-.03.09-.05.13-.08.04-.08.08-.15.12-.22-.18.11-.36.25-.53.42l-.02.02a1.7 1.7 0 00-.09.14c.13-.09.26-.19.39-.28m.56 2.178c.13-.4.2-.72.2-.97 0-.05-.01-.1-.04-.139-.01.12-.03.25-.04.39-.04.25-.08.49-.12.72m1.469-1.25c0 .12.02.21.06.28h.02c0-.03-.01-.05-.02-.08a.764.764 0 01-.06-.2m3.459-.18c-.21-.12-.32-.18-.33-.18 0 .12.03.23.08.32.01.03.04.05.07.08.08-.09.14-.17.18-.22m-1.25-2.249c.03 0 .05.01.08.02.04-.01.08-.02.13-.02a.737.737 0 00-.21 0m-.47.85c.05-.03.11-.05.16-.08-.07-.09-.13-.18-.2-.26-.05.01-.12.03-.19.06.09.08.16.17.23.28m-.45-.58c.01.03.03.05.06.08.03-.01.06-.03.1-.04-.05-.04-.11-.05-.16-.04m-.51.44h-.08c-.05.04-.09.08-.13.12l.29.04c-.03-.05-.05-.11-.08-.16m.71 1.5h.07c0-.01-.01-.03-.02-.04l-.05.04zm-.98 2.258c-.03-.03-.05-.04-.08-.04-.04.15.01.31.14.47-.01-.15-.03-.29-.06-.43M44.686 8.4c-.08-.13-.18-.26-.29-.37.03.05.05.11.06.17.09.07.16.13.23.2"}),f.a.createElement("path",{fill:"#FFF",d:"M37.608 26.692c.16-.04.31-.02.45.06l.38.2-.06-.32c-.03-.18.01-.34.11-.47.09-.13.22-.21.38-.24.18-.04.34-.01.48.1.129.08.209.21.239.38v1.09c.25.22.41.35.49.39.56.31 1.05.41 1.46.32.409-.15.749-.5 1.039-1.05.08-.16.2-.26.35-.3.16-.05.32-.04.47.04.16.07.26.18.31.34.05.15.04.3-.05.47-.46.91-1.05 1.47-1.78 1.66-.69.229-1.5.08-2.409-.43-.11-.05-.3-.19-.55-.42l-1.09.54a.6.6 0 01-.449-.06.58.58 0 01-.22-.83c.08-.15.2-.24.36-.28l.07-.02-.13-.06a.63.63 0 01-.28-.37.487.487 0 01.06-.44c.08-.15.2-.25.37-.3zm-17.893-.21a.599.599 0 01-.14-.44c.01-.17.08-.32.21-.43a.61.61 0 01.45-.14c.17.01.32.09.43.23 1.629 1.91 3.458 2.35 5.477 1.31v-1.54c0-.16.06-.3.19-.42.12-.119.26-.179.43-.179.16 0 .3.06.43.18.12.12.18.26.18.42v.79c.19-.12.37-.24.53-.36.14-.11.29-.14.45-.1.18.01.32.09.41.24.1.12.13.27.1.44-.01.17-.09.3-.24.41-.19.129-.4.269-.61.399l.81.39c.17.07.28.18.33.34.05.15.05.3-.02.47-.07.15-.18.25-.35.3a.64.64 0 01-.47-.02l-1.51-.71c-2.609 1.41-4.968.89-7.087-1.58zm4.158-14.504c.23-.47.7-.63 1.39-.47.71.15 1.07.54 1.07 1.19 0 .03-.05.29-.15.79-.19.49-.51.73-.98.73-.75 0-1.22-.26-1.41-.79-.18-.53-.15-1.01.08-1.45zm-5.787-2.07c-.37.17-.72.41-1.05.73-.01.03-.03.05-.06.08-1.31 1.51-2.119 4.329-2.449 8.447-.35 4.438-.7 8.577-1.07 12.415v.02c-.08.91-.17 1.81-.27 2.69-.28 2.868-.29 4.927-.02 6.167l.02.04c.02.05.03.11.03.18 0 .74.49 1.679 1.47 2.808v-.02c1.09 1.15 2.979 1.91 5.668 2.3 2.869.39 6.947.47 12.235.23 5.108-.22 8.197-.98 9.286-2.27 1.08-1.39 1.69-3.408 1.83-6.057.16-2.81.25-5.418.28-7.827.04-2.469.11-5.548.21-9.256.05-1.82.06-3.16.02-4.019-1.15.91-2.76 1.69-4.829 2.34-.03.01-.06.03-.11.04-.5.15-1.05.3-1.65.45a.64.64 0 01-.409-.02h-.02l-.02-.04a.593.593 0 01-.29-.37.62.62 0 01.06-.46c.08-.15.2-.25.37-.29.15-.04.29-.07.43-.1-2.849-2.4-3.509-5.668-1.97-9.796-1.199.13-2.618.25-4.248.36-.18.01-.33-.03-.45-.14a.736.736 0 01-.21-.34c-.09 0-.2.01-.31.02-1.269.11-2.678.16-4.248.16h-.07c-.29-.01-.59-.03-.9-.06a.559.559 0 01-.409-.23.54.54 0 01-.14-.42.52.52 0 01.19-.38c-1.29-1.26-2.889-2.499-4.808-3.729-.93 1.55-1.75 3.29-2.46 5.198.11-.03.22-.02.33.02.16.05.27.16.34.32.09.15.09.31.02.47-.05.15-.16.26-.32.34z"}),f.a.createElement("path",{fill:"#464646",d:"M25.263 11.508c-.69-.16-1.16 0-1.39.47-.23.44-.26.92-.08 1.45.19.53.66.79 1.41.79.47 0 .79-.24.98-.73.1-.5.15-.76.15-.79 0-.65-.36-1.04-1.07-1.19m-5.688 14.535c-.01.16.03.31.14.44 2.12 2.468 4.478 2.988 7.087 1.579l1.51.71c.17.07.32.07.47.02.17-.05.28-.15.35-.3a.64.64 0 00.02-.47.53.53 0 00-.33-.34l-.81-.39c.21-.13.42-.27.61-.4.15-.11.23-.24.24-.41.03-.17 0-.32-.1-.44a.483.483 0 00-.41-.24.498.498 0 00-.45.1c-.16.12-.34.24-.53.36v-.79c0-.16-.06-.3-.18-.42a.615.615 0 00-.43-.18c-.17 0-.31.06-.43.18a.55.55 0 00-.19.42v1.54c-2.019 1.04-3.848.6-5.477-1.31a.581.581 0 00-.43-.23.609.609 0 00-.45.14c-.13.11-.2.26-.21.43M49.746 26.752a.587.587 0 01.82.24c.09.13.11.28.06.44a.63.63 0 01-.28.37l-.13.06.07.02c.16.04.28.13.36.28a.58.58 0 01-.22.83.6.6 0 01-.45.06l-1.09-.54c-.25.23-.44.37-.549.42-.91.51-1.72.659-2.41.43-.729-.19-1.319-.75-1.778-1.66a.567.567 0 01-.05-.47c.05-.16.15-.27.31-.34.15-.08.31-.09.47-.04.15.04.27.14.35.3.289.55.629.9 1.039 1.05.41.09.9-.01 1.46-.32.08-.04.24-.17.489-.39v-1.09c.03-.17.11-.3.24-.38.14-.11.3-.14.48-.1.16.03.29.11.38.24.1.13.14.29.11.47l-.06.32.38-.2z"}),f.a.createElement("path",{fill:"#C5C8CB",d:"M37.198 19.375h.02l-.04-.04z"}),f.a.createElement("path",{fill:"#FFF",d:"M44.315 12.358c.01-.04.02-.07.02-.1 0-.05-.01-.11-.02-.18-.07.08-.22.23-.45.44.01.04.02.08.02.12 0 .01-.01.08-.02.19.08-.06.14-.11.18-.15.13-.12.22-.23.27-.32m.45 1.76c-.03.04-.06.09-.1.14-.07.15-.19.319-.37.509-.04.05-.08.1-.12.14-.05.05-.09.12-.14.19.03-.05.07-.08.1-.11l.06-.04c.23-.27.42-.55.57-.83m-2.519-.3h-.06l-.37-.25c.05.21.1.32.13.35l.3-.1zm-.26-1.36c0 .09.05.15.16.18.13-.03.22-.05.25-.08-.25-.07-.38-.1-.41-.1m-.92 3.3c-.11.07-.23.15-.35.24h.45c.23-.2.38-.35.45-.44-.18 0-.36.07-.55.2m-1.439-1.34h-.1c.03.37.12.61.27.73 0-.27-.06-.51-.17-.73M12.128 32.47c-1.38.7-2.01 1.99-1.88 3.878.12 1.74.64 2.87 1.57 3.4-.13-1.32-.08-3.18.15-5.579.05-.57.11-1.13.16-1.7"})))};function rc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var oc=function(e){Object(s.a)(n,e);var t=rc(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.answer,n=e.params.answerId,r=e.loadAnswer,o=e.currentUser,i=e.checkIfCanConvertToVessay;t||r(n),Object(ec.a)(o,null==t?void 0:t.author)&&i(n)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.params.answerId,n=e.params.answerId,r=e.loadAnswer;n!==t&&r(n)}},{key:"render",value:function(){if(!this.props.answer)return null;var e=this.props,t=e.answer,n=e.answer.id,o=e.question,i=e.question,a=i.id,c=i.answerCount,s=i.questionType,u=e.location,l=e.isMuteSpecial,d=(e.currentUser||{}).userType;return!t.relationship.isAuthor&&t.visibleOnlyToAuthor?Object(r.b)(x,{}):Object(r.c)("div",{className:"Question-main",children:[Object(r.b)(g.a,{meta:Object(N.a)(t,o.topics)}),Object(r.b)(ia.b,{selector:[".ViewAll-QuestionMainAction",".QuestionAnswer-content",".List-item"].join(","),children:Object(r.c)("div",{className:"Question-mainColumn","data-zop-questionanswerlist":!0,children:[("guest"===d||!d)&&Object(r.c)("div",{className:"Question-mainColumnLogin",children:[Object(r.b)("div",{className:"Question-mainColumnLoginImg",children:Object(r.b)(nc,{})}),Object(r.c)("div",{className:"Question-mainColumnLoginContent",children:[Object(r.b)("div",{className:"Question-mainColumnLoginTitle",children:"登录一下，更多精彩内容等你发现"}),Object(r.b)("div",{className:"Question-mainColumnLoginDes",children:"贡献精彩回答，参与评论互动"})]}),Object(r.b)("div",{className:"Question-mainColumnLoginRightButton",children:Object(r.b)(z.b,{loginButton:Object(r.b)(B.c,{className:"Question-mainColumnLoginButton",children:"登录"})})})]}),Object(L.n)(t)||Object(L.l)(t)||c>0&&!l&&Object(r.b)(Xa,{itemNum:c,to:"/question/".concat(a),questionType:s}),Object(r.b)(ua,{question:o,location:u,answer:t}),Object(L.n)(t)||Object(L.l)(t)||Object(r.b)(fa,{question:o,answerId:n}),c>0&&!l&&Object(r.b)(Xa,{itemNum:c,to:"/question/".concat(a),questionType:s})]})}),Object(r.b)(ae.a,{children:Object(r.b)(Ya,{question:o,answer:t})})]})}}]),n}(d.Component);oc.fetchData=function(e){var t=e.dispatch,n=e.params.answerId;return t(Object(L.o)(n))};var ic=Object(b.connect)((function(e,t){var n=t.params,r=n.id,o=n.answerId,i=Object(E.bb)(e,{id:r}),a=Object(L.c)(e,{id:o}),c=Object(M.b)(e),s=(i||{}).relationship||{myAnswer:{isDelete:!1}};return{question:i,isOffice:Object(U.e)(e),answer:a&&Object.assign({},a,{isDelete:(a.relationship||{}).isAuthor&&(s.myAnswer||{}).isDeleted}),isMuteSpecial:Object(E.C)(i),currentUser:c}}),{loadAnswer:L.o,checkIfCanConvertToVessay:L.f})(oc);t.default=Object(r.c)(o.Route,{children:[Object(r.b)(o.Route,{path:"waiting",component:Ir,name:"QuestionWaiting",authRequired:!0,zaPageShowId:5541}),Object(r.b)(o.Route,{path:"later",component:Hr,name:"QuestionLater",authRequired:!0,zaPageShowId:5371}),Object(r.b)(o.Route,{path:"invited",component:Jr,name:"QuestionInvited",authRequired:!0,zaPageShowId:5543}),Object(r.c)(o.Route,{path:":id",component:Rr,name:"Question",children:[Object(r.c)(o.Route,{children:[Object(r.b)(o.IndexRoute,{component:ra,entity:"answers",resource:"answers",name:"QuestionPage",zaPageShowId:3378}),Object(r.b)(o.Route,{path:"answers/hidden",component:ra,entity:"answers",resource:"hiddenAnswers",name:"QuestionHiddenAnswers"}),Object(r.b)(o.Route,{path:"answers/updated",component:ra,resource:"updatedAnswers",name:"QuestionUpdatedAnswers"}),Object(r.b)(o.Redirect,{from:"answers/created",to:"answers/updated"})]}),Object(r.b)(o.Route,{path:"answer/:answerId",component:ic,name:"AnswerPage",zaPageShowId:2012}),Object(r.b)(o.Redirect,{from:"noti-answers",to:"."})]})]})}])]);
//# sourceMappingURL=main.question-routes.f6002054b79d3995e576.js.map