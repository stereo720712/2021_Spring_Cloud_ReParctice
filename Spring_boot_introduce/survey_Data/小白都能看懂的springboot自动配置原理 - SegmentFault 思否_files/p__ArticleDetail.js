(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[20],{"212T":function(e,t,a){},"2CDT":function(e,t,a){"use strict";function n(e){var t,a,n,i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e?window.OA_script("https://sponsor.segmentfault.com/spcjs.php?id=1&block=1&repu=".concat(r,"&v=5f0a9217&tag=").concat(escape(e))):null!==(t=window.location)&&void 0!==t&&null!==(a=t.pathname)&&void 0!==a&&a.includes("/a/")||null!==(n=window.location)&&void 0!==n&&null!==(i=n.pathname)&&void 0!==i&&i.includes("/q/")||window.OA_script("https://sponsor.segmentfault.com/spcjs.php?id=1&block=1&repu=".concat(r,"&v=5f0a9217"))}t["a"]=n},"2EET":function(e,t,a){},"47/0":function(e,t,a){},"4GjR":function(e,t,a){"use strict";var n=a("k1fw"),i=a("9og8"),r=a("tJVT"),c=a("WmNS"),o=a.n(c),l=a("q1tI"),s=a.n(l),d=a("YdHu"),u=a("97+O"),m=a("tSvB"),f=a("Dp36"),v=a("9kvl"),p=function(e){var t,a=e.id,c=e.type,v=e.actions,p=void 0===v?[]:v,b=e.member_actions,h=void 0===b?[]:b,g=e.onCallBack,E=e.sessionUser,y=e.className,O=e.qid,j=e.questionDetail,w=Object(l["useState"])({visable:!1,action:"",actionName:""}),k=Object(r["a"])(w,2),x=k[0],N=k[1],_="question"===c&&j[a]||{},S=_.site,C=void 0===S?{}:S,I=_.question;I=void 0===I?{}:I;var L=I.is_site,T=void 0===L?1:L,A=Object(l["useState"])(!1),D=Object(r["a"])(A,2),R=D[0],B=D[1],M=Object(l["useState"])(!1),z=Object(r["a"])(M,2),q=z[0],P=z[1],F=Object(l["useState"])(!1),U=Object(r["a"])(F,2),H=U[0],Y=U[1],V=function(e){Object(f["Mb"])({id:a,type:c,handle:e}).then((function(e){g(e)}))},W=function(){var e=Object(i["a"])(o.a.mark((function e(t){var i,r;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("report"!==x.action){e.next=6;break}return e.next=3,Object(f["hc"])(Object(n["a"])({object_id:a},t))["catch"]((function(e){i=null===e||void 0===e?void 0:e.object_id}));case 3:return r=e.sent,g(r||i,x.action),e.abrupt("return");case 6:if("seo"!==x.action&&"hide-setting"!==x.action){e.next=9;break}return g("",x.action),e.abrupt("return");case 9:if("delete"!==x.action){e.next=12;break}return Object(f["Nb"])(Object(n["a"])({id:a,type:c},t)).then((function(e){g(e,x.action)})),e.abrupt("return");case 12:Object(f["Mb"])(Object(n["a"])({id:a,type:c,handle:x.action},t)).then((function(e){g(e,x.action)}));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return s.a.createElement("div",{className:y},(h.length>0||p.length>0)&&s.a.createElement(s.a.Fragment,null,h.filter((function(e){return"edit"===e.type})).map((function(e){var t;switch(c){case"article":t="/a/".concat(a,"/edit");break;case"question":t="/q/".concat(a,"/edit");break;case"answer":t="/q/".concat(O,"/a-").concat(a,"/edit");break;case"product":t="/product/".concat(a,"/edit");break;case"product-score":t="/product/".concat(O,"/r-").concat(a,"/edit");break}return s.a.createElement("a",{key:e.name,className:"text-secondary sf_do",href:t},s.a.createElement("span",null,"\u7f16\u8f91"))})),((null===h||void 0===h||null===(t=h.filter((function(e){return"edit"!==e.type})))||void 0===t?void 0:t.length)>0||(null===p||void 0===p?void 0:p.length)>0)&&s.a.createElement(s.a.Fragment,null,s.a.createElement("span",{className:"split-dot"}),s.a.createElement("div",{className:"d-inline-block"},s.a.createElement(u["a"],null,s.a.createElement(u["a"].Toggle,{as:d["a"],className:"text-secondary"},s.a.createElement("span",null,"\u64cd\u4f5c")),s.a.createElement(u["a"].Menu,null,h.filter((function(e){return"edit"!==e.type})).map((function(e,t){return"reason"===e.type?s.a.createElement(u["a"].Item,{key:e.name+t,onClick:function(){N({action:e.action,visable:!0,actionName:e.name})}},e.name):"put"===e.type?s.a.createElement(u["a"].Item,{key:e.name+t,onClick:function(){return V(e.action)}},e.name):void 0})),"question"===c&&s.a.createElement(u["a"].Item,{href:"/q/".concat(a,"/revision")},"\u5386\u53f2\u7248\u672c"),"answer"===c&&s.a.createElement(u["a"].Item,{href:"/q/".concat(O,"/a-").concat(a,"/revision")},"\u5386\u53f2\u7248\u672c"),p.length>0&&h.filter((function(e){return"edit"!==e.type})).length>0&&s.a.createElement(u["a"].Divider,null),p.map((function(e,t){if("edit"===e.type){var i;switch(c){case"article":i="/a/".concat(a,"/edit");break;case"question":i="/q/".concat(a,"/edit");break;case"answer":i="/q/".concat(O,"/a-").concat(a,"/edit");break;case"product":i="/product/".concat(a,"/edit");break;case"product-score":i="/product/".concat(O,"/r-").concat(a,"/edit");break}return s.a.createElement(u["a"].Item,{key:e.name+t,href:i},e.name)}return"reason"===e.type?s.a.createElement(u["a"].Item,{key:e.name+t,onClick:function(){N({action:e.action,visable:!0,actionName:e.name})}},e.name):"put"===e.type?s.a.createElement(u["a"].Item,{key:e.name+t,onClick:function(){return V(e.action)}},e.name):"site"===e.type?s.a.createElement(u["a"].Item,{key:e.name+t,onClick:function(){B(!0),N(Object(n["a"])(Object(n["a"])({},x),{},{action:e.action}))}},e.name):"seo"===e.type?s.a.createElement(u["a"].Item,{key:e.name+t,onClick:function(){P(!0),N(Object(n["a"])(Object(n["a"])({},x),{},{action:e.action}))}},e.name):"hide"===e.type?s.a.createElement(u["a"].Item,{key:e.name+t,onClick:function(){Y(!0),N(Object(n["a"])(Object(n["a"])({},x),{},{action:e.action}))}},e.name):s.a.createElement(u["a"].Item,{key:e.name+t},e.name)}))))))),(h.length>0||(null===p||void 0===p?void 0:p.length)>0)&&s.a.createElement("span",{className:"split-dot"}),E&&s.a.createElement("a",{className:"text-secondary sf_do",href:"###",onClick:function(e){e.preventDefault(),N({action:"report",visable:!0,actionName:"\u4e3e\u62a5"})}},s.a.createElement("span",null,"\u4e3e\u62a5")),x.visable&&s.a.createElement(m["g"],{id:a,isShow:!0,action:x.action,actionName:x.actionName,setModalStatus:N,onOk:W}),R&&s.a.createElement(m["f"],{isShow:!0,setModalStatus:B,callback:W,siteId:null===C||void 0===C?void 0:C.id,isSite:T}),s.a.createElement(m["o"],{id:a,isShow:q,setModalStatus:P,callBack:W}),s.a.createElement(m["h"],{id:a,isShow:H,setModalStatus:Y,callBack:W}))};t["a"]=Object(v["connect"])((function(e){var t=e.global,a=e.question;return{sessionUser:t.sessionUser,questionDetail:a.questionDetail}}))(s.a.memo(p))},"5SRE":function(e,t,a){},"6T2I":function(e,t,a){"use strict";var n=a("q1tI"),i=a.n(n),r=a("wx14"),c=a("zLVn"),o=a("TSYQ"),l=a.n(o),s=a("vUet"),d=a("dbZe"),u={active:!1,linkProps:{}},m=i.a.forwardRef((function(e,t){var a=e.bsPrefix,n=e.active,o=e.children,u=e.className,m=e.as,f=void 0===m?"li":m,v=e.linkAs,p=void 0===v?d["a"]:v,b=e.linkProps,h=e.href,g=e.title,E=e.target,y=Object(c["a"])(e,["bsPrefix","active","children","className","as","linkAs","linkProps","href","title","target"]),O=Object(s["a"])(a,"breadcrumb-item");return i.a.createElement(f,Object(r["a"])({ref:t},y,{className:l()(O,u,{active:n}),"aria-current":n?"page":void 0}),n?o:i.a.createElement(p,Object(r["a"])({},b,{href:h,title:g,target:E}),o))}));m.displayName="BreadcrumbItem",m.defaultProps=u;var f=m,v={label:"breadcrumb",listProps:{}},p=i.a.forwardRef((function(e,t){var a=e.bsPrefix,n=e.className,o=e.listProps,d=e.children,u=e.label,m=e.as,f=void 0===m?"nav":m,v=Object(c["a"])(e,["bsPrefix","className","listProps","children","label","as"]),p=Object(s["a"])(a,"breadcrumb");return i.a.createElement(f,Object(r["a"])({"aria-label":u,className:n,ref:t},v),i.a.createElement("ol",Object(r["a"])({},o,{className:l()(p,null==o?void 0:o.className)}),d))}));p.displayName="Breadcrumb",p.defaultProps=v,p.Item=f;var b=p,h=a("9kvl"),g=function(e){var t=e.data,a=e.className,n=void 0===a?"":a,r=e.isBaiduOxApp,c=void 0!==r&&r;return c?null:i.a.createElement(b,{className:"font-size-14 px-0 my-0 ".concat(n),bsPrefix:"breadcrumb bg-transparent"},i.a.createElement(b.Item,{href:"/"},"\u9996\u9875"),t.map((function(e,a){return e.name?i.a.createElement(b.Item,{href:e.url,key:e.url,active:t.length===a+1},e.name):null})))};t["a"]=Object(h["connect"])((function(e){var t=e.global;return{isBaiduOxApp:t.isBaiduOxApp}}))(g)},"78gL":function(e,t,a){},"9F+u":function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n,i,r=a("EVdn");function c(e){function t(){r("body").find(".ad-container").each((function(e,t){var a,n;(!r(t).hasClass(".ad-close")||null!==(a=r(t))&&void 0!==a&&null!==(n=a.children())&&void 0!==n&&n.length)&&r(t).show()})),e&&r(".ad-close").parent().each((function(t,a){var n=r(a).attr("id"),i="".concat(e,"-").concat(n),c=parseInt(localStorage.getItem(i)||"0")||0;"OA_holder_5"===n&&(c=Math.max(parseInt(localStorage.getItem("article-OA_holder_5")||"0"),parseInt(localStorage.getItem("question-OA_holder_5")||"0"),parseInt(localStorage.getItem("global-OA_holder_5")||"0"))),c<Date.now()?r("#"+n).css("display","block"):r("#"+n).remove()})),r(".ad-close").css({position:"relative"}).append(r('<div class="sflex-center ad-close-div"></div>').css({width:"16px",height:"16px",position:"absolute",right:"8px",top:"8px","background-color":"rgba(0,0,0,.75)",cursor:"pointer","pointer-events":"none","border-radius":"50%"}).append(r('<span class="ad-close-span"></span>').css({width:"8px",height:"8px",display:"block","background-image":"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8'%3E%3Cpath fill='%23FFF' fill-rule='evenodd' d='M6.6667 0L8 1.3333 5.333 4 8 6.6667 6.6667 8 4 5.333 1.3333 8 0 6.6667 2.666 4 0 1.3333 1.3333 0 4 2.667 6.6667 0z'/%3E%3C/svg%3E\")","background-repeat":"no-repeat","background-position":"center","pointer-events":"auto"}))),r(".ad-close-span").on("click",(function(){var t=r(this).parents(".ad-close").parent(),a=t.attr("id");t.parent().remove(),localStorage.setItem("".concat(e,"-").concat(a),(Date.now()+864e5).toString())}))}n&&clearInterval(n),n=setInterval((function(){r(".ad-close").length>0&&(clearInterval(n),t())}),300),i&&clearInterval(i),i=setInterval((function(){r("div[id^='OA_holder_']").length>0&&(clearInterval(i),r("div[id^='OA_holder_']").each((function(e,t){var a=r(t).children("div[id^='beacon_']").length;a>0&&r(t).parent().show()})))}),500)}},"9cdK":function(e,t,a){},AINe:function(e,t,a){"use strict";var n=a("wx14"),i=a("zLVn"),r=a("TSYQ"),c=a.n(r),o=a("q1tI"),l=a.n(o),s=(a("BO/t"),a("vUet")),d={placement:"right"},u=l.a.forwardRef((function(e,t){var a=e.bsPrefix,r=e.placement,o=e.className,d=e.style,u=e.children,m=e.arrowProps,f=(e.popper,e.show,Object(i["a"])(e,["bsPrefix","placement","className","style","children","arrowProps","popper","show"]));a=Object(s["a"])(a,"tooltip");var v=(null==r?void 0:r.split("-"))||[],p=v[0];return l.a.createElement("div",Object(n["a"])({ref:t,style:d,role:"tooltip","x-placement":p,className:c()(o,a,"bs-tooltip-"+p)},f),l.a.createElement("div",Object(n["a"])({className:"arrow"},m)),l.a.createElement("div",{className:a+"-inner"},u))}));u.defaultProps=d,u.displayName="Tooltip",t["a"]=u},DZHF:function(e,t,a){"use strict";var n=a("wx14"),i=a("zLVn"),r=a("TSYQ"),c=a.n(r),o=a("q1tI"),l=a.n(o),s=a("y8DL"),d=a("vUet"),u=a("ILyh"),m=l.a.createContext(null);m.displayName="AccordionContext";var f=m;function v(e,t){var a=Object(o["useContext"])(f),n=Object(o["useContext"])(u["a"]);return function(i){var r=e===a?null:e;n&&n(r,i),t&&t(i)}}var p=l.a.forwardRef((function(e,t){var a=e.as,r=void 0===a?"button":a,c=e.children,o=e.eventKey,s=e.onClick,d=Object(i["a"])(e,["as","children","eventKey","onClick"]),u=v(o,s);return"button"===r&&(d.type="button"),l.a.createElement(r,Object(n["a"])({ref:t,onClick:u},d),c)})),b=p,h=a("vYJ8"),g=l.a.forwardRef((function(e,t){var a=e.children,r=e.eventKey,c=Object(i["a"])(e,["children","eventKey"]),s=Object(o["useContext"])(f);return l.a.createElement(u["a"].Provider,{value:null},l.a.createElement(h["a"],Object(n["a"])({ref:t,in:s===r},c),l.a.createElement("div",null,l.a.Children.only(a))))}));g.displayName="AccordionCollapse";var E=g,y=l.a.forwardRef((function(e,t){var a=Object(s["a"])(e,{activeKey:"onSelect"}),r=a.as,o=void 0===r?"div":r,m=a.activeKey,v=a.bsPrefix,p=a.children,b=a.className,h=a.onSelect,g=Object(i["a"])(a,["as","activeKey","bsPrefix","children","className","onSelect"]),E=c()(b,Object(d["a"])(v,"accordion"));return l.a.createElement(f.Provider,{value:m||null},l.a.createElement(u["a"].Provider,{value:h||null},l.a.createElement(o,Object(n["a"])({ref:t},g,{className:E}),p)))}));y.displayName="Accordion",y.Toggle=b,y.Collapse=E;t["a"]=y},GemG:function(e,t,a){var n,i,r;(function(a,c){i=[e,t],n=c,r="function"===typeof n?n.apply(t,i):n,void 0===r||(e.exports=r)})(0,(function(e,t){"use strict";var a="function"===typeof Map?new Map:function(){var e=[],t=[];return{has:function(t){return e.indexOf(t)>-1},get:function(a){return t[e.indexOf(a)]},set:function(a,n){-1===e.indexOf(a)&&(e.push(a),t.push(n))},delete:function(a){var n=e.indexOf(a);n>-1&&(e.splice(n,1),t.splice(n,1))}}}(),n=function(e){return new Event(e,{bubbles:!0})};try{new Event("test")}catch(l){n=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!1),t}}function i(e){if(e&&e.nodeName&&"TEXTAREA"===e.nodeName&&!a.has(e)){var t=null,i=null,r=null,c=function(){e.clientWidth!==i&&m()},o=function(t){window.removeEventListener("resize",c,!1),e.removeEventListener("input",m,!1),e.removeEventListener("keyup",m,!1),e.removeEventListener("autosize:destroy",o,!1),e.removeEventListener("autosize:update",m,!1),Object.keys(t).forEach((function(a){e.style[a]=t[a]})),a.delete(e)}.bind(e,{height:e.style.height,resize:e.style.resize,overflowY:e.style.overflowY,overflowX:e.style.overflowX,wordWrap:e.style.wordWrap});e.addEventListener("autosize:destroy",o,!1),"onpropertychange"in e&&"oninput"in e&&e.addEventListener("keyup",m,!1),window.addEventListener("resize",c,!1),e.addEventListener("input",m,!1),e.addEventListener("autosize:update",m,!1),e.style.overflowX="hidden",e.style.wordWrap="break-word",a.set(e,{destroy:o,update:m}),l()}function l(){var a=window.getComputedStyle(e,null);"vertical"===a.resize?e.style.resize="none":"both"===a.resize&&(e.style.resize="horizontal"),t="content-box"===a.boxSizing?-(parseFloat(a.paddingTop)+parseFloat(a.paddingBottom)):parseFloat(a.borderTopWidth)+parseFloat(a.borderBottomWidth),isNaN(t)&&(t=0),m()}function s(t){var a=e.style.width;e.style.width="0px",e.offsetWidth,e.style.width=a,e.style.overflowY=t}function d(e){var t=[];while(e&&e.parentNode&&e.parentNode instanceof Element)e.parentNode.scrollTop&&t.push({node:e.parentNode,scrollTop:e.parentNode.scrollTop}),e=e.parentNode;return t}function u(){if(0!==e.scrollHeight){var a=d(e),n=document.documentElement&&document.documentElement.scrollTop;e.style.height="",e.style.height=e.scrollHeight+t+"px",i=e.clientWidth,a.forEach((function(e){e.node.scrollTop=e.scrollTop})),n&&(document.documentElement.scrollTop=n)}}function m(){u();var t=Math.round(parseFloat(e.style.height)),a=window.getComputedStyle(e,null),i="content-box"===a.boxSizing?Math.round(parseFloat(a.height)):e.offsetHeight;if(i<t?"hidden"===a.overflowY&&(s("scroll"),u(),i="content-box"===a.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight):"hidden"!==a.overflowY&&(s("hidden"),u(),i="content-box"===a.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight),r!==i){r=i;var c=n("autosize:resized");try{e.dispatchEvent(c)}catch(o){}}}}function r(e){var t=a.get(e);t&&t.destroy()}function c(e){var t=a.get(e);t&&t.update()}var o=null;"undefined"===typeof window||"function"!==typeof window.getComputedStyle?(o=function(e){return e},o.destroy=function(e){return e},o.update=function(e){return e}):(o=function(e,t){return e&&Array.prototype.forEach.call(e.length?e:[e],(function(e){return i(e,t)})),e},o.destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],r),e},o.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],c),e}),t.default=o,e.exports=t["default"]}))},HToz:function(e,t,a){!function(t,a){e.exports=a()}(0,(function(){"use strict";function e(){return(e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var t="undefined"!=typeof window,a=t&&!("onscroll"in window)||"undefined"!=typeof navigator&&/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),n=t&&"IntersectionObserver"in window,i=t&&"classList"in document.createElement("p"),r=t&&window.devicePixelRatio>1,c={elements_selector:".lazy",container:a||t?document:null,threshold:300,thresholds:null,data_src:"src",data_srcset:"srcset",data_sizes:"sizes",data_bg:"bg",data_bg_hidpi:"bg-hidpi",data_bg_multi:"bg-multi",data_bg_multi_hidpi:"bg-multi-hidpi",data_poster:"poster",class_applied:"applied",class_loading:"loading",class_loaded:"loaded",class_error:"error",class_entered:"entered",class_exited:"exited",unobserve_completed:!0,unobserve_entered:!1,cancel_on_exit:!0,callback_enter:null,callback_exit:null,callback_applied:null,callback_loading:null,callback_loaded:null,callback_error:null,callback_finish:null,callback_cancel:null,use_native:!1},o=function(t){return e({},c,t)},l=function(e,t){var a,n="LazyLoad::Initialized",i=new e(t);try{a=new CustomEvent(n,{detail:{instance:i}})}catch(e){(a=document.createEvent("CustomEvent")).initCustomEvent(n,!1,!1,{instance:i})}window.dispatchEvent(a)},s="loading",d="loaded",u="applied",m="error",f="native",v="data-",p="ll-status",b=function(e,t){return e.getAttribute(v+t)},h=function(e){return b(e,p)},g=function(e,t){return function(e,t,a){var n="data-ll-status";null!==a?e.setAttribute(n,a):e.removeAttribute(n)}(e,0,t)},E=function(e){return g(e,null)},y=function(e){return null===h(e)},O=function(e){return h(e)===f},j=[s,d,u,m],w=function(e,t,a,n){e&&(void 0===n?void 0===a?e(t):e(t,a):e(t,a,n))},k=function(e,t){i?e.classList.add(t):e.className+=(e.className?" ":"")+t},x=function(e,t){i?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\s+)"+t+"(\\s+|$)")," ").replace(/^\s+/,"").replace(/\s+$/,"")},N=function(e){return e.llTempImage},_=function(e,t){if(t){var a=t._observer;a&&a.unobserve(e)}},S=function(e,t){e&&(e.loadingCount+=t)},C=function(e,t){e&&(e.toLoadCount=t)},I=function(e){for(var t,a=[],n=0;t=e.children[n];n+=1)"SOURCE"===t.tagName&&a.push(t);return a},L=function(e,t,a){a&&e.setAttribute(t,a)},T=function(e,t){e.removeAttribute(t)},A=function(e){return!!e.llOriginalAttrs},D=function(e){if(!A(e)){var t={};t.src=e.getAttribute("src"),t.srcset=e.getAttribute("srcset"),t.sizes=e.getAttribute("sizes"),e.llOriginalAttrs=t}},R=function(e){if(A(e)){var t=e.llOriginalAttrs;L(e,"src",t.src),L(e,"srcset",t.srcset),L(e,"sizes",t.sizes)}},B=function(e,t){L(e,"sizes",b(e,t.data_sizes)),L(e,"srcset",b(e,t.data_srcset)),L(e,"src",b(e,t.data_src))},M=function(e){T(e,"src"),T(e,"srcset"),T(e,"sizes")},z=function(e,t){var a=e.parentNode;a&&"PICTURE"===a.tagName&&I(a).forEach(t)},q={IMG:function(e,t){z(e,(function(e){D(e),B(e,t)})),D(e),B(e,t)},IFRAME:function(e,t){L(e,"src",b(e,t.data_src))},VIDEO:function(e,t){!function(e,a){I(e).forEach((function(e){L(e,"src",b(e,t.data_src))}))}(e),L(e,"poster",b(e,t.data_poster)),L(e,"src",b(e,t.data_src)),e.load()}},P=function(e,t){var a=q[e.tagName];a&&a(e,t)},F=function(e,t,a){S(a,1),k(e,t.class_loading),g(e,s),w(t.callback_loading,e,a)},U=["IMG","IFRAME","VIDEO"],H=function(e,t){!t||function(e){return e.loadingCount>0}(t)||function(e){return e.toLoadCount>0}(t)||w(e.callback_finish,t)},Y=function(e,t,a){e.addEventListener(t,a),e.llEvLisnrs[t]=a},V=function(e,t,a){e.removeEventListener(t,a)},W=function(e){return!!e.llEvLisnrs},K=function(e){if(W(e)){var t=e.llEvLisnrs;for(var a in t){var n=t[a];V(e,a,n)}delete e.llEvLisnrs}},$=function(e,t,a){!function(e){delete e.llTempImage}(e),S(a,-1),function(e){e&&(e.toLoadCount-=1)}(a),x(e,t.class_loading),t.unobserve_completed&&_(e,a)},J=function(e,t,a){var n=N(e)||e;W(n)||function(e,t,a){W(e)||(e.llEvLisnrs={});var n="VIDEO"===e.tagName?"loadeddata":"load";Y(e,n,t),Y(e,"error",a)}(n,(function(i){!function(e,t,a,n){var i=O(t);$(t,a,n),k(t,a.class_loaded),g(t,d),w(a.callback_loaded,t,n),i||H(a,n)}(0,e,t,a),K(n)}),(function(i){!function(e,t,a,n){var i=O(t);$(t,a,n),k(t,a.class_error),g(t,m),w(a.callback_error,t,n),i||H(a,n)}(0,e,t,a),K(n)}))},G=function(e,t,a){!function(e){e.llTempImage=document.createElement("IMG")}(e),J(e,t,a),function(e,t,a){var n=b(e,t.data_bg),i=b(e,t.data_bg_hidpi),c=r&&i?i:n;c&&(e.style.backgroundImage='url("'.concat(c,'")'),N(e).setAttribute("src",c),F(e,t,a))}(e,t,a),function(e,t,a){var n=b(e,t.data_bg_multi),i=b(e,t.data_bg_multi_hidpi),c=r&&i?i:n;c&&(e.style.backgroundImage=c,function(e,t,a){k(e,t.class_applied),g(e,u),t.unobserve_completed&&_(e,t),w(t.callback_applied,e,a)}(e,t,a))}(e,t,a)},Q=function(e,t,a){!function(e){return U.indexOf(e.tagName)>-1}(e)?G(e,t,a):function(e,t,a){J(e,t,a),P(e,t),F(e,t,a)}(e,t,a)},X=["IMG","IFRAME"],Z=function(e){return e.use_native&&"loading"in HTMLImageElement.prototype},ee=function(e,t,a){e.forEach((function(e){return function(e){return e.isIntersecting||e.intersectionRatio>0}(e)?function(e,t,a,n){g(e,"entered"),k(e,a.class_entered),x(e,a.class_exited),function(e,t,a){t.unobserve_entered&&_(e,a)}(e,a,n),w(a.callback_enter,e,t,n),function(e){return j.indexOf(h(e))>=0}(e)||Q(e,a,n)}(e.target,e,t,a):function(e,t,a,n){y(e)||(k(e,a.class_exited),function(e,t,a,n){a.cancel_on_exit&&function(e){return h(e)===s}(e)&&"IMG"===e.tagName&&(K(e),function(e){z(e,(function(e){M(e)})),M(e)}(e),function(e){z(e,(function(e){R(e)})),R(e)}(e),x(e,a.class_loading),S(n,-1),E(e),w(a.callback_cancel,e,t,n))}(e,t,a,n),w(a.callback_exit,e,t,n))}(e.target,e,t,a)}))},te=function(e){return Array.prototype.slice.call(e)},ae=function(e){return e.container.querySelectorAll(e.elements_selector)},ne=function(e){return function(e){return h(e)===m}(e)},ie=function(e,t){return function(e){return te(e).filter(y)}(e||ae(t))},re=function(e,a){var i=o(e);this._settings=i,this.loadingCount=0,function(e,t){n&&!Z(e)&&(t._observer=new IntersectionObserver((function(a){ee(a,e,t)}),function(e){return{root:e.container===document?null:e.container,rootMargin:e.thresholds||e.threshold+"px"}}(e)))}(i,this),function(e,a){t&&window.addEventListener("online",(function(){!function(e,t){var a;(a=ae(e),te(a).filter(ne)).forEach((function(t){x(t,e.class_error),E(t)})),t.update()}(e,a)}))}(i,this),this.update(a)};return re.prototype={update:function(e){var t,i,r=this._settings,c=ie(e,r);C(this,c.length),!a&&n?Z(r)?function(e,t,a){e.forEach((function(e){-1!==X.indexOf(e.tagName)&&(e.setAttribute("loading","lazy"),function(e,t,a){J(e,t,a),P(e,t),g(e,f)}(e,t,a))})),C(a,0)}(c,r,this):(i=c,function(e){e.disconnect()}(t=this._observer),function(e,t){t.forEach((function(t){e.observe(t)}))}(t,i)):this.loadAll(c)},destroy:function(){this._observer&&this._observer.disconnect(),ae(this._settings).forEach((function(e){delete e.llOriginalAttrs})),delete this._observer,delete this._settings,delete this.loadingCount,delete this.toLoadCount},loadAll:function(e){var t=this,a=this._settings;ie(e,a).forEach((function(e){_(e,t),Q(e,a,t)}))}},re.load=function(e,t){var a=o(t);Q(e,a)},re.resetStatus=function(e){E(e)},t&&function(e,t){if(t)if(t.length)for(var a,n=0;a=t[n];n+=1)l(e,a);else l(e,t)}(re,window.lazyLoadOptions),re}))},PFmq:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var n=a("rAM+"),i=a("k1fw"),r=a("9og8"),c=a("WmNS"),o=a.n(c),l=a("LvDl"),s=a("6Yt9"),d=a("Dp36");function u(e){return!!e&&Boolean(e.match(/(Baiduspider|Googlebot)/))}function m(e,t){return e instanceof Function?(t=e,e={}):e||(e={}),function(){var a=Object(r["a"])(o.a.mark((function a(r){var c,m,f,v,p,b,h,g,E,y,O,j,w,k,x,N,_,S,C;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(r.initResult||(r.initResult={}),h=new d["y"]({token:null===(c=r.serverData)||void 0===c?void 0:c.Token,userAgent:null===(m=r.serverData)||void 0===m?void 0:m.userAgent}),g=r.store,E=r.isServer?null===(f=r.serverData)||void 0===f?void 0:f.Token:Object(s["b"])(),r.isServer&&!Object(l["isEmpty"])(r.serverData)&&g.dispatch({type:"global/saveServerData",payload:r.serverData}),g.dispatch({type:"global/saveSessionInfo",payload:Object(i["a"])(Object(i["a"])({},(null===(v=g.getState().global)||void 0===v?void 0:v.sessionInfo)||{}),{},{key:E})}),!r.isServer||u(null===(p=r.serverData)||void 0===p?void 0:p.userAgent)){a.next=13;break}return a.next=9,h.getTemporaryToken();case 9:y=a.sent,r.initResult.eggCtx&&r.initResult.eggCtx.cookies.set("PHPSESSID",y.key,Object(i["a"])({httpOnly:!1,signed:!1,maxAge:6048e5},{domain:".".concat(r.initResult.eggCtx.request.host)})),g.dispatch({type:"global/saveSessionInfo",payload:y});case 13:if(O=g.getState(),j=(null===(b=O.global)||void 0===b?void 0:b.sessionInfo)||{},!r.isServer||!j.login){a.next=20;break}return a.next=18,h.getUser();case 18:w=a.sent,g.dispatch({type:"global/saveUser",payload:w});case 20:if(k={},"object"===typeof e&&(k=e),k.requireLogin&&!j.login?(r.initResult.action="redirect",r.initResult.param="/user/login"):k.requireNotLogin&&j.login&&(r.initResult.action="redirect",r.initResult.param="/"),g.dispatch({type:"global/saveRoute",payload:Object(i["a"])({customLayout:r.route.customLayout||!1},r.initResult)}),!t){a.next=30;break}return a.next=27,t(r);case 27:a.t0=a.sent,a.next=31;break;case 30:a.t0=O;case 31:if(x=a.t0,!k.requireState){a.next=52;break}N=Object(n["a"])(k.requireState),a.prev=34,N.s();case 36:if((_=N.n()).done){a.next=44;break}if(S=_.value,C=Object(l["get"])(x,S),C&&!Object(l["isEmpty"])(C)){a.next=42;break}return r.initResult.action="404",a.abrupt("break",44);case 42:a.next=36;break;case 44:a.next=49;break;case 46:a.prev=46,a.t1=a["catch"](34),N.e(a.t1);case 49:return a.prev=49,N.f(),a.finish(49);case 52:return a.abrupt("return",x);case 53:case"end":return a.stop()}}),a,null,[[34,46,49,52]])})));return function(e){return a.apply(this,arguments)}}()}},PmrS:function(e,t,a){},QgiU:function(e,t,a){!function(t,a){e.exports=a()}(0,(function(){"use strict";return function(e,t,a){e=e||{};var n=t.prototype,i={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function r(e,t,a,i){return n.fromToBase(e,t,a,i)}a.en.relativeTime=i,n.fromToBase=function(t,n,r,c,o){for(var l,s,d,u=r.$locale().relativeTime||i,m=e.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],f=m.length,v=0;v<f;v+=1){var p=m[v];p.d&&(l=c?a(t).diff(r,p.d,!0):r.diff(t,p.d,!0));var b=(e.rounding||Math.round)(Math.abs(l));if(d=l>0,b<=p.r||!p.r){b<=1&&v>0&&(p=m[v-1]);var h=u[p.l];o&&(b=o(""+b)),s="string"==typeof h?h.replace("%d",b):h(b,n,p.l,d);break}}if(n)return s;var g=d?u.future:u.past;return"function"==typeof g?g(s):g.replace("%s",s)},n.to=function(e,t){return r(e,t,this,!0)},n.from=function(e,t){return r(e,t,this)};var c=function(e){return e.$u?a.utc():a()};n.toNow=function(e){return this.to(c(this),e)},n.fromNow=function(e){return this.from(c(this),e)}}}))},SoKV:function(e,t,a){},YKRR:function(e,t,a){"use strict";var n=a("tJVT"),i=a("q1tI"),r=a.n(i),c=a("EVdn"),o=function(){var e=function(){c("body,html").animate({scrollTop:0})},t=Object(i["useState"])(0),a=Object(n["a"])(t,2),o=a[0],l=a[1],s=function(){l(window.scrollY)};return Object(i["useEffect"])((function(){return window.addEventListener("scroll",s),function(){window.removeEventListener("scroll",s)}})),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"fixedTools",className:"position-fixed d-none ".concat(o>720?"d-xl-flex":""),style:{right:"24px",bottom:"24px"}},r.a.createElement("button",{type:"button",className:"btn btn-light",title:"\u56de\u9876\u90e8",onClick:e},"\u25b2")))};t["a"]=o},YdHu:function(e,t,a){"use strict";var n=a("q1tI"),i=a.n(n),r=function(e,t){var a=e.children,n=e.onClick,r=e.className,c=e.domType,o=void 0===c?"a":c;return"a"===o?i.a.createElement("a",{href:"###",className:r,ref:t,onClick:function(e){e.preventDefault(),n(e)},"aria-label":"\u5206\u4eab"},a):"button"===o?i.a.createElement("button",{className:r,ref:t,onClick:function(e){e.preventDefault(),n(e)}}):i.a.createElement("div",{className:r,ref:t,onClick:function(e){e.preventDefault(),n(e)}},a)};t["a"]=i.a.forwardRef(r)},cor7:function(e,t,a){"use strict";var n=a("0Owb"),i=a("9og8"),r=a("jrin"),c=a("k1fw"),o=a("oBTY"),l=a("tJVT"),s=a("WmNS"),d=a.n(s),u=a("q1tI"),m=a.n(u),f=a("6xyR"),v=a("kpTP"),p=a("sjrs"),b=a("NAXS"),h=a("GemG"),g=a.n(h),E=a("LvDl"),y=a("Dp36"),O=a("tSvB"),j=a("QojX"),w=a("HRRZ"),k=(a("gZRy"),function(e){var t=e.isChild,a=void 0!==t&&t,n=e.item,i=e.parentItem,r=e.onChangeOfComment,o=e.onComment,l=Object(u["useRef"])(null);return Object(u["useEffect"])((function(){if(l.current&&(g()(l.current),n.original_text)){var e=n.original_text.length;l.current.setSelectionRange(e,e)}}),[l]),m.a.createElement(j["a"],{className:"edit-form ".concat(a?"edit-reply-form":"")},m.a.createElement(w["a"],null,m.a.createElement(j["a"].Control,{as:"textarea",className:"comment-text",rows:1,ref:l,autoFocus:!0,value:n.original_text,size:"sm",onChange:function(e){i?r(Object(c["a"])(Object(c["a"])({},n),{},{original_text:e.target.value}),i):r(Object(c["a"])(Object(c["a"])({},n),{},{original_text:e.target.value}))},placeholder:"\u64b0\u5199\u8bc4\u8bba ...",isInvalid:n.isInvalid}),m.a.createElement(j["a"].Control.Feedback,{type:"invalid"},n.errorMsg)),m.a.createElement("div",{className:"my-3 d-flex align-content-center justify-content-end"},m.a.createElement("button",{type:"button",className:"btn btn-outline-secondary btn-sm mr-2 edit-top-comment-cancel-btn cancelEdit",onClick:function(){i?r(Object(c["a"])(Object(c["a"])({},n),{},{isEdit:!1}),i):r(Object(c["a"])(Object(c["a"])({},n),{},{isEdit:!1}))}},"\u53d6\u6d88"),m.a.createElement("button",{type:"button",className:"btn btn-primary btn-sm",onClick:function(){return o({item:n,parentItem:i})},disabled:!n.original_text},"\u63d0\u4ea4")))}),x=m.a.memo(k),N=a("TUci"),_=a("wwbV"),S=a("97+O"),C=a("YdHu"),I=(a("212T"),a("9kvl")),L=5,T=function(e){var t=e.element,a=e.children,n=e.pageUsers,i=Object(u["useState"])([]),r=Object(l["a"])(i,2),c=r[0],s=r[1],d=Object(u["useRef"])(null),f=Object(u["useState"])(""),v=Object(l["a"])(f,2),p=v[0],b=v[1],h=Object(u["useState"])([]),g=Object(l["a"])(h,2),O=g[0],j=g[1],w=Object(u["useState"])(0),k=Object(l["a"])(w,2),x=k[0],N=k[1],_=Object(u["useState"])(!1),I=Object(l["a"])(_,2),T=I[0],A=I[1];Object(u["useEffect"])((function(){if(t)return t.addEventListener("input",D),function(){t.removeEventListener("input",D)}}),[t]),Object(u["useEffect"])((function(){var e=n[window.location.pathname];j(Object(E["uniqBy"])(e?[].concat(Object(o["a"])(e),Object(o["a"])(c)):Object(o["a"])(c),"id"))}),[n,c,p]);var D=function(){var e=t.value,a=t.selectionStart,n=void 0===a?0:a;if(e.indexOf("@")<0&&b(""),n){var i=e.substring(e.substring(0,n).lastIndexOf("@"),n);i.substring(i.lastIndexOf(" "),n).indexOf("@")<0||(b(i.substring(1)),i.substring(1)&&(T||(A(!0),Object(y["mc"])().then((function(e){s(e)})))))}},R=function(e){var a=t.value,n=t.selectionStart,i=void 0===n?0:n;if(i){var r=a.substring(a.substring(0,i).lastIndexOf("@"),i),c="@".concat(null===e||void 0===e?void 0:e.name,"[").concat(null===e||void 0===e?void 0:e.slug,"] ");t.value="".concat(a.substring(0,a.substring(0,i).lastIndexOf("@"))).concat(c).concat(a.substring(i)),j([]),b("");var o=i+c.length-r.length;t.setSelectionRange(o,o),t.focus()}},B=p?O.filter((function(e){return 0===e.name.indexOf(p)||0===e.slug.indexOf(p)})):[],M=function(e){var t=e.keyCode;if(38===t&&x>0&&(e.preventDefault(),N(x-1)),40===t&&x<B.length-1&&(e.preventDefault(),N(x+1)),13===t&&x>-1&&x<=B.length-1){e.preventDefault();var a=B[x];R(a),N(0)}};return m.a.createElement(S["a"],{className:"mentions-wrap",show:B.length>0,onKeyDown:M},a,m.a.createElement(S["a"].Toggle,{as:C["a"],domType:"div"}),m.a.createElement(S["a"].Menu,{className:B.length>0?"visabled":"hidden",ref:d},B.filter((function(e,t){return t<L})).map((function(e,t){return m.a.createElement(S["a"].Item,{className:"".concat(x===t?"bg-gray-200":""),key:t,onClick:function(){return R(e)}},m.a.createElement("img",{className:"avatar-24 mr-2",src:e.avatar_url||"https://image-static.segmentfault.com/317/931/3179314346-5f61e47221e07"}),m.a.createElement("span",{className:"text-body mr-1"},e.name),m.a.createElement("small",{className:"text-secondary"},"@",e.slug))}))))},A=Object(I["connect"])((function(e){var t=e.global;return{pageUsers:t.pageUsers}}))(m.a.memo(T)),D=!0,R=function(e){var t=e.item,a=e.parentItem,n=e.onChangeOfComment,i=e.onComment,r=e.className,o=e.onEditComment,s=Object(u["useState"])(!1),d=Object(l["a"])(s,2),f=d[0],v=d[1],p=Object(u["useRef"])(null),b=Object(u["useState"])({isInvalid:!1,msg:""}),h=Object(l["a"])(b,2),E=h[0],y=h[1];Object(u["useEffect"])((function(){if(null!==p&&void 0!==p&&p.current&&(g()(p.current),t.commentVal)){var e=t.commentVal.length;p.current.setSelectionRange(e,e)}}),[p]);var O=function(e){y(e)},k=function(e){var n=e.keyCode;13===n&&(e.ctrlKey||e.metaKey)&&D&&(D=!1,setTimeout((function(){D=!0}),700),i({item:t,parentItem:a,callback:O}))};return m.a.createElement(j["a"],{className:"card-body add-comment-form ".concat(r),onKeyDown:k},m.a.createElement(w["a"],null,m.a.createElement("small",{className:"text-secondary"},"\u56de\u590d"," ",m.a.createElement("a",{href:t.user.url,onClick:function(e){o(t,a||"",e)}},t.user.name," \xd7")),m.a.createElement(A,{element:p.current},m.a.createElement(j["a"].Control,{as:"textarea",value:t.commentVal,autoFocus:!0,ref:p,size:"sm",rows:1,onChange:function(e){a?n(Object(c["a"])(Object(c["a"])({},t),{},{commentVal:e.target.value}),a):n(Object(c["a"])(Object(c["a"])({},t),{},{commentVal:e.target.value}))},className:"form-control form-control-sm comment-reply mt-2",placeholder:"\u64b0\u5199\u8bc4\u8bba \u2026",isInvalid:E.isInvalid})),m.a.createElement(j["a"].Control.Feedback,{type:"invalid"},E.msg)),m.a.createElement("div",{className:"d-flex justify-content-end align-items-center"},m.a.createElement("a",{href:"###",className:"mr-3",onClick:function(e){e.preventDefault(),v(!f)},tabIndex:-1},m.a.createElement("i",{className:"far fa-info-circle text-secondary"})),m.a.createElement(_["a"],{size:"sm",className:"float-right",onClick:function(){return i({item:t,parentItem:a,callback:O})},disabled:!t.commentVal},"\u63d0\u4ea4\u8bc4\u8bba")),m.a.createElement(N["a"],{show:f,variant:"info",className:"mt-3 my-0 font-size-14"},"\u8bc4\u8bba\u652f\u6301\u90e8\u5206 Markdown \u8bed\u6cd5\uff1a",m.a.createElement("code",null,"**\u7c97\u4f53** _\u659c\u4f53_ [\u94fe\u63a5](http://example.com) `\u4ee3\u7801` - \u5217\u8868 > \u5f15\u7528"),"\u3002\u4f60\u8fd8\u53ef\u4ee5\u4f7f\u7528 ",m.a.createElement("code",null,"@ "),"\u6765\u901a\u77e5\u5176\u4ed6\u7528\u6237\u3002"))},B=m.a.memo(R),M=a("6Yt9"),z=(a("9cdK"),a("0lfv")),q=!0,P=function(e){var t=e.commentContent,a=e.isShowComment,n=e.inputRef,i=e.setCommentContent,r=e.onComment,c=e.sessionUser,o=Object(u["useState"])(!1),s=Object(l["a"])(o,2),d=s[0],v=s[1],p=Object(u["useState"])({isInvalid:!1,msg:""}),b=Object(l["a"])(p,2),h=b[0],g=b[1];Object(u["useEffect"])((function(){a&&n.current.focus()}),[a]);var E=function(e){g(e)},y=function(e){var t=e.keyCode;13===t&&(e.ctrlKey||e.metaKey)&&q&&(q=!1,setTimeout((function(){q=!0}),700),r({item:"comment",callback:E}))};return m.a.createElement(f["a"],{className:"bg-light border-0 mt-2 ".concat(a?"":"hidden"),onKeyDown:y,tabIndex:2},m.a.createElement(f["a"].Body,null,m.a.createElement("div",{className:"media-body"},m.a.createElement(w["a"],null,m.a.createElement(A,{element:n.current},m.a.createElement(j["a"].Control,{as:"textarea",rows:1,ref:n,value:t,size:"sm",onChange:function(e){i(e.target.value)},className:"comment-text",placeholder:"\u8be2\u95ee\u7ec6\u8282\u6216\u63d0\u51fa\u4fee\u6539\u610f\u89c1",onFocus:function(e){c||(e.preventDefault(),Object(M["c"])(),n.current.blur())},isInvalid:h.isInvalid})),m.a.createElement(j["a"].Control.Feedback,{type:"invalid"},h.msg)),m.a.createElement("div",{className:"d-flex justify-content-between align-items-center"},m.a.createElement("small",{className:"text-secondary"},"\u5982\u679c\u5bf9\u4f60\u6709\u5e2e\u52a9\uff0c\u8bb0\u5f97\u70b9\u8d5e\u652f\u6301"),m.a.createElement("div",{className:"sflex-center"},m.a.createElement("a",{href:"###",className:"mr-3",onClick:function(e){e.preventDefault(),v(!d)},"aria-label":"\u63d0\u793a",tabIndex:-1},m.a.createElement("i",{className:"far fa-info-circle text-secondary"})),m.a.createElement(_["a"],{size:"sm",className:"float-right",onClick:function(){return r({item:"comment",callback:E})},disabled:!t},"\u63d0\u4ea4\u8bc4\u8bba")))),m.a.createElement(N["a"],{show:d,variant:"info",className:"mt-3 my-0 font-size-14"},"\u8bc4\u8bba\u652f\u6301\u90e8\u5206 Markdown \u8bed\u6cd5\uff1a",m.a.createElement("code",null,"**\u7c97\u4f53** _\u659c\u4f53_ [\u94fe\u63a5](http://example.com) `\u4ee3\u7801` - \u5217\u8868 > \u5f15\u7528"),"\u3002\u4f60\u8fd8\u53ef\u4ee5\u4f7f\u7528 ",m.a.createElement("code",null,"@ "),"\u6765\u901a\u77e5\u5176\u4ed6\u7528\u6237\u3002")))},F=Object(I["connect"])((function(e){var t=e.global;return{sessionUser:t.sessionUser}}))(m.a.memo(P)),U=a("pJDg"),H=a("cWnB"),Y=function(e){var t=e.allTotal,a=e.sort,n=e.setSort,i=e.aId;return m.a.createElement(f["a"].Header,{className:"d-flex align-items-center justify-content-between bg-transparent"},m.a.createElement("h5",{className:"mb-0"},t," \u6761\u8bc4\u8bba"),m.a.createElement(U["a"],{"aria-label":"Basic"},m.a.createElement(H["a"],{as:"a",href:"/a/".concat(i,"?sort=votes"),size:"sm",variant:"votes"===a?"secondary":"outline-secondary",onClick:function(e){e.preventDefault(),n("votes")}},"\u5f97\u7968\u6570"),m.a.createElement(H["a"],{as:"a",href:"/a/".concat(i,"?sort=newest"),size:"sm",variant:"newest"===a?"secondary":"outline-secondary",onClick:function(e){e.preventDefault(),n("newest")}},"\u6700\u65b0")))},V=m.a.memo(Y),W=!0,K=function(e){var t,a=e.commentContent,n=e.inputRef,i=e.setCommentContent,r=e.onComment,c=e.sessionUser,o=Object(u["useState"])(!1),s=Object(l["a"])(o,2),d=s[0],f=s[1],p=Object(u["useState"])({isInvalid:!1,msg:""}),b=Object(l["a"])(p,2),h=b[0],g=b[1],E=function(e){g(e)},y=function(e){var t=e.keyCode;13===t&&(e.ctrlKey||e.metaKey)&&W&&a&&(W=!1,setTimeout((function(){W=!0}),700),r({item:"comment",callback:E}))};return m.a.createElement(m.a.Fragment,null,m.a.createElement(v["a"],{className:"mb-4",onKeyDown:y,tabIndex:1},m.a.createElement("img",{src:(null===c||void 0===c||null===(t=c.user)||void 0===t?void 0:t.avatar_url)||"https://image-static.segmentfault.com/317/931/3179314346-5f61e47221e07",className:"rounded-circle mr-3",width:"38","aria-hidden":"true"}),m.a.createElement(v["a"].Body,null,m.a.createElement(w["a"],null,m.a.createElement(A,{element:n.current},m.a.createElement(j["a"].Control,{as:"textarea",rows:1,ref:n,value:a,onChange:function(e){i(e.target.value)},className:"comment-text",placeholder:"\u64b0\u5199\u8bc4\u8bba \u2026",onFocus:function(e){c||(e.preventDefault(),Object(M["c"])(),n.current.blur())},"aria-label":"\u8bc4\u8bba",isInvalid:h.isInvalid})),m.a.createElement(j["a"].Control.Feedback,{type:"invalid"},h.msg)),m.a.createElement("div",{className:"d-flex justify-content-end align-items-center"},m.a.createElement("a",{href:"###",className:"mr-3",onClick:function(e){e.preventDefault(),f(!d)},"aria-label":"\u63d0\u793a",tabIndex:-1},m.a.createElement("i",{className:"far fa-info-circle text-secondary"})),m.a.createElement(_["a"],{className:"float-right",onClick:function(){return r({item:"comment",callback:E})},disabled:!a},"\u63d0\u4ea4\u8bc4\u8bba")),m.a.createElement(N["a"],{show:d,variant:"info",className:"mt-3 my-0 font-size-14"},"\u8bc4\u8bba\u652f\u6301\u90e8\u5206 Markdown \u8bed\u6cd5\uff1a",m.a.createElement("code",null,"**\u7c97\u4f53** _\u659c\u4f53_ [\u94fe\u63a5](http://example.com) `\u4ee3\u7801` - \u5217\u8868 > \u5f15\u7528"),"\u3002\u4f60\u8fd8\u53ef\u4ee5\u4f7f\u7528 ",m.a.createElement("code",null,"@ "),"\u6765\u901a\u77e5\u5176\u4ed6\u7528\u6237\u3002"))))},$=Object(I["connect"])((function(e){var t=e.global;return{sessionUser:t.sessionUser}}))(m.a.memo(K)),J=a("zhAr"),G=15,Q=function(e){var t=e.total,a=e.page,n=e.getData,i=function(){var e=document.getElementById("comment-area"),t=-65,a=e.getBoundingClientRect().top+window.pageYOffset+t;window.scrollTo({top:a})},r=function(e){n(e),i()};return m.a.createElement("div",{className:"d-flex justify-content-center mt-4 mb-1"},m.a.createElement(J["a"],{size:"sm",className:"mb-0"},m.a.createElement(J["a"].Item,{disabled:1===a,onClick:function(){return r(a-1)}},"\u4e0a\u4e00\u9875"),Object(o["a"])(Array(Math.ceil(t/G))).map((function(){return 0})).map((function(e,t){return m.a.createElement(J["a"].Item,{key:"page".concat(t),active:a===t+1,onClick:function(){return r(t+1)}},t+1)})),m.a.createElement(J["a"].Item,{disabled:a===Object(o["a"])(Array(Math.ceil(t/G))).map((function(){return 0})).length,onClick:function(){return r(a+1)}},"\u4e0b\u4e00\u9875")))},X=Object(I["connect"])((function(e){var t=e.global;return{sessionUser:t.sessionUser}}))(m.a.memo(Q)),Z=function(e){var t=e.sessionUser,a=e.item,n=e.onEditComment,i=e.onEdit,r=e.onRemove,c=e.onReport,o=Object(u["useState"])(a.is_liked),s=Object(l["a"])(o,2),d=s[0],f=s[1],v=Object(u["useState"])(a.votes),p=Object(l["a"])(v,2),b=p[0],h=p[1],g=(null===t||void 0===t?void 0:t.roles)||{},E=g.is_editor,O=function(e,t){t.preventDefault(),Object(M["c"])()&&Object(y["s"])({id:e.id,is_like:e.is_liked?0:1}).then((function(){h(d?b-1:b+1),f(!d)}))};return m.a.createElement("div",{className:"handle-bar font-size-14 d-flex justify-content-between"},m.a.createElement("div",null,m.a.createElement("a",{className:"text-secondary",href:"###",onClick:function(e){return O(a,e)}},m.a.createElement("span",{className:"mainLike-comment ".concat(d?"text-primary":"")},m.a.createElement("i",{className:"fa-w-16 ".concat(d?"fas fa-thumbs-up":"far fa-thumbs-up"),style:{width:"1em"}})),b>0&&m.a.createElement("span",{className:"mainLike-commentNum ml-1"},b)),m.a.createElement("span",{className:"split-dot"}),m.a.createElement("a",{className:"text-secondary btn-comment",href:"###",onClick:function(e){n(a,"",e)}},"\u56de\u590d"),m.a.createElement("span",{className:"split-dot"}),m.a.createElement("span",{className:"text-secondary"},Object(z["c"])(a.created))),m.a.createElement("div",{className:"control-area d-none"},t&&(E||Number(a.user.id)==t.user.id)&&m.a.createElement(m.a.Fragment,null,m.a.createElement("a",{className:"text-secondary edit",href:"###",onClick:function(e){e.preventDefault(),i(a)}},"\u7f16\u8f91"),m.a.createElement("span",{className:"split-dot"}),m.a.createElement("a",{className:"text-secondary delete",href:"###",onClick:function(e){return r(a.id,e)}},"\u5220\u9664"),m.a.createElement("span",{className:"split-dot"})),t&&m.a.createElement("a",{className:"text-secondary comment-report",href:"###",onClick:function(e){return c(a,e)}},"\u4e3e\u62a5")))},ee=Object(I["connect"])((function(e){var t=e.global;return{sessionUser:t.sessionUser}}))(m.a.memo(Z)),te=function(e){var t=e.sessionUser,a=e.item,n=e.subItem,i=e.onEditComment,r=e.onEdit,c=e.onRemove,o=e.onReport,s=(null===t||void 0===t?void 0:t.roles)||{},d=s.is_editor,f=Object(u["useState"])(n.is_liked),v=Object(l["a"])(f,2),p=v[0],b=v[1],h=Object(u["useState"])(n.votes),g=Object(l["a"])(h,2),E=g[0],O=g[1],j=function(e,t){t.preventDefault(),Object(M["c"])()&&Object(y["s"])({id:e.id,is_like:e.is_liked?0:1}).then((function(){O(p?E-1:E+1),b(!p)}))};return m.a.createElement("div",{className:"handle-bar font-size-14 d-flex justify-content-between"},m.a.createElement("div",null,m.a.createElement("a",{className:"text-secondary",href:"###",onClick:function(e){return j(n,e)}},m.a.createElement("span",{className:"mainLike-comment ".concat(p?"text-primary":"")},m.a.createElement("i",{className:"fa-w-16 ".concat(p?"fas fa-thumbs-up":"far fa-thumbs-up"),style:{width:"1em"}})),E>0&&m.a.createElement("span",{className:"mainLike-commentNum  ml-1"},E)),m.a.createElement("span",{className:"split-dot"}),m.a.createElement("a",{className:"text-secondary btn-reply",href:"###",onClick:function(e){i(n,a,e)}},"\u56de\u590d"),m.a.createElement("span",{className:"split-dot"}),m.a.createElement("span",{className:"text-secondary"},Object(z["c"])(n.created))),m.a.createElement("div",{className:"comment-control-area d-none"},t&&(d||Number(n.user.id)==t.user.id)&&m.a.createElement(m.a.Fragment,null,m.a.createElement("a",{className:"text-secondary edit",href:"###",onClick:function(e){e.preventDefault(),r(n,a)}},"\u7f16\u8f91"),m.a.createElement("span",{className:"split-dot"}),m.a.createElement("a",{className:"text-secondary delete",href:"###",onClick:function(e){return c(n.id,e)}},"\u5220\u9664"),m.a.createElement("span",{className:"split-dot"})),t&&m.a.createElement("a",{className:"text-secondary reply-report",href:"###",onClick:function(e){return o(n,e)}},"\u4e3e\u62a5")))},ae=Object(I["connect"])((function(e){var t=e.global;return{sessionUser:t.sessionUser}}))(m.a.memo(te)),ne=a("Ty5D"),ie=15,re="",ce=function(e){var t=e.id,a=e.mode,s=void 0===a?"article":a,h=e.isShowComment,j=void 0!==h&&h,w=e.setCommentState,k=e.event_object,N=e.user,_=void 0===N?{}:N,S=e.isFetchComments,C=void 0===S||S,L=Object(u["useRef"])(null),T=Object(u["useState"])(""),A=Object(l["a"])(T,2),D=A[0],R=A[1],q=Object(I["useDispatch"])(),P=Object(ne["j"])(),U=P.location.query,H=void 0===U?{}:U;L.current&&(L.current.value=D);var Y=Object(u["useState"])([]),W=Object(l["a"])(Y,2),K=W[0],J=W[1],G=Object(u["useState"])({isShow:!1,id:""}),Q=Object(l["a"])(G,2),Z=Q[0],te=Q[1],ce=Object(u["useState"])({page:1,init:!0}),oe=Object(l["a"])(ce,2),le=oe[0],se=oe[1],de=Object(u["useState"])(0),ue=Object(l["a"])(de,2),me=ue[0],fe=ue[1],ve=Object(u["useState"])(0),pe=Object(l["a"])(ve,2),be=pe[0],he=pe[1],ge=Object(u["useState"])(H.sort||"votes"),Ee=Object(l["a"])(ge,2),ye=Ee[0],Oe=Ee[1],je=Object(u["useState"])(!1),we=Object(l["a"])(je,2),ke=we[0],xe=we[1],Ne=Object(u["useState"])(!1),_e=Object(l["a"])(Ne,2),Se=_e[0],Ce=_e[1],Ie=Object(u["useRef"])({}),Le=Object(u["useState"])(!1),Te=Object(l["a"])(Le,2),Ae=Te[0],De=Te[1];Object(u["useEffect"])((function(){L.current&&g()(L.current)}),[L]),Object(u["useEffect"])((function(){se({page:1,init:!0})}),[t]),Object(u["useEffect"])((function(){1===le.page&&!0===le.init&&C&&Be()}),[le,C]),Object(u["useEffect"])((function(){if(!Object(E["isEmpty"])(K)&&!Object(E["isEmpty"])(k)&&!Object(E["isEmpty"])(k)&&s===k.root.type&&"comment"===k.current.type){var e,t=Object(E["findIndex"])(K,["id",Number((null===k||void 0===k||null===(e=k.current)||void 0===e?void 0:e.object_id)||0)]);t>2&&(K.splice(t,1),J([k.current.comment].concat(Object(o["a"])(K)))),-1===t&&J([k.current.comment].concat(Object(o["a"])(K)))}}),[K,k]),Object(u["useEffect"])((function(){Ae?se({page:1,init:!0}):De(!0)}),[ye]),Object(u["useEffect"])((function(){ke&&(K.map((function(e){return e.hidden=!1,e})),J(Object(E["orderBy"])(K,["created"])))}),[ke]),Object(u["useEffect"])((function(){q({type:"global/pushPageUser",payload:{pathName:window.location.pathname,users:K.map((function(e){return e.user}))}})}),[K]);var Re=function(e){var a=e.item,n=e.parentItem,i=e.callback;return new Promise((function(e,r){if(Object(M["c"])()){var l={};n?l={reply_comment_id:n.id,reply_user_id:a.user.id}:null!==a&&void 0!==a&&a.isReply&&(l={reply_comment_id:a.reply_comment_id||a.id,reply_user_id:a.user.id}),a.id&&!a.isReply&&a.isEdit?Object(y["Ec"])(Object(c["a"])(Object(c["a"])({id:a.id,object_id:t},l),{},{text:null===a||void 0===a?void 0:a.original_text})).then((function(e){J(n?K.map((function(t){return t.id===n.id&&t.replies.forEach((function(t){t.id===e.id&&(t.isEdit=!1,t.parsed_text=e.parsed_text)})),t})):K.map((function(t){return t.id===e.id&&(t.parsed_text=null===e||void 0===e?void 0:e.parsed_text,t.isEdit=!1),t}))),"function"===typeof w&&w(!1)}))["finally"]((function(){e(!0)})):Object(y["r"])(Object(c["a"])(Object(c["a"])({object_id:t},l),{},{text:(null===a||void 0===a?void 0:a.commentVal)||D})).then((function(e){if("function"===typeof i&&i({isInvalid:!1,msg:""}),"string"===typeof a?R(""):J(K.map((function(e){return n?e.id===n.id&&e.replies.forEach((function(e){e.id===a.id&&(e.isReply=!1)})):e.id===a.id&&(e.isReply=!1,e.commentVal=""),e}))),"article"===s&&"string"!==typeof a)J(K.map((function(t){if(n){if(t.id===n.id){var i=Object(E["findIndex"])(t.replies,{id:a.id});t.replies.splice(i+1,0,e.comment)}}else t.id===a.id&&(Object(E["isEmpty"])(t.replies)?t.replies=[e.comment]:t.replies.unshift(e.comment));return t})));else if("string"!==typeof a){var t=Object(E["findIndex"])(K,{id:a.id});K.splice(t+1,0,e.comment),J(K)}else J([e.comment].concat(Object(o["a"])(K)));"function"===typeof w&&w(!1)}))["catch"]((function(e){null!==e&&void 0!==e&&e.isError&&"function"===typeof i&&i({isInvalid:!0,msg:e.reply_comment_id||e.text})}))["finally"]((function(){e(!0)}))}else r(!1)}))},Be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.commentId,n=void 0===a?"":a,i=e.commentPage,o=void 0===i?1:i,l=o;n?le[n]?(le[n].page+=1,se(Object(c["a"])(Object(c["a"])({},le),{},{init:!1})),l=le[n].page):se(Object(c["a"])(Object(c["a"])(Object(c["a"])({},le),Object(r["a"])({},n,{page:1})),{},{init:!1})):se(Object(c["a"])(Object(c["a"])({},le),{},{page:o,init:!1})),Object(y["V"])({objectId:t,commentId:n,page:l,sort:ye,is_direct:"article"===s?0:1}).then((function(e){e&&Me({commentId:n,res:e,page:l})}))},Me=function(e){var t=e.commentId,a=e.res,n=e.page;if(t){var i=K.map((function(e){return e.id===t&&(e.replies=Object(E["orderBy"])(1===n?a.comments:[].concat(Object(o["a"])(e.replies),Object(o["a"])(a.comments)),["created"])),e}));J(Object(E["uniqBy"])(i,"id")||[])}else 1===n&&(fe(a.total),he(a.all_total)),ke||"article"===s||(a.comments=Object(E["orderBy"])(a.comments,["votes"],["desc"]).map((function(e,t){return e.hidden=t>2,e}))),J("article"===s?Object(E["uniqBy"])(a.comments,"id")||[]:(1===n?Object(E["orderBy"])(Object(E["uniqBy"])(a.comments,"id"),["created"]):Object(E["orderBy"])(Object(E["uniqBy"])([].concat(Object(o["a"])(K),Object(o["a"])(a.comments)),"id"),["created"]))||[])},ze=function(e,t,a){var n;a.preventDefault(),n=t?K.map((function(a){return a.id===t.id&&(a.replies=a.replies.map((function(t){return t.id===e.id&&(t.isReply=!t.isReply,t.isEdit=!1),t}))),a})):K.map((function(t){return t.id===e.id&&(t.isReply=!t.isReply,t.isEdit=!1),t})),J(n)},qe=function(e,t){var a;a="object"===typeof t?K.map((function(a){return a.id===(null===t||void 0===t?void 0:t.id)&&(a.replies=a.replies.map((function(t){return t.id===e.id&&(t=e),t}))),a})):K.map((function(t){return t.id===e.id&&(t=e),t})),J(a)},Pe=function(e,t){t.preventDefault(),te({id:e.id,isShow:!0})},Fe=function(e){te(Object(c["a"])(Object(c["a"])({},Z),{},{isShow:e}))},Ue=function(e,t){var a;a=t?K.map((function(a){return a.id===t.id&&(a.replies=a.replies.map((function(t){return t.id===e.id&&(t.isEdit=!t.isEdit,t.isReply=!1),t}))),a})):K.map((function(t){return t.id===e.id&&(t.isEdit=!t.isEdit,t.isReply=!1),t})),J(a)},He=function(e,t){t.preventDefault(),O["p"].confirm({title:"\u5220\u9664\u8bc4\u8bba",content:"\u786e\u5b9a\u8981\u5220\u9664\u8be5\u8bc4\u8bba\u5417",onSuccess:function(){var t=Object(i["a"])(d.a.mark((function t(){return d.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(y["z"])(e);case 2:Be();case 3:case"end":return t.stop()}}),t)})));function a(){return t.apply(this,arguments)}return a}()})};Object(u["useEffect"])((function(){if(!Se&&!Object(E["isEmpty"])(Ie.current)&&re&&Ye(re)){var e=Ie.current[re];e&&Object(z["h"])(e),Ce(!0)}}));var Ye=Object(u["useCallback"])((function(e){var a=Object(z["f"])({eventObj:k,id:e,type:"comment",parentId:t});return a&&(re=e),a}),[k]),Ve=me-(ke?null===le||void 0===le?void 0:le.page:0)*ie,We=K.filter((function(e){return!e.hidden}));return m.a.createElement("div",null,("question"===s||"answer"===s)&&m.a.createElement(F,{commentContent:D,isShowComment:j,inputRef:L,setCommentContent:R,onComment:Re,id:t}),m.a.createElement(f["a"],{id:"comment-area",className:"comment-wrap ".concat("article"===s?"":0===K.length?"hidden":"bg-light border-0 mt-2")},"article"===s&&m.a.createElement(V,{allTotal:be,sort:ye,setSort:Oe,aId:t}),m.a.createElement(f["a"].Body,{className:"article"===s?"":"p-3"},"article"===s&&m.a.createElement($,{commentContent:D,inputRef:L,setCommentContent:R,onComment:Re,id:t}),m.a.createElement("div",{className:"comment-body-wrap ".concat(K.filter((function(e){return!e.hidden})).length<1&&"d-none")},We.map((function(e,a){var n,i,r,c,o=e.parsed_text,l=e.reply_user;return Object(E["isEmpty"])(l)||o.includes('<a href="'.concat(l.url,'">@').concat(l.name,"</a>"))||(o=o.replace(/^<p>/,'<p><a href="'.concat(l.url,'">@').concat(l.name,"</a> "))),m.a.createElement(v["a"],{ref:function(t){return Ie.current[e.id]=t},key:e.id,className:"mb-r d-flex align-items-start ".concat(We.length!==a+1&&("article"===s?"mb-4":"mb-3"))},"article"===s&&m.a.createElement("img",{className:"d-block rounded-circle mr-3",width:"38",height:"38",src:e.user.avatar_url||"https://image-static.segmentfault.com/317/931/3179314346-5f61e47221e07",alt:""}),m.a.createElement(v["a"].Body,{className:"w-0 ".concat(Ye(e.id)?"scroll-warning":"")},m.a.createElement("div",{className:"commentUnit ".concat("question"===s||"answer"===s?"font-size-14":"")},m.a.createElement("div",{className:"mb-1"},m.a.createElement("a",{className:"d-uname",href:e.user.url,rel:"noreferrer",target:"_blank"},m.a.createElement("strong",null,e.user.name),"article"===s&&e.user.id===(null===_||void 0===_?void 0:_.id)&&m.a.createElement("span",{className:"text-secondary"},"\uff08\u4f5c\u8005\uff09")),"\uff1a",!e.isEdit&&m.a.createElement("div",{className:"parsedText fmt",dangerouslySetInnerHTML:{__html:o}})),e.isEdit&&m.a.createElement(x,{onChangeOfComment:qe,item:e,onComment:Re}),m.a.createElement(ee,{item:e,onEditComment:ze,onEdit:Ue,onRemove:He,onReport:Pe}),e.isReply&&m.a.createElement(f["a"],{className:"bg-light border-0 mt-2"},m.a.createElement(B,{id:t,className:"".concat("question"===s||"answer"==s?"p-0":"p-3"),onChangeOfComment:qe,item:e,onComment:Re,onEditComment:ze}))),m.a.createElement("div",{className:"replies ".concat(Object(E["isEmpty"])(e.replies)?"hidden":"")},m.a.createElement(f["a"],{className:"bg-light border-0 mt-2"},m.a.createElement(f["a"].Body,{className:"p-3"},m.a.createElement(p["a"],{className:"reply-list"},null===(n=e.replies)||void 0===n?void 0:n.map((function(a,n){var i=a.parsed_text,r=a.reply_user;return Object(E["isEmpty"])(r)||i.includes('<a href="'.concat(r.url,'">@').concat(r.name,"</a>"))||(i=i.replace(/^<p>/,'<p><a href="'.concat(r.url,'">@').concat(r.name,"</a> "))),m.a.createElement(b["a"],{key:a.id,ref:function(e){return Ie.current[a.id]=e},className:"p-0 border-0 commentUnit ".concat(e.replies.length!==n+1&&"mb-3"," ").concat(Ye(a.id)?"scroll-warning":""," ")},m.a.createElement("div",{className:"font-size-14 mb-1"},m.a.createElement("a",{className:"d-uname",href:a.user.url,target:"_blank",rel:"noreferrer"},m.a.createElement("strong",null,a.user.name),"article"===s&&a.user.id===(null===_||void 0===_?void 0:_.id)&&m.a.createElement("span",{className:"text-secondary"},"\uff08\u4f5c\u8005\uff09")),"\uff1a",!a.isEdit&&m.a.createElement("div",{className:"parsedText fmt",dangerouslySetInnerHTML:{__html:i}})),a.isEdit&&m.a.createElement(x,{isChild:!0,onChangeOfComment:qe,item:a,parentItem:e,onComment:Re}),m.a.createElement(ae,{item:e,subItem:a,onEditComment:ze,onEdit:Ue,onRemove:He,onReport:Pe}),a.isReply&&m.a.createElement(f["a"],{className:"bg-light border-0 mt-2"},m.a.createElement(B,{id:t,onChangeOfComment:qe,item:a,onComment:Re,parentItem:e,className:"p-0",onEditComment:ze})))}))),e.replies&&e.replies_total>e.replies.length&&e.replies_total-((null===(i=le[e.id])||void 0===i?void 0:i.page)||0)*ie>0&&m.a.createElement("div",{className:"font-size-14 d-flex mt-3 loader d-none"},m.a.createElement("a",{className:"text-secondary next-page-btn",href:"###",onClick:function(t){t.preventDefault(),Be({commentId:e.id})}},e.replies_total<ie?"\u5171 ".concat(e.replies_total," \u6761\u56de\u590d"):"\u66f4\u591a ".concat(ie>e.replies_total-((null===(r=le[e.id])||void 0===r?void 0:r.page)||0)*ie?e.replies_total-((null===(c=le[e.id])||void 0===c?void 0:c.page)||0)*ie:ie," \u6761\u56de\u590d"))))))))}))),"article"===s?me>ie&&m.a.createElement(X,{total:me,page:le.page,getData:function(e){return Be({commentPage:e})}}):me>3&&Ve>0&&m.a.createElement("div",{className:"font-size-14 d-flex loader d-none mt-3"},m.a.createElement("a",{className:"text-secondary next-page-btn",href:"###",onClick:function(e){e.preventDefault(),ke?Be({commentPage:le.page+1}):xe(!0)}},me<ie?"\u5171 ".concat(me," \u6761\u8bc4\u8bba"):"\u66f4\u591a ".concat(ie>Ve?Ve:ie," \u6761\u8bc4\u8bba"))))),m.a.createElement(O["m"],Object(n["a"])({},Z,{setModalStatus:Fe})))};t["a"]=m.a.memo(ce)},gZRy:function(e,t,a){},heTN:function(e,t,a){"use strict";var n=a("q1tI"),i=a.n(n),r=function(e){var t=e.tags,a=void 0===t?[]:t,n=e.className,r=void 0===n?"":n,c=(null===a||void 0===a?void 0:a.length)>0?i.a.createElement("div",{className:"d-flex flex-wrap align-items-center ".concat(r)},i.a.createElement("div",{className:"m-n1"},a.map((function(e){return i.a.createElement("a",{href:e.url,className:"m-1 badge-tag",key:e.id},(null===e||void 0===e?void 0:e.iconUrl)&&i.a.createElement("img",{src:e.iconUrl,alt:"",width:"16",height:"16",className:"mr-1"}),e.name)})))):null;return c};t["a"]=i.a.memo(r)},"iG+T":function(e,t,a){"use strict";var n=a("tJVT"),i=a("q1tI"),r=a.n(i),c=a("cWnB"),o=a("9kvl"),l=["\u4ee3\u7801\u5199\u5f97\u8d8a\u6025\uff0c\u7a0b\u5e8f\u8dd1\u5f97\u8d8a\u6162\u3002","\u5728\u5b58\u50a8\u65e5\u671f\u4e2d\u7684\u5e74\u4efd\u7684\u65f6\u5019\uff0c\u8bf7\u4f7f\u7528\u56db\u4f4d\u6570\u5b57\u3002","\u5982\u679c\u4f60\u53d1\u73b0\u7279\u6b8a\u60c5\u51b5\u592a\u591a\uff0c\u90a3\u4f60\u80af\u5b9a\u662f\u7528\u9519\u65b9\u6cd5\u4e86\u3002","\u7a0b\u5e8f\u9519\u8bef\u4e2d\uff0c80% \u662f\u8bed\u6cd5\u9519\u8bef\uff0c16% \u662f\u7b80\u5355\u7684\u903b\u8f91\u9519\u8bef\uff0c0.8% \u624d\u662f\u56f0\u96be\u7684\u95ee\u9898\u3002","\u4e1c\u897f\u6ca1\u574f\uff0c\u5c31\u522b\u4e71\u4fee\u3002","\u4e0d\u8981\u7ad9\u7740\u8c03\u8bd5\u7a0b\u5e8f\uff0c\u90a3\u4f1a\u4f7f\u5f97\u4f60\u7684\u8010\u5fc3\u51cf\u534a\uff0c\u4f60\u9700\u8981\u7684\u662f\u5168\u795e\u8d2f\u6ce8\u3002","\u6d4b\u8bd5\u53ea\u80fd\u8bc1\u660e\u7a0b\u5e8f\u6709\u9519\u8bef\uff0c\u800c\u4e0d\u80fd\u8bc1\u660e\u7a0b\u5e8f\u6ca1\u6709\u9519\u8bef\u3002","\u4fee\u6b63\u7a0b\u5e8f\u9519\u8bef\u7684\u7b2c\u4e00\u6b65\u662f\u8981\u590d\u73b0\u8fd9\u4e2a\u9519\u8bef\u3002","\u4e0d\u8981\u57fa\u4e8e\u60f3\u8c61\u5f00\u53d1\uff0c\u8981\u57fa\u4e8e\u539f\u578b\u5f00\u53d1\u3002"];function s(e,t){var a,n,i=e.length,r=e.slice(0),c=i-t;while(i-- >c)n=Math.floor((i+1)*Math.random()),a=r[n],r[n]=r[i],r[i]=a;return r.slice(c)}var d=function(){var e=Object(i["useState"])(""),t=Object(n["a"])(e,2),a=t[0],d=t[1],u=Object(o["useDispatch"])(),m=function(){localStorage.setItem("referer",decodeURI(window.location.href)),u({type:"global/saveShowLoginState",payload:{isShowLogin:!0}})};return Object(i["useEffect"])((function(){d(s(l,1))}),[]),r.a.createElement("div",{className:"bg-white text-center border border-dark border-width-2 p-5 my-4 rounded"},r.a.createElement("div",{className:"h1"},"\u4f60\u77e5\u9053\u5417\uff1f"),r.a.createElement("p",{className:"my-4",style:{fontSize:"1.25rem"}},a),r.a.createElement(c["a"],{style:{width:"178px"},size:"lg",onClick:m},"\u6ce8\u518c\u767b\u5f55"))};t["a"]=r.a.memo(d)},kUPb:function(e,t,a){"use strict";var n=a("tJVT"),i=a("q1tI"),r=a.n(i),c=a("9vsu"),o=a("pJDg"),l=a("cWnB"),s=a("dDCJ"),d=a("97+O"),u=a("YdHu"),m=a("24g8"),f=a("QeUd"),v=a("aWbt"),p=a("Dp36"),b=a("wFk/"),h=a("6Yt9"),g=a("0FX9"),E=a.n(g),y=a("9kvl"),O=a("tSvB"),j=function(e){var t=e.id,a=e.isLiked,g=void 0!==a&&a,y=e.votes,j=void 0===y?0:y,w=e.bookmarks,k=void 0===w?0:w,x=e.isBookmarked,N=void 0!==x&&x,_=e.title,S=void 0===_?"":_,C=e.banner,I=void 0===C?"":C,L=e.dispatch,T=e.showShare,A=void 0!==T&&T,D=e.source,R=e.showComment,B=void 0===R||R,M=e.isAuthor,z=void 0!==M&&M,q=e.sticky,P=void 0===q||q,F=e.style,U=void 0===F?{}:F,H=e.likeBtnSize,Y=void 0===H?"lg":H,V=e.isHated,W=void 0!==V&&V,K=e.showHateBtn,$=void 0!==K&&K,J=e.showBookmarkBtn,G=void 0===J||J,Q=e.showShareBtn,X=void 0===Q||Q,Z=e.isNotHandle,ee=void 0===Z?{like:!1,hate:!1,haveAccess:!1}:Z,te=Object(i["useState"])(j),ae=Object(n["a"])(te,2),ne=ae[0],ie=ae[1],re=Object(i["useState"])(W),ce=Object(n["a"])(re,2),oe=ce[0],le=ce[1],se=Object(i["useState"])(k),de=Object(n["a"])(se,2),ue=de[0],me=de[1],fe=Object(i["useState"])(g),ve=Object(n["a"])(fe,2),pe=ve[0],be=ve[1],he=Object(i["useState"])(N),ge=Object(n["a"])(he,2),Ee=ge[0],ye=ge[1],Oe=Object(i["useState"])(!1),je=Object(n["a"])(Oe,2),we=je[0],ke=je[1],xe=Object(i["useState"])(""),Ne=Object(n["a"])(xe,2),_e=Ne[0],Se=Ne[1],Ce=Object(i["useState"])(""),Ie=Object(n["a"])(Ce,2),Le=Ie[0],Te=Ie[1],Ae=Object(i["useState"])(""),De=Object(n["a"])(Ae,2),Re=De[0],Be=De[1],Me=Object(i["useState"])(""),ze=Object(n["a"])(Me,2),qe=ze[0],Pe=ze[1],Fe=Object(i["useState"])(!1),Ue=Object(n["a"])(Fe,2),He=Ue[0],Ye=Ue[1],Ve=Object(i["useRef"])(),We=Object(i["useRef"])(),Ke=Object(i["useRef"])();Object(i["useEffect"])((function(){be(g),ye(N),ie(j),me(k),le(W)}),[g,N,j,k,W]),Object(i["useEffect"])((function(){Se("".concat(window.location.origin).concat(window.location.pathname)),Te("\u3010".concat(S,"\u3011\u5206\u4eab\u81ea @segment_fault\uff0c\u4f20\u9001\u95e8\uff1a")),Be("\u3010".concat(S,"\u3011\u5206\u4eab\u81ea @SegmentFault\uff0c\u4f20\u9001\u95e8\uff1a"))}),[_e]),Object(i["useEffect"])((function(){if(!qe){var e,t=null===(e=document)||void 0===e?void 0:e.querySelector(".qrcode");E.a.toCanvas(t,window.location.href,{margin:0},(function(e,t){Pe(t.toDataURL())}))}}),[qe]);var $e=function(){Object(h["c"])()&&(ee.like?O["p"].confirm({content:"\u4e0d\u80fd\u7ed9\u81ea\u5df1\u70b9\u8d5e"}):!z||"article"!==D&&"video"!==D?"product-score"!==D||ee.haveAccess?(Object(p["Eb"])({id:t,type:D,is_like:pe?0:1}).then((function(e){"question"!==D&&"answer"!==D&&"product-score"!==D||ie(e.votes)})),"article"!==D&&"video"!==D||ie(pe?ne-1:ne+1),be(!pe),oe&&le(!oe),L({type:"action/saveLike",payload:{id:t,votes:pe?ne-1:ne+1,isLiked:!pe}})):L({type:"global/saveProductAuthModalState",payload:{isShow:!0,title:"\u70b9\u8d5e"}}):O["p"].confirm({content:"\u4f60\u662f\u4f5c\u8005\uff0c\u65e0\u6cd5\u5bf9\u81ea\u5df1\u8fdb\u884c\u6b64\u64cd\u4f5c"}))},Je=function(){Object(h["c"])()&&ke(!0)},Ge=function(e){me(e?ue+1:ue-1),ye(e),L({type:"action/saveBookmark",payload:{id:t,bookmarks:e?ue+1:ue-1,bookmarkState:e}})},Qe=function(){Object(h["c"])()&&(ee.hate?O["p"].confirm({content:"\u4e0d\u80fd\u7ed9\u81ea\u5df1\u70b9\u8e29"}):"product-score"!==D||ee.haveAccess?(Object(p["zb"])({id:t,type:D,is_hate:oe?0:1}).then((function(e){ie(e.votes)})),le(!oe),Ye(!oe),pe&&be(!pe)):L({type:"global/saveProductAuthModalState",payload:{isShow:!0,title:"\u70b9\u8e29"}}))},Xe=r.a.createElement(c["a"],{id:"popover-basic"},r.a.createElement(c["a"].Content,null,"\u5982\u679c\u8be5\u5185\u5bb9\u6709\u53ef\u6539\u8fdb\u7684\u4f59\u5730\uff0c\u6b22\u8fce\u901a\u8fc7\u8bc4\u8bba\u7ed9\u4f5c\u8005\u5efa\u8bae\u3002"));return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"sticky-wrap ".concat(P?"sticky-top":""," functional-area-left d-none d-xl-flex justify-content-center pt-5 ").concat("article"===D?"functional-area-left2":""),style:U},r.a.createElement(o["a"],{vertical:!0,className:"align-items-center"},r.a.createElement(l["a"],{variant:"outline-primary",className:"func-btn mainLike  sflex-center shadow-sm rounded-circle main-".concat(Y,"-Like ").concat($?"mb-2":"mb-3"),active:pe,onClick:$e,"aria-label":"\u70b9\u8d5e"},r.a.createElement("i",{className:"far fa-thumbs-up"}),"question"===D||"answer"===D||"product-score"===D?r.a.createElement("span",{className:"mainLikeNum ".concat(0!==ne?"":"invisible")},ne):r.a.createElement("span",{className:"mainLikeNum ".concat(ne>0?"":"invisible")},ne)),$&&r.a.createElement(s["a"],{trigger:"click",placement:"right",show:He,overlay:Xe},r.a.createElement(l["a"],{variant:"outline-secondary",className:"shadow-sm func-btn sflex-center rounded-circle main-".concat(Y,"-Like main-hate mb-3"),active:oe,onClick:Qe,onBlur:function(){return Ye(!1)},"aria-label":"\u70b9\u8e29"},r.a.createElement("i",{className:"far fa-thumbs-down fa-flip-horizontal"}))),G&&r.a.createElement(l["a"],{variant:"outline-secondary",className:"func-btn sflex-center rounded-circle mb-2",onClick:Je,active:Ee,"aria-label":"\u6536\u85cf"},r.a.createElement("i",{className:"far fa-bookmark"})),B&&r.a.createElement("a",{className:"func-btn sflex-center btn btn-outline-secondary rounded-circle mb-2",href:"#comment-area","aria-label":"\u8bc4\u8bba"},r.a.createElement("i",{className:"far fa-comment-alt-lines"})),X&&r.a.createElement(d["a"],null,r.a.createElement(d["a"].Toggle,{as:u["a"],className:"func-btn nav-tab-item  rounded-pill btn btn-outline-secondary sflex-center rounded-circle"},r.a.createElement("i",{className:"far fa-share-alt"})),r.a.createElement(d["a"].Menu,{className:"dropdown-menu-down",show:A},r.a.createElement("div",{className:"text-center mt-2"},r.a.createElement("div",{className:"qr"},r.a.createElement("img",{crossOrigin:"anonymous",src:qe,width:"118",height:"118"})),"\u626b\u4e00\u626b\u5206\u4eab"),r.a.createElement("div",{className:"dropdown-divider"}),r.a.createElement(d["a"].Item,{className:"p-0",onKeyDown:function(e){13===e.keyCode&&Ve.current.click()}},r.a.createElement(m["a"],{title:Re,url:_e,image:I,ref:Ve,className:"btn w-100 pl-4 pr-4 pt-1 pb-1 text-left"},r.a.createElement("i",{className:"fab fa-weibo fa-fw"})," \u65b0\u6d6a\u5fae\u535a")),r.a.createElement(d["a"].Item,{className:"p-0",onKeyDown:function(e){13===e.keyCode&&We.current.click()}},r.a.createElement(f["a"],{title:Le,url:_e,ref:We,className:"btn w-100 pl-4 pr-4 pt-1 pb-1 text-left"},r.a.createElement("i",{className:"fab fa-twitter fa-fw"})," Twitter")),r.a.createElement(d["a"].Item,{className:"p-0",onKeyDown:function(e){13===e.keyCode&&Ke.current.click()}},r.a.createElement(v["a"],{title:Le,url:_e,ref:Ke,className:"btn w-100 pl-4 pr-4 pt-1 pb-1 text-left"},r.a.createElement("i",{className:"fab fa-facebook fa-fw"})," Facebook")))))),r.a.createElement(b["a"],{id:t,isShow:we,setShowStatus:ke,setBookmarkedState:Ge,source:D,isBookmarked:N}),r.a.createElement("canvas",{hidden:!0,className:"qrcode"}))};t["a"]=Object(y["connect"])()(r.a.memo(j))},kpTP:function(e,t,a){"use strict";var n=a("wx14"),i=a("zLVn"),r=a("TSYQ"),c=a.n(r),o=a("q1tI"),l=a.n(o),s=a("YdCC"),d=a("vUet"),u=Object(s["a"])("media-body"),m=l.a.forwardRef((function(e,t){var a=e.bsPrefix,r=e.className,o=e.as,s=void 0===o?"div":o,u=Object(i["a"])(e,["bsPrefix","className","as"]),m=Object(d["a"])(a,"media");return l.a.createElement(s,Object(n["a"])({},u,{ref:t,className:c()(r,m)}))}));m.displayName="Media",m.Body=u,t["a"]=m},kwfb:function(e,t,a){"use strict";var n=a("tJVT"),i=a("q1tI"),r=a.n(i),c=function(e){var t=e.name,a=Object(i["useState"])(""),c=Object(n["a"])(a,2),o=c[0],l=c[1];return Object(i["useEffect"])((function(){var e,a=null;null!==(e=window.OA_output)&&void 0!==e&&e[t]&&clearInterval(a),a=setInterval((function(){var e,n;null!==(e=window.OA_output)&&void 0!==e&&e[t]&&(null!==(n=window.OA_output)&&void 0!==n&&n[t]&&clearInterval(a),l(window.OA_output[t]))}))}),[]),Object(i["useEffect"])((function(){o&&o.indexOf("adsbygoogle")>-1&&(window.adsbygoogle=window.adsbygoogle||[]).push({})}),[o]),r.a.createElement("div",{id:"OA_holder_".concat(t),className:"ad-container",style:{display:5===Number(t)?"none":"block"},dangerouslySetInnerHTML:{__html:o}})};t["a"]=c},nWVH:function(e,t,a){},nlcd:function(e,t,a){"use strict";var n=a("EVdn");t["a"]=function(){var e,t='\n  <div class="is-active ImageView p-4" style="display: none;">\n      <div class="ImageView-inner" style="overflow: auto;">\n          <img src="" class="ImageView-img" alt="preview" style="max-width: 100%">\n      </div>\n  </div>',a=1,i=n("article img"),r=[],c=null===(e=n(".ImageView").find("img").attr("src"))||void 0===e?void 0:e[0];i.each((function(e,t){var i,o,l=n(t).attr("src")||n(t).attr("data-src");null===(i=l)||void 0===i||!i.startsWith("/img/")||null!==(o=l)&&void 0!==o&&o.match(/\/view$/)||(l+="/view"),null!==c&&void 0!==c&&c.includes(l)&&(a=e),l&&r.push(l)})),n("body ImageView")&&n(".ImageView").remove(),n("body").append(t).on("keydown",(function(e){var t;"none"!==(null===(t=n(".ImageView"))||void 0===t?void 0:t.css("display"))&&(37===e.keyCode&&a>0&&(a-=1,n(".ImageView").find("img").attr("src",r[a])),39===e.keyCode&&a<(null===r||void 0===r?void 0:r.length)-1&&(a+=1,n(".ImageView").find("img").attr("src",r[a])))})).on("click",".ImageView",(function(){n(this).fadeOut()})).on("click","article img",(function(){var e,t,a=n(this).attr("src");n(this).parents("a").length||(null===(e=a)||void 0===e||!e.startsWith("/img/")||null!==(t=a)&&void 0!==t&&t.match(/\/view$/)||(a+="/view"),n(".ImageView").find("img").attr("src",a)[0].onload=function(){n(".ImageView").fadeIn()})}))}},oGiJ:function(e,t,a){"use strict";a.r(t);var n=a("9og8"),i=a("k1fw"),r=a("tJVT"),c=a("WmNS"),o=a.n(c),l=a("q1tI"),s=a.n(l),d=a("7vrA"),u=a("3Z9Z"),m=a("JI6e"),f=a("TUci"),v=a("kUPb"),p=a("6xyR"),b=a("HToz"),h=a.n(b),g=a("dDCJ"),E=a("AINe"),y=a("Wgwc"),O=a.n(y),j=a("Dp36"),w=a("QgiU"),k=a.n(w),x=(a("pHGr"),a("0lfv"));O.a.locale("zh-cn"),O.a.extend(k.a);var N=function(e){var t,a,n,i,r,c,o,l=e.title,d=e.user,u=e.id,m=e.created,f=e.modified,v=e.initPage,p=e.actions,b=e.member_actions,h=e.lang,y=e.langs,w=function(){null!==p&&void 0!==p&&p.find((function(e){return"recommend"===e.action}))?Object(j["i"])(u).then((function(e){e&&(null===v||void 0===v||v())})):Object(j["e"])(u).then((function(e){e&&(null===v||void 0===v||v())}))};return s.a.createElement(s.a.Fragment,null,s.a.createElement("h1",{className:"h2 mb-3"},s.a.createElement("a",{href:"/a/".concat(u),className:"text-body"},l)),s.a.createElement("div",{className:"d-flex align-items-center justify-content-between flex-wrap mb-4"},s.a.createElement("div",{className:"d-flex align-items-center"},s.a.createElement("a",{href:null===d||void 0===d?void 0:d.url,className:"d-flex align-items-center"},s.a.createElement("picture",{className:"mr-2 d-sm-block d-none"},s.a.createElement("img",{src:(null===d||void 0===d?void 0:d.avatar_url)||"https://image-static.segmentfault.com/317/931/3179314346-5f61e47221e07",alt:"",className:"d-inline-block rounded-circle",width:"32"})),s.a.createElement("strong",{className:"align-self-center font-size-14"},null===d||void 0===d?void 0:d.name)),null!==d&&void 0!==d&&null!==(t=d.user_auth)&&void 0!==t&&t.is_auth?s.a.createElement("ul",{className:"list-inline mb-0 authentication-info sflex-center font-size-14 ml-1"},s.a.createElement("li",{className:"list-inline-item",style:{color:"#BF7158"}},s.a.createElement(g["a"],{placement:"top",overlay:s.a.createElement(E["a"],{id:"top"},s.a.createElement("span",{className:""},null===d||void 0===d||null===(a=d.user_auth)||void 0===a?void 0:a.info))},s.a.createElement("i",{className:"fas fa-badge-check text-warning"})))):null,m!==f&&f>m?s.a.createElement(g["a"],{placement:"top",overlay:s.a.createElement(E["a"],{id:"top"},s.a.createElement("span",{className:""},"\u66f4\u65b0\u4e8e ",Object(x["c"])(f)))},s.a.createElement("time",{className:"text-secondary font-size-14",dateTime:O.a.unix(m).toISOString(),itemProp:"datePublished",style:{marginLeft:"12px"}},"\u53d1\u5e03\u4e8e ",Object(x["c"])(m))):s.a.createElement("time",{className:"text-secondary font-size-14",dateTime:O.a.unix(m).toISOString(),itemProp:"datePublished",style:{marginLeft:"12px"}},"\u53d1\u5e03\u4e8e ",Object(x["c"])(m)),null!==b&&void 0!==b&&null!==(n=b.find((function(e){return"edit"===e.action})))&&void 0!==n&&n.name?s.a.createElement("a",{href:"/a/".concat(u,"/edit"),className:"font-size-14",style:{marginLeft:"12px"}},"\u7f16\u8f91"):null,null!==p&&void 0!==p&&null!==(i=p.find((function(e){return"recommend"===e.action})))&&void 0!==i&&i.name||null!==p&&void 0!==p&&null!==(r=p.find((function(e){return"cancel-recommend"===e.action})))&&void 0!==r&&r.name?s.a.createElement("a",{href:"###",className:"font-size-14",onClick:w,style:{marginLeft:"12px"}},(null===p||void 0===p||null===(c=p.find((function(e){return"recommend"===e.action})))||void 0===c?void 0:c.name)||(null===p||void 0===p||null===(o=p.find((function(e){return"cancel-recommend"===e.action})))||void 0===o?void 0:o.name)):null),(null===y||void 0===y?void 0:y.length)>0&&s.a.createElement("a",{href:"en"===h?"/a/".concat(u):"/a/".concat(u,"/en"),className:"d-flex align-items-center"},s.a.createElement("div",{style:{height:"21px",lineHeight:"21px"}},s.a.createElement("i",{className:"far fa-language"})),s.a.createElement("span",{className:"font-size-14 ml-1"},"en"===h?"\u4e2d\u6587":"English"))))},_=N,S=a("tSvB"),C=a("4GjR"),I=a("9kvl"),L=(a("5SRE"),function(e){var t=e.realRed,a=void 0===t?0:t,n=e.read,i=void 0===n?0:n,r=e.created,c=void 0===r?0:r,o=e.modified,l=void 0===o?0:o,d=e.id,f=e.actions,v=void 0===f?[]:f,p=e.initPage,b=e.isEditor,h=e.memberActions,y=Object(I["useDispatch"])(),j=function(){y({type:"global/saveSingleNotice",payload:""})},w=function(e,t){switch(window.scroll(0,0),t){case"report":S["p"].confirm({content:"string"===typeof e?e:"\u4e3e\u62a5\u6210\u529f"});break;case"hide-setting":case"delete":y({type:"global/saveSingleNotice",payload:"string"===typeof e?e:""}),null===p||void 0===p||p();break;case"reject":j(),null===p||void 0===p||p();break;default:"string"===typeof e&&y({type:"global/saveSingleNotice",payload:"string"===typeof e?e:""}),null===p||void 0===p||p();break}};return s.a.createElement(s.a.Fragment,null,s.a.createElement(u["a"],{className:"text-secondary font-size-14 mt-3 mb-5 d-flex justify-content-between"},s.a.createElement(m["a"],null,s.a.createElement("span",null,"\u9605\u8bfb ",Object(x["g"])(i),b&&a>0&&"\uff08UV ".concat(Object(x["g"])(a),"\uff09")),s.a.createElement("span",{className:"split-dot"}),c!==l&&l>c?s.a.createElement(g["a"],{placement:"top",overlay:s.a.createElement(E["a"],{id:"tip-top"},"\u53d1\u5e03\u4e8e ",s.a.createElement("span",null,Object(x["c"])(c)))},s.a.createElement("time",{dateTime:O.a.unix(c).toISOString(),itemProp:"datePublished"},"\u66f4\u65b0\u4e8e ",Object(x["c"])(l))):s.a.createElement("time",{dateTime:O.a.unix(c).toISOString(),itemProp:"datePublished"},"\u53d1\u5e03\u4e8e ",Object(x["c"])(c))),s.a.createElement(m["a"],{className:"operation col-6 text-right col-xs-3"},s.a.createElement(C["a"],{id:d,actions:v,type:"article",onCallBack:w,member_actions:h}))))}),T=s.a.memo(L),A=a("pJDg"),D=a("cWnB"),R=a("97+O"),B=a("24g8"),M=a("QeUd"),z=a("aWbt"),q=a("wFk/"),P=a("6Yt9"),F=a("0FX9"),U=a.n(F),H=a("YdHu"),Y=(a("78gL"),function(e){var t=e.id,a=e.isLiked,n=void 0!==a&&a,i=e.votes,c=void 0===i?0:i,o=e.isBookmarked,d=void 0!==o&&o,u=e.bookmarks,m=void 0===u?0:u,f=e.title,v=void 0===f?"":f,p=e.banner,b=void 0===p?"":p,h=e.isAuthor,g=e.dispatch,E=e.isBaiduOxApp,y=void 0!==E&&E,O=Object(l["useState"])(c),w=Object(r["a"])(O,2),k=w[0],x=w[1],N=Object(l["useState"])(m),_=Object(r["a"])(N,2),C=_[0],I=_[1],L=Object(l["useState"])(n),T=Object(r["a"])(L,2),F=T[0],Y=T[1],V=Object(l["useState"])(d),W=Object(r["a"])(V,2),K=W[0],$=W[1],J=Object(l["useState"])(!1),G=Object(r["a"])(J,2),Q=G[0],X=G[1],Z=Object(l["useState"])(""),ee=Object(r["a"])(Z,2),te=ee[0],ae=ee[1],ne=Object(l["useState"])(""),ie=Object(r["a"])(ne,2),re=ie[0],ce=ie[1],oe=Object(l["useState"])(""),le=Object(r["a"])(oe,2),se=le[0],de=le[1],ue=Object(l["useState"])(""),me=Object(r["a"])(ue,2),fe=me[0],ve=me[1],pe=Object(l["useRef"])(),be=Object(l["useRef"])(),he=Object(l["useRef"])();Object(l["useEffect"])((function(){Y(n),$(d),x(c),I(m)}),[n,d,c,m]),Object(l["useEffect"])((function(){ae("".concat(window.location.origin).concat(window.location.pathname)),ce("\u3010".concat(v,"\u3011\u5206\u4eab\u81ea @segment_fault\uff0c\u4f20\u9001\u95e8\uff1a")),de("\u3010".concat(v,"\u3011\u5206\u4eab\u81ea @SegmentFault\uff0c\u4f20\u9001\u95e8\uff1a"))}),[te]),Object(l["useEffect"])((function(){if(!fe){var e,t=null===(e=document)||void 0===e?void 0:e.querySelector(".qrcode");U.a.toCanvas(t,window.location.href,{margin:0},(function(e,t){ve(t.toDataURL())}))}}),[fe]);var ge=function(){Object(P["c"])()&&(h?S["p"].confirm({content:"\u4f60\u662f\u4f5c\u8005\uff0c\u65e0\u6cd5\u5bf9\u81ea\u5df1\u8fdb\u884c\u6b64\u64cd\u4f5c"}):(Object(j["Eb"])({id:t,type:"article",is_like:F?0:1}),x(F?k-1:k+1),Y(!F),g({type:"action/saveLike",payload:{id:t,votes:F?k-1:k+1,isLiked:!F}})))},Ee=function(){Object(P["c"])()&&X(!0)},ye=function(e){I(e?C+1:C-1),$(e),g({type:"action/saveBookmark",payload:{id:t,bookmarks:e?C+1:C-1,bookmarkState:e}})};return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"functional-area-bottom text-center"},s.a.createElement(A["a"],{className:"btn-group like-group align-items-center",role:"group"},s.a.createElement(D["a"],{className:"btn mr-2 rounded",variant:"outline-primary",active:F,onClick:ge},s.a.createElement("i",{className:"far fa-thumbs-up"}),s.a.createElement("span",{className:"ml-1"},F?"\u5df2\u8d5e":"\u8d5e"),k>0&&s.a.createElement("span",{className:"mainLikeNum ml-1"},k)),s.a.createElement(D["a"],{className:"btn mr-2 rounded",variant:"outline-secondary",active:K,onClick:Ee},s.a.createElement("i",{className:"far fa-bookmark"}),s.a.createElement("span",{className:"ml-1"},K?"\u5df2\u6536\u85cf":"\u6536\u85cf"),C>0&&s.a.createElement("span",{className:"ml-1"},C)),!y&&s.a.createElement(R["a"],{className:"bottom-share-wrap"},s.a.createElement(R["a"].Toggle,{as:H["a"],className:"nav-tab-item  btn d-flex justify-content-center align-items-center"},s.a.createElement(D["a"],{className:"btn rounded",variant:"outline-secondary",active:!1},s.a.createElement("i",{className:"far fa-share-alt"}),s.a.createElement("span",{className:"ml-1"},"\u5206\u4eab"))),s.a.createElement(R["a"].Menu,{className:"dropdown-menu-down"},s.a.createElement("div",{className:"text-center mt-2",style:{cursor:"auto"}},s.a.createElement("div",{className:"qr"},s.a.createElement("img",{crossOrigin:"anonymous",src:fe,width:"118",height:"118"})),"\u626b\u4e00\u626b\u5206\u4eab"),s.a.createElement("div",{className:"dropdown-divider"}),s.a.createElement(R["a"].Item,{className:"p-0",onKeyDown:function(e){13===e.keyCode&&pe.current.click()}},s.a.createElement(B["a"],{title:se,url:te,image:b,ref:pe,className:"btn w-100 pl-4 pr-4 pt-1 pb-1 text-left"},s.a.createElement("i",{className:"fab fa-weibo fa-fw"})," \u65b0\u6d6a\u5fae\u535a")),s.a.createElement(R["a"].Item,{className:"p-0",onKeyDown:function(e){13===e.keyCode&&be.current.click()}},s.a.createElement(M["a"],{title:re,url:te,ref:be,className:"btn w-100 pl-4 pr-4 pt-1 pb-1 text-left"},s.a.createElement("i",{className:"fab fa-twitter fa-fw"})," Twitter")),s.a.createElement(R["a"].Item,{className:"p-0",onKeyDown:function(e){13===e.keyCode&&he.current.click()}},s.a.createElement(z["a"],{title:re,url:te,ref:he,className:"btn w-100 pl-4 pr-4 pt-1 pb-1 text-left"},s.a.createElement("i",{className:"fab fa-facebook fa-fw"})," Facebook")))))),s.a.createElement(q["a"],{id:t,isShow:Q,setShowStatus:X,setBookmarkedState:ye,source:"article",isBookmarked:d}),s.a.createElement("canvas",{hidden:!0,className:"qrcode"}))}),V=Object(I["connect"])((function(e){var t=e.action,a=e.global;return Object(i["a"])(Object(i["a"])({},t),{},{isBaiduOxApp:a.isBaiduOxApp})}))(s.a.memo(Y)),W=function(e){var t=e.type,a=e.licence;return s.a.createElement("div",{className:"font-size-14 text-secondary text-center mt-3 mb-5"},(0===t||1===t)&&s.a.createElement(s.a.Fragment,null,s.a.createElement("span",null,"\u672c\u4f5c\u54c1\u7cfb\u539f\u521b\uff0c"),"sa"===a?s.a.createElement("a",{target:"_blank",rel:"noreferrer",className:"text-secondary",href:"https://creativecommons.org/licenses/by-nc-sa/4.0/"},"\u91c7\u7528\u300a\u7f72\u540d-\u975e\u5546\u4e1a\u6027\u4f7f\u7528-\u76f8\u540c\u65b9\u5f0f\u5171\u4eab 4.0 \u56fd\u9645\u300b\u8bb8\u53ef\u534f\u8bae"):"nd"===a?s.a.createElement("a",{target:"_blank",rel:"noreferrer",className:"text-secondary",href:"https://segmentfault.com/tos#sec-licence-4"},"\u4f5c\u8005\u4fdd\u7559\u6240\u6709\u6743\u5229\uff0c\u672a\u7ecf\u4f5c\u8005\u5141\u8bb8\uff0c\u7981\u6b62\u8f6c\u8f7d\u548c\u6f14\u7ece"):s.a.createElement("a",{target:"_blank",rel:"noreferrer",className:"text-secondary",href:"https://creativecommons.org/licenses/by-nc-nd/4.0/"},"\u91c7\u7528\u300a\u7f72\u540d-\u975e\u5546\u4e1a\u6027\u4f7f\u7528-\u7981\u6b62\u6f14\u7ece 4.0 \u56fd\u9645\u300b\u8bb8\u53ef\u534f\u8bae")))},K=s.a.memo(W),$=a("p46w"),J=a.n($),G=function(e){var t=e.visible,a=e.payUrl,n=e.id,i=e.setShowPayAlert;if(!t)return null;var r=function(){J.a.set("job_".concat(n,"_hide"),1),i(!1)};return s.a.createElement(f["a"],{variant:"warning",className:"mb-4"},s.a.createElement("p",null,"\u8fd8\u5dee\u4e00\u6b65\uff0c\u4f60\u5c31\u53ef\u4ee5\u53d1\u5e03\u5230 ",s.a.createElement("strong",null,"\u9177\u5de5\u4f5c")," \u63d0\u9ad8\u66dd\u5149\u91cf\u5566\u3002"),s.a.createElement("div",null,s.a.createElement(D["a"],{variant:"danger",href:a},"\u652f\u4ed8 \uffe5100"),s.a.createElement(D["a"],{variant:"secondary ml-2",onClick:r},"\u653e\u5f03")))},Q=s.a.memo(G),X=a("kwfb"),Z=a("LtsZ"),ee=function(e){var t=e.originUrl,a=void 0===t?"":t,n=e.type;return s.a.createElement("div",{className:"bg-light my-4 p-3"},s.a.createElement("a",{className:"d-flex align-items-center text-body",href:a,target:"_blank",rel:"noreferrer"},s.a.createElement("div",{className:"d-flex align-items-center bg-secondary justify-content-center mr-3 rounded px-3",style:{width:"48px",height:"48px"}},s.a.createElement("i",{className:"far fa-file-alt font-size-20 text-white"})),s.a.createElement("div",{className:"media-body w-100"},s.a.createElement("div",{className:"text-body mb-0 font-weight-bold"},s.a.createElement("span",{style:{color:"#000"}},"\u672c\u6587\u7cfb",2===n?"\u8f6c\u8f7d":"\u7ffb\u8bd1","\uff0c\u9605\u8bfb\u539f\u6587")),s.a.createElement("div",{className:"font-size-13 text-secondary text-truncate w-75"},s.a.createElement("small",{style:{wordBreak:"break-word"}},a)))))},te=s.a.memo(ee),ae=a("heTN"),ne=a("EVdn"),ie=a("wwbV"),re=function(e){var t=e.blog,a=Object(l["useState"])((null===t||void 0===t?void 0:t.is_followed)||0),i=Object(r["a"])(a,2),c=i[0],d=i[1],u=function(){var e=Object(n["a"])(o.a.mark((function e(){return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(Object(P["c"])()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,Object(j["O"])({id:t.id,type:"blog",isFollow:c?0:1});case 4:return d(!c),e.abrupt("return",!0);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(l["useEffect"])((function(){ne(document.body).width()<576&&ne("#followUser button").addClass("col-12"),ne(window).resize((function(){ne(document.body).width()<576?ne("#followUser button").addClass("col-12"):ne("#followUser button").removeClass("col-12")}))})),s.a.createElement(s.a.Fragment,null,s.a.createElement("hr",{className:"mb-0"}),s.a.createElement("div",{className:"d-flex flex-sm-row align-items-center pt-4 row"},s.a.createElement("div",{className:"d-flex align-items-center col-sm w-0 col-12"},s.a.createElement("img",{className:"mr-3 rounded",width:"64",src:"https://image-static.segmentfault.com/383/303/3833030929-5ffd15fc110ab","aria-hidden":"true"}),s.a.createElement("div",{className:"w-100"},s.a.createElement("a",{href:null===t||void 0===t?void 0:t.url,className:"text-body"},s.a.createElement("h5",{className:"mb-0"},null===t||void 0===t?void 0:t.name)),(null===t||void 0===t?void 0:t.excerpt)&&s.a.createElement("div",{className:"text-truncate-1 text-secondary mt-2"},null===t||void 0===t?void 0:t.excerpt))),s.a.createElement("div",{className:"col-12 col-sm-auto mt-sm-0 mt-3",id:"followUser"},s.a.createElement(ie["a"],{onClick:u,className:"col-md-90"},c?"\u5df2\u5173\u6ce8":"\u5173\u6ce8\u4e13\u680f"))))},ce=s.a.memo(re),oe=a("LvDl"),le=a("Inh2"),se=function(e){var t,n,i=e.detail,c=e.actionData,o=e.actions,d=e.initPage,u=e.imageUrl,m=e.isEditor,f=e.isAuthor,v=e.memberActions,b=e.articleHtml,g=e.lang,E=e.payInfo,y=e.isBaiduOxApp,w=void 0!==y&&y,k=Object(l["useState"])(Object(Z["isBrowser"])()?"":"https://cdn.segmentfault.com/r-0ee432a0/"),x=Object(r["a"])(k,2),N=x[0],S=x[1],C=i.article,L=i.blog,A=Object(l["useState"])(!1),D=Object(r["a"])(A,2),R=D[0],B=D[1],M=Object(l["useState"])(Object(Z["isBrowser"])()?(null===(t=document.querySelector(".article.fmt"))||void 0===t?void 0:t.innerHTML)||C.parsed_text:b),z=Object(r["a"])(M,2),q=z[0],P=z[1],F=Object(l["useState"])(!1),U=Object(r["a"])(F,2),H=U[0],Y=U[1],W=Object(I["useDispatch"])();Object(Z["isBrowser"])()&&!R&&(window.articleHtml=(null===(n=document.querySelector(".article.fmt"))||void 0===n?void 0:n.innerHTML)||"");return Object(l["useEffect"])((function(){if(!q){var e=Object(le["a"])();e.errorEvent({eventName:"articleContent"}),Object(j["f"])({aid:C.id,pure:1}).then((function(e){W({type:"articleDetail/saveArticleHtml",payload:{id:C.id,parsed_text:null===e||void 0===e?void 0:e.parsed_text}}),P(null===e||void 0===e?void 0:e.parsed_text)}))}}),[q]),Object(l["useEffect"])((function(){if(!Object(oe["isEmpty"])(i)){var e=new h.a;e.update()}})),Object(l["useEffect"])((function(){B(!0),S(window.publicPath||""),W({type:"articleDetail/saveArticleHtml",payload:{id:C.id,parsed_text:window.articleHtml}})}),[]),Object(l["useEffect"])((function(){C.parsed_text&&P(C.parsed_text)}),[C.parsed_text]),Object(l["useEffect"])((function(){if(!Object(oe["isEmpty"])(i)){var e=new h.a;e.update()}})),Object(l["useEffect"])((function(){null!==C&&void 0!==C&&C.id&&J.a.get("job_".concat(null===C||void 0===C?void 0:C.id,"_hide"))>0?Y(!1):Y(!0)}),[null===C||void 0===C?void 0:C.id]),s.a.createElement(s.a.Fragment,null,s.a.createElement(I["Helmet"],null,s.a.createElement("meta",{name:"twitter:card",content:u?"summary_large_image":"summary"}),s.a.createElement("meta",{name:"twitter:image",content:u||"".concat(N,"touch-icon.png")}),s.a.createElement("meta",{name:"twitter:site",content:"@segment_fault"}),s.a.createElement("meta",{name:"twitter:creator",content:"@segmentfault"}),s.a.createElement("meta",{name:"twitter:title",content:null===C||void 0===C?void 0:C.title}),s.a.createElement("meta",{name:"og:type",content:"article"}),s.a.createElement("meta",{name:"og:image",content:u||"".concat(N,"touch-icon.png")}),s.a.createElement("meta",{name:"og:title",content:null===C||void 0===C?void 0:C.title}),s.a.createElement("meta",{name:"msvalidate.01",content:"2C018C53297C8388F3E7052F5E9CA6AF"}),s.a.createElement("meta",{name:"event-object",value:'{"current": ["article", ["'.concat(null===C||void 0===C?void 0:C.id,'"]], "root": ["article", "').concat(null===C||void 0===C?void 0:C.id,'"]}'),id:"SFEventObject"}),s.a.createElement("script",{type:"application/ld+json"},'{\n            "@context": "https://schema.org",\n            "@type": "Article",\n            "mainEntityOfPage": {\n              "@type": "WebPage",\n              "@id": "https://google.com/article"\n            },\n            "name": '.concat(JSON.stringify((null===C||void 0===C?void 0:C.title)||""),',\n            "headline": ').concat(JSON.stringify((null===C||void 0===C?void 0:C.title)||""),',\n            "image": "').concat(null!==C&&void 0!==C&&C.cover?null===C||void 0===C?void 0:C.cover:u||"".concat(N,"touch-icon.png"),'",\n            "datePublished": "').concat(O.a.unix(null===C||void 0===C?void 0:C.created).toISOString(),'",\n            "dateModified": "').concat(O.a.unix((null===C||void 0===C?void 0:C.created)>(null===C||void 0===C?void 0:C.modified)?null===C||void 0===C?void 0:C.created:null===C||void 0===C?void 0:C.modified).toISOString(),'",\n            "url": "https://segmentfault.com/a/').concat(null===C||void 0===C?void 0:C.id,'",\n            "author": {\n              "@type": "Person",\n              "name": ').concat(JSON.stringify(null===C||void 0===C?void 0:C.user.name),'\n            },\n            "publisher": {\n              "@type": "Organization",\n              "name": "SegmentFault",\n              "logo": {\n                "@type": "ImageObject",\n                "url":\n                  "https://assets.segmentfault.com/v-5fc4b0b2/global/img/static/touch-icon.png"\n              }\n            }\n          }'))),s.a.createElement(p["a"],{className:"mb-4"},(null===C||void 0===C?void 0:C.cover)&&s.a.createElement(p["a"].Img,{variant:"top",src:a("xQMv"),className:"w-100 rounded-top",style:{background:"no-repeat center url(".concat(C.cover,")"),backgroundSize:"cover"},alt:"\u5934\u56fe"}),s.a.createElement(p["a"].Body,{className:"p-lg-30 position-relative"},s.a.createElement(_,{title:null===C||void 0===C?void 0:C.title,user:null===C||void 0===C?void 0:C.user,id:null===C||void 0===C?void 0:C.id,created:null===C||void 0===C?void 0:C.created,modified:null===C||void 0===C?void 0:C.modified,initPage:d,actions:o,member_actions:v,langs:null===C||void 0===C?void 0:C.langs,lang:g}),s.a.createElement(X["a"],{name:"25"}),s.a.createElement(Q,{visible:f&&!1===(null===E||void 0===E?void 0:E.paid)&&H,payUrl:null===E||void 0===E?void 0:E.pay_url,id:null===C||void 0===C?void 0:C.id,setShowPayAlert:Y}),s.a.createElement("article",{className:"article fmt article-content ",dangerouslySetInnerHTML:{__html:q}}),!w&&s.a.createElement(ae["a"],{tags:null===C||void 0===C?void 0:C.tags}),(null===C||void 0===C?void 0:C.article_type)>1&&s.a.createElement(te,{originUrl:null===C||void 0===C?void 0:C.origin_url,type:null===C||void 0===C?void 0:C.article_type}),s.a.createElement("div",{className:"my-4"},s.a.createElement(X["a"],{name:"3"})),s.a.createElement(T,{realRed:null===C||void 0===C?void 0:C.real_unique_views,read:null===C||void 0===C?void 0:C.real_views,created:null===C||void 0===C?void 0:C.created,modified:null===C||void 0===C?void 0:C.modified,id:null===C||void 0===C?void 0:C.id,actions:o,initPage:d,isEditor:m,memberActions:v}),s.a.createElement(V,{id:null===C||void 0===C?void 0:C.id,title:null===C||void 0===C?void 0:C.title,votes:null===c||void 0===c?void 0:c.votes,isLiked:null===c||void 0===c?void 0:c.isLiked,isBookmarked:null===c||void 0===c?void 0:c.bookmarkState,bookmarks:null===c||void 0===c?void 0:c.bookmarks,banner:null===C||void 0===C?void 0:C.cover,isAuthor:f}),s.a.createElement(K,{type:null===C||void 0===C?void 0:C.article_type,licence:null===L||void 0===L?void 0:L.licence}),(null===L||void 0===L?void 0:L.id)&&!w&&s.a.createElement(ce,{blog:L}))))},de=s.a.memo(se),ue=a("cor7"),me=a("sjrs"),fe=function(e){var t,a=e.data;return s.a.createElement("a",{className:"list-group-item list-group-item-action py-3",href:"".concat(null===a||void 0===a?void 0:a.url,"?utm_source=sf-similar-article"),target:"_blank"},s.a.createElement("h5",{className:"h5 mb-2 text-break",style:{color:"#212529"}},null===a||void 0===a?void 0:a.title),s.a.createElement("p",{className:"mb-2 text-truncate text-secondary"},null===a||void 0===a?void 0:a.excerpt),s.a.createElement("p",{className:"d-flex align-items-center font-size-14 mb-0"},s.a.createElement("span",{className:"text-primary"},null===a||void 0===a||null===(t=a.user)||void 0===t?void 0:t.name),(null===a||void 0===a?void 0:a.views)>0&&s.a.createElement(s.a.Fragment,null,s.a.createElement("span",{className:"split-dot"}),s.a.createElement("span",null,"\u9605\u8bfb ",Object(x["g"])(null===a||void 0===a?void 0:a.views))),(null===a||void 0===a?void 0:a.votes)>0&&s.a.createElement(s.a.Fragment,null,s.a.createElement("span",{className:"split-dot"}),s.a.createElement("span",null,Object(x["g"])(null===a||void 0===a?void 0:a.votes)," \u8d5e")),(null===a||void 0===a?void 0:a.comments)>0&&s.a.createElement(s.a.Fragment,null,s.a.createElement("span",{className:"split-dot"}),s.a.createElement("span",null,Object(x["g"])((null===a||void 0===a?void 0:a.comments)||0)," \u8bc4\u8bba"))))},ve=s.a.memo(fe),pe=(a("wroQ"),function(e){var t=e.list,a=void 0===t?[]:t;return a.length?s.a.createElement(p["a"],{className:"mt-4"},s.a.createElement(p["a"].Header,{as:"h5",className:"bg-transparent"},"\u7ee7\u7eed\u9605\u8bfb"),s.a.createElement(me["a"],{className:"recommend-list-wrap"},s.a.createElement("div",{className:"card border-0"},s.a.createElement("div",{className:"list-group list-group-flush"},a.map((function(e){return s.a.createElement(ve,{key:null===e||void 0===e?void 0:e.id,data:e})})))))):null}),be=s.a.memo(pe),he=a("6T2I"),ge=function(e){var t,a,n,i,r,c,o,l=e.id,d=e.extra,u=e.status,m=e.sessionUser,v=void 0===m?{}:m;return s.a.createElement(s.a.Fragment,null,"rejected"===u&&s.a.createElement(f["a"],{className:"mb-3",variant:"warning"},s.a.createElement("div",{className:""},s.a.createElement("div",{dangerouslySetInnerHTML:{__html:d.reason}}),s.a.createElement("div",null,s.a.createElement("span",null,"\u4f60\u53ef\u4ee5"),s.a.createElement("a",{href:"/a/".concat(l,"/edit")}," \u518d\u6b21\u7f16\u8f91 "),s.a.createElement("span",null,"\u4ee5\u91cd\u65b0\u53d1\u8868"))),s.a.createElement("div",{className:"mt-3"},"\u6ce8\u610f\uff1a\u5982\u679c\u8be5\u5185\u5bb9"),s.a.createElement("ul",null,s.a.createElement("li",null,"\u8fde\u7eed 3 \u6b21\u53d1\u8868\u672a\u901a\u8fc7"),s.a.createElement("li",null,"\u53d1\u8868\u672a\u6210\u529f\u4e00\u5468\u5185\u672a\u505a\u4efb\u4f55\u6539\u52a8")),s.a.createElement("div",{className:"mt-3"},"\u90fd\u5c06\u88ab\u7cfb\u7edf\u81ea\u52a8\u5220\u9664\uff0c\u5982\u6709\u5fc5\u8981\uff0c\u8bf7\u505a\u597d\u5907\u4efd\u3002")),"deleted"===u&&s.a.createElement(f["a"],{className:"mb-3",variant:"warning"},s.a.createElement("span",{dangerouslySetInnerHTML:{__html:d.reason}}),(null===d||void 0===d?void 0:d.operator)&&s.a.createElement("div",null,"\u64cd\u4f5c\u8005\uff1a",s.a.createElement("a",{href:null===d||void 0===d||null===(t=d.operator)||void 0===t?void 0:t.url},null===d||void 0===d||null===(a=d.operator)||void 0===a?void 0:a.name))),"hidden"===u&&(null===v||void 0===v||null===(n=v.roles)||void 0===n?void 0:n.is_editor)&&s.a.createElement(f["a"],{className:"mb-3",variant:"warning"},s.a.createElement("div",{dangerouslySetInnerHTML:{__html:d.reason}}),null!==d&&void 0!==d&&d.operator?s.a.createElement("div",null,"\u64cd\u4f5c\u8005\uff1a",s.a.createElement("a",{href:null===d||void 0===d||null===(i=d.operator)||void 0===i?void 0:i.url},null===d||void 0===d||null===(r=d.operator)||void 0===r?void 0:r.name)):""),"locked"===u&&s.a.createElement(f["a"],{className:"mb-3",variant:"warning"},s.a.createElement("div",{dangerouslySetInnerHTML:{__html:d.reason}}),s.a.createElement("div",null,"\u64cd\u4f5c\u8005\uff1a",s.a.createElement("a",{href:null===d||void 0===d||null===(c=d.operator)||void 0===c?void 0:c.url},null===d||void 0===d||null===(o=d.operator)||void 0===o?void 0:o.name),s.a.createElement("br",null),"\u64cd\u4f5c\u8005\u65f6\u95f4\uff1a",O.a.unix(null===d||void 0===d?void 0:d.operator_time).format("YYYY-MM-DD HH:mm"))))},Ee=ge,ye=function(e){var t,a,i,c=e.user,d=Object(l["useState"])(null!==c&&void 0!==c&&c.is_followed?1:0),u=Object(r["a"])(d,2),m=u[0],f=u[1],v=Object(l["useState"])(null===c||void 0===c?void 0:c.followers),b=Object(r["a"])(v,2),h=b[0],g=b[1],E=function(){var e=Object(n["a"])(o.a.mark((function e(){return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(Object(P["c"])()){e.next=2;break}return e.abrupt("return",!1);case 2:return Object(j["O"])({id:c.id,type:"user",isFollow:m?0:1}).then((function(e){g(null!==e&&void 0!==e&&e.is_followed?h+1:h-1),f(null===e||void 0===e?void 0:e.is_followed)})),e.abrupt("return",!0);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return s.a.createElement(p["a"],{className:"mb-4"},s.a.createElement(p["a"].Body,null,s.a.createElement("div",{className:"d-flex align-items-center mb-3"},s.a.createElement("picture",{className:"rounded-circle mr-3"},s.a.createElement("a",{href:null===c||void 0===c?void 0:c.url},s.a.createElement("img",{src:(null===c||void 0===c?void 0:c.avatar_url)||"https://image-static.segmentfault.com/317/931/3179314346-5f61e47221e07",alt:"avatar",width:"64",height:"64",className:"rounded-circle"}))),s.a.createElement("div",null,s.a.createElement("h5",{className:"mb-0"},s.a.createElement("a",{href:null===c||void 0===c?void 0:c.url,className:"text-body"},null===c||void 0===c?void 0:c.name)),Boolean(null===c||void 0===c||null===(t=c.user_auth)||void 0===t?void 0:t.is_auth)&&(null===c||void 0===c||null===(a=c.user_auth)||void 0===a?void 0:a.info)&&s.a.createElement("div",{className:"mt-2 font-size-14 authentication-info"},s.a.createElement("i",{className:"mr-1 text-warning fas fa-badge-check"}),null===c||void 0===c||null===(i=c.user_auth)||void 0===i?void 0:i.info))),(null===c||void 0===c?void 0:c.excerpt)&&s.a.createElement("div",{className:"text-secondary text-truncate-2 userExcerpt mb-3",dangerouslySetInnerHTML:{__html:null===c||void 0===c?void 0:c.excerpt}}),s.a.createElement("div",{className:"d-flex align-items-center mb-3"},s.a.createElement("div",{className:"mr-4"},s.a.createElement("strong",null,null===c||void 0===c?void 0:c.rankWord),s.a.createElement("span",{className:"text-secondary"}," \u58f0\u671b")),s.a.createElement("div",null,s.a.createElement("strong",null,Object(x["g"])(h)||0),s.a.createElement("span",{className:"text-secondary"}," \u7c89\u4e1d"))),s.a.createElement(ie["a"],{block:!0,variant:"primary",onClick:E},m?"\u5df2\u5173\u6ce8":"\u5173\u6ce8\u4f5c\u8005")))},Oe=s.a.memo(ye),je=a("DZHF"),we=(a("47/0"),function(e){var t=e.onOpen,a=Object(l["useState"])(void 0),n=Object(r["a"])(a,2),i=n[0],c=n[1],o=function(e){e?(c(90),t&&t("open")):(c(void 0),t&&t("close"))};return s.a.createElement(je["a"],{onSelect:o,"data-article-nav":!0},s.a.createElement(p["a"],{className:"overflow-hidden d-none d-xl-flex"},s.a.createElement(p["a"].Body,null,s.a.createElement(je["a"].Toggle,{as:H["a"],eventKey:"1",domType:"div"},s.a.createElement("h6",{className:"nav-header h6 p-0 m-0"},s.a.createElement("i",{className:"fas fa-play fa-rotate-".concat(i)}),s.a.createElement("span",null," \u76ee\u5f55"))),s.a.createElement(je["a"].Collapse,{eventKey:"1",id:"collapseTarget"},s.a.createElement("nav",{id:"article-nav-list",className:"d-flex flex-column font-size-14","data-article-nav-list":!0})))))}),ke=s.a.memo(we),xe=a("iG+T"),Ne=a("fWQN"),_e=a("mtLc"),Se=(a("2EET"),function(){function e(t,a){Object(Ne["a"])(this,e),this.$parent=void 0,this.$article=void 0,this.$headList=void 0,this.$parent=t,this.$article=a,this.init()}return Object(_e["a"])(e,[{key:"buildNavTitle",value:function(){var e,t,a=this;for(t=1;t<=3;t++)if(this.$article.find("h"+t).length){e=3===t?this.$article.find("h"+t):this.$article.find("h".concat(t,", h").concat(t+1));break}var n=0,i=0;return e&&e.length&&e.each((function(e,r){r.nodeName.substr(1,1)==t?(n++,ne(r).attr("id","item-".concat(n)),a.$parent.append('<a class="nav-link text-secondary p-0 my-1 text-truncate" scroll-href="#item-'.concat(n,'" href="javascript:;">').concat(ne(r).text(),"</a>"))):(i++,ne(r).attr("id","item-".concat(n,"-").concat(i)),a.$parent.append('<a class="nav-link text-secondary py-0 pr-0 my-1 text-truncate" scroll-href="#item-'.concat(n,"-").concat(i,'" href="javascript:;">').concat(ne(r).text(),"</a>")))})),!!(e&&e.length>5)&&!!e}},{key:"init",value:function(){if(this.$parent){var e=this.buildNavTitle();if(e){if(this.$parent.parents("div[data-article-nav]").show(),this.$parent.find("a").length>10){var t=a("qAqF");t.initEl(this.$parent[0])}ne(document).on("click","[data-article-nav] a",(function(){var e,t=ne(this).attr("scroll-href");ne("div[data-article-nav] a").addClass("text-secondary"),ne(this).removeClass("text-secondary");var a=null===(e=document.querySelector(t))||void 0===e?void 0:e.offsetTop;window.scrollTo({top:a,behavior:"auto"})}))}else this.$parent.parents("div[data-article-nav]").remove()}}}]),e}()),Ce=a("paDM"),Ie=a("YKRR"),Le=function(e){var t,a,n,i;if(!(ne(document.body).width()<576)){var r=ne(window).scrollTop(),c=(null===(t=ne("#gridAd"))||void 0===t||null===(a=t.offset())||void 0===a?void 0:a.top)||0,o=ne("#gridAd").height(),l=ne("#first-ad").height(),s=ne("#second-ad").height(),d=ne("#author").height(),u=ne("#collapseTarget").hasClass("show"),m=ne("#sf-header").height()+20,f=(null===(n=document)||void 0===n||null===(i=n.getElementById("footer"))||void 0===i?void 0:i.getBoundingClientRect().top)||0;if(f-50<l+s+d)Object(oe["debounce"])((function(){ne("#first-ad").removeClass("data-fix").animate(),ne("#cataLog").removeClass("data-fix").css({top:"atuo"}).animate(),ne("#author").removeClass("data-fix").css({top:"atuo"}).animate(),ne("#second-ad").removeClass("data-fix").css({top:"auto",marginTop:0}).animate()}),200)();else if(r>c+o/2){if("open"===e)return ne("#cataLog").addClass("data-fix").css({top:"".concat(m,"px")}),ne("#first-ad").removeClass("data-fix").css({top:"auto"}),void ne("#second-ad").removeClass("data-fix").css({top:"auto"});if("close"===e)return ne("#cataLog").removeClass("data-fix"),ne("#first-ad").css({top:"".concat(m+d+20,"px")}).addClass("data-fix"),void ne("#second-ad").css({top:"".concat(m+l+d+45,"px")}).addClass("data-fix");u?(ne("#author").css({top:"".concat(m+20,"px")}).addClass("data-fix"),ne("#cataLog").addClass("data-fix").css({top:"".concat(m+d-4,"px")})):(ne("#author").css({top:"".concat(m+20,"px")}).addClass("data-fix"),ne("#first-ad").css({top:"".concat(m+d+20,"px")}).addClass("data-fix"),ne("#second-ad").css({top:"".concat(m+l+d+45,"px")}).addClass("data-fix"))}else ne("#author").removeClass("data-fix").css({top:"atuo"}),ne("#first-ad").removeClass("data-fix"),ne("#second-ad").removeClass("data-fix").css({top:"auto",marginTop:0}),ne("#cataLog").removeClass("data-fix").css({top:"auto"})}},Te=a("nlcd"),Ae=(a("SoKV"),a("Ty5D")),De=(a("PmrS"),a("PFmq")),Re=a("9F+u"),Be=a("2CDT"),Me=Object(oe["debounce"])((function(){ne("#collapseTarget").animate({scrollTop:0})}),150),ze=function(e){if(null!==e&&void 0!==e&&e.length)for(var t=0;t<e.length;t++){var a,n,i=(null===(a=document)||void 0===a||null===(n=a.getElementById(e[t].substr(1)))||void 0===n?void 0:n.getBoundingClientRect().top)||0;if(i>0&&i<60){if(t>0&&t%9===0){var r=e.length>16?8*Math.floor(t/9)*25:25*(e.length-8);ne("#collapseTarget").animate({scrollTop:r})}else t<9&&t>=0&&Me();ne("div[data-article-nav] a").addClass("text-secondary"),ne(ne("#article-nav-list a")[t]).removeClass("text-secondary")}}},qe=new x["a"],Pe=!0,Fe=function e(t){var a,n,c,o,p,b=t.artDetail,h=t.action,g=t.match,E=t.dispatch,y=t.sessionUser,O=t.articleRelated,w=t.isBaiduOxApp,k=void 0!==w&&w,N=Object(Ae["j"])(),_=Object(l["useRef"])(null);_.current=null===y||void 0===y||null===(a=y.user)||void 0===a?void 0:a.id;var S=g,C=S.params,I=C.aid,L=C.lang,T=void 0===L?"":L,A=b[I]||{},D=A.article,R=void 0===D?{}:D,B=A.actions,M=A.extra,z=A.member_actions,q=A.tag,P=void 0===q?{}:q,F=A.description,U=A.keywords,H=A.pay_info,Y=h[I]||{},V=Y.votes,W=void 0===V?0:V,K=Y.isLiked,$=Y.isHated,J=Y.bookmarks,G=void 0===J?0:J,Q=Y.bookmarkState,Z=(null===y||void 0===y?void 0:y.roles)||{},ee=Z.is_editor,te=Number(null===R||void 0===R||null===(n=R.user)||void 0===n?void 0:n.id)===(null===y||void 0===y||null===(c=y.user)||void 0===c?void 0:c.id),ae=Object(l["useState"])(!1),ie=Object(r["a"])(ae,2),re=ie[0],ce=ie[1],le=Object(l["useState"])(""),se=Object(r["a"])(le,2),me=se[0],fe=se[1],ve=Object(l["useState"])(null),pe=Object(r["a"])(ve,2),ge=pe[0],ye=pe[1];Object(l["useEffect"])((function(){Object(oe["isEmpty"])(b[I])&&E({type:"articleDetail/getArtDetail",payload:{aid:I,lang:T},callback:function(e){"error"===e&&N.replace("/404")}}),E({type:"articleDetail/getRelated",payload:I})}),[I]),Object(l["useEffect"])((function(){if(null!==R&&void 0!==R&&R.tags){var e,t=null===R||void 0===R?void 0:R.tags.map((function(e){return e.name})),a=null===t||void 0===t?void 0:t.join(",");Object(Be["a"])(a,null===y||void 0===y||null===(e=y.user)||void 0===e?void 0:e.rank)}}),[null===R||void 0===R?void 0:R.tags]);var je=function(){E({type:"articleDetail/getArtDetail",payload:{aid:I},callback:function(){window.scroll(0,0)}})};Object(l["useEffect"])((function(){var e=Object(x["d"])(window.location.href,"openShare");return ce(Boolean("true"===e)),Object(Te["a"])(),window.addEventListener("scroll",(function(){return Le("")})),Object(Re["a"])("article"),function(){window.removeEventListener("scroll",(function(){return Le("")})),window.removeEventListener("scroll",(function(){return ze("")}))}}),[]),Object(l["useEffect"])((function(){if(!Object(oe["isEmpty"])(R)){var e=new URL(window.location.href).searchParams.get("_ea")||"";e&&Object(j["yb"])(e).then((function(e){ye(e)})),new Se(ne("nav[data-article-nav-list]"),ne("article.article-content")),E({type:"global/saveTitle",payload:{title:R.title}}),E({type:"global/pushPageUser",payload:{pathName:window.location.pathname,users:[R.user]}}),E({type:"global/saveHeadOptions",payload:{keywords:U,description:F}});var t=document.querySelector(".article.fmt");if(qe.render(t),ne(window).resize((function(){ne(document.body).width()<576&&ne("#first-ad").removeClass("data-fix")})),ne(document.body).width()<576)return void ne("article.article img").change((function(e){e.each((function(e,t){var a=t.getAttribute("src"),n=t.getAttribute("data-src"),i="";if(a=n||a,a){var r=a.indexOf("?");r>0&&(i=a.substring(r),a=a.substring(0,r)),a.match(/^\/img\//)&&!a.match(/\/view$/)&&(a=a+"/view"+i,t.setAttribute(n?"data-src":"src",a),t.setAttribute("data-src",a))}}))}),(function(e){e.each((function(e,t){var a=t.getAttribute("src"),n=t.getAttribute("data-src"),i="";if(a=n||a,a){var r=a.indexOf("?");r>0&&(i=a.substring(r),a=a.substring(0,r)),a.match(/^\/img\//)&&a.match(/\/view$/)&&(a=a.substring(0,a.length-5)+i,t.setAttribute(n?"data-src":"src",a))}}))}));var a=ne("article.article img");if((null===a||void 0===a?void 0:a.length)>0){var n,i=a[0].getAttribute("src"),r=a[0].getAttribute("data-src");i=r||i,!i||null!==(n=i)&&void 0!==n&&n.includes("http")||(i="".concat(window.location.origin).concat(i)),fe(i||"")}}}),[R.id]);var we=function(e){Le(e),setTimeout((function(){if("open"===e&&Pe){Pe=!1;for(var t=[],a=ne("#article-nav-list a"),n=0;n<a.length;n++){var i=ne(a[n]).attr("scroll-href");t.push(i)}if(!t.length)return;ne(ne("#article-nav-list a")[0]).removeClass("text-secondary"),window.addEventListener("scroll",(function(){return ze(t)}))}}),100)};return b[I]?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"d-none d-xl-flex justify-content-center"},s.a.createElement(X["a"],{name:"2"})),s.a.createElement(d["a"],{className:"article-content"},s.a.createElement(he["a"],{className:"mx-4 mx-md-0",data:[{name:"\u4e13\u680f",url:"/blogs"},Object(i["a"])(Object(i["a"])({},P),{},{url:"".concat(null===P||void 0===P?void 0:P.url,"/blogs")}),{name:"\u6587\u7ae0\u8be6\u60c5",url:"###"}]}),s.a.createElement(u["a"],null,s.a.createElement(m["a"],{className:"col-12 col-xl w-0"},(null===R||void 0===R?void 0:R.status_key)&&(null===M||void 0===M?void 0:M.reason)&&s.a.createElement(Ee,{id:I,extra:M,sessionUser:y,status:null===R||void 0===R?void 0:R.status_key}),"deleted"===(null===R||void 0===R?void 0:R.status_key)&&!(null!==M&&void 0!==M&&M.reason)&&s.a.createElement(f["a"],{className:"mb-3",variant:"warning"},s.a.createElement("span",null,"\u8fd9\u7bc7\u6587\u7ae0\u5df2\u88ab\u5220\u9664")),s.a.createElement(v["a"],{id:null===R||void 0===R?void 0:R.id,votes:W,title:null===R||void 0===R?void 0:R.title,isLiked:K,isBookmarked:Q,bookmarks:G,showShare:re,banner:(null===R||void 0===R?void 0:R.cover)||me,isAuthor:te,source:"article"}),s.a.createElement(de,{detail:b[I],articleHtml:e.articleHtml,actionData:{votes:W,isLiked:K,isHated:$,bookmarks:G,bookmarkState:Q},actions:B,initPage:je,imageUrl:R.cover,isEditor:ee,isAuthor:te,memberActions:z,lang:T,payInfo:H,isBaiduOxApp:k}),s.a.createElement("div",{className:"d-block d-xl-none mt-sm-4"},(null===R||void 0===R||null===(o=R.user)||void 0===o?void 0:o.url)&&s.a.createElement(Oe,{user:null===R||void 0===R?void 0:R.user})),s.a.createElement(ue["a"],{id:I,event_object:ge,user:R.user,isFetchComments:R.comments>0}),Object(oe["isEmpty"])(y)&&s.a.createElement(xe["a"],null),s.a.createElement(be,{list:O})),s.a.createElement(m["a"],{className:"col-12 col-xl-auto"},s.a.createElement("div",{className:"w-xl-300"},s.a.createElement("div",{className:"w-xl-300 d-none d-xl-block",id:"author"},(null===R||void 0===R||null===(p=R.user)||void 0===p?void 0:p.url)&&s.a.createElement(Oe,{user:null===R||void 0===R?void 0:R.user})),s.a.createElement("div",{className:"w-xl-300 mb-4",id:"first-ad"},s.a.createElement("div",{className:"card border-0 overflow-hidden d-none d-xl-flex justify-content-center align-items-center float-ads"},s.a.createElement(X["a"],{name:"1"}))),s.a.createElement("div",{id:"gridAd",className:"d-none d-xl-block mb-4"},s.a.createElement(Ce["a"],null)),s.a.createElement("div",{id:"second-ad",className:"d-none d-xl-block"},s.a.createElement(X["a"],{name:"31"})),s.a.createElement("div",{id:"cataLog",className:"d-none d-xl-block w-xl-300 mt-4"},s.a.createElement(ke,{onOpen:we}))))),s.a.createElement(Ie["a"],null))):null};Fe.getInitialProps=Object(De["a"])({requireState:["articleDetail.artDetail"]},function(){var e=Object(n["a"])(o.a.mark((function e(t){var a,n,r,c,l,s,d,u,m,f,v,p,b,h,g;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.store,n=t.match,r=t.isServer,c=t.serverData,l=void 0===c?{}:c,r){e.next=3;break}return e.abrupt("return");case 3:return s=n,d=s.params,u=d.aid,m=d.lang,f=void 0===m?"":m,v=new j["y"]({token:l.Token,userAgent:l.userAgent}),e.next=7,Promise.allSettled([a.dispatch({type:"articleDetail/getArtDetail",payload:{aid:u,lang:f,isServerLoaded:!0},api:v})]);case 7:return Object(oe["isEmpty"])(a.getState().articleDetail.artDetail[u])||(p=a.getState().articleDetail.artDetail[u],b=p.article,h=p.keywords,g=p.description,Fe.articleHtml=b.parsed_text,a.dispatch({type:"global/saveTitle",payload:{title:b.title}}),a.dispatch({type:"global/saveHeadOptions",payload:{keywords:h,description:g}}),a.dispatch({type:"articleDetail/saveArticleHtml",payload:{id:u,parsed_text:""}})),e.abrupt("return",Object(i["a"])({},a.getState()));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());t["default"]=Object(I["connect"])((function(e){var t=e.articleDetail,a=e.action,n=e.global;return Object(i["a"])(Object(i["a"])({},t),{},{action:a,sessionUser:n.sessionUser,isBaiduOxApp:n.isBaiduOxApp})}))(Fe)},pHGr:function(e,t,a){!function(t,n){e.exports=n(a("Wgwc"))}(0,(function(e){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e;var t={name:"zh-cn",weekdays:"\u661f\u671f\u65e5_\u661f\u671f\u4e00_\u661f\u671f\u4e8c_\u661f\u671f\u4e09_\u661f\u671f\u56db_\u661f\u671f\u4e94_\u661f\u671f\u516d".split("_"),weekdaysShort:"\u5468\u65e5_\u5468\u4e00_\u5468\u4e8c_\u5468\u4e09_\u5468\u56db_\u5468\u4e94_\u5468\u516d".split("_"),weekdaysMin:"\u65e5_\u4e00_\u4e8c_\u4e09_\u56db_\u4e94_\u516d".split("_"),months:"\u4e00\u6708_\u4e8c\u6708_\u4e09\u6708_\u56db\u6708_\u4e94\u6708_\u516d\u6708_\u4e03\u6708_\u516b\u6708_\u4e5d\u6708_\u5341\u6708_\u5341\u4e00\u6708_\u5341\u4e8c\u6708".split("_"),monthsShort:"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),ordinal:function(e,t){switch(t){case"W":return e+"\u5468";default:return e+"\u65e5"}},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY\u5e74M\u6708D\u65e5",LLL:"YYYY\u5e74M\u6708D\u65e5Ah\u70b9mm\u5206",LLLL:"YYYY\u5e74M\u6708D\u65e5ddddAh\u70b9mm\u5206",l:"YYYY/M/D",ll:"YYYY\u5e74M\u6708D\u65e5",lll:"YYYY\u5e74M\u6708D\u65e5 HH:mm",llll:"YYYY\u5e74M\u6708D\u65e5dddd HH:mm"},relativeTime:{future:"%s\u5185",past:"%s\u524d",s:"\u51e0\u79d2",m:"1 \u5206\u949f",mm:"%d \u5206\u949f",h:"1 \u5c0f\u65f6",hh:"%d \u5c0f\u65f6",d:"1 \u5929",dd:"%d \u5929",M:"1 \u4e2a\u6708",MM:"%d \u4e2a\u6708",y:"1 \u5e74",yy:"%d \u5e74"},meridiem:function(e,t){var a=100*e+t;return a<600?"\u51cc\u6668":a<900?"\u65e9\u4e0a":a<1100?"\u4e0a\u5348":a<1300?"\u4e2d\u5348":a<1800?"\u4e0b\u5348":"\u665a\u4e0a"}};return e.locale(t,null,!0),t}))},paDM:function(e,t,a){"use strict";var n=a("q1tI"),i=a.n(n),r=a("6xyR"),c=(a("nWVH"),a("kwfb")),o=function(){return i.a.createElement(r["a"],null,i.a.createElement(r["a"].Header,{className:"bg-white border-0"},i.a.createElement("h5",{className:"mb-0"},"\u5ba3\u4f20\u680f")),i.a.createElement(r["a"].Body,null,i.a.createElement("div",{className:"mb-3"},i.a.createElement(c["a"],{name:"7"})),i.a.createElement("div",{className:"mb-3"},i.a.createElement(c["a"],{name:"9"})),i.a.createElement("div",null,i.a.createElement(c["a"],{name:"10"}))))};t["a"]=i.a.memo(o)},qAqF:function(e,t,a){(function(t,a){e.exports=a(window,document)})(0,(function(e,t){var a=e.requestAnimationFrame||e.setImmediate||function(e){return setTimeout(e,0)};function n(e){Object.prototype.hasOwnProperty.call(e,"data-simple-scrollbar")||Object.defineProperty(e,"data-simple-scrollbar",{value:new o(e)})}function i(e,n){var i;function r(e){var t=e.pageY-i;i=e.pageY,a((function(){n.el.scrollTop+=t/n.scrollRatio}))}function c(){e.classList.remove("ss-grabbed"),t.body.classList.remove("ss-grabbed"),t.removeEventListener("mousemove",r),t.removeEventListener("mouseup",c)}e.addEventListener("mousedown",(function(a){return i=a.pageY,e.classList.add("ss-grabbed"),t.body.classList.add("ss-grabbed"),t.addEventListener("mousemove",r),t.addEventListener("mouseup",c),!1}))}function r(a){this.target=a,this.direction=e.getComputedStyle(this.target).direction,this.bar='<div class="ss-scroll">',this.wrapper=t.createElement("div"),this.wrapper.setAttribute("class","ss-wrapper"),this.el=t.createElement("div"),this.el.setAttribute("class","ss-content"),"rtl"===this.direction&&this.el.classList.add("rtl"),this.wrapper.appendChild(this.el);while(this.target.firstChild)this.el.appendChild(this.target.firstChild);this.target.appendChild(this.wrapper),this.target.insertAdjacentHTML("beforeend",this.bar),this.bar=this.target.lastChild,i(this.bar,this),this.moveBar(),e.addEventListener("resize",this.moveBar.bind(this)),this.el.addEventListener("scroll",this.moveBar.bind(this)),this.el.addEventListener("mouseenter",this.moveBar.bind(this)),this.target.classList.add("ss-container");var n=e.getComputedStyle(a);"0px"===n["height"]&&"0px"!==n["max-height"]&&(a.style.height=n["max-height"])}function c(){for(var e=t.querySelectorAll("*[ss-container]"),a=0;a<e.length;a++)n(e[a])}r.prototype={moveBar:function(e){var t=this.el.scrollHeight,n=this.el.clientHeight,i=this;this.scrollRatio=n/t;var r="rtl"===i.direction,c=r?i.target.clientWidth-i.bar.clientWidth+18:-1*(i.target.clientWidth-i.bar.clientWidth);a((function(){i.scrollRatio>=1?i.bar.classList.add("ss-hidden"):(i.bar.classList.remove("ss-hidden"),i.bar.style.cssText="height:"+Math.max(100*i.scrollRatio,10)+"%; top:"+i.el.scrollTop/t*100+"%;right:"+c+"px;")}))}},t.addEventListener("DOMContentLoaded",c),r.initEl=n,r.initAll=c;var o=r;return o}))},vYJ8:function(e,t,a){"use strict";var n,i=a("wx14"),r=a("zLVn"),c=a("TSYQ"),o=a.n(c),l=a("7j6X"),s=a("q1tI"),d=a.n(s),u=a("dRu9"),m=a("wsUu"),f=a("Qg85"),v=a("z+q/"),p={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function b(e,t){var a="offset"+e[0].toUpperCase()+e.slice(1),n=t[a],i=p[e];return n+parseInt(Object(l["a"])(t,i[0]),10)+parseInt(Object(l["a"])(t,i[1]),10)}var h=(n={},n[u["c"]]="collapse",n[u["d"]]="collapsing",n[u["b"]]="collapsing",n[u["a"]]="collapse show",n),g={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,getDimensionValue:b},E=d.a.forwardRef((function(e,t){var a=e.onEnter,n=e.onEntering,c=e.onEntered,l=e.onExit,p=e.onExiting,g=e.className,E=e.children,y=e.dimension,O=void 0===y?"height":y,j=e.getDimensionValue,w=void 0===j?b:j,k=Object(r["a"])(e,["onEnter","onEntering","onEntered","onExit","onExiting","className","children","dimension","getDimensionValue"]),x="function"===typeof O?O():O,N=Object(s["useMemo"])((function(){return Object(f["a"])((function(e){e.style[x]="0"}),a)}),[x,a]),_=Object(s["useMemo"])((function(){return Object(f["a"])((function(e){var t="scroll"+x[0].toUpperCase()+x.slice(1);e.style[x]=e[t]+"px"}),n)}),[x,n]),S=Object(s["useMemo"])((function(){return Object(f["a"])((function(e){e.style[x]=null}),c)}),[x,c]),C=Object(s["useMemo"])((function(){return Object(f["a"])((function(e){e.style[x]=w(x,e)+"px",Object(v["a"])(e)}),l)}),[l,w,x]),I=Object(s["useMemo"])((function(){return Object(f["a"])((function(e){e.style[x]=null}),p)}),[x,p]);return d.a.createElement(u["e"],Object(i["a"])({ref:t,addEndListener:m["a"]},k,{"aria-expanded":k.role?k.in:null,onEnter:N,onEntering:_,onEntered:S,onExit:C,onExiting:I}),(function(e,t){return d.a.cloneElement(E,Object(i["a"])({},t,{className:o()(g,E.props.className,h[e],"width"===x&&"width")}))}))}));E.defaultProps=g,t["a"]=E},"wFk/":function(e,t,a){"use strict";var n=a("k1fw"),i=a("oBTY"),r=a("9og8"),c=a("tJVT"),o=a("WmNS"),l=a.n(o),s=a("q1tI"),d=a.n(s),u=a("7U2o"),m=a("QojX"),f=a("HRRZ"),v=a("Dp36"),p=a("9kvl"),b=function(e){var t=e.id,a=e.setBookmarkedState,o=e.isShow,p=e.setShowStatus,b=e.sessionUser,h=e.source,g=void 0===h?"":h,E=e.isBookmarked,y=void 0!==E&&E,O=Object(s["useState"])(!1),j=Object(c["a"])(O,2),w=j[0],k=j[1],x=Object(s["useState"])([]),N=Object(c["a"])(x,2),_=N[0],S=N[1],C=Object(s["useState"])([]),I=Object(c["a"])(C,2),L=I[0],T=I[1],A=Object(s["useState"])({value:"",isInvalid:!1,errorMsg:""}),D=Object(c["a"])(A,2),R=D[0],B=D[1],M=Object(s["useState"])(""),z=Object(c["a"])(M,2),q=z[0],P=z[1],F=Object(s["useState"])(1),U=Object(c["a"])(F,2),H=U[0],Y=U[1];Object(s["useEffect"])((function(){0===_.length&&b&&o&&V()}),[o]);var V=function(){var e=Object(r["a"])(l.a.mark((function e(){var a;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(v["m"])({objectId:t});case 2:a=e.sent,a&&a.rows&&(S(a.rows),T(a.rows.filter((function(e){return e.is_bookmarked})).map((function(e){return e.id}))));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){p(!1),k(!1),B({value:"",isInvalid:!1,errorMsg:""}),P(""),Y(1)},K=function(e){e.is_bookmarked?T(L.filter((function(t){return t!==e.id}))):T([].concat(Object(i["a"])(L),[e.id])),S(_.map((function(t){return e.id===t.id&&(t.is_bookmarked=e.is_bookmarked?0:1),t})))},$=function(){var e=Object(r["a"])(l.a.mark((function e(){return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!w){e.next=10;break}if(R.value){e.next=4;break}return B(Object(n["a"])(Object(n["a"])({},R),{},{isInvalid:!0,errorMsg:"\u540d\u79f0\u5fc5\u586b"})),e.abrupt("return");case 4:return e.next=6,Object(v["b"])({name:R.value,description:q,is_private:H})["catch"]((function(e){null!==e&&void 0!==e&&e.isError&&B(Object(n["a"])(Object(n["a"])({},R),{},{isInvalid:!0,errorMsg:e.name}))}));case 6:V(),k(!w),e.next=13;break;case 10:Object(v["l"])({type:g,id:t,is_bookmark:0===L.length?0:1,archive_ids:L}),y!==Boolean(L.length)&&a(!(0===L.length)),p(!1);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return d.a.createElement(u["a"],{show:o,title:w?"\u521b\u5efa\u6536\u85cf\u5939":"\u6536\u85cf",onCancel:W,onOk:$},w?d.a.createElement(m["a"],{className:"bookmarklist-form",id:"bookmarkArchives"},d.a.createElement(f["a"],null,d.a.createElement(m["a"].Label,{htmlFor:"bookmarkArchiveName",className:"required"},"\u540d\u79f0")," ",d.a.createElement(m["a"].Control,{type:"text",className:"form-control",value:R.value,onChange:function(e){return B(Object(n["a"])(Object(n["a"])({},R),{},{value:e.target.value}))},placeholder:"\u6700\u591a\u8f93\u516532\u4e2a\u5b57",maxLength:32,autoComplete:"off",required:!0,isInvalid:R.isInvalid}),d.a.createElement(m["a"].Control.Feedback,{type:"invalid"},R.errorMsg)),d.a.createElement(f["a"],null,d.a.createElement(m["a"].Label,{htmlFor:"bookmarkArchiveDescription"},"\u63cf\u8ff0")," ",d.a.createElement(m["a"].Control,{as:"textarea",value:q,onChange:function(e){return P(e.target.value)},placeholder:"\u6700\u591a\u8f93\u5165256\u4e2a\u5b57",maxLength:256})),d.a.createElement("div",{className:"form-check"},d.a.createElement("input",{className:"form-check-input",type:"radio",name:"isPrivate",value:"1",onChange:function(){return Y(1)},checked:1===H,id:"bookmark-private"}),d.a.createElement("label",{className:"form-check-label",htmlFor:"bookmark-private"},"\u79c1\u5bc6\uff1a"),d.a.createElement("span",{className:"text-secondary"},"\u4ec5\u81ea\u5df1\u53ef\u89c1")),d.a.createElement("div",{className:"form-check"},d.a.createElement("input",{className:"form-check-input",type:"radio",name:"isPrivate",onChange:function(){return Y(0)},checked:0===H,id:"bookmark-public"}),d.a.createElement("label",{className:"form-check-label",htmlFor:"bookmark-public"},"\u516c\u5f00\uff1a"),d.a.createElement("span",{className:"text-secondary"},"\u516c\u5f00\u540e\u4e0d\u53ef\u518d\u8bbe\u7f6e\u4e3a\u79c1\u5bc6"))):d.a.createElement("form",null,d.a.createElement("div",{className:"form-group"},d.a.createElement("label",{className:"form-title"},"\u6dfb\u52a0\u5230\u6536\u85cf\u5939\uff1a"),null===_||void 0===_?void 0:_.map((function(e){return d.a.createElement("div",{className:"form-check mb-2",key:e.id},d.a.createElement("input",{className:"form-check-input",type:"checkbox",name:"bookmarkItem[]",id:e.id,value:e.id,onChange:function(){return K(e)},checked:Boolean(e.is_bookmarked)}),d.a.createElement("label",{className:"form-check-label",htmlFor:e.id},e.name,Boolean(e.is_private)&&d.a.createElement("span",{className:"text-secondary"},"\uff08\u79c1\u5bc6\uff09")))})),d.a.createElement("button",{className:"btn btn-link new-bookmark p-0",onClick:function(){return k(!0)}},"+ \u521b\u5efa\u6536\u85cf\u5939"))))};t["a"]=Object(p["connect"])((function(e){var t=e.global;return{sessionUser:t.sessionUser}}))(d.a.memo(b))},wroQ:function(e,t,a){},xQMv:function(e,t,a){e.exports=a.p+"static/bg-219.7a1acf4f.svg"}}]);